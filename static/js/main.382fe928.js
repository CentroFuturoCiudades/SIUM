/*! For license information please see main.382fe928.js.LICENSE.txt */
(()=>{var t={8210:function(t,e,n){var r;!function(i){"use strict";var o,a=1e9,s={precision:20,rounding:4,toExpNeg:-7,toExpPos:21,LN10:"2.302585092994045684017991454684364207601101488628772976033327900967572609677352480235997205089598298341967784042286"},l=!0,c="[DecimalError] ",u=c+"Invalid argument: ",h=c+"Exponent out of range: ",d=Math.floor,f=Math.pow,p=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,m=1e7,g=7,y=9007199254740991,v=d(y/g),_={};function b(t,e){var n,r,i,o,a,s,c,u,h=t.constructor,d=h.precision;if(!t.s||!e.s)return e.s||(e=new h(t)),l?k(e,d):e;if(c=t.d,u=e.d,a=t.e,i=e.e,c=c.slice(),o=a-i){for(o<0?(r=c,o=-o,s=u.length):(r=u,i=a,s=c.length),o>(s=(a=Math.ceil(d/g))>s?a+1:s+1)&&(o=s,r.length=1),r.reverse();o--;)r.push(0);r.reverse()}for((s=c.length)-(o=u.length)<0&&(o=s,r=u,u=c,c=r),n=0;o;)n=(c[--o]=c[o]+u[o]+n)/m|0,c[o]%=m;for(n&&(c.unshift(n),++i),s=c.length;0==c[--s];)c.pop();return e.d=c,e.e=i,l?k(e,d):e}function x(t,e,n){if(t!==~~t||t<e||t>n)throw Error(u+t)}function w(t){var e,n,r,i=t.length-1,o="",a=t[0];if(i>0){for(o+=a,e=1;e<i;e++)r=t[e]+"",(n=g-r.length)&&(o+=A(n)),o+=r;a=t[e],(n=g-(r=a+"").length)&&(o+=A(n))}else if(0===a)return"0";for(;a%10===0;)a/=10;return o+a}_.absoluteValue=_.abs=function(){var t=new this.constructor(this);return t.s&&(t.s=1),t},_.comparedTo=_.cmp=function(t){var e,n,r,i,o=this;if(t=new o.constructor(t),o.s!==t.s)return o.s||-t.s;if(o.e!==t.e)return o.e>t.e^o.s<0?1:-1;for(e=0,n=(r=o.d.length)<(i=t.d.length)?r:i;e<n;++e)if(o.d[e]!==t.d[e])return o.d[e]>t.d[e]^o.s<0?1:-1;return r===i?0:r>i^o.s<0?1:-1},_.decimalPlaces=_.dp=function(){var t=this,e=t.d.length-1,n=(e-t.e)*g;if(e=t.d[e])for(;e%10==0;e/=10)n--;return n<0?0:n},_.dividedBy=_.div=function(t){return S(this,new this.constructor(t))},_.dividedToIntegerBy=_.idiv=function(t){var e=this.constructor;return k(S(this,new e(t),0,1),e.precision)},_.equals=_.eq=function(t){return!this.cmp(t)},_.exponent=function(){return T(this)},_.greaterThan=_.gt=function(t){return this.cmp(t)>0},_.greaterThanOrEqualTo=_.gte=function(t){return this.cmp(t)>=0},_.isInteger=_.isint=function(){return this.e>this.d.length-2},_.isNegative=_.isneg=function(){return this.s<0},_.isPositive=_.ispos=function(){return this.s>0},_.isZero=function(){return 0===this.s},_.lessThan=_.lt=function(t){return this.cmp(t)<0},_.lessThanOrEqualTo=_.lte=function(t){return this.cmp(t)<1},_.logarithm=_.log=function(t){var e,n=this,r=n.constructor,i=r.precision,a=i+5;if(void 0===t)t=new r(10);else if((t=new r(t)).s<1||t.eq(o))throw Error(c+"NaN");if(n.s<1)throw Error(c+(n.s?"NaN":"-Infinity"));return n.eq(o)?new r(0):(l=!1,e=S(C(n,a),C(t,a),a),l=!0,k(e,i))},_.minus=_.sub=function(t){var e=this;return t=new e.constructor(t),e.s==t.s?I(e,t):b(e,(t.s=-t.s,t))},_.modulo=_.mod=function(t){var e,n=this,r=n.constructor,i=r.precision;if(!(t=new r(t)).s)throw Error(c+"NaN");return n.s?(l=!1,e=S(n,t,0,1).times(t),l=!0,n.minus(e)):k(new r(n),i)},_.naturalExponential=_.exp=function(){return E(this)},_.naturalLogarithm=_.ln=function(){return C(this)},_.negated=_.neg=function(){var t=new this.constructor(this);return t.s=-t.s||0,t},_.plus=_.add=function(t){var e=this;return t=new e.constructor(t),e.s==t.s?b(e,t):I(e,(t.s=-t.s,t))},_.precision=_.sd=function(t){var e,n,r,i=this;if(void 0!==t&&t!==!!t&&1!==t&&0!==t)throw Error(u+t);if(e=T(i)+1,n=(r=i.d.length-1)*g+1,r=i.d[r]){for(;r%10==0;r/=10)n--;for(r=i.d[0];r>=10;r/=10)n++}return t&&e>n?e:n},_.squareRoot=_.sqrt=function(){var t,e,n,r,i,o,a,s=this,u=s.constructor;if(s.s<1){if(!s.s)return new u(0);throw Error(c+"NaN")}for(t=T(s),l=!1,0==(i=Math.sqrt(+s))||i==1/0?(((e=w(s.d)).length+t)%2==0&&(e+="0"),i=Math.sqrt(e),t=d((t+1)/2)-(t<0||t%2),r=new u(e=i==1/0?"5e"+t:(e=i.toExponential()).slice(0,e.indexOf("e")+1)+t)):r=new u(i.toString()),i=a=(n=u.precision)+3;;)if(r=(o=r).plus(S(s,o,a+2)).times(.5),w(o.d).slice(0,a)===(e=w(r.d)).slice(0,a)){if(e=e.slice(a-3,a+1),i==a&&"4999"==e){if(k(o,n+1,0),o.times(o).eq(s)){r=o;break}}else if("9999"!=e)break;a+=4}return l=!0,k(r,n)},_.times=_.mul=function(t){var e,n,r,i,o,a,s,c,u,h=this,d=h.constructor,f=h.d,p=(t=new d(t)).d;if(!h.s||!t.s)return new d(0);for(t.s*=h.s,n=h.e+t.e,(c=f.length)<(u=p.length)&&(o=f,f=p,p=o,a=c,c=u,u=a),o=[],r=a=c+u;r--;)o.push(0);for(r=u;--r>=0;){for(e=0,i=c+r;i>r;)s=o[i]+p[r]*f[i-r-1]+e,o[i--]=s%m|0,e=s/m|0;o[i]=(o[i]+e)%m|0}for(;!o[--a];)o.pop();return e?++n:o.shift(),t.d=o,t.e=n,l?k(t,d.precision):t},_.toDecimalPlaces=_.todp=function(t,e){var n=this,r=n.constructor;return n=new r(n),void 0===t?n:(x(t,0,a),void 0===e?e=r.rounding:x(e,0,8),k(n,t+T(n)+1,e))},_.toExponential=function(t,e){var n,r=this,i=r.constructor;return void 0===t?n=O(r,!0):(x(t,0,a),void 0===e?e=i.rounding:x(e,0,8),n=O(r=k(new i(r),t+1,e),!0,t+1)),n},_.toFixed=function(t,e){var n,r,i=this,o=i.constructor;return void 0===t?O(i):(x(t,0,a),void 0===e?e=o.rounding:x(e,0,8),n=O((r=k(new o(i),t+T(i)+1,e)).abs(),!1,t+T(r)+1),i.isneg()&&!i.isZero()?"-"+n:n)},_.toInteger=_.toint=function(){var t=this,e=t.constructor;return k(new e(t),T(t)+1,e.rounding)},_.toNumber=function(){return+this},_.toPower=_.pow=function(t){var e,n,r,i,a,s,u=this,h=u.constructor,f=+(t=new h(t));if(!t.s)return new h(o);if(!(u=new h(u)).s){if(t.s<1)throw Error(c+"Infinity");return u}if(u.eq(o))return u;if(r=h.precision,t.eq(o))return k(u,r);if(s=(e=t.e)>=(n=t.d.length-1),a=u.s,s){if((n=f<0?-f:f)<=y){for(i=new h(o),e=Math.ceil(r/g+4),l=!1;n%2&&L((i=i.times(u)).d,e),0!==(n=d(n/2));)L((u=u.times(u)).d,e);return l=!0,t.s<0?new h(o).div(i):k(i,r)}}else if(a<0)throw Error(c+"NaN");return a=a<0&&1&t.d[Math.max(e,n)]?-1:1,u.s=1,l=!1,i=t.times(C(u,r+12)),l=!0,(i=E(i)).s=a,i},_.toPrecision=function(t,e){var n,r,i=this,o=i.constructor;return void 0===t?r=O(i,(n=T(i))<=o.toExpNeg||n>=o.toExpPos):(x(t,1,a),void 0===e?e=o.rounding:x(e,0,8),r=O(i=k(new o(i),t,e),t<=(n=T(i))||n<=o.toExpNeg,t)),r},_.toSignificantDigits=_.tosd=function(t,e){var n=this.constructor;return void 0===t?(t=n.precision,e=n.rounding):(x(t,1,a),void 0===e?e=n.rounding:x(e,0,8)),k(new n(this),t,e)},_.toString=_.valueOf=_.val=_.toJSON=function(){var t=this,e=T(t),n=t.constructor;return O(t,e<=n.toExpNeg||e>=n.toExpPos)};var S=function(){function t(t,e){var n,r=0,i=t.length;for(t=t.slice();i--;)n=t[i]*e+r,t[i]=n%m|0,r=n/m|0;return r&&t.unshift(r),t}function e(t,e,n,r){var i,o;if(n!=r)o=n>r?1:-1;else for(i=o=0;i<n;i++)if(t[i]!=e[i]){o=t[i]>e[i]?1:-1;break}return o}function n(t,e,n){for(var r=0;n--;)t[n]-=r,r=t[n]<e[n]?1:0,t[n]=r*m+t[n]-e[n];for(;!t[0]&&t.length>1;)t.shift()}return function(r,i,o,a){var s,l,u,h,d,f,p,y,v,_,b,x,w,S,E,M,A,C,P=r.constructor,I=r.s==i.s?1:-1,O=r.d,L=i.d;if(!r.s)return new P(r);if(!i.s)throw Error(c+"Division by zero");for(l=r.e-i.e,A=L.length,E=O.length,y=(p=new P(I)).d=[],u=0;L[u]==(O[u]||0);)++u;if(L[u]>(O[u]||0)&&--l,(x=null==o?o=P.precision:a?o+(T(r)-T(i))+1:o)<0)return new P(0);if(x=x/g+2|0,u=0,1==A)for(h=0,L=L[0],x++;(u<E||h)&&x--;u++)w=h*m+(O[u]||0),y[u]=w/L|0,h=w%L|0;else{for((h=m/(L[0]+1)|0)>1&&(L=t(L,h),O=t(O,h),A=L.length,E=O.length),S=A,_=(v=O.slice(0,A)).length;_<A;)v[_++]=0;(C=L.slice()).unshift(0),M=L[0],L[1]>=m/2&&++M;do{h=0,(s=e(L,v,A,_))<0?(b=v[0],A!=_&&(b=b*m+(v[1]||0)),(h=b/M|0)>1?(h>=m&&(h=m-1),1==(s=e(d=t(L,h),v,f=d.length,_=v.length))&&(h--,n(d,A<f?C:L,f))):(0==h&&(s=h=1),d=L.slice()),(f=d.length)<_&&d.unshift(0),n(v,d,_),-1==s&&(s=e(L,v,A,_=v.length))<1&&(h++,n(v,A<_?C:L,_)),_=v.length):0===s&&(h++,v=[0]),y[u++]=h,s&&v[0]?v[_++]=O[S]||0:(v=[O[S]],_=1)}while((S++<E||void 0!==v[0])&&x--)}return y[0]||y.shift(),p.e=l,k(p,a?o+T(p)+1:o)}}();function E(t,e){var n,r,i,a,s,c=0,u=0,d=t.constructor,p=d.precision;if(T(t)>16)throw Error(h+T(t));if(!t.s)return new d(o);for(null==e?(l=!1,s=p):s=e,a=new d(.03125);t.abs().gte(.1);)t=t.times(a),u+=5;for(s+=Math.log(f(2,u))/Math.LN10*2+5|0,n=r=i=new d(o),d.precision=s;;){if(r=k(r.times(t),s),n=n.times(++c),w((a=i.plus(S(r,n,s))).d).slice(0,s)===w(i.d).slice(0,s)){for(;u--;)i=k(i.times(i),s);return d.precision=p,null==e?(l=!0,k(i,p)):i}i=a}}function T(t){for(var e=t.e*g,n=t.d[0];n>=10;n/=10)e++;return e}function M(t,e,n){if(e>t.LN10.sd())throw l=!0,n&&(t.precision=n),Error(c+"LN10 precision limit exceeded");return k(new t(t.LN10),e)}function A(t){for(var e="";t--;)e+="0";return e}function C(t,e){var n,r,i,a,s,u,h,d,f,p=1,m=t,g=m.d,y=m.constructor,v=y.precision;if(m.s<1)throw Error(c+(m.s?"NaN":"-Infinity"));if(m.eq(o))return new y(0);if(null==e?(l=!1,d=v):d=e,m.eq(10))return null==e&&(l=!0),M(y,d);if(d+=10,y.precision=d,r=(n=w(g)).charAt(0),a=T(m),!(Math.abs(a)<15e14))return h=M(y,d+2,v).times(a+""),m=C(new y(r+"."+n.slice(1)),d-10).plus(h),y.precision=v,null==e?(l=!0,k(m,v)):m;for(;r<7&&1!=r||1==r&&n.charAt(1)>3;)r=(n=w((m=m.times(t)).d)).charAt(0),p++;for(a=T(m),r>1?(m=new y("0."+n),a++):m=new y(r+"."+n.slice(1)),u=s=m=S(m.minus(o),m.plus(o),d),f=k(m.times(m),d),i=3;;){if(s=k(s.times(f),d),w((h=u.plus(S(s,new y(i),d))).d).slice(0,d)===w(u.d).slice(0,d))return u=u.times(2),0!==a&&(u=u.plus(M(y,d+2,v).times(a+""))),u=S(u,new y(p),d),y.precision=v,null==e?(l=!0,k(u,v)):u;u=h,i+=2}}function P(t,e){var n,r,i;for((n=e.indexOf("."))>-1&&(e=e.replace(".","")),(r=e.search(/e/i))>0?(n<0&&(n=r),n+=+e.slice(r+1),e=e.substring(0,r)):n<0&&(n=e.length),r=0;48===e.charCodeAt(r);)++r;for(i=e.length;48===e.charCodeAt(i-1);)--i;if(e=e.slice(r,i)){if(i-=r,n=n-r-1,t.e=d(n/g),t.d=[],r=(n+1)%g,n<0&&(r+=g),r<i){for(r&&t.d.push(+e.slice(0,r)),i-=g;r<i;)t.d.push(+e.slice(r,r+=g));e=e.slice(r),r=g-e.length}else r-=i;for(;r--;)e+="0";if(t.d.push(+e),l&&(t.e>v||t.e<-v))throw Error(h+n)}else t.s=0,t.e=0,t.d=[0];return t}function k(t,e,n){var r,i,o,a,s,c,u,p,y=t.d;for(a=1,o=y[0];o>=10;o/=10)a++;if((r=e-a)<0)r+=g,i=e,u=y[p=0];else{if((p=Math.ceil((r+1)/g))>=(o=y.length))return t;for(u=o=y[p],a=1;o>=10;o/=10)a++;i=(r%=g)-g+a}if(void 0!==n&&(s=u/(o=f(10,a-i-1))%10|0,c=e<0||void 0!==y[p+1]||u%o,c=n<4?(s||c)&&(0==n||n==(t.s<0?3:2)):s>5||5==s&&(4==n||c||6==n&&(r>0?i>0?u/f(10,a-i):0:y[p-1])%10&1||n==(t.s<0?8:7))),e<1||!y[0])return c?(o=T(t),y.length=1,e=e-o-1,y[0]=f(10,(g-e%g)%g),t.e=d(-e/g)||0):(y.length=1,y[0]=t.e=t.s=0),t;if(0==r?(y.length=p,o=1,p--):(y.length=p+1,o=f(10,g-r),y[p]=i>0?(u/f(10,a-i)%f(10,i)|0)*o:0),c)for(;;){if(0==p){(y[0]+=o)==m&&(y[0]=1,++t.e);break}if(y[p]+=o,y[p]!=m)break;y[p--]=0,o=1}for(r=y.length;0===y[--r];)y.pop();if(l&&(t.e>v||t.e<-v))throw Error(h+T(t));return t}function I(t,e){var n,r,i,o,a,s,c,u,h,d,f=t.constructor,p=f.precision;if(!t.s||!e.s)return e.s?e.s=-e.s:e=new f(t),l?k(e,p):e;if(c=t.d,d=e.d,r=e.e,u=t.e,c=c.slice(),a=u-r){for((h=a<0)?(n=c,a=-a,s=d.length):(n=d,r=u,s=c.length),a>(i=Math.max(Math.ceil(p/g),s)+2)&&(a=i,n.length=1),n.reverse(),i=a;i--;)n.push(0);n.reverse()}else{for((h=(i=c.length)<(s=d.length))&&(s=i),i=0;i<s;i++)if(c[i]!=d[i]){h=c[i]<d[i];break}a=0}for(h&&(n=c,c=d,d=n,e.s=-e.s),s=c.length,i=d.length-s;i>0;--i)c[s++]=0;for(i=d.length;i>a;){if(c[--i]<d[i]){for(o=i;o&&0===c[--o];)c[o]=m-1;--c[o],c[i]+=m}c[i]-=d[i]}for(;0===c[--s];)c.pop();for(;0===c[0];c.shift())--r;return c[0]?(e.d=c,e.e=r,l?k(e,p):e):new f(0)}function O(t,e,n){var r,i=T(t),o=w(t.d),a=o.length;return e?(n&&(r=n-a)>0?o=o.charAt(0)+"."+o.slice(1)+A(r):a>1&&(o=o.charAt(0)+"."+o.slice(1)),o=o+(i<0?"e":"e+")+i):i<0?(o="0."+A(-i-1)+o,n&&(r=n-a)>0&&(o+=A(r))):i>=a?(o+=A(i+1-a),n&&(r=n-i-1)>0&&(o=o+"."+A(r))):((r=i+1)<a&&(o=o.slice(0,r)+"."+o.slice(r)),n&&(r=n-a)>0&&(i+1===a&&(o+="."),o+=A(r))),t.s<0?"-"+o:o}function L(t,e){if(t.length>e)return t.length=e,!0}function j(t){if(!t||"object"!==typeof t)throw Error(c+"Object expected");var e,n,r,i=["precision",1,a,"rounding",0,8,"toExpNeg",-1/0,0,"toExpPos",0,1/0];for(e=0;e<i.length;e+=3)if(void 0!==(r=t[n=i[e]])){if(!(d(r)===r&&r>=i[e+1]&&r<=i[e+2]))throw Error(u+n+": "+r);this[n]=r}if(void 0!==(r=t[n="LN10"])){if(r!=Math.LN10)throw Error(u+n+": "+r);this[n]=new this(r)}return this}s=function t(e){var n,r,i;function o(t){var e=this;if(!(e instanceof o))return new o(t);if(e.constructor=o,t instanceof o)return e.s=t.s,e.e=t.e,void(e.d=(t=t.d)?t.slice():t);if("number"===typeof t){if(0*t!==0)throw Error(u+t);if(t>0)e.s=1;else{if(!(t<0))return e.s=0,e.e=0,void(e.d=[0]);t=-t,e.s=-1}return t===~~t&&t<1e7?(e.e=0,void(e.d=[t])):P(e,t.toString())}if("string"!==typeof t)throw Error(u+t);if(45===t.charCodeAt(0)?(t=t.slice(1),e.s=-1):e.s=1,!p.test(t))throw Error(u+t);P(e,t)}if(o.prototype=_,o.ROUND_UP=0,o.ROUND_DOWN=1,o.ROUND_CEIL=2,o.ROUND_FLOOR=3,o.ROUND_HALF_UP=4,o.ROUND_HALF_DOWN=5,o.ROUND_HALF_EVEN=6,o.ROUND_HALF_CEIL=7,o.ROUND_HALF_FLOOR=8,o.clone=t,o.config=o.set=j,void 0===e&&(e={}),e)for(i=["precision","rounding","toExpNeg","toExpPos","LN10"],n=0;n<i.length;)e.hasOwnProperty(r=i[n++])||(e[r]=this[r]);return o.config(e),o}(s),s.default=s.Decimal=s,o=new s(1),void 0===(r=function(){return s}.call(e,n,e,t))||(t.exports=r)}()},973:t=>{"use strict";function e(t,e,r){r=r||2;var o,a,s,l,h,d,p,m=e&&e.length,g=m?e[0]*r:t.length,y=n(t,0,g,r,!0),v=[];if(!y||y.next===y.prev)return v;if(m&&(y=function(t,e,r,i){var o,a,s,l=[];for(o=0,a=e.length;o<a;o++)(s=n(t,e[o]*i,o<a-1?e[o+1]*i:t.length,i,!1))===s.next&&(s.steiner=!0),l.push(f(s));for(l.sort(c),o=0;o<l.length;o++)r=u(l[o],r);return r}(t,e,y,r)),t.length>80*r){o=s=t[0],a=l=t[1];for(var _=r;_<g;_+=r)(h=t[_])<o&&(o=h),(d=t[_+1])<a&&(a=d),h>s&&(s=h),d>l&&(l=d);p=0!==(p=Math.max(s-o,l-a))?32767/p:0}return i(y,v,r,o,a,p,0),v}function n(t,e,n,r,i){var o,a;if(i===M(t,e,n,r)>0)for(o=e;o<n;o+=r)a=S(o,t[o],t[o+1],a);else for(o=n-r;o>=e;o-=r)a=S(o,t[o],t[o+1],a);return a&&y(a,a.next)&&(E(a),a=a.next),a}function r(t,e){if(!t)return t;e||(e=t);var n,r=t;do{if(n=!1,r.steiner||!y(r,r.next)&&0!==g(r.prev,r,r.next))r=r.next;else{if(E(r),(r=e=r.prev)===r.next)break;n=!0}}while(n||r!==e);return e}function i(t,e,n,c,u,h,f){if(t){!f&&h&&function(t,e,n,r){var i=t;do{0===i.z&&(i.z=d(i.x,i.y,e,n,r)),i.prevZ=i.prev,i.nextZ=i.next,i=i.next}while(i!==t);i.prevZ.nextZ=null,i.prevZ=null,function(t){var e,n,r,i,o,a,s,l,c=1;do{for(n=t,t=null,o=null,a=0;n;){for(a++,r=n,s=0,e=0;e<c&&(s++,r=r.nextZ);e++);for(l=c;s>0||l>0&&r;)0!==s&&(0===l||!r||n.z<=r.z)?(i=n,n=n.nextZ,s--):(i=r,r=r.nextZ,l--),o?o.nextZ=i:t=i,i.prevZ=o,o=i;n=r}o.nextZ=null,c*=2}while(a>1)}(i)}(t,c,u,h);for(var p,m,g=t;t.prev!==t.next;)if(p=t.prev,m=t.next,h?a(t,c,u,h):o(t))e.push(p.i/n|0),e.push(t.i/n|0),e.push(m.i/n|0),E(t),t=m.next,g=m.next;else if((t=m)===g){f?1===f?i(t=s(r(t),e,n),e,n,c,u,h,2):2===f&&l(t,e,n,c,u,h):i(r(t),e,n,c,u,h,1);break}}}function o(t){var e=t.prev,n=t,r=t.next;if(g(e,n,r)>=0)return!1;for(var i=e.x,o=n.x,a=r.x,s=e.y,l=n.y,c=r.y,u=i<o?i<a?i:a:o<a?o:a,h=s<l?s<c?s:c:l<c?l:c,d=i>o?i>a?i:a:o>a?o:a,f=s>l?s>c?s:c:l>c?l:c,m=r.next;m!==e;){if(m.x>=u&&m.x<=d&&m.y>=h&&m.y<=f&&p(i,s,o,l,a,c,m.x,m.y)&&g(m.prev,m,m.next)>=0)return!1;m=m.next}return!0}function a(t,e,n,r){var i=t.prev,o=t,a=t.next;if(g(i,o,a)>=0)return!1;for(var s=i.x,l=o.x,c=a.x,u=i.y,h=o.y,f=a.y,m=s<l?s<c?s:c:l<c?l:c,y=u<h?u<f?u:f:h<f?h:f,v=s>l?s>c?s:c:l>c?l:c,_=u>h?u>f?u:f:h>f?h:f,b=d(m,y,e,n,r),x=d(v,_,e,n,r),w=t.prevZ,S=t.nextZ;w&&w.z>=b&&S&&S.z<=x;){if(w.x>=m&&w.x<=v&&w.y>=y&&w.y<=_&&w!==i&&w!==a&&p(s,u,l,h,c,f,w.x,w.y)&&g(w.prev,w,w.next)>=0)return!1;if(w=w.prevZ,S.x>=m&&S.x<=v&&S.y>=y&&S.y<=_&&S!==i&&S!==a&&p(s,u,l,h,c,f,S.x,S.y)&&g(S.prev,S,S.next)>=0)return!1;S=S.nextZ}for(;w&&w.z>=b;){if(w.x>=m&&w.x<=v&&w.y>=y&&w.y<=_&&w!==i&&w!==a&&p(s,u,l,h,c,f,w.x,w.y)&&g(w.prev,w,w.next)>=0)return!1;w=w.prevZ}for(;S&&S.z<=x;){if(S.x>=m&&S.x<=v&&S.y>=y&&S.y<=_&&S!==i&&S!==a&&p(s,u,l,h,c,f,S.x,S.y)&&g(S.prev,S,S.next)>=0)return!1;S=S.nextZ}return!0}function s(t,e,n){var i=t;do{var o=i.prev,a=i.next.next;!y(o,a)&&v(o,i,i.next,a)&&x(o,a)&&x(a,o)&&(e.push(o.i/n|0),e.push(i.i/n|0),e.push(a.i/n|0),E(i),E(i.next),i=t=a),i=i.next}while(i!==t);return r(i)}function l(t,e,n,o,a,s){var l=t;do{for(var c=l.next.next;c!==l.prev;){if(l.i!==c.i&&m(l,c)){var u=w(l,c);return l=r(l,l.next),u=r(u,u.next),i(l,e,n,o,a,s,0),void i(u,e,n,o,a,s,0)}c=c.next}l=l.next}while(l!==t)}function c(t,e){return t.x-e.x}function u(t,e){var n=function(t,e){var n,r=e,i=t.x,o=t.y,a=-1/0;do{if(o<=r.y&&o>=r.next.y&&r.next.y!==r.y){var s=r.x+(o-r.y)*(r.next.x-r.x)/(r.next.y-r.y);if(s<=i&&s>a&&(a=s,n=r.x<r.next.x?r:r.next,s===i))return n}r=r.next}while(r!==e);if(!n)return null;var l,c=n,u=n.x,d=n.y,f=1/0;r=n;do{i>=r.x&&r.x>=u&&i!==r.x&&p(o<d?i:a,o,u,d,o<d?a:i,o,r.x,r.y)&&(l=Math.abs(o-r.y)/(i-r.x),x(r,t)&&(l<f||l===f&&(r.x>n.x||r.x===n.x&&h(n,r)))&&(n=r,f=l)),r=r.next}while(r!==c);return n}(t,e);if(!n)return e;var i=w(n,t);return r(i,i.next),r(n,n.next)}function h(t,e){return g(t.prev,t,e.prev)<0&&g(e.next,t,t.next)<0}function d(t,e,n,r,i){return(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=(t-n)*i|0)|t<<8))|t<<4))|t<<2))|t<<1))|(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=(e-r)*i|0)|e<<8))|e<<4))|e<<2))|e<<1))<<1}function f(t){var e=t,n=t;do{(e.x<n.x||e.x===n.x&&e.y<n.y)&&(n=e),e=e.next}while(e!==t);return n}function p(t,e,n,r,i,o,a,s){return(i-a)*(e-s)>=(t-a)*(o-s)&&(t-a)*(r-s)>=(n-a)*(e-s)&&(n-a)*(o-s)>=(i-a)*(r-s)}function m(t,e){return t.next.i!==e.i&&t.prev.i!==e.i&&!function(t,e){var n=t;do{if(n.i!==t.i&&n.next.i!==t.i&&n.i!==e.i&&n.next.i!==e.i&&v(n,n.next,t,e))return!0;n=n.next}while(n!==t);return!1}(t,e)&&(x(t,e)&&x(e,t)&&function(t,e){var n=t,r=!1,i=(t.x+e.x)/2,o=(t.y+e.y)/2;do{n.y>o!==n.next.y>o&&n.next.y!==n.y&&i<(n.next.x-n.x)*(o-n.y)/(n.next.y-n.y)+n.x&&(r=!r),n=n.next}while(n!==t);return r}(t,e)&&(g(t.prev,t,e.prev)||g(t,e.prev,e))||y(t,e)&&g(t.prev,t,t.next)>0&&g(e.prev,e,e.next)>0)}function g(t,e,n){return(e.y-t.y)*(n.x-e.x)-(e.x-t.x)*(n.y-e.y)}function y(t,e){return t.x===e.x&&t.y===e.y}function v(t,e,n,r){var i=b(g(t,e,n)),o=b(g(t,e,r)),a=b(g(n,r,t)),s=b(g(n,r,e));return i!==o&&a!==s||(!(0!==i||!_(t,n,e))||(!(0!==o||!_(t,r,e))||(!(0!==a||!_(n,t,r))||!(0!==s||!_(n,e,r)))))}function _(t,e,n){return e.x<=Math.max(t.x,n.x)&&e.x>=Math.min(t.x,n.x)&&e.y<=Math.max(t.y,n.y)&&e.y>=Math.min(t.y,n.y)}function b(t){return t>0?1:t<0?-1:0}function x(t,e){return g(t.prev,t,t.next)<0?g(t,e,t.next)>=0&&g(t,t.prev,e)>=0:g(t,e,t.prev)<0||g(t,t.next,e)<0}function w(t,e){var n=new T(t.i,t.x,t.y),r=new T(e.i,e.x,e.y),i=t.next,o=e.prev;return t.next=e,e.prev=t,n.next=i,i.prev=n,r.next=n,n.prev=r,o.next=r,r.prev=o,r}function S(t,e,n,r){var i=new T(t,e,n);return r?(i.next=r.next,i.prev=r,r.next.prev=i,r.next=i):(i.prev=i,i.next=i),i}function E(t){t.next.prev=t.prev,t.prev.next=t.next,t.prevZ&&(t.prevZ.nextZ=t.nextZ),t.nextZ&&(t.nextZ.prevZ=t.prevZ)}function T(t,e,n){this.i=t,this.x=e,this.y=n,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}function M(t,e,n,r){for(var i=0,o=e,a=n-r;o<n;o+=r)i+=(t[a]-t[o])*(t[o+1]+t[a+1]),a=o;return i}t.exports=e,t.exports.default=e,e.deviation=function(t,e,n,r){var i=e&&e.length,o=i?e[0]*n:t.length,a=Math.abs(M(t,0,o,n));if(i)for(var s=0,l=e.length;s<l;s++){var c=e[s]*n,u=s<l-1?e[s+1]*n:t.length;a-=Math.abs(M(t,c,u,n))}var h=0;for(s=0;s<r.length;s+=3){var d=r[s]*n,f=r[s+1]*n,p=r[s+2]*n;h+=Math.abs((t[d]-t[p])*(t[f+1]-t[d+1])-(t[d]-t[f])*(t[p+1]-t[d+1]))}return 0===a&&0===h?0:Math.abs((h-a)/a)},e.flatten=function(t){for(var e=t[0][0].length,n={vertices:[],holes:[],dimensions:e},r=0,i=0;i<t.length;i++){for(var o=0;o<t[i].length;o++)for(var a=0;a<e;a++)n.vertices.push(t[i][o][a]);i>0&&(r+=t[i-1].length,n.holes.push(r))}return n}},7283:t=>{"use strict";var e=Object.prototype.hasOwnProperty,n="~";function r(){}function i(t,e,n){this.fn=t,this.context=e,this.once=n||!1}function o(t,e,r,o,a){if("function"!==typeof r)throw new TypeError("The listener must be a function");var s=new i(r,o||t,a),l=n?n+e:e;return t._events[l]?t._events[l].fn?t._events[l]=[t._events[l],s]:t._events[l].push(s):(t._events[l]=s,t._eventsCount++),t}function a(t,e){0===--t._eventsCount?t._events=new r:delete t._events[e]}function s(){this._events=new r,this._eventsCount=0}Object.create&&(r.prototype=Object.create(null),(new r).__proto__||(n=!1)),s.prototype.eventNames=function(){var t,r,i=[];if(0===this._eventsCount)return i;for(r in t=this._events)e.call(t,r)&&i.push(n?r.slice(1):r);return Object.getOwnPropertySymbols?i.concat(Object.getOwnPropertySymbols(t)):i},s.prototype.listeners=function(t){var e=n?n+t:t,r=this._events[e];if(!r)return[];if(r.fn)return[r.fn];for(var i=0,o=r.length,a=new Array(o);i<o;i++)a[i]=r[i].fn;return a},s.prototype.listenerCount=function(t){var e=n?n+t:t,r=this._events[e];return r?r.fn?1:r.length:0},s.prototype.emit=function(t,e,r,i,o,a){var s=n?n+t:t;if(!this._events[s])return!1;var l,c,u=this._events[s],h=arguments.length;if(u.fn){switch(u.once&&this.removeListener(t,u.fn,void 0,!0),h){case 1:return u.fn.call(u.context),!0;case 2:return u.fn.call(u.context,e),!0;case 3:return u.fn.call(u.context,e,r),!0;case 4:return u.fn.call(u.context,e,r,i),!0;case 5:return u.fn.call(u.context,e,r,i,o),!0;case 6:return u.fn.call(u.context,e,r,i,o,a),!0}for(c=1,l=new Array(h-1);c<h;c++)l[c-1]=arguments[c];u.fn.apply(u.context,l)}else{var d,f=u.length;for(c=0;c<f;c++)switch(u[c].once&&this.removeListener(t,u[c].fn,void 0,!0),h){case 1:u[c].fn.call(u[c].context);break;case 2:u[c].fn.call(u[c].context,e);break;case 3:u[c].fn.call(u[c].context,e,r);break;case 4:u[c].fn.call(u[c].context,e,r,i);break;default:if(!l)for(d=1,l=new Array(h-1);d<h;d++)l[d-1]=arguments[d];u[c].fn.apply(u[c].context,l)}}return!0},s.prototype.on=function(t,e,n){return o(this,t,e,n,!1)},s.prototype.once=function(t,e,n){return o(this,t,e,n,!0)},s.prototype.removeListener=function(t,e,r,i){var o=n?n+t:t;if(!this._events[o])return this;if(!e)return a(this,o),this;var s=this._events[o];if(s.fn)s.fn!==e||i&&!s.once||r&&s.context!==r||a(this,o);else{for(var l=0,c=[],u=s.length;l<u;l++)(s[l].fn!==e||i&&!s[l].once||r&&s[l].context!==r)&&c.push(s[l]);c.length?this._events[o]=1===c.length?c[0]:c:a(this,o)}return this},s.prototype.removeAllListeners=function(t){var e;return t?(e=n?n+t:t,this._events[e]&&a(this,e)):(this._events=new r,this._eventsCount=0),this},s.prototype.off=s.prototype.removeListener,s.prototype.addListener=s.prototype.on,s.prefixed=n,s.EventEmitter=s,t.exports=s},2450:function(t,e,n){var r,i,o;i=[],void 0===(o="function"===typeof(r=function(){"use strict";function e(t,e){return"undefined"==typeof e?e={autoBom:!1}:"object"!=typeof e&&(console.warn("Deprecated: Expected third argument to be a object"),e={autoBom:!e}),e.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(t.type)?new Blob(["\ufeff",t],{type:t.type}):t}function r(t,e,n){var r=new XMLHttpRequest;r.open("GET",t),r.responseType="blob",r.onload=function(){l(r.response,e,n)},r.onerror=function(){console.error("could not download file")},r.send()}function i(t){var e=new XMLHttpRequest;e.open("HEAD",t,!1);try{e.send()}catch(t){}return 200<=e.status&&299>=e.status}function o(t){try{t.dispatchEvent(new MouseEvent("click"))}catch(r){var e=document.createEvent("MouseEvents");e.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),t.dispatchEvent(e)}}var a="object"==typeof window&&window.window===window?window:"object"==typeof self&&self.self===self?self:"object"==typeof n.g&&n.g.global===n.g?n.g:void 0,s=a.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),l=a.saveAs||("object"!=typeof window||window!==a?function(){}:"download"in HTMLAnchorElement.prototype&&!s?function(t,e,n){var s=a.URL||a.webkitURL,l=document.createElement("a");e=e||t.name||"download",l.download=e,l.rel="noopener","string"==typeof t?(l.href=t,l.origin===location.origin?o(l):i(l.href)?r(t,e,n):o(l,l.target="_blank")):(l.href=s.createObjectURL(t),setTimeout((function(){s.revokeObjectURL(l.href)}),4e4),setTimeout((function(){o(l)}),0))}:"msSaveOrOpenBlob"in navigator?function(t,n,a){if(n=n||t.name||"download","string"!=typeof t)navigator.msSaveOrOpenBlob(e(t,a),n);else if(i(t))r(t,n,a);else{var s=document.createElement("a");s.href=t,s.target="_blank",setTimeout((function(){o(s)}))}}:function(t,e,n,i){if((i=i||open("","_blank"))&&(i.document.title=i.document.body.innerText="downloading..."),"string"==typeof t)return r(t,e,n);var o="application/octet-stream"===t.type,l=/constructor/i.test(a.HTMLElement)||a.safari,c=/CriOS\/[\d]+/.test(navigator.userAgent);if((c||o&&l||s)&&"undefined"!=typeof FileReader){var u=new FileReader;u.onloadend=function(){var t=u.result;t=c?t:t.replace(/^data:[^;]*;/,"data:attachment/file;"),i?i.location.href=t:location=t,i=null},u.readAsDataURL(t)}else{var h=a.URL||a.webkitURL,d=h.createObjectURL(t);i?i.location=d:location.href=d,i=null,setTimeout((function(){h.revokeObjectURL(d)}),4e4)}});a.saveAs=l.saveAs=l,t.exports=l})?r.apply(e,i):r)||(t.exports=o)},6895:(t,e,n)=>{var r;!function(i,o,a,s){"use strict";var l,c=["","webkit","Moz","MS","ms","o"],u=o.createElement("div"),h="function",d=Math.round,f=Math.abs,p=Date.now;function m(t,e,n){return setTimeout(w(t,n),e)}function g(t,e,n){return!!Array.isArray(t)&&(y(t,n[e],n),!0)}function y(t,e,n){var r;if(t)if(t.forEach)t.forEach(e,n);else if(t.length!==s)for(r=0;r<t.length;)e.call(n,t[r],r,t),r++;else for(r in t)t.hasOwnProperty(r)&&e.call(n,t[r],r,t)}function v(t,e,n){var r="DEPRECATED METHOD: "+e+"\n"+n+" AT \n";return function(){var e=new Error("get-stack-trace"),n=e&&e.stack?e.stack.replace(/^[^\(]+?[\n$]/gm,"").replace(/^\s+at\s+/gm,"").replace(/^Object.<anonymous>\s*\(/gm,"{anonymous}()@"):"Unknown Stack Trace",o=i.console&&(i.console.warn||i.console.log);return o&&o.call(i.console,r,n),t.apply(this,arguments)}}l="function"!==typeof Object.assign?function(t){if(t===s||null===t)throw new TypeError("Cannot convert undefined or null to object");for(var e=Object(t),n=1;n<arguments.length;n++){var r=arguments[n];if(r!==s&&null!==r)for(var i in r)r.hasOwnProperty(i)&&(e[i]=r[i])}return e}:Object.assign;var _=v((function(t,e,n){for(var r=Object.keys(e),i=0;i<r.length;)(!n||n&&t[r[i]]===s)&&(t[r[i]]=e[r[i]]),i++;return t}),"extend","Use `assign`."),b=v((function(t,e){return _(t,e,!0)}),"merge","Use `assign`.");function x(t,e,n){var r,i=e.prototype;(r=t.prototype=Object.create(i)).constructor=t,r._super=i,n&&l(r,n)}function w(t,e){return function(){return t.apply(e,arguments)}}function S(t,e){return typeof t==h?t.apply(e&&e[0]||s,e):t}function E(t,e){return t===s?e:t}function T(t,e,n){y(P(e),(function(e){t.addEventListener(e,n,!1)}))}function M(t,e,n){y(P(e),(function(e){t.removeEventListener(e,n,!1)}))}function A(t,e){for(;t;){if(t==e)return!0;t=t.parentNode}return!1}function C(t,e){return t.indexOf(e)>-1}function P(t){return t.trim().split(/\s+/g)}function k(t,e,n){if(t.indexOf&&!n)return t.indexOf(e);for(var r=0;r<t.length;){if(n&&t[r][n]==e||!n&&t[r]===e)return r;r++}return-1}function I(t){return Array.prototype.slice.call(t,0)}function O(t,e,n){for(var r=[],i=[],o=0;o<t.length;){var a=e?t[o][e]:t[o];k(i,a)<0&&r.push(t[o]),i[o]=a,o++}return n&&(r=e?r.sort((function(t,n){return t[e]>n[e]})):r.sort()),r}function L(t,e){for(var n,r,i=e[0].toUpperCase()+e.slice(1),o=0;o<c.length;){if((r=(n=c[o])?n+i:e)in t)return r;o++}return s}var j=1;function z(t){var e=t.ownerDocument||t;return e.defaultView||e.parentWindow||i}var R="ontouchstart"in i,D=L(i,"PointerEvent")!==s,B=R&&/mobile|tablet|ip(ad|hone|od)|android/i.test(navigator.userAgent),F="touch",N="mouse",U=25,V=1,W=4,G=8,q=1,H=2,Z=4,X=8,Y=16,K=H|Z,$=X|Y,J=K|$,Q=["x","y"],tt=["clientX","clientY"];function et(t,e){var n=this;this.manager=t,this.callback=e,this.element=t.element,this.target=t.options.inputTarget,this.domHandler=function(e){S(t.options.enable,[t])&&n.handler(e)},this.init()}function nt(t,e,n){var r=n.pointers.length,i=n.changedPointers.length,o=e&V&&r-i===0,a=e&(W|G)&&r-i===0;n.isFirst=!!o,n.isFinal=!!a,o&&(t.session={}),n.eventType=e,function(t,e){var n=t.session,r=e.pointers,i=r.length;n.firstInput||(n.firstInput=rt(e));i>1&&!n.firstMultiple?n.firstMultiple=rt(e):1===i&&(n.firstMultiple=!1);var o=n.firstInput,a=n.firstMultiple,l=a?a.center:o.center,c=e.center=it(r);e.timeStamp=p(),e.deltaTime=e.timeStamp-o.timeStamp,e.angle=lt(l,c),e.distance=st(l,c),function(t,e){var n=e.center,r=t.offsetDelta||{},i=t.prevDelta||{},o=t.prevInput||{};e.eventType!==V&&o.eventType!==W||(i=t.prevDelta={x:o.deltaX||0,y:o.deltaY||0},r=t.offsetDelta={x:n.x,y:n.y});e.deltaX=i.x+(n.x-r.x),e.deltaY=i.y+(n.y-r.y)}(n,e),e.offsetDirection=at(e.deltaX,e.deltaY);var u=ot(e.deltaTime,e.deltaX,e.deltaY);e.overallVelocityX=u.x,e.overallVelocityY=u.y,e.overallVelocity=f(u.x)>f(u.y)?u.x:u.y,e.scale=a?(h=a.pointers,d=r,st(d[0],d[1],tt)/st(h[0],h[1],tt)):1,e.rotation=a?function(t,e){return lt(e[1],e[0],tt)+lt(t[1],t[0],tt)}(a.pointers,r):0,e.maxPointers=n.prevInput?e.pointers.length>n.prevInput.maxPointers?e.pointers.length:n.prevInput.maxPointers:e.pointers.length,function(t,e){var n,r,i,o,a=t.lastInterval||e,l=e.timeStamp-a.timeStamp;if(e.eventType!=G&&(l>U||a.velocity===s)){var c=e.deltaX-a.deltaX,u=e.deltaY-a.deltaY,h=ot(l,c,u);r=h.x,i=h.y,n=f(h.x)>f(h.y)?h.x:h.y,o=at(c,u),t.lastInterval=e}else n=a.velocity,r=a.velocityX,i=a.velocityY,o=a.direction;e.velocity=n,e.velocityX=r,e.velocityY=i,e.direction=o}(n,e);var h,d;var m=t.element;A(e.srcEvent.target,m)&&(m=e.srcEvent.target);e.target=m}(t,n),t.emit("hammer.input",n),t.recognize(n),t.session.prevInput=n}function rt(t){for(var e=[],n=0;n<t.pointers.length;)e[n]={clientX:d(t.pointers[n].clientX),clientY:d(t.pointers[n].clientY)},n++;return{timeStamp:p(),pointers:e,center:it(e),deltaX:t.deltaX,deltaY:t.deltaY}}function it(t){var e=t.length;if(1===e)return{x:d(t[0].clientX),y:d(t[0].clientY)};for(var n=0,r=0,i=0;i<e;)n+=t[i].clientX,r+=t[i].clientY,i++;return{x:d(n/e),y:d(r/e)}}function ot(t,e,n){return{x:e/t||0,y:n/t||0}}function at(t,e){return t===e?q:f(t)>=f(e)?t<0?H:Z:e<0?X:Y}function st(t,e,n){n||(n=Q);var r=e[n[0]]-t[n[0]],i=e[n[1]]-t[n[1]];return Math.sqrt(r*r+i*i)}function lt(t,e,n){n||(n=Q);var r=e[n[0]]-t[n[0]],i=e[n[1]]-t[n[1]];return 180*Math.atan2(i,r)/Math.PI}et.prototype={handler:function(){},init:function(){this.evEl&&T(this.element,this.evEl,this.domHandler),this.evTarget&&T(this.target,this.evTarget,this.domHandler),this.evWin&&T(z(this.element),this.evWin,this.domHandler)},destroy:function(){this.evEl&&M(this.element,this.evEl,this.domHandler),this.evTarget&&M(this.target,this.evTarget,this.domHandler),this.evWin&&M(z(this.element),this.evWin,this.domHandler)}};var ct={mousedown:V,mousemove:2,mouseup:W},ut="mousedown",ht="mousemove mouseup";function dt(){this.evEl=ut,this.evWin=ht,this.pressed=!1,et.apply(this,arguments)}x(dt,et,{handler:function(t){var e=ct[t.type];e&V&&0===t.button&&(this.pressed=!0),2&e&&1!==t.which&&(e=W),this.pressed&&(e&W&&(this.pressed=!1),this.callback(this.manager,e,{pointers:[t],changedPointers:[t],pointerType:N,srcEvent:t}))}});var ft={pointerdown:V,pointermove:2,pointerup:W,pointercancel:G,pointerout:G},pt={2:F,3:"pen",4:N,5:"kinect"},mt="pointerdown",gt="pointermove pointerup pointercancel";function yt(){this.evEl=mt,this.evWin=gt,et.apply(this,arguments),this.store=this.manager.session.pointerEvents=[]}i.MSPointerEvent&&!i.PointerEvent&&(mt="MSPointerDown",gt="MSPointerMove MSPointerUp MSPointerCancel"),x(yt,et,{handler:function(t){var e=this.store,n=!1,r=t.type.toLowerCase().replace("ms",""),i=ft[r],o=pt[t.pointerType]||t.pointerType,a=o==F,s=k(e,t.pointerId,"pointerId");i&V&&(0===t.button||a)?s<0&&(e.push(t),s=e.length-1):i&(W|G)&&(n=!0),s<0||(e[s]=t,this.callback(this.manager,i,{pointers:e,changedPointers:[t],pointerType:o,srcEvent:t}),n&&e.splice(s,1))}});var vt={touchstart:V,touchmove:2,touchend:W,touchcancel:G};function _t(){this.evTarget="touchstart",this.evWin="touchstart touchmove touchend touchcancel",this.started=!1,et.apply(this,arguments)}function bt(t,e){var n=I(t.touches),r=I(t.changedTouches);return e&(W|G)&&(n=O(n.concat(r),"identifier",!0)),[n,r]}x(_t,et,{handler:function(t){var e=vt[t.type];if(e===V&&(this.started=!0),this.started){var n=bt.call(this,t,e);e&(W|G)&&n[0].length-n[1].length===0&&(this.started=!1),this.callback(this.manager,e,{pointers:n[0],changedPointers:n[1],pointerType:F,srcEvent:t})}}});var xt={touchstart:V,touchmove:2,touchend:W,touchcancel:G},wt="touchstart touchmove touchend touchcancel";function St(){this.evTarget=wt,this.targetIds={},et.apply(this,arguments)}function Et(t,e){var n=I(t.touches),r=this.targetIds;if(e&(2|V)&&1===n.length)return r[n[0].identifier]=!0,[n,n];var i,o,a=I(t.changedTouches),s=[],l=this.target;if(o=n.filter((function(t){return A(t.target,l)})),e===V)for(i=0;i<o.length;)r[o[i].identifier]=!0,i++;for(i=0;i<a.length;)r[a[i].identifier]&&s.push(a[i]),e&(W|G)&&delete r[a[i].identifier],i++;return s.length?[O(o.concat(s),"identifier",!0),s]:void 0}x(St,et,{handler:function(t){var e=xt[t.type],n=Et.call(this,t,e);n&&this.callback(this.manager,e,{pointers:n[0],changedPointers:n[1],pointerType:F,srcEvent:t})}});var Tt=2500;function Mt(){et.apply(this,arguments);var t=w(this.handler,this);this.touch=new St(this.manager,t),this.mouse=new dt(this.manager,t),this.primaryTouch=null,this.lastTouches=[]}function At(t,e){t&V?(this.primaryTouch=e.changedPointers[0].identifier,Ct.call(this,e)):t&(W|G)&&Ct.call(this,e)}function Ct(t){var e=t.changedPointers[0];if(e.identifier===this.primaryTouch){var n={x:e.clientX,y:e.clientY};this.lastTouches.push(n);var r=this.lastTouches;setTimeout((function(){var t=r.indexOf(n);t>-1&&r.splice(t,1)}),Tt)}}function Pt(t){for(var e=t.srcEvent.clientX,n=t.srcEvent.clientY,r=0;r<this.lastTouches.length;r++){var i=this.lastTouches[r],o=Math.abs(e-i.x),a=Math.abs(n-i.y);if(o<=25&&a<=25)return!0}return!1}x(Mt,et,{handler:function(t,e,n){var r=n.pointerType==F,i=n.pointerType==N;if(!(i&&n.sourceCapabilities&&n.sourceCapabilities.firesTouchEvents)){if(r)At.call(this,e,n);else if(i&&Pt.call(this,n))return;this.callback(t,e,n)}},destroy:function(){this.touch.destroy(),this.mouse.destroy()}});var kt=L(u.style,"touchAction"),It=kt!==s,Ot="compute",Lt="auto",jt="manipulation",zt="none",Rt="pan-x",Dt="pan-y",Bt=function(){if(!It)return!1;var t={},e=i.CSS&&i.CSS.supports;return["auto","manipulation","pan-y","pan-x","pan-x pan-y","none"].forEach((function(n){t[n]=!e||i.CSS.supports("touch-action",n)})),t}();function Ft(t,e){this.manager=t,this.set(e)}Ft.prototype={set:function(t){t==Ot&&(t=this.compute()),It&&this.manager.element.style&&Bt[t]&&(this.manager.element.style[kt]=t),this.actions=t.toLowerCase().trim()},update:function(){this.set(this.manager.options.touchAction)},compute:function(){var t=[];return y(this.manager.recognizers,(function(e){S(e.options.enable,[e])&&(t=t.concat(e.getTouchAction()))})),function(t){if(C(t,zt))return zt;var e=C(t,Rt),n=C(t,Dt);if(e&&n)return zt;if(e||n)return e?Rt:Dt;if(C(t,jt))return jt;return Lt}(t.join(" "))},preventDefaults:function(t){var e=t.srcEvent,n=t.offsetDirection;if(this.manager.session.prevented)e.preventDefault();else{var r=this.actions,i=C(r,zt)&&!Bt[zt],o=C(r,Dt)&&!Bt[Dt],a=C(r,Rt)&&!Bt[Rt];if(i){var s=1===t.pointers.length,l=t.distance<2,c=t.deltaTime<250;if(s&&l&&c)return}if(!a||!o)return i||o&&n&K||a&&n&$?this.preventSrc(e):void 0}},preventSrc:function(t){this.manager.session.prevented=!0,t.preventDefault()}};var Nt=1,Ut=32;function Vt(t){this.options=l({},this.defaults,t||{}),this.id=j++,this.manager=null,this.options.enable=E(this.options.enable,!0),this.state=Nt,this.simultaneous={},this.requireFail=[]}function Wt(t){return 16&t?"cancel":8&t?"end":4&t?"move":2&t?"start":""}function Gt(t){return t==Y?"down":t==X?"up":t==H?"left":t==Z?"right":""}function qt(t,e){var n=e.manager;return n?n.get(t):t}function Ht(){Vt.apply(this,arguments)}function Zt(){Ht.apply(this,arguments),this.pX=null,this.pY=null}function Xt(){Ht.apply(this,arguments)}function Yt(){Vt.apply(this,arguments),this._timer=null,this._input=null}function Kt(){Ht.apply(this,arguments)}function $t(){Ht.apply(this,arguments)}function Jt(){Vt.apply(this,arguments),this.pTime=!1,this.pCenter=!1,this._timer=null,this._input=null,this.count=0}function Qt(t,e){return(e=e||{}).recognizers=E(e.recognizers,Qt.defaults.preset),new te(t,e)}Vt.prototype={defaults:{},set:function(t){return l(this.options,t),this.manager&&this.manager.touchAction.update(),this},recognizeWith:function(t){if(g(t,"recognizeWith",this))return this;var e=this.simultaneous;return e[(t=qt(t,this)).id]||(e[t.id]=t,t.recognizeWith(this)),this},dropRecognizeWith:function(t){return g(t,"dropRecognizeWith",this)||(t=qt(t,this),delete this.simultaneous[t.id]),this},requireFailure:function(t){if(g(t,"requireFailure",this))return this;var e=this.requireFail;return-1===k(e,t=qt(t,this))&&(e.push(t),t.requireFailure(this)),this},dropRequireFailure:function(t){if(g(t,"dropRequireFailure",this))return this;t=qt(t,this);var e=k(this.requireFail,t);return e>-1&&this.requireFail.splice(e,1),this},hasRequireFailures:function(){return this.requireFail.length>0},canRecognizeWith:function(t){return!!this.simultaneous[t.id]},emit:function(t){var e=this,n=this.state;function r(n){e.manager.emit(n,t)}n<8&&r(e.options.event+Wt(n)),r(e.options.event),t.additionalEvent&&r(t.additionalEvent),n>=8&&r(e.options.event+Wt(n))},tryEmit:function(t){if(this.canEmit())return this.emit(t);this.state=Ut},canEmit:function(){for(var t=0;t<this.requireFail.length;){if(!(this.requireFail[t].state&(Ut|Nt)))return!1;t++}return!0},recognize:function(t){var e=l({},t);if(!S(this.options.enable,[this,e]))return this.reset(),void(this.state=Ut);56&this.state&&(this.state=Nt),this.state=this.process(e),30&this.state&&this.tryEmit(e)},process:function(t){},getTouchAction:function(){},reset:function(){}},x(Ht,Vt,{defaults:{pointers:1},attrTest:function(t){var e=this.options.pointers;return 0===e||t.pointers.length===e},process:function(t){var e=this.state,n=t.eventType,r=6&e,i=this.attrTest(t);return r&&(n&G||!i)?16|e:r||i?n&W?8|e:2&e?4|e:2:Ut}}),x(Zt,Ht,{defaults:{event:"pan",threshold:10,pointers:1,direction:J},getTouchAction:function(){var t=this.options.direction,e=[];return t&K&&e.push(Dt),t&$&&e.push(Rt),e},directionTest:function(t){var e=this.options,n=!0,r=t.distance,i=t.direction,o=t.deltaX,a=t.deltaY;return i&e.direction||(e.direction&K?(i=0===o?q:o<0?H:Z,n=o!=this.pX,r=Math.abs(t.deltaX)):(i=0===a?q:a<0?X:Y,n=a!=this.pY,r=Math.abs(t.deltaY))),t.direction=i,n&&r>e.threshold&&i&e.direction},attrTest:function(t){return Ht.prototype.attrTest.call(this,t)&&(2&this.state||!(2&this.state)&&this.directionTest(t))},emit:function(t){this.pX=t.deltaX,this.pY=t.deltaY;var e=Gt(t.direction);e&&(t.additionalEvent=this.options.event+e),this._super.emit.call(this,t)}}),x(Xt,Ht,{defaults:{event:"pinch",threshold:0,pointers:2},getTouchAction:function(){return[zt]},attrTest:function(t){return this._super.attrTest.call(this,t)&&(Math.abs(t.scale-1)>this.options.threshold||2&this.state)},emit:function(t){if(1!==t.scale){var e=t.scale<1?"in":"out";t.additionalEvent=this.options.event+e}this._super.emit.call(this,t)}}),x(Yt,Vt,{defaults:{event:"press",pointers:1,time:251,threshold:9},getTouchAction:function(){return[Lt]},process:function(t){var e=this.options,n=t.pointers.length===e.pointers,r=t.distance<e.threshold,i=t.deltaTime>e.time;if(this._input=t,!r||!n||t.eventType&(W|G)&&!i)this.reset();else if(t.eventType&V)this.reset(),this._timer=m((function(){this.state=8,this.tryEmit()}),e.time,this);else if(t.eventType&W)return 8;return Ut},reset:function(){clearTimeout(this._timer)},emit:function(t){8===this.state&&(t&&t.eventType&W?this.manager.emit(this.options.event+"up",t):(this._input.timeStamp=p(),this.manager.emit(this.options.event,this._input)))}}),x(Kt,Ht,{defaults:{event:"rotate",threshold:0,pointers:2},getTouchAction:function(){return[zt]},attrTest:function(t){return this._super.attrTest.call(this,t)&&(Math.abs(t.rotation)>this.options.threshold||2&this.state)}}),x($t,Ht,{defaults:{event:"swipe",threshold:10,velocity:.3,direction:K|$,pointers:1},getTouchAction:function(){return Zt.prototype.getTouchAction.call(this)},attrTest:function(t){var e,n=this.options.direction;return n&(K|$)?e=t.overallVelocity:n&K?e=t.overallVelocityX:n&$&&(e=t.overallVelocityY),this._super.attrTest.call(this,t)&&n&t.offsetDirection&&t.distance>this.options.threshold&&t.maxPointers==this.options.pointers&&f(e)>this.options.velocity&&t.eventType&W},emit:function(t){var e=Gt(t.offsetDirection);e&&this.manager.emit(this.options.event+e,t),this.manager.emit(this.options.event,t)}}),x(Jt,Vt,{defaults:{event:"tap",pointers:1,taps:1,interval:300,time:250,threshold:9,posThreshold:10},getTouchAction:function(){return[jt]},process:function(t){var e=this.options,n=t.pointers.length===e.pointers,r=t.distance<e.threshold,i=t.deltaTime<e.time;if(this.reset(),t.eventType&V&&0===this.count)return this.failTimeout();if(r&&i&&n){if(t.eventType!=W)return this.failTimeout();var o=!this.pTime||t.timeStamp-this.pTime<e.interval,a=!this.pCenter||st(this.pCenter,t.center)<e.posThreshold;if(this.pTime=t.timeStamp,this.pCenter=t.center,a&&o?this.count+=1:this.count=1,this._input=t,0===this.count%e.taps)return this.hasRequireFailures()?(this._timer=m((function(){this.state=8,this.tryEmit()}),e.interval,this),2):8}return Ut},failTimeout:function(){return this._timer=m((function(){this.state=Ut}),this.options.interval,this),Ut},reset:function(){clearTimeout(this._timer)},emit:function(){8==this.state&&(this._input.tapCount=this.count,this.manager.emit(this.options.event,this._input))}}),Qt.VERSION="2.0.7",Qt.defaults={domEvents:!1,touchAction:Ot,enable:!0,inputTarget:null,inputClass:null,preset:[[Kt,{enable:!1}],[Xt,{enable:!1},["rotate"]],[$t,{direction:K}],[Zt,{direction:K},["swipe"]],[Jt],[Jt,{event:"doubletap",taps:2},["tap"]],[Yt]],cssProps:{userSelect:"none",touchSelect:"none",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}};function te(t,e){var n;this.options=l({},Qt.defaults,e||{}),this.options.inputTarget=this.options.inputTarget||t,this.handlers={},this.session={},this.recognizers=[],this.oldCssProps={},this.element=t,this.input=new((n=this).options.inputClass||(D?yt:B?St:R?Mt:dt))(n,nt),this.touchAction=new Ft(this,this.options.touchAction),ee(this,!0),y(this.options.recognizers,(function(t){var e=this.add(new t[0](t[1]));t[2]&&e.recognizeWith(t[2]),t[3]&&e.requireFailure(t[3])}),this)}function ee(t,e){var n,r=t.element;r.style&&(y(t.options.cssProps,(function(i,o){n=L(r.style,o),e?(t.oldCssProps[n]=r.style[n],r.style[n]=i):r.style[n]=t.oldCssProps[n]||""})),e||(t.oldCssProps={}))}te.prototype={set:function(t){return l(this.options,t),t.touchAction&&this.touchAction.update(),t.inputTarget&&(this.input.destroy(),this.input.target=t.inputTarget,this.input.init()),this},stop:function(t){this.session.stopped=t?2:1},recognize:function(t){var e=this.session;if(!e.stopped){var n;this.touchAction.preventDefaults(t);var r=this.recognizers,i=e.curRecognizer;(!i||i&&8&i.state)&&(i=e.curRecognizer=null);for(var o=0;o<r.length;)n=r[o],2===e.stopped||i&&n!=i&&!n.canRecognizeWith(i)?n.reset():n.recognize(t),!i&&14&n.state&&(i=e.curRecognizer=n),o++}},get:function(t){if(t instanceof Vt)return t;for(var e=this.recognizers,n=0;n<e.length;n++)if(e[n].options.event==t)return e[n];return null},add:function(t){if(g(t,"add",this))return this;var e=this.get(t.options.event);return e&&this.remove(e),this.recognizers.push(t),t.manager=this,this.touchAction.update(),t},remove:function(t){if(g(t,"remove",this))return this;if(t=this.get(t)){var e=this.recognizers,n=k(e,t);-1!==n&&(e.splice(n,1),this.touchAction.update())}return this},on:function(t,e){if(t!==s&&e!==s){var n=this.handlers;return y(P(t),(function(t){n[t]=n[t]||[],n[t].push(e)})),this}},off:function(t,e){if(t!==s){var n=this.handlers;return y(P(t),(function(t){e?n[t]&&n[t].splice(k(n[t],e),1):delete n[t]})),this}},emit:function(t,e){this.options.domEvents&&function(t,e){var n=o.createEvent("Event");n.initEvent(t,!0,!0),n.gesture=e,e.target.dispatchEvent(n)}(t,e);var n=this.handlers[t]&&this.handlers[t].slice();if(n&&n.length){e.type=t,e.preventDefault=function(){e.srcEvent.preventDefault()};for(var r=0;r<n.length;)n[r](e),r++}},destroy:function(){this.element&&ee(this,!1),this.handlers={},this.session={},this.input.destroy(),this.element=null}},l(Qt,{INPUT_START:V,INPUT_MOVE:2,INPUT_END:W,INPUT_CANCEL:G,STATE_POSSIBLE:Nt,STATE_BEGAN:2,STATE_CHANGED:4,STATE_ENDED:8,STATE_RECOGNIZED:8,STATE_CANCELLED:16,STATE_FAILED:Ut,DIRECTION_NONE:q,DIRECTION_LEFT:H,DIRECTION_RIGHT:Z,DIRECTION_UP:X,DIRECTION_DOWN:Y,DIRECTION_HORIZONTAL:K,DIRECTION_VERTICAL:$,DIRECTION_ALL:J,Manager:te,Input:et,TouchAction:Ft,TouchInput:St,MouseInput:dt,PointerEventInput:yt,TouchMouseInput:Mt,SingleTouchInput:_t,Recognizer:Vt,AttrRecognizer:Ht,Tap:Jt,Pan:Zt,Swipe:$t,Pinch:Xt,Rotate:Kt,Press:Yt,on:T,off:M,each:y,merge:b,extend:_,assign:l,inherit:x,bindFn:w,prefixed:L}),("undefined"!==typeof i?i:"undefined"!==typeof self?self:{}).Hammer=Qt,(r=function(){return Qt}.call(e,n,e,t))===s||(t.exports=r)}(window,document)},219:(t,e,n)=>{"use strict";var r=n(2086),i={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},o={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},a={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},s={};function l(t){return r.isMemo(t)?a:s[t.$$typeof]||i}s[r.ForwardRef]={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},s[r.Memo]=a;var c=Object.defineProperty,u=Object.getOwnPropertyNames,h=Object.getOwnPropertySymbols,d=Object.getOwnPropertyDescriptor,f=Object.getPrototypeOf,p=Object.prototype;t.exports=function t(e,n,r){if("string"!==typeof n){if(p){var i=f(n);i&&i!==p&&t(e,i,r)}var a=u(n);h&&(a=a.concat(h(n)));for(var s=l(e),m=l(n),g=0;g<a.length;++g){var y=a[g];if(!o[y]&&(!r||!r[y])&&(!m||!m[y])&&(!s||!s[y])){var v=d(n,y);try{c(e,y,v)}catch(_){}}}}return e}},9611:(t,e,n)=>{t=n.nmd(t);var r="__lodash_hash_undefined__",i=9007199254740991,o="[object Arguments]",a="[object AsyncFunction]",s="[object Function]",l="[object GeneratorFunction]",c="[object Null]",u="[object Object]",h="[object Proxy]",d="[object Undefined]",f=/^\[object .+?Constructor\]$/,p=/^(?:0|[1-9]\d*)$/,m={};m["[object Float32Array]"]=m["[object Float64Array]"]=m["[object Int8Array]"]=m["[object Int16Array]"]=m["[object Int32Array]"]=m["[object Uint8Array]"]=m["[object Uint8ClampedArray]"]=m["[object Uint16Array]"]=m["[object Uint32Array]"]=!0,m[o]=m["[object Array]"]=m["[object ArrayBuffer]"]=m["[object Boolean]"]=m["[object DataView]"]=m["[object Date]"]=m["[object Error]"]=m[s]=m["[object Map]"]=m["[object Number]"]=m[u]=m["[object RegExp]"]=m["[object Set]"]=m["[object String]"]=m["[object WeakMap]"]=!1;var g="object"==typeof n.g&&n.g&&n.g.Object===Object&&n.g,y="object"==typeof self&&self&&self.Object===Object&&self,v=g||y||Function("return this")(),_=e&&!e.nodeType&&e,b=_&&t&&!t.nodeType&&t,x=b&&b.exports===_,w=x&&g.process,S=function(){try{var t=b&&b.require&&b.require("util").types;return t||w&&w.binding&&w.binding("util")}catch(e){}}(),E=S&&S.isTypedArray;var T,M,A=Array.prototype,C=Function.prototype,P=Object.prototype,k=v["__core-js_shared__"],I=C.toString,O=P.hasOwnProperty,L=function(){var t=/[^.]+$/.exec(k&&k.keys&&k.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}(),j=P.toString,z=I.call(Object),R=RegExp("^"+I.call(O).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),D=x?v.Buffer:void 0,B=v.Symbol,F=v.Uint8Array,N=D?D.allocUnsafe:void 0,U=(T=Object.getPrototypeOf,M=Object,function(t){return T(M(t))}),V=Object.create,W=P.propertyIsEnumerable,G=A.splice,q=B?B.toStringTag:void 0,H=function(){try{var t=vt(Object,"defineProperty");return t({},"",{}),t}catch(e){}}(),Z=D?D.isBuffer:void 0,X=Math.max,Y=Date.now,K=vt(v,"Map"),$=vt(Object,"create"),J=function(){function t(){}return function(e){if(!kt(e))return{};if(V)return V(e);t.prototype=e;var n=new t;return t.prototype=void 0,n}}();function Q(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}function tt(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}function et(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}function nt(t){var e=this.__data__=new tt(t);this.size=e.size}function rt(t,e){var n=Tt(t),r=!n&&Et(t),i=!n&&!r&&At(t),o=!n&&!r&&!i&&Ot(t),a=n||r||i||o,s=a?function(t,e){for(var n=-1,r=Array(t);++n<t;)r[n]=e(n);return r}(t.length,String):[],l=s.length;for(var c in t)!e&&!O.call(t,c)||a&&("length"==c||i&&("offset"==c||"parent"==c)||o&&("buffer"==c||"byteLength"==c||"byteOffset"==c)||_t(c,l))||s.push(c);return s}function it(t,e,n){(void 0!==n&&!St(t[e],n)||void 0===n&&!(e in t))&&st(t,e,n)}function ot(t,e,n){var r=t[e];O.call(t,e)&&St(r,n)&&(void 0!==n||e in t)||st(t,e,n)}function at(t,e){for(var n=t.length;n--;)if(St(t[n][0],e))return n;return-1}function st(t,e,n){"__proto__"==e&&H?H(t,e,{configurable:!0,enumerable:!0,value:n,writable:!0}):t[e]=n}Q.prototype.clear=function(){this.__data__=$?$(null):{},this.size=0},Q.prototype.delete=function(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e},Q.prototype.get=function(t){var e=this.__data__;if($){var n=e[t];return n===r?void 0:n}return O.call(e,t)?e[t]:void 0},Q.prototype.has=function(t){var e=this.__data__;return $?void 0!==e[t]:O.call(e,t)},Q.prototype.set=function(t,e){var n=this.__data__;return this.size+=this.has(t)?0:1,n[t]=$&&void 0===e?r:e,this},tt.prototype.clear=function(){this.__data__=[],this.size=0},tt.prototype.delete=function(t){var e=this.__data__,n=at(e,t);return!(n<0)&&(n==e.length-1?e.pop():G.call(e,n,1),--this.size,!0)},tt.prototype.get=function(t){var e=this.__data__,n=at(e,t);return n<0?void 0:e[n][1]},tt.prototype.has=function(t){return at(this.__data__,t)>-1},tt.prototype.set=function(t,e){var n=this.__data__,r=at(n,t);return r<0?(++this.size,n.push([t,e])):n[r][1]=e,this},et.prototype.clear=function(){this.size=0,this.__data__={hash:new Q,map:new(K||tt),string:new Q}},et.prototype.delete=function(t){var e=yt(this,t).delete(t);return this.size-=e?1:0,e},et.prototype.get=function(t){return yt(this,t).get(t)},et.prototype.has=function(t){return yt(this,t).has(t)},et.prototype.set=function(t,e){var n=yt(this,t),r=n.size;return n.set(t,e),this.size+=n.size==r?0:1,this},nt.prototype.clear=function(){this.__data__=new tt,this.size=0},nt.prototype.delete=function(t){var e=this.__data__,n=e.delete(t);return this.size=e.size,n},nt.prototype.get=function(t){return this.__data__.get(t)},nt.prototype.has=function(t){return this.__data__.has(t)},nt.prototype.set=function(t,e){var n=this.__data__;if(n instanceof tt){var r=n.__data__;if(!K||r.length<199)return r.push([t,e]),this.size=++n.size,this;n=this.__data__=new et(r)}return n.set(t,e),this.size=n.size,this};var lt,ct=function(t,e,n){for(var r=-1,i=Object(t),o=n(t),a=o.length;a--;){var s=o[lt?a:++r];if(!1===e(i[s],s,i))break}return t};function ut(t){return null==t?void 0===t?d:c:q&&q in Object(t)?function(t){var e=O.call(t,q),n=t[q];try{t[q]=void 0;var r=!0}catch(o){}var i=j.call(t);r&&(e?t[q]=n:delete t[q]);return i}(t):function(t){return j.call(t)}(t)}function ht(t){return It(t)&&ut(t)==o}function dt(t){return!(!kt(t)||function(t){return!!L&&L in t}(t))&&(Ct(t)?R:f).test(function(t){if(null!=t){try{return I.call(t)}catch(e){}try{return t+""}catch(e){}}return""}(t))}function ft(t){if(!kt(t))return function(t){var e=[];if(null!=t)for(var n in Object(t))e.push(n);return e}(t);var e=bt(t),n=[];for(var r in t)("constructor"!=r||!e&&O.call(t,r))&&n.push(r);return n}function pt(t,e,n,r,i){t!==e&&ct(e,(function(o,a){if(i||(i=new nt),kt(o))!function(t,e,n,r,i,o,a){var s=xt(t,n),l=xt(e,n),c=a.get(l);if(c)return void it(t,n,c);var h=o?o(s,l,n+"",t,e,a):void 0,d=void 0===h;if(d){var f=Tt(l),p=!f&&At(l),m=!f&&!p&&Ot(l);h=l,f||p||m?Tt(s)?h=s:It(g=s)&&Mt(g)?h=function(t,e){var n=-1,r=t.length;e||(e=Array(r));for(;++n<r;)e[n]=t[n];return e}(s):p?(d=!1,h=function(t,e){if(e)return t.slice();var n=t.length,r=N?N(n):new t.constructor(n);return t.copy(r),r}(l,!0)):m?(d=!1,h=function(t,e){var n=e?function(t){var e=new t.constructor(t.byteLength);return new F(e).set(new F(t)),e}(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.length)}(l,!0)):h=[]:function(t){if(!It(t)||ut(t)!=u)return!1;var e=U(t);if(null===e)return!0;var n=O.call(e,"constructor")&&e.constructor;return"function"==typeof n&&n instanceof n&&I.call(n)==z}(l)||Et(l)?(h=s,Et(s)?h=function(t){return function(t,e,n,r){var i=!n;n||(n={});var o=-1,a=e.length;for(;++o<a;){var s=e[o],l=r?r(n[s],t[s],s,n,t):void 0;void 0===l&&(l=t[s]),i?st(n,s,l):ot(n,s,l)}return n}(t,Lt(t))}(s):kt(s)&&!Ct(s)||(h=function(t){return"function"!=typeof t.constructor||bt(t)?{}:J(U(t))}(l))):d=!1}var g;d&&(a.set(l,h),i(h,l,r,o,a),a.delete(l));it(t,n,h)}(t,e,a,n,pt,r,i);else{var s=r?r(xt(t,a),o,a+"",t,e,i):void 0;void 0===s&&(s=o),it(t,a,s)}}),Lt)}function mt(t,e){return wt(function(t,e,n){return e=X(void 0===e?t.length-1:e,0),function(){for(var r=arguments,i=-1,o=X(r.length-e,0),a=Array(o);++i<o;)a[i]=r[e+i];i=-1;for(var s=Array(e+1);++i<e;)s[i]=r[i];return s[e]=n(a),function(t,e,n){switch(n.length){case 0:return t.call(e);case 1:return t.call(e,n[0]);case 2:return t.call(e,n[0],n[1]);case 3:return t.call(e,n[0],n[1],n[2])}return t.apply(e,n)}(t,this,s)}}(t,e,Rt),t+"")}var gt=H?function(t,e){return H(t,"toString",{configurable:!0,enumerable:!1,value:(n=e,function(){return n}),writable:!0});var n}:Rt;function yt(t,e){var n=t.__data__;return function(t){var e=typeof t;return"string"==e||"number"==e||"symbol"==e||"boolean"==e?"__proto__"!==t:null===t}(e)?n["string"==typeof e?"string":"hash"]:n.map}function vt(t,e){var n=function(t,e){return null==t?void 0:t[e]}(t,e);return dt(n)?n:void 0}function _t(t,e){var n=typeof t;return!!(e=null==e?i:e)&&("number"==n||"symbol"!=n&&p.test(t))&&t>-1&&t%1==0&&t<e}function bt(t){var e=t&&t.constructor;return t===("function"==typeof e&&e.prototype||P)}function xt(t,e){if(("constructor"!==e||"function"!==typeof t[e])&&"__proto__"!=e)return t[e]}var wt=function(t){var e=0,n=0;return function(){var r=Y(),i=16-(r-n);if(n=r,i>0){if(++e>=800)return arguments[0]}else e=0;return t.apply(void 0,arguments)}}(gt);function St(t,e){return t===e||t!==t&&e!==e}var Et=ht(function(){return arguments}())?ht:function(t){return It(t)&&O.call(t,"callee")&&!W.call(t,"callee")},Tt=Array.isArray;function Mt(t){return null!=t&&Pt(t.length)&&!Ct(t)}var At=Z||function(){return!1};function Ct(t){if(!kt(t))return!1;var e=ut(t);return e==s||e==l||e==a||e==h}function Pt(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=i}function kt(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)}function It(t){return null!=t&&"object"==typeof t}var Ot=E?function(t){return function(e){return t(e)}}(E):function(t){return It(t)&&Pt(t.length)&&!!m[ut(t)]};function Lt(t){return Mt(t)?rt(t,!0):ft(t)}var jt,zt=(jt=function(t,e,n,r){pt(t,e,n,r)},mt((function(t,e){var n=-1,r=e.length,i=r>1?e[r-1]:void 0,o=r>2?e[2]:void 0;for(i=jt.length>3&&"function"==typeof i?(r--,i):void 0,o&&function(t,e,n){if(!kt(n))return!1;var r=typeof e;return!!("number"==r?Mt(n)&&_t(e,n.length):"string"==r&&e in n)&&St(n[e],t)}(e[0],e[1],o)&&(i=r<3?void 0:i,r=1),t=Object(t);++n<r;){var a=e[n];a&&jt(t,a,n,i)}return t})));function Rt(t){return t}t.exports=zt},7685:(t,e,n)=>{var r=n(7937)(n(6552),"DataView");t.exports=r},8724:(t,e,n)=>{var r=n(7615),i=n(5051),o=n(2154),a=n(8734),s=n(2662);function l(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}l.prototype.clear=r,l.prototype.delete=i,l.prototype.get=o,l.prototype.has=a,l.prototype.set=s,t.exports=l},7160:(t,e,n)=>{var r=n(7563),i=n(9935),o=n(4190),a=n(1946),s=n(1714);function l(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}l.prototype.clear=r,l.prototype.delete=i,l.prototype.get=o,l.prototype.has=a,l.prototype.set=s,t.exports=l},5204:(t,e,n)=>{var r=n(7937)(n(6552),"Map");t.exports=r},4816:(t,e,n)=>{var r=n(7251),i=n(7159),o=n(438),a=n(9394),s=n(6874);function l(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}l.prototype.clear=r,l.prototype.delete=i,l.prototype.get=o,l.prototype.has=a,l.prototype.set=s,t.exports=l},5387:(t,e,n)=>{var r=n(7937)(n(6552),"Promise");t.exports=r},2070:(t,e,n)=>{var r=n(7937)(n(6552),"Set");t.exports=r},8902:(t,e,n)=>{var r=n(4816),i=n(6179),o=n(6704);function a(t){var e=-1,n=null==t?0:t.length;for(this.__data__=new r;++e<n;)this.add(t[e])}a.prototype.add=a.prototype.push=i,a.prototype.has=o,t.exports=a},5538:(t,e,n)=>{var r=n(7160),i=n(4545),o=n(793),a=n(7760),s=n(3892),l=n(6788);function c(t){var e=this.__data__=new r(t);this.size=e.size}c.prototype.clear=i,c.prototype.delete=o,c.prototype.get=a,c.prototype.has=s,c.prototype.set=l,t.exports=c},9812:(t,e,n)=>{var r=n(6552).Symbol;t.exports=r},2929:(t,e,n)=>{var r=n(6552).Uint8Array;t.exports=r},6600:(t,e,n)=>{var r=n(7937)(n(6552),"WeakMap");t.exports=r},1170:t=>{t.exports=function(t,e,n){switch(n.length){case 0:return t.call(e);case 1:return t.call(e,n[0]);case 2:return t.call(e,n[0],n[1]);case 3:return t.call(e,n[0],n[1],n[2])}return t.apply(e,n)}},5295:t=>{t.exports=function(t,e){for(var n=-1,r=null==t?0:t.length;++n<r;)if(!e(t[n],n,t))return!1;return!0}},7529:t=>{t.exports=function(t,e){for(var n=-1,r=null==t?0:t.length,i=0,o=[];++n<r;){var a=t[n];e(a,n,t)&&(o[i++]=a)}return o}},5866:(t,e,n)=>{var r=n(8468);t.exports=function(t,e){return!!(null==t?0:t.length)&&r(t,e,0)>-1}},1558:t=>{t.exports=function(t,e,n){for(var r=-1,i=null==t?0:t.length;++r<i;)if(n(e,t[r]))return!0;return!1}},3204:(t,e,n)=>{var r=n(3343),i=n(2777),o=n(4052),a=n(4543),s=n(9194),l=n(1268),c=Object.prototype.hasOwnProperty;t.exports=function(t,e){var n=o(t),u=!n&&i(t),h=!n&&!u&&a(t),d=!n&&!u&&!h&&l(t),f=n||u||h||d,p=f?r(t.length,String):[],m=p.length;for(var g in t)!e&&!c.call(t,g)||f&&("length"==g||h&&("offset"==g||"parent"==g)||d&&("buffer"==g||"byteLength"==g||"byteOffset"==g)||s(g,m))||p.push(g);return p}},149:t=>{t.exports=function(t,e){for(var n=-1,r=null==t?0:t.length,i=Array(r);++n<r;)i[n]=e(t[n],n,t);return i}},8895:t=>{t.exports=function(t,e){for(var n=-1,r=e.length,i=t.length;++n<r;)t[i+n]=e[n];return t}},2587:t=>{t.exports=function(t,e){for(var n=-1,r=null==t?0:t.length;++n<r;)if(e(t[n],n,t))return!0;return!1}},5967:t=>{t.exports=function(t){return t.split("")}},1340:(t,e,n)=>{var r=n(3211);t.exports=function(t,e){for(var n=t.length;n--;)if(r(t[n][0],e))return n;return-1}},1775:(t,e,n)=>{var r=n(5654);t.exports=function(t,e,n){"__proto__"==e&&r?r(t,e,{configurable:!0,enumerable:!0,value:n,writable:!0}):t[e]=n}},5652:(t,e,n)=>{var r=n(4664),i=n(6516)(r);t.exports=i},4746:(t,e,n)=>{var r=n(5652);t.exports=function(t,e){var n=!0;return r(t,(function(t,r,i){return n=!!e(t,r,i)})),n}},9742:(t,e,n)=>{var r=n(9841);t.exports=function(t,e,n){for(var i=-1,o=t.length;++i<o;){var a=t[i],s=e(a);if(null!=s&&(void 0===l?s===s&&!r(s):n(s,l)))var l=s,c=a}return c}},5816:t=>{t.exports=function(t,e,n,r){for(var i=t.length,o=n+(r?1:-1);r?o--:++o<i;)if(e(t[o],o,t))return o;return-1}},755:(t,e,n)=>{var r=n(8895),i=n(7116);t.exports=function t(e,n,o,a,s){var l=-1,c=e.length;for(o||(o=i),s||(s=[]);++l<c;){var u=e[l];n>0&&o(u)?n>1?t(u,n-1,o,a,s):r(s,u):a||(s[s.length]=u)}return s}},4258:(t,e,n)=>{var r=n(5906)();t.exports=r},4664:(t,e,n)=>{var r=n(4258),i=n(8673);t.exports=function(t,e){return t&&r(t,e,i)}},2969:(t,e,n)=>{var r=n(5324),i=n(914);t.exports=function(t,e){for(var n=0,o=(e=r(e,t)).length;null!=t&&n<o;)t=t[i(e[n++])];return n&&n==o?t:void 0}},4262:(t,e,n)=>{var r=n(8895),i=n(4052);t.exports=function(t,e,n){var o=e(t);return i(t)?o:r(o,n(t))}},6913:(t,e,n)=>{var r=n(9812),i=n(4552),o=n(6095),a=r?r.toStringTag:void 0;t.exports=function(t){return null==t?void 0===t?"[object Undefined]":"[object Null]":a&&a in Object(t)?i(t):o(t)}},7498:t=>{t.exports=function(t,e){return t>e}},7894:t=>{t.exports=function(t,e){return null!=t&&e in Object(t)}},8468:(t,e,n)=>{var r=n(5816),i=n(644),o=n(4020);t.exports=function(t,e,n){return e===e?o(t,e,n):r(t,i,n)}},5193:(t,e,n)=>{var r=n(6913),i=n(2761);t.exports=function(t){return i(t)&&"[object Arguments]"==r(t)}},6989:(t,e,n)=>{var r=n(6399),i=n(2761);t.exports=function t(e,n,o,a,s){return e===n||(null==e||null==n||!i(e)&&!i(n)?e!==e&&n!==n:r(e,n,o,a,t,s))}},6399:(t,e,n)=>{var r=n(5538),i=n(3668),o=n(9987),a=n(5752),s=n(6924),l=n(4052),c=n(4543),u=n(1268),h="[object Arguments]",d="[object Array]",f="[object Object]",p=Object.prototype.hasOwnProperty;t.exports=function(t,e,n,m,g,y){var v=l(t),_=l(e),b=v?d:s(t),x=_?d:s(e),w=(b=b==h?f:b)==f,S=(x=x==h?f:x)==f,E=b==x;if(E&&c(t)){if(!c(e))return!1;v=!0,w=!1}if(E&&!w)return y||(y=new r),v||u(t)?i(t,e,n,m,g,y):o(t,e,b,n,m,g,y);if(!(1&n)){var T=w&&p.call(t,"__wrapped__"),M=S&&p.call(e,"__wrapped__");if(T||M){var A=T?t.value():t,C=M?e.value():e;return y||(y=new r),g(A,C,n,m,y)}}return!!E&&(y||(y=new r),a(t,e,n,m,g,y))}},6532:(t,e,n)=>{var r=n(5538),i=n(6989);t.exports=function(t,e,n,o){var a=n.length,s=a,l=!o;if(null==t)return!s;for(t=Object(t);a--;){var c=n[a];if(l&&c[2]?c[1]!==t[c[0]]:!(c[0]in t))return!1}for(;++a<s;){var u=(c=n[a])[0],h=t[u],d=c[1];if(l&&c[2]){if(void 0===h&&!(u in t))return!1}else{var f=new r;if(o)var p=o(h,d,u,t,e,f);if(!(void 0===p?i(d,h,3,o,f):p))return!1}}return!0}},644:t=>{t.exports=function(t){return t!==t}},6954:(t,e,n)=>{var r=n(1629),i=n(7857),o=n(6686),a=n(6996),s=/^\[object .+?Constructor\]$/,l=Function.prototype,c=Object.prototype,u=l.toString,h=c.hasOwnProperty,d=RegExp("^"+u.call(h).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");t.exports=function(t){return!(!o(t)||i(t))&&(r(t)?d:s).test(a(t))}},5428:(t,e,n)=>{var r=n(6913),i=n(6173),o=n(2761),a={};a["[object Float32Array]"]=a["[object Float64Array]"]=a["[object Int8Array]"]=a["[object Int16Array]"]=a["[object Int32Array]"]=a["[object Uint8Array]"]=a["[object Uint8ClampedArray]"]=a["[object Uint16Array]"]=a["[object Uint32Array]"]=!0,a["[object Arguments]"]=a["[object Array]"]=a["[object ArrayBuffer]"]=a["[object Boolean]"]=a["[object DataView]"]=a["[object Date]"]=a["[object Error]"]=a["[object Function]"]=a["[object Map]"]=a["[object Number]"]=a["[object Object]"]=a["[object RegExp]"]=a["[object Set]"]=a["[object String]"]=a["[object WeakMap]"]=!1,t.exports=function(t){return o(t)&&i(t.length)&&!!a[r(t)]}},9096:(t,e,n)=>{var r=n(9256),i=n(5029),o=n(3279),a=n(4052),s=n(3932);t.exports=function(t){return"function"==typeof t?t:null==t?o:"object"==typeof t?a(t)?i(t[0],t[1]):r(t):s(t)}},3713:(t,e,n)=>{var r=n(6140),i=n(1143),o=Object.prototype.hasOwnProperty;t.exports=function(t){if(!r(t))return i(t);var e=[];for(var n in Object(t))o.call(t,n)&&"constructor"!=n&&e.push(n);return e}},61:t=>{t.exports=function(t,e){return t<e}},8883:(t,e,n)=>{var r=n(5652),i=n(6571);t.exports=function(t,e){var n=-1,o=i(t)?Array(t.length):[];return r(t,(function(t,r,i){o[++n]=e(t,r,i)})),o}},9256:(t,e,n)=>{var r=n(6532),i=n(3781),o=n(1310);t.exports=function(t){var e=i(t);return 1==e.length&&e[0][2]?o(e[0][0],e[0][1]):function(n){return n===t||r(n,t,e)}}},5029:(t,e,n)=>{var r=n(6989),i=n(3097),o=n(3366),a=n(2597),s=n(9417),l=n(1310),c=n(914);t.exports=function(t,e){return a(t)&&s(e)?l(c(t),e):function(n){var a=i(n,t);return void 0===a&&a===e?o(n,t):r(e,a,3)}}},2536:(t,e,n)=>{var r=n(149),i=n(2969),o=n(9096),a=n(8883),s=n(320),l=n(7574),c=n(5893),u=n(3279),h=n(4052);t.exports=function(t,e,n){e=e.length?r(e,(function(t){return h(t)?function(e){return i(e,1===t.length?t[0]:t)}:t})):[u];var d=-1;e=r(e,l(o));var f=a(t,(function(t,n,i){return{criteria:r(e,(function(e){return e(t)})),index:++d,value:t}}));return s(f,(function(t,e){return c(t,e,n)}))}},396:t=>{t.exports=function(t){return function(e){return null==e?void 0:e[t]}}},2866:(t,e,n)=>{var r=n(2969);t.exports=function(t){return function(e){return r(e,t)}}},9676:t=>{var e=Math.ceil,n=Math.max;t.exports=function(t,r,i,o){for(var a=-1,s=n(e((r-t)/(i||1)),0),l=Array(s);s--;)l[o?s:++a]=t,t+=i;return l}},5647:(t,e,n)=>{var r=n(3279),i=n(5636),o=n(6350);t.exports=function(t,e){return o(i(t,e,r),t+"")}},8325:(t,e,n)=>{var r=n(2541),i=n(5654),o=n(3279),a=i?function(t,e){return i(t,"toString",{configurable:!0,enumerable:!1,value:r(e),writable:!0})}:o;t.exports=a},3871:t=>{t.exports=function(t,e,n){var r=-1,i=t.length;e<0&&(e=-e>i?0:i+e),(n=n>i?i:n)<0&&(n+=i),i=e>n?0:n-e>>>0,e>>>=0;for(var o=Array(i);++r<i;)o[r]=t[r+e];return o}},2165:(t,e,n)=>{var r=n(5652);t.exports=function(t,e){var n;return r(t,(function(t,r,i){return!(n=e(t,r,i))})),!!n}},320:t=>{t.exports=function(t,e){var n=t.length;for(t.sort(e);n--;)t[n]=t[n].value;return t}},3343:t=>{t.exports=function(t,e){for(var n=-1,r=Array(t);++n<t;)r[n]=e(n);return r}},8541:(t,e,n)=>{var r=n(9812),i=n(149),o=n(4052),a=n(9841),s=r?r.prototype:void 0,l=s?s.toString:void 0;t.exports=function t(e){if("string"==typeof e)return e;if(o(e))return i(e,t)+"";if(a(e))return l?l.call(e):"";var n=e+"";return"0"==n&&1/e==-1/0?"-0":n}},1141:(t,e,n)=>{var r=n(143),i=/^\s+/;t.exports=function(t){return t?t.slice(0,r(t)+1).replace(i,""):t}},7574:t=>{t.exports=function(t){return function(e){return t(e)}}},4416:(t,e,n)=>{var r=n(8902),i=n(5866),o=n(1558),a=n(8114),s=n(8182),l=n(2074);t.exports=function(t,e,n){var c=-1,u=i,h=t.length,d=!0,f=[],p=f;if(n)d=!1,u=o;else if(h>=200){var m=e?null:s(t);if(m)return l(m);d=!1,u=a,p=new r}else p=e?[]:f;t:for(;++c<h;){var g=t[c],y=e?e(g):g;if(g=n||0!==g?g:0,d&&y===y){for(var v=p.length;v--;)if(p[v]===y)continue t;e&&p.push(y),f.push(g)}else u(p,y,n)||(p!==f&&p.push(y),f.push(g))}return f}},8114:t=>{t.exports=function(t,e){return t.has(e)}},5324:(t,e,n)=>{var r=n(4052),i=n(2597),o=n(4079),a=n(1069);t.exports=function(t,e){return r(t)?t:i(t,e)?[t]:o(a(t))}},8189:(t,e,n)=>{var r=n(3871);t.exports=function(t,e,n){var i=t.length;return n=void 0===n?i:n,!e&&n>=i?t:r(t,e,n)}},6599:(t,e,n)=>{var r=n(9841);t.exports=function(t,e){if(t!==e){var n=void 0!==t,i=null===t,o=t===t,a=r(t),s=void 0!==e,l=null===e,c=e===e,u=r(e);if(!l&&!u&&!a&&t>e||a&&s&&c&&!l&&!u||i&&s&&c||!n&&c||!o)return 1;if(!i&&!a&&!u&&t<e||u&&n&&o&&!i&&!a||l&&n&&o||!s&&o||!c)return-1}return 0}},5893:(t,e,n)=>{var r=n(6599);t.exports=function(t,e,n){for(var i=-1,o=t.criteria,a=e.criteria,s=o.length,l=n.length;++i<s;){var c=r(o[i],a[i]);if(c)return i>=l?c:c*("desc"==n[i]?-1:1)}return t.index-e.index}},3440:(t,e,n)=>{var r=n(6552)["__core-js_shared__"];t.exports=r},6516:(t,e,n)=>{var r=n(6571);t.exports=function(t,e){return function(n,i){if(null==n)return n;if(!r(n))return t(n,i);for(var o=n.length,a=e?o:-1,s=Object(n);(e?a--:++a<o)&&!1!==i(s[a],a,s););return n}}},5906:t=>{t.exports=function(t){return function(e,n,r){for(var i=-1,o=Object(e),a=r(e),s=a.length;s--;){var l=a[t?s:++i];if(!1===n(o[l],l,o))break}return e}}},7676:(t,e,n)=>{var r=n(8189),i=n(6311),o=n(9115),a=n(1069);t.exports=function(t){return function(e){e=a(e);var n=i(e)?o(e):void 0,s=n?n[0]:e.charAt(0),l=n?r(n,1).join(""):e.slice(1);return s[t]()+l}}},9995:(t,e,n)=>{var r=n(9096),i=n(6571),o=n(8673);t.exports=function(t){return function(e,n,a){var s=Object(e);if(!i(e)){var l=r(n,3);e=o(e),n=function(t){return l(s[t],t,s)}}var c=t(e,n,a);return c>-1?s[l?e[c]:c]:void 0}}},3331:(t,e,n)=>{var r=n(9676),i=n(929),o=n(7303);t.exports=function(t){return function(e,n,a){return a&&"number"!=typeof a&&i(e,n,a)&&(n=a=void 0),e=o(e),void 0===n?(n=e,e=0):n=o(n),a=void 0===a?e<n?1:-1:o(a),r(e,n,a,t)}}},8182:(t,e,n)=>{var r=n(2070),i=n(5713),o=n(2074),a=r&&1/o(new r([,-0]))[1]==1/0?function(t){return new r(t)}:i;t.exports=a},5654:(t,e,n)=>{var r=n(7937),i=function(){try{var t=r(Object,"defineProperty");return t({},"",{}),t}catch(e){}}();t.exports=i},3668:(t,e,n)=>{var r=n(8902),i=n(2587),o=n(8114);t.exports=function(t,e,n,a,s,l){var c=1&n,u=t.length,h=e.length;if(u!=h&&!(c&&h>u))return!1;var d=l.get(t),f=l.get(e);if(d&&f)return d==e&&f==t;var p=-1,m=!0,g=2&n?new r:void 0;for(l.set(t,e),l.set(e,t);++p<u;){var y=t[p],v=e[p];if(a)var _=c?a(v,y,p,e,t,l):a(y,v,p,t,e,l);if(void 0!==_){if(_)continue;m=!1;break}if(g){if(!i(e,(function(t,e){if(!o(g,e)&&(y===t||s(y,t,n,a,l)))return g.push(e)}))){m=!1;break}}else if(y!==v&&!s(y,v,n,a,l)){m=!1;break}}return l.delete(t),l.delete(e),m}},9987:(t,e,n)=>{var r=n(9812),i=n(2929),o=n(3211),a=n(3668),s=n(4160),l=n(2074),c=r?r.prototype:void 0,u=c?c.valueOf:void 0;t.exports=function(t,e,n,r,c,h,d){switch(n){case"[object DataView]":if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case"[object ArrayBuffer]":return!(t.byteLength!=e.byteLength||!h(new i(t),new i(e)));case"[object Boolean]":case"[object Date]":case"[object Number]":return o(+t,+e);case"[object Error]":return t.name==e.name&&t.message==e.message;case"[object RegExp]":case"[object String]":return t==e+"";case"[object Map]":var f=s;case"[object Set]":var p=1&r;if(f||(f=l),t.size!=e.size&&!p)return!1;var m=d.get(t);if(m)return m==e;r|=2,d.set(t,e);var g=a(f(t),f(e),r,c,h,d);return d.delete(t),g;case"[object Symbol]":if(u)return u.call(t)==u.call(e)}return!1}},5752:(t,e,n)=>{var r=n(9395),i=Object.prototype.hasOwnProperty;t.exports=function(t,e,n,o,a,s){var l=1&n,c=r(t),u=c.length;if(u!=r(e).length&&!l)return!1;for(var h=u;h--;){var d=c[h];if(!(l?d in e:i.call(e,d)))return!1}var f=s.get(t),p=s.get(e);if(f&&p)return f==e&&p==t;var m=!0;s.set(t,e),s.set(e,t);for(var g=l;++h<u;){var y=t[d=c[h]],v=e[d];if(o)var _=l?o(v,y,d,e,t,s):o(y,v,d,t,e,s);if(!(void 0===_?y===v||a(y,v,n,o,s):_)){m=!1;break}g||(g="constructor"==d)}if(m&&!g){var b=t.constructor,x=e.constructor;b==x||!("constructor"in t)||!("constructor"in e)||"function"==typeof b&&b instanceof b&&"function"==typeof x&&x instanceof x||(m=!1)}return s.delete(t),s.delete(e),m}},7105:(t,e,n)=>{var r="object"==typeof n.g&&n.g&&n.g.Object===Object&&n.g;t.exports=r},9395:(t,e,n)=>{var r=n(4262),i=n(9621),o=n(8673);t.exports=function(t){return r(t,o,i)}},2622:(t,e,n)=>{var r=n(705);t.exports=function(t,e){var n=t.__data__;return r(e)?n["string"==typeof e?"string":"hash"]:n.map}},3781:(t,e,n)=>{var r=n(9417),i=n(8673);t.exports=function(t){for(var e=i(t),n=e.length;n--;){var o=e[n],a=t[o];e[n]=[o,a,r(a)]}return e}},7937:(t,e,n)=>{var r=n(6954),i=n(4657);t.exports=function(t,e){var n=i(t,e);return r(n)?n:void 0}},5990:(t,e,n)=>{var r=n(3028)(Object.getPrototypeOf,Object);t.exports=r},4552:(t,e,n)=>{var r=n(9812),i=Object.prototype,o=i.hasOwnProperty,a=i.toString,s=r?r.toStringTag:void 0;t.exports=function(t){var e=o.call(t,s),n=t[s];try{t[s]=void 0;var r=!0}catch(l){}var i=a.call(t);return r&&(e?t[s]=n:delete t[s]),i}},9621:(t,e,n)=>{var r=n(7529),i=n(7828),o=Object.prototype.propertyIsEnumerable,a=Object.getOwnPropertySymbols,s=a?function(t){return null==t?[]:(t=Object(t),r(a(t),(function(e){return o.call(t,e)})))}:i;t.exports=s},6924:(t,e,n)=>{var r=n(7685),i=n(5204),o=n(5387),a=n(2070),s=n(6600),l=n(6913),c=n(6996),u="[object Map]",h="[object Promise]",d="[object Set]",f="[object WeakMap]",p="[object DataView]",m=c(r),g=c(i),y=c(o),v=c(a),_=c(s),b=l;(r&&b(new r(new ArrayBuffer(1)))!=p||i&&b(new i)!=u||o&&b(o.resolve())!=h||a&&b(new a)!=d||s&&b(new s)!=f)&&(b=function(t){var e=l(t),n="[object Object]"==e?t.constructor:void 0,r=n?c(n):"";if(r)switch(r){case m:return p;case g:return u;case y:return h;case v:return d;case _:return f}return e}),t.exports=b},4657:t=>{t.exports=function(t,e){return null==t?void 0:t[e]}},9057:(t,e,n)=>{var r=n(5324),i=n(2777),o=n(4052),a=n(9194),s=n(6173),l=n(914);t.exports=function(t,e,n){for(var c=-1,u=(e=r(e,t)).length,h=!1;++c<u;){var d=l(e[c]);if(!(h=null!=t&&n(t,d)))break;t=t[d]}return h||++c!=u?h:!!(u=null==t?0:t.length)&&s(u)&&a(d,u)&&(o(t)||i(t))}},6311:t=>{var e=RegExp("[\\u200d\\ud800-\\udfff\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff\\ufe0e\\ufe0f]");t.exports=function(t){return e.test(t)}},7615:(t,e,n)=>{var r=n(5575);t.exports=function(){this.__data__=r?r(null):{},this.size=0}},5051:t=>{t.exports=function(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e}},2154:(t,e,n)=>{var r=n(5575),i=Object.prototype.hasOwnProperty;t.exports=function(t){var e=this.__data__;if(r){var n=e[t];return"__lodash_hash_undefined__"===n?void 0:n}return i.call(e,t)?e[t]:void 0}},8734:(t,e,n)=>{var r=n(5575),i=Object.prototype.hasOwnProperty;t.exports=function(t){var e=this.__data__;return r?void 0!==e[t]:i.call(e,t)}},2662:(t,e,n)=>{var r=n(5575);t.exports=function(t,e){var n=this.__data__;return this.size+=this.has(t)?0:1,n[t]=r&&void 0===e?"__lodash_hash_undefined__":e,this}},7116:(t,e,n)=>{var r=n(9812),i=n(2777),o=n(4052),a=r?r.isConcatSpreadable:void 0;t.exports=function(t){return o(t)||i(t)||!!(a&&t&&t[a])}},9194:t=>{var e=/^(?:0|[1-9]\d*)$/;t.exports=function(t,n){var r=typeof t;return!!(n=null==n?9007199254740991:n)&&("number"==r||"symbol"!=r&&e.test(t))&&t>-1&&t%1==0&&t<n}},929:(t,e,n)=>{var r=n(3211),i=n(6571),o=n(9194),a=n(6686);t.exports=function(t,e,n){if(!a(n))return!1;var s=typeof e;return!!("number"==s?i(n)&&o(e,n.length):"string"==s&&e in n)&&r(n[e],t)}},2597:(t,e,n)=>{var r=n(4052),i=n(9841),o=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,a=/^\w*$/;t.exports=function(t,e){if(r(t))return!1;var n=typeof t;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=t&&!i(t))||(a.test(t)||!o.test(t)||null!=e&&t in Object(e))}},705:t=>{t.exports=function(t){var e=typeof t;return"string"==e||"number"==e||"symbol"==e||"boolean"==e?"__proto__"!==t:null===t}},7857:(t,e,n)=>{var r=n(3440),i=function(){var t=/[^.]+$/.exec(r&&r.keys&&r.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}();t.exports=function(t){return!!i&&i in t}},6140:t=>{var e=Object.prototype;t.exports=function(t){var n=t&&t.constructor;return t===("function"==typeof n&&n.prototype||e)}},9417:(t,e,n)=>{var r=n(6686);t.exports=function(t){return t===t&&!r(t)}},7563:t=>{t.exports=function(){this.__data__=[],this.size=0}},9935:(t,e,n)=>{var r=n(1340),i=Array.prototype.splice;t.exports=function(t){var e=this.__data__,n=r(e,t);return!(n<0)&&(n==e.length-1?e.pop():i.call(e,n,1),--this.size,!0)}},4190:(t,e,n)=>{var r=n(1340);t.exports=function(t){var e=this.__data__,n=r(e,t);return n<0?void 0:e[n][1]}},1946:(t,e,n)=>{var r=n(1340);t.exports=function(t){return r(this.__data__,t)>-1}},1714:(t,e,n)=>{var r=n(1340);t.exports=function(t,e){var n=this.__data__,i=r(n,t);return i<0?(++this.size,n.push([t,e])):n[i][1]=e,this}},7251:(t,e,n)=>{var r=n(8724),i=n(7160),o=n(5204);t.exports=function(){this.size=0,this.__data__={hash:new r,map:new(o||i),string:new r}}},7159:(t,e,n)=>{var r=n(2622);t.exports=function(t){var e=r(this,t).delete(t);return this.size-=e?1:0,e}},438:(t,e,n)=>{var r=n(2622);t.exports=function(t){return r(this,t).get(t)}},9394:(t,e,n)=>{var r=n(2622);t.exports=function(t){return r(this,t).has(t)}},6874:(t,e,n)=>{var r=n(2622);t.exports=function(t,e){var n=r(this,t),i=n.size;return n.set(t,e),this.size+=n.size==i?0:1,this}},4160:t=>{t.exports=function(t){var e=-1,n=Array(t.size);return t.forEach((function(t,r){n[++e]=[r,t]})),n}},1310:t=>{t.exports=function(t,e){return function(n){return null!=n&&(n[t]===e&&(void 0!==e||t in Object(n)))}}},8259:(t,e,n)=>{var r=n(5797);t.exports=function(t){var e=r(t,(function(t){return 500===n.size&&n.clear(),t})),n=e.cache;return e}},5575:(t,e,n)=>{var r=n(7937)(Object,"create");t.exports=r},1143:(t,e,n)=>{var r=n(3028)(Object.keys,Object);t.exports=r},6832:(t,e,n)=>{t=n.nmd(t);var r=n(7105),i=e&&!e.nodeType&&e,o=i&&t&&!t.nodeType&&t,a=o&&o.exports===i&&r.process,s=function(){try{var t=o&&o.require&&o.require("util").types;return t||a&&a.binding&&a.binding("util")}catch(e){}}();t.exports=s},6095:t=>{var e=Object.prototype.toString;t.exports=function(t){return e.call(t)}},3028:t=>{t.exports=function(t,e){return function(n){return t(e(n))}}},5636:(t,e,n)=>{var r=n(1170),i=Math.max;t.exports=function(t,e,n){return e=i(void 0===e?t.length-1:e,0),function(){for(var o=arguments,a=-1,s=i(o.length-e,0),l=Array(s);++a<s;)l[a]=o[e+a];a=-1;for(var c=Array(e+1);++a<e;)c[a]=o[a];return c[e]=n(l),r(t,this,c)}}},6552:(t,e,n)=>{var r=n(7105),i="object"==typeof self&&self&&self.Object===Object&&self,o=r||i||Function("return this")();t.exports=o},6179:t=>{t.exports=function(t){return this.__data__.set(t,"__lodash_hash_undefined__"),this}},6704:t=>{t.exports=function(t){return this.__data__.has(t)}},2074:t=>{t.exports=function(t){var e=-1,n=Array(t.size);return t.forEach((function(t){n[++e]=t})),n}},6350:(t,e,n)=>{var r=n(8325),i=n(6578)(r);t.exports=i},6578:t=>{var e=Date.now;t.exports=function(t){var n=0,r=0;return function(){var i=e(),o=16-(i-r);if(r=i,o>0){if(++n>=800)return arguments[0]}else n=0;return t.apply(void 0,arguments)}}},4545:(t,e,n)=>{var r=n(7160);t.exports=function(){this.__data__=new r,this.size=0}},793:t=>{t.exports=function(t){var e=this.__data__,n=e.delete(t);return this.size=e.size,n}},7760:t=>{t.exports=function(t){return this.__data__.get(t)}},3892:t=>{t.exports=function(t){return this.__data__.has(t)}},6788:(t,e,n)=>{var r=n(7160),i=n(5204),o=n(4816);t.exports=function(t,e){var n=this.__data__;if(n instanceof r){var a=n.__data__;if(!i||a.length<199)return a.push([t,e]),this.size=++n.size,this;n=this.__data__=new o(a)}return n.set(t,e),this.size=n.size,this}},4020:t=>{t.exports=function(t,e,n){for(var r=n-1,i=t.length;++r<i;)if(t[r]===e)return r;return-1}},9115:(t,e,n)=>{var r=n(5967),i=n(6311),o=n(715);t.exports=function(t){return i(t)?o(t):r(t)}},4079:(t,e,n)=>{var r=n(8259),i=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,o=/\\(\\)?/g,a=r((function(t){var e=[];return 46===t.charCodeAt(0)&&e.push(""),t.replace(i,(function(t,n,r,i){e.push(r?i.replace(o,"$1"):n||t)})),e}));t.exports=a},914:(t,e,n)=>{var r=n(9841);t.exports=function(t){if("string"==typeof t||r(t))return t;var e=t+"";return"0"==e&&1/t==-1/0?"-0":e}},6996:t=>{var e=Function.prototype.toString;t.exports=function(t){if(null!=t){try{return e.call(t)}catch(n){}try{return t+""}catch(n){}}return""}},143:t=>{var e=/\s/;t.exports=function(t){for(var n=t.length;n--&&e.test(t.charAt(n)););return n}},715:t=>{var e="\\ud800-\\udfff",n="["+e+"]",r="[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]",i="\\ud83c[\\udffb-\\udfff]",o="[^"+e+"]",a="(?:\\ud83c[\\udde6-\\uddff]){2}",s="[\\ud800-\\udbff][\\udc00-\\udfff]",l="(?:"+r+"|"+i+")"+"?",c="[\\ufe0e\\ufe0f]?",u=c+l+("(?:\\u200d(?:"+[o,a,s].join("|")+")"+c+l+")*"),h="(?:"+[o+r+"?",r,a,s,n].join("|")+")",d=RegExp(i+"(?="+i+")|"+h+u,"g");t.exports=function(t){return t.match(d)||[]}},2541:t=>{t.exports=function(t){return function(){return t}}},3950:(t,e,n)=>{var r=n(6686),i=n(4757),o=n(801),a=Math.max,s=Math.min;t.exports=function(t,e,n){var l,c,u,h,d,f,p=0,m=!1,g=!1,y=!0;if("function"!=typeof t)throw new TypeError("Expected a function");function v(e){var n=l,r=c;return l=c=void 0,p=e,h=t.apply(r,n)}function _(t){var n=t-f;return void 0===f||n>=e||n<0||g&&t-p>=u}function b(){var t=i();if(_(t))return x(t);d=setTimeout(b,function(t){var n=e-(t-f);return g?s(n,u-(t-p)):n}(t))}function x(t){return d=void 0,y&&l?v(t):(l=c=void 0,h)}function w(){var t=i(),n=_(t);if(l=arguments,c=this,f=t,n){if(void 0===d)return function(t){return p=t,d=setTimeout(b,e),m?v(t):h}(f);if(g)return clearTimeout(d),d=setTimeout(b,e),v(f)}return void 0===d&&(d=setTimeout(b,e)),h}return e=o(e)||0,r(n)&&(m=!!n.leading,u=(g="maxWait"in n)?a(o(n.maxWait)||0,e):u,y="trailing"in n?!!n.trailing:y),w.cancel=function(){void 0!==d&&clearTimeout(d),p=0,l=f=c=d=void 0},w.flush=function(){return void 0===d?h:x(i())},w}},3211:t=>{t.exports=function(t,e){return t===e||t!==t&&e!==e}},7002:(t,e,n)=>{var r=n(5295),i=n(4746),o=n(9096),a=n(4052),s=n(929);t.exports=function(t,e,n){var l=a(t)?r:i;return n&&s(t,e,n)&&(e=void 0),l(t,o(e,3))}},8990:(t,e,n)=>{var r=n(9995)(n(2520));t.exports=r},2520:(t,e,n)=>{var r=n(5816),i=n(9096),o=n(9140),a=Math.max;t.exports=function(t,e,n){var s=null==t?0:t.length;if(!s)return-1;var l=null==n?0:o(n);return l<0&&(l=a(s+l,0)),r(t,i(e,3),l)}},3538:(t,e,n)=>{var r=n(755),i=n(3411);t.exports=function(t,e){return r(i(t,e),1)}},3097:(t,e,n)=>{var r=n(2969);t.exports=function(t,e,n){var i=null==t?void 0:r(t,e);return void 0===i?n:i}},3366:(t,e,n)=>{var r=n(7894),i=n(9057);t.exports=function(t,e){return null!=t&&i(t,e,r)}},3279:t=>{t.exports=function(t){return t}},2777:(t,e,n)=>{var r=n(5193),i=n(2761),o=Object.prototype,a=o.hasOwnProperty,s=o.propertyIsEnumerable,l=r(function(){return arguments}())?r:function(t){return i(t)&&a.call(t,"callee")&&!s.call(t,"callee")};t.exports=l},4052:t=>{var e=Array.isArray;t.exports=e},6571:(t,e,n)=>{var r=n(1629),i=n(6173);t.exports=function(t){return null!=t&&i(t.length)&&!r(t)}},6361:(t,e,n)=>{var r=n(6913),i=n(2761);t.exports=function(t){return!0===t||!1===t||i(t)&&"[object Boolean]"==r(t)}},4543:(t,e,n)=>{t=n.nmd(t);var r=n(6552),i=n(14),o=e&&!e.nodeType&&e,a=o&&t&&!t.nodeType&&t,s=a&&a.exports===o?r.Buffer:void 0,l=(s?s.isBuffer:void 0)||i;t.exports=l},9853:(t,e,n)=>{var r=n(6989);t.exports=function(t,e){return r(t,e)}},1629:(t,e,n)=>{var r=n(6913),i=n(6686);t.exports=function(t){if(!i(t))return!1;var e=r(t);return"[object Function]"==e||"[object GeneratorFunction]"==e||"[object AsyncFunction]"==e||"[object Proxy]"==e}},6173:t=>{t.exports=function(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=9007199254740991}},5268:(t,e,n)=>{var r=n(9160);t.exports=function(t){return r(t)&&t!=+t}},9686:t=>{t.exports=function(t){return null==t}},9160:(t,e,n)=>{var r=n(6913),i=n(2761);t.exports=function(t){return"number"==typeof t||i(t)&&"[object Number]"==r(t)}},6686:t=>{t.exports=function(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)}},2761:t=>{t.exports=function(t){return null!=t&&"object"==typeof t}},2322:(t,e,n)=>{var r=n(6913),i=n(5990),o=n(2761),a=Function.prototype,s=Object.prototype,l=a.toString,c=s.hasOwnProperty,u=l.call(Object);t.exports=function(t){if(!o(t)||"[object Object]"!=r(t))return!1;var e=i(t);if(null===e)return!0;var n=c.call(e,"constructor")&&e.constructor;return"function"==typeof n&&n instanceof n&&l.call(n)==u}},620:(t,e,n)=>{var r=n(6913),i=n(4052),o=n(2761);t.exports=function(t){return"string"==typeof t||!i(t)&&o(t)&&"[object String]"==r(t)}},9841:(t,e,n)=>{var r=n(6913),i=n(2761);t.exports=function(t){return"symbol"==typeof t||i(t)&&"[object Symbol]"==r(t)}},1268:(t,e,n)=>{var r=n(5428),i=n(7574),o=n(6832),a=o&&o.isTypedArray,s=a?i(a):r;t.exports=s},8673:(t,e,n)=>{var r=n(3204),i=n(3713),o=n(6571);t.exports=function(t){return o(t)?r(t):i(t)}},4065:t=>{t.exports=function(t){var e=null==t?0:t.length;return e?t[e-1]:void 0}},3536:function(t,e,n){var r;t=n.nmd(t),function(){var i,o="Expected a function",a="__lodash_hash_undefined__",s="__lodash_placeholder__",l=16,c=32,u=64,h=128,d=256,f=1/0,p=9007199254740991,m=NaN,g=4294967295,y=[["ary",h],["bind",1],["bindKey",2],["curry",8],["curryRight",l],["flip",512],["partial",c],["partialRight",u],["rearg",d]],v="[object Arguments]",_="[object Array]",b="[object Boolean]",x="[object Date]",w="[object Error]",S="[object Function]",E="[object GeneratorFunction]",T="[object Map]",M="[object Number]",A="[object Object]",C="[object Promise]",P="[object RegExp]",k="[object Set]",I="[object String]",O="[object Symbol]",L="[object WeakMap]",j="[object ArrayBuffer]",z="[object DataView]",R="[object Float32Array]",D="[object Float64Array]",B="[object Int8Array]",F="[object Int16Array]",N="[object Int32Array]",U="[object Uint8Array]",V="[object Uint8ClampedArray]",W="[object Uint16Array]",G="[object Uint32Array]",q=/\b__p \+= '';/g,H=/\b(__p \+=) '' \+/g,Z=/(__e\(.*?\)|\b__t\)) \+\n'';/g,X=/&(?:amp|lt|gt|quot|#39);/g,Y=/[&<>"']/g,K=RegExp(X.source),$=RegExp(Y.source),J=/<%-([\s\S]+?)%>/g,Q=/<%([\s\S]+?)%>/g,tt=/<%=([\s\S]+?)%>/g,et=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,nt=/^\w*$/,rt=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,it=/[\\^$.*+?()[\]{}|]/g,ot=RegExp(it.source),at=/^\s+/,st=/\s/,lt=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,ct=/\{\n\/\* \[wrapped with (.+)\] \*/,ut=/,? & /,ht=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,dt=/[()=,{}\[\]\/\s]/,ft=/\\(\\)?/g,pt=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,mt=/\w*$/,gt=/^[-+]0x[0-9a-f]+$/i,yt=/^0b[01]+$/i,vt=/^\[object .+?Constructor\]$/,_t=/^0o[0-7]+$/i,bt=/^(?:0|[1-9]\d*)$/,xt=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,wt=/($^)/,St=/['\n\r\u2028\u2029\\]/g,Et="\\ud800-\\udfff",Tt="\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff",Mt="\\u2700-\\u27bf",At="a-z\\xdf-\\xf6\\xf8-\\xff",Ct="A-Z\\xc0-\\xd6\\xd8-\\xde",Pt="\\ufe0e\\ufe0f",kt="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",It="['\u2019]",Ot="["+Et+"]",Lt="["+kt+"]",jt="["+Tt+"]",zt="\\d+",Rt="["+Mt+"]",Dt="["+At+"]",Bt="[^"+Et+kt+zt+Mt+At+Ct+"]",Ft="\\ud83c[\\udffb-\\udfff]",Nt="[^"+Et+"]",Ut="(?:\\ud83c[\\udde6-\\uddff]){2}",Vt="[\\ud800-\\udbff][\\udc00-\\udfff]",Wt="["+Ct+"]",Gt="\\u200d",qt="(?:"+Dt+"|"+Bt+")",Ht="(?:"+Wt+"|"+Bt+")",Zt="(?:['\u2019](?:d|ll|m|re|s|t|ve))?",Xt="(?:['\u2019](?:D|LL|M|RE|S|T|VE))?",Yt="(?:"+jt+"|"+Ft+")"+"?",Kt="["+Pt+"]?",$t=Kt+Yt+("(?:"+Gt+"(?:"+[Nt,Ut,Vt].join("|")+")"+Kt+Yt+")*"),Jt="(?:"+[Rt,Ut,Vt].join("|")+")"+$t,Qt="(?:"+[Nt+jt+"?",jt,Ut,Vt,Ot].join("|")+")",te=RegExp(It,"g"),ee=RegExp(jt,"g"),ne=RegExp(Ft+"(?="+Ft+")|"+Qt+$t,"g"),re=RegExp([Wt+"?"+Dt+"+"+Zt+"(?="+[Lt,Wt,"$"].join("|")+")",Ht+"+"+Xt+"(?="+[Lt,Wt+qt,"$"].join("|")+")",Wt+"?"+qt+"+"+Zt,Wt+"+"+Xt,"\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])","\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",zt,Jt].join("|"),"g"),ie=RegExp("["+Gt+Et+Tt+Pt+"]"),oe=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,ae=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],se=-1,le={};le[R]=le[D]=le[B]=le[F]=le[N]=le[U]=le[V]=le[W]=le[G]=!0,le[v]=le[_]=le[j]=le[b]=le[z]=le[x]=le[w]=le[S]=le[T]=le[M]=le[A]=le[P]=le[k]=le[I]=le[L]=!1;var ce={};ce[v]=ce[_]=ce[j]=ce[z]=ce[b]=ce[x]=ce[R]=ce[D]=ce[B]=ce[F]=ce[N]=ce[T]=ce[M]=ce[A]=ce[P]=ce[k]=ce[I]=ce[O]=ce[U]=ce[V]=ce[W]=ce[G]=!0,ce[w]=ce[S]=ce[L]=!1;var ue={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},he=parseFloat,de=parseInt,fe="object"==typeof n.g&&n.g&&n.g.Object===Object&&n.g,pe="object"==typeof self&&self&&self.Object===Object&&self,me=fe||pe||Function("return this")(),ge=e&&!e.nodeType&&e,ye=ge&&t&&!t.nodeType&&t,ve=ye&&ye.exports===ge,_e=ve&&fe.process,be=function(){try{var t=ye&&ye.require&&ye.require("util").types;return t||_e&&_e.binding&&_e.binding("util")}catch(e){}}(),xe=be&&be.isArrayBuffer,we=be&&be.isDate,Se=be&&be.isMap,Ee=be&&be.isRegExp,Te=be&&be.isSet,Me=be&&be.isTypedArray;function Ae(t,e,n){switch(n.length){case 0:return t.call(e);case 1:return t.call(e,n[0]);case 2:return t.call(e,n[0],n[1]);case 3:return t.call(e,n[0],n[1],n[2])}return t.apply(e,n)}function Ce(t,e,n,r){for(var i=-1,o=null==t?0:t.length;++i<o;){var a=t[i];e(r,a,n(a),t)}return r}function Pe(t,e){for(var n=-1,r=null==t?0:t.length;++n<r&&!1!==e(t[n],n,t););return t}function ke(t,e){for(var n=null==t?0:t.length;n--&&!1!==e(t[n],n,t););return t}function Ie(t,e){for(var n=-1,r=null==t?0:t.length;++n<r;)if(!e(t[n],n,t))return!1;return!0}function Oe(t,e){for(var n=-1,r=null==t?0:t.length,i=0,o=[];++n<r;){var a=t[n];e(a,n,t)&&(o[i++]=a)}return o}function Le(t,e){return!!(null==t?0:t.length)&&We(t,e,0)>-1}function je(t,e,n){for(var r=-1,i=null==t?0:t.length;++r<i;)if(n(e,t[r]))return!0;return!1}function ze(t,e){for(var n=-1,r=null==t?0:t.length,i=Array(r);++n<r;)i[n]=e(t[n],n,t);return i}function Re(t,e){for(var n=-1,r=e.length,i=t.length;++n<r;)t[i+n]=e[n];return t}function De(t,e,n,r){var i=-1,o=null==t?0:t.length;for(r&&o&&(n=t[++i]);++i<o;)n=e(n,t[i],i,t);return n}function Be(t,e,n,r){var i=null==t?0:t.length;for(r&&i&&(n=t[--i]);i--;)n=e(n,t[i],i,t);return n}function Fe(t,e){for(var n=-1,r=null==t?0:t.length;++n<r;)if(e(t[n],n,t))return!0;return!1}var Ne=Ze("length");function Ue(t,e,n){var r;return n(t,(function(t,n,i){if(e(t,n,i))return r=n,!1})),r}function Ve(t,e,n,r){for(var i=t.length,o=n+(r?1:-1);r?o--:++o<i;)if(e(t[o],o,t))return o;return-1}function We(t,e,n){return e===e?function(t,e,n){var r=n-1,i=t.length;for(;++r<i;)if(t[r]===e)return r;return-1}(t,e,n):Ve(t,qe,n)}function Ge(t,e,n,r){for(var i=n-1,o=t.length;++i<o;)if(r(t[i],e))return i;return-1}function qe(t){return t!==t}function He(t,e){var n=null==t?0:t.length;return n?Ke(t,e)/n:m}function Ze(t){return function(e){return null==e?i:e[t]}}function Xe(t){return function(e){return null==t?i:t[e]}}function Ye(t,e,n,r,i){return i(t,(function(t,i,o){n=r?(r=!1,t):e(n,t,i,o)})),n}function Ke(t,e){for(var n,r=-1,o=t.length;++r<o;){var a=e(t[r]);a!==i&&(n=n===i?a:n+a)}return n}function $e(t,e){for(var n=-1,r=Array(t);++n<t;)r[n]=e(n);return r}function Je(t){return t?t.slice(0,gn(t)+1).replace(at,""):t}function Qe(t){return function(e){return t(e)}}function tn(t,e){return ze(e,(function(e){return t[e]}))}function en(t,e){return t.has(e)}function nn(t,e){for(var n=-1,r=t.length;++n<r&&We(e,t[n],0)>-1;);return n}function rn(t,e){for(var n=t.length;n--&&We(e,t[n],0)>-1;);return n}var on=Xe({"\xc0":"A","\xc1":"A","\xc2":"A","\xc3":"A","\xc4":"A","\xc5":"A","\xe0":"a","\xe1":"a","\xe2":"a","\xe3":"a","\xe4":"a","\xe5":"a","\xc7":"C","\xe7":"c","\xd0":"D","\xf0":"d","\xc8":"E","\xc9":"E","\xca":"E","\xcb":"E","\xe8":"e","\xe9":"e","\xea":"e","\xeb":"e","\xcc":"I","\xcd":"I","\xce":"I","\xcf":"I","\xec":"i","\xed":"i","\xee":"i","\xef":"i","\xd1":"N","\xf1":"n","\xd2":"O","\xd3":"O","\xd4":"O","\xd5":"O","\xd6":"O","\xd8":"O","\xf2":"o","\xf3":"o","\xf4":"o","\xf5":"o","\xf6":"o","\xf8":"o","\xd9":"U","\xda":"U","\xdb":"U","\xdc":"U","\xf9":"u","\xfa":"u","\xfb":"u","\xfc":"u","\xdd":"Y","\xfd":"y","\xff":"y","\xc6":"Ae","\xe6":"ae","\xde":"Th","\xfe":"th","\xdf":"ss","\u0100":"A","\u0102":"A","\u0104":"A","\u0101":"a","\u0103":"a","\u0105":"a","\u0106":"C","\u0108":"C","\u010a":"C","\u010c":"C","\u0107":"c","\u0109":"c","\u010b":"c","\u010d":"c","\u010e":"D","\u0110":"D","\u010f":"d","\u0111":"d","\u0112":"E","\u0114":"E","\u0116":"E","\u0118":"E","\u011a":"E","\u0113":"e","\u0115":"e","\u0117":"e","\u0119":"e","\u011b":"e","\u011c":"G","\u011e":"G","\u0120":"G","\u0122":"G","\u011d":"g","\u011f":"g","\u0121":"g","\u0123":"g","\u0124":"H","\u0126":"H","\u0125":"h","\u0127":"h","\u0128":"I","\u012a":"I","\u012c":"I","\u012e":"I","\u0130":"I","\u0129":"i","\u012b":"i","\u012d":"i","\u012f":"i","\u0131":"i","\u0134":"J","\u0135":"j","\u0136":"K","\u0137":"k","\u0138":"k","\u0139":"L","\u013b":"L","\u013d":"L","\u013f":"L","\u0141":"L","\u013a":"l","\u013c":"l","\u013e":"l","\u0140":"l","\u0142":"l","\u0143":"N","\u0145":"N","\u0147":"N","\u014a":"N","\u0144":"n","\u0146":"n","\u0148":"n","\u014b":"n","\u014c":"O","\u014e":"O","\u0150":"O","\u014d":"o","\u014f":"o","\u0151":"o","\u0154":"R","\u0156":"R","\u0158":"R","\u0155":"r","\u0157":"r","\u0159":"r","\u015a":"S","\u015c":"S","\u015e":"S","\u0160":"S","\u015b":"s","\u015d":"s","\u015f":"s","\u0161":"s","\u0162":"T","\u0164":"T","\u0166":"T","\u0163":"t","\u0165":"t","\u0167":"t","\u0168":"U","\u016a":"U","\u016c":"U","\u016e":"U","\u0170":"U","\u0172":"U","\u0169":"u","\u016b":"u","\u016d":"u","\u016f":"u","\u0171":"u","\u0173":"u","\u0174":"W","\u0175":"w","\u0176":"Y","\u0177":"y","\u0178":"Y","\u0179":"Z","\u017b":"Z","\u017d":"Z","\u017a":"z","\u017c":"z","\u017e":"z","\u0132":"IJ","\u0133":"ij","\u0152":"Oe","\u0153":"oe","\u0149":"'n","\u017f":"s"}),an=Xe({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"});function sn(t){return"\\"+ue[t]}function ln(t){return ie.test(t)}function cn(t){var e=-1,n=Array(t.size);return t.forEach((function(t,r){n[++e]=[r,t]})),n}function un(t,e){return function(n){return t(e(n))}}function hn(t,e){for(var n=-1,r=t.length,i=0,o=[];++n<r;){var a=t[n];a!==e&&a!==s||(t[n]=s,o[i++]=n)}return o}function dn(t){var e=-1,n=Array(t.size);return t.forEach((function(t){n[++e]=t})),n}function fn(t){var e=-1,n=Array(t.size);return t.forEach((function(t){n[++e]=[t,t]})),n}function pn(t){return ln(t)?function(t){var e=ne.lastIndex=0;for(;ne.test(t);)++e;return e}(t):Ne(t)}function mn(t){return ln(t)?function(t){return t.match(ne)||[]}(t):function(t){return t.split("")}(t)}function gn(t){for(var e=t.length;e--&&st.test(t.charAt(e)););return e}var yn=Xe({"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"});var vn=function t(e){var n=(e=null==e?me:vn.defaults(me.Object(),e,vn.pick(me,ae))).Array,r=e.Date,st=e.Error,Et=e.Function,Tt=e.Math,Mt=e.Object,At=e.RegExp,Ct=e.String,Pt=e.TypeError,kt=n.prototype,It=Et.prototype,Ot=Mt.prototype,Lt=e["__core-js_shared__"],jt=It.toString,zt=Ot.hasOwnProperty,Rt=0,Dt=function(){var t=/[^.]+$/.exec(Lt&&Lt.keys&&Lt.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}(),Bt=Ot.toString,Ft=jt.call(Mt),Nt=me._,Ut=At("^"+jt.call(zt).replace(it,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Vt=ve?e.Buffer:i,Wt=e.Symbol,Gt=e.Uint8Array,qt=Vt?Vt.allocUnsafe:i,Ht=un(Mt.getPrototypeOf,Mt),Zt=Mt.create,Xt=Ot.propertyIsEnumerable,Yt=kt.splice,Kt=Wt?Wt.isConcatSpreadable:i,$t=Wt?Wt.iterator:i,Jt=Wt?Wt.toStringTag:i,Qt=function(){try{var t=ho(Mt,"defineProperty");return t({},"",{}),t}catch(e){}}(),ne=e.clearTimeout!==me.clearTimeout&&e.clearTimeout,ie=r&&r.now!==me.Date.now&&r.now,ue=e.setTimeout!==me.setTimeout&&e.setTimeout,fe=Tt.ceil,pe=Tt.floor,ge=Mt.getOwnPropertySymbols,ye=Vt?Vt.isBuffer:i,_e=e.isFinite,be=kt.join,Ne=un(Mt.keys,Mt),Xe=Tt.max,_n=Tt.min,bn=r.now,xn=e.parseInt,wn=Tt.random,Sn=kt.reverse,En=ho(e,"DataView"),Tn=ho(e,"Map"),Mn=ho(e,"Promise"),An=ho(e,"Set"),Cn=ho(e,"WeakMap"),Pn=ho(Mt,"create"),kn=Cn&&new Cn,In={},On=Bo(En),Ln=Bo(Tn),jn=Bo(Mn),zn=Bo(An),Rn=Bo(Cn),Dn=Wt?Wt.prototype:i,Bn=Dn?Dn.valueOf:i,Fn=Dn?Dn.toString:i;function Nn(t){if(es(t)&&!Ga(t)&&!(t instanceof Gn)){if(t instanceof Wn)return t;if(zt.call(t,"__wrapped__"))return Fo(t)}return new Wn(t)}var Un=function(){function t(){}return function(e){if(!ts(e))return{};if(Zt)return Zt(e);t.prototype=e;var n=new t;return t.prototype=i,n}}();function Vn(){}function Wn(t,e){this.__wrapped__=t,this.__actions__=[],this.__chain__=!!e,this.__index__=0,this.__values__=i}function Gn(t){this.__wrapped__=t,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=g,this.__views__=[]}function qn(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}function Hn(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}function Zn(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}function Xn(t){var e=-1,n=null==t?0:t.length;for(this.__data__=new Zn;++e<n;)this.add(t[e])}function Yn(t){var e=this.__data__=new Hn(t);this.size=e.size}function Kn(t,e){var n=Ga(t),r=!n&&Wa(t),i=!n&&!r&&Xa(t),o=!n&&!r&&!i&&cs(t),a=n||r||i||o,s=a?$e(t.length,Ct):[],l=s.length;for(var c in t)!e&&!zt.call(t,c)||a&&("length"==c||i&&("offset"==c||"parent"==c)||o&&("buffer"==c||"byteLength"==c||"byteOffset"==c)||_o(c,l))||s.push(c);return s}function $n(t){var e=t.length;return e?t[Xr(0,e-1)]:i}function Jn(t,e){return zo(Pi(t),sr(e,0,t.length))}function Qn(t){return zo(Pi(t))}function tr(t,e,n){(n!==i&&!Na(t[e],n)||n===i&&!(e in t))&&or(t,e,n)}function er(t,e,n){var r=t[e];zt.call(t,e)&&Na(r,n)&&(n!==i||e in t)||or(t,e,n)}function nr(t,e){for(var n=t.length;n--;)if(Na(t[n][0],e))return n;return-1}function rr(t,e,n,r){return dr(t,(function(t,i,o){e(r,t,n(t),o)})),r}function ir(t,e){return t&&ki(e,Is(e),t)}function or(t,e,n){"__proto__"==e&&Qt?Qt(t,e,{configurable:!0,enumerable:!0,value:n,writable:!0}):t[e]=n}function ar(t,e){for(var r=-1,o=e.length,a=n(o),s=null==t;++r<o;)a[r]=s?i:Ms(t,e[r]);return a}function sr(t,e,n){return t===t&&(n!==i&&(t=t<=n?t:n),e!==i&&(t=t>=e?t:e)),t}function lr(t,e,n,r,o,a){var s,l=1&e,c=2&e,u=4&e;if(n&&(s=o?n(t,r,o,a):n(t)),s!==i)return s;if(!ts(t))return t;var h=Ga(t);if(h){if(s=function(t){var e=t.length,n=new t.constructor(e);e&&"string"==typeof t[0]&&zt.call(t,"index")&&(n.index=t.index,n.input=t.input);return n}(t),!l)return Pi(t,s)}else{var d=mo(t),f=d==S||d==E;if(Xa(t))return Si(t,l);if(d==A||d==v||f&&!o){if(s=c||f?{}:yo(t),!l)return c?function(t,e){return ki(t,po(t),e)}(t,function(t,e){return t&&ki(e,Os(e),t)}(s,t)):function(t,e){return ki(t,fo(t),e)}(t,ir(s,t))}else{if(!ce[d])return o?t:{};s=function(t,e,n){var r=t.constructor;switch(e){case j:return Ei(t);case b:case x:return new r(+t);case z:return function(t,e){var n=e?Ei(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.byteLength)}(t,n);case R:case D:case B:case F:case N:case U:case V:case W:case G:return Ti(t,n);case T:return new r;case M:case I:return new r(t);case P:return function(t){var e=new t.constructor(t.source,mt.exec(t));return e.lastIndex=t.lastIndex,e}(t);case k:return new r;case O:return i=t,Bn?Mt(Bn.call(i)):{}}var i}(t,d,l)}}a||(a=new Yn);var p=a.get(t);if(p)return p;a.set(t,s),as(t)?t.forEach((function(r){s.add(lr(r,e,n,r,t,a))})):ns(t)&&t.forEach((function(r,i){s.set(i,lr(r,e,n,i,t,a))}));var m=h?i:(u?c?io:ro:c?Os:Is)(t);return Pe(m||t,(function(r,i){m&&(r=t[i=r]),er(s,i,lr(r,e,n,i,t,a))})),s}function cr(t,e,n){var r=n.length;if(null==t)return!r;for(t=Mt(t);r--;){var o=n[r],a=e[o],s=t[o];if(s===i&&!(o in t)||!a(s))return!1}return!0}function ur(t,e,n){if("function"!=typeof t)throw new Pt(o);return Io((function(){t.apply(i,n)}),e)}function hr(t,e,n,r){var i=-1,o=Le,a=!0,s=t.length,l=[],c=e.length;if(!s)return l;n&&(e=ze(e,Qe(n))),r?(o=je,a=!1):e.length>=200&&(o=en,a=!1,e=new Xn(e));t:for(;++i<s;){var u=t[i],h=null==n?u:n(u);if(u=r||0!==u?u:0,a&&h===h){for(var d=c;d--;)if(e[d]===h)continue t;l.push(u)}else o(e,h,r)||l.push(u)}return l}Nn.templateSettings={escape:J,evaluate:Q,interpolate:tt,variable:"",imports:{_:Nn}},Nn.prototype=Vn.prototype,Nn.prototype.constructor=Nn,Wn.prototype=Un(Vn.prototype),Wn.prototype.constructor=Wn,Gn.prototype=Un(Vn.prototype),Gn.prototype.constructor=Gn,qn.prototype.clear=function(){this.__data__=Pn?Pn(null):{},this.size=0},qn.prototype.delete=function(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e},qn.prototype.get=function(t){var e=this.__data__;if(Pn){var n=e[t];return n===a?i:n}return zt.call(e,t)?e[t]:i},qn.prototype.has=function(t){var e=this.__data__;return Pn?e[t]!==i:zt.call(e,t)},qn.prototype.set=function(t,e){var n=this.__data__;return this.size+=this.has(t)?0:1,n[t]=Pn&&e===i?a:e,this},Hn.prototype.clear=function(){this.__data__=[],this.size=0},Hn.prototype.delete=function(t){var e=this.__data__,n=nr(e,t);return!(n<0)&&(n==e.length-1?e.pop():Yt.call(e,n,1),--this.size,!0)},Hn.prototype.get=function(t){var e=this.__data__,n=nr(e,t);return n<0?i:e[n][1]},Hn.prototype.has=function(t){return nr(this.__data__,t)>-1},Hn.prototype.set=function(t,e){var n=this.__data__,r=nr(n,t);return r<0?(++this.size,n.push([t,e])):n[r][1]=e,this},Zn.prototype.clear=function(){this.size=0,this.__data__={hash:new qn,map:new(Tn||Hn),string:new qn}},Zn.prototype.delete=function(t){var e=co(this,t).delete(t);return this.size-=e?1:0,e},Zn.prototype.get=function(t){return co(this,t).get(t)},Zn.prototype.has=function(t){return co(this,t).has(t)},Zn.prototype.set=function(t,e){var n=co(this,t),r=n.size;return n.set(t,e),this.size+=n.size==r?0:1,this},Xn.prototype.add=Xn.prototype.push=function(t){return this.__data__.set(t,a),this},Xn.prototype.has=function(t){return this.__data__.has(t)},Yn.prototype.clear=function(){this.__data__=new Hn,this.size=0},Yn.prototype.delete=function(t){var e=this.__data__,n=e.delete(t);return this.size=e.size,n},Yn.prototype.get=function(t){return this.__data__.get(t)},Yn.prototype.has=function(t){return this.__data__.has(t)},Yn.prototype.set=function(t,e){var n=this.__data__;if(n instanceof Hn){var r=n.__data__;if(!Tn||r.length<199)return r.push([t,e]),this.size=++n.size,this;n=this.__data__=new Zn(r)}return n.set(t,e),this.size=n.size,this};var dr=Li(br),fr=Li(xr,!0);function pr(t,e){var n=!0;return dr(t,(function(t,r,i){return n=!!e(t,r,i)})),n}function mr(t,e,n){for(var r=-1,o=t.length;++r<o;){var a=t[r],s=e(a);if(null!=s&&(l===i?s===s&&!ls(s):n(s,l)))var l=s,c=a}return c}function gr(t,e){var n=[];return dr(t,(function(t,r,i){e(t,r,i)&&n.push(t)})),n}function yr(t,e,n,r,i){var o=-1,a=t.length;for(n||(n=vo),i||(i=[]);++o<a;){var s=t[o];e>0&&n(s)?e>1?yr(s,e-1,n,r,i):Re(i,s):r||(i[i.length]=s)}return i}var vr=ji(),_r=ji(!0);function br(t,e){return t&&vr(t,e,Is)}function xr(t,e){return t&&_r(t,e,Is)}function wr(t,e){return Oe(e,(function(e){return $a(t[e])}))}function Sr(t,e){for(var n=0,r=(e=_i(e,t)).length;null!=t&&n<r;)t=t[Do(e[n++])];return n&&n==r?t:i}function Er(t,e,n){var r=e(t);return Ga(t)?r:Re(r,n(t))}function Tr(t){return null==t?t===i?"[object Undefined]":"[object Null]":Jt&&Jt in Mt(t)?function(t){var e=zt.call(t,Jt),n=t[Jt];try{t[Jt]=i;var r=!0}catch(a){}var o=Bt.call(t);r&&(e?t[Jt]=n:delete t[Jt]);return o}(t):function(t){return Bt.call(t)}(t)}function Mr(t,e){return t>e}function Ar(t,e){return null!=t&&zt.call(t,e)}function Cr(t,e){return null!=t&&e in Mt(t)}function Pr(t,e,r){for(var o=r?je:Le,a=t[0].length,s=t.length,l=s,c=n(s),u=1/0,h=[];l--;){var d=t[l];l&&e&&(d=ze(d,Qe(e))),u=_n(d.length,u),c[l]=!r&&(e||a>=120&&d.length>=120)?new Xn(l&&d):i}d=t[0];var f=-1,p=c[0];t:for(;++f<a&&h.length<u;){var m=d[f],g=e?e(m):m;if(m=r||0!==m?m:0,!(p?en(p,g):o(h,g,r))){for(l=s;--l;){var y=c[l];if(!(y?en(y,g):o(t[l],g,r)))continue t}p&&p.push(g),h.push(m)}}return h}function kr(t,e,n){var r=null==(t=Co(t,e=_i(e,t)))?t:t[Do(Ko(e))];return null==r?i:Ae(r,t,n)}function Ir(t){return es(t)&&Tr(t)==v}function Or(t,e,n,r,o){return t===e||(null==t||null==e||!es(t)&&!es(e)?t!==t&&e!==e:function(t,e,n,r,o,a){var s=Ga(t),l=Ga(e),c=s?_:mo(t),u=l?_:mo(e),h=(c=c==v?A:c)==A,d=(u=u==v?A:u)==A,f=c==u;if(f&&Xa(t)){if(!Xa(e))return!1;s=!0,h=!1}if(f&&!h)return a||(a=new Yn),s||cs(t)?eo(t,e,n,r,o,a):function(t,e,n,r,i,o,a){switch(n){case z:if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case j:return!(t.byteLength!=e.byteLength||!o(new Gt(t),new Gt(e)));case b:case x:case M:return Na(+t,+e);case w:return t.name==e.name&&t.message==e.message;case P:case I:return t==e+"";case T:var s=cn;case k:var l=1&r;if(s||(s=dn),t.size!=e.size&&!l)return!1;var c=a.get(t);if(c)return c==e;r|=2,a.set(t,e);var u=eo(s(t),s(e),r,i,o,a);return a.delete(t),u;case O:if(Bn)return Bn.call(t)==Bn.call(e)}return!1}(t,e,c,n,r,o,a);if(!(1&n)){var p=h&&zt.call(t,"__wrapped__"),m=d&&zt.call(e,"__wrapped__");if(p||m){var g=p?t.value():t,y=m?e.value():e;return a||(a=new Yn),o(g,y,n,r,a)}}if(!f)return!1;return a||(a=new Yn),function(t,e,n,r,o,a){var s=1&n,l=ro(t),c=l.length,u=ro(e),h=u.length;if(c!=h&&!s)return!1;var d=c;for(;d--;){var f=l[d];if(!(s?f in e:zt.call(e,f)))return!1}var p=a.get(t),m=a.get(e);if(p&&m)return p==e&&m==t;var g=!0;a.set(t,e),a.set(e,t);var y=s;for(;++d<c;){var v=t[f=l[d]],_=e[f];if(r)var b=s?r(_,v,f,e,t,a):r(v,_,f,t,e,a);if(!(b===i?v===_||o(v,_,n,r,a):b)){g=!1;break}y||(y="constructor"==f)}if(g&&!y){var x=t.constructor,w=e.constructor;x==w||!("constructor"in t)||!("constructor"in e)||"function"==typeof x&&x instanceof x&&"function"==typeof w&&w instanceof w||(g=!1)}return a.delete(t),a.delete(e),g}(t,e,n,r,o,a)}(t,e,n,r,Or,o))}function Lr(t,e,n,r){var o=n.length,a=o,s=!r;if(null==t)return!a;for(t=Mt(t);o--;){var l=n[o];if(s&&l[2]?l[1]!==t[l[0]]:!(l[0]in t))return!1}for(;++o<a;){var c=(l=n[o])[0],u=t[c],h=l[1];if(s&&l[2]){if(u===i&&!(c in t))return!1}else{var d=new Yn;if(r)var f=r(u,h,c,t,e,d);if(!(f===i?Or(h,u,3,r,d):f))return!1}}return!0}function jr(t){return!(!ts(t)||(e=t,Dt&&Dt in e))&&($a(t)?Ut:vt).test(Bo(t));var e}function zr(t){return"function"==typeof t?t:null==t?rl:"object"==typeof t?Ga(t)?Ur(t[0],t[1]):Nr(t):dl(t)}function Rr(t){if(!Eo(t))return Ne(t);var e=[];for(var n in Mt(t))zt.call(t,n)&&"constructor"!=n&&e.push(n);return e}function Dr(t){if(!ts(t))return function(t){var e=[];if(null!=t)for(var n in Mt(t))e.push(n);return e}(t);var e=Eo(t),n=[];for(var r in t)("constructor"!=r||!e&&zt.call(t,r))&&n.push(r);return n}function Br(t,e){return t<e}function Fr(t,e){var r=-1,i=Ha(t)?n(t.length):[];return dr(t,(function(t,n,o){i[++r]=e(t,n,o)})),i}function Nr(t){var e=uo(t);return 1==e.length&&e[0][2]?Mo(e[0][0],e[0][1]):function(n){return n===t||Lr(n,t,e)}}function Ur(t,e){return xo(t)&&To(e)?Mo(Do(t),e):function(n){var r=Ms(n,t);return r===i&&r===e?As(n,t):Or(e,r,3)}}function Vr(t,e,n,r,o){t!==e&&vr(e,(function(a,s){if(o||(o=new Yn),ts(a))!function(t,e,n,r,o,a,s){var l=Po(t,n),c=Po(e,n),u=s.get(c);if(u)return void tr(t,n,u);var h=a?a(l,c,n+"",t,e,s):i,d=h===i;if(d){var f=Ga(c),p=!f&&Xa(c),m=!f&&!p&&cs(c);h=c,f||p||m?Ga(l)?h=l:Za(l)?h=Pi(l):p?(d=!1,h=Si(c,!0)):m?(d=!1,h=Ti(c,!0)):h=[]:is(c)||Wa(c)?(h=l,Wa(l)?h=ys(l):ts(l)&&!$a(l)||(h=yo(c))):d=!1}d&&(s.set(c,h),o(h,c,r,a,s),s.delete(c));tr(t,n,h)}(t,e,s,n,Vr,r,o);else{var l=r?r(Po(t,s),a,s+"",t,e,o):i;l===i&&(l=a),tr(t,s,l)}}),Os)}function Wr(t,e){var n=t.length;if(n)return _o(e+=e<0?n:0,n)?t[e]:i}function Gr(t,e,n){e=e.length?ze(e,(function(t){return Ga(t)?function(e){return Sr(e,1===t.length?t[0]:t)}:t})):[rl];var r=-1;e=ze(e,Qe(lo()));var i=Fr(t,(function(t,n,i){var o=ze(e,(function(e){return e(t)}));return{criteria:o,index:++r,value:t}}));return function(t,e){var n=t.length;for(t.sort(e);n--;)t[n]=t[n].value;return t}(i,(function(t,e){return function(t,e,n){var r=-1,i=t.criteria,o=e.criteria,a=i.length,s=n.length;for(;++r<a;){var l=Mi(i[r],o[r]);if(l)return r>=s?l:l*("desc"==n[r]?-1:1)}return t.index-e.index}(t,e,n)}))}function qr(t,e,n){for(var r=-1,i=e.length,o={};++r<i;){var a=e[r],s=Sr(t,a);n(s,a)&&Qr(o,_i(a,t),s)}return o}function Hr(t,e,n,r){var i=r?Ge:We,o=-1,a=e.length,s=t;for(t===e&&(e=Pi(e)),n&&(s=ze(t,Qe(n)));++o<a;)for(var l=0,c=e[o],u=n?n(c):c;(l=i(s,u,l,r))>-1;)s!==t&&Yt.call(s,l,1),Yt.call(t,l,1);return t}function Zr(t,e){for(var n=t?e.length:0,r=n-1;n--;){var i=e[n];if(n==r||i!==o){var o=i;_o(i)?Yt.call(t,i,1):hi(t,i)}}return t}function Xr(t,e){return t+pe(wn()*(e-t+1))}function Yr(t,e){var n="";if(!t||e<1||e>p)return n;do{e%2&&(n+=t),(e=pe(e/2))&&(t+=t)}while(e);return n}function Kr(t,e){return Oo(Ao(t,e,rl),t+"")}function $r(t){return $n(Ns(t))}function Jr(t,e){var n=Ns(t);return zo(n,sr(e,0,n.length))}function Qr(t,e,n,r){if(!ts(t))return t;for(var o=-1,a=(e=_i(e,t)).length,s=a-1,l=t;null!=l&&++o<a;){var c=Do(e[o]),u=n;if("__proto__"===c||"constructor"===c||"prototype"===c)return t;if(o!=s){var h=l[c];(u=r?r(h,c,l):i)===i&&(u=ts(h)?h:_o(e[o+1])?[]:{})}er(l,c,u),l=l[c]}return t}var ti=kn?function(t,e){return kn.set(t,e),t}:rl,ei=Qt?function(t,e){return Qt(t,"toString",{configurable:!0,enumerable:!1,value:tl(e),writable:!0})}:rl;function ni(t){return zo(Ns(t))}function ri(t,e,r){var i=-1,o=t.length;e<0&&(e=-e>o?0:o+e),(r=r>o?o:r)<0&&(r+=o),o=e>r?0:r-e>>>0,e>>>=0;for(var a=n(o);++i<o;)a[i]=t[i+e];return a}function ii(t,e){var n;return dr(t,(function(t,r,i){return!(n=e(t,r,i))})),!!n}function oi(t,e,n){var r=0,i=null==t?r:t.length;if("number"==typeof e&&e===e&&i<=2147483647){for(;r<i;){var o=r+i>>>1,a=t[o];null!==a&&!ls(a)&&(n?a<=e:a<e)?r=o+1:i=o}return i}return ai(t,e,rl,n)}function ai(t,e,n,r){var o=0,a=null==t?0:t.length;if(0===a)return 0;for(var s=(e=n(e))!==e,l=null===e,c=ls(e),u=e===i;o<a;){var h=pe((o+a)/2),d=n(t[h]),f=d!==i,p=null===d,m=d===d,g=ls(d);if(s)var y=r||m;else y=u?m&&(r||f):l?m&&f&&(r||!p):c?m&&f&&!p&&(r||!g):!p&&!g&&(r?d<=e:d<e);y?o=h+1:a=h}return _n(a,4294967294)}function si(t,e){for(var n=-1,r=t.length,i=0,o=[];++n<r;){var a=t[n],s=e?e(a):a;if(!n||!Na(s,l)){var l=s;o[i++]=0===a?0:a}}return o}function li(t){return"number"==typeof t?t:ls(t)?m:+t}function ci(t){if("string"==typeof t)return t;if(Ga(t))return ze(t,ci)+"";if(ls(t))return Fn?Fn.call(t):"";var e=t+"";return"0"==e&&1/t==-1/0?"-0":e}function ui(t,e,n){var r=-1,i=Le,o=t.length,a=!0,s=[],l=s;if(n)a=!1,i=je;else if(o>=200){var c=e?null:Yi(t);if(c)return dn(c);a=!1,i=en,l=new Xn}else l=e?[]:s;t:for(;++r<o;){var u=t[r],h=e?e(u):u;if(u=n||0!==u?u:0,a&&h===h){for(var d=l.length;d--;)if(l[d]===h)continue t;e&&l.push(h),s.push(u)}else i(l,h,n)||(l!==s&&l.push(h),s.push(u))}return s}function hi(t,e){return null==(t=Co(t,e=_i(e,t)))||delete t[Do(Ko(e))]}function di(t,e,n,r){return Qr(t,e,n(Sr(t,e)),r)}function fi(t,e,n,r){for(var i=t.length,o=r?i:-1;(r?o--:++o<i)&&e(t[o],o,t););return n?ri(t,r?0:o,r?o+1:i):ri(t,r?o+1:0,r?i:o)}function pi(t,e){var n=t;return n instanceof Gn&&(n=n.value()),De(e,(function(t,e){return e.func.apply(e.thisArg,Re([t],e.args))}),n)}function mi(t,e,r){var i=t.length;if(i<2)return i?ui(t[0]):[];for(var o=-1,a=n(i);++o<i;)for(var s=t[o],l=-1;++l<i;)l!=o&&(a[o]=hr(a[o]||s,t[l],e,r));return ui(yr(a,1),e,r)}function gi(t,e,n){for(var r=-1,o=t.length,a=e.length,s={};++r<o;){var l=r<a?e[r]:i;n(s,t[r],l)}return s}function yi(t){return Za(t)?t:[]}function vi(t){return"function"==typeof t?t:rl}function _i(t,e){return Ga(t)?t:xo(t,e)?[t]:Ro(vs(t))}var bi=Kr;function xi(t,e,n){var r=t.length;return n=n===i?r:n,!e&&n>=r?t:ri(t,e,n)}var wi=ne||function(t){return me.clearTimeout(t)};function Si(t,e){if(e)return t.slice();var n=t.length,r=qt?qt(n):new t.constructor(n);return t.copy(r),r}function Ei(t){var e=new t.constructor(t.byteLength);return new Gt(e).set(new Gt(t)),e}function Ti(t,e){var n=e?Ei(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.length)}function Mi(t,e){if(t!==e){var n=t!==i,r=null===t,o=t===t,a=ls(t),s=e!==i,l=null===e,c=e===e,u=ls(e);if(!l&&!u&&!a&&t>e||a&&s&&c&&!l&&!u||r&&s&&c||!n&&c||!o)return 1;if(!r&&!a&&!u&&t<e||u&&n&&o&&!r&&!a||l&&n&&o||!s&&o||!c)return-1}return 0}function Ai(t,e,r,i){for(var o=-1,a=t.length,s=r.length,l=-1,c=e.length,u=Xe(a-s,0),h=n(c+u),d=!i;++l<c;)h[l]=e[l];for(;++o<s;)(d||o<a)&&(h[r[o]]=t[o]);for(;u--;)h[l++]=t[o++];return h}function Ci(t,e,r,i){for(var o=-1,a=t.length,s=-1,l=r.length,c=-1,u=e.length,h=Xe(a-l,0),d=n(h+u),f=!i;++o<h;)d[o]=t[o];for(var p=o;++c<u;)d[p+c]=e[c];for(;++s<l;)(f||o<a)&&(d[p+r[s]]=t[o++]);return d}function Pi(t,e){var r=-1,i=t.length;for(e||(e=n(i));++r<i;)e[r]=t[r];return e}function ki(t,e,n,r){var o=!n;n||(n={});for(var a=-1,s=e.length;++a<s;){var l=e[a],c=r?r(n[l],t[l],l,n,t):i;c===i&&(c=t[l]),o?or(n,l,c):er(n,l,c)}return n}function Ii(t,e){return function(n,r){var i=Ga(n)?Ce:rr,o=e?e():{};return i(n,t,lo(r,2),o)}}function Oi(t){return Kr((function(e,n){var r=-1,o=n.length,a=o>1?n[o-1]:i,s=o>2?n[2]:i;for(a=t.length>3&&"function"==typeof a?(o--,a):i,s&&bo(n[0],n[1],s)&&(a=o<3?i:a,o=1),e=Mt(e);++r<o;){var l=n[r];l&&t(e,l,r,a)}return e}))}function Li(t,e){return function(n,r){if(null==n)return n;if(!Ha(n))return t(n,r);for(var i=n.length,o=e?i:-1,a=Mt(n);(e?o--:++o<i)&&!1!==r(a[o],o,a););return n}}function ji(t){return function(e,n,r){for(var i=-1,o=Mt(e),a=r(e),s=a.length;s--;){var l=a[t?s:++i];if(!1===n(o[l],l,o))break}return e}}function zi(t){return function(e){var n=ln(e=vs(e))?mn(e):i,r=n?n[0]:e.charAt(0),o=n?xi(n,1).join(""):e.slice(1);return r[t]()+o}}function Ri(t){return function(e){return De($s(Ws(e).replace(te,"")),t,"")}}function Di(t){return function(){var e=arguments;switch(e.length){case 0:return new t;case 1:return new t(e[0]);case 2:return new t(e[0],e[1]);case 3:return new t(e[0],e[1],e[2]);case 4:return new t(e[0],e[1],e[2],e[3]);case 5:return new t(e[0],e[1],e[2],e[3],e[4]);case 6:return new t(e[0],e[1],e[2],e[3],e[4],e[5]);case 7:return new t(e[0],e[1],e[2],e[3],e[4],e[5],e[6])}var n=Un(t.prototype),r=t.apply(n,e);return ts(r)?r:n}}function Bi(t){return function(e,n,r){var o=Mt(e);if(!Ha(e)){var a=lo(n,3);e=Is(e),n=function(t){return a(o[t],t,o)}}var s=t(e,n,r);return s>-1?o[a?e[s]:s]:i}}function Fi(t){return no((function(e){var n=e.length,r=n,a=Wn.prototype.thru;for(t&&e.reverse();r--;){var s=e[r];if("function"!=typeof s)throw new Pt(o);if(a&&!l&&"wrapper"==ao(s))var l=new Wn([],!0)}for(r=l?r:n;++r<n;){var c=ao(s=e[r]),u="wrapper"==c?oo(s):i;l=u&&wo(u[0])&&424==u[1]&&!u[4].length&&1==u[9]?l[ao(u[0])].apply(l,u[3]):1==s.length&&wo(s)?l[c]():l.thru(s)}return function(){var t=arguments,r=t[0];if(l&&1==t.length&&Ga(r))return l.plant(r).value();for(var i=0,o=n?e[i].apply(this,t):r;++i<n;)o=e[i].call(this,o);return o}}))}function Ni(t,e,r,o,a,s,l,c,u,d){var f=e&h,p=1&e,m=2&e,g=24&e,y=512&e,v=m?i:Di(t);return function h(){for(var _=arguments.length,b=n(_),x=_;x--;)b[x]=arguments[x];if(g)var w=so(h),S=function(t,e){for(var n=t.length,r=0;n--;)t[n]===e&&++r;return r}(b,w);if(o&&(b=Ai(b,o,a,g)),s&&(b=Ci(b,s,l,g)),_-=S,g&&_<d){var E=hn(b,w);return Zi(t,e,Ni,h.placeholder,r,b,E,c,u,d-_)}var T=p?r:this,M=m?T[t]:t;return _=b.length,c?b=function(t,e){var n=t.length,r=_n(e.length,n),o=Pi(t);for(;r--;){var a=e[r];t[r]=_o(a,n)?o[a]:i}return t}(b,c):y&&_>1&&b.reverse(),f&&u<_&&(b.length=u),this&&this!==me&&this instanceof h&&(M=v||Di(M)),M.apply(T,b)}}function Ui(t,e){return function(n,r){return function(t,e,n,r){return br(t,(function(t,i,o){e(r,n(t),i,o)})),r}(n,t,e(r),{})}}function Vi(t,e){return function(n,r){var o;if(n===i&&r===i)return e;if(n!==i&&(o=n),r!==i){if(o===i)return r;"string"==typeof n||"string"==typeof r?(n=ci(n),r=ci(r)):(n=li(n),r=li(r)),o=t(n,r)}return o}}function Wi(t){return no((function(e){return e=ze(e,Qe(lo())),Kr((function(n){var r=this;return t(e,(function(t){return Ae(t,r,n)}))}))}))}function Gi(t,e){var n=(e=e===i?" ":ci(e)).length;if(n<2)return n?Yr(e,t):e;var r=Yr(e,fe(t/pn(e)));return ln(e)?xi(mn(r),0,t).join(""):r.slice(0,t)}function qi(t){return function(e,r,o){return o&&"number"!=typeof o&&bo(e,r,o)&&(r=o=i),e=fs(e),r===i?(r=e,e=0):r=fs(r),function(t,e,r,i){for(var o=-1,a=Xe(fe((e-t)/(r||1)),0),s=n(a);a--;)s[i?a:++o]=t,t+=r;return s}(e,r,o=o===i?e<r?1:-1:fs(o),t)}}function Hi(t){return function(e,n){return"string"==typeof e&&"string"==typeof n||(e=gs(e),n=gs(n)),t(e,n)}}function Zi(t,e,n,r,o,a,s,l,h,d){var f=8&e;e|=f?c:u,4&(e&=~(f?u:c))||(e&=-4);var p=[t,e,o,f?a:i,f?s:i,f?i:a,f?i:s,l,h,d],m=n.apply(i,p);return wo(t)&&ko(m,p),m.placeholder=r,Lo(m,t,e)}function Xi(t){var e=Tt[t];return function(t,n){if(t=gs(t),(n=null==n?0:_n(ps(n),292))&&_e(t)){var r=(vs(t)+"e").split("e");return+((r=(vs(e(r[0]+"e"+(+r[1]+n)))+"e").split("e"))[0]+"e"+(+r[1]-n))}return e(t)}}var Yi=An&&1/dn(new An([,-0]))[1]==f?function(t){return new An(t)}:ll;function Ki(t){return function(e){var n=mo(e);return n==T?cn(e):n==k?fn(e):function(t,e){return ze(e,(function(e){return[e,t[e]]}))}(e,t(e))}}function $i(t,e,r,a,f,p,m,g){var y=2&e;if(!y&&"function"!=typeof t)throw new Pt(o);var v=a?a.length:0;if(v||(e&=-97,a=f=i),m=m===i?m:Xe(ps(m),0),g=g===i?g:ps(g),v-=f?f.length:0,e&u){var _=a,b=f;a=f=i}var x=y?i:oo(t),w=[t,e,r,a,f,_,b,p,m,g];if(x&&function(t,e){var n=t[1],r=e[1],i=n|r,o=i<131,a=r==h&&8==n||r==h&&n==d&&t[7].length<=e[8]||384==r&&e[7].length<=e[8]&&8==n;if(!o&&!a)return t;1&r&&(t[2]=e[2],i|=1&n?0:4);var l=e[3];if(l){var c=t[3];t[3]=c?Ai(c,l,e[4]):l,t[4]=c?hn(t[3],s):e[4]}(l=e[5])&&(c=t[5],t[5]=c?Ci(c,l,e[6]):l,t[6]=c?hn(t[5],s):e[6]);(l=e[7])&&(t[7]=l);r&h&&(t[8]=null==t[8]?e[8]:_n(t[8],e[8]));null==t[9]&&(t[9]=e[9]);t[0]=e[0],t[1]=i}(w,x),t=w[0],e=w[1],r=w[2],a=w[3],f=w[4],!(g=w[9]=w[9]===i?y?0:t.length:Xe(w[9]-v,0))&&24&e&&(e&=-25),e&&1!=e)S=8==e||e==l?function(t,e,r){var o=Di(t);return function a(){for(var s=arguments.length,l=n(s),c=s,u=so(a);c--;)l[c]=arguments[c];var h=s<3&&l[0]!==u&&l[s-1]!==u?[]:hn(l,u);return(s-=h.length)<r?Zi(t,e,Ni,a.placeholder,i,l,h,i,i,r-s):Ae(this&&this!==me&&this instanceof a?o:t,this,l)}}(t,e,g):e!=c&&33!=e||f.length?Ni.apply(i,w):function(t,e,r,i){var o=1&e,a=Di(t);return function e(){for(var s=-1,l=arguments.length,c=-1,u=i.length,h=n(u+l),d=this&&this!==me&&this instanceof e?a:t;++c<u;)h[c]=i[c];for(;l--;)h[c++]=arguments[++s];return Ae(d,o?r:this,h)}}(t,e,r,a);else var S=function(t,e,n){var r=1&e,i=Di(t);return function e(){return(this&&this!==me&&this instanceof e?i:t).apply(r?n:this,arguments)}}(t,e,r);return Lo((x?ti:ko)(S,w),t,e)}function Ji(t,e,n,r){return t===i||Na(t,Ot[n])&&!zt.call(r,n)?e:t}function Qi(t,e,n,r,o,a){return ts(t)&&ts(e)&&(a.set(e,t),Vr(t,e,i,Qi,a),a.delete(e)),t}function to(t){return is(t)?i:t}function eo(t,e,n,r,o,a){var s=1&n,l=t.length,c=e.length;if(l!=c&&!(s&&c>l))return!1;var u=a.get(t),h=a.get(e);if(u&&h)return u==e&&h==t;var d=-1,f=!0,p=2&n?new Xn:i;for(a.set(t,e),a.set(e,t);++d<l;){var m=t[d],g=e[d];if(r)var y=s?r(g,m,d,e,t,a):r(m,g,d,t,e,a);if(y!==i){if(y)continue;f=!1;break}if(p){if(!Fe(e,(function(t,e){if(!en(p,e)&&(m===t||o(m,t,n,r,a)))return p.push(e)}))){f=!1;break}}else if(m!==g&&!o(m,g,n,r,a)){f=!1;break}}return a.delete(t),a.delete(e),f}function no(t){return Oo(Ao(t,i,qo),t+"")}function ro(t){return Er(t,Is,fo)}function io(t){return Er(t,Os,po)}var oo=kn?function(t){return kn.get(t)}:ll;function ao(t){for(var e=t.name+"",n=In[e],r=zt.call(In,e)?n.length:0;r--;){var i=n[r],o=i.func;if(null==o||o==t)return i.name}return e}function so(t){return(zt.call(Nn,"placeholder")?Nn:t).placeholder}function lo(){var t=Nn.iteratee||il;return t=t===il?zr:t,arguments.length?t(arguments[0],arguments[1]):t}function co(t,e){var n=t.__data__;return function(t){var e=typeof t;return"string"==e||"number"==e||"symbol"==e||"boolean"==e?"__proto__"!==t:null===t}(e)?n["string"==typeof e?"string":"hash"]:n.map}function uo(t){for(var e=Is(t),n=e.length;n--;){var r=e[n],i=t[r];e[n]=[r,i,To(i)]}return e}function ho(t,e){var n=function(t,e){return null==t?i:t[e]}(t,e);return jr(n)?n:i}var fo=ge?function(t){return null==t?[]:(t=Mt(t),Oe(ge(t),(function(e){return Xt.call(t,e)})))}:ml,po=ge?function(t){for(var e=[];t;)Re(e,fo(t)),t=Ht(t);return e}:ml,mo=Tr;function go(t,e,n){for(var r=-1,i=(e=_i(e,t)).length,o=!1;++r<i;){var a=Do(e[r]);if(!(o=null!=t&&n(t,a)))break;t=t[a]}return o||++r!=i?o:!!(i=null==t?0:t.length)&&Qa(i)&&_o(a,i)&&(Ga(t)||Wa(t))}function yo(t){return"function"!=typeof t.constructor||Eo(t)?{}:Un(Ht(t))}function vo(t){return Ga(t)||Wa(t)||!!(Kt&&t&&t[Kt])}function _o(t,e){var n=typeof t;return!!(e=null==e?p:e)&&("number"==n||"symbol"!=n&&bt.test(t))&&t>-1&&t%1==0&&t<e}function bo(t,e,n){if(!ts(n))return!1;var r=typeof e;return!!("number"==r?Ha(n)&&_o(e,n.length):"string"==r&&e in n)&&Na(n[e],t)}function xo(t,e){if(Ga(t))return!1;var n=typeof t;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=t&&!ls(t))||(nt.test(t)||!et.test(t)||null!=e&&t in Mt(e))}function wo(t){var e=ao(t),n=Nn[e];if("function"!=typeof n||!(e in Gn.prototype))return!1;if(t===n)return!0;var r=oo(n);return!!r&&t===r[0]}(En&&mo(new En(new ArrayBuffer(1)))!=z||Tn&&mo(new Tn)!=T||Mn&&mo(Mn.resolve())!=C||An&&mo(new An)!=k||Cn&&mo(new Cn)!=L)&&(mo=function(t){var e=Tr(t),n=e==A?t.constructor:i,r=n?Bo(n):"";if(r)switch(r){case On:return z;case Ln:return T;case jn:return C;case zn:return k;case Rn:return L}return e});var So=Lt?$a:gl;function Eo(t){var e=t&&t.constructor;return t===("function"==typeof e&&e.prototype||Ot)}function To(t){return t===t&&!ts(t)}function Mo(t,e){return function(n){return null!=n&&(n[t]===e&&(e!==i||t in Mt(n)))}}function Ao(t,e,r){return e=Xe(e===i?t.length-1:e,0),function(){for(var i=arguments,o=-1,a=Xe(i.length-e,0),s=n(a);++o<a;)s[o]=i[e+o];o=-1;for(var l=n(e+1);++o<e;)l[o]=i[o];return l[e]=r(s),Ae(t,this,l)}}function Co(t,e){return e.length<2?t:Sr(t,ri(e,0,-1))}function Po(t,e){if(("constructor"!==e||"function"!==typeof t[e])&&"__proto__"!=e)return t[e]}var ko=jo(ti),Io=ue||function(t,e){return me.setTimeout(t,e)},Oo=jo(ei);function Lo(t,e,n){var r=e+"";return Oo(t,function(t,e){var n=e.length;if(!n)return t;var r=n-1;return e[r]=(n>1?"& ":"")+e[r],e=e.join(n>2?", ":" "),t.replace(lt,"{\n/* [wrapped with "+e+"] */\n")}(r,function(t,e){return Pe(y,(function(n){var r="_."+n[0];e&n[1]&&!Le(t,r)&&t.push(r)})),t.sort()}(function(t){var e=t.match(ct);return e?e[1].split(ut):[]}(r),n)))}function jo(t){var e=0,n=0;return function(){var r=bn(),o=16-(r-n);if(n=r,o>0){if(++e>=800)return arguments[0]}else e=0;return t.apply(i,arguments)}}function zo(t,e){var n=-1,r=t.length,o=r-1;for(e=e===i?r:e;++n<e;){var a=Xr(n,o),s=t[a];t[a]=t[n],t[n]=s}return t.length=e,t}var Ro=function(t){var e=ja(t,(function(t){return 500===n.size&&n.clear(),t})),n=e.cache;return e}((function(t){var e=[];return 46===t.charCodeAt(0)&&e.push(""),t.replace(rt,(function(t,n,r,i){e.push(r?i.replace(ft,"$1"):n||t)})),e}));function Do(t){if("string"==typeof t||ls(t))return t;var e=t+"";return"0"==e&&1/t==-1/0?"-0":e}function Bo(t){if(null!=t){try{return jt.call(t)}catch(e){}try{return t+""}catch(e){}}return""}function Fo(t){if(t instanceof Gn)return t.clone();var e=new Wn(t.__wrapped__,t.__chain__);return e.__actions__=Pi(t.__actions__),e.__index__=t.__index__,e.__values__=t.__values__,e}var No=Kr((function(t,e){return Za(t)?hr(t,yr(e,1,Za,!0)):[]})),Uo=Kr((function(t,e){var n=Ko(e);return Za(n)&&(n=i),Za(t)?hr(t,yr(e,1,Za,!0),lo(n,2)):[]})),Vo=Kr((function(t,e){var n=Ko(e);return Za(n)&&(n=i),Za(t)?hr(t,yr(e,1,Za,!0),i,n):[]}));function Wo(t,e,n){var r=null==t?0:t.length;if(!r)return-1;var i=null==n?0:ps(n);return i<0&&(i=Xe(r+i,0)),Ve(t,lo(e,3),i)}function Go(t,e,n){var r=null==t?0:t.length;if(!r)return-1;var o=r-1;return n!==i&&(o=ps(n),o=n<0?Xe(r+o,0):_n(o,r-1)),Ve(t,lo(e,3),o,!0)}function qo(t){return(null==t?0:t.length)?yr(t,1):[]}function Ho(t){return t&&t.length?t[0]:i}var Zo=Kr((function(t){var e=ze(t,yi);return e.length&&e[0]===t[0]?Pr(e):[]})),Xo=Kr((function(t){var e=Ko(t),n=ze(t,yi);return e===Ko(n)?e=i:n.pop(),n.length&&n[0]===t[0]?Pr(n,lo(e,2)):[]})),Yo=Kr((function(t){var e=Ko(t),n=ze(t,yi);return(e="function"==typeof e?e:i)&&n.pop(),n.length&&n[0]===t[0]?Pr(n,i,e):[]}));function Ko(t){var e=null==t?0:t.length;return e?t[e-1]:i}var $o=Kr(Jo);function Jo(t,e){return t&&t.length&&e&&e.length?Hr(t,e):t}var Qo=no((function(t,e){var n=null==t?0:t.length,r=ar(t,e);return Zr(t,ze(e,(function(t){return _o(t,n)?+t:t})).sort(Mi)),r}));function ta(t){return null==t?t:Sn.call(t)}var ea=Kr((function(t){return ui(yr(t,1,Za,!0))})),na=Kr((function(t){var e=Ko(t);return Za(e)&&(e=i),ui(yr(t,1,Za,!0),lo(e,2))})),ra=Kr((function(t){var e=Ko(t);return e="function"==typeof e?e:i,ui(yr(t,1,Za,!0),i,e)}));function ia(t){if(!t||!t.length)return[];var e=0;return t=Oe(t,(function(t){if(Za(t))return e=Xe(t.length,e),!0})),$e(e,(function(e){return ze(t,Ze(e))}))}function oa(t,e){if(!t||!t.length)return[];var n=ia(t);return null==e?n:ze(n,(function(t){return Ae(e,i,t)}))}var aa=Kr((function(t,e){return Za(t)?hr(t,e):[]})),sa=Kr((function(t){return mi(Oe(t,Za))})),la=Kr((function(t){var e=Ko(t);return Za(e)&&(e=i),mi(Oe(t,Za),lo(e,2))})),ca=Kr((function(t){var e=Ko(t);return e="function"==typeof e?e:i,mi(Oe(t,Za),i,e)})),ua=Kr(ia);var ha=Kr((function(t){var e=t.length,n=e>1?t[e-1]:i;return n="function"==typeof n?(t.pop(),n):i,oa(t,n)}));function da(t){var e=Nn(t);return e.__chain__=!0,e}function fa(t,e){return e(t)}var pa=no((function(t){var e=t.length,n=e?t[0]:0,r=this.__wrapped__,o=function(e){return ar(e,t)};return!(e>1||this.__actions__.length)&&r instanceof Gn&&_o(n)?((r=r.slice(n,+n+(e?1:0))).__actions__.push({func:fa,args:[o],thisArg:i}),new Wn(r,this.__chain__).thru((function(t){return e&&!t.length&&t.push(i),t}))):this.thru(o)}));var ma=Ii((function(t,e,n){zt.call(t,n)?++t[n]:or(t,n,1)}));var ga=Bi(Wo),ya=Bi(Go);function va(t,e){return(Ga(t)?Pe:dr)(t,lo(e,3))}function _a(t,e){return(Ga(t)?ke:fr)(t,lo(e,3))}var ba=Ii((function(t,e,n){zt.call(t,n)?t[n].push(e):or(t,n,[e])}));var xa=Kr((function(t,e,r){var i=-1,o="function"==typeof e,a=Ha(t)?n(t.length):[];return dr(t,(function(t){a[++i]=o?Ae(e,t,r):kr(t,e,r)})),a})),wa=Ii((function(t,e,n){or(t,n,e)}));function Sa(t,e){return(Ga(t)?ze:Fr)(t,lo(e,3))}var Ea=Ii((function(t,e,n){t[n?0:1].push(e)}),(function(){return[[],[]]}));var Ta=Kr((function(t,e){if(null==t)return[];var n=e.length;return n>1&&bo(t,e[0],e[1])?e=[]:n>2&&bo(e[0],e[1],e[2])&&(e=[e[0]]),Gr(t,yr(e,1),[])})),Ma=ie||function(){return me.Date.now()};function Aa(t,e,n){return e=n?i:e,e=t&&null==e?t.length:e,$i(t,h,i,i,i,i,e)}function Ca(t,e){var n;if("function"!=typeof e)throw new Pt(o);return t=ps(t),function(){return--t>0&&(n=e.apply(this,arguments)),t<=1&&(e=i),n}}var Pa=Kr((function(t,e,n){var r=1;if(n.length){var i=hn(n,so(Pa));r|=c}return $i(t,r,e,n,i)})),ka=Kr((function(t,e,n){var r=3;if(n.length){var i=hn(n,so(ka));r|=c}return $i(e,r,t,n,i)}));function Ia(t,e,n){var r,a,s,l,c,u,h=0,d=!1,f=!1,p=!0;if("function"!=typeof t)throw new Pt(o);function m(e){var n=r,o=a;return r=a=i,h=e,l=t.apply(o,n)}function g(t){var n=t-u;return u===i||n>=e||n<0||f&&t-h>=s}function y(){var t=Ma();if(g(t))return v(t);c=Io(y,function(t){var n=e-(t-u);return f?_n(n,s-(t-h)):n}(t))}function v(t){return c=i,p&&r?m(t):(r=a=i,l)}function _(){var t=Ma(),n=g(t);if(r=arguments,a=this,u=t,n){if(c===i)return function(t){return h=t,c=Io(y,e),d?m(t):l}(u);if(f)return wi(c),c=Io(y,e),m(u)}return c===i&&(c=Io(y,e)),l}return e=gs(e)||0,ts(n)&&(d=!!n.leading,s=(f="maxWait"in n)?Xe(gs(n.maxWait)||0,e):s,p="trailing"in n?!!n.trailing:p),_.cancel=function(){c!==i&&wi(c),h=0,r=u=a=c=i},_.flush=function(){return c===i?l:v(Ma())},_}var Oa=Kr((function(t,e){return ur(t,1,e)})),La=Kr((function(t,e,n){return ur(t,gs(e)||0,n)}));function ja(t,e){if("function"!=typeof t||null!=e&&"function"!=typeof e)throw new Pt(o);var n=function(){var r=arguments,i=e?e.apply(this,r):r[0],o=n.cache;if(o.has(i))return o.get(i);var a=t.apply(this,r);return n.cache=o.set(i,a)||o,a};return n.cache=new(ja.Cache||Zn),n}function za(t){if("function"!=typeof t)throw new Pt(o);return function(){var e=arguments;switch(e.length){case 0:return!t.call(this);case 1:return!t.call(this,e[0]);case 2:return!t.call(this,e[0],e[1]);case 3:return!t.call(this,e[0],e[1],e[2])}return!t.apply(this,e)}}ja.Cache=Zn;var Ra=bi((function(t,e){var n=(e=1==e.length&&Ga(e[0])?ze(e[0],Qe(lo())):ze(yr(e,1),Qe(lo()))).length;return Kr((function(r){for(var i=-1,o=_n(r.length,n);++i<o;)r[i]=e[i].call(this,r[i]);return Ae(t,this,r)}))})),Da=Kr((function(t,e){var n=hn(e,so(Da));return $i(t,c,i,e,n)})),Ba=Kr((function(t,e){var n=hn(e,so(Ba));return $i(t,u,i,e,n)})),Fa=no((function(t,e){return $i(t,d,i,i,i,e)}));function Na(t,e){return t===e||t!==t&&e!==e}var Ua=Hi(Mr),Va=Hi((function(t,e){return t>=e})),Wa=Ir(function(){return arguments}())?Ir:function(t){return es(t)&&zt.call(t,"callee")&&!Xt.call(t,"callee")},Ga=n.isArray,qa=xe?Qe(xe):function(t){return es(t)&&Tr(t)==j};function Ha(t){return null!=t&&Qa(t.length)&&!$a(t)}function Za(t){return es(t)&&Ha(t)}var Xa=ye||gl,Ya=we?Qe(we):function(t){return es(t)&&Tr(t)==x};function Ka(t){if(!es(t))return!1;var e=Tr(t);return e==w||"[object DOMException]"==e||"string"==typeof t.message&&"string"==typeof t.name&&!is(t)}function $a(t){if(!ts(t))return!1;var e=Tr(t);return e==S||e==E||"[object AsyncFunction]"==e||"[object Proxy]"==e}function Ja(t){return"number"==typeof t&&t==ps(t)}function Qa(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=p}function ts(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)}function es(t){return null!=t&&"object"==typeof t}var ns=Se?Qe(Se):function(t){return es(t)&&mo(t)==T};function rs(t){return"number"==typeof t||es(t)&&Tr(t)==M}function is(t){if(!es(t)||Tr(t)!=A)return!1;var e=Ht(t);if(null===e)return!0;var n=zt.call(e,"constructor")&&e.constructor;return"function"==typeof n&&n instanceof n&&jt.call(n)==Ft}var os=Ee?Qe(Ee):function(t){return es(t)&&Tr(t)==P};var as=Te?Qe(Te):function(t){return es(t)&&mo(t)==k};function ss(t){return"string"==typeof t||!Ga(t)&&es(t)&&Tr(t)==I}function ls(t){return"symbol"==typeof t||es(t)&&Tr(t)==O}var cs=Me?Qe(Me):function(t){return es(t)&&Qa(t.length)&&!!le[Tr(t)]};var us=Hi(Br),hs=Hi((function(t,e){return t<=e}));function ds(t){if(!t)return[];if(Ha(t))return ss(t)?mn(t):Pi(t);if($t&&t[$t])return function(t){for(var e,n=[];!(e=t.next()).done;)n.push(e.value);return n}(t[$t]());var e=mo(t);return(e==T?cn:e==k?dn:Ns)(t)}function fs(t){return t?(t=gs(t))===f||t===-1/0?17976931348623157e292*(t<0?-1:1):t===t?t:0:0===t?t:0}function ps(t){var e=fs(t),n=e%1;return e===e?n?e-n:e:0}function ms(t){return t?sr(ps(t),0,g):0}function gs(t){if("number"==typeof t)return t;if(ls(t))return m;if(ts(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=ts(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=Je(t);var n=yt.test(t);return n||_t.test(t)?de(t.slice(2),n?2:8):gt.test(t)?m:+t}function ys(t){return ki(t,Os(t))}function vs(t){return null==t?"":ci(t)}var _s=Oi((function(t,e){if(Eo(e)||Ha(e))ki(e,Is(e),t);else for(var n in e)zt.call(e,n)&&er(t,n,e[n])})),bs=Oi((function(t,e){ki(e,Os(e),t)})),xs=Oi((function(t,e,n,r){ki(e,Os(e),t,r)})),ws=Oi((function(t,e,n,r){ki(e,Is(e),t,r)})),Ss=no(ar);var Es=Kr((function(t,e){t=Mt(t);var n=-1,r=e.length,o=r>2?e[2]:i;for(o&&bo(e[0],e[1],o)&&(r=1);++n<r;)for(var a=e[n],s=Os(a),l=-1,c=s.length;++l<c;){var u=s[l],h=t[u];(h===i||Na(h,Ot[u])&&!zt.call(t,u))&&(t[u]=a[u])}return t})),Ts=Kr((function(t){return t.push(i,Qi),Ae(js,i,t)}));function Ms(t,e,n){var r=null==t?i:Sr(t,e);return r===i?n:r}function As(t,e){return null!=t&&go(t,e,Cr)}var Cs=Ui((function(t,e,n){null!=e&&"function"!=typeof e.toString&&(e=Bt.call(e)),t[e]=n}),tl(rl)),Ps=Ui((function(t,e,n){null!=e&&"function"!=typeof e.toString&&(e=Bt.call(e)),zt.call(t,e)?t[e].push(n):t[e]=[n]}),lo),ks=Kr(kr);function Is(t){return Ha(t)?Kn(t):Rr(t)}function Os(t){return Ha(t)?Kn(t,!0):Dr(t)}var Ls=Oi((function(t,e,n){Vr(t,e,n)})),js=Oi((function(t,e,n,r){Vr(t,e,n,r)})),zs=no((function(t,e){var n={};if(null==t)return n;var r=!1;e=ze(e,(function(e){return e=_i(e,t),r||(r=e.length>1),e})),ki(t,io(t),n),r&&(n=lr(n,7,to));for(var i=e.length;i--;)hi(n,e[i]);return n}));var Rs=no((function(t,e){return null==t?{}:function(t,e){return qr(t,e,(function(e,n){return As(t,n)}))}(t,e)}));function Ds(t,e){if(null==t)return{};var n=ze(io(t),(function(t){return[t]}));return e=lo(e),qr(t,n,(function(t,n){return e(t,n[0])}))}var Bs=Ki(Is),Fs=Ki(Os);function Ns(t){return null==t?[]:tn(t,Is(t))}var Us=Ri((function(t,e,n){return e=e.toLowerCase(),t+(n?Vs(e):e)}));function Vs(t){return Ks(vs(t).toLowerCase())}function Ws(t){return(t=vs(t))&&t.replace(xt,on).replace(ee,"")}var Gs=Ri((function(t,e,n){return t+(n?"-":"")+e.toLowerCase()})),qs=Ri((function(t,e,n){return t+(n?" ":"")+e.toLowerCase()})),Hs=zi("toLowerCase");var Zs=Ri((function(t,e,n){return t+(n?"_":"")+e.toLowerCase()}));var Xs=Ri((function(t,e,n){return t+(n?" ":"")+Ks(e)}));var Ys=Ri((function(t,e,n){return t+(n?" ":"")+e.toUpperCase()})),Ks=zi("toUpperCase");function $s(t,e,n){return t=vs(t),(e=n?i:e)===i?function(t){return oe.test(t)}(t)?function(t){return t.match(re)||[]}(t):function(t){return t.match(ht)||[]}(t):t.match(e)||[]}var Js=Kr((function(t,e){try{return Ae(t,i,e)}catch(n){return Ka(n)?n:new st(n)}})),Qs=no((function(t,e){return Pe(e,(function(e){e=Do(e),or(t,e,Pa(t[e],t))})),t}));function tl(t){return function(){return t}}var el=Fi(),nl=Fi(!0);function rl(t){return t}function il(t){return zr("function"==typeof t?t:lr(t,1))}var ol=Kr((function(t,e){return function(n){return kr(n,t,e)}})),al=Kr((function(t,e){return function(n){return kr(t,n,e)}}));function sl(t,e,n){var r=Is(e),i=wr(e,r);null!=n||ts(e)&&(i.length||!r.length)||(n=e,e=t,t=this,i=wr(e,Is(e)));var o=!(ts(n)&&"chain"in n)||!!n.chain,a=$a(t);return Pe(i,(function(n){var r=e[n];t[n]=r,a&&(t.prototype[n]=function(){var e=this.__chain__;if(o||e){var n=t(this.__wrapped__);return(n.__actions__=Pi(this.__actions__)).push({func:r,args:arguments,thisArg:t}),n.__chain__=e,n}return r.apply(t,Re([this.value()],arguments))})})),t}function ll(){}var cl=Wi(ze),ul=Wi(Ie),hl=Wi(Fe);function dl(t){return xo(t)?Ze(Do(t)):function(t){return function(e){return Sr(e,t)}}(t)}var fl=qi(),pl=qi(!0);function ml(){return[]}function gl(){return!1}var yl=Vi((function(t,e){return t+e}),0),vl=Xi("ceil"),_l=Vi((function(t,e){return t/e}),1),bl=Xi("floor");var xl=Vi((function(t,e){return t*e}),1),wl=Xi("round"),Sl=Vi((function(t,e){return t-e}),0);return Nn.after=function(t,e){if("function"!=typeof e)throw new Pt(o);return t=ps(t),function(){if(--t<1)return e.apply(this,arguments)}},Nn.ary=Aa,Nn.assign=_s,Nn.assignIn=bs,Nn.assignInWith=xs,Nn.assignWith=ws,Nn.at=Ss,Nn.before=Ca,Nn.bind=Pa,Nn.bindAll=Qs,Nn.bindKey=ka,Nn.castArray=function(){if(!arguments.length)return[];var t=arguments[0];return Ga(t)?t:[t]},Nn.chain=da,Nn.chunk=function(t,e,r){e=(r?bo(t,e,r):e===i)?1:Xe(ps(e),0);var o=null==t?0:t.length;if(!o||e<1)return[];for(var a=0,s=0,l=n(fe(o/e));a<o;)l[s++]=ri(t,a,a+=e);return l},Nn.compact=function(t){for(var e=-1,n=null==t?0:t.length,r=0,i=[];++e<n;){var o=t[e];o&&(i[r++]=o)}return i},Nn.concat=function(){var t=arguments.length;if(!t)return[];for(var e=n(t-1),r=arguments[0],i=t;i--;)e[i-1]=arguments[i];return Re(Ga(r)?Pi(r):[r],yr(e,1))},Nn.cond=function(t){var e=null==t?0:t.length,n=lo();return t=e?ze(t,(function(t){if("function"!=typeof t[1])throw new Pt(o);return[n(t[0]),t[1]]})):[],Kr((function(n){for(var r=-1;++r<e;){var i=t[r];if(Ae(i[0],this,n))return Ae(i[1],this,n)}}))},Nn.conforms=function(t){return function(t){var e=Is(t);return function(n){return cr(n,t,e)}}(lr(t,1))},Nn.constant=tl,Nn.countBy=ma,Nn.create=function(t,e){var n=Un(t);return null==e?n:ir(n,e)},Nn.curry=function t(e,n,r){var o=$i(e,8,i,i,i,i,i,n=r?i:n);return o.placeholder=t.placeholder,o},Nn.curryRight=function t(e,n,r){var o=$i(e,l,i,i,i,i,i,n=r?i:n);return o.placeholder=t.placeholder,o},Nn.debounce=Ia,Nn.defaults=Es,Nn.defaultsDeep=Ts,Nn.defer=Oa,Nn.delay=La,Nn.difference=No,Nn.differenceBy=Uo,Nn.differenceWith=Vo,Nn.drop=function(t,e,n){var r=null==t?0:t.length;return r?ri(t,(e=n||e===i?1:ps(e))<0?0:e,r):[]},Nn.dropRight=function(t,e,n){var r=null==t?0:t.length;return r?ri(t,0,(e=r-(e=n||e===i?1:ps(e)))<0?0:e):[]},Nn.dropRightWhile=function(t,e){return t&&t.length?fi(t,lo(e,3),!0,!0):[]},Nn.dropWhile=function(t,e){return t&&t.length?fi(t,lo(e,3),!0):[]},Nn.fill=function(t,e,n,r){var o=null==t?0:t.length;return o?(n&&"number"!=typeof n&&bo(t,e,n)&&(n=0,r=o),function(t,e,n,r){var o=t.length;for((n=ps(n))<0&&(n=-n>o?0:o+n),(r=r===i||r>o?o:ps(r))<0&&(r+=o),r=n>r?0:ms(r);n<r;)t[n++]=e;return t}(t,e,n,r)):[]},Nn.filter=function(t,e){return(Ga(t)?Oe:gr)(t,lo(e,3))},Nn.flatMap=function(t,e){return yr(Sa(t,e),1)},Nn.flatMapDeep=function(t,e){return yr(Sa(t,e),f)},Nn.flatMapDepth=function(t,e,n){return n=n===i?1:ps(n),yr(Sa(t,e),n)},Nn.flatten=qo,Nn.flattenDeep=function(t){return(null==t?0:t.length)?yr(t,f):[]},Nn.flattenDepth=function(t,e){return(null==t?0:t.length)?yr(t,e=e===i?1:ps(e)):[]},Nn.flip=function(t){return $i(t,512)},Nn.flow=el,Nn.flowRight=nl,Nn.fromPairs=function(t){for(var e=-1,n=null==t?0:t.length,r={};++e<n;){var i=t[e];r[i[0]]=i[1]}return r},Nn.functions=function(t){return null==t?[]:wr(t,Is(t))},Nn.functionsIn=function(t){return null==t?[]:wr(t,Os(t))},Nn.groupBy=ba,Nn.initial=function(t){return(null==t?0:t.length)?ri(t,0,-1):[]},Nn.intersection=Zo,Nn.intersectionBy=Xo,Nn.intersectionWith=Yo,Nn.invert=Cs,Nn.invertBy=Ps,Nn.invokeMap=xa,Nn.iteratee=il,Nn.keyBy=wa,Nn.keys=Is,Nn.keysIn=Os,Nn.map=Sa,Nn.mapKeys=function(t,e){var n={};return e=lo(e,3),br(t,(function(t,r,i){or(n,e(t,r,i),t)})),n},Nn.mapValues=function(t,e){var n={};return e=lo(e,3),br(t,(function(t,r,i){or(n,r,e(t,r,i))})),n},Nn.matches=function(t){return Nr(lr(t,1))},Nn.matchesProperty=function(t,e){return Ur(t,lr(e,1))},Nn.memoize=ja,Nn.merge=Ls,Nn.mergeWith=js,Nn.method=ol,Nn.methodOf=al,Nn.mixin=sl,Nn.negate=za,Nn.nthArg=function(t){return t=ps(t),Kr((function(e){return Wr(e,t)}))},Nn.omit=zs,Nn.omitBy=function(t,e){return Ds(t,za(lo(e)))},Nn.once=function(t){return Ca(2,t)},Nn.orderBy=function(t,e,n,r){return null==t?[]:(Ga(e)||(e=null==e?[]:[e]),Ga(n=r?i:n)||(n=null==n?[]:[n]),Gr(t,e,n))},Nn.over=cl,Nn.overArgs=Ra,Nn.overEvery=ul,Nn.overSome=hl,Nn.partial=Da,Nn.partialRight=Ba,Nn.partition=Ea,Nn.pick=Rs,Nn.pickBy=Ds,Nn.property=dl,Nn.propertyOf=function(t){return function(e){return null==t?i:Sr(t,e)}},Nn.pull=$o,Nn.pullAll=Jo,Nn.pullAllBy=function(t,e,n){return t&&t.length&&e&&e.length?Hr(t,e,lo(n,2)):t},Nn.pullAllWith=function(t,e,n){return t&&t.length&&e&&e.length?Hr(t,e,i,n):t},Nn.pullAt=Qo,Nn.range=fl,Nn.rangeRight=pl,Nn.rearg=Fa,Nn.reject=function(t,e){return(Ga(t)?Oe:gr)(t,za(lo(e,3)))},Nn.remove=function(t,e){var n=[];if(!t||!t.length)return n;var r=-1,i=[],o=t.length;for(e=lo(e,3);++r<o;){var a=t[r];e(a,r,t)&&(n.push(a),i.push(r))}return Zr(t,i),n},Nn.rest=function(t,e){if("function"!=typeof t)throw new Pt(o);return Kr(t,e=e===i?e:ps(e))},Nn.reverse=ta,Nn.sampleSize=function(t,e,n){return e=(n?bo(t,e,n):e===i)?1:ps(e),(Ga(t)?Jn:Jr)(t,e)},Nn.set=function(t,e,n){return null==t?t:Qr(t,e,n)},Nn.setWith=function(t,e,n,r){return r="function"==typeof r?r:i,null==t?t:Qr(t,e,n,r)},Nn.shuffle=function(t){return(Ga(t)?Qn:ni)(t)},Nn.slice=function(t,e,n){var r=null==t?0:t.length;return r?(n&&"number"!=typeof n&&bo(t,e,n)?(e=0,n=r):(e=null==e?0:ps(e),n=n===i?r:ps(n)),ri(t,e,n)):[]},Nn.sortBy=Ta,Nn.sortedUniq=function(t){return t&&t.length?si(t):[]},Nn.sortedUniqBy=function(t,e){return t&&t.length?si(t,lo(e,2)):[]},Nn.split=function(t,e,n){return n&&"number"!=typeof n&&bo(t,e,n)&&(e=n=i),(n=n===i?g:n>>>0)?(t=vs(t))&&("string"==typeof e||null!=e&&!os(e))&&!(e=ci(e))&&ln(t)?xi(mn(t),0,n):t.split(e,n):[]},Nn.spread=function(t,e){if("function"!=typeof t)throw new Pt(o);return e=null==e?0:Xe(ps(e),0),Kr((function(n){var r=n[e],i=xi(n,0,e);return r&&Re(i,r),Ae(t,this,i)}))},Nn.tail=function(t){var e=null==t?0:t.length;return e?ri(t,1,e):[]},Nn.take=function(t,e,n){return t&&t.length?ri(t,0,(e=n||e===i?1:ps(e))<0?0:e):[]},Nn.takeRight=function(t,e,n){var r=null==t?0:t.length;return r?ri(t,(e=r-(e=n||e===i?1:ps(e)))<0?0:e,r):[]},Nn.takeRightWhile=function(t,e){return t&&t.length?fi(t,lo(e,3),!1,!0):[]},Nn.takeWhile=function(t,e){return t&&t.length?fi(t,lo(e,3)):[]},Nn.tap=function(t,e){return e(t),t},Nn.throttle=function(t,e,n){var r=!0,i=!0;if("function"!=typeof t)throw new Pt(o);return ts(n)&&(r="leading"in n?!!n.leading:r,i="trailing"in n?!!n.trailing:i),Ia(t,e,{leading:r,maxWait:e,trailing:i})},Nn.thru=fa,Nn.toArray=ds,Nn.toPairs=Bs,Nn.toPairsIn=Fs,Nn.toPath=function(t){return Ga(t)?ze(t,Do):ls(t)?[t]:Pi(Ro(vs(t)))},Nn.toPlainObject=ys,Nn.transform=function(t,e,n){var r=Ga(t),i=r||Xa(t)||cs(t);if(e=lo(e,4),null==n){var o=t&&t.constructor;n=i?r?new o:[]:ts(t)&&$a(o)?Un(Ht(t)):{}}return(i?Pe:br)(t,(function(t,r,i){return e(n,t,r,i)})),n},Nn.unary=function(t){return Aa(t,1)},Nn.union=ea,Nn.unionBy=na,Nn.unionWith=ra,Nn.uniq=function(t){return t&&t.length?ui(t):[]},Nn.uniqBy=function(t,e){return t&&t.length?ui(t,lo(e,2)):[]},Nn.uniqWith=function(t,e){return e="function"==typeof e?e:i,t&&t.length?ui(t,i,e):[]},Nn.unset=function(t,e){return null==t||hi(t,e)},Nn.unzip=ia,Nn.unzipWith=oa,Nn.update=function(t,e,n){return null==t?t:di(t,e,vi(n))},Nn.updateWith=function(t,e,n,r){return r="function"==typeof r?r:i,null==t?t:di(t,e,vi(n),r)},Nn.values=Ns,Nn.valuesIn=function(t){return null==t?[]:tn(t,Os(t))},Nn.without=aa,Nn.words=$s,Nn.wrap=function(t,e){return Da(vi(e),t)},Nn.xor=sa,Nn.xorBy=la,Nn.xorWith=ca,Nn.zip=ua,Nn.zipObject=function(t,e){return gi(t||[],e||[],er)},Nn.zipObjectDeep=function(t,e){return gi(t||[],e||[],Qr)},Nn.zipWith=ha,Nn.entries=Bs,Nn.entriesIn=Fs,Nn.extend=bs,Nn.extendWith=xs,sl(Nn,Nn),Nn.add=yl,Nn.attempt=Js,Nn.camelCase=Us,Nn.capitalize=Vs,Nn.ceil=vl,Nn.clamp=function(t,e,n){return n===i&&(n=e,e=i),n!==i&&(n=(n=gs(n))===n?n:0),e!==i&&(e=(e=gs(e))===e?e:0),sr(gs(t),e,n)},Nn.clone=function(t){return lr(t,4)},Nn.cloneDeep=function(t){return lr(t,5)},Nn.cloneDeepWith=function(t,e){return lr(t,5,e="function"==typeof e?e:i)},Nn.cloneWith=function(t,e){return lr(t,4,e="function"==typeof e?e:i)},Nn.conformsTo=function(t,e){return null==e||cr(t,e,Is(e))},Nn.deburr=Ws,Nn.defaultTo=function(t,e){return null==t||t!==t?e:t},Nn.divide=_l,Nn.endsWith=function(t,e,n){t=vs(t),e=ci(e);var r=t.length,o=n=n===i?r:sr(ps(n),0,r);return(n-=e.length)>=0&&t.slice(n,o)==e},Nn.eq=Na,Nn.escape=function(t){return(t=vs(t))&&$.test(t)?t.replace(Y,an):t},Nn.escapeRegExp=function(t){return(t=vs(t))&&ot.test(t)?t.replace(it,"\\$&"):t},Nn.every=function(t,e,n){var r=Ga(t)?Ie:pr;return n&&bo(t,e,n)&&(e=i),r(t,lo(e,3))},Nn.find=ga,Nn.findIndex=Wo,Nn.findKey=function(t,e){return Ue(t,lo(e,3),br)},Nn.findLast=ya,Nn.findLastIndex=Go,Nn.findLastKey=function(t,e){return Ue(t,lo(e,3),xr)},Nn.floor=bl,Nn.forEach=va,Nn.forEachRight=_a,Nn.forIn=function(t,e){return null==t?t:vr(t,lo(e,3),Os)},Nn.forInRight=function(t,e){return null==t?t:_r(t,lo(e,3),Os)},Nn.forOwn=function(t,e){return t&&br(t,lo(e,3))},Nn.forOwnRight=function(t,e){return t&&xr(t,lo(e,3))},Nn.get=Ms,Nn.gt=Ua,Nn.gte=Va,Nn.has=function(t,e){return null!=t&&go(t,e,Ar)},Nn.hasIn=As,Nn.head=Ho,Nn.identity=rl,Nn.includes=function(t,e,n,r){t=Ha(t)?t:Ns(t),n=n&&!r?ps(n):0;var i=t.length;return n<0&&(n=Xe(i+n,0)),ss(t)?n<=i&&t.indexOf(e,n)>-1:!!i&&We(t,e,n)>-1},Nn.indexOf=function(t,e,n){var r=null==t?0:t.length;if(!r)return-1;var i=null==n?0:ps(n);return i<0&&(i=Xe(r+i,0)),We(t,e,i)},Nn.inRange=function(t,e,n){return e=fs(e),n===i?(n=e,e=0):n=fs(n),function(t,e,n){return t>=_n(e,n)&&t<Xe(e,n)}(t=gs(t),e,n)},Nn.invoke=ks,Nn.isArguments=Wa,Nn.isArray=Ga,Nn.isArrayBuffer=qa,Nn.isArrayLike=Ha,Nn.isArrayLikeObject=Za,Nn.isBoolean=function(t){return!0===t||!1===t||es(t)&&Tr(t)==b},Nn.isBuffer=Xa,Nn.isDate=Ya,Nn.isElement=function(t){return es(t)&&1===t.nodeType&&!is(t)},Nn.isEmpty=function(t){if(null==t)return!0;if(Ha(t)&&(Ga(t)||"string"==typeof t||"function"==typeof t.splice||Xa(t)||cs(t)||Wa(t)))return!t.length;var e=mo(t);if(e==T||e==k)return!t.size;if(Eo(t))return!Rr(t).length;for(var n in t)if(zt.call(t,n))return!1;return!0},Nn.isEqual=function(t,e){return Or(t,e)},Nn.isEqualWith=function(t,e,n){var r=(n="function"==typeof n?n:i)?n(t,e):i;return r===i?Or(t,e,i,n):!!r},Nn.isError=Ka,Nn.isFinite=function(t){return"number"==typeof t&&_e(t)},Nn.isFunction=$a,Nn.isInteger=Ja,Nn.isLength=Qa,Nn.isMap=ns,Nn.isMatch=function(t,e){return t===e||Lr(t,e,uo(e))},Nn.isMatchWith=function(t,e,n){return n="function"==typeof n?n:i,Lr(t,e,uo(e),n)},Nn.isNaN=function(t){return rs(t)&&t!=+t},Nn.isNative=function(t){if(So(t))throw new st("Unsupported core-js use. Try https://npms.io/search?q=ponyfill.");return jr(t)},Nn.isNil=function(t){return null==t},Nn.isNull=function(t){return null===t},Nn.isNumber=rs,Nn.isObject=ts,Nn.isObjectLike=es,Nn.isPlainObject=is,Nn.isRegExp=os,Nn.isSafeInteger=function(t){return Ja(t)&&t>=-9007199254740991&&t<=p},Nn.isSet=as,Nn.isString=ss,Nn.isSymbol=ls,Nn.isTypedArray=cs,Nn.isUndefined=function(t){return t===i},Nn.isWeakMap=function(t){return es(t)&&mo(t)==L},Nn.isWeakSet=function(t){return es(t)&&"[object WeakSet]"==Tr(t)},Nn.join=function(t,e){return null==t?"":be.call(t,e)},Nn.kebabCase=Gs,Nn.last=Ko,Nn.lastIndexOf=function(t,e,n){var r=null==t?0:t.length;if(!r)return-1;var o=r;return n!==i&&(o=(o=ps(n))<0?Xe(r+o,0):_n(o,r-1)),e===e?function(t,e,n){for(var r=n+1;r--;)if(t[r]===e)return r;return r}(t,e,o):Ve(t,qe,o,!0)},Nn.lowerCase=qs,Nn.lowerFirst=Hs,Nn.lt=us,Nn.lte=hs,Nn.max=function(t){return t&&t.length?mr(t,rl,Mr):i},Nn.maxBy=function(t,e){return t&&t.length?mr(t,lo(e,2),Mr):i},Nn.mean=function(t){return He(t,rl)},Nn.meanBy=function(t,e){return He(t,lo(e,2))},Nn.min=function(t){return t&&t.length?mr(t,rl,Br):i},Nn.minBy=function(t,e){return t&&t.length?mr(t,lo(e,2),Br):i},Nn.stubArray=ml,Nn.stubFalse=gl,Nn.stubObject=function(){return{}},Nn.stubString=function(){return""},Nn.stubTrue=function(){return!0},Nn.multiply=xl,Nn.nth=function(t,e){return t&&t.length?Wr(t,ps(e)):i},Nn.noConflict=function(){return me._===this&&(me._=Nt),this},Nn.noop=ll,Nn.now=Ma,Nn.pad=function(t,e,n){t=vs(t);var r=(e=ps(e))?pn(t):0;if(!e||r>=e)return t;var i=(e-r)/2;return Gi(pe(i),n)+t+Gi(fe(i),n)},Nn.padEnd=function(t,e,n){t=vs(t);var r=(e=ps(e))?pn(t):0;return e&&r<e?t+Gi(e-r,n):t},Nn.padStart=function(t,e,n){t=vs(t);var r=(e=ps(e))?pn(t):0;return e&&r<e?Gi(e-r,n)+t:t},Nn.parseInt=function(t,e,n){return n||null==e?e=0:e&&(e=+e),xn(vs(t).replace(at,""),e||0)},Nn.random=function(t,e,n){if(n&&"boolean"!=typeof n&&bo(t,e,n)&&(e=n=i),n===i&&("boolean"==typeof e?(n=e,e=i):"boolean"==typeof t&&(n=t,t=i)),t===i&&e===i?(t=0,e=1):(t=fs(t),e===i?(e=t,t=0):e=fs(e)),t>e){var r=t;t=e,e=r}if(n||t%1||e%1){var o=wn();return _n(t+o*(e-t+he("1e-"+((o+"").length-1))),e)}return Xr(t,e)},Nn.reduce=function(t,e,n){var r=Ga(t)?De:Ye,i=arguments.length<3;return r(t,lo(e,4),n,i,dr)},Nn.reduceRight=function(t,e,n){var r=Ga(t)?Be:Ye,i=arguments.length<3;return r(t,lo(e,4),n,i,fr)},Nn.repeat=function(t,e,n){return e=(n?bo(t,e,n):e===i)?1:ps(e),Yr(vs(t),e)},Nn.replace=function(){var t=arguments,e=vs(t[0]);return t.length<3?e:e.replace(t[1],t[2])},Nn.result=function(t,e,n){var r=-1,o=(e=_i(e,t)).length;for(o||(o=1,t=i);++r<o;){var a=null==t?i:t[Do(e[r])];a===i&&(r=o,a=n),t=$a(a)?a.call(t):a}return t},Nn.round=wl,Nn.runInContext=t,Nn.sample=function(t){return(Ga(t)?$n:$r)(t)},Nn.size=function(t){if(null==t)return 0;if(Ha(t))return ss(t)?pn(t):t.length;var e=mo(t);return e==T||e==k?t.size:Rr(t).length},Nn.snakeCase=Zs,Nn.some=function(t,e,n){var r=Ga(t)?Fe:ii;return n&&bo(t,e,n)&&(e=i),r(t,lo(e,3))},Nn.sortedIndex=function(t,e){return oi(t,e)},Nn.sortedIndexBy=function(t,e,n){return ai(t,e,lo(n,2))},Nn.sortedIndexOf=function(t,e){var n=null==t?0:t.length;if(n){var r=oi(t,e);if(r<n&&Na(t[r],e))return r}return-1},Nn.sortedLastIndex=function(t,e){return oi(t,e,!0)},Nn.sortedLastIndexBy=function(t,e,n){return ai(t,e,lo(n,2),!0)},Nn.sortedLastIndexOf=function(t,e){if(null==t?0:t.length){var n=oi(t,e,!0)-1;if(Na(t[n],e))return n}return-1},Nn.startCase=Xs,Nn.startsWith=function(t,e,n){return t=vs(t),n=null==n?0:sr(ps(n),0,t.length),e=ci(e),t.slice(n,n+e.length)==e},Nn.subtract=Sl,Nn.sum=function(t){return t&&t.length?Ke(t,rl):0},Nn.sumBy=function(t,e){return t&&t.length?Ke(t,lo(e,2)):0},Nn.template=function(t,e,n){var r=Nn.templateSettings;n&&bo(t,e,n)&&(e=i),t=vs(t),e=xs({},e,r,Ji);var o,a,s=xs({},e.imports,r.imports,Ji),l=Is(s),c=tn(s,l),u=0,h=e.interpolate||wt,d="__p += '",f=At((e.escape||wt).source+"|"+h.source+"|"+(h===tt?pt:wt).source+"|"+(e.evaluate||wt).source+"|$","g"),p="//# sourceURL="+(zt.call(e,"sourceURL")?(e.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++se+"]")+"\n";t.replace(f,(function(e,n,r,i,s,l){return r||(r=i),d+=t.slice(u,l).replace(St,sn),n&&(o=!0,d+="' +\n__e("+n+") +\n'"),s&&(a=!0,d+="';\n"+s+";\n__p += '"),r&&(d+="' +\n((__t = ("+r+")) == null ? '' : __t) +\n'"),u=l+e.length,e})),d+="';\n";var m=zt.call(e,"variable")&&e.variable;if(m){if(dt.test(m))throw new st("Invalid `variable` option passed into `_.template`")}else d="with (obj) {\n"+d+"\n}\n";d=(a?d.replace(q,""):d).replace(H,"$1").replace(Z,"$1;"),d="function("+(m||"obj")+") {\n"+(m?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(o?", __e = _.escape":"")+(a?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+d+"return __p\n}";var g=Js((function(){return Et(l,p+"return "+d).apply(i,c)}));if(g.source=d,Ka(g))throw g;return g},Nn.times=function(t,e){if((t=ps(t))<1||t>p)return[];var n=g,r=_n(t,g);e=lo(e),t-=g;for(var i=$e(r,e);++n<t;)e(n);return i},Nn.toFinite=fs,Nn.toInteger=ps,Nn.toLength=ms,Nn.toLower=function(t){return vs(t).toLowerCase()},Nn.toNumber=gs,Nn.toSafeInteger=function(t){return t?sr(ps(t),-9007199254740991,p):0===t?t:0},Nn.toString=vs,Nn.toUpper=function(t){return vs(t).toUpperCase()},Nn.trim=function(t,e,n){if((t=vs(t))&&(n||e===i))return Je(t);if(!t||!(e=ci(e)))return t;var r=mn(t),o=mn(e);return xi(r,nn(r,o),rn(r,o)+1).join("")},Nn.trimEnd=function(t,e,n){if((t=vs(t))&&(n||e===i))return t.slice(0,gn(t)+1);if(!t||!(e=ci(e)))return t;var r=mn(t);return xi(r,0,rn(r,mn(e))+1).join("")},Nn.trimStart=function(t,e,n){if((t=vs(t))&&(n||e===i))return t.replace(at,"");if(!t||!(e=ci(e)))return t;var r=mn(t);return xi(r,nn(r,mn(e))).join("")},Nn.truncate=function(t,e){var n=30,r="...";if(ts(e)){var o="separator"in e?e.separator:o;n="length"in e?ps(e.length):n,r="omission"in e?ci(e.omission):r}var a=(t=vs(t)).length;if(ln(t)){var s=mn(t);a=s.length}if(n>=a)return t;var l=n-pn(r);if(l<1)return r;var c=s?xi(s,0,l).join(""):t.slice(0,l);if(o===i)return c+r;if(s&&(l+=c.length-l),os(o)){if(t.slice(l).search(o)){var u,h=c;for(o.global||(o=At(o.source,vs(mt.exec(o))+"g")),o.lastIndex=0;u=o.exec(h);)var d=u.index;c=c.slice(0,d===i?l:d)}}else if(t.indexOf(ci(o),l)!=l){var f=c.lastIndexOf(o);f>-1&&(c=c.slice(0,f))}return c+r},Nn.unescape=function(t){return(t=vs(t))&&K.test(t)?t.replace(X,yn):t},Nn.uniqueId=function(t){var e=++Rt;return vs(t)+e},Nn.upperCase=Ys,Nn.upperFirst=Ks,Nn.each=va,Nn.eachRight=_a,Nn.first=Ho,sl(Nn,function(){var t={};return br(Nn,(function(e,n){zt.call(Nn.prototype,n)||(t[n]=e)})),t}(),{chain:!1}),Nn.VERSION="4.17.21",Pe(["bind","bindKey","curry","curryRight","partial","partialRight"],(function(t){Nn[t].placeholder=Nn})),Pe(["drop","take"],(function(t,e){Gn.prototype[t]=function(n){n=n===i?1:Xe(ps(n),0);var r=this.__filtered__&&!e?new Gn(this):this.clone();return r.__filtered__?r.__takeCount__=_n(n,r.__takeCount__):r.__views__.push({size:_n(n,g),type:t+(r.__dir__<0?"Right":"")}),r},Gn.prototype[t+"Right"]=function(e){return this.reverse()[t](e).reverse()}})),Pe(["filter","map","takeWhile"],(function(t,e){var n=e+1,r=1==n||3==n;Gn.prototype[t]=function(t){var e=this.clone();return e.__iteratees__.push({iteratee:lo(t,3),type:n}),e.__filtered__=e.__filtered__||r,e}})),Pe(["head","last"],(function(t,e){var n="take"+(e?"Right":"");Gn.prototype[t]=function(){return this[n](1).value()[0]}})),Pe(["initial","tail"],(function(t,e){var n="drop"+(e?"":"Right");Gn.prototype[t]=function(){return this.__filtered__?new Gn(this):this[n](1)}})),Gn.prototype.compact=function(){return this.filter(rl)},Gn.prototype.find=function(t){return this.filter(t).head()},Gn.prototype.findLast=function(t){return this.reverse().find(t)},Gn.prototype.invokeMap=Kr((function(t,e){return"function"==typeof t?new Gn(this):this.map((function(n){return kr(n,t,e)}))})),Gn.prototype.reject=function(t){return this.filter(za(lo(t)))},Gn.prototype.slice=function(t,e){t=ps(t);var n=this;return n.__filtered__&&(t>0||e<0)?new Gn(n):(t<0?n=n.takeRight(-t):t&&(n=n.drop(t)),e!==i&&(n=(e=ps(e))<0?n.dropRight(-e):n.take(e-t)),n)},Gn.prototype.takeRightWhile=function(t){return this.reverse().takeWhile(t).reverse()},Gn.prototype.toArray=function(){return this.take(g)},br(Gn.prototype,(function(t,e){var n=/^(?:filter|find|map|reject)|While$/.test(e),r=/^(?:head|last)$/.test(e),o=Nn[r?"take"+("last"==e?"Right":""):e],a=r||/^find/.test(e);o&&(Nn.prototype[e]=function(){var e=this.__wrapped__,s=r?[1]:arguments,l=e instanceof Gn,c=s[0],u=l||Ga(e),h=function(t){var e=o.apply(Nn,Re([t],s));return r&&d?e[0]:e};u&&n&&"function"==typeof c&&1!=c.length&&(l=u=!1);var d=this.__chain__,f=!!this.__actions__.length,p=a&&!d,m=l&&!f;if(!a&&u){e=m?e:new Gn(this);var g=t.apply(e,s);return g.__actions__.push({func:fa,args:[h],thisArg:i}),new Wn(g,d)}return p&&m?t.apply(this,s):(g=this.thru(h),p?r?g.value()[0]:g.value():g)})})),Pe(["pop","push","shift","sort","splice","unshift"],(function(t){var e=kt[t],n=/^(?:push|sort|unshift)$/.test(t)?"tap":"thru",r=/^(?:pop|shift)$/.test(t);Nn.prototype[t]=function(){var t=arguments;if(r&&!this.__chain__){var i=this.value();return e.apply(Ga(i)?i:[],t)}return this[n]((function(n){return e.apply(Ga(n)?n:[],t)}))}})),br(Gn.prototype,(function(t,e){var n=Nn[e];if(n){var r=n.name+"";zt.call(In,r)||(In[r]=[]),In[r].push({name:e,func:n})}})),In[Ni(i,2).name]=[{name:"wrapper",func:i}],Gn.prototype.clone=function(){var t=new Gn(this.__wrapped__);return t.__actions__=Pi(this.__actions__),t.__dir__=this.__dir__,t.__filtered__=this.__filtered__,t.__iteratees__=Pi(this.__iteratees__),t.__takeCount__=this.__takeCount__,t.__views__=Pi(this.__views__),t},Gn.prototype.reverse=function(){if(this.__filtered__){var t=new Gn(this);t.__dir__=-1,t.__filtered__=!0}else(t=this.clone()).__dir__*=-1;return t},Gn.prototype.value=function(){var t=this.__wrapped__.value(),e=this.__dir__,n=Ga(t),r=e<0,i=n?t.length:0,o=function(t,e,n){var r=-1,i=n.length;for(;++r<i;){var o=n[r],a=o.size;switch(o.type){case"drop":t+=a;break;case"dropRight":e-=a;break;case"take":e=_n(e,t+a);break;case"takeRight":t=Xe(t,e-a)}}return{start:t,end:e}}(0,i,this.__views__),a=o.start,s=o.end,l=s-a,c=r?s:a-1,u=this.__iteratees__,h=u.length,d=0,f=_n(l,this.__takeCount__);if(!n||!r&&i==l&&f==l)return pi(t,this.__actions__);var p=[];t:for(;l--&&d<f;){for(var m=-1,g=t[c+=e];++m<h;){var y=u[m],v=y.iteratee,_=y.type,b=v(g);if(2==_)g=b;else if(!b){if(1==_)continue t;break t}}p[d++]=g}return p},Nn.prototype.at=pa,Nn.prototype.chain=function(){return da(this)},Nn.prototype.commit=function(){return new Wn(this.value(),this.__chain__)},Nn.prototype.next=function(){this.__values__===i&&(this.__values__=ds(this.value()));var t=this.__index__>=this.__values__.length;return{done:t,value:t?i:this.__values__[this.__index__++]}},Nn.prototype.plant=function(t){for(var e,n=this;n instanceof Vn;){var r=Fo(n);r.__index__=0,r.__values__=i,e?o.__wrapped__=r:e=r;var o=r;n=n.__wrapped__}return o.__wrapped__=t,e},Nn.prototype.reverse=function(){var t=this.__wrapped__;if(t instanceof Gn){var e=t;return this.__actions__.length&&(e=new Gn(this)),(e=e.reverse()).__actions__.push({func:fa,args:[ta],thisArg:i}),new Wn(e,this.__chain__)}return this.thru(ta)},Nn.prototype.toJSON=Nn.prototype.valueOf=Nn.prototype.value=function(){return pi(this.__wrapped__,this.__actions__)},Nn.prototype.first=Nn.prototype.head,$t&&(Nn.prototype[$t]=function(){return this}),Nn}();me._=vn,(r=function(){return vn}.call(e,n,e,t))===i||(t.exports=r)}.call(this)},3411:(t,e,n)=>{var r=n(149),i=n(9096),o=n(8883),a=n(4052);t.exports=function(t,e){return(a(t)?r:o)(t,i(e,3))}},1733:(t,e,n)=>{var r=n(1775),i=n(4664),o=n(9096);t.exports=function(t,e){var n={};return e=o(e,3),i(t,(function(t,i,o){r(n,i,e(t,i,o))})),n}},539:(t,e,n)=>{var r=n(9742),i=n(7498),o=n(3279);t.exports=function(t){return t&&t.length?r(t,o,i):void 0}},5797:(t,e,n)=>{var r=n(4816);function i(t,e){if("function"!=typeof t||null!=e&&"function"!=typeof e)throw new TypeError("Expected a function");var n=function(){var r=arguments,i=e?e.apply(this,r):r[0],o=n.cache;if(o.has(i))return o.get(i);var a=t.apply(this,r);return n.cache=o.set(i,a)||o,a};return n.cache=new(i.Cache||r),n}i.Cache=r,t.exports=i},6745:(t,e,n)=>{var r=n(9742),i=n(61),o=n(3279);t.exports=function(t){return t&&t.length?r(t,o,i):void 0}},5713:t=>{t.exports=function(){}},4757:(t,e,n)=>{var r=n(6552);t.exports=function(){return r.Date.now()}},3932:(t,e,n)=>{var r=n(396),i=n(2866),o=n(2597),a=n(914);t.exports=function(t){return o(t)?r(a(t)):i(t)}},6604:(t,e,n)=>{var r=n(3331)();t.exports=r},4597:(t,e,n)=>{var r=n(2587),i=n(9096),o=n(2165),a=n(4052),s=n(929);t.exports=function(t,e,n){var l=a(t)?r:o;return n&&s(t,e,n)&&(e=void 0),l(t,i(e,3))}},7424:(t,e,n)=>{var r=n(755),i=n(2536),o=n(5647),a=n(929),s=o((function(t,e){if(null==t)return[];var n=e.length;return n>1&&a(t,e[0],e[1])?e=[]:n>2&&a(e[0],e[1],e[2])&&(e=[e[0]]),i(t,r(e,1),[])}));t.exports=s},7828:t=>{t.exports=function(){return[]}},14:t=>{t.exports=function(){return!1}},9889:(t,e,n)=>{var r=n(3950),i=n(6686);t.exports=function(t,e,n){var o=!0,a=!0;if("function"!=typeof t)throw new TypeError("Expected a function");return i(n)&&(o="leading"in n?!!n.leading:o,a="trailing"in n?!!n.trailing:a),r(t,e,{leading:o,maxWait:e,trailing:a})}},7303:(t,e,n)=>{var r=n(801),i=1/0;t.exports=function(t){return t?(t=r(t))===i||t===-1/0?17976931348623157e292*(t<0?-1:1):t===t?t:0:0===t?t:0}},9140:(t,e,n)=>{var r=n(7303);t.exports=function(t){var e=r(t),n=e%1;return e===e?n?e-n:e:0}},801:(t,e,n)=>{var r=n(1141),i=n(6686),o=n(9841),a=/^[-+]0x[0-9a-f]+$/i,s=/^0b[01]+$/i,l=/^0o[0-7]+$/i,c=parseInt;t.exports=function(t){if("number"==typeof t)return t;if(o(t))return NaN;if(i(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=i(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=r(t);var n=s.test(t);return n||l.test(t)?c(t.slice(2),n?2:8):a.test(t)?NaN:+t}},1069:(t,e,n)=>{var r=n(8541);t.exports=function(t){return null==t?"":r(t)}},977:(t,e,n)=>{var r=n(9096),i=n(4416);t.exports=function(t,e){return t&&t.length?i(t,r(e,2)):[]}},643:(t,e,n)=>{var r=n(7676)("toUpperCase");t.exports=r},879:function(t){t.exports=function(){"use strict";var t,e,n;function r(r,i){if(t)if(e){var o="self.onerror = function() { console.error('An error occurred while parsing the WebWorker bundle. This is most likely due to improper transpilation by Babel; please see https://docs.mapbox.com/mapbox-gl-js/guides/install/#transpiling'); }; var sharedChunk = {}; ("+t+")(sharedChunk); ("+e+")(sharedChunk); self.onerror = null;",a={};t(a),n=i(a),"undefined"!==typeof window&&window&&window.URL&&window.URL.createObjectURL&&(n.workerUrl=window.URL.createObjectURL(new Blob([o],{type:"text/javascript"})))}else e=i;else t=i}return r(["exports"],(function(t){var e="undefined"!=typeof self?self:{},n="2.15.0";let r;const i={API_URL:"https://api.mapbox.com",get API_URL_REGEX(){if(null==r){const t=/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/|\?|$)/i;try{r=null!={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.API_URL_REGEX?new RegExp({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.API_URL_REGEX):t}catch(e){r=t}}return r},get API_TILEJSON_REGEX(){return/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/v[0-9]*\/.*\.json.*$)/i},get API_SPRITE_REGEX(){return/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/styles\/v[0-9]*\/)(.*\/sprite.*\..*$)/i},get API_FONTS_REGEX(){return/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/fonts\/v[0-9]*\/)(.*\.pbf.*$)/i},get API_STYLE_REGEX(){return/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/styles\/v[0-9]*\/)(.*$)/i},get API_CDN_URL_REGEX(){return/^((https?:)?\/\/)?api\.mapbox\.c(n|om)(\/mapbox-gl-js\/)(.*$)/i},get EVENTS_URL(){if(!i.API_URL)return null;try{const t=new URL(i.API_URL);return"api.mapbox.cn"===t.hostname?"https://events.mapbox.cn/events/v2":"api.mapbox.com"===t.hostname?"https://events.mapbox.com/events/v2":null}catch(t){return null}},SESSION_PATH:"/map-sessions/v1",FEEDBACK_URL:"https://apps.mapbox.com/feedback",TILE_URL_VERSION:"v4",RASTER_URL_PREFIX:"raster/v1",REQUIRE_ACCESS_TOKEN:!0,ACCESS_TOKEN:null,MAX_PARALLEL_IMAGE_REQUESTS:16},o={supported:!1,testSupport:function(t){!l&&s&&(c?u(t):a=t)}};let a,s,l=!1,c=!1;function u(t){const e=t.createTexture();t.bindTexture(t.TEXTURE_2D,e);try{if(t.texImage2D(t.TEXTURE_2D,0,t.RGBA,t.RGBA,t.UNSIGNED_BYTE,s),t.isContextLost())return;o.supported=!0}catch(t){}t.deleteTexture(e),l=!0}e.document&&(s=e.document.createElement("img"),s.onload=function(){a&&u(a),a=null,c=!0},s.onerror=function(){l=!0,a=null},s.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA=");const h="01";function d(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var f=p;function p(t,e,n,r){this.cx=3*t,this.bx=3*(n-t)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*e,this.by=3*(r-e)-this.cy,this.ay=1-this.cy-this.by,this.p1x=t,this.p1y=e,this.p2x=n,this.p2y=r}p.prototype={sampleCurveX:function(t){return((this.ax*t+this.bx)*t+this.cx)*t},sampleCurveY:function(t){return((this.ay*t+this.by)*t+this.cy)*t},sampleCurveDerivativeX:function(t){return(3*this.ax*t+2*this.bx)*t+this.cx},solveCurveX:function(t,e){if(void 0===e&&(e=1e-6),t<0)return 0;if(t>1)return 1;for(var n=t,r=0;r<8;r++){var i=this.sampleCurveX(n)-t;if(Math.abs(i)<e)return n;var o=this.sampleCurveDerivativeX(n);if(Math.abs(o)<1e-6)break;n-=i/o}var a=0,s=1;for(n=t,r=0;r<20&&(i=this.sampleCurveX(n),!(Math.abs(i-t)<e));r++)t>i?a=n:s=n,n=.5*(s-a)+a;return n},solve:function(t,e){return this.sampleCurveY(this.solveCurveX(t,e))}};var m=d(f),g=y;function y(t,e){this.x=t,this.y=e}y.prototype={clone:function(){return new y(this.x,this.y)},add:function(t){return this.clone()._add(t)},sub:function(t){return this.clone()._sub(t)},multByPoint:function(t){return this.clone()._multByPoint(t)},divByPoint:function(t){return this.clone()._divByPoint(t)},mult:function(t){return this.clone()._mult(t)},div:function(t){return this.clone()._div(t)},rotate:function(t){return this.clone()._rotate(t)},rotateAround:function(t,e){return this.clone()._rotateAround(t,e)},matMult:function(t){return this.clone()._matMult(t)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(t){return this.x===t.x&&this.y===t.y},dist:function(t){return Math.sqrt(this.distSqr(t))},distSqr:function(t){var e=t.x-this.x,n=t.y-this.y;return e*e+n*n},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(t){return Math.atan2(this.y-t.y,this.x-t.x)},angleWith:function(t){return this.angleWithSep(t.x,t.y)},angleWithSep:function(t,e){return Math.atan2(this.x*e-this.y*t,this.x*t+this.y*e)},_matMult:function(t){var e=t[2]*this.x+t[3]*this.y;return this.x=t[0]*this.x+t[1]*this.y,this.y=e,this},_add:function(t){return this.x+=t.x,this.y+=t.y,this},_sub:function(t){return this.x-=t.x,this.y-=t.y,this},_mult:function(t){return this.x*=t,this.y*=t,this},_div:function(t){return this.x/=t,this.y/=t,this},_multByPoint:function(t){return this.x*=t.x,this.y*=t.y,this},_divByPoint:function(t){return this.x/=t.x,this.y/=t.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var t=this.y;return this.y=this.x,this.x=-t,this},_rotate:function(t){var e=Math.cos(t),n=Math.sin(t),r=n*this.x+e*this.y;return this.x=e*this.x-n*this.y,this.y=r,this},_rotateAround:function(t,e){var n=Math.cos(t),r=Math.sin(t),i=e.y+r*(this.x-e.x)+n*(this.y-e.y);return this.x=e.x+n*(this.x-e.x)-r*(this.y-e.y),this.y=i,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},y.convert=function(t){return t instanceof y?t:Array.isArray(t)?new y(t[0],t[1]):t};var v=d(g);const _=Math.PI/180,b=180/Math.PI;function x(t){return t*_}function w(t){return t*b}const S=[[0,0],[1,0],[1,1],[0,1]];function E(t){if(t<=0)return 0;if(t>=1)return 1;const e=t*t,n=e*t;return 4*(t<.5?n:3*(t-e)+n-.75)}function T(t,e,n,r){const i=new m(t,e,n,r);return function(t){return i.solve(t)}}const M=T(.25,.1,.25,1);function A(t,e,n){return Math.min(n,Math.max(e,t))}function C(t,e,n){return(n=A((n-t)/(e-t),0,1))*n*(3-2*n)}function P(t,e,n){const r=n-e,i=((t-e)%r+r)%r+e;return i===e?n:i}function k(t,e,n){if(!t.length)return n(null,[]);let r=t.length;const i=new Array(t.length);let o=null;t.forEach(((t,a)=>{e(t,((t,e)=>{t&&(o=t),i[a]=e,0==--r&&n(o,i)}))}))}function I(t){const e=[];for(const n in t)e.push(t[n]);return e}function O(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];for(const i of n)for(const e in i)t[e]=i[e];return t}let L=1;function j(){return L++}function z(){return function t(e){return e?(e^Math.random()*(16>>e/4)).toString(16):([1e7]+-[1e3]+-4e3+-8e3+-1e11).replace(/[018]/g,t)}()}function R(t){return t<=1?1:Math.pow(2,Math.ceil(Math.log(t)/Math.LN2))}function D(t){return!!t&&/^[0-9a-f]{8}-[0-9a-f]{4}-[4][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i.test(t)}function B(t,e){t.forEach((t=>{e[t]&&(e[t]=e[t].bind(e))}))}function F(t,e){return-1!==t.indexOf(e,t.length-e.length)}function N(t,e,n){const r={};for(const i in t)r[i]=e.call(n||this,t[i],i,t);return r}function U(t,e,n){const r={};for(const i in t)e.call(n||this,t[i],i,t)&&(r[i]=t[i]);return r}function V(t){return Array.isArray(t)?t.map(V):"object"==typeof t&&t?N(t,V):t}const W={};function G(t){W[t]||("undefined"!=typeof console&&console.warn(t),W[t]=!0)}function q(t,e,n){return(n.y-t.y)*(e.x-t.x)>(e.y-t.y)*(n.x-t.x)}function H(t){let e=0;for(let n,r,i=0,o=t.length,a=o-1;i<o;a=i++)n=t[i],r=t[a],e+=(r.x-n.x)*(n.y+r.y);return e}function Z(){return"undefined"!=typeof WorkerGlobalScope&&"undefined"!=typeof self&&self instanceof WorkerGlobalScope}function X(t){const e={};if(t.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,((t,n,r,i)=>{const o=r||i;return e[n]=!o||o.toLowerCase(),""})),e["max-age"]){const t=parseInt(e["max-age"],10);isNaN(t)?delete e["max-age"]:e["max-age"]=t}return e}let Y=null;function K(t){if(null==Y){const e=t.navigator?t.navigator.userAgent:null;Y=!!t.safari||!(!e||!(/\b(iPad|iPhone|iPod)\b/.test(e)||e.match("Safari")&&!e.match("Chrome")))}return Y}function $(t){try{const n=e[t];return n.setItem("_mapbox_test_",1),n.removeItem("_mapbox_test_"),!0}catch(t){return!1}}function J(t,e){return[t[4*e],t[4*e+1],t[4*e+2],t[4*e+3]]}const Q="mapbox-tiles";let tt,et,nt=500,rt=50;function it(){try{return e.caches}catch(t){}}function ot(){it()&&!tt&&(tt=e.caches.open(Q))}function at(t){const e=t.indexOf("?");if(e<0)return t;const n=function(t){const e=t.indexOf("?");return e>0?t.slice(e+1).split("&"):[]}(t),r=n.filter((t=>{const e=t.split("=");return"language"===e[0]||"worldview"===e[0]}));return r.length?"".concat(t.slice(0,e),"?").concat(r.join("&")):t.slice(0,e)}let st=1/0;const lt={Unknown:"Unknown",Style:"Style",Source:"Source",Tile:"Tile",Glyphs:"Glyphs",SpriteImage:"SpriteImage",SpriteJSON:"SpriteJSON",Image:"Image"};"function"==typeof Object.freeze&&Object.freeze(lt);class ct extends Error{constructor(t,e,n){401===e&&bt(n)&&(t+=": you may have provided an invalid Mapbox access token. See https://docs.mapbox.com/api/overview/#access-tokens-and-token-scopes"),super(t),this.status=e,this.url=n}toString(){return"".concat(this.name,": ").concat(this.message," (").concat(this.status,"): ").concat(this.url)}}const ut=Z()?()=>self.worker&&self.worker.referrer:()=>("blob:"===e.location.protocol?e.parent:e).location.href,ht=function(t,n){if(!(/^file:/.test(r=t.url)||/^file:/.test(ut())&&!/^\w+:/.test(r))){if(e.fetch&&e.Request&&e.AbortController&&e.Request.prototype.hasOwnProperty("signal"))return function(t,n){const r=new e.AbortController,i=new e.Request(t.url,{method:t.method||"GET",body:t.body,credentials:t.credentials,headers:t.headers,referrer:ut(),referrerPolicy:t.referrerPolicy,signal:r.signal});let o=!1,a=!1;const s=(l=i.url).indexOf("sku=")>0&&bt(l);var l;"json"===t.type&&i.headers.set("Accept","application/json");const c=(r,o,l)=>{if(a)return;if(r&&"SecurityError"!==r.message&&G(r.toString()),o&&l)return u(o);const c=Date.now();e.fetch(i).then((e=>{if(e.ok){const t=s?e.clone():null;return u(e,t,c)}return n(new ct(e.statusText,e.status,t.url))})).catch((e=>{"AbortError"!==e.name&&n(new Error("".concat(e.message," ").concat(t.url)))}))},u=(r,s,l)=>{("arrayBuffer"===t.type?r.arrayBuffer():"json"===t.type?r.json():r.text()).then((t=>{a||(s&&l&&function(t,n,r){if(ot(),!tt)return;const i={status:n.status,statusText:n.statusText,headers:new e.Headers};n.headers.forEach(((t,e)=>i.headers.set(e,t)));const o=X(n.headers.get("Cache-Control")||"");if(o["no-store"])return;o["max-age"]&&i.headers.set("Expires",new Date(r+1e3*o["max-age"]).toUTCString());const a=i.headers.get("Expires");a&&(new Date(a).getTime()-r<42e4||function(t,e){if(void 0===et)try{new Response(new ReadableStream),et=!0}catch(t){et=!1}et?e(t.body):t.blob().then(e)}(n,(n=>{const r=new e.Response(n,i);ot(),tt&&tt.then((e=>e.put(at(t.url),r))).catch((t=>G(t.message)))})))}(i,s,l),o=!0,n(null,t,r.headers.get("Cache-Control"),r.headers.get("Expires")))})).catch((t=>{a||n(new Error(t.message))}))};return s?function(t,e){if(ot(),!tt)return e(null);const n=at(t.url);tt.then((t=>{t.match(n).then((r=>{const i=function(t){if(!t)return!1;const e=new Date(t.headers.get("Expires")||0),n=X(t.headers.get("Cache-Control")||"");return e>Date.now()&&!n["no-cache"]}(r);t.delete(n),i&&t.put(n,r.clone()),e(null,r,i)})).catch(e)})).catch(e)}(i,c):c(null,null),{cancel:()=>{a=!0,o||r.abort()}}}(t,n);if(Z()&&self.worker&&self.worker.actor)return self.worker.actor.send("getResource",t,n,void 0,!0)}var r;return function(t,n){const r=new e.XMLHttpRequest;r.open(t.method||"GET",t.url,!0),"arrayBuffer"===t.type&&(r.responseType="arraybuffer");for(const e in t.headers)r.setRequestHeader(e,t.headers[e]);return"json"===t.type&&(r.responseType="text",r.setRequestHeader("Accept","application/json")),r.withCredentials="include"===t.credentials,r.onerror=()=>{n(new Error(r.statusText))},r.onload=()=>{if((r.status>=200&&r.status<300||0===r.status)&&null!==r.response){let e=r.response;if("json"===t.type)try{e=JSON.parse(r.response)}catch(t){return n(t)}n(null,e,r.getResponseHeader("Cache-Control"),r.getResponseHeader("Expires"))}else n(new ct(r.statusText,r.status,t.url))},r.send(t.body),{cancel:()=>r.abort()}}(t,n)},dt=function(t,e){return ht(O(t,{type:"arrayBuffer"}),e)};function ft(t){const n=e.document.createElement("a");return n.href=t,n.protocol===e.document.location.protocol&&n.host===e.document.location.host}const pt="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=";let mt,gt;mt=[],gt=0;const yt=function(t,n){if(o.supported&&(t.headers||(t.headers={}),t.headers.accept="image/webp,*/*"),gt>=i.MAX_PARALLEL_IMAGE_REQUESTS){const e={requestParameters:t,callback:n,cancelled:!1,cancel(){this.cancelled=!0}};return mt.push(e),e}gt++;let r=!1;const a=()=>{if(!r)for(r=!0,gt--;mt.length&&gt<i.MAX_PARALLEL_IMAGE_REQUESTS;){const t=mt.shift(),{requestParameters:e,callback:n,cancelled:r}=t;r||(t.cancel=yt(e,n).cancel)}},s=dt(t,((t,r,i,o)=>{a(),t?n(t):r&&(e.createImageBitmap?function(t,n){const r=new e.Blob([new Uint8Array(t)],{type:"image/png"});e.createImageBitmap(r).then((t=>{n(null,t)})).catch((t=>{n(new Error("Could not load image because of ".concat(t.message,". Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported.")))}))}(r,((t,e)=>n(t,e,i,o))):function(t,n){const r=new e.Image,i=e.URL;r.onload=()=>{n(null,r),i.revokeObjectURL(r.src),r.onload=null,e.requestAnimationFrame((()=>{r.src=pt}))},r.onerror=()=>n(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."));const o=new e.Blob([new Uint8Array(t)],{type:"image/png"});r.src=t.byteLength?i.createObjectURL(o):pt}(r,((t,e)=>n(t,e,i,o))))}));return{cancel:()=>{s.cancel(),a()}}},vt="NO_ACCESS_TOKEN";function _t(t){return 0===t.indexOf("mapbox:")}function bt(t){return i.API_URL_REGEX.test(t)}function xt(t){return i.API_CDN_URL_REGEX.test(t)}function wt(t){return i.API_STYLE_REGEX.test(t)&&!St(t)}function St(t){return i.API_SPRITE_REGEX.test(t)}const Et=/^(\w+):\/\/([^/?]*)(\/[^?]+)?\??(.+)?/;function Tt(t){const e=t.match(Et);if(!e)throw new Error("Unable to parse URL object");return{protocol:e[1],authority:e[2],path:e[3]||"/",params:e[4]?e[4].split("&"):[]}}function Mt(t){const e=t.params.length?"?".concat(t.params.join("&")):"";return"".concat(t.protocol,"://").concat(t.authority).concat(t.path).concat(e)}const At="mapbox.eventData";function Ct(t){if(!t)return null;const n=t.split(".");if(!n||3!==n.length)return null;try{return JSON.parse(decodeURIComponent(e.atob(n[1]).split("").map((t=>"%"+("00"+t.charCodeAt(0).toString(16)).slice(-2))).join("")))}catch(t){return null}}class Pt{constructor(t){this.type=t,this.anonId=null,this.eventData={},this.queue=[],this.pendingRequest=null}getStorageKey(t){const n=Ct(i.ACCESS_TOKEN);let r="";return r=n&&n.u?e.btoa(encodeURIComponent(n.u).replace(/%([0-9A-F]{2})/g,((t,e)=>String.fromCharCode(Number("0x"+e))))):i.ACCESS_TOKEN||"",t?"".concat(At,".").concat(t,":").concat(r):"".concat(At,":").concat(r)}fetchEventData(){const t=$("localStorage"),n=this.getStorageKey(),r=this.getStorageKey("uuid");if(t)try{const t=e.localStorage.getItem(n);t&&(this.eventData=JSON.parse(t));const i=e.localStorage.getItem(r);i&&(this.anonId=i)}catch(t){G("Unable to read from LocalStorage")}}saveEventData(){const t=$("localStorage"),n=this.getStorageKey(),r=this.getStorageKey("uuid");if(t)try{e.localStorage.setItem(r,this.anonId),Object.keys(this.eventData).length>=1&&e.localStorage.setItem(n,JSON.stringify(this.eventData))}catch(t){G("Unable to write to LocalStorage")}}processRequests(t){}postEvent(t,e,n,r){if(!i.EVENTS_URL)return;const o=Tt(i.EVENTS_URL);o.params.push("access_token=".concat(r||i.ACCESS_TOKEN||""));const a={event:this.type,created:new Date(t).toISOString()},s=e?O(a,e):a,l={url:Mt(o),headers:{"Content-Type":"text/plain"},body:JSON.stringify([s])};this.pendingRequest=function(t,e){return ht(O(t,{method:"POST"}),e)}(l,(t=>{this.pendingRequest=null,n(t),this.saveEventData(),this.processRequests(r)}))}queueRequest(t,e){this.queue.push(t),this.processRequests(e)}}const kt=new class extends Pt{constructor(t){super("appUserTurnstile"),this._customAccessToken=t}postTurnstileEvent(t,e){i.EVENTS_URL&&i.ACCESS_TOKEN&&Array.isArray(t)&&t.some((t=>_t(t)||bt(t)))&&this.queueRequest(Date.now(),e)}processRequests(t){if(this.pendingRequest||0===this.queue.length)return;this.anonId&&this.eventData.lastSuccess&&this.eventData.tokenU||this.fetchEventData();const e=Ct(i.ACCESS_TOKEN),r=e?e.u:i.ACCESS_TOKEN;let o=r!==this.eventData.tokenU;D(this.anonId)||(this.anonId=z(),o=!0);const a=this.queue.shift();if(this.eventData.lastSuccess){const t=new Date(this.eventData.lastSuccess),e=new Date(a),n=(a-this.eventData.lastSuccess)/864e5;o=o||n>=1||n<-1||t.getDate()!==e.getDate()}else o=!0;o?this.postEvent(a,{sdkIdentifier:"mapbox-gl-js",sdkVersion:n,skuId:h,"enabled.telemetry":!1,userId:this.anonId},(t=>{t||(this.eventData.lastSuccess=a,this.eventData.tokenU=r)}),t):this.processRequests()}},It=kt.postTurnstileEvent.bind(kt),Ot=new class extends Pt{constructor(){super("map.load"),this.success={},this.skuToken=""}postMapLoadEvent(t,e,n,r){this.skuToken=e,this.errorCb=r,i.EVENTS_URL&&(n||i.ACCESS_TOKEN?this.queueRequest({id:t,timestamp:Date.now()},n):this.errorCb(new Error(vt)))}processRequests(t){if(this.pendingRequest||0===this.queue.length)return;const{id:e,timestamp:r}=this.queue.shift();e&&this.success[e]||(this.anonId||this.fetchEventData(),D(this.anonId)||(this.anonId=z()),this.postEvent(r,{sdkIdentifier:"mapbox-gl-js",sdkVersion:n,skuId:h,skuToken:this.skuToken,userId:this.anonId},(t=>{t?this.errorCb(t):e&&(this.success[e]=!0)}),t))}},Lt=Ot.postMapLoadEvent.bind(Ot),jt=new class extends Pt{constructor(){super("gljs.performance")}postPerformanceEvent(t,e){i.EVENTS_URL&&(t||i.ACCESS_TOKEN)&&this.queueRequest({timestamp:Date.now(),performanceData:e},t)}processRequests(t){if(this.pendingRequest||0===this.queue.length)return;const{timestamp:r,performanceData:i}=this.queue.shift(),o=function(t){const r=e.performance.getEntriesByType("resource"),i=e.performance.getEntriesByType("mark"),o=function(t){const e={};if(t)for(const n in t)if("other"!==n)for(const r of t[n]){const t="".concat(n,"ResolveRangeMin"),i="".concat(n,"ResolveRangeMax"),o="".concat(n,"RequestCount"),a="".concat(n,"RequestCachedCount");e[t]=Math.min(e[t]||1/0,r.startTime),e[i]=Math.max(e[i]||-1/0,r.responseEnd);const s=t=>{void 0===e[t]&&(e[t]=0),++e[t]};void 0!==r.transferSize&&0===r.transferSize&&s(a),s(o)}return e}(function(t,e){const n={};if(t)for(const r of t){const t=e(r);void 0===n[t]&&(n[t]=[]),n[t].push(r)}return n}(r,Ut)),a=e.devicePixelRatio,s=e.navigator.connection||e.navigator.mozConnection||e.navigator.webkitConnection,l={counters:[],metadata:[],attributes:[]},c=(t,e,n)=>{null!=n&&t.push({name:e,value:n.toString()})};for(const e in o)c(l.counters,e,o[e]);if(t.interactionRange[0]!==1/0&&t.interactionRange[1]!==-1/0&&(c(l.counters,"interactionRangeMin",t.interactionRange[0]),c(l.counters,"interactionRangeMax",t.interactionRange[1])),i)for(const e of Object.keys(Ft)){const t=Ft[e],n=i.find((e=>e.name===t));n&&c(l.counters,t,n.startTime)}return c(l.counters,"visibilityHidden",t.visibilityHidden),c(l.attributes,"style",function(t){if(t)for(const e of t){const t=e.name.split("?")[0];if(wt(t)){const e=t.split("/").slice(-2);if(2===e.length)return"mapbox://styles/".concat(e[0],"/").concat(e[1])}}}(r)),c(l.attributes,"terrainEnabled",t.terrainEnabled?"true":"false"),c(l.attributes,"fogEnabled",t.fogEnabled?"true":"false"),c(l.attributes,"projection",t.projection),c(l.attributes,"zoom",t.zoom),c(l.metadata,"devicePixelRatio",a),c(l.metadata,"connectionEffectiveType",s?s.effectiveType:void 0),c(l.metadata,"navigatorUserAgent",e.navigator.userAgent),c(l.metadata,"screenWidth",e.screen.width),c(l.metadata,"screenHeight",e.screen.height),c(l.metadata,"windowWidth",e.innerWidth),c(l.metadata,"windowHeight",e.innerHeight),c(l.metadata,"mapWidth",t.width/a),c(l.metadata,"mapHeight",t.height/a),c(l.metadata,"webglRenderer",t.renderer),c(l.metadata,"webglVendor",t.vendor),c(l.metadata,"sdkVersion",n),c(l.metadata,"sdkIdentifier","mapbox-gl-js"),l}(i);for(const e of o.metadata);for(const e of o.counters);for(const e of o.attributes);this.postEvent(r,o,(()=>{}),t)}},zt=jt.postPerformanceEvent.bind(jt),Rt=new class extends Pt{constructor(){super("map.auth"),this.success={},this.skuToken=""}getSession(t,e,n,r){if(!i.API_URL||!i.SESSION_PATH)return;const o=Tt(i.API_URL+i.SESSION_PATH);o.params.push("sku=".concat(e||"")),o.params.push("access_token=".concat(r||i.ACCESS_TOKEN||""));const a={url:Mt(o),headers:{"Content-Type":"text/plain"}};this.pendingRequest=function(t,e){return ht(O(t,{method:"GET"}),e)}(a,(t=>{this.pendingRequest=null,n(t),this.saveEventData(),this.processRequests(r)}))}getSessionAPI(t,e,n,r){this.skuToken=e,this.errorCb=r,i.SESSION_PATH&&i.API_URL&&(n||i.ACCESS_TOKEN?this.queueRequest({id:t,timestamp:Date.now()},n):this.errorCb(new Error(vt)))}processRequests(t){if(this.pendingRequest||0===this.queue.length)return;const{id:e,timestamp:n}=this.queue.shift();e&&this.success[e]||this.getSession(n,this.skuToken,(t=>{t?this.errorCb(t):e&&(this.success[e]=!0)}),t)}},Dt=Rt.getSessionAPI.bind(Rt),Bt=new Set,Ft={create:"create",load:"load",fullLoad:"fullLoad"},Nt={mark(t){e.performance.mark(t)},measure(t,n,r){e.performance.measure(t,n,r)}};function Ut(t){const e=t.name.split("?")[0];return xt(e)&&e.includes("mapbox-gl.js")?"javascript":xt(e)&&e.includes("mapbox-gl.css")?"css":function(t){return i.API_FONTS_REGEX.test(t)}(e)?"fontRange":St(e)?"sprite":wt(e)?"style":function(t){return i.API_TILEJSON_REGEX.test(t)}(e)?"tilejson":"other"}const Vt=e.performance;function Wt(t){const e=t?t.url.toString():void 0;return Vt.getEntriesByName(e)}let Gt,qt,Ht,Zt;const Xt={now:()=>void 0!==Ht?Ht:e.performance.now(),setNow(t){Ht=t},restoreNow(){Ht=void 0},frame(t){const n=e.requestAnimationFrame(t);return{cancel:()=>e.cancelAnimationFrame(n)}},getImageData(t){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;const{width:r,height:i}=t;Zt||(Zt=e.document.createElement("canvas"));const o=Zt.getContext("2d",{willReadFrequently:!0});if(!o)throw new Error("failed to create canvas 2d context");return(r>Zt.width||i>Zt.height)&&(Zt.width=r,Zt.height=i),o.clearRect(-n,-n,r+2*n,i+2*n),o.drawImage(t,0,0,r,i),o.getImageData(-n,-n,r+2*n,i+2*n)},resolveURL:t=>(Gt||(Gt=e.document.createElement("a")),Gt.href=t,Gt.href),get devicePixelRatio(){return e.devicePixelRatio},get prefersReducedMotion(){return!!e.matchMedia&&(null==qt&&(qt=e.matchMedia("(prefers-reduced-motion: reduce)")),qt.matches)}};function Yt(t,e,n){n[t]&&-1!==n[t].indexOf(e)||(n[t]=n[t]||[],n[t].push(e))}function Kt(t,e,n){if(n&&n[t]){const r=n[t].indexOf(e);-1!==r&&n[t].splice(r,1)}}class $t{constructor(t){O(this,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}),this.type=t}}class Jt extends $t{constructor(t){super("error",O({error:t},arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}))}}class Qt{on(t,e){return this._listeners=this._listeners||{},Yt(t,e,this._listeners),this}off(t,e){return Kt(t,e,this._listeners),Kt(t,e,this._oneTimeListeners),this}once(t,e){return e?(this._oneTimeListeners=this._oneTimeListeners||{},Yt(t,e,this._oneTimeListeners),this):new Promise((e=>this.once(t,e)))}fire(t,e){"string"==typeof t&&(t=new $t(t,e||{}));const n=t.type;if(this.listens(n)){t.target=this;const e=this._listeners&&this._listeners[n]?this._listeners[n].slice():[];for(const n of e)n.call(this,t);const r=this._oneTimeListeners&&this._oneTimeListeners[n]?this._oneTimeListeners[n].slice():[];for(const o of r)Kt(n,o,this._oneTimeListeners),o.call(this,t);const i=this._eventedParent;i&&(O(t,"function"==typeof this._eventedParentData?this._eventedParentData():this._eventedParentData),i.fire(t))}else t instanceof Jt&&console.error(t.error);return this}listens(t){return!!(this._listeners&&this._listeners[t]&&this._listeners[t].length>0||this._oneTimeListeners&&this._oneTimeListeners[t]&&this._oneTimeListeners[t].length>0||this._eventedParent&&this._eventedParent.listens(t))}setEventedParent(t,e){return this._eventedParent=t,this._eventedParentData=e,this}}var te=JSON.parse('{"$version":8,"$root":{"version":{"required":true,"type":"enum","values":[8]},"name":{"type":"string"},"metadata":{"type":"*"},"center":{"type":"array","value":"number"},"zoom":{"type":"number"},"bearing":{"type":"number","default":0,"period":360,"units":"degrees"},"pitch":{"type":"number","default":0,"units":"degrees"},"light":{"type":"light"},"terrain":{"type":"terrain"},"fog":{"type":"fog"},"sources":{"required":true,"type":"sources"},"sprite":{"type":"string"},"glyphs":{"type":"string"},"transition":{"type":"transition"},"projection":{"type":"projection"},"layers":{"required":true,"type":"array","value":"layer"}},"sources":{"*":{"type":"source"}},"source":["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],"source_vector":{"type":{"required":true,"type":"enum","values":{"vector":{}}},"url":{"type":"string"},"tiles":{"type":"array","value":"string"},"bounds":{"type":"array","value":"number","length":4,"default":[-180,-85.051129,180,85.051129]},"scheme":{"type":"enum","values":{"xyz":{},"tms":{}},"default":"xyz"},"minzoom":{"type":"number","default":0},"maxzoom":{"type":"number","default":22},"attribution":{"type":"string"},"promoteId":{"type":"promoteId"},"volatile":{"type":"boolean","default":false},"*":{"type":"*"}},"source_raster":{"type":{"required":true,"type":"enum","values":{"raster":{}}},"url":{"type":"string"},"tiles":{"type":"array","value":"string"},"bounds":{"type":"array","value":"number","length":4,"default":[-180,-85.051129,180,85.051129]},"minzoom":{"type":"number","default":0},"maxzoom":{"type":"number","default":22},"tileSize":{"type":"number","default":512,"units":"pixels"},"scheme":{"type":"enum","values":{"xyz":{},"tms":{}},"default":"xyz"},"attribution":{"type":"string"},"volatile":{"type":"boolean","default":false},"*":{"type":"*"}},"source_raster_dem":{"type":{"required":true,"type":"enum","values":{"raster-dem":{}}},"url":{"type":"string"},"tiles":{"type":"array","value":"string"},"bounds":{"type":"array","value":"number","length":4,"default":[-180,-85.051129,180,85.051129]},"minzoom":{"type":"number","default":0},"maxzoom":{"type":"number","default":22},"tileSize":{"type":"number","default":512,"units":"pixels"},"attribution":{"type":"string"},"encoding":{"type":"enum","values":{"terrarium":{},"mapbox":{}},"default":"mapbox"},"volatile":{"type":"boolean","default":false},"*":{"type":"*"}},"source_geojson":{"type":{"required":true,"type":"enum","values":{"geojson":{}}},"data":{"type":"*"},"maxzoom":{"type":"number","default":18},"attribution":{"type":"string"},"buffer":{"type":"number","default":128,"maximum":512,"minimum":0},"filter":{"type":"*"},"tolerance":{"type":"number","default":0.375},"cluster":{"type":"boolean","default":false},"clusterRadius":{"type":"number","default":50,"minimum":0},"clusterMaxZoom":{"type":"number"},"clusterMinPoints":{"type":"number"},"clusterProperties":{"type":"*"},"lineMetrics":{"type":"boolean","default":false},"generateId":{"type":"boolean","default":false},"promoteId":{"type":"promoteId"}},"source_video":{"type":{"required":true,"type":"enum","values":{"video":{}}},"urls":{"required":true,"type":"array","value":"string"},"coordinates":{"required":true,"type":"array","length":4,"value":{"type":"array","length":2,"value":"number"}}},"source_image":{"type":{"required":true,"type":"enum","values":{"image":{}}},"url":{"required":true,"type":"string"},"coordinates":{"required":true,"type":"array","length":4,"value":{"type":"array","length":2,"value":"number"}}},"layer":{"id":{"type":"string","required":true},"type":{"type":"enum","values":{"fill":{},"line":{},"symbol":{},"circle":{},"heatmap":{},"fill-extrusion":{},"raster":{},"hillshade":{},"background":{},"sky":{}},"required":true},"metadata":{"type":"*"},"source":{"type":"string"},"source-layer":{"type":"string"},"minzoom":{"type":"number","minimum":0,"maximum":24},"maxzoom":{"type":"number","minimum":0,"maximum":24},"filter":{"type":"filter"},"layout":{"type":"layout"},"paint":{"type":"paint"}},"layout":["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background","layout_sky"],"layout_background":{"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_sky":{"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_fill":{"fill-sort-key":{"type":"number","expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_circle":{"circle-sort-key":{"type":"number","expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_heatmap":{"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_fill-extrusion":{"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"},"fill-extrusion-edge-radius":{"type":"number","private":true,"default":0,"minimum":0,"maximum":1,"property-type":"constant"}},"layout_line":{"line-cap":{"type":"enum","values":{"butt":{},"round":{},"square":{}},"default":"butt","expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"line-join":{"type":"enum","values":{"bevel":{},"round":{},"miter":{}},"default":"miter","expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{"type":"number","default":2,"requires":[{"line-join":"miter"}],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"line-round-limit":{"type":"number","default":1.05,"requires":[{"line-join":"round"}],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"line-sort-key":{"type":"number","expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_symbol":{"symbol-placement":{"type":"enum","values":{"point":{},"line":{},"line-center":{}},"default":"point","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"symbol-spacing":{"type":"number","default":250,"minimum":1,"units":"pixels","requires":[{"symbol-placement":"line"}],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{"type":"boolean","default":false,"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{"type":"number","expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{"type":"enum","values":{"auto":{},"viewport-y":{},"source":{}},"default":"auto","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{"type":"boolean","default":false,"requires":["icon-image"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{"type":"boolean","default":false,"requires":["icon-image"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-optional":{"type":"boolean","default":false,"requires":["icon-image","text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{"type":"enum","values":{"map":{},"viewport":{},"auto":{}},"default":"auto","requires":["icon-image"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-size":{"type":"number","default":1,"minimum":0,"units":"factor of the original icon size","requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{"type":"enum","values":{"none":{},"width":{},"height":{},"both":{}},"default":"none","requires":["icon-image","text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{"type":"array","value":"number","length":4,"default":[0,0,0,0],"units":"pixels","requires":["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"icon-image":{"type":"resolvedImage","tokens":true,"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{"type":"number","default":0,"period":360,"units":"degrees","requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{"type":"number","default":2,"minimum":0,"units":"pixels","requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"icon-keep-upright":{"type":"boolean","default":false,"requires":["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-offset":{"type":"array","value":"number","length":2,"default":[0,0],"requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{"type":"enum","values":{"center":{},"left":{},"right":{},"top":{},"bottom":{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},"default":"center","requires":["icon-image"],"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{"type":"enum","values":{"map":{},"viewport":{},"auto":{}},"default":"auto","requires":["icon-image"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{"type":"enum","values":{"map":{},"viewport":{},"auto":{}},"default":"auto","requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{"type":"enum","values":{"map":{},"viewport":{},"auto":{}},"default":"auto","requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-field":{"type":"formatted","default":"","tokens":true,"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-font":{"type":"array","value":"string","default":["Open Sans Regular","Arial Unicode MS Regular"],"requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-size":{"type":"number","default":16,"minimum":0,"units":"pixels","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{"type":"number","default":10,"minimum":0,"units":"ems","requires":["text-field",{"symbol-placement":["point"]}],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{"type":"number","default":1.2,"units":"ems","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-letter-spacing":{"type":"number","default":0,"units":"ems","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-justify":{"type":"enum","values":{"auto":{},"left":{},"center":{},"right":{}},"default":"center","requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{"type":"number","units":"ems","default":0,"requires":["text-field"],"property-type":"data-driven","expression":{"interpolated":true,"parameters":["zoom","feature"]}},"text-variable-anchor":{"type":"array","value":"enum","values":{"center":{},"left":{},"right":{},"top":{},"bottom":{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},"requires":["text-field",{"symbol-placement":["point"]}],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-anchor":{"type":"enum","values":{"center":{},"left":{},"right":{},"top":{},"bottom":{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},"default":"center","requires":["text-field",{"!":"text-variable-anchor"}],"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{"type":"number","default":45,"units":"degrees","requires":["text-field",{"symbol-placement":["line","line-center"]}],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"text-writing-mode":{"type":"array","value":"enum","values":{"horizontal":{},"vertical":{}},"requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-rotate":{"type":"number","default":0,"period":360,"units":"degrees","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-padding":{"type":"number","default":2,"minimum":0,"units":"pixels","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"text-keep-upright":{"type":"boolean","default":true,"requires":["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-transform":{"type":"enum","values":{"none":{},"uppercase":{},"lowercase":{}},"default":"none","requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-offset":{"type":"array","value":"number","units":"ems","length":2,"default":[0,0],"requires":["text-field",{"!":"text-radial-offset"}],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{"type":"boolean","default":false,"requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{"type":"boolean","default":false,"requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-optional":{"type":"boolean","default":false,"requires":["text-field","icon-image"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_raster":{"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_hillshade":{"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"filter":{"type":"array","value":"*"},"filter_symbol":{"type":"boolean","default":false,"transition":false,"property-type":"data-driven","expression":{"interpolated":false,"parameters":["zoom","feature","pitch","distance-from-center"]}},"filter_fill":{"type":"boolean","default":false,"transition":false,"property-type":"data-driven","expression":{"interpolated":false,"parameters":["zoom","feature"]}},"filter_line":{"type":"boolean","default":false,"transition":false,"property-type":"data-driven","expression":{"interpolated":false,"parameters":["zoom","feature"]}},"filter_circle":{"type":"boolean","default":false,"transition":false,"property-type":"data-driven","expression":{"interpolated":false,"parameters":["zoom","feature"]}},"filter_fill-extrusion":{"type":"boolean","default":false,"transition":false,"property-type":"data-driven","expression":{"interpolated":false,"parameters":["zoom","feature"]}},"filter_heatmap":{"type":"boolean","default":false,"transition":false,"property-type":"data-driven","expression":{"interpolated":false,"parameters":["zoom","feature"]}},"filter_operator":{"type":"enum","values":{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},"in":{},"!in":{},"all":{},"any":{},"none":{},"has":{},"!has":{},"within":{}}},"geometry_type":{"type":"enum","values":{"Point":{},"LineString":{},"Polygon":{}}},"function":{"expression":{"type":"expression"},"stops":{"type":"array","value":"function_stop"},"base":{"type":"number","default":1,"minimum":0},"property":{"type":"string","default":"$zoom"},"type":{"type":"enum","values":{"identity":{},"exponential":{},"interval":{},"categorical":{}},"default":"exponential"},"colorSpace":{"type":"enum","values":{"rgb":{},"lab":{},"hcl":{}},"default":"rgb"},"default":{"type":"*","required":false}},"function_stop":{"type":"array","minimum":0,"maximum":24,"value":["number","color"],"length":2},"expression":{"type":"array","value":"*","minimum":1},"fog":{"range":{"type":"array","default":[0.5,10],"minimum":-20,"maximum":20,"length":2,"value":"number","property-type":"data-constant","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"color":{"type":"color","property-type":"data-constant","default":"#ffffff","expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"high-color":{"type":"color","property-type":"data-constant","default":"#245cdf","expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"space-color":{"type":"color","property-type":"data-constant","default":["interpolate",["linear"],["zoom"],4,"#010b19",7,"#367ab9"],"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"horizon-blend":{"type":"number","property-type":"data-constant","default":["interpolate",["linear"],["zoom"],4,0.2,7,0.1],"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"star-intensity":{"type":"number","property-type":"data-constant","default":["interpolate",["linear"],["zoom"],5,0.35,6,0],"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true}},"light":{"anchor":{"type":"enum","default":"viewport","values":{"map":{},"viewport":{}},"property-type":"data-constant","transition":false,"expression":{"interpolated":false,"parameters":["zoom"]}},"position":{"type":"array","default":[1.15,210,30],"length":3,"value":"number","property-type":"data-constant","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"color":{"type":"color","property-type":"data-constant","default":"#ffffff","expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"intensity":{"type":"number","property-type":"data-constant","default":0.5,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true}},"projection":{"name":{"type":"enum","values":{"albers":{},"equalEarth":{},"equirectangular":{},"lambertConformalConic":{},"mercator":{},"naturalEarth":{},"winkelTripel":{},"globe":{}},"default":"mercator","required":true},"center":{"type":"array","length":2,"value":"number","property-type":"data-constant","minimum":[-180,-90],"maximum":[180,90],"transition":false,"requires":[{"name":["albers","lambertConformalConic"]}]},"parallels":{"type":"array","length":2,"value":"number","property-type":"data-constant","minimum":[-90,-90],"maximum":[90,90],"transition":false,"requires":[{"name":["albers","lambertConformalConic"]}]}},"terrain":{"source":{"type":"string","required":true},"exaggeration":{"type":"number","property-type":"data-constant","default":1,"minimum":0,"maximum":1000,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true,"requires":["source"]}},"paint":["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background","paint_sky"],"paint_fill":{"fill-antialias":{"type":"boolean","default":true,"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"fill-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{"type":"color","default":"#000000","transition":true,"requires":[{"!":"fill-pattern"}],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{"type":"color","transition":true,"requires":[{"!":"fill-pattern"},{"fill-antialias":true}],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","requires":["fill-translate"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"fill-pattern":{"type":"resolvedImage","transition":false,"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{"type":"color","default":"#000000","transition":true,"requires":[{"!":"fill-extrusion-pattern"}],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","requires":["fill-extrusion-translate"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{"type":"resolvedImage","transition":false,"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"fill-extrusion-height":{"type":"number","default":0,"minimum":0,"units":"meters","transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{"type":"number","default":0,"minimum":0,"units":"meters","transition":true,"requires":["fill-extrusion-height"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{"type":"boolean","default":true,"transition":false,"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"fill-extrusion-ambient-occlusion-intensity":{"property-type":"data-constant","type":"number","private":true,"default":0,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"fill-extrusion-ambient-occlusion-radius":{"property-type":"data-constant","type":"number","private":true,"default":3,"minimum":0,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true,"requires":["fill-extrusion-edge-radius"]},"fill-extrusion-rounded-roof":{"type":"boolean","default":true,"requires":["fill-extrusion-edge-radius"],"transition":false,"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_line":{"line-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{"type":"color","default":"#000000","transition":true,"requires":[{"!":"line-pattern"}],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","requires":["line-translate"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"line-width":{"type":"number","default":1,"minimum":0,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{"type":"number","default":0,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{"type":"array","value":"number","minimum":0,"transition":false,"units":"line widths","requires":[{"!":"line-pattern"}],"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"line-pattern":{"type":"resolvedImage","transition":false,"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"line-gradient":{"type":"color","transition":false,"requires":[{"!":"line-pattern"},{"source":"geojson","has":{"lineMetrics":true}}],"expression":{"interpolated":true,"parameters":["line-progress"]},"property-type":"color-ramp"},"line-trim-offset":{"type":"array","value":"number","length":2,"default":[0,0],"minimum":[0,0],"maximum":[1,1],"transition":false,"requires":[{"source":"geojson","has":{"lineMetrics":true}}],"property-type":"constant"}},"paint_circle":{"circle-radius":{"type":"number","default":5,"minimum":0,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{"type":"number","default":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","requires":["circle-translate"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{"type":"enum","values":{"map":{},"viewport":{}},"default":"viewport","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"}},"paint_heatmap":{"heatmap-radius":{"type":"number","default":30,"minimum":1,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{"type":"number","default":1,"minimum":0,"transition":false,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{"type":"number","default":1,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"heatmap-color":{"type":"color","default":["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",0.1,"royalblue",0.3,"cyan",0.5,"lime",0.7,"yellow",1,"red"],"transition":false,"expression":{"interpolated":true,"parameters":["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_symbol":{"icon-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{"type":"color","default":"#000000","transition":true,"requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{"type":"color","default":"rgba(0, 0, 0, 0)","transition":true,"requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"units":"pixels","requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","requires":["icon-image","icon-translate"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{"type":"color","default":"#000000","transition":true,"overridable":true,"requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{"type":"color","default":"rgba(0, 0, 0, 0)","transition":true,"requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"units":"pixels","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","requires":["text-field","text-translate"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_raster":{"raster-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{"type":"number","default":0,"period":360,"transition":true,"units":"degrees","expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{"type":"number","default":0,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-saturation":{"type":"number","default":0,"minimum":-1,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-contrast":{"type":"number","default":0,"minimum":-1,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-resampling":{"type":"enum","values":{"linear":{},"nearest":{}},"default":"linear","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{"type":"number","default":300,"minimum":0,"transition":false,"units":"milliseconds","expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_hillshade":{"hillshade-illumination-direction":{"type":"number","default":335,"minimum":0,"maximum":359,"transition":false,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"viewport","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{"type":"number","default":0.5,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{"type":"color","default":"#FFFFFF","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_background":{"background-color":{"type":"color","default":"#000000","transition":true,"requires":[{"!":"background-pattern"}],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"background-pattern":{"type":"resolvedImage","transition":false,"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"background-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_sky":{"sky-type":{"type":"enum","values":{"gradient":{},"atmosphere":{}},"default":"atmosphere","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"sky-atmosphere-sun":{"type":"array","value":"number","length":2,"units":"degrees","minimum":[0,0],"maximum":[360,180],"transition":false,"requires":[{"sky-type":"atmosphere"}],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"sky-atmosphere-sun-intensity":{"type":"number","requires":[{"sky-type":"atmosphere"}],"default":10,"minimum":0,"maximum":100,"transition":false,"property-type":"data-constant"},"sky-gradient-center":{"type":"array","requires":[{"sky-type":"gradient"}],"value":"number","default":[0,0],"length":2,"units":"degrees","minimum":[0,0],"maximum":[360,180],"transition":false,"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"sky-gradient-radius":{"type":"number","requires":[{"sky-type":"gradient"}],"default":90,"minimum":0,"maximum":180,"transition":false,"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"sky-gradient":{"type":"color","default":["interpolate",["linear"],["sky-radial-progress"],0.8,"#87ceeb",1,"white"],"transition":false,"requires":[{"sky-type":"gradient"}],"expression":{"interpolated":true,"parameters":["sky-radial-progress"]},"property-type":"color-ramp"},"sky-atmosphere-halo-color":{"type":"color","default":"white","transition":false,"requires":[{"sky-type":"atmosphere"}],"property-type":"data-constant"},"sky-atmosphere-color":{"type":"color","default":"white","transition":false,"requires":[{"sky-type":"atmosphere"}],"property-type":"data-constant"},"sky-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"}},"transition":{"duration":{"type":"number","default":300,"minimum":0,"units":"milliseconds"},"delay":{"type":"number","default":0,"minimum":0,"units":"milliseconds"}},"property-type":{"data-driven":{"type":"property-type"},"color-ramp":{"type":"property-type"},"data-constant":{"type":"property-type"},"constant":{"type":"property-type"}},"promoteId":{"*":{"type":"string"}}}');function ee(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];for(const i of n)for(const e in i)t[e]=i[e];return t}function ne(t){return t instanceof Number||t instanceof String||t instanceof Boolean?t.valueOf():t}function re(t){if(Array.isArray(t))return t.map(re);if(t instanceof Object&&!(t instanceof Number||t instanceof String||t instanceof Boolean)){const e={};for(const n in t)e[n]=re(t[n]);return e}return ne(t)}class ie extends Error{constructor(t,e){super(e),this.message=e,this.key=t}}var oe=ie;class ae{constructor(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];this.parent=t,this.bindings={};for(const[n,r]of e)this.bindings[n]=r}concat(t){return new ae(this,t)}get(t){if(this.bindings[t])return this.bindings[t];if(this.parent)return this.parent.get(t);throw new Error("".concat(t," not found in scope."))}has(t){return!!this.bindings[t]||!!this.parent&&this.parent.has(t)}}var se=ae;const le={kind:"null"},ce={kind:"number"},ue={kind:"string"},he={kind:"boolean"},de={kind:"color"},fe={kind:"object"},pe={kind:"value"},me={kind:"collator"},ge={kind:"formatted"},ye={kind:"resolvedImage"};function ve(t,e){return{kind:"array",itemType:t,N:e}}function _e(t){if("array"===t.kind){const e=_e(t.itemType);return"number"==typeof t.N?"array<".concat(e,", ").concat(t.N,">"):"value"===t.itemType.kind?"array":"array<".concat(e,">")}return t.kind}const be=[le,ce,ue,he,de,ge,fe,ve(pe),ye];function xe(t,e){if("error"===e.kind)return null;if("array"===t.kind){if("array"===e.kind&&(0===e.N&&"value"===e.itemType.kind||!xe(t.itemType,e.itemType))&&("number"!=typeof t.N||t.N===e.N))return null}else{if(t.kind===e.kind)return null;if("value"===t.kind)for(const t of be)if(!xe(t,e))return null}return"Expected ".concat(_e(t)," but found ").concat(_e(e)," instead.")}function we(t,e){return e.some((e=>e.kind===t.kind))}function Se(t,e){return e.some((e=>"null"===e?null===t:"array"===e?Array.isArray(t):"object"===e?t&&!Array.isArray(t)&&"object"==typeof t:e===typeof t))}var Ee,Te={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],rebeccapurple:[102,51,153,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};function Me(t){return(t=Math.round(t))<0?0:t>255?255:t}function Ae(t){return Me("%"===t[t.length-1]?parseFloat(t)/100*255:parseInt(t))}function Ce(t){return(e="%"===t[t.length-1]?parseFloat(t)/100:parseFloat(t))<0?0:e>1?1:e;var e}function Pe(t,e,n){return n<0?n+=1:n>1&&(n-=1),6*n<1?t+(e-t)*n*6:2*n<1?e:3*n<2?t+(e-t)*(2/3-n)*6:t}try{Ee={}.parseCSSColor=function(t){var e,n=t.replace(/ /g,"").toLowerCase();if(n in Te)return Te[n].slice();if("#"===n[0])return 4===n.length?(e=parseInt(n.substr(1),16))>=0&&e<=4095?[(3840&e)>>4|(3840&e)>>8,240&e|(240&e)>>4,15&e|(15&e)<<4,1]:null:7===n.length&&(e=parseInt(n.substr(1),16))>=0&&e<=16777215?[(16711680&e)>>16,(65280&e)>>8,255&e,1]:null;var r=n.indexOf("("),i=n.indexOf(")");if(-1!==r&&i+1===n.length){var o=n.substr(0,r),a=n.substr(r+1,i-(r+1)).split(","),s=1;switch(o){case"rgba":if(4!==a.length)return null;s=Ce(a.pop());case"rgb":return 3!==a.length?null:[Ae(a[0]),Ae(a[1]),Ae(a[2]),s];case"hsla":if(4!==a.length)return null;s=Ce(a.pop());case"hsl":if(3!==a.length)return null;var l=(parseFloat(a[0])%360+360)%360/360,c=Ce(a[1]),u=Ce(a[2]),h=u<=.5?u*(c+1):u+c-u*c,d=2*u-h;return[Me(255*Pe(d,h,l+1/3)),Me(255*Pe(d,h,l)),Me(255*Pe(d,h,l-1/3)),s];default:return null}}return null}}catch(t){}class ke{constructor(t,e,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;this.r=t,this.g=e,this.b=n,this.a=r}static parse(t){if(!t)return;if(t instanceof ke)return t;if("string"!=typeof t)return;const e=Ee(t);return e?new ke(e[0]/255*e[3],e[1]/255*e[3],e[2]/255*e[3],e[3]):void 0}toString(){const[t,e,n,r]=this.toArray();return"rgba(".concat(Math.round(t),",").concat(Math.round(e),",").concat(Math.round(n),",").concat(r,")")}toArray(){const{r:t,g:e,b:n,a:r}=this;return 0===r?[0,0,0,0]:[255*t/r,255*e/r,255*n/r,r]}toArray01(){const{r:t,g:e,b:n,a:r}=this;return 0===r?[0,0,0,0]:[t/r,e/r,n/r,r]}toArray01PremultipliedAlpha(){const{r:t,g:e,b:n,a:r}=this;return[t,e,n,r]}}ke.black=new ke(0,0,0,1),ke.white=new ke(1,1,1,1),ke.transparent=new ke(0,0,0,0),ke.red=new ke(1,0,0,1),ke.blue=new ke(0,0,1,1);var Ie=ke;class Oe{constructor(t,e,n){this.sensitivity=t?e?"variant":"case":e?"accent":"base",this.locale=n,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})}compare(t,e){return this.collator.compare(t,e)}resolvedLocale(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale}}class Le{constructor(t,e,n,r,i){this.text=t.normalize?t.normalize():t,this.image=e,this.scale=n,this.fontStack=r,this.textColor=i}}class je{constructor(t){this.sections=t}static fromString(t){return new je([new Le(t,null,null,null,null)])}isEmpty(){return 0===this.sections.length||!this.sections.some((t=>0!==t.text.length||t.image&&0!==t.image.name.length))}static factory(t){return t instanceof je?t:je.fromString(t)}toString(){return 0===this.sections.length?"":this.sections.map((t=>t.text)).join("")}serialize(){const t=["format"];for(const e of this.sections){if(e.image){t.push(["image",e.image.name]);continue}t.push(e.text);const n={};e.fontStack&&(n["text-font"]=["literal",e.fontStack.split(",")]),e.scale&&(n["font-scale"]=e.scale),e.textColor&&(n["text-color"]=["rgba"].concat(e.textColor.toArray())),t.push(n)}return t}}class ze{constructor(t){this.name=t.name,this.available=t.available}toString(){return this.name}static fromString(t){return t?new ze({name:t,available:!1}):null}serialize(){return["image",this.name]}}function Re(t,e,n,r){return"number"==typeof t&&t>=0&&t<=255&&"number"==typeof e&&e>=0&&e<=255&&"number"==typeof n&&n>=0&&n<=255?void 0===r||"number"==typeof r&&r>=0&&r<=1?null:"Invalid rgba value [".concat([t,e,n,r].join(", "),"]: 'a' must be between 0 and 1."):"Invalid rgba value [".concat(("number"==typeof r?[t,e,n,r]:[t,e,n]).join(", "),"]: 'r', 'g', and 'b' must be between 0 and 255.")}function De(t){if(null===t)return!0;if("string"==typeof t)return!0;if("boolean"==typeof t)return!0;if("number"==typeof t)return!0;if(t instanceof Ie)return!0;if(t instanceof Oe)return!0;if(t instanceof je)return!0;if(t instanceof ze)return!0;if(Array.isArray(t)){for(const e of t)if(!De(e))return!1;return!0}if("object"==typeof t){for(const e in t)if(!De(t[e]))return!1;return!0}return!1}function Be(t){if(null===t)return le;if("string"==typeof t)return ue;if("boolean"==typeof t)return he;if("number"==typeof t)return ce;if(t instanceof Ie)return de;if(t instanceof Oe)return me;if(t instanceof je)return ge;if(t instanceof ze)return ye;if(Array.isArray(t)){const e=t.length;let n;for(const r of t){const t=Be(r);if(n){if(n===t)continue;n=pe;break}n=t}return ve(n||pe,e)}return fe}function Fe(t){const e=typeof t;return null===t?"":"string"===e||"number"===e||"boolean"===e?String(t):t instanceof Ie||t instanceof je||t instanceof ze?t.toString():JSON.stringify(t)}class Ne{constructor(t,e){this.type=t,this.value=e}static parse(t,e){if(2!==t.length)return e.error("'literal' expression requires exactly one argument, but found ".concat(t.length-1," instead."));if(!De(t[1]))return e.error("invalid value");const n=t[1];let r=Be(n);const i=e.expectedType;return"array"!==r.kind||0!==r.N||!i||"array"!==i.kind||"number"==typeof i.N&&0!==i.N||(r=i),new Ne(r,n)}evaluate(){return this.value}eachChild(){}outputDefined(){return!0}serialize(){return"array"===this.type.kind||"object"===this.type.kind?["literal",this.value]:this.value instanceof Ie?["rgba"].concat(this.value.toArray()):this.value instanceof je?this.value.serialize():this.value}}var Ue=Ne,Ve=class{constructor(t){this.name="ExpressionEvaluationError",this.message=t}toJSON(){return this.message}};const We={string:ue,number:ce,boolean:he,object:fe};class Ge{constructor(t,e){this.type=t,this.args=e}static parse(t,e){if(t.length<2)return e.error("Expected at least one argument.");let n,r=1;const i=t[0];if("array"===i){let i,o;if(t.length>2){const n=t[1];if("string"!=typeof n||!(n in We)||"object"===n)return e.error('The item type argument of "array" must be one of string, number, boolean',1);i=We[n],r++}else i=pe;if(t.length>3){if(null!==t[2]&&("number"!=typeof t[2]||t[2]<0||t[2]!==Math.floor(t[2])))return e.error('The length argument to "array" must be a positive integer literal',2);o=t[2],r++}n=ve(i,o)}else n=We[i];const o=[];for(;r<t.length;r++){const n=e.parse(t[r],r,pe);if(!n)return null;o.push(n)}return new Ge(n,o)}evaluate(t){for(let e=0;e<this.args.length;e++){const n=this.args[e].evaluate(t);if(!xe(this.type,Be(n)))return n;if(e===this.args.length-1)throw new Ve("Expected value to be of type ".concat(_e(this.type),", but found ").concat(_e(Be(n))," instead."))}return null}eachChild(t){this.args.forEach(t)}outputDefined(){return this.args.every((t=>t.outputDefined()))}serialize(){const t=this.type,e=[t.kind];if("array"===t.kind){const n=t.itemType;if("string"===n.kind||"number"===n.kind||"boolean"===n.kind){e.push(n.kind);const r=t.N;("number"==typeof r||this.args.length>1)&&e.push(r)}}return e.concat(this.args.map((t=>t.serialize())))}}var qe=Ge;class He{constructor(t){this.type=ge,this.sections=t}static parse(t,e){if(t.length<2)return e.error("Expected at least one argument.");const n=t[1];if(!Array.isArray(n)&&"object"==typeof n)return e.error("First argument must be an image or text section.");const r=[];let i=!1;for(let o=1;o<=t.length-1;++o){const n=t[o];if(i&&"object"==typeof n&&!Array.isArray(n)){i=!1;let t=null;if(n["font-scale"]&&(t=e.parse(n["font-scale"],1,ce),!t))return null;let o=null;if(n["text-font"]&&(o=e.parse(n["text-font"],1,ve(ue)),!o))return null;let a=null;if(n["text-color"]&&(a=e.parse(n["text-color"],1,de),!a))return null;const s=r[r.length-1];s.scale=t,s.font=o,s.textColor=a}else{const n=e.parse(t[o],1,pe);if(!n)return null;const a=n.type.kind;if("string"!==a&&"value"!==a&&"null"!==a&&"resolvedImage"!==a)return e.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");i=!0,r.push({content:n,scale:null,font:null,textColor:null})}}return new He(r)}evaluate(t){return new je(this.sections.map((e=>{const n=e.content.evaluate(t);return Be(n)===ye?new Le("",n,null,null,null):new Le(Fe(n),null,e.scale?e.scale.evaluate(t):null,e.font?e.font.evaluate(t).join(","):null,e.textColor?e.textColor.evaluate(t):null)})))}eachChild(t){for(const e of this.sections)t(e.content),e.scale&&t(e.scale),e.font&&t(e.font),e.textColor&&t(e.textColor)}outputDefined(){return!1}serialize(){const t=["format"];for(const e of this.sections){t.push(e.content.serialize());const n={};e.scale&&(n["font-scale"]=e.scale.serialize()),e.font&&(n["text-font"]=e.font.serialize()),e.textColor&&(n["text-color"]=e.textColor.serialize()),t.push(n)}return t}}class Ze{constructor(t){this.type=ye,this.input=t}static parse(t,e){if(2!==t.length)return e.error("Expected two arguments.");const n=e.parse(t[1],1,ue);return n?new Ze(n):e.error("No image name provided.")}evaluate(t){const e=this.input.evaluate(t),n=ze.fromString(e);return n&&t.availableImages&&(n.available=t.availableImages.indexOf(e)>-1),n}eachChild(t){t(this.input)}outputDefined(){return!1}serialize(){return["image",this.input.serialize()]}}const Xe={"to-boolean":he,"to-color":de,"to-number":ce,"to-string":ue};class Ye{constructor(t,e){this.type=t,this.args=e}static parse(t,e){if(t.length<2)return e.error("Expected at least one argument.");const n=t[0];if(("to-boolean"===n||"to-string"===n)&&2!==t.length)return e.error("Expected one argument.");const r=Xe[n],i=[];for(let o=1;o<t.length;o++){const n=e.parse(t[o],o,pe);if(!n)return null;i.push(n)}return new Ye(r,i)}evaluate(t){if("boolean"===this.type.kind)return Boolean(this.args[0].evaluate(t));if("color"===this.type.kind){let e,n;for(const r of this.args){if(e=r.evaluate(t),n=null,e instanceof Ie)return e;if("string"==typeof e){const n=t.parseColor(e);if(n)return n}else if(Array.isArray(e)&&(n=e.length<3||e.length>4?"Invalid rbga value ".concat(JSON.stringify(e),": expected an array containing either three or four numeric values."):Re(e[0],e[1],e[2],e[3]),!n))return new Ie(e[0]/255,e[1]/255,e[2]/255,e[3])}throw new Ve(n||"Could not parse color from value '".concat("string"==typeof e?e:String(JSON.stringify(e)),"'"))}if("number"===this.type.kind){let e=null;for(const n of this.args){if(e=n.evaluate(t),null===e)return 0;const r=Number(e);if(!isNaN(r))return r}throw new Ve("Could not convert ".concat(JSON.stringify(e)," to number."))}return"formatted"===this.type.kind?je.fromString(Fe(this.args[0].evaluate(t))):"resolvedImage"===this.type.kind?ze.fromString(Fe(this.args[0].evaluate(t))):Fe(this.args[0].evaluate(t))}eachChild(t){this.args.forEach(t)}outputDefined(){return this.args.every((t=>t.outputDefined()))}serialize(){if("formatted"===this.type.kind)return new He([{content:this.args[0],scale:null,font:null,textColor:null}]).serialize();if("resolvedImage"===this.type.kind)return new Ze(this.args[0]).serialize();const t=["to-".concat(this.type.kind)];return this.eachChild((e=>{t.push(e.serialize())})),t}}var Ke=Ye;const $e=["Unknown","Point","LineString","Polygon"];var Je=class{constructor(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null,this.featureTileCoord=null,this.featureDistanceData=null}id(){return this.feature&&void 0!==this.feature.id?this.feature.id:null}geometryType(){return this.feature?"number"==typeof this.feature.type?$e[this.feature.type]:this.feature.type:null}geometry(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null}canonicalID(){return this.canonical}properties(){return this.feature&&this.feature.properties||{}}distanceFromCenter(){if(this.featureTileCoord&&this.featureDistanceData){const t=this.featureDistanceData.center,e=this.featureDistanceData.scale,{x:n,y:r}=this.featureTileCoord;return this.featureDistanceData.bearing[0]*(n*e-t[0])+this.featureDistanceData.bearing[1]*(r*e-t[1])}return 0}parseColor(t){let e=this._parseColorCache[t];return e||(e=this._parseColorCache[t]=Ie.parse(t)),e}};class Qe{constructor(t,e,n,r){this.name=t,this.type=e,this._evaluate=n,this.args=r}evaluate(t){return this._evaluate(t,this.args)}eachChild(t){this.args.forEach(t)}outputDefined(){return!1}serialize(){return[this.name].concat(this.args.map((t=>t.serialize())))}static parse(t,e){const n=t[0],r=Qe.definitions[n];if(!r)return e.error('Unknown expression "'.concat(n,'". If you wanted a literal array, use ["literal", [...]].'),0);const i=Array.isArray(r)?r[0]:r.type,o=Array.isArray(r)?[[r[1],r[2]]]:r.overloads,a=o.filter((e=>{let[n]=e;return!Array.isArray(n)||n.length===t.length-1}));let s=null;for(const[l,c]of a){s=new An(e.registry,e.path,null,e.scope);const r=[];let o=!1;for(let e=1;e<t.length;e++){const n=t[e],i=Array.isArray(l)?l[e-1]:l.type,a=s.parse(n,1+r.length,i);if(!a){o=!0;break}r.push(a)}if(!o)if(Array.isArray(l)&&l.length!==r.length)s.error("Expected ".concat(l.length," arguments, but found ").concat(r.length," instead."));else{for(let t=0;t<r.length;t++){const e=Array.isArray(l)?l[t]:l.type,n=r[t];s.concat(t+1).checkSubtype(e,n.type)}if(0===s.errors.length)return new Qe(n,i,c,r)}}if(1===a.length)e.errors.push(...s.errors);else{const n=(a.length?a:o).map((t=>{let[e]=t;return n=e,Array.isArray(n)?"(".concat(n.map(_e).join(", "),")"):"(".concat(_e(n.type),"...)");var n})).join(" | "),r=[];for(let i=1;i<t.length;i++){const n=e.parse(t[i],1+r.length);if(!n)return null;r.push(_e(n.type))}e.error("Expected arguments of type ".concat(n,", but found (").concat(r.join(", "),") instead."))}return null}static register(t,e){Qe.definitions=e;for(const n in e)t[n]=Qe}}var tn=Qe;class en{constructor(t,e,n){this.type=me,this.locale=n,this.caseSensitive=t,this.diacriticSensitive=e}static parse(t,e){if(2!==t.length)return e.error("Expected one argument.");const n=t[1];if("object"!=typeof n||Array.isArray(n))return e.error("Collator options argument must be an object.");const r=e.parse(void 0!==n["case-sensitive"]&&n["case-sensitive"],1,he);if(!r)return null;const i=e.parse(void 0!==n["diacritic-sensitive"]&&n["diacritic-sensitive"],1,he);if(!i)return null;let o=null;return n.locale&&(o=e.parse(n.locale,1,ue),!o)?null:new en(r,i,o)}evaluate(t){return new Oe(this.caseSensitive.evaluate(t),this.diacriticSensitive.evaluate(t),this.locale?this.locale.evaluate(t):null)}eachChild(t){t(this.caseSensitive),t(this.diacriticSensitive),this.locale&&t(this.locale)}outputDefined(){return!1}serialize(){const t={};return t["case-sensitive"]=this.caseSensitive.serialize(),t["diacritic-sensitive"]=this.diacriticSensitive.serialize(),this.locale&&(t.locale=this.locale.serialize()),["collator",t]}}const nn=8192;function rn(t,e){t[0]=Math.min(t[0],e[0]),t[1]=Math.min(t[1],e[1]),t[2]=Math.max(t[2],e[0]),t[3]=Math.max(t[3],e[1])}function on(t,e){return!(t[0]<=e[0]||t[2]>=e[2]||t[1]<=e[1]||t[3]>=e[3])}function an(t,e){const n=(180+t[0])/360,r=(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+t[1]*Math.PI/360)))/360,i=Math.pow(2,e.z);return[Math.round(n*i*nn),Math.round(r*i*nn)]}function sn(t,e,n){const r=t[0]-e[0],i=t[1]-e[1],o=t[0]-n[0],a=t[1]-n[1];return r*a-o*i==0&&r*o<=0&&i*a<=0}function ln(t,e){let n=!1;for(let a=0,s=e.length;a<s;a++){const s=e[a];for(let e=0,a=s.length;e<a-1;e++){if(sn(t,s[e],s[e+1]))return!1;(i=s[e])[1]>(r=t)[1]!=(o=s[e+1])[1]>r[1]&&r[0]<(o[0]-i[0])*(r[1]-i[1])/(o[1]-i[1])+i[0]&&(n=!n)}}var r,i,o;return n}function cn(t,e){for(let n=0;n<e.length;n++)if(ln(t,e[n]))return!0;return!1}function un(t,e,n,r){const i=r[0]-n[0],o=r[1]-n[1],a=(t[0]-n[0])*o-i*(t[1]-n[1]),s=(e[0]-n[0])*o-i*(e[1]-n[1]);return a>0&&s<0||a<0&&s>0}function hn(t,e,n){for(const c of n)for(let n=0;n<c.length-1;++n)if(0!=(s=[(a=c[n+1])[0]-(o=c[n])[0],a[1]-o[1]])[0]*(l=[(i=e)[0]-(r=t)[0],i[1]-r[1]])[1]-s[1]*l[0]&&un(r,i,o,a)&&un(o,a,r,i))return!0;var r,i,o,a,s,l;return!1}function dn(t,e){for(let n=0;n<t.length;++n)if(!ln(t[n],e))return!1;for(let n=0;n<t.length-1;++n)if(hn(t[n],t[n+1],e))return!1;return!0}function fn(t,e){for(let n=0;n<e.length;n++)if(dn(t,e[n]))return!0;return!1}function pn(t,e,n){const r=[];for(let i=0;i<t.length;i++){const o=[];for(let r=0;r<t[i].length;r++){const a=an(t[i][r],n);rn(e,a),o.push(a)}r.push(o)}return r}function mn(t,e,n){const r=[];for(let i=0;i<t.length;i++){const o=pn(t[i],e,n);r.push(o)}return r}function gn(t,e,n,r){if(t[0]<n[0]||t[0]>n[2]){const e=.5*r;let i=t[0]-n[0]>e?-r:n[0]-t[0]>e?r:0;0===i&&(i=t[0]-n[2]>e?-r:n[2]-t[0]>e?r:0),t[0]+=i}rn(e,t)}function yn(t,e,n,r){const i=Math.pow(2,r.z)*nn,o=[r.x*nn,r.y*nn],a=[];if(!t)return a;for(const s of t)for(const t of s){const r=[t.x+o[0],t.y+o[1]];gn(r,e,n,i),a.push(r)}return a}function vn(t,e,n,r){const i=Math.pow(2,r.z)*nn,o=[r.x*nn,r.y*nn],a=[];if(!t)return a;for(const l of t){const t=[];for(const n of l){const r=[n.x+o[0],n.y+o[1]];rn(e,r),t.push(r)}a.push(t)}if(e[2]-e[0]<=i/2){(s=e)[0]=s[1]=1/0,s[2]=s[3]=-1/0;for(const t of a)for(const r of t)gn(r,e,n,i)}var s;return a}class _n{constructor(t,e){this.type=he,this.geojson=t,this.geometries=e}static parse(t,e){if(2!==t.length)return e.error("'within' expression requires exactly one argument, but found ".concat(t.length-1," instead."));if(De(t[1])){const e=t[1];if("FeatureCollection"===e.type)for(let t=0;t<e.features.length;++t){const n=e.features[t].geometry.type;if("Polygon"===n||"MultiPolygon"===n)return new _n(e,e.features[t].geometry)}else if("Feature"===e.type){const t=e.geometry.type;if("Polygon"===t||"MultiPolygon"===t)return new _n(e,e.geometry)}else if("Polygon"===e.type||"MultiPolygon"===e.type)return new _n(e,e)}return e.error("'within' expression requires valid geojson object that contains polygon geometry type.")}evaluate(t){if(null!=t.geometry()&&null!=t.canonicalID()){if("Point"===t.geometryType())return function(t,e){const n=[1/0,1/0,-1/0,-1/0],r=[1/0,1/0,-1/0,-1/0],i=t.canonicalID();if(!i)return!1;if("Polygon"===e.type){const o=pn(e.coordinates,r,i),a=yn(t.geometry(),n,r,i);if(!on(n,r))return!1;for(const t of a)if(!ln(t,o))return!1}if("MultiPolygon"===e.type){const o=mn(e.coordinates,r,i),a=yn(t.geometry(),n,r,i);if(!on(n,r))return!1;for(const t of a)if(!cn(t,o))return!1}return!0}(t,this.geometries);if("LineString"===t.geometryType())return function(t,e){const n=[1/0,1/0,-1/0,-1/0],r=[1/0,1/0,-1/0,-1/0],i=t.canonicalID();if(!i)return!1;if("Polygon"===e.type){const o=pn(e.coordinates,r,i),a=vn(t.geometry(),n,r,i);if(!on(n,r))return!1;for(const t of a)if(!dn(t,o))return!1}if("MultiPolygon"===e.type){const o=mn(e.coordinates,r,i),a=vn(t.geometry(),n,r,i);if(!on(n,r))return!1;for(const t of a)if(!fn(t,o))return!1}return!0}(t,this.geometries)}return!1}eachChild(){}outputDefined(){return!0}serialize(){return["within",this.geojson]}}var bn=_n;function xn(t){if(t instanceof tn){if("get"===t.name&&1===t.args.length)return!1;if("feature-state"===t.name)return!1;if("has"===t.name&&1===t.args.length)return!1;if("properties"===t.name||"geometry-type"===t.name||"id"===t.name)return!1;if(/^filter-/.test(t.name))return!1}if(t instanceof bn)return!1;let e=!0;return t.eachChild((t=>{e&&!xn(t)&&(e=!1)})),e}function wn(t){if(t instanceof tn&&"feature-state"===t.name)return!1;let e=!0;return t.eachChild((t=>{e&&!wn(t)&&(e=!1)})),e}function Sn(t,e){if(t instanceof tn&&e.indexOf(t.name)>=0)return!1;let n=!0;return t.eachChild((t=>{n&&!Sn(t,e)&&(n=!1)})),n}class En{constructor(t,e){this.type=e.type,this.name=t,this.boundExpression=e}static parse(t,e){if(2!==t.length||"string"!=typeof t[1])return e.error("'var' expression requires exactly one string literal argument.");const n=t[1];return e.scope.has(n)?new En(n,e.scope.get(n)):e.error('Unknown variable "'.concat(n,'". Make sure "').concat(n,'" has been bound in an enclosing "let" expression before using it.'),1)}evaluate(t){return this.boundExpression.evaluate(t)}eachChild(){}outputDefined(){return!1}serialize(){return["var",this.name]}}var Tn=En;class Mn{constructor(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2?arguments[2]:void 0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:new se,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[];this.registry=t,this.path=e,this.key=e.map((t=>"[".concat(t,"]"))).join(""),this.scope=r,this.errors=i,this.expectedType=n}parse(t,e,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};return e?this.concat(e,n,r)._parse(t,i):this._parse(t,i)}_parse(t,e){function n(t,e,n){return"assert"===n?new qe(e,[t]):"coerce"===n?new Ke(e,[t]):t}if(null!==t&&"string"!=typeof t&&"boolean"!=typeof t&&"number"!=typeof t||(t=["literal",t]),Array.isArray(t)){if(0===t.length)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');const r=t[0];if("string"!=typeof r)return this.error("Expression name must be a string, but found ".concat(typeof r,' instead. If you wanted a literal array, use ["literal", [...]].'),0),null;const i=this.registry[r];if(i){let r=i.parse(t,this);if(!r)return null;if(this.expectedType){const t=this.expectedType,i=r.type;if("string"!==t.kind&&"number"!==t.kind&&"boolean"!==t.kind&&"object"!==t.kind&&"array"!==t.kind||"value"!==i.kind)if("color"!==t.kind&&"formatted"!==t.kind&&"resolvedImage"!==t.kind||"value"!==i.kind&&"string"!==i.kind){if(this.checkSubtype(t,i))return null}else r=n(r,t,e.typeAnnotation||"coerce");else r=n(r,t,e.typeAnnotation||"assert")}if(!(r instanceof Ue)&&"resolvedImage"!==r.type.kind&&Cn(r)){const e=new Je;try{r=new Ue(r.type,r.evaluate(e))}catch(t){return this.error(t.message),null}}return r}return this.error('Unknown expression "'.concat(r,'". If you wanted a literal array, use ["literal", [...]].'),0)}return this.error(void 0===t?"'undefined' value invalid. Use null instead.":"object"==typeof t?'Bare objects invalid. Use ["literal", {...}] instead.':"Expected an array, but found ".concat(typeof t," instead."))}concat(t,e,n){const r="number"==typeof t?this.path.concat(t):this.path,i=n?this.scope.concat(n):this.scope;return new Mn(this.registry,r,e||null,i,this.errors)}error(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];const i="".concat(this.key).concat(n.map((t=>"[".concat(t,"]"))).join(""));this.errors.push(new oe(i,t))}checkSubtype(t,e){const n=xe(t,e);return n&&this.error(n),n}}var An=Mn;function Cn(t){if(t instanceof Tn)return Cn(t.boundExpression);if(t instanceof tn&&"error"===t.name)return!1;if(t instanceof en)return!1;if(t instanceof bn)return!1;const e=t instanceof Ke||t instanceof qe;let n=!0;return t.eachChild((t=>{n=e?n&&Cn(t):n&&t instanceof Ue})),!!n&&xn(t)&&Sn(t,["zoom","heatmap-density","line-progress","sky-radial-progress","accumulated","is-supported-script","pitch","distance-from-center"])}function Pn(t,e){const n=t.length-1;let r,i,o=0,a=n,s=0;for(;o<=a;)if(s=Math.floor((o+a)/2),r=t[s],i=t[s+1],r<=e){if(s===n||e<i)return s;o=s+1}else{if(!(r>e))throw new Ve("Input is not a number.");a=s-1}return 0}class kn{constructor(t,e,n){this.type=t,this.input=e,this.labels=[],this.outputs=[];for(const[r,i]of n)this.labels.push(r),this.outputs.push(i)}static parse(t,e){if(t.length-1<4)return e.error("Expected at least 4 arguments, but found only ".concat(t.length-1,"."));if((t.length-1)%2!=0)return e.error("Expected an even number of arguments.");const n=e.parse(t[1],1,ce);if(!n)return null;const r=[];let i=null;e.expectedType&&"value"!==e.expectedType.kind&&(i=e.expectedType);for(let o=1;o<t.length;o+=2){const n=1===o?-1/0:t[o],a=t[o+1],s=o,l=o+1;if("number"!=typeof n)return e.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',s);if(r.length&&r[r.length-1][0]>=n)return e.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',s);const c=e.parse(a,l,i);if(!c)return null;i=i||c.type,r.push([n,c])}return new kn(i,n,r)}evaluate(t){const e=this.labels,n=this.outputs;if(1===e.length)return n[0].evaluate(t);const r=this.input.evaluate(t);if(r<=e[0])return n[0].evaluate(t);const i=e.length;return r>=e[i-1]?n[i-1].evaluate(t):n[Pn(e,r)].evaluate(t)}eachChild(t){t(this.input);for(const e of this.outputs)t(e)}outputDefined(){return this.outputs.every((t=>t.outputDefined()))}serialize(){const t=["step",this.input.serialize()];for(let e=0;e<this.labels.length;e++)e>0&&t.push(this.labels[e]),t.push(this.outputs[e].serialize());return t}}var In=kn;function On(t,e,n){return t*(1-n)+e*n}var Ln=Object.freeze({__proto__:null,array:function(t,e,n){return t.map(((t,r)=>On(t,e[r],n)))},color:function(t,e,n){return new Ie(On(t.r,e.r,n),On(t.g,e.g,n),On(t.b,e.b,n),On(t.a,e.a,n))},number:On});const jn=.95047,zn=1.08883,Rn=4/29,Dn=6/29,Bn=3*Dn*Dn,Fn=Dn*Dn*Dn,Nn=Math.PI/180,Un=180/Math.PI;function Vn(t){return t>Fn?Math.pow(t,1/3):t/Bn+Rn}function Wn(t){return t>Dn?t*t*t:Bn*(t-Rn)}function Gn(t){return 255*(t<=.0031308?12.92*t:1.055*Math.pow(t,1/2.4)-.055)}function qn(t){return(t/=255)<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4)}function Hn(t){const e=qn(t.r),n=qn(t.g),r=qn(t.b),i=Vn((.4124564*e+.3575761*n+.1804375*r)/jn),o=Vn((.2126729*e+.7151522*n+.072175*r)/1);return{l:116*o-16,a:500*(i-o),b:200*(o-Vn((.0193339*e+.119192*n+.9503041*r)/zn)),alpha:t.a}}function Zn(t){let e=(t.l+16)/116,n=isNaN(t.a)?e:e+t.a/500,r=isNaN(t.b)?e:e-t.b/200;return e=1*Wn(e),n=jn*Wn(n),r=zn*Wn(r),new Ie(Gn(3.2404542*n-1.5371385*e-.4985314*r),Gn(-.969266*n+1.8760108*e+.041556*r),Gn(.0556434*n-.2040259*e+1.0572252*r),t.alpha)}function Xn(t,e,n){const r=e-t;return t+n*(r>180||r<-180?r-360*Math.round(r/360):r)}const Yn={forward:Hn,reverse:Zn,interpolate:function(t,e,n){return{l:On(t.l,e.l,n),a:On(t.a,e.a,n),b:On(t.b,e.b,n),alpha:On(t.alpha,e.alpha,n)}}},Kn={forward:function(t){const{l:e,a:n,b:r}=Hn(t),i=Math.atan2(r,n)*Un;return{h:i<0?i+360:i,c:Math.sqrt(n*n+r*r),l:e,alpha:t.a}},reverse:function(t){const e=t.h*Nn,n=t.c;return Zn({l:t.l,a:Math.cos(e)*n,b:Math.sin(e)*n,alpha:t.alpha})},interpolate:function(t,e,n){return{h:Xn(t.h,e.h,n),c:On(t.c,e.c,n),l:On(t.l,e.l,n),alpha:On(t.alpha,e.alpha,n)}}};var $n=Object.freeze({__proto__:null,hcl:Kn,lab:Yn});class Jn{constructor(t,e,n,r,i){this.type=t,this.operator=e,this.interpolation=n,this.input=r,this.labels=[],this.outputs=[];for(const[o,a]of i)this.labels.push(o),this.outputs.push(a)}static interpolationFactor(t,e,n,r){let i=0;if("exponential"===t.name)i=Qn(e,t.base,n,r);else if("linear"===t.name)i=Qn(e,1,n,r);else if("cubic-bezier"===t.name){const o=t.controlPoints;i=new m(o[0],o[1],o[2],o[3]).solve(Qn(e,1,n,r))}return i}static parse(t,e){let[n,r,i,...o]=t;if(!Array.isArray(r)||0===r.length)return e.error("Expected an interpolation type expression.",1);if("linear"===r[0])r={name:"linear"};else if("exponential"===r[0]){const t=r[1];if("number"!=typeof t)return e.error("Exponential interpolation requires a numeric base.",1,1);r={name:"exponential",base:t}}else{if("cubic-bezier"!==r[0])return e.error("Unknown interpolation type ".concat(String(r[0])),1,0);{const t=r.slice(1);if(4!==t.length||t.some((t=>"number"!=typeof t||t<0||t>1)))return e.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);r={name:"cubic-bezier",controlPoints:t}}}if(t.length-1<4)return e.error("Expected at least 4 arguments, but found only ".concat(t.length-1,"."));if((t.length-1)%2!=0)return e.error("Expected an even number of arguments.");if(i=e.parse(i,2,ce),!i)return null;const a=[];let s=null;"interpolate-hcl"===n||"interpolate-lab"===n?s=de:e.expectedType&&"value"!==e.expectedType.kind&&(s=e.expectedType);for(let l=0;l<o.length;l+=2){const t=o[l],n=o[l+1],r=l+3,i=l+4;if("number"!=typeof t)return e.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',r);if(a.length&&a[a.length-1][0]>=t)return e.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',r);const c=e.parse(n,i,s);if(!c)return null;s=s||c.type,a.push([t,c])}return"number"===s.kind||"color"===s.kind||"array"===s.kind&&"number"===s.itemType.kind&&"number"==typeof s.N?new Jn(s,n,r,i,a):e.error("Type ".concat(_e(s)," is not interpolatable."))}evaluate(t){const e=this.labels,n=this.outputs;if(1===e.length)return n[0].evaluate(t);const r=this.input.evaluate(t);if(r<=e[0])return n[0].evaluate(t);const i=e.length;if(r>=e[i-1])return n[i-1].evaluate(t);const o=Pn(e,r),a=Jn.interpolationFactor(this.interpolation,r,e[o],e[o+1]),s=n[o].evaluate(t),l=n[o+1].evaluate(t);return"interpolate"===this.operator?Ln[this.type.kind.toLowerCase()](s,l,a):"interpolate-hcl"===this.operator?Kn.reverse(Kn.interpolate(Kn.forward(s),Kn.forward(l),a)):Yn.reverse(Yn.interpolate(Yn.forward(s),Yn.forward(l),a))}eachChild(t){t(this.input);for(const e of this.outputs)t(e)}outputDefined(){return this.outputs.every((t=>t.outputDefined()))}serialize(){let t;t="linear"===this.interpolation.name?["linear"]:"exponential"===this.interpolation.name?1===this.interpolation.base?["linear"]:["exponential",this.interpolation.base]:["cubic-bezier"].concat(this.interpolation.controlPoints);const e=[this.operator,t,this.input.serialize()];for(let n=0;n<this.labels.length;n++)e.push(this.labels[n],this.outputs[n].serialize());return e}}function Qn(t,e,n,r){const i=r-n,o=t-n;return 0===i?0:1===e?o/i:(Math.pow(e,o)-1)/(Math.pow(e,i)-1)}var tr=Jn;class er{constructor(t,e){this.type=t,this.args=e}static parse(t,e){if(t.length<2)return e.error("Expectected at least one argument.");let n=null;const r=e.expectedType;r&&"value"!==r.kind&&(n=r);const i=[];for(const a of t.slice(1)){const t=e.parse(a,1+i.length,n,void 0,{typeAnnotation:"omit"});if(!t)return null;n=n||t.type,i.push(t)}const o=r&&i.some((t=>xe(r,t.type)));return new er(o?pe:n,i)}evaluate(t){let e,n=null,r=0;for(const i of this.args){if(r++,n=i.evaluate(t),n&&n instanceof ze&&!n.available&&(e||(e=n),n=null,r===this.args.length))return e;if(null!==n)break}return n}eachChild(t){this.args.forEach(t)}outputDefined(){return this.args.every((t=>t.outputDefined()))}serialize(){const t=["coalesce"];return this.eachChild((e=>{t.push(e.serialize())})),t}}var nr=er;class rr{constructor(t,e){this.type=e.type,this.bindings=[].concat(t),this.result=e}evaluate(t){return this.result.evaluate(t)}eachChild(t){for(const e of this.bindings)t(e[1]);t(this.result)}static parse(t,e){if(t.length<4)return e.error("Expected at least 3 arguments, but found ".concat(t.length-1," instead."));const n=[];for(let i=1;i<t.length-1;i+=2){const r=t[i];if("string"!=typeof r)return e.error("Expected string, but found ".concat(typeof r," instead."),i);if(/[^a-zA-Z0-9_]/.test(r))return e.error("Variable names must contain only alphanumeric characters or '_'.",i);const o=e.parse(t[i+1],i+1);if(!o)return null;n.push([r,o])}const r=e.parse(t[t.length-1],t.length-1,e.expectedType,n);return r?new rr(n,r):null}outputDefined(){return this.result.outputDefined()}serialize(){const t=["let"];for(const[e,n]of this.bindings)t.push(e,n.serialize());return t.push(this.result.serialize()),t}}var ir=rr;class or{constructor(t,e,n){this.type=t,this.index=e,this.input=n}static parse(t,e){if(3!==t.length)return e.error("Expected 2 arguments, but found ".concat(t.length-1," instead."));const n=e.parse(t[1],1,ce),r=e.parse(t[2],2,ve(e.expectedType||pe));return n&&r?new or(r.type.itemType,n,r):null}evaluate(t){const e=this.index.evaluate(t),n=this.input.evaluate(t);if(e<0)throw new Ve("Array index out of bounds: ".concat(e," < 0."));if(e>=n.length)throw new Ve("Array index out of bounds: ".concat(e," > ").concat(n.length-1,"."));if(e!==Math.floor(e))throw new Ve("Array index must be an integer, but found ".concat(e," instead."));return n[e]}eachChild(t){t(this.index),t(this.input)}outputDefined(){return!1}serialize(){return["at",this.index.serialize(),this.input.serialize()]}}var ar=or;class sr{constructor(t,e){this.type=he,this.needle=t,this.haystack=e}static parse(t,e){if(3!==t.length)return e.error("Expected 2 arguments, but found ".concat(t.length-1," instead."));const n=e.parse(t[1],1,pe),r=e.parse(t[2],2,pe);return n&&r?we(n.type,[he,ue,ce,le,pe])?new sr(n,r):e.error("Expected first argument to be of type boolean, string, number or null, but found ".concat(_e(n.type)," instead")):null}evaluate(t){const e=this.needle.evaluate(t),n=this.haystack.evaluate(t);if(null==n)return!1;if(!Se(e,["boolean","string","number","null"]))throw new Ve("Expected first argument to be of type boolean, string, number or null, but found ".concat(_e(Be(e))," instead."));if(!Se(n,["string","array"]))throw new Ve("Expected second argument to be of type array or string, but found ".concat(_e(Be(n))," instead."));return n.indexOf(e)>=0}eachChild(t){t(this.needle),t(this.haystack)}outputDefined(){return!0}serialize(){return["in",this.needle.serialize(),this.haystack.serialize()]}}var lr=sr;class cr{constructor(t,e,n){this.type=ce,this.needle=t,this.haystack=e,this.fromIndex=n}static parse(t,e){if(t.length<=2||t.length>=5)return e.error("Expected 3 or 4 arguments, but found ".concat(t.length-1," instead."));const n=e.parse(t[1],1,pe),r=e.parse(t[2],2,pe);if(!n||!r)return null;if(!we(n.type,[he,ue,ce,le,pe]))return e.error("Expected first argument to be of type boolean, string, number or null, but found ".concat(_e(n.type)," instead"));if(4===t.length){const i=e.parse(t[3],3,ce);return i?new cr(n,r,i):null}return new cr(n,r)}evaluate(t){const e=this.needle.evaluate(t),n=this.haystack.evaluate(t);if(!Se(e,["boolean","string","number","null"]))throw new Ve("Expected first argument to be of type boolean, string, number or null, but found ".concat(_e(Be(e))," instead."));if(!Se(n,["string","array"]))throw new Ve("Expected second argument to be of type array or string, but found ".concat(_e(Be(n))," instead."));if(this.fromIndex){const r=this.fromIndex.evaluate(t);return n.indexOf(e,r)}return n.indexOf(e)}eachChild(t){t(this.needle),t(this.haystack),this.fromIndex&&t(this.fromIndex)}outputDefined(){return!1}serialize(){if(null!=this.fromIndex&&void 0!==this.fromIndex){const t=this.fromIndex.serialize();return["index-of",this.needle.serialize(),this.haystack.serialize(),t]}return["index-of",this.needle.serialize(),this.haystack.serialize()]}}var ur=cr;class hr{constructor(t,e,n,r,i,o){this.inputType=t,this.type=e,this.input=n,this.cases=r,this.outputs=i,this.otherwise=o}static parse(t,e){if(t.length<5)return e.error("Expected at least 4 arguments, but found only ".concat(t.length-1,"."));if(t.length%2!=1)return e.error("Expected an even number of arguments.");let n,r;e.expectedType&&"value"!==e.expectedType.kind&&(r=e.expectedType);const i={},o=[];for(let l=2;l<t.length-1;l+=2){let a=t[l];const s=t[l+1];Array.isArray(a)||(a=[a]);const c=e.concat(l);if(0===a.length)return c.error("Expected at least one branch label.");for(const t of a){if("number"!=typeof t&&"string"!=typeof t)return c.error("Branch labels must be numbers or strings.");if("number"==typeof t&&Math.abs(t)>Number.MAX_SAFE_INTEGER)return c.error("Branch labels must be integers no larger than ".concat(Number.MAX_SAFE_INTEGER,"."));if("number"==typeof t&&Math.floor(t)!==t)return c.error("Numeric branch labels must be integer values.");if(n){if(c.checkSubtype(n,Be(t)))return null}else n=Be(t);if(void 0!==i[String(t)])return c.error("Branch labels must be unique.");i[String(t)]=o.length}const u=e.parse(s,l,r);if(!u)return null;r=r||u.type,o.push(u)}const a=e.parse(t[1],1,pe);if(!a)return null;const s=e.parse(t[t.length-1],t.length-1,r);return s?"value"!==a.type.kind&&e.concat(1).checkSubtype(n,a.type)?null:new hr(n,r,a,i,o,s):null}evaluate(t){const e=this.input.evaluate(t);return(Be(e)===this.inputType&&this.outputs[this.cases[e]]||this.otherwise).evaluate(t)}eachChild(t){t(this.input),this.outputs.forEach(t),t(this.otherwise)}outputDefined(){return this.outputs.every((t=>t.outputDefined()))&&this.otherwise.outputDefined()}serialize(){const t=["match",this.input.serialize()],e=Object.keys(this.cases).sort(),n=[],r={};for(const o of e){const t=r[this.cases[o]];void 0===t?(r[this.cases[o]]=n.length,n.push([this.cases[o],[o]])):n[t][1].push(o)}const i=t=>"number"===this.inputType.kind?Number(t):t;for(const[o,a]of n)t.push(1===a.length?i(a[0]):a.map(i)),t.push(this.outputs[o].serialize());return t.push(this.otherwise.serialize()),t}}var dr=hr;class fr{constructor(t,e,n){this.type=t,this.branches=e,this.otherwise=n}static parse(t,e){if(t.length<4)return e.error("Expected at least 3 arguments, but found only ".concat(t.length-1,"."));if(t.length%2!=0)return e.error("Expected an odd number of arguments.");let n;e.expectedType&&"value"!==e.expectedType.kind&&(n=e.expectedType);const r=[];for(let o=1;o<t.length-1;o+=2){const i=e.parse(t[o],o,he);if(!i)return null;const a=e.parse(t[o+1],o+1,n);if(!a)return null;r.push([i,a]),n=n||a.type}const i=e.parse(t[t.length-1],t.length-1,n);return i?new fr(n,r,i):null}evaluate(t){for(const[e,n]of this.branches)if(e.evaluate(t))return n.evaluate(t);return this.otherwise.evaluate(t)}eachChild(t){for(const[e,n]of this.branches)t(e),t(n);t(this.otherwise)}outputDefined(){return this.branches.every((t=>{let[e,n]=t;return n.outputDefined()}))&&this.otherwise.outputDefined()}serialize(){const t=["case"];return this.eachChild((e=>{t.push(e.serialize())})),t}}var pr=fr;class mr{constructor(t,e,n,r){this.type=t,this.input=e,this.beginIndex=n,this.endIndex=r}static parse(t,e){if(t.length<=2||t.length>=5)return e.error("Expected 3 or 4 arguments, but found ".concat(t.length-1," instead."));const n=e.parse(t[1],1,pe),r=e.parse(t[2],2,ce);if(!n||!r)return null;if(!we(n.type,[ve(pe),ue,pe]))return e.error("Expected first argument to be of type array or string, but found ".concat(_e(n.type)," instead"));if(4===t.length){const i=e.parse(t[3],3,ce);return i?new mr(n.type,n,r,i):null}return new mr(n.type,n,r)}evaluate(t){const e=this.input.evaluate(t),n=this.beginIndex.evaluate(t);if(!Se(e,["string","array"]))throw new Ve("Expected first argument to be of type array or string, but found ".concat(_e(Be(e))," instead."));if(this.endIndex){const r=this.endIndex.evaluate(t);return e.slice(n,r)}return e.slice(n)}eachChild(t){t(this.input),t(this.beginIndex),this.endIndex&&t(this.endIndex)}outputDefined(){return!1}serialize(){if(null!=this.endIndex&&void 0!==this.endIndex){const t=this.endIndex.serialize();return["slice",this.input.serialize(),this.beginIndex.serialize(),t]}return["slice",this.input.serialize(),this.beginIndex.serialize()]}}var gr=mr;function yr(t,e){return"=="===t||"!="===t?"boolean"===e.kind||"string"===e.kind||"number"===e.kind||"null"===e.kind||"value"===e.kind:"string"===e.kind||"number"===e.kind||"value"===e.kind}function vr(t,e,n,r){return 0===r.compare(e,n)}function _r(t,e,n){const r="=="!==t&&"!="!==t;return class i{constructor(t,e,n){this.type=he,this.lhs=t,this.rhs=e,this.collator=n,this.hasUntypedArgument="value"===t.type.kind||"value"===e.type.kind}static parse(t,e){if(3!==t.length&&4!==t.length)return e.error("Expected two or three arguments.");const n=t[0];let o=e.parse(t[1],1,pe);if(!o)return null;if(!yr(n,o.type))return e.concat(1).error('"'.concat(n,"\" comparisons are not supported for type '").concat(_e(o.type),"'."));let a=e.parse(t[2],2,pe);if(!a)return null;if(!yr(n,a.type))return e.concat(2).error('"'.concat(n,"\" comparisons are not supported for type '").concat(_e(a.type),"'."));if(o.type.kind!==a.type.kind&&"value"!==o.type.kind&&"value"!==a.type.kind)return e.error("Cannot compare types '".concat(_e(o.type),"' and '").concat(_e(a.type),"'."));r&&("value"===o.type.kind&&"value"!==a.type.kind?o=new qe(a.type,[o]):"value"!==o.type.kind&&"value"===a.type.kind&&(a=new qe(o.type,[a])));let s=null;if(4===t.length){if("string"!==o.type.kind&&"string"!==a.type.kind&&"value"!==o.type.kind&&"value"!==a.type.kind)return e.error("Cannot use collator to compare non-string types.");if(s=e.parse(t[3],3,me),!s)return null}return new i(o,a,s)}evaluate(i){const o=this.lhs.evaluate(i),a=this.rhs.evaluate(i);if(r&&this.hasUntypedArgument){const e=Be(o),n=Be(a);if(e.kind!==n.kind||"string"!==e.kind&&"number"!==e.kind)throw new Ve('Expected arguments for "'.concat(t,'" to be (string, string) or (number, number), but found (').concat(e.kind,", ").concat(n.kind,") instead."))}if(this.collator&&!r&&this.hasUntypedArgument){const t=Be(o),n=Be(a);if("string"!==t.kind||"string"!==n.kind)return e(i,o,a)}return this.collator?n(i,o,a,this.collator.evaluate(i)):e(i,o,a)}eachChild(t){t(this.lhs),t(this.rhs),this.collator&&t(this.collator)}outputDefined(){return!0}serialize(){const e=[t];return this.eachChild((t=>{e.push(t.serialize())})),e}}}const br=_r("==",(function(t,e,n){return e===n}),vr),xr=_r("!=",(function(t,e,n){return e!==n}),(function(t,e,n,r){return!vr(0,e,n,r)})),wr=_r("<",(function(t,e,n){return e<n}),(function(t,e,n,r){return r.compare(e,n)<0})),Sr=_r(">",(function(t,e,n){return e>n}),(function(t,e,n,r){return r.compare(e,n)>0})),Er=_r("<=",(function(t,e,n){return e<=n}),(function(t,e,n,r){return r.compare(e,n)<=0})),Tr=_r(">=",(function(t,e,n){return e>=n}),(function(t,e,n,r){return r.compare(e,n)>=0}));class Mr{constructor(t,e,n,r,i,o){this.type=ue,this.number=t,this.locale=e,this.currency=n,this.unit=r,this.minFractionDigits=i,this.maxFractionDigits=o}static parse(t,e){if(3!==t.length)return e.error("Expected two arguments.");const n=e.parse(t[1],1,ce);if(!n)return null;const r=t[2];if("object"!=typeof r||Array.isArray(r))return e.error("NumberFormat options argument must be an object.");let i=null;if(r.locale&&(i=e.parse(r.locale,1,ue),!i))return null;let o=null;if(r.currency&&(o=e.parse(r.currency,1,ue),!o))return null;let a=null;if(r.unit&&(a=e.parse(r.unit,1,ue),!a))return null;let s=null;if(r["min-fraction-digits"]&&(s=e.parse(r["min-fraction-digits"],1,ce),!s))return null;let l=null;return r["max-fraction-digits"]&&(l=e.parse(r["max-fraction-digits"],1,ce),!l)?null:new Mr(n,i,o,a,s,l)}evaluate(t){return new Intl.NumberFormat(this.locale?this.locale.evaluate(t):[],{style:(this.currency?"currency":this.unit&&"unit")||"decimal",currency:this.currency?this.currency.evaluate(t):void 0,unit:this.unit?this.unit.evaluate(t):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(t):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(t):void 0}).format(this.number.evaluate(t))}eachChild(t){t(this.number),this.locale&&t(this.locale),this.currency&&t(this.currency),this.unit&&t(this.unit),this.minFractionDigits&&t(this.minFractionDigits),this.maxFractionDigits&&t(this.maxFractionDigits)}outputDefined(){return!1}serialize(){const t={};return this.locale&&(t.locale=this.locale.serialize()),this.currency&&(t.currency=this.currency.serialize()),this.unit&&(t.unit=this.unit.serialize()),this.minFractionDigits&&(t["min-fraction-digits"]=this.minFractionDigits.serialize()),this.maxFractionDigits&&(t["max-fraction-digits"]=this.maxFractionDigits.serialize()),["number-format",this.number.serialize(),t]}}class Ar{constructor(t){this.type=ce,this.input=t}static parse(t,e){if(2!==t.length)return e.error("Expected 1 argument, but found ".concat(t.length-1," instead."));const n=e.parse(t[1],1);return n?"array"!==n.type.kind&&"string"!==n.type.kind&&"value"!==n.type.kind?e.error("Expected argument of type string or array, but found ".concat(_e(n.type)," instead.")):new Ar(n):null}evaluate(t){const e=this.input.evaluate(t);if("string"==typeof e)return e.length;if(Array.isArray(e))return e.length;throw new Ve("Expected value to be of type string or array, but found ".concat(_e(Be(e))," instead."))}eachChild(t){t(this.input)}outputDefined(){return!1}serialize(){const t=["length"];return this.eachChild((e=>{t.push(e.serialize())})),t}}const Cr={"==":br,"!=":xr,">":Sr,"<":wr,">=":Tr,"<=":Er,array:qe,at:ar,boolean:qe,case:pr,coalesce:nr,collator:en,format:He,image:Ze,in:lr,"index-of":ur,interpolate:tr,"interpolate-hcl":tr,"interpolate-lab":tr,length:Ar,let:ir,literal:Ue,match:dr,number:qe,"number-format":Mr,object:qe,slice:gr,step:In,string:qe,"to-boolean":Ke,"to-color":Ke,"to-number":Ke,"to-string":Ke,var:Tn,within:bn};function Pr(t,e){let[n,r,i,o]=e;n=n.evaluate(t),r=r.evaluate(t),i=i.evaluate(t);const a=o?o.evaluate(t):1,s=Re(n,r,i,a);if(s)throw new Ve(s);return new Ie(n/255*a,r/255*a,i/255*a,a)}function kr(t,e){return t in e}function Ir(t,e){const n=e[t];return void 0===n?null:n}function Or(t){return{type:t}}tn.register(Cr,{error:[{kind:"error"},[ue],(t,e)=>{let[n]=e;throw new Ve(n.evaluate(t))}],typeof:[ue,[pe],(t,e)=>{let[n]=e;return _e(Be(n.evaluate(t)))}],"to-rgba":[ve(ce,4),[de],(t,e)=>{let[n]=e;return n.evaluate(t).toArray()}],rgb:[de,[ce,ce,ce],Pr],rgba:[de,[ce,ce,ce,ce],Pr],has:{type:he,overloads:[[[ue],(t,e)=>{let[n]=e;return kr(n.evaluate(t),t.properties())}],[[ue,fe],(t,e)=>{let[n,r]=e;return kr(n.evaluate(t),r.evaluate(t))}]]},get:{type:pe,overloads:[[[ue],(t,e)=>{let[n]=e;return Ir(n.evaluate(t),t.properties())}],[[ue,fe],(t,e)=>{let[n,r]=e;return Ir(n.evaluate(t),r.evaluate(t))}]]},"feature-state":[pe,[ue],(t,e)=>{let[n]=e;return Ir(n.evaluate(t),t.featureState||{})}],properties:[fe,[],t=>t.properties()],"geometry-type":[ue,[],t=>t.geometryType()],id:[pe,[],t=>t.id()],zoom:[ce,[],t=>t.globals.zoom],pitch:[ce,[],t=>t.globals.pitch||0],"distance-from-center":[ce,[],t=>t.distanceFromCenter()],"heatmap-density":[ce,[],t=>t.globals.heatmapDensity||0],"line-progress":[ce,[],t=>t.globals.lineProgress||0],"sky-radial-progress":[ce,[],t=>t.globals.skyRadialProgress||0],accumulated:[pe,[],t=>void 0===t.globals.accumulated?null:t.globals.accumulated],"+":[ce,Or(ce),(t,e)=>{let n=0;for(const r of e)n+=r.evaluate(t);return n}],"*":[ce,Or(ce),(t,e)=>{let n=1;for(const r of e)n*=r.evaluate(t);return n}],"-":{type:ce,overloads:[[[ce,ce],(t,e)=>{let[n,r]=e;return n.evaluate(t)-r.evaluate(t)}],[[ce],(t,e)=>{let[n]=e;return-n.evaluate(t)}]]},"/":[ce,[ce,ce],(t,e)=>{let[n,r]=e;return n.evaluate(t)/r.evaluate(t)}],"%":[ce,[ce,ce],(t,e)=>{let[n,r]=e;return n.evaluate(t)%r.evaluate(t)}],ln2:[ce,[],()=>Math.LN2],pi:[ce,[],()=>Math.PI],e:[ce,[],()=>Math.E],"^":[ce,[ce,ce],(t,e)=>{let[n,r]=e;return Math.pow(n.evaluate(t),r.evaluate(t))}],sqrt:[ce,[ce],(t,e)=>{let[n]=e;return Math.sqrt(n.evaluate(t))}],log10:[ce,[ce],(t,e)=>{let[n]=e;return Math.log(n.evaluate(t))/Math.LN10}],ln:[ce,[ce],(t,e)=>{let[n]=e;return Math.log(n.evaluate(t))}],log2:[ce,[ce],(t,e)=>{let[n]=e;return Math.log(n.evaluate(t))/Math.LN2}],sin:[ce,[ce],(t,e)=>{let[n]=e;return Math.sin(n.evaluate(t))}],cos:[ce,[ce],(t,e)=>{let[n]=e;return Math.cos(n.evaluate(t))}],tan:[ce,[ce],(t,e)=>{let[n]=e;return Math.tan(n.evaluate(t))}],asin:[ce,[ce],(t,e)=>{let[n]=e;return Math.asin(n.evaluate(t))}],acos:[ce,[ce],(t,e)=>{let[n]=e;return Math.acos(n.evaluate(t))}],atan:[ce,[ce],(t,e)=>{let[n]=e;return Math.atan(n.evaluate(t))}],min:[ce,Or(ce),(t,e)=>Math.min(...e.map((e=>e.evaluate(t))))],max:[ce,Or(ce),(t,e)=>Math.max(...e.map((e=>e.evaluate(t))))],abs:[ce,[ce],(t,e)=>{let[n]=e;return Math.abs(n.evaluate(t))}],round:[ce,[ce],(t,e)=>{let[n]=e;const r=n.evaluate(t);return r<0?-Math.round(-r):Math.round(r)}],floor:[ce,[ce],(t,e)=>{let[n]=e;return Math.floor(n.evaluate(t))}],ceil:[ce,[ce],(t,e)=>{let[n]=e;return Math.ceil(n.evaluate(t))}],"filter-==":[he,[ue,pe],(t,e)=>{let[n,r]=e;return t.properties()[n.value]===r.value}],"filter-id-==":[he,[pe],(t,e)=>{let[n]=e;return t.id()===n.value}],"filter-type-==":[he,[ue],(t,e)=>{let[n]=e;return t.geometryType()===n.value}],"filter-<":[he,[ue,pe],(t,e)=>{let[n,r]=e;const i=t.properties()[n.value],o=r.value;return typeof i==typeof o&&i<o}],"filter-id-<":[he,[pe],(t,e)=>{let[n]=e;const r=t.id(),i=n.value;return typeof r==typeof i&&r<i}],"filter->":[he,[ue,pe],(t,e)=>{let[n,r]=e;const i=t.properties()[n.value],o=r.value;return typeof i==typeof o&&i>o}],"filter-id->":[he,[pe],(t,e)=>{let[n]=e;const r=t.id(),i=n.value;return typeof r==typeof i&&r>i}],"filter-<=":[he,[ue,pe],(t,e)=>{let[n,r]=e;const i=t.properties()[n.value],o=r.value;return typeof i==typeof o&&i<=o}],"filter-id-<=":[he,[pe],(t,e)=>{let[n]=e;const r=t.id(),i=n.value;return typeof r==typeof i&&r<=i}],"filter->=":[he,[ue,pe],(t,e)=>{let[n,r]=e;const i=t.properties()[n.value],o=r.value;return typeof i==typeof o&&i>=o}],"filter-id->=":[he,[pe],(t,e)=>{let[n]=e;const r=t.id(),i=n.value;return typeof r==typeof i&&r>=i}],"filter-has":[he,[pe],(t,e)=>{let[n]=e;return n.value in t.properties()}],"filter-has-id":[he,[],t=>null!==t.id()&&void 0!==t.id()],"filter-type-in":[he,[ve(ue)],(t,e)=>{let[n]=e;return n.value.indexOf(t.geometryType())>=0}],"filter-id-in":[he,[ve(pe)],(t,e)=>{let[n]=e;return n.value.indexOf(t.id())>=0}],"filter-in-small":[he,[ue,ve(pe)],(t,e)=>{let[n,r]=e;return r.value.indexOf(t.properties()[n.value])>=0}],"filter-in-large":[he,[ue,ve(pe)],(t,e)=>{let[n,r]=e;return function(t,e,n,r){for(;n<=r;){const i=n+r>>1;if(e[i]===t)return!0;e[i]>t?r=i-1:n=i+1}return!1}(t.properties()[n.value],r.value,0,r.value.length-1)}],all:{type:he,overloads:[[[he,he],(t,e)=>{let[n,r]=e;return n.evaluate(t)&&r.evaluate(t)}],[Or(he),(t,e)=>{for(const n of e)if(!n.evaluate(t))return!1;return!0}]]},any:{type:he,overloads:[[[he,he],(t,e)=>{let[n,r]=e;return n.evaluate(t)||r.evaluate(t)}],[Or(he),(t,e)=>{for(const n of e)if(n.evaluate(t))return!0;return!1}]]},"!":[he,[he],(t,e)=>{let[n]=e;return!n.evaluate(t)}],"is-supported-script":[he,[ue],(t,e)=>{let[n]=e;const r=t.globals&&t.globals.isSupportedScript;return!r||r(n.evaluate(t))}],upcase:[ue,[ue],(t,e)=>{let[n]=e;return n.evaluate(t).toUpperCase()}],downcase:[ue,[ue],(t,e)=>{let[n]=e;return n.evaluate(t).toLowerCase()}],concat:[ue,Or(pe),(t,e)=>e.map((e=>Fe(e.evaluate(t)))).join("")],"resolved-locale":[ue,[me],(t,e)=>{let[n]=e;return n.evaluate(t).resolvedLocale()}]});var Lr=Cr;function jr(t){return{result:"success",value:t}}function zr(t){return{result:"error",value:t}}function Rr(t){return"data-driven"===t["property-type"]}function Dr(t){return!!t.expression&&t.expression.parameters.indexOf("zoom")>-1}function Br(t){return!!t.expression&&t.expression.interpolated}function Fr(t){return t instanceof Number?"number":t instanceof String?"string":t instanceof Boolean?"boolean":Array.isArray(t)?"array":null===t?"null":typeof t}function Nr(t){return"object"==typeof t&&null!==t&&!Array.isArray(t)}function Ur(t){return t}function Vr(t,e){const n="color"===e.type,r=t.stops&&"object"==typeof t.stops[0][0],i=r||!(r||void 0!==t.property),o=t.type||(Br(e)?"exponential":"interval");if(n&&((t=ee({},t)).stops&&(t.stops=t.stops.map((t=>[t[0],Ie.parse(t[1])]))),t.default=Ie.parse(t.default?t.default:e.default)),t.colorSpace&&"rgb"!==t.colorSpace&&!$n[t.colorSpace])throw new Error("Unknown color space: ".concat(t.colorSpace));let a,s,l;if("exponential"===o)a=Hr;else if("interval"===o)a=qr;else if("categorical"===o){a=Gr,s=Object.create(null);for(const e of t.stops)s[e[0]]=e[1];l=typeof t.stops[0][0]}else{if("identity"!==o)throw new Error('Unknown function type "'.concat(o,'"'));a=Zr}if(r){const n={},r=[];for(let e=0;e<t.stops.length;e++){const i=t.stops[e],o=i[0].zoom;void 0===n[o]&&(n[o]={zoom:o,type:t.type,property:t.property,default:t.default,stops:[]},r.push(o)),n[o].stops.push([i[0].value,i[1]])}const i=[];for(const t of r)i.push([n[t].zoom,Vr(n[t],e)]);const o={name:"linear"};return{kind:"composite",interpolationType:o,interpolationFactor:tr.interpolationFactor.bind(void 0,o),zoomStops:i.map((t=>t[0])),evaluate:(n,r)=>{let{zoom:o}=n;return Hr({stops:i,base:t.base},e,o).evaluate(o,r)}}}if(i){const n="exponential"===o?{name:"exponential",base:void 0!==t.base?t.base:1}:null;return{kind:"camera",interpolationType:n,interpolationFactor:tr.interpolationFactor.bind(void 0,n),zoomStops:t.stops.map((t=>t[0])),evaluate:n=>{let{zoom:r}=n;return a(t,e,r,s,l)}}}return{kind:"source",evaluate(n,r){const i=r&&r.properties?r.properties[t.property]:void 0;return void 0===i?Wr(t.default,e.default):a(t,e,i,s,l)}}}function Wr(t,e,n){return void 0!==t?t:void 0!==e?e:void 0!==n?n:void 0}function Gr(t,e,n,r,i){return Wr(typeof n===i?r[n]:void 0,t.default,e.default)}function qr(t,e,n){if("number"!==Fr(n))return Wr(t.default,e.default);const r=t.stops.length;if(1===r)return t.stops[0][1];if(n<=t.stops[0][0])return t.stops[0][1];if(n>=t.stops[r-1][0])return t.stops[r-1][1];const i=Pn(t.stops.map((t=>t[0])),n);return t.stops[i][1]}function Hr(t,e,n){const r=void 0!==t.base?t.base:1;if("number"!==Fr(n))return Wr(t.default,e.default);const i=t.stops.length;if(1===i)return t.stops[0][1];if(n<=t.stops[0][0])return t.stops[0][1];if(n>=t.stops[i-1][0])return t.stops[i-1][1];const o=Pn(t.stops.map((t=>t[0])),n),a=function(t,e,n,r){const i=r-n,o=t-n;return 0===i?0:1===e?o/i:(Math.pow(e,o)-1)/(Math.pow(e,i)-1)}(n,r,t.stops[o][0],t.stops[o+1][0]),s=t.stops[o][1],l=t.stops[o+1][1];let c=Ln[e.type]||Ur;if(t.colorSpace&&"rgb"!==t.colorSpace){const e=$n[t.colorSpace];c=(t,n)=>e.reverse(e.interpolate(e.forward(t),e.forward(n),a))}return"function"==typeof s.evaluate?{evaluate(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];const r=s.evaluate.apply(void 0,e),i=l.evaluate.apply(void 0,e);if(void 0!==r&&void 0!==i)return c(r,i,a)}}:c(s,l,a)}function Zr(t,e,n){return"color"===e.type?n=Ie.parse(n):"formatted"===e.type?n=je.fromString(n.toString()):"resolvedImage"===e.type?n=ze.fromString(n.toString()):Fr(n)===e.type||"enum"===e.type&&e.values[n]||(n=void 0),Wr(n,t.default,e.default)}class Xr{constructor(t,e){this.expression=t,this._warningHistory={},this._evaluator=new Je,this._defaultValue=e?function(t){return"color"===t.type&&(Nr(t.default)||Array.isArray(t.default))?new Ie(0,0,0,0):"color"===t.type?Ie.parse(t.default)||null:void 0===t.default?null:t.default}(e):null,this._enumValues=e&&"enum"===e.type?e.values:null}evaluateWithoutErrorHandling(t,e,n,r,i,o,a,s){return this._evaluator.globals=t,this._evaluator.feature=e,this._evaluator.featureState=n,this._evaluator.canonical=r||null,this._evaluator.availableImages=i||null,this._evaluator.formattedSection=o,this._evaluator.featureTileCoord=a||null,this._evaluator.featureDistanceData=s||null,this.expression.evaluate(this._evaluator)}evaluate(t,e,n,r,i,o,a,s){this._evaluator.globals=t,this._evaluator.feature=e||null,this._evaluator.featureState=n||null,this._evaluator.canonical=r||null,this._evaluator.availableImages=i||null,this._evaluator.formattedSection=o||null,this._evaluator.featureTileCoord=a||null,this._evaluator.featureDistanceData=s||null;try{const t=this.expression.evaluate(this._evaluator);if(null==t||"number"==typeof t&&t!=t)return this._defaultValue;if(this._enumValues&&!(t in this._enumValues))throw new Ve("Expected value to be one of ".concat(Object.keys(this._enumValues).map((t=>JSON.stringify(t))).join(", "),", but found ").concat(JSON.stringify(t)," instead."));return t}catch(t){return this._warningHistory[t.message]||(this._warningHistory[t.message]=!0,"undefined"!=typeof console&&console.warn(t.message)),this._defaultValue}}}function Yr(t){return Array.isArray(t)&&t.length>0&&"string"==typeof t[0]&&t[0]in Lr}function Kr(t,e){const n=new An(Lr,[],e?function(t){const e={color:de,string:ue,number:ce,enum:ue,boolean:he,formatted:ge,resolvedImage:ye};return"array"===t.type?ve(e[t.value]||pe,t.length):e[t.type]}(e):void 0),r=n.parse(t,void 0,void 0,void 0,e&&"string"===e.type?{typeAnnotation:"coerce"}:void 0);return r?jr(new Xr(r,e)):zr(n.errors)}class $r{constructor(t,e){this.kind=t,this._styleExpression=e,this.isStateDependent="constant"!==t&&!wn(e.expression)}evaluateWithoutErrorHandling(t,e,n,r,i,o){return this._styleExpression.evaluateWithoutErrorHandling(t,e,n,r,i,o)}evaluate(t,e,n,r,i,o){return this._styleExpression.evaluate(t,e,n,r,i,o)}}class Jr{constructor(t,e,n,r){this.kind=t,this.zoomStops=n,this._styleExpression=e,this.isStateDependent="camera"!==t&&!wn(e.expression),this.interpolationType=r}evaluateWithoutErrorHandling(t,e,n,r,i,o){return this._styleExpression.evaluateWithoutErrorHandling(t,e,n,r,i,o)}evaluate(t,e,n,r,i,o){return this._styleExpression.evaluate(t,e,n,r,i,o)}interpolationFactor(t,e,n){return this.interpolationType?tr.interpolationFactor(this.interpolationType,t,e,n):0}}function Qr(t,e){if("error"===(t=Kr(t,e)).result)return t;const n=t.value.expression,r=xn(n);if(!r&&!Rr(e))return zr([new oe("","data expressions not supported")]);const i=Sn(n,["zoom","pitch","distance-from-center"]);if(!i&&!Dr(e))return zr([new oe("","zoom expressions not supported")]);const o=ei(n);return o||i?o instanceof oe?zr([o]):o instanceof tr&&!Br(e)?zr([new oe("",'"interpolate" expressions cannot be used with this property')]):jr(o?new Jr(r?"camera":"composite",t.value,o.labels,o instanceof tr?o.interpolation:void 0):new $r(r?"constant":"source",t.value)):zr([new oe("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')])}class ti{constructor(t,e){this._parameters=t,this._specification=e,ee(this,Vr(this._parameters,this._specification))}static deserialize(t){return new ti(t._parameters,t._specification)}static serialize(t){return{_parameters:t._parameters,_specification:t._specification}}}function ei(t){let e=null;if(t instanceof ir)e=ei(t.result);else if(t instanceof nr){for(const n of t.args)if(e=ei(n),e)break}else(t instanceof In||t instanceof tr)&&t.input instanceof tn&&"zoom"===t.input.name&&(e=t);return e instanceof oe||t.eachChild((t=>{const n=ei(t);n instanceof oe?e=n:!e&&n?e=new oe("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):e&&n&&e!==n&&(e=new oe("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))})),e}class ni{constructor(t,e,n,r){this.message=(t?"".concat(t,": "):"")+n,r&&(this.identifier=r),null!=e&&e.__line__&&(this.line=e.__line__)}}function ri(t){const e=t.key,n=t.value,r=t.valueSpec||{},i=t.objectElementValidators||{},o=t.style,a=t.styleSpec;let s=[];const l=Fr(n);if("object"!==l)return[new ni(e,n,"object expected, ".concat(l," found"))];for(const c in n){const t=c.split(".")[0];let l;i[t]?l=i[t]:r[t]?l=Di:i["*"]?l=i["*"]:r["*"]&&(l=Di),l?s=s.concat(l({key:(e?"".concat(e,"."):e)+c,value:n[c],valueSpec:r[t]||r["*"],style:o,styleSpec:a,object:n,objectKey:c},n)):s.push(new ni(e,n[c],'unknown property "'.concat(c,'"')))}for(const c in r)i[c]||r[c].required&&void 0===r[c].default&&void 0===n[c]&&s.push(new ni(e,n,'missing required property "'.concat(c,'"')));return s}function ii(t){const e=t.value,n=t.valueSpec,r=t.style,i=t.styleSpec,o=t.key,a=t.arrayElementValidator||Di;if("array"!==Fr(e))return[new ni(o,e,"array expected, ".concat(Fr(e)," found"))];if(n.length&&e.length!==n.length)return[new ni(o,e,"array length ".concat(n.length," expected, length ").concat(e.length," found"))];if(n["min-length"]&&e.length<n["min-length"])return[new ni(o,e,"array length at least ".concat(n["min-length"]," expected, length ").concat(e.length," found"))];let s={type:n.value,values:n.values,minimum:n.minimum,maximum:n.maximum,function:void 0};i.$version<7&&(s.function=n.function),"object"===Fr(n.value)&&(s=n.value);let l=[];for(let c=0;c<e.length;c++)l=l.concat(a({array:e,arrayIndex:c,value:e[c],valueSpec:s,style:r,styleSpec:i,key:"".concat(o,"[").concat(c,"]")}));return l}function oi(t){const e=t.key,n=t.value,r=t.valueSpec;let i=Fr(n);if("number"===i&&n!=n&&(i="NaN"),"number"!==i)return[new ni(e,n,"number expected, ".concat(i," found"))];if("minimum"in r){let i=r.minimum;if("array"===Fr(r.minimum)&&(i=r.minimum[t.arrayIndex]),n<i)return[new ni(e,n,"".concat(n," is less than the minimum value ").concat(i))]}if("maximum"in r){let i=r.maximum;if("array"===Fr(r.maximum)&&(i=r.maximum[t.arrayIndex]),n>i)return[new ni(e,n,"".concat(n," is greater than the maximum value ").concat(i))]}return[]}function ai(t){const e=t.valueSpec,n=ne(t.value.type);let r,i,o,a={};const s="categorical"!==n&&void 0===t.value.property,l=!s,c="array"===Fr(t.value.stops)&&"array"===Fr(t.value.stops[0])&&"object"===Fr(t.value.stops[0][0]),u=ri({key:t.key,value:t.value,valueSpec:t.styleSpec.function,style:t.style,styleSpec:t.styleSpec,objectElementValidators:{stops:function(t){if("identity"===n)return[new ni(t.key,t.value,'identity function may not have a "stops" property')];let e=[];const r=t.value;return e=e.concat(ii({key:t.key,value:r,valueSpec:t.valueSpec,style:t.style,styleSpec:t.styleSpec,arrayElementValidator:h})),"array"===Fr(r)&&0===r.length&&e.push(new ni(t.key,r,"array must have at least one stop")),e},default:function(t){return Di({key:t.key,value:t.value,valueSpec:e,style:t.style,styleSpec:t.styleSpec})}}});return"identity"===n&&s&&u.push(new ni(t.key,t.value,'missing required property "property"')),"identity"===n||t.value.stops||u.push(new ni(t.key,t.value,'missing required property "stops"')),"exponential"===n&&t.valueSpec.expression&&!Br(t.valueSpec)&&u.push(new ni(t.key,t.value,"exponential functions not supported")),t.styleSpec.$version>=8&&(l&&!Rr(t.valueSpec)?u.push(new ni(t.key,t.value,"property functions not supported")):s&&!Dr(t.valueSpec)&&u.push(new ni(t.key,t.value,"zoom functions not supported"))),"categorical"!==n&&!c||void 0!==t.value.property||u.push(new ni(t.key,t.value,'"property" property is required')),u;function h(t){let n=[];const r=t.value,s=t.key;if("array"!==Fr(r))return[new ni(s,r,"array expected, ".concat(Fr(r)," found"))];if(2!==r.length)return[new ni(s,r,"array length 2 expected, length ".concat(r.length," found"))];if(c){if("object"!==Fr(r[0]))return[new ni(s,r,"object expected, ".concat(Fr(r[0])," found"))];if(void 0===r[0].zoom)return[new ni(s,r,"object stop key must have zoom")];if(void 0===r[0].value)return[new ni(s,r,"object stop key must have value")];const e=ne(r[0].zoom);if("number"!=typeof e)return[new ni(s,r[0].zoom,"stop zoom values must be numbers")];if(o&&o>e)return[new ni(s,r[0].zoom,"stop zoom values must appear in ascending order")];e!==o&&(o=e,i=void 0,a={}),n=n.concat(ri({key:"".concat(s,"[0]"),value:r[0],valueSpec:{zoom:{}},style:t.style,styleSpec:t.styleSpec,objectElementValidators:{zoom:oi,value:d}}))}else n=n.concat(d({key:"".concat(s,"[0]"),value:r[0],valueSpec:{},style:t.style,styleSpec:t.styleSpec},r));return Yr(re(r[1]))?n.concat([new ni("".concat(s,"[1]"),r[1],"expressions are not allowed in function stops.")]):n.concat(Di({key:"".concat(s,"[1]"),value:r[1],valueSpec:e,style:t.style,styleSpec:t.styleSpec}))}function d(t,o){const s=Fr(t.value),l=ne(t.value),c=null!==t.value?t.value:o;if(r){if(s!==r)return[new ni(t.key,c,"".concat(s," stop domain type must match previous stop domain type ").concat(r))]}else r=s;if("number"!==s&&"string"!==s&&"boolean"!==s&&"number"!=typeof l&&"string"!=typeof l&&"boolean"!=typeof l)return[new ni(t.key,c,"stop domain value must be a number, string, or boolean")];if("number"!==s&&"categorical"!==n){let r="number expected, ".concat(s," found");return Rr(e)&&void 0===n&&(r+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new ni(t.key,c,r)]}return"categorical"!==n||"number"!==s||"number"==typeof l&&isFinite(l)&&Math.floor(l)===l?"categorical"!==n&&"number"===s&&"number"==typeof l&&"number"==typeof i&&void 0!==i&&l<i?[new ni(t.key,c,"stop domain values must appear in ascending order")]:(i=l,"categorical"===n&&l in a?[new ni(t.key,c,"stop domain values must be unique")]:(a[l]=!0,[])):[new ni(t.key,c,"integer expected, found ".concat(String(l)))]}}function si(t){const e=("property"===t.expressionContext?Qr:Kr)(re(t.value),t.valueSpec);if("error"===e.result)return e.value.map((e=>new ni("".concat(t.key).concat(e.key),t.value,e.message)));const n=e.value.expression||e.value._styleExpression.expression;if("property"===t.expressionContext&&"text-font"===t.propertyKey&&!n.outputDefined())return[new ni(t.key,t.value,'Invalid data expression for "'.concat(t.propertyKey,'". Output values must be contained as literals within the expression.'))];if("property"===t.expressionContext&&"layout"===t.propertyType&&!wn(n))return[new ni(t.key,t.value,'"feature-state" data expressions are not supported with layout properties.')];if("filter"===t.expressionContext)return li(n,t);if(t.expressionContext&&0===t.expressionContext.indexOf("cluster")){if(!Sn(n,["zoom","feature-state"]))return[new ni(t.key,t.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if("cluster-initial"===t.expressionContext&&!xn(n))return[new ni(t.key,t.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function li(t,e){const n=new Set(["zoom","feature-state","pitch","distance-from-center"]);if(e.valueSpec&&e.valueSpec.expression)for(const i of e.valueSpec.expression.parameters)n.delete(i);if(0===n.size)return[];const r=[];return t instanceof tn&&n.has(t.name)?[new ni(e.key,e.value,'["'.concat(t.name,'"] expression is not supported in a filter for a ').concat(e.object.type," layer with id: ").concat(e.object.id))]:(t.eachChild((t=>{r.push(...li(t,e))})),r)}function ci(t){const e=t.key,n=t.value,r=t.valueSpec,i=[];return Array.isArray(r.values)?-1===r.values.indexOf(ne(n))&&i.push(new ni(e,n,"expected one of [".concat(r.values.join(", "),"], ").concat(JSON.stringify(n)," found"))):-1===Object.keys(r.values).indexOf(ne(n))&&i.push(new ni(e,n,"expected one of [".concat(Object.keys(r.values).join(", "),"], ").concat(JSON.stringify(n)," found"))),i}function ui(t){if(!0===t||!1===t)return!0;if(!Array.isArray(t)||0===t.length)return!1;switch(t[0]){case"has":return t.length>=2&&"$id"!==t[1]&&"$type"!==t[1];case"in":return t.length>=3&&("string"!=typeof t[1]||Array.isArray(t[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return 3!==t.length||Array.isArray(t[1])||Array.isArray(t[2]);case"any":case"all":for(const e of t.slice(1))if(!ui(e)&&"boolean"!=typeof e)return!1;return!0;default:return!0}}function hi(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"fill";if(null==t)return{filter:()=>!0,needGeometry:!1,needFeature:!1};ui(t)||(t=vi(t));const n=t;let r=!0;try{r=function(t){if(!pi(t))return t;let e=re(t);return fi(e),e=di(e),e}(n)}catch(t){console.warn("Failed to extract static filter. Filter will continue working, but at higher memory usage and slower framerate.\nThis is most likely a bug, please report this via https://github.com/mapbox/mapbox-gl-js/issues/new?assignees=&labels=&template=Bug_report.md\nand paste the contents of this message in the report.\nThank you!\nFilter Expression:\n".concat(JSON.stringify(n,null,2),"\n        "))}const i=te["filter_".concat(e)],o=Kr(r,i);let a=null;if("error"===o.result)throw new Error(o.value.map((t=>"".concat(t.key,": ").concat(t.message))).join(", "));a=(t,e,n)=>o.value.evaluate(t,e,{},n);let s=null,l=null;if(r!==n){const t=Kr(n,i);if("error"===t.result)throw new Error(t.value.map((t=>"".concat(t.key,": ").concat(t.message))).join(", "));s=(e,n,r,i,o)=>t.value.evaluate(e,n,{},r,void 0,void 0,i,o),l=!xn(t.value.expression)}return{filter:a,dynamicFilter:s||void 0,needGeometry:yi(r),needFeature:!!l}}function di(t){if(!Array.isArray(t))return t;const e=function(t){if(mi.has(t[0]))for(let e=1;e<t.length;e++)if(pi(t[e]))return!0;return t}(t);return!0===e?e:e.map((t=>di(t)))}function fi(t){let e=!1;const n=[];if("case"===t[0]){for(let r=1;r<t.length-1;r+=2)e=e||pi(t[r]),n.push(t[r+1]);n.push(t[t.length-1])}else if("match"===t[0]){e=e||pi(t[1]);for(let e=2;e<t.length-1;e+=2)n.push(t[e+1]);n.push(t[t.length-1])}else if("step"===t[0]){e=e||pi(t[1]);for(let e=1;e<t.length-1;e+=2)n.push(t[e+1])}e&&(t.length=0,t.push("any",...n));for(let r=1;r<t.length;r++)fi(t[r])}function pi(t){if(!Array.isArray(t))return!1;if("pitch"===(e=t[0])||"distance-from-center"===e)return!0;var e;for(let n=1;n<t.length;n++)if(pi(t[n]))return!0;return!1}const mi=new Set(["in","==","!=",">",">=","<","<=","to-boolean"]);function gi(t,e){return t<e?-1:t>e?1:0}function yi(t){if(!Array.isArray(t))return!1;if("within"===t[0])return!0;for(let e=1;e<t.length;e++)if(yi(t[e]))return!0;return!1}function vi(t){if(!t)return!0;const e=t[0];return t.length<=1?"any"!==e:"=="===e?_i(t[1],t[2],"=="):"!="===e?wi(_i(t[1],t[2],"==")):"<"===e||">"===e||"<="===e||">="===e?_i(t[1],t[2],e):"any"===e?(n=t.slice(1),["any"].concat(n.map(vi))):"all"===e?["all"].concat(t.slice(1).map(vi)):"none"===e?["all"].concat(t.slice(1).map(vi).map(wi)):"in"===e?bi(t[1],t.slice(2)):"!in"===e?wi(bi(t[1],t.slice(2))):"has"===e?xi(t[1]):"!has"===e?wi(xi(t[1])):"within"!==e||t;var n}function _i(t,e,n){switch(t){case"$type":return["filter-type-".concat(n),e];case"$id":return["filter-id-".concat(n),e];default:return["filter-".concat(n),t,e]}}function bi(t,e){if(0===e.length)return!1;switch(t){case"$type":return["filter-type-in",["literal",e]];case"$id":return["filter-id-in",["literal",e]];default:return e.length>200&&!e.some((t=>typeof t!=typeof e[0]))?["filter-in-large",t,["literal",e.sort(gi)]]:["filter-in-small",t,["literal",e]]}}function xi(t){switch(t){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",t]}}function wi(t){return["!",t]}function Si(t){return ui(re(t.value))?si(ee({},t,{expressionContext:"filter",valueSpec:t.styleSpec["filter_".concat(t.layerType||"fill")]})):Ei(t)}function Ei(t){const e=t.value,n=t.key;if("array"!==Fr(e))return[new ni(n,e,"array expected, ".concat(Fr(e)," found"))];const r=t.styleSpec;let i,o=[];if(e.length<1)return[new ni(n,e,"filter array must have at least 1 element")];switch(o=o.concat(ci({key:"".concat(n,"[0]"),value:e[0],valueSpec:r.filter_operator,style:t.style,styleSpec:t.styleSpec})),ne(e[0])){case"<":case"<=":case">":case">=":e.length>=2&&"$type"===ne(e[1])&&o.push(new ni(n,e,'"$type" cannot be use with operator "'.concat(e[0],'"')));case"==":case"!=":3!==e.length&&o.push(new ni(n,e,'filter array for operator "'.concat(e[0],'" must have 3 elements')));case"in":case"!in":e.length>=2&&(i=Fr(e[1]),"string"!==i&&o.push(new ni("".concat(n,"[1]"),e[1],"string expected, ".concat(i," found"))));for(let a=2;a<e.length;a++)i=Fr(e[a]),"$type"===ne(e[1])?o=o.concat(ci({key:"".concat(n,"[").concat(a,"]"),value:e[a],valueSpec:r.geometry_type,style:t.style,styleSpec:t.styleSpec})):"string"!==i&&"number"!==i&&"boolean"!==i&&o.push(new ni("".concat(n,"[").concat(a,"]"),e[a],"string, number, or boolean expected, ".concat(i," found")));break;case"any":case"all":case"none":for(let r=1;r<e.length;r++)o=o.concat(Ei({key:"".concat(n,"[").concat(r,"]"),value:e[r],style:t.style,styleSpec:t.styleSpec}));break;case"has":case"!has":i=Fr(e[1]),2!==e.length?o.push(new ni(n,e,'filter array for "'.concat(e[0],'" operator must have 2 elements'))):"string"!==i&&o.push(new ni("".concat(n,"[1]"),e[1],"string expected, ".concat(i," found")));break;case"within":i=Fr(e[1]),2!==e.length?o.push(new ni(n,e,'filter array for "'.concat(e[0],'" operator must have 2 elements'))):"object"!==i&&o.push(new ni("".concat(n,"[1]"),e[1],"object expected, ".concat(i," found")))}return o}function Ti(t,e){const n=t.key,r=t.style,i=t.styleSpec,o=t.value,a=t.objectKey,s=i["".concat(e,"_").concat(t.layerType)];if(!s)return[];const l=a.match(/^(.*)-transition$/);if("paint"===e&&l&&s[l[1]]&&s[l[1]].transition)return Di({key:n,value:o,valueSpec:i.transition,style:r,styleSpec:i});const c=t.valueSpec||s[a];if(!c)return[new ni(n,o,'unknown property "'.concat(a,'"'))];let u;if("string"===Fr(o)&&Rr(c)&&!c.tokens&&(u=/^{([^}]+)}$/.exec(o))){const t='`{ "type": "identity", "property": '.concat(u?JSON.stringify(u[1]):'"_"'," }`");return[new ni(n,o,'"'.concat(a,'" does not support interpolation syntax\nUse an identity property function instead: ').concat(t,"."))]}const h=[];return"symbol"===t.layerType&&("text-field"===a&&r&&!r.glyphs&&h.push(new ni(n,o,'use of "text-field" requires a style "glyphs" property')),"text-font"===a&&Nr(re(o))&&"identity"===ne(o.type)&&h.push(new ni(n,o,'"text-font" does not support identity functions'))),h.concat(Di({key:t.key,value:o,valueSpec:c,style:r,styleSpec:i,expressionContext:"property",propertyType:e,propertyKey:a}))}function Mi(t){return Ti(t,"paint")}function Ai(t){return Ti(t,"layout")}function Ci(t){let e=[];const n=t.value,r=t.key,i=t.style,o=t.styleSpec;n.type||n.ref||e.push(new ni(r,n,'either "type" or "ref" is required'));let a=ne(n.type);const s=ne(n.ref);if(n.id){const o=ne(n.id);for(let a=0;a<t.arrayIndex;a++){const t=i.layers[a];ne(t.id)===o&&e.push(new ni(r,n.id,'duplicate layer id "'.concat(n.id,'", previously used at line ').concat(t.id.__line__)))}}if("ref"in n){let t;["type","source","source-layer","filter","layout"].forEach((t=>{t in n&&e.push(new ni(r,n[t],'"'.concat(t,'" is prohibited for ref layers')))})),i.layers.forEach((e=>{ne(e.id)===s&&(t=e)})),t?t.ref?e.push(new ni(r,n.ref,"ref cannot reference another ref layer")):a=ne(t.type):"string"==typeof s&&e.push(new ni(r,n.ref,'ref layer "'.concat(s,'" not found')))}else if("background"!==a&&"sky"!==a)if(n.source){const t=i.sources&&i.sources[n.source],o=t&&ne(t.type);t?"vector"===o&&"raster"===a?e.push(new ni(r,n.source,'layer "'.concat(n.id,'" requires a raster source'))):"raster"===o&&"raster"!==a?e.push(new ni(r,n.source,'layer "'.concat(n.id,'" requires a vector source'))):"vector"!==o||n["source-layer"]?"raster-dem"===o&&"hillshade"!==a?e.push(new ni(r,n.source,"raster-dem source can only be used with layer type 'hillshade'.")):"line"!==a||!n.paint||!n.paint["line-gradient"]&&!n.paint["line-trim-offset"]||"geojson"===o&&t.lineMetrics||e.push(new ni(r,n,'layer "'.concat(n.id,'" specifies a line-gradient, which requires a GeoJSON source with `lineMetrics` enabled.'))):e.push(new ni(r,n,'layer "'.concat(n.id,'" must specify a "source-layer"'))):e.push(new ni(r,n.source,'source "'.concat(n.source,'" not found')))}else e.push(new ni(r,n,'missing required property "source"'));return e=e.concat(ri({key:r,value:n,valueSpec:o.layer,style:t.style,styleSpec:t.styleSpec,objectElementValidators:{"*":()=>[],type:()=>Di({key:"".concat(r,".type"),value:n.type,valueSpec:o.layer.type,style:t.style,styleSpec:t.styleSpec,object:n,objectKey:"type"}),filter:t=>Si(ee({layerType:a},t)),layout:t=>ri({layer:n,key:t.key,value:t.value,valueSpec:{},style:t.style,styleSpec:t.styleSpec,objectElementValidators:{"*":t=>Ai(ee({layerType:a},t))}}),paint:t=>ri({layer:n,key:t.key,value:t.value,valueSpec:{},style:t.style,styleSpec:t.styleSpec,objectElementValidators:{"*":t=>Mi(ee({layerType:a},t))}})}})),e}function Pi(t){const e=t.value,n=t.key,r=Fr(e);return"string"!==r?[new ni(n,e,"string expected, ".concat(r," found"))]:[]}const ki={promoteId:function(t){let{key:e,value:n}=t;if("string"===Fr(n))return Pi({key:e,value:n});{const t=[];for(const r in n)t.push(...Pi({key:"".concat(e,".").concat(r),value:n[r]}));return t}}};function Ii(t){const e=t.value,n=t.key,r=t.styleSpec,i=t.style;if(!e.type)return[new ni(n,e,'"type" is required')];const o=ne(e.type);let a;switch(o){case"vector":case"raster":case"raster-dem":return a=ri({key:n,value:e,valueSpec:r["source_".concat(o.replace("-","_"))],style:t.style,styleSpec:r,objectElementValidators:ki}),a;case"geojson":if(a=ri({key:n,value:e,valueSpec:r.source_geojson,style:i,styleSpec:r,objectElementValidators:ki}),e.cluster)for(const t in e.clusterProperties){const[r,i]=e.clusterProperties[t],o="string"==typeof r?[r,["accumulated"],["get",t]]:r;a.push(...si({key:"".concat(n,".").concat(t,".map"),value:i,expressionContext:"cluster-map"})),a.push(...si({key:"".concat(n,".").concat(t,".reduce"),value:o,expressionContext:"cluster-reduce"}))}return a;case"video":return ri({key:n,value:e,valueSpec:r.source_video,style:i,styleSpec:r});case"image":return ri({key:n,value:e,valueSpec:r.source_image,style:i,styleSpec:r});case"canvas":return[new ni(n,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return ci({key:"".concat(n,".type"),value:e.type,valueSpec:{values:Oi(r)},style:i,styleSpec:r})}}function Oi(t){return t.source.reduce(((e,n)=>{const r=t[n];return"enum"===r.type.type&&(e=e.concat(Object.keys(r.type.values))),e}),[])}function Li(t){const e=t.value,n=t.styleSpec,r=n.light,i=t.style;let o=[];const a=Fr(e);if(void 0===e)return o;if("object"!==a)return o=o.concat([new ni("light",e,"object expected, ".concat(a," found"))]),o;for(const s in e){const t=s.match(/^(.*)-transition$/);o=o.concat(t&&r[t[1]]&&r[t[1]].transition?Di({key:s,value:e[s],valueSpec:n.transition,style:i,styleSpec:n}):r[s]?Di({key:s,value:e[s],valueSpec:r[s],style:i,styleSpec:n}):[new ni(s,e[s],'unknown property "'.concat(s,'"'))])}return o}function ji(t){const e=t.value,n=t.key,r=t.style,i=t.styleSpec,o=i.terrain;let a=[];const s=Fr(e);if(void 0===e)return a;if("object"!==s)return a=a.concat([new ni("terrain",e,"object expected, ".concat(s," found"))]),a;for(const l in e){const t=l.match(/^(.*)-transition$/);a=a.concat(t&&o[t[1]]&&o[t[1]].transition?Di({key:l,value:e[l],valueSpec:i.transition,style:r,styleSpec:i}):o[l]?Di({key:l,value:e[l],valueSpec:o[l],style:r,styleSpec:i}):[new ni(l,e[l],'unknown property "'.concat(l,'"'))])}if(e.source){const t=r.sources&&r.sources[e.source],i=t&&ne(t.type);t?"raster-dem"!==i&&a.push(new ni(n,e.source,"terrain cannot be used with a source of type ".concat(String(i),', it only be used with a "raster-dem" source type'))):a.push(new ni(n,e.source,'source "'.concat(e.source,'" not found')))}else a.push(new ni(n,e,'terrain is missing required property "source"'));return a}function zi(t){const e=t.value,n=t.style,r=t.styleSpec,i=r.fog;let o=[];const a=Fr(e);if(void 0===e)return o;if("object"!==a)return o=o.concat([new ni("fog",e,"object expected, ".concat(a," found"))]),o;for(const s in e){const t=s.match(/^(.*)-transition$/);o=o.concat(t&&i[t[1]]&&i[t[1]].transition?Di({key:s,value:e[s],valueSpec:r.transition,style:n,styleSpec:r}):i[s]?Di({key:s,value:e[s],valueSpec:i[s],style:n,styleSpec:r}):[new ni(s,e[s],'unknown property "'.concat(s,'"'))])}return o}const Ri={"*":()=>[],array:ii,boolean:function(t){const e=t.value,n=t.key,r=Fr(e);return"boolean"!==r?[new ni(n,e,"boolean expected, ".concat(r," found"))]:[]},number:oi,color:function(t){const e=t.key,n=t.value,r=Fr(n);return"string"!==r?[new ni(e,n,"color expected, ".concat(r," found"))]:null===Ee(n)?[new ni(e,n,'color expected, "'.concat(n,'" found'))]:[]},enum:ci,filter:Si,function:ai,layer:Ci,object:ri,source:Ii,light:Li,terrain:ji,fog:zi,string:Pi,formatted:function(t){return 0===Pi(t).length?[]:si(t)},resolvedImage:function(t){return 0===Pi(t).length?[]:si(t)},projection:function(t){const e=t.value,n=t.styleSpec,r=n.projection,i=t.style;let o=[];const a=Fr(e);if("object"===a)for(const s in e)o=o.concat(Di({key:s,value:e[s],valueSpec:r[s],style:i,styleSpec:n}));else"string"!==a&&(o=o.concat([new ni("projection",e,"object or string expected, ".concat(a," found"))]));return o}};function Di(t){const e=t.value,n=t.valueSpec,r=t.styleSpec;return n.expression&&Nr(ne(e))?ai(t):n.expression&&Yr(re(e))?si(t):n.type&&Ri[n.type]?Ri[n.type](t):ri(ee({},t,{valueSpec:n.type?r[n.type]:n}))}function Bi(t){const e=t.value,n=t.key,r=Pi(t);return r.length||(-1===e.indexOf("{fontstack}")&&r.push(new ni(n,e,'"glyphs" url must include a "{fontstack}" token')),-1===e.indexOf("{range}")&&r.push(new ni(n,e,'"glyphs" url must include a "{range}" token'))),r}function Fi(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:te;return Vi(Di({key:"",value:t,valueSpec:e.$root,styleSpec:e,style:t,objectElementValidators:{glyphs:Bi,"*":()=>[]}}))}const Ni=t=>Vi(Mi(t)),Ui=t=>Vi(Ai(t));function Vi(t){return t.slice().sort(((t,e)=>t.line&&e.line?t.line-e.line:0))}function Wi(t,e){let n=!1;if(e&&e.length)for(const r of e)t.fire(new Jt(new Error(r.message))),n=!0;return n}var Gi=Hi,qi=3;function Hi(t,e,n){var r=this.cells=[];if(t instanceof ArrayBuffer){this.arrayBuffer=t;var i=new Int32Array(this.arrayBuffer);t=i[0],this.d=(e=i[1])+2*(n=i[2]);for(var o=0;o<this.d*this.d;o++){var a=i[qi+o],s=i[qi+o+1];r.push(a===s?null:i.subarray(a,s))}var l=i[qi+r.length+1];this.keys=i.subarray(i[qi+r.length],l),this.bboxes=i.subarray(l),this.insert=this._insertReadonly}else{this.d=e+2*n;for(var c=0;c<this.d*this.d;c++)r.push([]);this.keys=[],this.bboxes=[]}this.n=e,this.extent=t,this.padding=n,this.scale=e/t,this.uid=0;var u=n/e*t;this.min=-u,this.max=t+u}Hi.prototype.insert=function(t,e,n,r,i){this._forEachCell(e,n,r,i,this._insertCell,this.uid++),this.keys.push(t),this.bboxes.push(e),this.bboxes.push(n),this.bboxes.push(r),this.bboxes.push(i)},Hi.prototype._insertReadonly=function(){throw"Cannot insert into a GridIndex created from an ArrayBuffer."},Hi.prototype._insertCell=function(t,e,n,r,i,o){this.cells[i].push(o)},Hi.prototype.query=function(t,e,n,r,i){var o=this.min,a=this.max;if(t<=o&&e<=o&&a<=n&&a<=r&&!i)return Array.prototype.slice.call(this.keys);var s=[];return this._forEachCell(t,e,n,r,this._queryCell,s,{},i),s},Hi.prototype._queryCell=function(t,e,n,r,i,o,a,s){var l=this.cells[i];if(null!==l)for(var c=this.keys,u=this.bboxes,h=0;h<l.length;h++){var d=l[h];if(void 0===a[d]){var f=4*d;(s?s(u[f+0],u[f+1],u[f+2],u[f+3]):t<=u[f+2]&&e<=u[f+3]&&n>=u[f+0]&&r>=u[f+1])?(a[d]=!0,o.push(c[d])):a[d]=!1}}},Hi.prototype._forEachCell=function(t,e,n,r,i,o,a,s){for(var l=this._convertToCellCoord(t),c=this._convertToCellCoord(e),u=this._convertToCellCoord(n),h=this._convertToCellCoord(r),d=l;d<=u;d++)for(var f=c;f<=h;f++){var p=this.d*f+d;if((!s||s(this._convertFromCellCoord(d),this._convertFromCellCoord(f),this._convertFromCellCoord(d+1),this._convertFromCellCoord(f+1)))&&i.call(this,t,e,n,r,p,o,a,s))return}},Hi.prototype._convertFromCellCoord=function(t){return(t-this.padding)/this.scale},Hi.prototype._convertToCellCoord=function(t){return Math.max(0,Math.min(this.d-1,Math.floor(t*this.scale)+this.padding))},Hi.prototype.toArrayBuffer=function(){if(this.arrayBuffer)return this.arrayBuffer;for(var t=this.cells,e=qi+this.cells.length+1+1,n=0,r=0;r<this.cells.length;r++)n+=this.cells[r].length;var i=new Int32Array(e+n+this.keys.length+this.bboxes.length);i[0]=this.extent,i[1]=this.n,i[2]=this.padding;for(var o=e,a=0;a<t.length;a++){var s=t[a];i[qi+a]=o,i.set(s,o),o+=s.length}return i[qi+t.length]=o,i.set(this.keys,o),i[qi+t.length+1]=o+=this.keys.length,i.set(this.bboxes,o),o+=this.bboxes.length,i.buffer};var Zi=d(Gi);const Xi={};function Yi(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.defineProperty(t,"_classRegistryKey",{value:e,writeable:!1}),Xi[e]={klass:t,omit:n.omit||[]}}Yi(Object,"Object"),Zi.serialize=function(t,e){const n=t.toArrayBuffer();return e&&e.push(n),{buffer:n}},Zi.deserialize=function(t){return new Zi(t.buffer)},Object.defineProperty(Zi,"name",{value:"Grid"}),Yi(Zi,"Grid"),Yi(Ie,"Color"),Yi(Error,"Error"),Yi(ct,"AJAXError"),Yi(ze,"ResolvedImage"),Yi(ti,"StylePropertyFunction"),Yi(Xr,"StyleExpression",{omit:["_evaluator"]}),Yi(Jr,"ZoomDependentExpression"),Yi($r,"ZoomConstantExpression"),Yi(tn,"CompoundExpression",{omit:["_evaluate"]});for(const Sm in Lr)Xi[Lr[Sm]._classRegistryKey]||Yi(Lr[Sm],"Expression".concat(Sm));function Ki(t){return t&&"undefined"!=typeof ArrayBuffer&&(t instanceof ArrayBuffer||t.constructor&&"ArrayBuffer"===t.constructor.name)}function $i(t){return e.ImageBitmap&&t instanceof e.ImageBitmap}function Ji(t,n){if(null==t||"boolean"==typeof t||"number"==typeof t||"string"==typeof t||t instanceof Boolean||t instanceof Number||t instanceof String||t instanceof Date||t instanceof RegExp)return t;if(Ki(t)||$i(t))return n&&n.push(t),t;if(ArrayBuffer.isView(t)){const e=t;return n&&n.push(e.buffer),e}if(t instanceof e.ImageData)return n&&n.push(t.data.buffer),t;if(Array.isArray(t)){const e=[];for(const r of t)e.push(Ji(r,n));return e}if("object"==typeof t){const e=t.constructor,r=e._classRegistryKey;if(!r)throw new Error("can't serialize object of unregistered class ".concat(r));const i=e.serialize?e.serialize(t,n):{};if(!e.serialize){for(const e in t)t.hasOwnProperty(e)&&(Xi[r].omit.indexOf(e)>=0||(i[e]=Ji(t[e],n)));t instanceof Error&&(i.message=t.message)}if(i.$name)throw new Error("$name property is reserved for worker serialization logic.");return"Object"!==r&&(i.$name=r),i}throw new Error("can't serialize object of type "+typeof t)}function Qi(t){if(null==t||"boolean"==typeof t||"number"==typeof t||"string"==typeof t||t instanceof Boolean||t instanceof Number||t instanceof String||t instanceof Date||t instanceof RegExp||Ki(t)||$i(t)||ArrayBuffer.isView(t)||t instanceof e.ImageData)return t;if(Array.isArray(t))return t.map(Qi);if("object"==typeof t){const e=t.$name||"Object",{klass:n}=Xi[e];if(!n)throw new Error("can't deserialize unregistered class ".concat(e));if(n.deserialize)return n.deserialize(t);const r=Object.create(n.prototype);for(const i of Object.keys(t))"$name"!==i&&(r[i]=Qi(t[i]));return r}throw new Error("can't deserialize object of type "+typeof t)}const to={"Latin-1 Supplement":t=>t>=128&&t<=255,Arabic:t=>t>=1536&&t<=1791,"Arabic Supplement":t=>t>=1872&&t<=1919,"Arabic Extended-A":t=>t>=2208&&t<=2303,"Hangul Jamo":t=>t>=4352&&t<=4607,"Unified Canadian Aboriginal Syllabics":t=>t>=5120&&t<=5759,Khmer:t=>t>=6016&&t<=6143,"Unified Canadian Aboriginal Syllabics Extended":t=>t>=6320&&t<=6399,"General Punctuation":t=>t>=8192&&t<=8303,"Letterlike Symbols":t=>t>=8448&&t<=8527,"Number Forms":t=>t>=8528&&t<=8591,"Miscellaneous Technical":t=>t>=8960&&t<=9215,"Control Pictures":t=>t>=9216&&t<=9279,"Optical Character Recognition":t=>t>=9280&&t<=9311,"Enclosed Alphanumerics":t=>t>=9312&&t<=9471,"Geometric Shapes":t=>t>=9632&&t<=9727,"Miscellaneous Symbols":t=>t>=9728&&t<=9983,"Miscellaneous Symbols and Arrows":t=>t>=11008&&t<=11263,"CJK Radicals Supplement":t=>t>=11904&&t<=12031,"Kangxi Radicals":t=>t>=12032&&t<=12255,"Ideographic Description Characters":t=>t>=12272&&t<=12287,"CJK Symbols and Punctuation":t=>t>=12288&&t<=12351,Hiragana:t=>t>=12352&&t<=12447,Katakana:t=>t>=12448&&t<=12543,Bopomofo:t=>t>=12544&&t<=12591,"Hangul Compatibility Jamo":t=>t>=12592&&t<=12687,Kanbun:t=>t>=12688&&t<=12703,"Bopomofo Extended":t=>t>=12704&&t<=12735,"CJK Strokes":t=>t>=12736&&t<=12783,"Katakana Phonetic Extensions":t=>t>=12784&&t<=12799,"Enclosed CJK Letters and Months":t=>t>=12800&&t<=13055,"CJK Compatibility":t=>t>=13056&&t<=13311,"CJK Unified Ideographs Extension A":t=>t>=13312&&t<=19903,"Yijing Hexagram Symbols":t=>t>=19904&&t<=19967,"CJK Unified Ideographs":t=>t>=19968&&t<=40959,"Yi Syllables":t=>t>=40960&&t<=42127,"Yi Radicals":t=>t>=42128&&t<=42191,"Hangul Jamo Extended-A":t=>t>=43360&&t<=43391,"Hangul Syllables":t=>t>=44032&&t<=55215,"Hangul Jamo Extended-B":t=>t>=55216&&t<=55295,"Private Use Area":t=>t>=57344&&t<=63743,"CJK Compatibility Ideographs":t=>t>=63744&&t<=64255,"Arabic Presentation Forms-A":t=>t>=64336&&t<=65023,"Vertical Forms":t=>t>=65040&&t<=65055,"CJK Compatibility Forms":t=>t>=65072&&t<=65103,"Small Form Variants":t=>t>=65104&&t<=65135,"Arabic Presentation Forms-B":t=>t>=65136&&t<=65279,"Halfwidth and Fullwidth Forms":t=>t>=65280&&t<=65519};function eo(t){for(const e of t)if(io(e.charCodeAt(0)))return!0;return!1}function no(t){for(const e of t)if(!ro(e.charCodeAt(0)))return!1;return!0}function ro(t){return!(to.Arabic(t)||to["Arabic Supplement"](t)||to["Arabic Extended-A"](t)||to["Arabic Presentation Forms-A"](t)||to["Arabic Presentation Forms-B"](t))}function io(t){return!(746!==t&&747!==t&&(t<4352||!(to["Bopomofo Extended"](t)||to.Bopomofo(t)||to["CJK Compatibility Forms"](t)&&!(t>=65097&&t<=65103)||to["CJK Compatibility Ideographs"](t)||to["CJK Compatibility"](t)||to["CJK Radicals Supplement"](t)||to["CJK Strokes"](t)||!(!to["CJK Symbols and Punctuation"](t)||t>=12296&&t<=12305||t>=12308&&t<=12319||12336===t)||to["CJK Unified Ideographs Extension A"](t)||to["CJK Unified Ideographs"](t)||to["Enclosed CJK Letters and Months"](t)||to["Hangul Compatibility Jamo"](t)||to["Hangul Jamo Extended-A"](t)||to["Hangul Jamo Extended-B"](t)||to["Hangul Jamo"](t)||to["Hangul Syllables"](t)||to.Hiragana(t)||to["Ideographic Description Characters"](t)||to.Kanbun(t)||to["Kangxi Radicals"](t)||to["Katakana Phonetic Extensions"](t)||to.Katakana(t)&&12540!==t||!(!to["Halfwidth and Fullwidth Forms"](t)||65288===t||65289===t||65293===t||t>=65306&&t<=65310||65339===t||65341===t||65343===t||t>=65371&&t<=65503||65507===t||t>=65512&&t<=65519)||!(!to["Small Form Variants"](t)||t>=65112&&t<=65118||t>=65123&&t<=65126)||to["Unified Canadian Aboriginal Syllabics"](t)||to["Unified Canadian Aboriginal Syllabics Extended"](t)||to["Vertical Forms"](t)||to["Yijing Hexagram Symbols"](t)||to["Yi Syllables"](t)||to["Yi Radicals"](t))))}function oo(t){return!(io(t)||function(t){return!!(to["Latin-1 Supplement"](t)&&(167===t||169===t||174===t||177===t||188===t||189===t||190===t||215===t||247===t)||to["General Punctuation"](t)&&(8214===t||8224===t||8225===t||8240===t||8241===t||8251===t||8252===t||8258===t||8263===t||8264===t||8265===t||8273===t)||to["Letterlike Symbols"](t)||to["Number Forms"](t)||to["Miscellaneous Technical"](t)&&(t>=8960&&t<=8967||t>=8972&&t<=8991||t>=8996&&t<=9e3||9003===t||t>=9085&&t<=9114||t>=9150&&t<=9165||9167===t||t>=9169&&t<=9179||t>=9186&&t<=9215)||to["Control Pictures"](t)&&9251!==t||to["Optical Character Recognition"](t)||to["Enclosed Alphanumerics"](t)||to["Geometric Shapes"](t)||to["Miscellaneous Symbols"](t)&&!(t>=9754&&t<=9759)||to["Miscellaneous Symbols and Arrows"](t)&&(t>=11026&&t<=11055||t>=11088&&t<=11097||t>=11192&&t<=11243)||to["CJK Symbols and Punctuation"](t)||to.Katakana(t)||to["Private Use Area"](t)||to["CJK Compatibility Forms"](t)||to["Small Form Variants"](t)||to["Halfwidth and Fullwidth Forms"](t)||8734===t||8756===t||8757===t||t>=9984&&t<=10087||t>=10102&&t<=10131||65532===t||65533===t)}(t))}function ao(t){return t>=1424&&t<=2303||to["Arabic Presentation Forms-A"](t)||to["Arabic Presentation Forms-B"](t)}function so(t,e){return!(!e&&ao(t)||t>=2304&&t<=3583||t>=3840&&t<=4255||to.Khmer(t))}function lo(t){for(const e of t)if(ao(e.charCodeAt(0)))return!0;return!1}const co="deferred",uo="loading",ho="loaded";let fo=null,po="unavailable",mo=null;const go=function(t){t&&"string"==typeof t&&t.indexOf("NetworkError")>-1&&(po="error"),fo&&fo(t)};function yo(){vo.fire(new $t("pluginStateChange",{pluginStatus:po,pluginURL:mo}))}const vo=new Qt,_o=function(){return po},bo=function(){if(po!==co||!mo)throw new Error("rtl-text-plugin cannot be downloaded unless a pluginURL is specified");po=uo,yo(),mo&&dt({url:mo},(t=>{t?go(t):(po=ho,yo())}))},xo={applyArabicShaping:null,processBidirectionalText:null,processStyledBidirectionalText:null,isLoaded:()=>po===ho||null!=xo.applyArabicShaping,isLoading:()=>po===uo,setState(t){po=t.pluginStatus,mo=t.pluginURL},isParsed:()=>null!=xo.applyArabicShaping&&null!=xo.processBidirectionalText&&null!=xo.processStyledBidirectionalText,getPluginURL:()=>mo};class wo{constructor(t,e){this.zoom=t,e?(this.now=e.now,this.fadeDuration=e.fadeDuration,this.transition=e.transition,this.pitch=e.pitch):(this.now=0,this.fadeDuration=0,this.transition={},this.pitch=0)}isSupportedScript(t){return function(t,e){for(const n of t)if(!so(n.charCodeAt(0),e))return!1;return!0}(t,xo.isLoaded())}}class So{constructor(t,e){this.property=t,this.value=e,this.expression=function(t,e){if(Nr(t))return new ti(t,e);if(Yr(t)){const n=Qr(t,e);if("error"===n.result)throw new Error(n.value.map((t=>"".concat(t.key,": ").concat(t.message))).join(", "));return n.value}{let n=t;return"string"==typeof t&&"color"===e.type&&(n=Ie.parse(t)),{kind:"constant",evaluate:()=>n}}}(void 0===e?t.specification.default:e,t.specification)}isDataDriven(){return"source"===this.expression.kind||"composite"===this.expression.kind}possiblyEvaluate(t,e,n){return this.property.possiblyEvaluate(this,t,e,n)}}class Eo{constructor(t){this.property=t,this.value=new So(t,void 0)}transitioned(t,e){return new Mo(this.property,this.value,e,O({},t.transition,this.transition),t.now)}untransitioned(){return new Mo(this.property,this.value,null,{},0)}}class To{constructor(t){this._properties=t,this._values=Object.create(t.defaultTransitionablePropertyValues)}getValue(t){return V(this._values[t].value.value)}setValue(t,e){this._values.hasOwnProperty(t)||(this._values[t]=new Eo(this._values[t].property)),this._values[t].value=new So(this._values[t].property,null===e?void 0:V(e))}getTransition(t){return V(this._values[t].transition)}setTransition(t,e){this._values.hasOwnProperty(t)||(this._values[t]=new Eo(this._values[t].property)),this._values[t].transition=V(e)||void 0}serialize(){const t={};for(const e of Object.keys(this._values)){const n=this.getValue(e);void 0!==n&&(t[e]=n);const r=this.getTransition(e);void 0!==r&&(t["".concat(e,"-transition")]=r)}return t}transitioned(t,e){const n=new Ao(this._properties);for(const r of Object.keys(this._values))n._values[r]=this._values[r].transitioned(t,e._values[r]);return n}untransitioned(){const t=new Ao(this._properties);for(const e of Object.keys(this._values))t._values[e]=this._values[e].untransitioned();return t}}class Mo{constructor(t,e,n,r,i){const o=r.delay||0,a=r.duration||0;i=i||0,this.property=t,this.value=e,this.begin=i+o,this.end=this.begin+a,t.specification.transition&&(r.delay||r.duration)&&(this.prior=n)}possiblyEvaluate(t,e,n){const r=t.now||0,i=this.value.possiblyEvaluate(t,e,n),o=this.prior;if(o){if(r>this.end)return this.prior=null,i;if(this.value.isDataDriven())return this.prior=null,i;if(r<this.begin)return o.possiblyEvaluate(t,e,n);{const a=(r-this.begin)/(this.end-this.begin);return this.property.interpolate(o.possiblyEvaluate(t,e,n),i,E(a))}}return i}}class Ao{constructor(t){this._properties=t,this._values=Object.create(t.defaultTransitioningPropertyValues)}possiblyEvaluate(t,e,n){const r=new ko(this._properties);for(const i of Object.keys(this._values))r._values[i]=this._values[i].possiblyEvaluate(t,e,n);return r}hasTransition(){for(const t of Object.keys(this._values))if(this._values[t].prior)return!0;return!1}}class Co{constructor(t){this._properties=t,this._values=Object.create(t.defaultPropertyValues)}getValue(t){return V(this._values[t].value)}setValue(t,e){this._values[t]=new So(this._values[t].property,null===e?void 0:V(e))}serialize(){const t={};for(const e of Object.keys(this._values)){const n=this.getValue(e);void 0!==n&&(t[e]=n)}return t}possiblyEvaluate(t,e,n){const r=new ko(this._properties);for(const i of Object.keys(this._values))r._values[i]=this._values[i].possiblyEvaluate(t,e,n);return r}}class Po{constructor(t,e,n){this.property=t,this.value=e,this.parameters=n}isConstant(){return"constant"===this.value.kind}constantOr(t){return"constant"===this.value.kind?this.value.value:t}evaluate(t,e,n,r){return this.property.evaluate(this.value,this.parameters,t,e,n,r)}}class ko{constructor(t){this._properties=t,this._values=Object.create(t.defaultPossiblyEvaluatedValues)}get(t){return this._values[t]}}class Io{constructor(t){this.specification=t}possiblyEvaluate(t,e){return t.expression.evaluate(e)}interpolate(t,e,n){const r=Ln[this.specification.type];return r?r(t,e,n):t}}class Oo{constructor(t,e){this.specification=t,this.overrides=e}possiblyEvaluate(t,e,n,r){return new Po(this,"constant"===t.expression.kind||"camera"===t.expression.kind?{kind:"constant",value:t.expression.evaluate(e,null,{},n,r)}:t.expression,e)}interpolate(t,e,n){if("constant"!==t.value.kind||"constant"!==e.value.kind)return t;if(void 0===t.value.value||void 0===e.value.value)return new Po(this,{kind:"constant",value:void 0},t.parameters);const r=Ln[this.specification.type];return r?new Po(this,{kind:"constant",value:r(t.value.value,e.value.value,n)},t.parameters):t}evaluate(t,e,n,r,i,o){return"constant"===t.kind?t.value:t.evaluate(e,n,r,i,o)}}class Lo{constructor(t){this.specification=t}possiblyEvaluate(t,e,n,r){return!!t.expression.evaluate(e,null,{},n,r)}interpolate(){return!1}}class jo{constructor(t){this.properties=t,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[];const e=new wo(0,{});for(const n in t){const r=t[n];r.specification.overridable&&this.overridableProperties.push(n);const i=this.defaultPropertyValues[n]=new So(r,void 0),o=this.defaultTransitionablePropertyValues[n]=new Eo(r);this.defaultTransitioningPropertyValues[n]=o.untransitioned(),this.defaultPossiblyEvaluatedValues[n]=i.possiblyEvaluate(e)}}}function zo(t,e){return 256*(t=A(Math.floor(t),0,255))+A(Math.floor(e),0,255)}Yi(Oo,"DataDrivenProperty"),Yi(Io,"DataConstantProperty"),Yi(Lo,"ColorRampProperty");const Ro={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array};class Do{constructor(t,e){this._structArray=t,this._pos1=e*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8}}class Bo{constructor(){this.isTransferred=!1,this.capacity=-1,this.resize(0)}static serialize(t,e){return t._trim(),e&&(t.isTransferred=!0,e.push(t.arrayBuffer)),{length:t.length,arrayBuffer:t.arrayBuffer}}static deserialize(t){const e=Object.create(this.prototype);return e.arrayBuffer=t.arrayBuffer,e.length=t.length,e.capacity=t.arrayBuffer.byteLength/e.bytesPerElement,e._refreshViews(),e}_trim(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())}clear(){this.length=0}resize(t){this.reserve(t),this.length=t}reserve(t){if(t>this.capacity){this.capacity=Math.max(t,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);const e=this.uint8;this._refreshViews(),e&&this.uint8.set(e)}}_refreshViews(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")}destroy(){this.int8=this.uint8=this.int16=this.uint16=this.int32=this.uint32=this.float32=null,this.arrayBuffer=null}}function Fo(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=0,r=0;return{members:t.map((t=>{const i=Ro[t.type].BYTES_PER_ELEMENT,o=n=No(n,Math.max(e,i)),a=t.components||1;return r=Math.max(r,i),n+=i*a,{name:t.name,type:t.type,components:a,offset:o}})),size:No(n,Math.max(r,e)),alignment:e}}function No(t,e){return Math.ceil(t/e)*e}class Uo extends Bo{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(t,e){const n=this.length;return this.resize(n+1),this.emplace(n,t,e)}emplace(t,e,n){const r=2*t;return this.int16[r+0]=e,this.int16[r+1]=n,t}}Uo.prototype.bytesPerElement=4,Yi(Uo,"StructArrayLayout2i4");class Vo extends Bo{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(t,e,n){const r=this.length;return this.resize(r+1),this.emplace(r,t,e,n)}emplace(t,e,n,r){const i=3*t;return this.int16[i+0]=e,this.int16[i+1]=n,this.int16[i+2]=r,t}}Vo.prototype.bytesPerElement=6,Yi(Vo,"StructArrayLayout3i6");class Wo extends Bo{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(t,e,n,r){const i=this.length;return this.resize(i+1),this.emplace(i,t,e,n,r)}emplace(t,e,n,r,i){const o=4*t;return this.int16[o+0]=e,this.int16[o+1]=n,this.int16[o+2]=r,this.int16[o+3]=i,t}}Wo.prototype.bytesPerElement=8,Yi(Wo,"StructArrayLayout4i8");class Go extends Bo{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(t,e,n,r,i,o,a){const s=this.length;return this.resize(s+1),this.emplace(s,t,e,n,r,i,o,a)}emplace(t,e,n,r,i,o,a,s){const l=6*t,c=12*t,u=3*t;return this.int16[l+0]=e,this.int16[l+1]=n,this.uint8[c+4]=r,this.uint8[c+5]=i,this.uint8[c+6]=o,this.uint8[c+7]=a,this.float32[u+2]=s,t}}Go.prototype.bytesPerElement=12,Yi(Go,"StructArrayLayout2i4ub1f12");class qo extends Bo{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(t,e,n,r){const i=this.length;return this.resize(i+1),this.emplace(i,t,e,n,r)}emplace(t,e,n,r,i){const o=4*t;return this.float32[o+0]=e,this.float32[o+1]=n,this.float32[o+2]=r,this.float32[o+3]=i,t}}qo.prototype.bytesPerElement=16,Yi(qo,"StructArrayLayout4f16");class Ho extends Bo{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(t,e,n,r,i){const o=this.length;return this.resize(o+1),this.emplace(o,t,e,n,r,i)}emplace(t,e,n,r,i,o){const a=6*t,s=3*t;return this.uint16[a+0]=e,this.uint16[a+1]=n,this.uint16[a+2]=r,this.uint16[a+3]=i,this.float32[s+2]=o,t}}Ho.prototype.bytesPerElement=12,Yi(Ho,"StructArrayLayout4ui1f12");class Zo extends Bo{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(t,e,n,r){const i=this.length;return this.resize(i+1),this.emplace(i,t,e,n,r)}emplace(t,e,n,r,i){const o=4*t;return this.uint16[o+0]=e,this.uint16[o+1]=n,this.uint16[o+2]=r,this.uint16[o+3]=i,t}}Zo.prototype.bytesPerElement=8,Yi(Zo,"StructArrayLayout4ui8");class Xo extends Bo{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(t,e,n,r,i,o){const a=this.length;return this.resize(a+1),this.emplace(a,t,e,n,r,i,o)}emplace(t,e,n,r,i,o,a){const s=6*t;return this.int16[s+0]=e,this.int16[s+1]=n,this.int16[s+2]=r,this.int16[s+3]=i,this.int16[s+4]=o,this.int16[s+5]=a,t}}Xo.prototype.bytesPerElement=12,Yi(Xo,"StructArrayLayout6i12");class Yo extends Bo{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(t,e,n,r,i,o,a,s,l,c,u,h){const d=this.length;return this.resize(d+1),this.emplace(d,t,e,n,r,i,o,a,s,l,c,u,h)}emplace(t,e,n,r,i,o,a,s,l,c,u,h,d){const f=12*t;return this.int16[f+0]=e,this.int16[f+1]=n,this.int16[f+2]=r,this.int16[f+3]=i,this.uint16[f+4]=o,this.uint16[f+5]=a,this.uint16[f+6]=s,this.uint16[f+7]=l,this.int16[f+8]=c,this.int16[f+9]=u,this.int16[f+10]=h,this.int16[f+11]=d,t}}Yo.prototype.bytesPerElement=24,Yi(Yo,"StructArrayLayout4i4ui4i24");class Ko extends Bo{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(t,e,n,r,i,o){const a=this.length;return this.resize(a+1),this.emplace(a,t,e,n,r,i,o)}emplace(t,e,n,r,i,o,a){const s=10*t,l=5*t;return this.int16[s+0]=e,this.int16[s+1]=n,this.int16[s+2]=r,this.float32[l+2]=i,this.float32[l+3]=o,this.float32[l+4]=a,t}}Ko.prototype.bytesPerElement=20,Yi(Ko,"StructArrayLayout3i3f20");class $o extends Bo{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(t){const e=this.length;return this.resize(e+1),this.emplace(e,t)}emplace(t,e){return this.uint32[1*t+0]=e,t}}$o.prototype.bytesPerElement=4,Yi($o,"StructArrayLayout1ul4");class Jo extends Bo{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(t,e,n,r,i,o,a,s,l,c,u,h,d){const f=this.length;return this.resize(f+1),this.emplace(f,t,e,n,r,i,o,a,s,l,c,u,h,d)}emplace(t,e,n,r,i,o,a,s,l,c,u,h,d,f){const p=20*t,m=10*t;return this.int16[p+0]=e,this.int16[p+1]=n,this.int16[p+2]=r,this.int16[p+3]=i,this.int16[p+4]=o,this.float32[m+3]=a,this.float32[m+4]=s,this.float32[m+5]=l,this.float32[m+6]=c,this.int16[p+14]=u,this.uint32[m+8]=h,this.uint16[p+18]=d,this.uint16[p+19]=f,t}}Jo.prototype.bytesPerElement=40,Yi(Jo,"StructArrayLayout5i4f1i1ul2ui40");class Qo extends Bo{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(t,e,n,r,i,o,a){const s=this.length;return this.resize(s+1),this.emplace(s,t,e,n,r,i,o,a)}emplace(t,e,n,r,i,o,a,s){const l=8*t;return this.int16[l+0]=e,this.int16[l+1]=n,this.int16[l+2]=r,this.int16[l+4]=i,this.int16[l+5]=o,this.int16[l+6]=a,this.int16[l+7]=s,t}}Qo.prototype.bytesPerElement=16,Yi(Qo,"StructArrayLayout3i2i2i16");class ta extends Bo{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(t,e,n,r,i){const o=this.length;return this.resize(o+1),this.emplace(o,t,e,n,r,i)}emplace(t,e,n,r,i,o){const a=4*t,s=8*t;return this.float32[a+0]=e,this.float32[a+1]=n,this.float32[a+2]=r,this.int16[s+6]=i,this.int16[s+7]=o,t}}ta.prototype.bytesPerElement=16,Yi(ta,"StructArrayLayout2f1f2i16");class ea extends Bo{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(t,e,n,r){const i=this.length;return this.resize(i+1),this.emplace(i,t,e,n,r)}emplace(t,e,n,r,i){const o=12*t,a=3*t;return this.uint8[o+0]=e,this.uint8[o+1]=n,this.float32[a+1]=r,this.float32[a+2]=i,t}}ea.prototype.bytesPerElement=12,Yi(ea,"StructArrayLayout2ub2f12");class na extends Bo{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(t,e,n){const r=this.length;return this.resize(r+1),this.emplace(r,t,e,n)}emplace(t,e,n,r){const i=3*t;return this.float32[i+0]=e,this.float32[i+1]=n,this.float32[i+2]=r,t}}na.prototype.bytesPerElement=12,Yi(na,"StructArrayLayout3f12");class ra extends Bo{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(t,e,n){const r=this.length;return this.resize(r+1),this.emplace(r,t,e,n)}emplace(t,e,n,r){const i=3*t;return this.uint16[i+0]=e,this.uint16[i+1]=n,this.uint16[i+2]=r,t}}ra.prototype.bytesPerElement=6,Yi(ra,"StructArrayLayout3ui6");class ia extends Bo{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(t,e,n,r,i,o,a,s,l,c,u,h,d,f,p,m,g,y,v,_,b){const x=this.length;return this.resize(x+1),this.emplace(x,t,e,n,r,i,o,a,s,l,c,u,h,d,f,p,m,g,y,v,_,b)}emplace(t,e,n,r,i,o,a,s,l,c,u,h,d,f,p,m,g,y,v,_,b,x){const w=30*t,S=15*t,E=60*t;return this.int16[w+0]=e,this.int16[w+1]=n,this.int16[w+2]=r,this.float32[S+2]=i,this.float32[S+3]=o,this.uint16[w+8]=a,this.uint16[w+9]=s,this.uint32[S+5]=l,this.uint32[S+6]=c,this.uint32[S+7]=u,this.uint16[w+16]=h,this.uint16[w+17]=d,this.uint16[w+18]=f,this.float32[S+10]=p,this.float32[S+11]=m,this.uint8[E+48]=g,this.uint8[E+49]=y,this.uint8[E+50]=v,this.uint32[S+13]=_,this.int16[w+28]=b,this.uint8[E+58]=x,t}}ia.prototype.bytesPerElement=60,Yi(ia,"StructArrayLayout3i2f2ui3ul3ui2f3ub1ul1i1ub60");class oa extends Bo{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(t,e,n,r,i,o,a,s,l,c,u,h,d,f,p,m,g,y,v,_,b,x,w,S,E,T,M,A,C,P){const k=this.length;return this.resize(k+1),this.emplace(k,t,e,n,r,i,o,a,s,l,c,u,h,d,f,p,m,g,y,v,_,b,x,w,S,E,T,M,A,C,P)}emplace(t,e,n,r,i,o,a,s,l,c,u,h,d,f,p,m,g,y,v,_,b,x,w,S,E,T,M,A,C,P,k){const I=38*t,O=19*t;return this.int16[I+0]=e,this.int16[I+1]=n,this.int16[I+2]=r,this.float32[O+2]=i,this.float32[O+3]=o,this.int16[I+8]=a,this.int16[I+9]=s,this.int16[I+10]=l,this.int16[I+11]=c,this.int16[I+12]=u,this.int16[I+13]=h,this.uint16[I+14]=d,this.uint16[I+15]=f,this.uint16[I+16]=p,this.uint16[I+17]=m,this.uint16[I+18]=g,this.uint16[I+19]=y,this.uint16[I+20]=v,this.uint16[I+21]=_,this.uint16[I+22]=b,this.uint16[I+23]=x,this.uint16[I+24]=w,this.uint16[I+25]=S,this.uint16[I+26]=E,this.uint16[I+27]=T,this.uint16[I+28]=M,this.uint32[O+15]=A,this.float32[O+16]=C,this.float32[O+17]=P,this.float32[O+18]=k,t}}oa.prototype.bytesPerElement=76,Yi(oa,"StructArrayLayout3i2f6i15ui1ul3f76");class aa extends Bo{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(t){const e=this.length;return this.resize(e+1),this.emplace(e,t)}emplace(t,e){return this.float32[1*t+0]=e,t}}aa.prototype.bytesPerElement=4,Yi(aa,"StructArrayLayout1f4");class sa extends Bo{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(t,e,n,r,i){const o=this.length;return this.resize(o+1),this.emplace(o,t,e,n,r,i)}emplace(t,e,n,r,i,o){const a=5*t;return this.float32[a+0]=e,this.float32[a+1]=n,this.float32[a+2]=r,this.float32[a+3]=i,this.float32[a+4]=o,t}}sa.prototype.bytesPerElement=20,Yi(sa,"StructArrayLayout5f20");class la extends Bo{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(t,e,n,r){const i=this.length;return this.resize(i+1),this.emplace(i,t,e,n,r)}emplace(t,e,n,r,i){const o=6*t;return this.uint32[3*t+0]=e,this.uint16[o+2]=n,this.uint16[o+3]=r,this.uint16[o+4]=i,t}}la.prototype.bytesPerElement=12,Yi(la,"StructArrayLayout1ul3ui12");class ca extends Bo{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(t,e){const n=this.length;return this.resize(n+1),this.emplace(n,t,e)}emplace(t,e,n){const r=2*t;return this.uint16[r+0]=e,this.uint16[r+1]=n,t}}ca.prototype.bytesPerElement=4,Yi(ca,"StructArrayLayout2ui4");class ua extends Bo{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(t){const e=this.length;return this.resize(e+1),this.emplace(e,t)}emplace(t,e){return this.uint16[1*t+0]=e,t}}ua.prototype.bytesPerElement=2,Yi(ua,"StructArrayLayout1ui2");class ha extends Bo{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(t,e){const n=this.length;return this.resize(n+1),this.emplace(n,t,e)}emplace(t,e,n){const r=2*t;return this.float32[r+0]=e,this.float32[r+1]=n,t}}ha.prototype.bytesPerElement=8,Yi(ha,"StructArrayLayout2f8");class da extends Do{get projectedAnchorX(){return this._structArray.int16[this._pos2+0]}get projectedAnchorY(){return this._structArray.int16[this._pos2+1]}get projectedAnchorZ(){return this._structArray.int16[this._pos2+2]}get tileAnchorX(){return this._structArray.int16[this._pos2+3]}get tileAnchorY(){return this._structArray.int16[this._pos2+4]}get x1(){return this._structArray.float32[this._pos4+3]}get y1(){return this._structArray.float32[this._pos4+4]}get x2(){return this._structArray.float32[this._pos4+5]}get y2(){return this._structArray.float32[this._pos4+6]}get padding(){return this._structArray.int16[this._pos2+14]}get featureIndex(){return this._structArray.uint32[this._pos4+8]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+18]}get bucketIndex(){return this._structArray.uint16[this._pos2+19]}}da.prototype.size=40;class fa extends Jo{get(t){return new da(this,t)}}Yi(fa,"CollisionBoxArray");class pa extends Do{get projectedAnchorX(){return this._structArray.int16[this._pos2+0]}get projectedAnchorY(){return this._structArray.int16[this._pos2+1]}get projectedAnchorZ(){return this._structArray.int16[this._pos2+2]}get tileAnchorX(){return this._structArray.float32[this._pos4+2]}get tileAnchorY(){return this._structArray.float32[this._pos4+3]}get glyphStartIndex(){return this._structArray.uint16[this._pos2+8]}get numGlyphs(){return this._structArray.uint16[this._pos2+9]}get vertexStartIndex(){return this._structArray.uint32[this._pos4+5]}get lineStartIndex(){return this._structArray.uint32[this._pos4+6]}get lineLength(){return this._structArray.uint32[this._pos4+7]}get segment(){return this._structArray.uint16[this._pos2+16]}get lowerSize(){return this._structArray.uint16[this._pos2+17]}get upperSize(){return this._structArray.uint16[this._pos2+18]}get lineOffsetX(){return this._structArray.float32[this._pos4+10]}get lineOffsetY(){return this._structArray.float32[this._pos4+11]}get writingMode(){return this._structArray.uint8[this._pos1+48]}get placedOrientation(){return this._structArray.uint8[this._pos1+49]}set placedOrientation(t){this._structArray.uint8[this._pos1+49]=t}get hidden(){return this._structArray.uint8[this._pos1+50]}set hidden(t){this._structArray.uint8[this._pos1+50]=t}get crossTileID(){return this._structArray.uint32[this._pos4+13]}set crossTileID(t){this._structArray.uint32[this._pos4+13]=t}get associatedIconIndex(){return this._structArray.int16[this._pos2+28]}get flipState(){return this._structArray.uint8[this._pos1+58]}set flipState(t){this._structArray.uint8[this._pos1+58]=t}}pa.prototype.size=60;class ma extends ia{get(t){return new pa(this,t)}}Yi(ma,"PlacedSymbolArray");class ga extends Do{get projectedAnchorX(){return this._structArray.int16[this._pos2+0]}get projectedAnchorY(){return this._structArray.int16[this._pos2+1]}get projectedAnchorZ(){return this._structArray.int16[this._pos2+2]}get tileAnchorX(){return this._structArray.float32[this._pos4+2]}get tileAnchorY(){return this._structArray.float32[this._pos4+3]}get rightJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+8]}get centerJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+9]}get leftJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+10]}get verticalPlacedTextSymbolIndex(){return this._structArray.int16[this._pos2+11]}get placedIconSymbolIndex(){return this._structArray.int16[this._pos2+12]}get verticalPlacedIconSymbolIndex(){return this._structArray.int16[this._pos2+13]}get key(){return this._structArray.uint16[this._pos2+14]}get textBoxStartIndex(){return this._structArray.uint16[this._pos2+15]}get textBoxEndIndex(){return this._structArray.uint16[this._pos2+16]}get verticalTextBoxStartIndex(){return this._structArray.uint16[this._pos2+17]}get verticalTextBoxEndIndex(){return this._structArray.uint16[this._pos2+18]}get iconBoxStartIndex(){return this._structArray.uint16[this._pos2+19]}get iconBoxEndIndex(){return this._structArray.uint16[this._pos2+20]}get verticalIconBoxStartIndex(){return this._structArray.uint16[this._pos2+21]}get verticalIconBoxEndIndex(){return this._structArray.uint16[this._pos2+22]}get featureIndex(){return this._structArray.uint16[this._pos2+23]}get numHorizontalGlyphVertices(){return this._structArray.uint16[this._pos2+24]}get numVerticalGlyphVertices(){return this._structArray.uint16[this._pos2+25]}get numIconVertices(){return this._structArray.uint16[this._pos2+26]}get numVerticalIconVertices(){return this._structArray.uint16[this._pos2+27]}get useRuntimeCollisionCircles(){return this._structArray.uint16[this._pos2+28]}get crossTileID(){return this._structArray.uint32[this._pos4+15]}set crossTileID(t){this._structArray.uint32[this._pos4+15]=t}get textOffset0(){return this._structArray.float32[this._pos4+16]}get textOffset1(){return this._structArray.float32[this._pos4+17]}get collisionCircleDiameter(){return this._structArray.float32[this._pos4+18]}}ga.prototype.size=76;class ya extends oa{get(t){return new ga(this,t)}}Yi(ya,"SymbolInstanceArray");class va extends aa{getoffsetX(t){return this.float32[1*t+0]}}Yi(va,"GlyphOffsetArray");class _a extends Uo{getx(t){return this.int16[2*t+0]}gety(t){return this.int16[2*t+1]}}Yi(_a,"SymbolLineVertexArray");class ba extends Do{get featureIndex(){return this._structArray.uint32[this._pos4+0]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+2]}get bucketIndex(){return this._structArray.uint16[this._pos2+3]}get layoutVertexArrayOffset(){return this._structArray.uint16[this._pos2+4]}}ba.prototype.size=12;class xa extends la{get(t){return new ba(this,t)}}Yi(xa,"FeatureIndexArray");class wa extends ca{geta_centroid_pos0(t){return this.uint16[2*t+0]}geta_centroid_pos1(t){return this.uint16[2*t+1]}}Yi(wa,"FillExtrusionCentroidArray");const Sa=Fo([{name:"a_pattern",components:4,type:"Uint16"},{name:"a_pixel_ratio",components:1,type:"Float32"}]),Ea=Fo([{name:"a_dash",components:4,type:"Uint16"}]);var Ta={exports:{}},Ma={exports:{}};Ma.exports=function(t,e){var n,r,i,o,a,s,l,c;for(r=t.length-(n=3&t.length),i=e,a=3432918353,s=461845907,c=0;c<r;)l=255&t.charCodeAt(c)|(255&t.charCodeAt(++c))<<8|(255&t.charCodeAt(++c))<<16|(255&t.charCodeAt(++c))<<24,++c,i=27492+(65535&(o=5*(65535&(i=(i^=l=(65535&(l=(l=(65535&l)*a+(((l>>>16)*a&65535)<<16)&4294967295)<<15|l>>>17))*s+(((l>>>16)*s&65535)<<16)&4294967295)<<13|i>>>19))+((5*(i>>>16)&65535)<<16)&4294967295))+((58964+(o>>>16)&65535)<<16);switch(l=0,n){case 3:l^=(255&t.charCodeAt(c+2))<<16;case 2:l^=(255&t.charCodeAt(c+1))<<8;case 1:i^=l=(65535&(l=(l=(65535&(l^=255&t.charCodeAt(c)))*a+(((l>>>16)*a&65535)<<16)&4294967295)<<15|l>>>17))*s+(((l>>>16)*s&65535)<<16)&4294967295}return i^=t.length,i=2246822507*(65535&(i^=i>>>16))+((2246822507*(i>>>16)&65535)<<16)&4294967295,i=3266489909*(65535&(i^=i>>>13))+((3266489909*(i>>>16)&65535)<<16)&4294967295,(i^=i>>>16)>>>0};var Aa=Ma.exports,Ca={exports:{}};Ca.exports=function(t,e){for(var n,r=t.length,i=e^r,o=0;r>=4;)n=1540483477*(65535&(n=255&t.charCodeAt(o)|(255&t.charCodeAt(++o))<<8|(255&t.charCodeAt(++o))<<16|(255&t.charCodeAt(++o))<<24))+((1540483477*(n>>>16)&65535)<<16),i=1540483477*(65535&i)+((1540483477*(i>>>16)&65535)<<16)^(n=1540483477*(65535&(n^=n>>>24))+((1540483477*(n>>>16)&65535)<<16)),r-=4,++o;switch(r){case 3:i^=(255&t.charCodeAt(o+2))<<16;case 2:i^=(255&t.charCodeAt(o+1))<<8;case 1:i=1540483477*(65535&(i^=255&t.charCodeAt(o)))+((1540483477*(i>>>16)&65535)<<16)}return i=1540483477*(65535&(i^=i>>>13))+((1540483477*(i>>>16)&65535)<<16),(i^=i>>>15)>>>0};var Pa=Aa,ka=Ca.exports;Ta.exports=Pa,Ta.exports.murmur3=Pa,Ta.exports.murmur2=ka;var Ia=d(Ta.exports);class Oa{constructor(){this.ids=[],this.positions=[],this.indexed=!1}add(t,e,n,r){this.ids.push(La(t)),this.positions.push(e,n,r)}getPositions(t){const e=La(t);let n=0,r=this.ids.length-1;for(;n<r;){const t=n+r>>1;this.ids[t]>=e?r=t:n=t+1}const i=[];for(;this.ids[n]===e;)i.push({index:this.positions[3*n],start:this.positions[3*n+1],end:this.positions[3*n+2]}),n++;return i}static serialize(t,e){const n=new Float64Array(t.ids),r=new Uint32Array(t.positions);return ja(n,r,0,n.length-1),e&&e.push(n.buffer,r.buffer),{ids:n,positions:r}}static deserialize(t){const e=new Oa;return e.ids=t.ids,e.positions=t.positions,e.indexed=!0,e}}function La(t){const e=+t;return!isNaN(e)&&Number.MIN_SAFE_INTEGER<=e&&e<=Number.MAX_SAFE_INTEGER?e:Ia(String(t))}function ja(t,e,n,r){for(;n<r;){const i=t[n+r>>1];let o=n-1,a=r+1;for(;;){do{o++}while(t[o]<i);do{a--}while(t[a]>i);if(o>=a)break;za(t,o,a),za(e,3*o,3*a),za(e,3*o+1,3*a+1),za(e,3*o+2,3*a+2)}a-n<r-a?(ja(t,e,n,a),n=a+1):(ja(t,e,a+1,r),r=a)}}function za(t,e,n){const r=t[e];t[e]=t[n],t[n]=r}Yi(Oa,"FeaturePositionMap");class Ra{constructor(t){this.gl=t.gl,this.initialized=!1}fetchUniformLocation(t,e){return this.location||this.initialized||(this.location=this.gl.getUniformLocation(t,e),this.initialized=!0),!!this.location}}class Da extends Ra{constructor(t){super(t),this.current=0}set(t,e,n){this.fetchUniformLocation(t,e)&&this.current!==n&&(this.current=n,this.gl.uniform1f(this.location,n))}}class Ba extends Ra{constructor(t){super(t),this.current=[0,0,0,0]}set(t,e,n){this.fetchUniformLocation(t,e)&&(n[0]===this.current[0]&&n[1]===this.current[1]&&n[2]===this.current[2]&&n[3]===this.current[3]||(this.current=n,this.gl.uniform4f(this.location,n[0],n[1],n[2],n[3])))}}class Fa extends Ra{constructor(t){super(t),this.current=Ie.transparent}set(t,e,n){this.fetchUniformLocation(t,e)&&(n.r===this.current.r&&n.g===this.current.g&&n.b===this.current.b&&n.a===this.current.a||(this.current=n,this.gl.uniform4f(this.location,n.r,n.g,n.b,n.a)))}}const Na=new Float32Array(16),Ua=new Float32Array(9),Va=new Float32Array(4);function Wa(t){return[zo(255*t.r,255*t.g),zo(255*t.b,255*t.a)]}class Ga{constructor(t,e,n){this.value=t,this.uniformNames=e.map((t=>"u_".concat(t))),this.type=n}setUniform(t,e,n,r,i){e.set(t,i,r.constantOr(this.value))}getBinding(t,e){return"color"===this.type?new Fa(t):new Da(t)}}class qa{constructor(t,e){this.uniformNames=e.map((t=>"u_".concat(t))),this.pattern=null,this.pixelRatio=1}setConstantPatternPositions(t){this.pixelRatio=t.pixelRatio||1,this.pattern=t.tl.concat(t.br)}setUniform(t,e,n,r,i){const o="u_pattern"===i||"u_dash"===i?this.pattern:"u_pixel_ratio"===i?this.pixelRatio:null;o&&e.set(t,i,o)}getBinding(t,e){return"u_pattern"===e||"u_dash"===e?new Ba(t):new Da(t)}}class Ha{constructor(t,e,n,r){this.expression=t,this.type=n,this.maxValue=0,this.paintVertexAttributes=e.map((t=>({name:"a_".concat(t),type:"Float32",components:"color"===n?2:1,offset:0}))),this.paintVertexArray=new r}populatePaintArray(t,e,n,r,i,o){const a=this.paintVertexArray.length,s=this.expression.evaluate(new wo(0),e,{},i,r,o);this.paintVertexArray.resize(t),this._setPaintValue(a,t,s)}updatePaintArray(t,e,n,r,i){const o=this.expression.evaluate({zoom:0},n,r,void 0,i);this._setPaintValue(t,e,o)}_setPaintValue(t,e,n){if("color"===this.type){const r=Wa(n);for(let n=t;n<e;n++)this.paintVertexArray.emplace(n,r[0],r[1])}else{for(let r=t;r<e;r++)this.paintVertexArray.emplace(r,n);this.maxValue=Math.max(this.maxValue,Math.abs(n))}}upload(t){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=t.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}}class Za{constructor(t,e,n,r,i,o){this.expression=t,this.uniformNames=e.map((t=>"u_".concat(t,"_t"))),this.type=n,this.useIntegerZoom=r,this.zoom=i,this.maxValue=0,this.paintVertexAttributes=e.map((t=>({name:"a_".concat(t),type:"Float32",components:"color"===n?4:2,offset:0}))),this.paintVertexArray=new o}populatePaintArray(t,e,n,r,i,o){const a=this.expression.evaluate(new wo(this.zoom),e,{},i,r,o),s=this.expression.evaluate(new wo(this.zoom+1),e,{},i,r,o),l=this.paintVertexArray.length;this.paintVertexArray.resize(t),this._setPaintValue(l,t,a,s)}updatePaintArray(t,e,n,r,i){const o=this.expression.evaluate({zoom:this.zoom},n,r,void 0,i),a=this.expression.evaluate({zoom:this.zoom+1},n,r,void 0,i);this._setPaintValue(t,e,o,a)}_setPaintValue(t,e,n,r){if("color"===this.type){const i=Wa(n),o=Wa(r);for(let n=t;n<e;n++)this.paintVertexArray.emplace(n,i[0],i[1],o[0],o[1])}else{for(let i=t;i<e;i++)this.paintVertexArray.emplace(i,n,r);this.maxValue=Math.max(this.maxValue,Math.abs(n),Math.abs(r))}}upload(t){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=t.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}setUniform(t,e,n,r,i){const o=this.useIntegerZoom?Math.floor(n.zoom):n.zoom,a=A(this.expression.interpolationFactor(o,this.zoom,this.zoom+1),0,1);e.set(t,i,a)}getBinding(t,e){return new Da(t)}}class Xa{constructor(t,e,n,r,i){this.expression=t,this.layerId=i,this.paintVertexAttributes=("array"===n?Ea:Sa).members;for(let o=0;o<e.length;++o);this.paintVertexArray=new r}populatePaintArray(t,e,n){const r=this.paintVertexArray.length;this.paintVertexArray.resize(t),this._setPaintValues(r,t,e.patterns&&e.patterns[this.layerId],n)}updatePaintArray(t,e,n,r,i,o){this._setPaintValues(t,e,n.patterns&&n.patterns[this.layerId],o)}_setPaintValues(t,e,n,r){if(!r||!n)return;const i=r[n];if(!i)return;const{tl:o,br:a,pixelRatio:s}=i;for(let l=t;l<e;l++)this.paintVertexArray.emplace(l,o[0],o[1],a[0],a[1],s)}upload(t){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer=t.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}}class Ya{constructor(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:()=>!0;this.binders={},this._buffers=[];const r=[];for(const i in t.paint._values){if(!n(i))continue;const o=t.paint.get(i);if(!(o instanceof Po&&Rr(o.property.specification)))continue;const a=Ja(i,t.type),s=o.value,l=o.property.specification.type,c=!!o.property.useIntegerZoom,u="line-dasharray"===i||i.endsWith("pattern"),h="line-dasharray"===i&&"constant"!==t.layout.get("line-cap").value.kind;if("constant"!==s.kind||h)if("source"===s.kind||h||u){const e=es(i,l,"source");this.binders[i]=u?new Xa(s,a,l,e,t.id):new Ha(s,a,l,e),r.push("/a_".concat(i))}else{const t=es(i,l,"composite");this.binders[i]=new Za(s,a,l,c,e,t),r.push("/z_".concat(i))}else this.binders[i]=u?new qa(s.value,a):new Ga(s.value,a,l),r.push("/u_".concat(i))}this.cacheKey=r.sort().join("")}getMaxValue(t){const e=this.binders[t];return e instanceof Ha||e instanceof Za?e.maxValue:0}populatePaintArrays(t,e,n,r,i,o){for(const a in this.binders){const s=this.binders[a];(s instanceof Ha||s instanceof Za||s instanceof Xa)&&s.populatePaintArray(t,e,n,r,i,o)}}setConstantPatternPositions(t){for(const e in this.binders){const n=this.binders[e];n instanceof qa&&n.setConstantPatternPositions(t)}}updatePaintArrays(t,e,n,r,i,o){let a=!1;for(const s in t){const l=e.getPositions(s);for(const e of l){const l=n.feature(e.index);for(const n in this.binders){const c=this.binders[n];if((c instanceof Ha||c instanceof Za||c instanceof Xa)&&!0===c.expression.isStateDependent){const u=r.paint.get(n);c.expression=u.value,c.updatePaintArray(e.start,e.end,l,t[s],i,o),a=!0}}}}return a}defines(){const t=[];for(const e in this.binders){const n=this.binders[e];(n instanceof Ga||n instanceof qa)&&t.push(...n.uniformNames.map((t=>"#define HAS_UNIFORM_".concat(t))))}return t}getBinderAttributes(){const t=[];for(const e in this.binders){const n=this.binders[e];if(n instanceof Ha||n instanceof Za||n instanceof Xa)for(let e=0;e<n.paintVertexAttributes.length;e++)t.push(n.paintVertexAttributes[e].name)}return t}getBinderUniforms(){const t=[];for(const e in this.binders){const n=this.binders[e];if(n instanceof Ga||n instanceof qa||n instanceof Za)for(const e of n.uniformNames)t.push(e)}return t}getPaintVertexBuffers(){return this._buffers}getUniforms(t){const e=[];for(const n in this.binders){const r=this.binders[n];if(r instanceof Ga||r instanceof qa||r instanceof Za)for(const i of r.uniformNames)e.push({name:i,property:n,binding:r.getBinding(t,i)})}return e}setUniforms(t,e,n,r,i){for(const{name:o,property:a,binding:s}of n)this.binders[a].setUniform(t,s,i,r.get(a),o)}updatePaintBuffers(){this._buffers=[];for(const t in this.binders){const e=this.binders[t];(e instanceof Ha||e instanceof Za||e instanceof Xa)&&e.paintVertexBuffer&&this._buffers.push(e.paintVertexBuffer)}}upload(t){for(const e in this.binders){const n=this.binders[e];(n instanceof Ha||n instanceof Za||n instanceof Xa)&&n.upload(t)}this.updatePaintBuffers()}destroy(){for(const t in this.binders){const e=this.binders[t];(e instanceof Ha||e instanceof Za||e instanceof Xa)&&e.destroy()}}}class Ka{constructor(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:()=>!0;this.programConfigurations={};for(const r of t)this.programConfigurations[r.id]=new Ya(r,e,n);this.needsUpload=!1,this._featureMap=new Oa,this._bufferOffset=0}populatePaintArrays(t,e,n,r,i,o,a){for(const s in this.programConfigurations)this.programConfigurations[s].populatePaintArrays(t,e,r,i,o,a);void 0!==e.id&&this._featureMap.add(e.id,n,this._bufferOffset,t),this._bufferOffset=t,this.needsUpload=!0}updatePaintArrays(t,e,n,r,i){for(const o of n)this.needsUpload=this.programConfigurations[o.id].updatePaintArrays(t,this._featureMap,e,o,r,i)||this.needsUpload}get(t){return this.programConfigurations[t]}upload(t){if(this.needsUpload){for(const e in this.programConfigurations)this.programConfigurations[e].upload(t);this.needsUpload=!1}}destroy(){for(const t in this.programConfigurations)this.programConfigurations[t].destroy()}}const $a={"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-pattern":["pattern","pixel_ratio"],"fill-pattern":["pattern","pixel_ratio"],"fill-extrusion-pattern":["pattern","pixel_ratio"],"line-dasharray":["dash"]};function Ja(t,e){return $a[t]||[t.replace("".concat(e,"-"),"").replace(/-/g,"_")]}const Qa={"line-pattern":{source:Ho,composite:Ho},"fill-pattern":{source:Ho,composite:Ho},"fill-extrusion-pattern":{source:Ho,composite:Ho},"line-dasharray":{source:Zo,composite:Zo}},ts={color:{source:ha,composite:qo},number:{source:aa,composite:ha}};function es(t,e,n){const r=Qa[t];return r&&r[n]||ts[e][n]}Yi(Ga,"ConstantBinder"),Yi(qa,"PatternConstantBinder"),Yi(Ha,"SourceExpressionBinder"),Yi(Xa,"PatternCompositeBinder"),Yi(Za,"CompositeExpressionBinder"),Yi(Ya,"ProgramConfiguration",{omit:["_buffers"]}),Yi(Ka,"ProgramConfigurationSet");const ns="-transition";class rs extends Qt{constructor(t,e){if(super(),this.id=t.id,this.type=t.type,this._featureFilter={filter:()=>!0,needGeometry:!1,needFeature:!1},this._filterCompiled=!1,"custom"!==t.type&&(this.metadata=t.metadata,this.minzoom=t.minzoom,this.maxzoom=t.maxzoom,"background"!==t.type&&"sky"!==t.type&&(this.source=t.source,this.sourceLayer=t["source-layer"],this.filter=t.filter),e.layout&&(this._unevaluatedLayout=new Co(e.layout)),e.paint)){this._transitionablePaint=new To(e.paint);for(const e in t.paint)this.setPaintProperty(e,t.paint[e],{validate:!1});for(const e in t.layout)this.setLayoutProperty(e,t.layout[e],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned(),this.paint=new ko(e.paint)}}getLayoutProperty(t){return"visibility"===t?this.visibility:this._unevaluatedLayout.getValue(t)}setLayoutProperty(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};null!=e&&this._validate(Ui,"layers.".concat(this.id,".layout.").concat(t),t,e,n)||("visibility"!==t?this._unevaluatedLayout.setValue(t,e):this.visibility=e)}getPaintProperty(t){return F(t,ns)?this._transitionablePaint.getTransition(t.slice(0,-11)):this._transitionablePaint.getValue(t)}setPaintProperty(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(null!=e&&this._validate(Ni,"layers.".concat(this.id,".paint.").concat(t),t,e,n))return!1;if(F(t,ns))return this._transitionablePaint.setTransition(t.slice(0,-11),e||void 0),!1;{const n=this._transitionablePaint._values[t],r=n.value.isDataDriven(),i=n.value;this._transitionablePaint.setValue(t,e),this._handleSpecialPaintPropertyUpdate(t);const o=this._transitionablePaint._values[t].value,a=o.isDataDriven(),s=F(t,"pattern")||"line-dasharray"===t;return a||r||s||this._handleOverridablePaintPropertyUpdate(t,i,o)}}_handleSpecialPaintPropertyUpdate(t){}getProgramIds(){return null}getProgramConfiguration(t){return null}_handleOverridablePaintPropertyUpdate(t,e,n){return!1}isHidden(t){return!!(this.minzoom&&t<this.minzoom)||!!(this.maxzoom&&t>=this.maxzoom)||"none"===this.visibility}updateTransitions(t){this._transitioningPaint=this._transitionablePaint.transitioned(t,this._transitioningPaint)}hasTransition(){return this._transitioningPaint.hasTransition()}recalculate(t,e){this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(t,void 0,e)),this.paint=this._transitioningPaint.possiblyEvaluate(t,void 0,e)}serialize(){const t={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return this.visibility&&(t.layout=t.layout||{},t.layout.visibility=this.visibility),U(t,((t,e)=>!(void 0===t||"layout"===e&&!Object.keys(t).length||"paint"===e&&!Object.keys(t).length)))}_validate(t,e,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};return(!i||!1!==i.validate)&&Wi(this,t.call(Fi,{key:e,layerType:this.type,objectKey:n,value:r,styleSpec:te,style:{glyphs:!0,sprite:!0}}))}is3D(){return!1}isSky(){return!1}isTileClipped(){return!1}hasOffscreenPass(){return!1}resize(){}isStateDependent(){for(const t in this.paint._values){const e=this.paint.get(t);if(e instanceof Po&&Rr(e.property.specification)&&("source"===e.value.kind||"composite"===e.value.kind)&&e.value.isStateDependent)return!0}return!1}compileFilter(){this._filterCompiled||(this._featureFilter=hi(this.filter),this._filterCompiled=!0)}invalidateCompiledFilter(){this._filterCompiled=!1}dynamicFilter(){return this._featureFilter.dynamicFilter}dynamicFilterNeedsFeature(){return this._featureFilter.needFeature}}const is=Fo([{name:"a_pos",components:2,type:"Int16"}],4),os=Fo([{name:"a_pos_3",components:3,type:"Int16"},{name:"a_pos_normal_3",components:3,type:"Int16"}]);class as{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];this.segments=t}prepareSegment(t,e,n,r){let i=this.segments[this.segments.length-1];return t>as.MAX_VERTEX_ARRAY_LENGTH&&G("Max vertices per segment is ".concat(as.MAX_VERTEX_ARRAY_LENGTH,": bucket requested ").concat(t)),(!i||i.vertexLength+t>as.MAX_VERTEX_ARRAY_LENGTH||i.sortKey!==r)&&(i={vertexOffset:e.length,primitiveOffset:n.length,vertexLength:0,primitiveLength:0},void 0!==r&&(i.sortKey=r),this.segments.push(i)),i}get(){return this.segments}destroy(){for(const t of this.segments)for(const e in t.vaos)t.vaos[e].destroy()}static simpleSegment(t,e,n,r){return new as([{vertexOffset:t,primitiveOffset:e,vertexLength:n,primitiveLength:r,vaos:{},sortKey:0}])}}as.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,Yi(as,"SegmentVector");var ss=8192;class ls{constructor(t,e){t&&(e?this.setSouthWest(t).setNorthEast(e):4===t.length?this.setSouthWest([t[0],t[1]]).setNorthEast([t[2],t[3]]):this.setSouthWest(t[0]).setNorthEast(t[1]))}setNorthEast(t){return this._ne=t instanceof Vl?new Vl(t.lng,t.lat):Vl.convert(t),this}setSouthWest(t){return this._sw=t instanceof Vl?new Vl(t.lng,t.lat):Vl.convert(t),this}extend(t){const e=this._sw,n=this._ne;let r,i;if(t instanceof Vl)r=t,i=t;else{if(!(t instanceof ls))return Array.isArray(t)?4===t.length||t.every(Array.isArray)?this.extend(ls.convert(t)):this.extend(Vl.convert(t)):"object"==typeof t&&null!==t&&t.hasOwnProperty("lat")&&(t.hasOwnProperty("lon")||t.hasOwnProperty("lng"))?this.extend(Vl.convert(t)):this;if(r=t._sw,i=t._ne,!r||!i)return this}return e||n?(e.lng=Math.min(r.lng,e.lng),e.lat=Math.min(r.lat,e.lat),n.lng=Math.max(i.lng,n.lng),n.lat=Math.max(i.lat,n.lat)):(this._sw=new Vl(r.lng,r.lat),this._ne=new Vl(i.lng,i.lat)),this}getCenter(){return new Vl((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)}getSouthWest(){return this._sw}getNorthEast(){return this._ne}getNorthWest(){return new Vl(this.getWest(),this.getNorth())}getSouthEast(){return new Vl(this.getEast(),this.getSouth())}getWest(){return this._sw.lng}getSouth(){return this._sw.lat}getEast(){return this._ne.lng}getNorth(){return this._ne.lat}toArray(){return[this._sw.toArray(),this._ne.toArray()]}toString(){return"LngLatBounds(".concat(this._sw.toString(),", ").concat(this._ne.toString(),")")}isEmpty(){return!(this._sw&&this._ne)}contains(t){const{lng:e,lat:n}=Vl.convert(t);let r=this._sw.lng<=e&&e<=this._ne.lng;return this._sw.lng>this._ne.lng&&(r=this._sw.lng>=e&&e>=this._ne.lng),this._sw.lat<=n&&n<=this._ne.lat&&r}static convert(t){return!t||t instanceof ls?t:new ls(t)}}var cs=1e-6,us="undefined"!=typeof Float32Array?Float32Array:Array;function hs(){var t=new us(9);return us!=Float32Array&&(t[1]=0,t[2]=0,t[3]=0,t[5]=0,t[6]=0,t[7]=0),t[0]=1,t[4]=1,t[8]=1,t}function ds(t,e,n){var r=e[0],i=e[1],o=e[2],a=e[3],s=e[4],l=e[5],c=e[6],u=e[7],h=e[8],d=n[0],f=n[1],p=n[2],m=n[3],g=n[4],y=n[5],v=n[6],_=n[7],b=n[8];return t[0]=d*r+f*a+p*c,t[1]=d*i+f*s+p*u,t[2]=d*o+f*l+p*h,t[3]=m*r+g*a+y*c,t[4]=m*i+g*s+y*u,t[5]=m*o+g*l+y*h,t[6]=v*r+_*a+b*c,t[7]=v*i+_*s+b*u,t[8]=v*o+_*l+b*h,t}function fs(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function ps(t,e){var n=e[0],r=e[1],i=e[2],o=e[3],a=e[4],s=e[5],l=e[6],c=e[7],u=e[8],h=e[9],d=e[10],f=e[11],p=e[12],m=e[13],g=e[14],y=e[15],v=n*s-r*a,_=n*l-i*a,b=n*c-o*a,x=r*l-i*s,w=r*c-o*s,S=i*c-o*l,E=u*m-h*p,T=u*g-d*p,M=u*y-f*p,A=h*g-d*m,C=h*y-f*m,P=d*y-f*g,k=v*P-_*C+b*A+x*M-w*T+S*E;return k?(t[0]=(s*P-l*C+c*A)*(k=1/k),t[1]=(i*C-r*P-o*A)*k,t[2]=(m*S-g*w+y*x)*k,t[3]=(d*w-h*S-f*x)*k,t[4]=(l*M-a*P-c*T)*k,t[5]=(n*P-i*M+o*T)*k,t[6]=(g*b-p*S-y*_)*k,t[7]=(u*S-d*b+f*_)*k,t[8]=(a*C-s*M+c*E)*k,t[9]=(r*M-n*C-o*E)*k,t[10]=(p*w-m*b+y*v)*k,t[11]=(h*b-u*w-f*v)*k,t[12]=(s*T-a*A-l*E)*k,t[13]=(n*A-r*T+i*E)*k,t[14]=(m*_-p*x-g*v)*k,t[15]=(u*x-h*_+d*v)*k,t):null}function ms(t,e,n){var r=e[0],i=e[1],o=e[2],a=e[3],s=e[4],l=e[5],c=e[6],u=e[7],h=e[8],d=e[9],f=e[10],p=e[11],m=e[12],g=e[13],y=e[14],v=e[15],_=n[0],b=n[1],x=n[2],w=n[3];return t[0]=_*r+b*s+x*h+w*m,t[1]=_*i+b*l+x*d+w*g,t[2]=_*o+b*c+x*f+w*y,t[3]=_*a+b*u+x*p+w*v,t[4]=(_=n[4])*r+(b=n[5])*s+(x=n[6])*h+(w=n[7])*m,t[5]=_*i+b*l+x*d+w*g,t[6]=_*o+b*c+x*f+w*y,t[7]=_*a+b*u+x*p+w*v,t[8]=(_=n[8])*r+(b=n[9])*s+(x=n[10])*h+(w=n[11])*m,t[9]=_*i+b*l+x*d+w*g,t[10]=_*o+b*c+x*f+w*y,t[11]=_*a+b*u+x*p+w*v,t[12]=(_=n[12])*r+(b=n[13])*s+(x=n[14])*h+(w=n[15])*m,t[13]=_*i+b*l+x*d+w*g,t[14]=_*o+b*c+x*f+w*y,t[15]=_*a+b*u+x*p+w*v,t}function gs(t,e,n){var r,i,o,a,s,l,c,u,h,d,f,p,m=n[0],g=n[1],y=n[2];return e===t?(t[12]=e[0]*m+e[4]*g+e[8]*y+e[12],t[13]=e[1]*m+e[5]*g+e[9]*y+e[13],t[14]=e[2]*m+e[6]*g+e[10]*y+e[14],t[15]=e[3]*m+e[7]*g+e[11]*y+e[15]):(i=e[1],o=e[2],a=e[3],s=e[4],l=e[5],c=e[6],u=e[7],h=e[8],d=e[9],f=e[10],p=e[11],t[0]=r=e[0],t[1]=i,t[2]=o,t[3]=a,t[4]=s,t[5]=l,t[6]=c,t[7]=u,t[8]=h,t[9]=d,t[10]=f,t[11]=p,t[12]=r*m+s*g+h*y+e[12],t[13]=i*m+l*g+d*y+e[13],t[14]=o*m+c*g+f*y+e[14],t[15]=a*m+u*g+p*y+e[15]),t}function ys(t,e,n){var r=n[0],i=n[1],o=n[2];return t[0]=e[0]*r,t[1]=e[1]*r,t[2]=e[2]*r,t[3]=e[3]*r,t[4]=e[4]*i,t[5]=e[5]*i,t[6]=e[6]*i,t[7]=e[7]*i,t[8]=e[8]*o,t[9]=e[9]*o,t[10]=e[10]*o,t[11]=e[11]*o,t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}function vs(t,e,n){var r=Math.sin(n),i=Math.cos(n),o=e[4],a=e[5],s=e[6],l=e[7],c=e[8],u=e[9],h=e[10],d=e[11];return e!==t&&(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[4]=o*i+c*r,t[5]=a*i+u*r,t[6]=s*i+h*r,t[7]=l*i+d*r,t[8]=c*i-o*r,t[9]=u*i-a*r,t[10]=h*i-s*r,t[11]=d*i-l*r,t}function _s(t,e,n){var r=Math.sin(n),i=Math.cos(n),o=e[0],a=e[1],s=e[2],l=e[3],c=e[8],u=e[9],h=e[10],d=e[11];return e!==t&&(t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=o*i-c*r,t[1]=a*i-u*r,t[2]=s*i-h*r,t[3]=l*i-d*r,t[8]=o*r+c*i,t[9]=a*r+u*i,t[10]=s*r+h*i,t[11]=l*r+d*i,t}function bs(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=e[1],t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=e[2],t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function xs(t,e,n){var r,i,o,a=n[0],s=n[1],l=n[2],c=Math.hypot(a,s,l);return c<cs?null:(a*=c=1/c,s*=c,l*=c,r=Math.sin(e),i=Math.cos(e),t[0]=a*a*(o=1-i)+i,t[1]=s*a*o+l*r,t[2]=l*a*o-s*r,t[3]=0,t[4]=a*s*o-l*r,t[5]=s*s*o+i,t[6]=l*s*o+a*r,t[7]=0,t[8]=a*l*o+s*r,t[9]=s*l*o-a*r,t[10]=l*l*o+i,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t)}Math.hypot||(Math.hypot=function(){for(var t=0,e=arguments.length;e--;)t+=arguments[e]*arguments[e];return Math.sqrt(t)});var ws=ms;function Ss(){var t=new us(3);return us!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0),t}function Es(t){var e=new us(3);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e}function Ts(t){return Math.hypot(t[0],t[1],t[2])}function Ms(t,e,n){var r=new us(3);return r[0]=t,r[1]=e,r[2]=n,r}function As(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t}function Cs(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t}function Ps(t,e,n){return t[0]=e[0]*n[0],t[1]=e[1]*n[1],t[2]=e[2]*n[2],t}function ks(t,e,n){return t[0]=Math.min(e[0],n[0]),t[1]=Math.min(e[1],n[1]),t[2]=Math.min(e[2],n[2]),t}function Is(t,e,n){return t[0]=Math.max(e[0],n[0]),t[1]=Math.max(e[1],n[1]),t[2]=Math.max(e[2],n[2]),t}function Os(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t}function Ls(t,e,n,r){return t[0]=e[0]+n[0]*r,t[1]=e[1]+n[1]*r,t[2]=e[2]+n[2]*r,t}function js(t,e){var n=e[0],r=e[1],i=e[2],o=n*n+r*r+i*i;return o>0&&(o=1/Math.sqrt(o)),t[0]=e[0]*o,t[1]=e[1]*o,t[2]=e[2]*o,t}function zs(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}function Rs(t,e,n){var r=e[0],i=e[1],o=e[2],a=n[0],s=n[1],l=n[2];return t[0]=i*l-o*s,t[1]=o*a-r*l,t[2]=r*s-i*a,t}function Ds(t,e,n){var r=e[0],i=e[1],o=e[2],a=n[3]*r+n[7]*i+n[11]*o+n[15];return t[0]=(n[0]*r+n[4]*i+n[8]*o+n[12])/(a=a||1),t[1]=(n[1]*r+n[5]*i+n[9]*o+n[13])/a,t[2]=(n[2]*r+n[6]*i+n[10]*o+n[14])/a,t}function Bs(t,e,n){var r=n[0],i=n[1],o=n[2],a=e[0],s=e[1],l=e[2],c=i*l-o*s,u=o*a-r*l,h=r*s-i*a,d=i*h-o*u,f=o*c-r*h,p=r*u-i*c,m=2*n[3];return u*=m,h*=m,f*=2,p*=2,t[0]=a+(c*=m)+(d*=2),t[1]=s+u+f,t[2]=l+h+p,t}var Fs,Ns=Cs,Us=Ps,Vs=Ts;function Ws(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t}function Gs(t,e){var n=e[0],r=e[1],i=e[2],o=e[3],a=n*n+r*r+i*i+o*o;return a>0&&(a=1/Math.sqrt(a)),t[0]=n*a,t[1]=r*a,t[2]=i*a,t[3]=o*a,t}function qs(t,e,n){var r=e[0],i=e[1],o=e[2],a=e[3];return t[0]=n[0]*r+n[4]*i+n[8]*o+n[12]*a,t[1]=n[1]*r+n[5]*i+n[9]*o+n[13]*a,t[2]=n[2]*r+n[6]*i+n[10]*o+n[14]*a,t[3]=n[3]*r+n[7]*i+n[11]*o+n[15]*a,t}function Hs(){var t=new us(4);return us!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0),t[3]=1,t}function Zs(t){return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t}function Xs(t,e,n){n*=.5;var r=e[0],i=e[1],o=e[2],a=e[3],s=Math.sin(n),l=Math.cos(n);return t[0]=r*l+a*s,t[1]=i*l+o*s,t[2]=o*l-i*s,t[3]=a*l-r*s,t}function Ys(t,e,n){n*=.5;var r=e[0],i=e[1],o=e[2],a=e[3],s=Math.sin(n),l=Math.cos(n);return t[0]=r*l-o*s,t[1]=i*l+a*s,t[2]=o*l+r*s,t[3]=a*l-i*s,t}Ss(),Fs=new us(4),us!=Float32Array&&(Fs[0]=0,Fs[1]=0,Fs[2]=0,Fs[3]=0);var Ks=Gs;Ss(),Ms(1,0,0),Ms(0,1,0),Hs(),Hs(),hs();const $s=Fo([{type:"Float32",name:"a_globe_pos",components:3},{type:"Float32",name:"a_uv",components:2}]),{members:Js}=$s,Qs=Fo([{name:"a_pos_3",components:3,type:"Int16"}]);var tl=Fo([{name:"a_pos",type:"Int16",components:2}]);class el{constructor(t,e){this.pos=t,this.dir=e}intersectsPlane(t,e,n){const r=zs(e,this.dir);if(Math.abs(r)<1e-6)return!1;const i=((t[0]-this.pos[0])*e[0]+(t[1]-this.pos[1])*e[1]+(t[2]-this.pos[2])*e[2])/r;return n[0]=this.pos[0]+this.dir[0]*i,n[1]=this.pos[1]+this.dir[1]*i,n[2]=this.pos[2]+this.dir[2]*i,!0}closestPointOnSphere(t,e,n){if(function(t,e){var n=t[0],r=t[1],i=t[2],o=e[0],a=e[1],s=e[2];return Math.abs(n-o)<=cs*Math.max(1,Math.abs(n),Math.abs(o))&&Math.abs(r-a)<=cs*Math.max(1,Math.abs(r),Math.abs(a))&&Math.abs(i-s)<=cs*Math.max(1,Math.abs(i),Math.abs(s))}(this.pos,t)||0===e)return n[0]=n[1]=n[2]=0,!1;const[r,i,o]=this.dir,a=this.pos[0]-t[0],s=this.pos[1]-t[1],l=this.pos[2]-t[2],c=r*r+i*i+o*o,u=2*(a*r+s*i+l*o),h=u*u-4*c*(a*a+s*s+l*l-e*e);if(h<0){const t=Math.max(-u/2,0),c=a+r*t,h=s+i*t,d=l+o*t,f=Math.hypot(c,h,d);return n[0]=c*e/f,n[1]=h*e/f,n[2]=d*e/f,!1}{const t=(-u-Math.sqrt(h))/(2*c);if(t<0){const t=Math.hypot(a,s,l);return n[0]=a*e/t,n[1]=s*e/t,n[2]=l*e/t,!1}return n[0]=a+r*t,n[1]=s+i*t,n[2]=l+o*t,!0}}}class nl{constructor(t,e,n,r,i){this.TL=t,this.TR=e,this.BR=n,this.BL=r,this.horizon=i}static fromInvProjectionMatrix(t,e,n){const r=[-1,1,1],i=[1,1,1],o=[1,-1,1],a=[-1,-1,1],s=Ds(r,r,t),l=Ds(i,i,t),c=Ds(o,o,t),u=Ds(a,a,t);return new nl(s,l,c,u,e/n)}}class rl{constructor(t,e){this.points=t,this.planes=e}static fromInvProjectionMatrix(t,e,n,r){const i=Math.pow(2,n),o=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]].map((n=>{const o=qs([],n,t),a=1/o[3]/e*i;return function(t,e,n){return t[0]=e[0]*n[0],t[1]=e[1]*n[1],t[2]=e[2]*n[2],t[3]=e[3]*n[3],t}(o,o,[a,a,r?1/o[3]:a,a])})),a=[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]].map((t=>{const e=js([],Rs([],Ns([],o[t[0]],o[t[1]]),Ns([],o[t[2]],o[t[1]]))),n=-zs(e,o[t[1]]);return e.concat(n)}));return new rl(o,a)}}class il{static fromPoints(t){const e=[1/0,1/0,1/0],n=[-1/0,-1/0,-1/0];for(const r of t)ks(e,e,r),Is(n,n,r);return new il(e,n)}static applyTransform(t,e){const n=t.getCorners();for(let r=0;r<n.length;++r)Ds(n[r],n[r],e);return il.fromPoints(n)}constructor(t,e){this.min=t,this.max=e,this.center=Os([],As([],this.min,this.max),.5)}quadrant(t){const e=[t%2==0,t<2],n=Es(this.min),r=Es(this.max);for(let i=0;i<e.length;i++)n[i]=e[i]?this.min[i]:this.center[i],r[i]=e[i]?this.center[i]:this.max[i];return r[2]=this.max[2],new il(n,r)}distanceX(t){return Math.max(Math.min(this.max[0],t[0]),this.min[0])-t[0]}distanceY(t){return Math.max(Math.min(this.max[1],t[1]),this.min[1])-t[1]}distanceZ(t){return Math.max(Math.min(this.max[2],t[2]),this.min[2])-t[2]}getCorners(){const t=this.min,e=this.max;return[[t[0],t[1],t[2]],[e[0],t[1],t[2]],[e[0],e[1],t[2]],[t[0],e[1],t[2]],[t[0],t[1],e[2]],[e[0],t[1],e[2]],[e[0],e[1],e[2]],[t[0],e[1],e[2]]]}intersects(t){const e=this.getCorners();let n=!0;for(let r=0;r<t.planes.length;r++){const i=t.planes[r];let o=0;for(let t=0;t<e.length;t++)o+=zs(i,e[t])+i[3]>=0;if(0===o)return 0;o!==e.length&&(n=!1)}if(n)return 2;for(let r=0;r<3;r++){let e=Number.MAX_VALUE,n=-Number.MAX_VALUE;for(let i=0;i<t.points.length;i++){const o=t.points[i][r]-this.min[r];e=Math.min(e,o),n=Math.max(n,o)}if(n<0||e>this.max[r]-this.min[r])return 0}return 1}}const ol=5,al=6,sl=ss/Math.PI/2,ll=16383,cl=64,ul=[cl,32,16],hl=-sl,dl=sl,fl=[new il([hl,hl,hl],[dl,dl,dl]),new il([hl,hl,hl],[0,0,dl]),new il([0,hl,hl],[dl,0,dl]),new il([hl,0,hl],[0,dl,dl]),new il([0,0,hl],[dl,dl,dl])];function pl(t){return t*sl/Fl}function ml(t,e,n){let r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];const i=Os([],t._camera.position,t.worldSize),o=[e,n,1,1];qs(o,o,t.pixelMatrixInverse),Ws(o,o,1/o[3]);const a=js([],Ns([],o,i)),s=t.globeMatrix,l=[s[12],s[13],s[14]],c=Ns([],l,i),u=Ts(c),h=js([],c),d=t.worldSize/(2*Math.PI),f=zs(h,a),p=Math.asin(d/u);if(p<Math.acos(f)){if(!r)return null;const t=[],e=[];Os(t,a,u/f),js(e,Ns(e,t,c)),js(a,As(a,c,Os(a,e,Math.tan(p)*u)))}const m=[];new el(i,a).closestPointOnSphere(l,d,m);const g=js([],J(s,0)),y=js([],J(s,1)),v=js([],J(s,2)),_=zs(g,m),b=zs(y,m),x=zs(v,m),S=w(Math.asin(-b/d));let E=w(Math.atan2(_,x));E=t.center.lng+function(t,e){const n=(e-t+180)%360-180;return n<-180?n+360:n}(t.center.lng,E);const T=Gl(E),M=A(ql(S),0,1);return new Jl(T,M)}class gl{constructor(t,e,n){this.a=Ns([],t,n),this.b=Ns([],e,n),this.center=n;const r=js([],this.a),i=js([],this.b);this.angle=Math.acos(zs(r,i))}}function yl(t,e){if(0===t.angle)return null;let n;return n=0===t.a[e]?1/t.angle*.5*Math.PI:1/t.angle*Math.atan(t.b[e]/t.a[e]/Math.sin(t.angle)-1/Math.tan(t.angle)),n<0||n>1?null:function(t,e,n,r){const i=Math.sin(n);return t*(Math.sin((1-r)*n)/i)+e*(Math.sin(r*n)/i)}(t.a[e],t.b[e],t.angle,A(n,0,1))+t.center[e]}function vl(t){if(t.z<=1)return fl[t.z+2*t.y+t.x];const e=El(Sl(t));return il.fromPoints(e)}function _l(t,e,n){return Os(t,t,1-n),Ls(t,t,e,n)}function bl(t,e){const n=Ll(e.zoom);if(0===n)return vl(t);const r=Sl(t),i=El(r),o=Gl(r.getWest())*e.worldSize,a=Gl(r.getEast())*e.worldSize,s=ql(r.getNorth())*e.worldSize,l=ql(r.getSouth())*e.worldSize,c=[o,s,0],u=[a,s,0],h=[o,l,0],d=[a,l,0],f=ps([],e.globeMatrix);return Ds(c,c,f),Ds(u,u,f),Ds(h,h,f),Ds(d,d,f),i[0]=_l(i[0],h,n),i[1]=_l(i[1],d,n),i[2]=_l(i[2],u,n),i[3]=_l(i[3],c,n),il.fromPoints(i)}function xl(t,e,n){for(const r of t)Ds(r,r,e),Os(r,r,n)}function wl(t,e,n){const r=e/t.worldSize,i=t.globeMatrix;if(n.z<=1){const t=vl(n).getCorners();return xl(t,i,r),il.fromPoints(t)}const o=Sl(n),a=El(o);xl(a,i,r);const s=Number.MAX_VALUE,l=[-s,-s,-s],c=[s,s,s];if(o.contains(t.center)){for(const t of a)ks(c,c,t),Is(l,l,t);l[2]=0;const e=t.point,n=[e.x*r,e.y*r,0];return ks(c,c,n),Is(l,l,n),new il(c,l)}const u=[i[12]*r,i[13]*r,i[14]*r],h=o.getCenter(),d=A(t.center.lat,-Kl,Kl),f=A(h.lat,-Kl,Kl),p=Gl(t.center.lng),m=ql(d);let g=p-Gl(h.lng);const y=m-ql(f);g>.5?g-=1:g<-.5&&(g+=1);let v=0;Math.abs(g)>Math.abs(y)?v=g>=0?1:3:(v=y>=0?0:2,Ls(u,u,[i[4]*r,i[5]*r,i[6]*r],-Math.sin(x(y>=0?o.getSouth():o.getNorth()))*sl));const _=a[v],b=a[(v+1)%4],w=new gl(_,b,u),S=[yl(w,0)||_[0],yl(w,1)||_[1],yl(w,2)||_[2]],E=Ll(t.zoom);if(E>0){const r=function(t,e,n,r,i){let{x:o,y:a,z:s}=t;const l=1/(1<<s);let c=o*l,u=c+l,h=a*l,d=h+l,f=0;const p=(c+u)/2-r;return p>.5?f=-1:p<-.5&&(f=1),c=((c+f)*e-(r*=e))*n+r,u=((u+f)*e-r)*n+r,h=(h*e-(i*=e))*n+i,d=(d*e-i)*n+i,[[c,d,0],[u,d,0],[u,h,0],[c,h,0]]}(n,e,t._pixelsPerMercatorPixel,p,m);for(let t=0;t<a.length;t++)_l(a[t],r[t],E);const i=As([],r[v],r[(v+1)%4]);Os(i,i,.5),_l(S,i,E)}for(const x of a)ks(c,c,x),Is(l,l,x);return c[2]=Math.min(_[2],b[2]),ks(c,c,S),Is(l,l,S),new il(c,l)}function Sl(t){let{x:e,y:n,z:r}=t;const i=1/(1<<r),o=new Vl(Zl(e*i),Xl((n+1)*i)),a=new Vl(Zl((e+1)*i),Xl(n*i));return new ls(o,a)}function El(t){const e=x(t.getNorth()),n=x(t.getSouth()),r=Math.cos(e),i=Math.cos(n),o=Math.sin(e),a=Math.sin(n),s=t.getWest(),l=t.getEast();return[Tl(i,a,s),Tl(i,a,l),Tl(r,o,l),Tl(r,o,s)]}function Tl(t,e,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:sl;return n=x(n),[t*Math.sin(n)*r,-e*r,t*Math.cos(n)*r]}function Ml(t,e,n){return Tl(Math.cos(x(t)),Math.sin(x(t)),e,n)}function Al(t,e,n,r){const i=1<<n.z,o=(t/ss+n.x)/i;return Ml(Xl((e/ss+n.y)/i),Zl(o),r)}function Cl(t){let{min:e,max:n}=t;return ll/Math.max(n[0]-e[0],n[1]-e[1],n[2]-e[2])}const Pl=new Float64Array(16);function kl(t){const e=Cl(t),n=bs(Pl,[e,e,e]);return gs(n,n,((r=[])[0]=-(i=t.min)[0],r[1]=-i[1],r[2]=-i[2],r));var r,i}function Il(t){const e=(r=t.min,(n=Pl)[0]=1,n[1]=0,n[2]=0,n[3]=0,n[4]=0,n[5]=1,n[6]=0,n[7]=0,n[8]=0,n[9]=0,n[10]=1,n[11]=0,n[12]=r[0],n[13]=r[1],n[14]=r[2],n[15]=1,n);var n,r;const i=1/Cl(t);return ys(e,e,[i,i,i])}function Ol(t,e,n,r,i){const o=function(t){const e=ss/(2*Math.PI);return t/(2*Math.PI)/e}(n),a=[t,e,-n/(2*Math.PI)],s=fs(new Float64Array(16));return gs(s,s,a),ys(s,s,[o,o,o]),vs(s,s,x(-i)),_s(s,s,x(-r)),s}function Ll(t){return C(ol,al,t)}function jl(t,e){const n=Ml(e.lat,e.lng),r=function(t){const e=Ml(t._center.lat,t._center.lng);let n=Rs([],Ms(0,1,0),e);const r=xs([],-t.angle,e);n=Ds(n,n,r),xs(r,-t._pitch,n);const i=js([],e);return Os(i,i,pl(t.cameraToCenterDistance/t.pixelsPerMeter)),Ds(i,i,r),As([],e,i)}(t);return a=(i=Cs([],r,n))[0],s=i[1],l=i[2],c=(o=n)[0],u=o[1],h=o[2],f=(d=Math.sqrt(a*a+s*s+l*l)*Math.sqrt(c*c+u*u+h*h))&&zs(i,o)/d,Math.acos(Math.min(Math.max(f,-1),1));var i,o,a,s,l,c,u,h,d,f}function zl(t,e){return jl(t,e)>Math.PI/2*1.01}const Rl=x(85),Dl=Math.cos(Rl),Bl=Math.sin(Rl),Fl=6371008.8,Nl=2*Math.PI*Fl;class Ul{constructor(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid LngLat object: (".concat(t,", ").concat(e,")"));if(this.lng=+t,this.lat=+e,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")}wrap(){return new Ul(P(this.lng,-180,180),this.lat)}toArray(){return[this.lng,this.lat]}toString(){return"LngLat(".concat(this.lng,", ").concat(this.lat,")")}distanceTo(t){const e=Math.PI/180,n=this.lat*e,r=t.lat*e,i=Math.sin(n)*Math.sin(r)+Math.cos(n)*Math.cos(r)*Math.cos((t.lng-this.lng)*e);return Fl*Math.acos(Math.min(i,1))}toBounds(){const t=360*(arguments.length>0&&void 0!==arguments[0]?arguments[0]:0)/40075017,e=t/Math.cos(Math.PI/180*this.lat);return new ls(new Ul(this.lng-e,this.lat-t),new Ul(this.lng+e,this.lat+t))}toEcef(t){const e=pl(t);return Ml(this.lat,this.lng,sl+e)}static convert(t){if(t instanceof Ul)return t;if(Array.isArray(t)&&(2===t.length||3===t.length))return new Ul(Number(t[0]),Number(t[1]));if(!Array.isArray(t)&&"object"==typeof t&&null!==t)return new Ul(Number("lng"in t?t.lng:t.lon),Number(t.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")}}var Vl=Ul;function Wl(t){return Nl*Math.cos(t*Math.PI/180)}function Gl(t){return(180+t)/360}function ql(t){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+t*Math.PI/360)))/360}function Hl(t,e){return t/Wl(e)}function Zl(t){return 360*t-180}function Xl(t){return 360/Math.PI*Math.atan(Math.exp((180-360*t)*Math.PI/180))-90}function Yl(t,e){return t*Wl(Xl(e))}const Kl=85.051129;function $l(t){return 1/Math.cos(t*Math.PI/180)}class Jl{constructor(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;this.x=+t,this.y=+e,this.z=+n}static fromLngLat(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;const n=Vl.convert(t);return new Jl(Gl(n.lng),ql(n.lat),Hl(e,n.lat))}toLngLat(){return new Vl(Zl(this.x),Xl(this.y))}toAltitude(){return Yl(this.z,this.y)}meterInMercatorCoordinateUnits(){return 1/Nl*$l(Xl(this.y))}}function Ql(t,e,n,r,i,o,a,s,l){const c=(e+r)/2,u=(n+i)/2,h=new v(c,u);s(h),function(t,e,n,r,i,o){const a=n-i,s=r-o;return Math.abs((r-e)*a-(n-t)*s)/Math.hypot(a,s)}(h.x,h.y,o.x,o.y,a.x,a.y)>=l?(Ql(t,e,n,c,u,o,h,s,l),Ql(t,c,u,r,i,h,a,s,l)):t.push(a)}function tc(t,e,n){let r=t[0],i=r.x,o=r.y;e(r);const a=[r];for(let s=1;s<t.length;s++){const l=t[s],{x:c,y:u}=l;e(l),Ql(a,i,o,c,u,r,l,e,n),i=c,o=u,r=l}return a}function ec(t,e,n,r){if(r(e,n)){const i=e.add(n)._mult(.5);ec(t,e,i,r),ec(t,i,n,r)}else t.push(n)}function nc(t,e){let n=t[0];const r=[n];for(let i=1;i<t.length;i++){const o=t[i];ec(r,n,o,e),n=o}return r}const rc=Math.pow(2,14)-1,ic=-rc-1;function oc(t,e){const n=Math.round(t.x*e),r=Math.round(t.y*e);return t.x=A(n,ic,rc),t.y=A(r,ic,rc),(n<t.x||n>t.x+1||r<t.y||r>t.y+1)&&G("Geometry exceeds allowed extent, reduce your vector tile buffer size"),t}function ac(t,e,n){const r=t.loadGeometry(),i=t.extent,o=ss/i;if(e&&n&&n.projection.isReprojectedInTileSpace){const o=1<<e.z,{scale:a,x:s,y:l,projection:c}=n,u=t=>{const n=Zl((e.x+t.x/i)/o),r=Xl((e.y+t.y/i)/o),u=c.project(n,r);t.x=(u.x*a-s)*i,t.y=(u.y*a-l)*i};for(let e=0;e<r.length;e++)if(1!==t.type)r[e]=tc(r[e],u,1);else{const t=[];for(const n of r[e])n.x<0||n.x>=i||n.y<0||n.y>=i||(u(n),t.push(n));r[e]=t}}for(const a of r)for(const t of a)oc(t,o);return r}function sc(t,e){return{type:t.type,id:t.id,properties:t.properties,geometry:e?ac(t):[]}}function lc(t,e,n,r,i){t.emplaceBack(2*e+(r+1)/2,2*n+(i+1)/2)}function cc(t,e,n){const r=16384;t.emplaceBack(e.x,e.y,e.z,n[0]*r,n[1]*r,n[2]*r)}class uc{constructor(t){this.zoom=t.zoom,this.overscaling=t.overscaling,this.layers=t.layers,this.layerIds=this.layers.map((t=>t.id)),this.index=t.index,this.hasPattern=!1,this.projection=t.projection,this.layoutVertexArray=new Uo,this.indexArray=new ra,this.segments=new as,this.programConfigurations=new Ka(t.layers,t.zoom),this.stateDependentLayerIds=this.layers.filter((t=>t.isStateDependent())).map((t=>t.id))}populate(t,e,n,r){const i=this.layers[0],o=[];let a=null;"circle"===i.type&&(a=i.layout.get("circle-sort-key"));for(const{feature:l,id:c,index:u,sourceLayerIndex:h}of t){const t=this.layers[0]._featureFilter.needGeometry,e=sc(l,t);if(!this.layers[0]._featureFilter.filter(new wo(this.zoom),e,n))continue;const i=a?a.evaluate(e,{},n):void 0,s={id:c,properties:l.properties,type:l.type,sourceLayerIndex:h,index:u,geometry:t?e.geometry:ac(l,n,r),patterns:{},sortKey:i};o.push(s)}a&&o.sort(((t,e)=>t.sortKey-e.sortKey));let s=null;"globe"===r.projection.name&&(this.globeExtVertexArray=new Xo,s=r.projection);for(const l of o){const{geometry:r,index:i,sourceLayerIndex:o}=l,a=t[i].feature;this.addFeature(l,r,i,e.availableImages,n,s),e.featureIndex.insert(a,r,i,o,this.index)}}update(t,e,n,r){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(t,e,this.stateDependentLayers,n,r)}isEmpty(){return 0===this.layoutVertexArray.length}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(t){this.uploaded||(this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,is.members),this.indexBuffer=t.createIndexBuffer(this.indexArray),this.globeExtVertexArray&&(this.globeExtVertexBuffer=t.createVertexBuffer(this.globeExtVertexArray,os.members))),this.programConfigurations.upload(t),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.globeExtVertexBuffer&&this.globeExtVertexBuffer.destroy())}addFeature(t,e,n,r,i,o){for(const a of e)for(const e of a){const n=e.x,r=e.y;if(n<0||n>=ss||r<0||r>=ss)continue;if(o){const t=o.projectTilePoint(n,r,i),e=o.upVector(i,n,r),a=this.globeExtVertexArray;cc(a,t,e),cc(a,t,e),cc(a,t,e),cc(a,t,e)}const a=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray,t.sortKey),s=a.vertexLength;lc(this.layoutVertexArray,n,r,-1,-1),lc(this.layoutVertexArray,n,r,1,-1),lc(this.layoutVertexArray,n,r,1,1),lc(this.layoutVertexArray,n,r,-1,1),this.indexArray.emplaceBack(s,s+1,s+2),this.indexArray.emplaceBack(s,s+2,s+3),a.vertexLength+=4,a.primitiveLength+=2}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,t,n,{},r,i)}}function hc(t,e){for(let n=0;n<t.length;n++)if(bc(e,t[n]))return!0;for(let n=0;n<e.length;n++)if(bc(t,e[n]))return!0;return!!mc(t,e)}function dc(t,e,n){return!!bc(t,e)||!!yc(e,t,n)}function fc(t,e){if(1===t.length)return _c(e,t[0]);for(let n=0;n<e.length;n++){const r=e[n];for(let e=0;e<r.length;e++)if(bc(t,r[e]))return!0}for(let n=0;n<t.length;n++)if(_c(e,t[n]))return!0;for(let n=0;n<e.length;n++)if(mc(t,e[n]))return!0;return!1}function pc(t,e,n){if(t.length>1){if(mc(t,e))return!0;for(let r=0;r<e.length;r++)if(yc(e[r],t,n))return!0}for(let r=0;r<t.length;r++)if(yc(t[r],e,n))return!0;return!1}function mc(t,e){if(0===t.length||0===e.length)return!1;for(let n=0;n<t.length-1;n++){const r=t[n],i=t[n+1];for(let t=0;t<e.length-1;t++)if(gc(r,i,e[t],e[t+1]))return!0}return!1}function gc(t,e,n,r){return q(t,n,r)!==q(e,n,r)&&q(t,e,n)!==q(t,e,r)}function yc(t,e,n){const r=n*n;if(1===e.length)return t.distSqr(e[0])<r;for(let i=1;i<e.length;i++)if(vc(t,e[i-1],e[i])<r)return!0;return!1}function vc(t,e,n){const r=e.distSqr(n);if(0===r)return t.distSqr(e);const i=((t.x-e.x)*(n.x-e.x)+(t.y-e.y)*(n.y-e.y))/r;return t.distSqr(i<0?e:i>1?n:n.sub(e)._mult(i)._add(e))}function _c(t,e){let n,r,i,o=!1;for(let a=0;a<t.length;a++){n=t[a];for(let t=0,a=n.length-1;t<n.length;a=t++)r=n[t],i=n[a],r.y>e.y!=i.y>e.y&&e.x<(i.x-r.x)*(e.y-r.y)/(i.y-r.y)+r.x&&(o=!o)}return o}function bc(t,e){let n=!1;for(let r=0,i=t.length-1;r<t.length;i=r++){const o=t[r],a=t[i];o.y>e.y!=a.y>e.y&&e.x<(a.x-o.x)*(e.y-o.y)/(a.y-o.y)+o.x&&(n=!n)}return n}function xc(t,e,n,r,i){for(const a of t)if(e<=a.x&&n<=a.y&&r>=a.x&&i>=a.y)return!0;const o=[new v(e,n),new v(e,i),new v(r,i),new v(r,n)];if(t.length>2)for(const a of o)if(bc(t,a))return!0;for(let a=0;a<t.length-1;a++)if(wc(t[a],t[a+1],o))return!0;return!1}function wc(t,e,n){const r=n[0],i=n[2];if(t.x<r.x&&e.x<r.x||t.x>i.x&&e.x>i.x||t.y<r.y&&e.y<r.y||t.y>i.y&&e.y>i.y)return!1;const o=q(t,e,n[0]);return o!==q(t,e,n[1])||o!==q(t,e,n[2])||o!==q(t,e,n[3])}function Sc(t,e,n){const r=e.paint.get(t).value;return"constant"===r.kind?r.value:n.programConfigurations.get(e.id).getMaxValue(t)}function Ec(t){return Math.sqrt(t[0]*t[0]+t[1]*t[1])}function Tc(t,e,n,r,i){if(!e[0]&&!e[1])return t;const o=v.convert(e)._mult(i);"viewport"===n&&o._rotate(-r);const a=[];for(let s=0;s<t.length;s++)a.push(t[s].sub(o));return a}function Mc(t,e,n,r){const i=v.convert(t)._mult(r);return"viewport"===e&&i._rotate(-n),i}Yi(uc,"CircleBucket",{omit:["layers"]});const Ac=new jo({"circle-sort-key":new Oo(te.layout_circle["circle-sort-key"])});var Cc={paint:new jo({"circle-radius":new Oo(te.paint_circle["circle-radius"]),"circle-color":new Oo(te.paint_circle["circle-color"]),"circle-blur":new Oo(te.paint_circle["circle-blur"]),"circle-opacity":new Oo(te.paint_circle["circle-opacity"]),"circle-translate":new Io(te.paint_circle["circle-translate"]),"circle-translate-anchor":new Io(te.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new Io(te.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new Io(te.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new Oo(te.paint_circle["circle-stroke-width"]),"circle-stroke-color":new Oo(te.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new Oo(te.paint_circle["circle-stroke-opacity"])}),layout:Ac};function Pc(t,e,n,r,i,o,a,s,l){if(o&&t.queryGeometry.isAboveHorizon)return!1;o&&(l*=t.pixelToTileUnitsFactor);const c=t.tileID.canonical,u=n.projection.upVectorScale(c,n.center.lat,n.worldSize).metersToTile;for(const h of e)for(const e of h){const h=e.add(s),d=i&&n.elevation?n.elevation.exaggeration()*i.getElevationAt(h.x,h.y,!0):0,f=n.projection.projectTilePoint(h.x,h.y,c);if(d>0){const t=n.projection.upVector(c,h.x,h.y);f.x+=t[0]*u*d,f.y+=t[1]*u*d,f.z+=t[2]*u*d}const p=o?h:kc(f.x,f.y,f.z,r),m=o?t.tilespaceRays.map((t=>Lc(t,d))):t.queryGeometry.screenGeometry,g=qs([],[f.x,f.y,f.z,1],r);if(!a&&o?l*=g[3]/n.cameraToCenterDistance:a&&!o&&(l*=n.cameraToCenterDistance/g[3]),o){const t=Xl((e.y/ss+c.y)/(1<<c.z));l/=n.projection.pixelsPerMeter(t,1)/Hl(1,t)}if(dc(m,p,l))return!0}return!1}function kc(t,e,n,r){const i=qs([],[t,e,n,1],r);return new v(i[0]/i[3],i[1]/i[3])}const Ic=Ms(0,0,0),Oc=Ms(0,0,1);function Lc(t,e){const n=Ss();return Ic[2]=e,t.intersectsPlane(Ic,Oc,n),new v(n[0],n[1])}class jc extends uc{}function zc(t,e,n,r){let{width:i,height:o}=e;if(r){if(r instanceof Uint8ClampedArray)r=new Uint8Array(r.buffer);else if(r.length!==i*o*n)throw new RangeError("mismatched image size")}else r=new Uint8Array(i*o*n);return t.width=i,t.height=o,t.data=r,t}function Rc(t,e,n){const{width:r,height:i}=e;r===t.width&&i===t.height||(Dc(t,e,{x:0,y:0},{x:0,y:0},{width:Math.min(t.width,r),height:Math.min(t.height,i)},n),t.width=r,t.height=i,t.data=e.data)}function Dc(t,e,n,r,i,o){if(0===i.width||0===i.height)return e;if(i.width>t.width||i.height>t.height||n.x>t.width-i.width||n.y>t.height-i.height)throw new RangeError("out of range source coordinates for image copy");if(i.width>e.width||i.height>e.height||r.x>e.width-i.width||r.y>e.height-i.height)throw new RangeError("out of range destination coordinates for image copy");const a=t.data,s=e.data;for(let l=0;l<i.height;l++){const c=((n.y+l)*t.width+n.x)*o,u=((r.y+l)*e.width+r.x)*o;for(let t=0;t<i.width*o;t++)s[u+t]=a[c+t]}return e}Yi(jc,"HeatmapBucket",{omit:["layers"]});class Bc{constructor(t,e){zc(this,t,1,e)}resize(t){Rc(this,new Bc(t),1)}clone(){return new Bc({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(t,e,n,r,i){Dc(t,e,n,r,i,1)}}class Fc{constructor(t,e){zc(this,t,4,e)}resize(t){Rc(this,new Fc(t),4)}replace(t,e){e?this.data.set(t):this.data=t instanceof Uint8ClampedArray?new Uint8Array(t.buffer):t}clone(){return new Fc({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(t,e,n,r,i){Dc(t,e,n,r,i,4)}}Yi(Bc,"AlphaImage"),Yi(Fc,"RGBAImage");var Nc={paint:new jo({"heatmap-radius":new Oo(te.paint_heatmap["heatmap-radius"]),"heatmap-weight":new Oo(te.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new Io(te.paint_heatmap["heatmap-intensity"]),"heatmap-color":new Lo(te.paint_heatmap["heatmap-color"]),"heatmap-opacity":new Io(te.paint_heatmap["heatmap-opacity"])})};function Uc(t){const e={},n=t.resolution||256,r=t.clips?t.clips.length:1,i=t.image||new Fc({width:n,height:r}),o=(n,r,o)=>{e[t.evaluationKey]=o;const a=t.expression.evaluate(e);i.data[n+r+0]=Math.floor(255*a.r/a.a),i.data[n+r+1]=Math.floor(255*a.g/a.a),i.data[n+r+2]=Math.floor(255*a.b/a.a),i.data[n+r+3]=Math.floor(255*a.a)};if(t.clips)for(let a=0,s=0;a<r;++a,s+=4*n)for(let e=0,r=0;e<n;e++,r+=4){const i=e/(n-1),{start:l,end:c}=t.clips[a];o(s,r,l*(1-i)+c*i)}else for(let a=0,s=0;a<n;a++,s+=4)o(0,s,a/(n-1));return i}var Vc={paint:new jo({"hillshade-illumination-direction":new Io(te.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-anchor":new Io(te.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new Io(te.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new Io(te.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new Io(te.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new Io(te.paint_hillshade["hillshade-accent-color"])})};const Wc=Fo([{name:"a_pos",components:2,type:"Int16"}],4),{members:Gc}=Wc;var qc={exports:{}};function Hc(t,e,n){n=n||2;var r,i,o,a,s,l,c,u=e&&e.length,h=u?e[0]*n:t.length,d=Zc(t,0,h,n,!0),f=[];if(!d||d.next===d.prev)return f;if(u&&(d=function(t,e,n,r){var i,o,a,s=[];for(i=0,o=e.length;i<o;i++)(a=Zc(t,e[i]*r,i<o-1?e[i+1]*r:t.length,r,!1))===a.next&&(a.steiner=!0),s.push(iu(a));for(s.sort(tu),i=0;i<s.length;i++)n=eu(s[i],n);return n}(t,e,d,n)),t.length>80*n){r=o=t[0],i=a=t[1];for(var p=n;p<h;p+=n)(s=t[p])<r&&(r=s),(l=t[p+1])<i&&(i=l),s>o&&(o=s),l>a&&(a=l);c=0!==(c=Math.max(o-r,a-i))?32767/c:0}return Yc(d,f,n,r,i,c,0),f}function Zc(t,e,n,r,i){var o,a;if(i===yu(t,e,n,r)>0)for(o=e;o<n;o+=r)a=pu(o,t[o],t[o+1],a);else for(o=n-r;o>=e;o-=r)a=pu(o,t[o],t[o+1],a);return a&&lu(a,a.next)&&(mu(a),a=a.next),a}function Xc(t,e){if(!t)return t;e||(e=t);var n,r=t;do{if(n=!1,r.steiner||!lu(r,r.next)&&0!==su(r.prev,r,r.next))r=r.next;else{if(mu(r),(r=e=r.prev)===r.next)break;n=!0}}while(n||r!==e);return e}function Yc(t,e,n,r,i,o,a){if(t){!a&&o&&function(t,e,n,r){var i=t;do{0===i.z&&(i.z=ru(i.x,i.y,e,n,r)),i.prevZ=i.prev,i.nextZ=i.next,i=i.next}while(i!==t);i.prevZ.nextZ=null,i.prevZ=null,function(t){var e,n,r,i,o,a,s,l,c=1;do{for(n=t,t=null,o=null,a=0;n;){for(a++,r=n,s=0,e=0;e<c&&(s++,r=r.nextZ);e++);for(l=c;s>0||l>0&&r;)0!==s&&(0===l||!r||n.z<=r.z)?(i=n,n=n.nextZ,s--):(i=r,r=r.nextZ,l--),o?o.nextZ=i:t=i,i.prevZ=o,o=i;n=r}o.nextZ=null,c*=2}while(a>1)}(i)}(t,r,i,o);for(var s,l,c=t;t.prev!==t.next;)if(s=t.prev,l=t.next,o?$c(t,r,i,o):Kc(t))e.push(s.i/n|0),e.push(t.i/n|0),e.push(l.i/n|0),mu(t),t=l.next,c=l.next;else if((t=l)===c){a?1===a?Yc(t=Jc(Xc(t),e,n),e,n,r,i,o,2):2===a&&Qc(t,e,n,r,i,o):Yc(Xc(t),e,n,r,i,o,1);break}}}function Kc(t){var e=t.prev,n=t,r=t.next;if(su(e,n,r)>=0)return!1;for(var i=e.x,o=n.x,a=r.x,s=e.y,l=n.y,c=r.y,u=i<o?i<a?i:a:o<a?o:a,h=s<l?s<c?s:c:l<c?l:c,d=i>o?i>a?i:a:o>a?o:a,f=s>l?s>c?s:c:l>c?l:c,p=r.next;p!==e;){if(p.x>=u&&p.x<=d&&p.y>=h&&p.y<=f&&ou(i,s,o,l,a,c,p.x,p.y)&&su(p.prev,p,p.next)>=0)return!1;p=p.next}return!0}function $c(t,e,n,r){var i=t.prev,o=t,a=t.next;if(su(i,o,a)>=0)return!1;for(var s=i.x,l=o.x,c=a.x,u=i.y,h=o.y,d=a.y,f=s<l?s<c?s:c:l<c?l:c,p=u<h?u<d?u:d:h<d?h:d,m=s>l?s>c?s:c:l>c?l:c,g=u>h?u>d?u:d:h>d?h:d,y=ru(f,p,e,n,r),v=ru(m,g,e,n,r),_=t.prevZ,b=t.nextZ;_&&_.z>=y&&b&&b.z<=v;){if(_.x>=f&&_.x<=m&&_.y>=p&&_.y<=g&&_!==i&&_!==a&&ou(s,u,l,h,c,d,_.x,_.y)&&su(_.prev,_,_.next)>=0)return!1;if(_=_.prevZ,b.x>=f&&b.x<=m&&b.y>=p&&b.y<=g&&b!==i&&b!==a&&ou(s,u,l,h,c,d,b.x,b.y)&&su(b.prev,b,b.next)>=0)return!1;b=b.nextZ}for(;_&&_.z>=y;){if(_.x>=f&&_.x<=m&&_.y>=p&&_.y<=g&&_!==i&&_!==a&&ou(s,u,l,h,c,d,_.x,_.y)&&su(_.prev,_,_.next)>=0)return!1;_=_.prevZ}for(;b&&b.z<=v;){if(b.x>=f&&b.x<=m&&b.y>=p&&b.y<=g&&b!==i&&b!==a&&ou(s,u,l,h,c,d,b.x,b.y)&&su(b.prev,b,b.next)>=0)return!1;b=b.nextZ}return!0}function Jc(t,e,n){var r=t;do{var i=r.prev,o=r.next.next;!lu(i,o)&&cu(i,r,r.next,o)&&du(i,o)&&du(o,i)&&(e.push(i.i/n|0),e.push(r.i/n|0),e.push(o.i/n|0),mu(r),mu(r.next),r=t=o),r=r.next}while(r!==t);return Xc(r)}function Qc(t,e,n,r,i,o){var a=t;do{for(var s=a.next.next;s!==a.prev;){if(a.i!==s.i&&au(a,s)){var l=fu(a,s);return a=Xc(a,a.next),l=Xc(l,l.next),Yc(a,e,n,r,i,o,0),void Yc(l,e,n,r,i,o,0)}s=s.next}a=a.next}while(a!==t)}function tu(t,e){return t.x-e.x}function eu(t,e){var n=function(t,e){var n,r=e,i=t.x,o=t.y,a=-1/0;do{if(o<=r.y&&o>=r.next.y&&r.next.y!==r.y){var s=r.x+(o-r.y)*(r.next.x-r.x)/(r.next.y-r.y);if(s<=i&&s>a&&(a=s,n=r.x<r.next.x?r:r.next,s===i))return n}r=r.next}while(r!==e);if(!n)return null;var l,c=n,u=n.x,h=n.y,d=1/0;r=n;do{i>=r.x&&r.x>=u&&i!==r.x&&ou(o<h?i:a,o,u,h,o<h?a:i,o,r.x,r.y)&&(l=Math.abs(o-r.y)/(i-r.x),du(r,t)&&(l<d||l===d&&(r.x>n.x||r.x===n.x&&nu(n,r)))&&(n=r,d=l)),r=r.next}while(r!==c);return n}(t,e);if(!n)return e;var r=fu(n,t);return Xc(r,r.next),Xc(n,n.next)}function nu(t,e){return su(t.prev,t,e.prev)<0&&su(e.next,t,t.next)<0}function ru(t,e,n,r,i){return(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=(t-n)*i|0)|t<<8))|t<<4))|t<<2))|t<<1))|(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=(e-r)*i|0)|e<<8))|e<<4))|e<<2))|e<<1))<<1}function iu(t){var e=t,n=t;do{(e.x<n.x||e.x===n.x&&e.y<n.y)&&(n=e),e=e.next}while(e!==t);return n}function ou(t,e,n,r,i,o,a,s){return(i-a)*(e-s)>=(t-a)*(o-s)&&(t-a)*(r-s)>=(n-a)*(e-s)&&(n-a)*(o-s)>=(i-a)*(r-s)}function au(t,e){return t.next.i!==e.i&&t.prev.i!==e.i&&!function(t,e){var n=t;do{if(n.i!==t.i&&n.next.i!==t.i&&n.i!==e.i&&n.next.i!==e.i&&cu(n,n.next,t,e))return!0;n=n.next}while(n!==t);return!1}(t,e)&&(du(t,e)&&du(e,t)&&function(t,e){var n=t,r=!1,i=(t.x+e.x)/2,o=(t.y+e.y)/2;do{n.y>o!=n.next.y>o&&n.next.y!==n.y&&i<(n.next.x-n.x)*(o-n.y)/(n.next.y-n.y)+n.x&&(r=!r),n=n.next}while(n!==t);return r}(t,e)&&(su(t.prev,t,e.prev)||su(t,e.prev,e))||lu(t,e)&&su(t.prev,t,t.next)>0&&su(e.prev,e,e.next)>0)}function su(t,e,n){return(e.y-t.y)*(n.x-e.x)-(e.x-t.x)*(n.y-e.y)}function lu(t,e){return t.x===e.x&&t.y===e.y}function cu(t,e,n,r){var i=hu(su(t,e,n)),o=hu(su(t,e,r)),a=hu(su(n,r,t)),s=hu(su(n,r,e));return i!==o&&a!==s||!(0!==i||!uu(t,n,e))||!(0!==o||!uu(t,r,e))||!(0!==a||!uu(n,t,r))||!(0!==s||!uu(n,e,r))}function uu(t,e,n){return e.x<=Math.max(t.x,n.x)&&e.x>=Math.min(t.x,n.x)&&e.y<=Math.max(t.y,n.y)&&e.y>=Math.min(t.y,n.y)}function hu(t){return t>0?1:t<0?-1:0}function du(t,e){return su(t.prev,t,t.next)<0?su(t,e,t.next)>=0&&su(t,t.prev,e)>=0:su(t,e,t.prev)<0||su(t,t.next,e)<0}function fu(t,e){var n=new gu(t.i,t.x,t.y),r=new gu(e.i,e.x,e.y),i=t.next,o=e.prev;return t.next=e,e.prev=t,n.next=i,i.prev=n,r.next=n,n.prev=r,o.next=r,r.prev=o,r}function pu(t,e,n,r){var i=new gu(t,e,n);return r?(i.next=r.next,i.prev=r,r.next.prev=i,r.next=i):(i.prev=i,i.next=i),i}function mu(t){t.next.prev=t.prev,t.prev.next=t.next,t.prevZ&&(t.prevZ.nextZ=t.nextZ),t.nextZ&&(t.nextZ.prevZ=t.prevZ)}function gu(t,e,n){this.i=t,this.x=e,this.y=n,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}function yu(t,e,n,r){for(var i=0,o=e,a=n-r;o<n;o+=r)i+=(t[a]-t[o])*(t[o+1]+t[a+1]),a=o;return i}qc.exports=Hc,qc.exports.default=Hc,Hc.deviation=function(t,e,n,r){var i=e&&e.length,o=Math.abs(yu(t,0,i?e[0]*n:t.length,n));if(i)for(var a=0,s=e.length;a<s;a++)o-=Math.abs(yu(t,e[a]*n,a<s-1?e[a+1]*n:t.length,n));var l=0;for(a=0;a<r.length;a+=3){var c=r[a]*n,u=r[a+1]*n,h=r[a+2]*n;l+=Math.abs((t[c]-t[h])*(t[u+1]-t[c+1])-(t[c]-t[u])*(t[h+1]-t[c+1]))}return 0===o&&0===l?0:Math.abs((l-o)/o)},Hc.flatten=function(t){for(var e=t[0][0].length,n={vertices:[],holes:[],dimensions:e},r=0,i=0;i<t.length;i++){for(var o=0;o<t[i].length;o++)for(var a=0;a<e;a++)n.vertices.push(t[i][o][a]);i>0&&n.holes.push(r+=t[i-1].length)}return n};var vu=d(qc.exports);function _u(t,e,n,r,i){bu(t,e,n||0,r||t.length-1,i||wu)}function bu(t,e,n,r,i){for(;r>n;){if(r-n>600){var o=r-n+1,a=e-n+1,s=Math.log(o),l=.5*Math.exp(2*s/3),c=.5*Math.sqrt(s*l*(o-l)/o)*(a-o/2<0?-1:1);bu(t,e,Math.max(n,Math.floor(e-a*l/o+c)),Math.min(r,Math.floor(e+(o-a)*l/o+c)),i)}var u=t[e],h=n,d=r;for(xu(t,n,e),i(t[r],u)>0&&xu(t,n,r);h<d;){for(xu(t,h,d),h++,d--;i(t[h],u)<0;)h++;for(;i(t[d],u)>0;)d--}0===i(t[n],u)?xu(t,n,d):xu(t,++d,r),d<=e&&(n=d+1),e<=d&&(r=d-1)}}function xu(t,e,n){var r=t[e];t[e]=t[n],t[n]=r}function wu(t,e){return t<e?-1:t>e?1:0}function Su(t,e){const n=t.length;if(n<=1)return[t];const r=[];let i,o;for(let a=0;a<n;a++){const e=H(t[a]);0!==e&&(t[a].area=Math.abs(e),void 0===o&&(o=e<0),o===e<0?(i&&r.push(i),i=[t[a]]):i.push(t[a]))}if(i&&r.push(i),e>1)for(let a=0;a<r.length;a++)r[a].length<=e||(_u(r[a],e,1,r[a].length-1,Eu),r[a]=r[a].slice(0,e));return r}function Eu(t,e){return e.area-t.area}function Tu(t,e,n){const r=n.patternDependencies;let i=!1;for(const o of e){const e=o.paint.get("".concat(t,"-pattern"));e.isConstant()||(i=!0);const n=e.constantOr(null);n&&(i=!0,r[n]=!0)}return i}function Mu(t,e,n,r,i){const o=i.patternDependencies;for(const a of e){const e=a.paint.get("".concat(t,"-pattern")).value;if("constant"!==e.kind){let t=e.evaluate({zoom:r},n,{},i.availableImages);t=t&&t.name?t.name:t,o[t]=!0,n.patterns[a.id]=t}}return n}class Au{constructor(t){this.zoom=t.zoom,this.overscaling=t.overscaling,this.layers=t.layers,this.layerIds=this.layers.map((t=>t.id)),this.index=t.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new Uo,this.indexArray=new ra,this.indexArray2=new ca,this.programConfigurations=new Ka(t.layers,t.zoom),this.segments=new as,this.segments2=new as,this.stateDependentLayerIds=this.layers.filter((t=>t.isStateDependent())).map((t=>t.id)),this.projection=t.projection}populate(t,e,n,r){this.hasPattern=Tu("fill",this.layers,e);const i=this.layers[0].layout.get("fill-sort-key"),o=[];for(const{feature:a,id:s,index:l,sourceLayerIndex:c}of t){const t=this.layers[0]._featureFilter.needGeometry,u=sc(a,t);if(!this.layers[0]._featureFilter.filter(new wo(this.zoom),u,n))continue;const h=i?i.evaluate(u,{},n,e.availableImages):void 0,d={id:s,properties:a.properties,type:a.type,sourceLayerIndex:c,index:l,geometry:t?u.geometry:ac(a,n,r),patterns:{},sortKey:h};o.push(d)}i&&o.sort(((t,e)=>t.sortKey-e.sortKey));for(const a of o){const{geometry:r,index:i,sourceLayerIndex:o}=a;if(this.hasPattern){const t=Mu("fill",this.layers,a,this.zoom,e);this.patternFeatures.push(t)}else this.addFeature(a,r,i,n,{},e.availableImages);e.featureIndex.insert(t[i].feature,r,i,o,this.index)}}update(t,e,n,r){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(t,e,this.stateDependentLayers,n,r)}addFeatures(t,e,n,r,i){for(const o of this.patternFeatures)this.addFeature(o,o.geometry,o.index,e,n,r)}isEmpty(){return 0===this.layoutVertexArray.length}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(t){this.uploaded||(this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,Gc),this.indexBuffer=t.createIndexBuffer(this.indexArray),this.indexBuffer2=t.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(t),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())}addFeature(t,e,n,r,i){let o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:[];for(const a of Su(e,500)){let t=0;for(const s of a)t+=s.length;const e=this.segments.prepareSegment(t,this.layoutVertexArray,this.indexArray),n=e.vertexLength,r=[],i=[];for(const s of a){if(0===s.length)continue;s!==a[0]&&i.push(r.length/2);const t=this.segments2.prepareSegment(s.length,this.layoutVertexArray,this.indexArray2),e=t.vertexLength;this.layoutVertexArray.emplaceBack(s[0].x,s[0].y),this.indexArray2.emplaceBack(e+s.length-1,e),r.push(s[0].x),r.push(s[0].y);for(let n=1;n<s.length;n++)this.layoutVertexArray.emplaceBack(s[n].x,s[n].y),this.indexArray2.emplaceBack(e+n-1,e+n),r.push(s[n].x),r.push(s[n].y);t.vertexLength+=s.length,t.primitiveLength+=s.length}const o=vu(r,i);for(let a=0;a<o.length;a+=3)this.indexArray.emplaceBack(n+o[a],n+o[a+1],n+o[a+2]);e.vertexLength+=t,e.primitiveLength+=o.length/3}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,t,n,i,o,r)}}Yi(Au,"FillBucket",{omit:["layers","patternFeatures"]});const Cu=new jo({"fill-sort-key":new Oo(te.layout_fill["fill-sort-key"])});var Pu={paint:new jo({"fill-antialias":new Io(te.paint_fill["fill-antialias"]),"fill-opacity":new Oo(te.paint_fill["fill-opacity"]),"fill-color":new Oo(te.paint_fill["fill-color"]),"fill-outline-color":new Oo(te.paint_fill["fill-outline-color"]),"fill-translate":new Io(te.paint_fill["fill-translate"]),"fill-translate-anchor":new Io(te.paint_fill["fill-translate-anchor"]),"fill-pattern":new Oo(te.paint_fill["fill-pattern"])}),layout:Cu};const ku=Fo([{name:"a_pos_normal_ed",components:4,type:"Int16"}]),Iu=Fo([{name:"a_centroid_pos",components:2,type:"Uint16"}]),Ou=Fo([{name:"a_pos_3",components:3,type:"Int16"},{name:"a_pos_normal_3",components:3,type:"Int16"}]),{members:Lu}=ku;var ju={},zu=g,Ru=Du;function Du(t,e,n,r,i){this.properties={},this.extent=n,this.type=0,this._pbf=t,this._geometry=-1,this._keys=r,this._values=i,t.readFields(Bu,this,e)}function Bu(t,e,n){1==t?e.id=n.readVarint():2==t?function(t,e){for(var n=t.readVarint()+t.pos;t.pos<n;){var r=e._keys[t.readVarint()],i=e._values[t.readVarint()];e.properties[r]=i}}(n,e):3==t?e.type=n.readVarint():4==t&&(e._geometry=n.pos)}function Fu(t){for(var e,n,r=0,i=0,o=t.length,a=o-1;i<o;a=i++)r+=((n=t[a]).x-(e=t[i]).x)*(e.y+n.y);return r}Du.types=["Unknown","Point","LineString","Polygon"],Du.prototype.loadGeometry=function(){var t=this._pbf;t.pos=this._geometry;for(var e,n=t.readVarint()+t.pos,r=1,i=0,o=0,a=0,s=[];t.pos<n;){if(i<=0){var l=t.readVarint();r=7&l,i=l>>3}if(i--,1===r||2===r)o+=t.readSVarint(),a+=t.readSVarint(),1===r&&(e&&s.push(e),e=[]),e.push(new zu(o,a));else{if(7!==r)throw new Error("unknown command "+r);e&&e.push(e[0].clone())}}return e&&s.push(e),s},Du.prototype.bbox=function(){var t=this._pbf;t.pos=this._geometry;for(var e=t.readVarint()+t.pos,n=1,r=0,i=0,o=0,a=1/0,s=-1/0,l=1/0,c=-1/0;t.pos<e;){if(r<=0){var u=t.readVarint();n=7&u,r=u>>3}if(r--,1===n||2===n)(i+=t.readSVarint())<a&&(a=i),i>s&&(s=i),(o+=t.readSVarint())<l&&(l=o),o>c&&(c=o);else if(7!==n)throw new Error("unknown command "+n)}return[a,l,s,c]},Du.prototype.toGeoJSON=function(t,e,n){var r,i,o=this.extent*Math.pow(2,n),a=this.extent*t,s=this.extent*e,l=this.loadGeometry(),c=Du.types[this.type];function u(t){for(var e=0;e<t.length;e++){var n=t[e];t[e]=[360*(n.x+a)/o-180,360/Math.PI*Math.atan(Math.exp((180-360*(n.y+s)/o)*Math.PI/180))-90]}}switch(this.type){case 1:var h=[];for(r=0;r<l.length;r++)h[r]=l[r][0];u(l=h);break;case 2:for(r=0;r<l.length;r++)u(l[r]);break;case 3:for(l=function(t){var e=t.length;if(e<=1)return[t];for(var n,r,i=[],o=0;o<e;o++){var a=Fu(t[o]);0!==a&&(void 0===r&&(r=a<0),r===a<0?(n&&i.push(n),n=[t[o]]):n.push(t[o]))}return n&&i.push(n),i}(l),r=0;r<l.length;r++)for(i=0;i<l[r].length;i++)u(l[r][i])}1===l.length?l=l[0]:c="Multi"+c;var d={type:"Feature",geometry:{type:c,coordinates:l},properties:this.properties};return"id"in this&&(d.id=this.id),d};var Nu=Ru,Uu=Vu;function Vu(t,e){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=t,this._keys=[],this._values=[],this._features=[],t.readFields(Wu,this,e),this.length=this._features.length}function Wu(t,e,n){15===t?e.version=n.readVarint():1===t?e.name=n.readString():5===t?e.extent=n.readVarint():2===t?e._features.push(n.pos):3===t?e._keys.push(n.readString()):4===t&&e._values.push(function(t){for(var e=null,n=t.readVarint()+t.pos;t.pos<n;){var r=t.readVarint()>>3;e=1===r?t.readString():2===r?t.readFloat():3===r?t.readDouble():4===r?t.readVarint64():5===r?t.readVarint():6===r?t.readSVarint():7===r?t.readBoolean():null}return e}(n))}Vu.prototype.feature=function(t){if(t<0||t>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[t];var e=this._pbf.readVarint()+this._pbf.pos;return new Nu(this._pbf,e,this.extent,this._keys,this._values)};var Gu=Uu;function qu(t,e,n){if(3===t){var r=new Gu(n,n.readVarint()+n.pos);r.length&&(e[r.name]=r)}}var Hu=ju.VectorTile=function(t,e){this.layers=t.readFields(qu,{},e)},Zu=ju.VectorTileFeature=Ru;function Xu(t,e,n,r){const i=[],o=0===r?(t,e,n,r,i,o)=>{t.push(new v(o,n+(o-e)/(r-e)*(i-n)))}:(t,e,n,r,i,o)=>{t.push(new v(e+(o-n)/(i-n)*(r-e),o))};for(const a of t){const t=[];for(const i of a){if(i.length<=2)continue;const a=[];for(let t=0;t<i.length-1;t++){const s=i[t].x,l=i[t].y,c=i[t+1].x,u=i[t+1].y,h=0===r?s:l,d=0===r?c:u;h<e?d>e&&o(a,s,l,c,u,e):h>n?d<n&&o(a,s,l,c,u,n):a.push(i[t]),d<e&&h>=e&&o(a,s,l,c,u,e),d>n&&h<=n&&o(a,s,l,c,u,n)}let s=i[i.length-1];const l=0===r?s.x:s.y;l>=e&&l<=n&&a.push(s),a.length&&(s=a[a.length-1],a[0].x===s.x&&a[0].y===s.y||a.push(a[0]),t.push(a))}t.length&&i.push(t)}return i}ju.VectorTileLayer=Uu;const Yu=Zu.types,Ku=Math.pow(2,13);function $u(t,e,n,r,i,o,a,s){t.emplaceBack((e<<1)+a,(n<<1)+o,(Math.floor(r*Ku)<<1)+i,Math.round(s))}function Ju(t,e,n){const r=16384;t.emplaceBack(e.x,e.y,e.z,n[0]*r,n[1]*r,n[2]*r)}class Qu{constructor(){this.acc=new v(0,0),this.polyCount=[]}startRing(t){this.currentPolyCount={edges:0,top:0},this.polyCount.push(this.currentPolyCount),this.min||(this.min=new v(t.x,t.y),this.max=new v(t.x,t.y))}append(t,e){this.currentPolyCount.edges++,this.acc._add(t);const n=this.min,r=this.max;t.x<n.x?n.x=t.x:t.x>r.x&&(r.x=t.x),t.y<n.y?n.y=t.y:t.y>r.y&&(r.y=t.y),((0===t.x||t.x===ss)&&t.x===e.x)!=((0===t.y||t.y===ss)&&t.y===e.y)&&this.processBorderOverlap(t,e),e.x<0!=t.x<0&&this.addBorderIntersection(0,On(e.y,t.y,(0-e.x)/(t.x-e.x))),e.x>ss!=t.x>ss&&this.addBorderIntersection(1,On(e.y,t.y,(ss-e.x)/(t.x-e.x))),e.y<0!=t.y<0&&this.addBorderIntersection(2,On(e.x,t.x,(0-e.y)/(t.y-e.y))),e.y>ss!=t.y>ss&&this.addBorderIntersection(3,On(e.x,t.x,(ss-e.y)/(t.y-e.y)))}addBorderIntersection(t,e){this.borders||(this.borders=[[Number.MAX_VALUE,-Number.MAX_VALUE],[Number.MAX_VALUE,-Number.MAX_VALUE],[Number.MAX_VALUE,-Number.MAX_VALUE],[Number.MAX_VALUE,-Number.MAX_VALUE]]);const n=this.borders[t];e<n[0]&&(n[0]=e),e>n[1]&&(n[1]=e)}processBorderOverlap(t,e){if(t.x===e.x){if(t.y===e.y)return;const n=0===t.x?0:1;this.addBorderIntersection(n,e.y),this.addBorderIntersection(n,t.y)}else{const n=0===t.y?2:3;this.addBorderIntersection(n,e.x),this.addBorderIntersection(n,t.x)}}centroid(){const t=this.polyCount.reduce(((t,e)=>t+e.edges),0);return 0!==t?this.acc.div(t)._round():new v(0,0)}span(){return new v(this.max.x-this.min.x,this.max.y-this.min.y)}intersectsCount(){return this.borders.reduce(((t,e)=>t+ +(e[0]!==Number.MAX_VALUE)),0)}}class th{constructor(t){this.zoom=t.zoom,this.canonical=t.canonical,this.overscaling=t.overscaling,this.layers=t.layers,this.layerIds=this.layers.map((t=>t.id)),this.index=t.index,this.hasPattern=!1,this.edgeRadius=0,this.projection=t.projection,this.layoutVertexArray=new Wo,this.centroidVertexArray=new wa,this.indexArray=new ra,this.programConfigurations=new Ka(t.layers,t.zoom),this.segments=new as,this.stateDependentLayerIds=this.layers.filter((t=>t.isStateDependent())).map((t=>t.id)),this.enableTerrain=t.enableTerrain}populate(t,e,n,r){this.features=[],this.hasPattern=Tu("fill-extrusion",this.layers,e),this.featuresOnBorder=[],this.borders=[[],[],[],[]],this.borderDoneWithNeighborZ=[-1,-1,-1,-1],this.tileToMeter=function(t){const e=Math.exp(Math.PI*(1-t.y/(1<<t.z)*2));return 80150034*e/(e*e+1)/ss/(1<<t.z)}(n),this.edgeRadius=this.layers[0].layout.get("fill-extrusion-edge-radius")/this.tileToMeter;for(const{feature:i,id:o,index:a,sourceLayerIndex:s}of t){const t=this.layers[0]._featureFilter.needGeometry,l=sc(i,t);if(!this.layers[0]._featureFilter.filter(new wo(this.zoom),l,n))continue;const c={id:o,sourceLayerIndex:s,index:a,geometry:t?l.geometry:ac(i,n,r),properties:i.properties,type:i.type,patterns:{}},u=this.layoutVertexArray.length;this.hasPattern?this.features.push(Mu("fill-extrusion",this.layers,c,this.zoom,e)):this.addFeature(c,c.geometry,a,n,{},e.availableImages,r),e.featureIndex.insert(i,c.geometry,a,s,this.index,u)}this.sortBorders()}addFeatures(t,e,n,r,i){for(const o of this.features){const{geometry:t}=o;this.addFeature(o,t,o.index,e,n,r,i)}this.sortBorders()}update(t,e,n,r){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(t,e,this.stateDependentLayers,n,r)}isEmpty(){return 0===this.layoutVertexArray.length}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(t){this.uploaded||(this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,Lu),this.indexBuffer=t.createIndexBuffer(this.indexArray),this.layoutVertexExtArray&&(this.layoutVertexExtBuffer=t.createVertexBuffer(this.layoutVertexExtArray,Ou.members,!0))),this.programConfigurations.upload(t),this.uploaded=!0}uploadCentroid(t){0!==this.centroidVertexArray.length&&(this.centroidVertexBuffer?this.needsCentroidUpdate&&this.centroidVertexBuffer.updateData(this.centroidVertexArray):this.centroidVertexBuffer=t.createVertexBuffer(this.centroidVertexArray,Iu.members,!0),this.needsCentroidUpdate=!1)}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.centroidVertexBuffer&&this.centroidVertexBuffer.destroy(),this.layoutVertexExtBuffer&&this.layoutVertexExtBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}addFeature(t,e,n,r,i,o,a){const s=[new v(0,0),new v(ss,ss)],l=a.projection,c="globe"===l.name,u=this.enableTerrain&&!c?new Qu:null,h="Polygon"===Yu[t.type];c&&!this.layoutVertexExtArray&&(this.layoutVertexExtArray=new Xo);const d=Su(e,500);for(let g=d.length-1;g>=0;g--){const t=d[g];(0===t.length||(f=t[0]).every((t=>t.x<=0))||f.every((t=>t.x>=ss))||f.every((t=>t.y<=0))||f.every((t=>t.y>=ss)))&&d.splice(g,1)}var f;let p;if(c)p=lh(d,s,r);else{p=[];for(const t of d)p.push({polygon:t,bounds:s})}const m=h?this.edgeRadius:0;for(const{polygon:g,bounds:y}of p){let t=0,e=0;for(const r of g)h&&!r[0].equals(r[r.length-1])&&r.push(r[0]),e+=h?r.length-1:r.length;const n=this.segments.prepareSegment((h?5:4)*e,this.layoutVertexArray,this.indexArray);if(h){const e=[],i=[];t=n.vertexLength;for(const t of g){let o,a;t.length&&t!==g[0]&&i.push(e.length/2),o=t[1].sub(t[0])._perp()._unit();for(let i=1;i<t.length;i++){const s=t[i],u=t[i===t.length-1?1:i+1];let{x:h,y:d}=s;if(m){a=u.sub(s)._perp()._unit();const t=o.add(a)._unit(),e=m*Math.min(4,1/(o.x*t.x+o.y*t.y));h+=e*t.x,d+=e*t.y,o=a}$u(this.layoutVertexArray,h,d,0,0,1,1,0),n.vertexLength++,e.push(s.x,s.y),c&&Ju(this.layoutVertexExtArray,l.projectTilePoint(h,d,r),l.upVector(r,h,d))}}const o=vu(e,i);for(let r=0;r<o.length;r+=3)this.indexArray.emplaceBack(t+o[r],t+o[r+2],t+o[r+1]),n.primitiveLength++}for(const i of g){u&&i.length&&u.startRing(i[0]);let e,o,a,s=i.length>4&&oh(i[i.length-2],i[0],i[1]),d=m?nh(i[i.length-2],i[0],i[1],m):0;o=i[1].sub(i[0])._perp()._unit();let f=!0;for(let p=1,g=0;p<i.length;p++){let v=i[p-1],_=i[p];const b=i[p===i.length-1?1:p+1];if(u&&h&&u.currentPolyCount.top++,ih(_,v,y)){m&&(o=b.sub(_)._perp()._unit(),f=!f);continue}u&&u.append(_,v);const x=_.sub(v)._perp(),w=x.x/(Math.abs(x.x)+Math.abs(x.y)),S=x.y>0?1:0,E=v.dist(_);if(g+E>32768&&(g=0),m){a=b.sub(_)._perp()._unit();let t=rh(v,_,b,eh(o,a),m);isNaN(t)&&(t=0);const e=_.sub(v)._unit();v=v.add(e.mult(d))._round(),_=_.add(e.mult(-t))._round(),d=t,o=a}const T=n.vertexLength,M=i.length>4&&oh(v,_,b);let A=ah(g,s,f);if($u(this.layoutVertexArray,v.x,v.y,w,S,0,0,A),$u(this.layoutVertexArray,v.x,v.y,w,S,0,1,A),g+=E,A=ah(g,M,!f),s=M,$u(this.layoutVertexArray,_.x,_.y,w,S,0,0,A),$u(this.layoutVertexArray,_.x,_.y,w,S,0,1,A),n.vertexLength+=4,this.indexArray.emplaceBack(T+0,T+1,T+2),this.indexArray.emplaceBack(T+1,T+3,T+2),n.primitiveLength+=2,m){const r=t+(1===p?i.length-2:p-2),o=1===p?t:r+1;if(this.indexArray.emplaceBack(T+1,r,T+3),this.indexArray.emplaceBack(r,o,T+3),n.primitiveLength+=2,void 0===e&&(e=T),!ih(b,i[p],y)){const t=p===i.length-1?e:n.vertexLength;this.indexArray.emplaceBack(T+2,T+3,t),this.indexArray.emplaceBack(T+3,t+1,t),this.indexArray.emplaceBack(T+3,o,t+1),n.primitiveLength+=3}f=!f}if(c){const t=this.layoutVertexExtArray,e=l.projectTilePoint(v.x,v.y,r),n=l.projectTilePoint(_.x,_.y,r),i=l.upVector(r,v.x,v.y),o=l.upVector(r,_.x,_.y);Ju(t,e,i),Ju(t,e,i),Ju(t,n,o),Ju(t,n,o)}}h&&(t+=i.length-1)}}if(u&&u.polyCount.length>0){if(u.borders){u.vertexArrayOffset=this.centroidVertexArray.length;const t=u.borders,e=this.featuresOnBorder.push(u)-1;for(let n=0;n<4;n++)t[n][0]!==Number.MAX_VALUE&&this.borders[n].push(e)}this.encodeCentroid(u.borders?void 0:u.centroid(),u)}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,t,n,i,o,r)}sortBorders(){for(let t=0;t<4;t++)this.borders[t].sort(((e,n)=>this.featuresOnBorder[e].borders[t][0]-this.featuresOnBorder[n].borders[t][0]))}encodeCentroid(t,e){let n,r,i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(t)if(0!==t.y){const i=e.span()._mult(this.tileToMeter);n=(Math.max(t.x,1)<<3)+Math.min(7,Math.round(i.x/10)),r=(Math.max(t.y,1)<<3)+Math.min(7,Math.round(i.y/10))}else n=Math.ceil(7*(t.x+450)),r=0;else n=0,r=+i;let o=i?this.centroidVertexArray.length:e.vertexArrayOffset;for(const a of e.polyCount){i&&this.centroidVertexArray.resize(this.centroidVertexArray.length+4*a.edges+a.top);for(let t=0;t<a.top;t++)this.centroidVertexArray.emplace(o++,n,r);for(let t=0;t<2*a.edges;t++)this.centroidVertexArray.emplace(o++,0,r),this.centroidVertexArray.emplace(o++,n,r)}}}function eh(t,e){const n=t.add(e)._unit();return t.x*n.x+t.y*n.y}function nh(t,e,n,r){const i=e.sub(t)._perp()._unit(),o=n.sub(e)._perp()._unit();return rh(t,e,n,eh(i,o),r)}function rh(t,e,n,r,i){const o=Math.sqrt(1-r*r);return Math.min(t.dist(e)/3,e.dist(n)/3,i*o/r)}function ih(t,e,n){return t.x<n[0].x&&e.x<n[0].x||t.x>n[1].x&&e.x>n[1].x||t.y<n[0].y&&e.y<n[0].y||t.y>n[1].y&&e.y>n[1].y}function oh(t,e,n){if(t.x<0||t.x>=ss||e.x<0||e.x>=ss||n.x<0||n.x>=ss)return!1;const r=n.sub(e),i=r.perp(),o=t.sub(e);return(r.x*o.x+r.y*o.y)/Math.sqrt((r.x*r.x+r.y*r.y)*(o.x*o.x+o.y*o.y))>-.866&&i.x*o.x+i.y*o.y<0}function ah(t,e,n){const r=e?2|t:-3&t;return n?1|r:-2&r}function sh(){const t=Math.PI/32,e=Math.tan(t),n=Fl;return n*Math.sqrt(1+2*e*e)-n}function lh(t,e,n){const r=1<<n.z,i=Zl(n.x/r),o=Zl((n.x+1)/r),a=Xl(n.y/r),s=Xl((n.y+1)/r);return function(t,e,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,o=arguments.length>5?arguments[5]:void 0;const a=[];if(!t.length||!n||!r)return a;const s=(t,e)=>{for(const n of t)a.push({polygon:n,bounds:e})},l=Math.ceil(Math.log2(n)),c=Math.ceil(Math.log2(r)),u=l-c,h=[];for(let p=0;p<Math.abs(u);p++)h.push(u>0?0:1);for(let p=0;p<Math.min(l,c);p++)h.push(0),h.push(1);let d=t;if(d=Xu(d,e[0].y-i,e[1].y+i,1),d=Xu(d,e[0].x-i,e[1].x+i,0),!d.length)return a;const f=[];for(h.length?f.push({polygons:d,bounds:e,depth:0}):s(d,e);f.length;){const t=f.pop(),e=t.depth,n=h[e],r=t.bounds[0],a=t.bounds[1],l=0===n?r.x:r.y,c=0===n?a.x:a.y,u=o?o(n,l,c):.5*(l+c),d=Xu(t.polygons,l-i,u+i,n),p=Xu(t.polygons,u-i,c+i,n);if(d.length){const t=[r,new v(0===n?u:a.x,1===n?u:a.y)];h.length>e+1?f.push({polygons:d,bounds:t,depth:e+1}):s(d,t)}if(p.length){const t=[new v(0===n?u:r.x,1===n?u:r.y),a];h.length>e+1?f.push({polygons:p,bounds:t,depth:e+1}):s(p,t)}}return a}(t,e,Math.ceil((o-i)/11.25),Math.ceil((a-s)/11.25),1,((t,e,i)=>{if(0===t)return.5*(e+i);{const t=Xl((n.y+e/ss)/r);return(ql(.5*(Xl((n.y+i/ss)/r)+t))*r-n.y)*ss}}))}Yi(th,"FillExtrusionBucket",{omit:["layers","features"]}),Yi(Qu,"PartMetadata");const ch=new jo({"fill-extrusion-edge-radius":new Io(te["layout_fill-extrusion"]["fill-extrusion-edge-radius"])});var uh={paint:new jo({"fill-extrusion-opacity":new Io(te["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new Oo(te["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new Io(te["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new Io(te["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new Oo(te["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new Oo(te["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new Oo(te["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new Io(te["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"]),"fill-extrusion-ambient-occlusion-intensity":new Io(te["paint_fill-extrusion"]["fill-extrusion-ambient-occlusion-intensity"]),"fill-extrusion-ambient-occlusion-radius":new Io(te["paint_fill-extrusion"]["fill-extrusion-ambient-occlusion-radius"]),"fill-extrusion-rounded-roof":new Io(te["paint_fill-extrusion"]["fill-extrusion-rounded-roof"])}),layout:ch};function hh(t,e,n){var r=2*Math.PI*6378137/256/Math.pow(2,n);return[t*r-2*Math.PI*6378137/2,e*r-2*Math.PI*6378137/2]}class dh{constructor(t,e,n){this.z=t,this.x=e,this.y=n,this.key=mh(0,t,t,e,n)}equals(t){return this.z===t.z&&this.x===t.x&&this.y===t.y}url(t,e){const n=function(t,e,n){var r=hh(256*t,256*(e=Math.pow(2,n)-e-1),n),i=hh(256*(t+1),256*(e+1),n);return r[0]+","+r[1]+","+i[0]+","+i[1]}(this.x,this.y,this.z),r=function(t,e,n){let r,i="";for(let o=t;o>0;o--)r=1<<o-1,i+=(e&r?1:0)+(n&r?2:0);return i}(this.z,this.x,this.y);return t[(this.x+this.y)%t.length].replace("{prefix}",(this.x%16).toString(16)+(this.y%16).toString(16)).replace(/{z}/g,String(this.z)).replace(/{x}/g,String(this.x)).replace(/{y}/g,String("tms"===e?Math.pow(2,this.z)-this.y-1:this.y)).replace("{quadkey}",r).replace("{bbox-epsg-3857}",n)}toString(){return"".concat(this.z,"/").concat(this.x,"/").concat(this.y)}}class fh{constructor(t,e){this.wrap=t,this.canonical=e,this.key=mh(t,e.z,e.z,e.x,e.y)}}class ph{constructor(t,e,n,r,i){this.overscaledZ=t,this.wrap=e,this.canonical=new dh(n,+r,+i),this.key=0===e&&t===n?this.canonical.key:mh(e,t,n,r,i)}equals(t){return this.overscaledZ===t.overscaledZ&&this.wrap===t.wrap&&this.canonical.equals(t.canonical)}scaledTo(t){const e=this.canonical.z-t;return t>this.canonical.z?new ph(t,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new ph(t,this.wrap,t,this.canonical.x>>e,this.canonical.y>>e)}calculateScaledKey(t){let e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(this.overscaledZ===t&&e)return this.key;if(t>this.canonical.z)return mh(this.wrap*+e,t,this.canonical.z,this.canonical.x,this.canonical.y);{const n=this.canonical.z-t;return mh(this.wrap*+e,t,t,this.canonical.x>>n,this.canonical.y>>n)}}isChildOf(t){if(t.wrap!==this.wrap)return!1;const e=this.canonical.z-t.canonical.z;return 0===t.overscaledZ||t.overscaledZ<this.overscaledZ&&t.canonical.x===this.canonical.x>>e&&t.canonical.y===this.canonical.y>>e}children(t){if(this.overscaledZ>=t)return[new ph(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];const e=this.canonical.z+1,n=2*this.canonical.x,r=2*this.canonical.y;return[new ph(e,this.wrap,e,n,r),new ph(e,this.wrap,e,n+1,r),new ph(e,this.wrap,e,n,r+1),new ph(e,this.wrap,e,n+1,r+1)]}isLessThan(t){return this.wrap<t.wrap||!(this.wrap>t.wrap)&&(this.overscaledZ<t.overscaledZ||!(this.overscaledZ>t.overscaledZ)&&(this.canonical.x<t.canonical.x||!(this.canonical.x>t.canonical.x)&&this.canonical.y<t.canonical.y))}wrapped(){return new ph(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)}unwrapTo(t){return new ph(this.overscaledZ,t,this.canonical.z,this.canonical.x,this.canonical.y)}overscaleFactor(){return Math.pow(2,this.overscaledZ-this.canonical.z)}toUnwrapped(){return new fh(this.wrap,this.canonical)}toString(){return"".concat(this.overscaledZ,"/").concat(this.canonical.x,"/").concat(this.canonical.y)}}function mh(t,e,n,r,i){const o=1<<Math.min(n,22);let a=o*(i%o)+r%o;return t&&n<22&&(a+=o*o*((t<0?-2*t-1:2*t)%(1<<2*(22-n)))),16*(32*a+n)+(e-n)}Yi(dh,"CanonicalTileID"),Yi(ph,"OverscaledTileID",{omit:["projMatrix"]});class gh extends v{constructor(t,e,n){super(t,e),this.z=n}}function yh(t,e){return t.x*e.x+t.y*e.y}function vh(t,e){if(1===t.length){let n=0;const r=e[n++];let i;for(;!i||r.equals(i);)if(i=e[n++],!i)return 1/0;for(;n<e.length;n++){const o=e[n],a=t[0],s=i.sub(r),l=o.sub(r),c=a.sub(r),u=yh(s,s),h=yh(s,l),d=yh(l,l),f=yh(c,s),p=yh(c,l),m=u*d-h*h,g=(d*f-h*p)/m,y=(u*p-h*f)/m,v=r.z*(1-g-y)+i.z*g+o.z*y;if(isFinite(v))return v}return 1/0}{let t=1/0;for(const n of e)t=Math.min(t,n.z);return t}}function _h(t,e,n,r,i,o,a,s){const l=a*i.getElevationAt(t,e,!0,!0),c=0!==o[0],u=c?0===o[1]?a*(o[0]/7-450):a*function(t,e,n){const r=Math.floor(e[0]/8),i=Math.floor(e[1]/8),o=10*(e[0]-8*r),a=10*(e[1]-8*i),s=t.getElevationAt(r,i,!0,!0),l=t.getMeterToDEM(n),c=Math.floor(.5*(o*l-1)),u=Math.floor(.5*(a*l-1)),h=t.tileCoordToPixel(r,i),d=2*c+1,f=2*u+1,p=function(t,e,n,r,i){return[t.getElevationAtPixel(e,n,!0),t.getElevationAtPixel(e+i,n,!0),t.getElevationAtPixel(e,n+i,!0),t.getElevationAtPixel(e+r,n+i,!0)]}(t,h.x-c,h.y-u,d,f),m=Math.abs(p[0]-p[1]),g=Math.abs(p[2]-p[3]),y=Math.abs(p[0]-p[2])+Math.abs(p[1]-p[3]),v=Math.min(.25,.5*l*(m+g)/d),_=Math.min(.25,.5*l*y/f);return s+Math.max(v*o,_*a)}(i,o,s):l;return{base:l+(0===n)?-1:n,top:c?Math.max(u+r,l+n+2):l+r}}const bh=Fo([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"},{name:"a_linesofar",components:1,type:"Float32"}],4),{members:xh}=bh,wh=Fo([{name:"a_packed",components:4,type:"Float32"}]),{members:Sh}=wh,Eh=Zu.types,Th=Math.cos(Math.PI/180*37.5);class Mh{constructor(t){this.zoom=t.zoom,this.overscaling=t.overscaling,this.layers=t.layers,this.layerIds=this.layers.map((t=>t.id)),this.index=t.index,this.projection=t.projection,this.hasPattern=!1,this.patternFeatures=[],this.lineClipsArray=[],this.gradients={},this.layers.forEach((t=>{this.gradients[t.id]={}})),this.layoutVertexArray=new Go,this.layoutVertexArray2=new qo,this.indexArray=new ra,this.programConfigurations=new Ka(t.layers,t.zoom),this.segments=new as,this.maxLineLength=0,this.stateDependentLayerIds=this.layers.filter((t=>t.isStateDependent())).map((t=>t.id))}populate(t,e,n,r){this.hasPattern=Tu("line",this.layers,e);const i=this.layers[0].layout.get("line-sort-key"),o=[];for(const{feature:c,id:u,index:h,sourceLayerIndex:d}of t){const t=this.layers[0]._featureFilter.needGeometry,e=sc(c,t);if(!this.layers[0]._featureFilter.filter(new wo(this.zoom),e,n))continue;const a=i?i.evaluate(e,{},n):void 0,s={id:u,properties:c.properties,type:c.type,sourceLayerIndex:d,index:h,geometry:t?e.geometry:ac(c,n,r),patterns:{},sortKey:a};o.push(s)}i&&o.sort(((t,e)=>t.sortKey-e.sortKey));const{lineAtlas:a,featureIndex:s}=e,l=this.addConstantDashes(a);for(const c of o){const{geometry:r,index:i,sourceLayerIndex:o}=c;if(l&&this.addFeatureDashes(c,a),this.hasPattern){const t=Mu("line",this.layers,c,this.zoom,e);this.patternFeatures.push(t)}else this.addFeature(c,r,i,n,a.positions,e.availableImages);s.insert(t[i].feature,r,i,o,this.index)}}addConstantDashes(t){let e=!1;for(const n of this.layers){const r=n.paint.get("line-dasharray").value,i=n.layout.get("line-cap").value;if("constant"!==r.kind||"constant"!==i.kind)e=!0;else{const e=i.value,n=r.value;if(!n)continue;t.addDash(n,e)}}return e}addFeatureDashes(t,e){const n=this.zoom;for(const r of this.layers){const i=r.paint.get("line-dasharray").value,o=r.layout.get("line-cap").value;if("constant"===i.kind&&"constant"===o.kind)continue;let a,s;if("constant"===i.kind){if(a=i.value,!a)continue}else a=i.evaluate({zoom:n},t);s="constant"===o.kind?o.value:o.evaluate({zoom:n},t),e.addDash(a,s),t.patterns[r.id]=e.getKey(a,s)}}update(t,e,n,r){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(t,e,this.stateDependentLayers,n,r)}addFeatures(t,e,n,r,i){for(const o of this.patternFeatures)this.addFeature(o,o.geometry,o.index,e,n,r)}isEmpty(){return 0===this.layoutVertexArray.length}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(t){this.uploaded||(0!==this.layoutVertexArray2.length&&(this.layoutVertexBuffer2=t.createVertexBuffer(this.layoutVertexArray2,Sh)),this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,xh),this.indexBuffer=t.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(t),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}lineFeatureClips(t){if(t.properties&&t.properties.hasOwnProperty("mapbox_clip_start")&&t.properties.hasOwnProperty("mapbox_clip_end"))return{start:+t.properties.mapbox_clip_start,end:+t.properties.mapbox_clip_end}}addFeature(t,e,n,r,i,o){const a=this.layers[0].layout,s=a.get("line-join").evaluate(t,{}),l=a.get("line-cap").evaluate(t,{}),c=a.get("line-miter-limit"),u=a.get("line-round-limit");this.lineClips=this.lineFeatureClips(t);for(const h of e)this.addLine(h,t,s,l,c,u);this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,t,n,i,o,r)}addLine(t,e,n,r,i,o){if(this.distance=0,this.scaledDistance=0,this.totalDistance=0,this.lineSoFar=0,this.lineClips){this.lineClipsArray.push(this.lineClips);for(let e=0;e<t.length-1;e++)this.totalDistance+=t[e].dist(t[e+1]);this.updateScaledDistance(),this.maxLineLength=Math.max(this.maxLineLength,this.totalDistance)}const a="Polygon"===Eh[e.type];let s=t.length;for(;s>=2&&t[s-1].equals(t[s-2]);)s--;let l=0;for(;l<s-1&&t[l].equals(t[l+1]);)l++;if(s<(a?3:2))return;"bevel"===n&&(i=1.05);const c=this.overscaling<=16?15*ss/(512*this.overscaling):0,u=this.segments.prepareSegment(10*s,this.layoutVertexArray,this.indexArray);let h,d,f,p,m;this.e1=this.e2=-1,a&&(h=t[s-2],m=t[l].sub(h)._unit()._perp());for(let g=l;g<s;g++){if(f=g===s-1?a?t[l+1]:void 0:t[g+1],f&&t[g].equals(f))continue;m&&(p=m),h&&(d=h),h=t[g],m=f?f.sub(h)._unit()._perp():p,p=p||m;let e=p.add(m);0===e.x&&0===e.y||e._unit();const y=p.x*m.x+p.y*m.y,v=e.x*m.x+e.y*m.y,_=0!==v?1/v:1/0,b=2*Math.sqrt(2-2*v),x=v<Th&&d&&f,w=p.x*m.y-p.y*m.x>0;if(x&&g>l){const t=h.dist(d);if(t>2*c){const e=h.sub(h.sub(d)._mult(c/t)._round());this.updateDistance(d,e),this.addCurrentVertex(e,p,0,0,u),d=e}}const S=d&&f;let E=S?n:a?"butt":r;if(S&&"round"===E&&(_<o?E="miter":_<=2&&(E="fakeround")),"miter"===E&&_>i&&(E="bevel"),"bevel"===E&&(_>2&&(E="flipbevel"),_<i&&(E="miter")),d&&this.updateDistance(d,h),"miter"===E)e._mult(_),this.addCurrentVertex(h,e,0,0,u);else if("flipbevel"===E){if(_>100)e=m.mult(-1);else{const t=_*p.add(m).mag()/p.sub(m).mag();e._perp()._mult(t*(w?-1:1))}this.addCurrentVertex(h,e,0,0,u),this.addCurrentVertex(h,e.mult(-1),0,0,u)}else if("bevel"===E||"fakeround"===E){const t=-Math.sqrt(_*_-1),e=w?t:0,n=w?0:t;if(d&&this.addCurrentVertex(h,p,e,n,u),"fakeround"===E){const t=Math.round(180*b/Math.PI/20);for(let e=1;e<t;e++){let n=e/t;if(.5!==n){const t=n-.5;n+=n*t*(n-1)*((1.0904+y*(y*(3.55645-1.43519*y)-3.2452))*t*t+(.848013+y*(.215638*y-1.06021)))}const r=m.sub(p)._mult(n)._add(p)._unit()._mult(w?-1:1);this.addHalfVertex(h,r.x,r.y,!1,w,0,u)}}f&&this.addCurrentVertex(h,m,-e,-n,u)}else if("butt"===E)this.addCurrentVertex(h,e,0,0,u);else if("square"===E){const t=d?1:-1;d||this.addCurrentVertex(h,e,t,t,u),this.addCurrentVertex(h,e,0,0,u),d&&this.addCurrentVertex(h,e,t,t,u)}else"round"===E&&(d&&(this.addCurrentVertex(h,p,0,0,u),this.addCurrentVertex(h,p,1,1,u,!0)),f&&(this.addCurrentVertex(h,m,-1,-1,u,!0),this.addCurrentVertex(h,m,0,0,u)));if(x&&g<s-1){const t=h.dist(f);if(t>2*c){const e=h.add(f.sub(h)._mult(c/t)._round());this.updateDistance(h,e),this.addCurrentVertex(e,m,0,0,u),h=e}}}}addCurrentVertex(t,e,n,r,i){let o=arguments.length>5&&void 0!==arguments[5]&&arguments[5];const a=e.y*r-e.x,s=-e.y-e.x*r;this.addHalfVertex(t,e.x+e.y*n,e.y-e.x*n,o,!1,n,i),this.addHalfVertex(t,a,s,o,!0,-r,i)}addHalfVertex(t,e,n,r,i,o,a){let{x:s,y:l}=t;this.layoutVertexArray.emplaceBack((s<<1)+(r?1:0),(l<<1)+(i?1:0),Math.round(63*e)+128,Math.round(63*n)+128,1+(0===o?0:o<0?-1:1),0,this.lineSoFar),this.lineClips&&this.layoutVertexArray2.emplaceBack(this.scaledDistance,this.lineClipsArray.length,this.lineClips.start,this.lineClips.end);const c=a.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,this.e2,c),a.primitiveLength++),i?this.e2=c:this.e1=c}updateScaledDistance(){if(this.lineClips){const t=this.totalDistance/(this.lineClips.end-this.lineClips.start);this.scaledDistance=this.distance/this.totalDistance,this.lineSoFar=t*this.lineClips.start+this.distance}else this.lineSoFar=this.distance}updateDistance(t,e){this.distance+=t.dist(e),this.updateScaledDistance()}}Yi(Mh,"LineBucket",{omit:["layers","patternFeatures"]});const Ah=new jo({"line-cap":new Oo(te.layout_line["line-cap"]),"line-join":new Oo(te.layout_line["line-join"]),"line-miter-limit":new Io(te.layout_line["line-miter-limit"]),"line-round-limit":new Io(te.layout_line["line-round-limit"]),"line-sort-key":new Oo(te.layout_line["line-sort-key"])});var Ch={paint:new jo({"line-opacity":new Oo(te.paint_line["line-opacity"]),"line-color":new Oo(te.paint_line["line-color"]),"line-translate":new Io(te.paint_line["line-translate"]),"line-translate-anchor":new Io(te.paint_line["line-translate-anchor"]),"line-width":new Oo(te.paint_line["line-width"]),"line-gap-width":new Oo(te.paint_line["line-gap-width"]),"line-offset":new Oo(te.paint_line["line-offset"]),"line-blur":new Oo(te.paint_line["line-blur"]),"line-dasharray":new Oo(te.paint_line["line-dasharray"]),"line-pattern":new Oo(te.paint_line["line-pattern"]),"line-gradient":new Lo(te.paint_line["line-gradient"]),"line-trim-offset":new Io(te.paint_line["line-trim-offset"])}),layout:Ah};const Ph=new class extends Oo{possiblyEvaluate(t,e){return e=new wo(Math.floor(e.zoom),{now:e.now,fadeDuration:e.fadeDuration,transition:e.transition}),super.possiblyEvaluate(t,e)}evaluate(t,e,n,r){return e=O({},e,{zoom:Math.floor(e.zoom)}),super.evaluate(t,e,n,r)}}(Ch.paint.properties["line-width"].specification);function kh(t,e){return e>0?e+2*t:t}Ph.useIntegerZoom=!0;const Ih=Fo([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_tex_size",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),Oh=Fo([{name:"a_globe_anchor",components:3,type:"Int16"},{name:"a_globe_normal",components:3,type:"Float32"}],4),Lh=Fo([{name:"a_projected_pos",components:4,type:"Float32"}],4);Fo([{name:"a_fade_opacity",components:1,type:"Uint32"}],4);const jh=Fo([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"}]),zh=Fo([{name:"a_size_scale",components:1,type:"Float32"},{name:"a_padding",components:2,type:"Float32"}]);Fo([{type:"Int16",name:"projectedAnchorX"},{type:"Int16",name:"projectedAnchorY"},{type:"Int16",name:"projectedAnchorZ"},{type:"Int16",name:"tileAnchorX"},{type:"Int16",name:"tileAnchorY"},{type:"Float32",name:"x1"},{type:"Float32",name:"y1"},{type:"Float32",name:"x2"},{type:"Float32",name:"y2"},{type:"Int16",name:"padding"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]);const Rh=Fo([{name:"a_pos",components:3,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4),Dh=Fo([{name:"a_pos_2f",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);Fo([{name:"triangle",components:3,type:"Uint16"}]),Fo([{type:"Int16",name:"projectedAnchorX"},{type:"Int16",name:"projectedAnchorY"},{type:"Int16",name:"projectedAnchorZ"},{type:"Float32",name:"tileAnchorX"},{type:"Float32",name:"tileAnchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"},{type:"Uint8",name:"flipState"}]),Fo([{type:"Int16",name:"projectedAnchorX"},{type:"Int16",name:"projectedAnchorY"},{type:"Int16",name:"projectedAnchorZ"},{type:"Float32",name:"tileAnchorX"},{type:"Float32",name:"tileAnchorY"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",components:2,name:"textOffset"},{type:"Float32",name:"collisionCircleDiameter"}]),Fo([{type:"Float32",name:"offsetX"}]),Fo([{type:"Int16",name:"x"},{type:"Int16",name:"y"}]);var Bh=24;const Fh=128;function Nh(t,e){const{expression:n}=e;if("constant"===n.kind)return{kind:"constant",layoutSize:n.evaluate(new wo(t+1))};if("source"===n.kind)return{kind:"source"};{const{zoomStops:e,interpolationType:r}=n;let i=0;for(;i<e.length&&e[i]<=t;)i++;i=Math.max(0,i-1);let o=i;for(;o<e.length&&e[o]<t+1;)o++;o=Math.min(e.length-1,o);const a=e[i],s=e[o];return"composite"===n.kind?{kind:"composite",minZoom:a,maxZoom:s,interpolationType:r}:{kind:"camera",minZoom:a,maxZoom:s,minSize:n.evaluate(new wo(a)),maxSize:n.evaluate(new wo(s)),interpolationType:r}}}function Uh(t,e,n){let{uSize:r,uSizeT:i}=e,{lowerSize:o,upperSize:a}=n;return"source"===t.kind?o/Fh:"composite"===t.kind?On(o/Fh,a/Fh,i):r}function Vh(t,e){let n=0,r=0;if("constant"===t.kind)r=t.layoutSize;else if("source"!==t.kind){const{interpolationType:i,minZoom:o,maxZoom:a}=t,s=i?A(tr.interpolationFactor(i,e,o,a),0,1):0;"camera"===t.kind?r=On(t.minSize,t.maxSize,s):n=s}return{uSizeT:n,uSize:r}}var Wh=Object.freeze({__proto__:null,SIZE_PACK_FACTOR:Fh,evaluateSizeForFeature:Uh,evaluateSizeForZoom:Vh,getSizeData:Nh});function Gh(t,e,n){return t.sections.forEach((t=>{t.text=function(t,e,n){const r=e.layout.get("text-transform").evaluate(n,{});return"uppercase"===r?t=t.toLocaleUpperCase():"lowercase"===r&&(t=t.toLocaleLowerCase()),xo.applyArabicShaping&&(t=xo.applyArabicShaping(t)),t}(t.text,e,n)})),t}const qh={"!":"\ufe15","#":"\uff03",$:"\uff04","%":"\uff05","&":"\uff06","(":"\ufe35",")":"\ufe36","*":"\uff0a","+":"\uff0b",",":"\ufe10","-":"\ufe32",".":"\u30fb","/":"\uff0f",":":"\ufe13",";":"\ufe14","<":"\ufe3f","=":"\uff1d",">":"\ufe40","?":"\ufe16","@":"\uff20","[":"\ufe47","\\":"\uff3c","]":"\ufe48","^":"\uff3e",_:"\ufe33","`":"\uff40","{":"\ufe37","|":"\u2015","}":"\ufe38","~":"\uff5e","\xa2":"\uffe0","\xa3":"\uffe1","\xa5":"\uffe5","\xa6":"\uffe4","\xac":"\uffe2","\xaf":"\uffe3","\u2013":"\ufe32","\u2014":"\ufe31","\u2018":"\ufe43","\u2019":"\ufe44","\u201c":"\ufe41","\u201d":"\ufe42","\u2026":"\ufe19","\u2027":"\u30fb","\u20a9":"\uffe6","\u3001":"\ufe11","\u3002":"\ufe12","\u3008":"\ufe3f","\u3009":"\ufe40","\u300a":"\ufe3d","\u300b":"\ufe3e","\u300c":"\ufe41","\u300d":"\ufe42","\u300e":"\ufe43","\u300f":"\ufe44","\u3010":"\ufe3b","\u3011":"\ufe3c","\u3014":"\ufe39","\u3015":"\ufe3a","\u3016":"\ufe17","\u3017":"\ufe18","\uff01":"\ufe15","\uff08":"\ufe35","\uff09":"\ufe36","\uff0c":"\ufe10","\uff0d":"\ufe32","\uff0e":"\u30fb","\uff1a":"\ufe13","\uff1b":"\ufe14","\uff1c":"\ufe3f","\uff1e":"\ufe40","\uff1f":"\ufe16","\uff3b":"\ufe47","\uff3d":"\ufe48","\uff3f":"\ufe33","\uff5b":"\ufe37","\uff5c":"\u2015","\uff5d":"\ufe38","\uff5f":"\ufe35","\uff60":"\ufe36","\uff61":"\ufe12","\uff62":"\ufe41","\uff63":"\ufe42","\u2190":"\u2191","\u2192":"\u2193"};function Hh(t){return"\ufe36"===t||"\ufe48"===t||"\ufe38"===t||"\ufe44"===t||"\ufe42"===t||"\ufe3e"===t||"\ufe3c"===t||"\ufe3a"===t||"\ufe18"===t||"\ufe40"===t||"\ufe10"===t||"\ufe13"===t||"\ufe14"===t||"\uff40"===t||"\uffe3"===t||"\ufe11"===t||"\ufe12"===t}function Zh(t){return"\ufe35"===t||"\ufe47"===t||"\ufe37"===t||"\ufe43"===t||"\ufe41"===t||"\ufe3d"===t||"\ufe3b"===t||"\ufe39"===t||"\ufe17"===t||"\ufe3f"===t}var Xh=$h,Yh=function(t,e,n,r,i){var o,a,s=8*i-r-1,l=(1<<s)-1,c=l>>1,u=-7,h=n?i-1:0,d=n?-1:1,f=t[e+h];for(h+=d,o=f&(1<<-u)-1,f>>=-u,u+=s;u>0;o=256*o+t[e+h],h+=d,u-=8);for(a=o&(1<<-u)-1,o>>=-u,u+=r;u>0;a=256*a+t[e+h],h+=d,u-=8);if(0===o)o=1-c;else{if(o===l)return a?NaN:1/0*(f?-1:1);a+=Math.pow(2,r),o-=c}return(f?-1:1)*a*Math.pow(2,o-r)},Kh=function(t,e,n,r,i,o){var a,s,l,c=8*o-i-1,u=(1<<c)-1,h=u>>1,d=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,f=r?0:o-1,p=r?1:-1,m=e<0||0===e&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(s=isNaN(e)?1:0,a=u):(a=Math.floor(Math.log(e)/Math.LN2),e*(l=Math.pow(2,-a))<1&&(a--,l*=2),(e+=a+h>=1?d/l:d*Math.pow(2,1-h))*l>=2&&(a++,l/=2),a+h>=u?(s=0,a=u):a+h>=1?(s=(e*l-1)*Math.pow(2,i),a+=h):(s=e*Math.pow(2,h-1)*Math.pow(2,i),a=0));i>=8;t[n+f]=255&s,f+=p,s/=256,i-=8);for(a=a<<i|s,c+=i;c>0;t[n+f]=255&a,f+=p,a/=256,c-=8);t[n+f-p]|=128*m};function $h(t){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(t)?t:new Uint8Array(t||0),this.pos=0,this.type=0,this.length=this.buf.length}$h.Varint=0,$h.Fixed64=1,$h.Bytes=2,$h.Fixed32=5;var Jh=4294967296,Qh=1/Jh,td="undefined"==typeof TextDecoder?null:new TextDecoder("utf8");function ed(t){return t.type===$h.Bytes?t.readVarint()+t.pos:t.pos+1}function nd(t,e,n){return n?4294967296*e+(t>>>0):4294967296*(e>>>0)+(t>>>0)}function rd(t,e,n){var r=e<=16383?1:e<=2097151?2:e<=268435455?3:Math.floor(Math.log(e)/(7*Math.LN2));n.realloc(r);for(var i=n.pos-1;i>=t;i--)n.buf[i+r]=n.buf[i]}function id(t,e){for(var n=0;n<t.length;n++)e.writeVarint(t[n])}function od(t,e){for(var n=0;n<t.length;n++)e.writeSVarint(t[n])}function ad(t,e){for(var n=0;n<t.length;n++)e.writeFloat(t[n])}function sd(t,e){for(var n=0;n<t.length;n++)e.writeDouble(t[n])}function ld(t,e){for(var n=0;n<t.length;n++)e.writeBoolean(t[n])}function cd(t,e){for(var n=0;n<t.length;n++)e.writeFixed32(t[n])}function ud(t,e){for(var n=0;n<t.length;n++)e.writeSFixed32(t[n])}function hd(t,e){for(var n=0;n<t.length;n++)e.writeFixed64(t[n])}function dd(t,e){for(var n=0;n<t.length;n++)e.writeSFixed64(t[n])}function fd(t,e){return(t[e]|t[e+1]<<8|t[e+2]<<16)+16777216*t[e+3]}function pd(t,e,n){t[n]=e,t[n+1]=e>>>8,t[n+2]=e>>>16,t[n+3]=e>>>24}function md(t,e){return(t[e]|t[e+1]<<8|t[e+2]<<16)+(t[e+3]<<24)}$h.prototype={destroy:function(){this.buf=null},readFields:function(t,e,n){for(n=n||this.length;this.pos<n;){var r=this.readVarint(),i=r>>3,o=this.pos;this.type=7&r,t(i,e,this),this.pos===o&&this.skip(r)}return e},readMessage:function(t,e){return this.readFields(t,e,this.readVarint()+this.pos)},readFixed32:function(){var t=fd(this.buf,this.pos);return this.pos+=4,t},readSFixed32:function(){var t=md(this.buf,this.pos);return this.pos+=4,t},readFixed64:function(){var t=fd(this.buf,this.pos)+fd(this.buf,this.pos+4)*Jh;return this.pos+=8,t},readSFixed64:function(){var t=fd(this.buf,this.pos)+md(this.buf,this.pos+4)*Jh;return this.pos+=8,t},readFloat:function(){var t=Yh(this.buf,this.pos,!0,23,4);return this.pos+=4,t},readDouble:function(){var t=Yh(this.buf,this.pos,!0,52,8);return this.pos+=8,t},readVarint:function(t){var e,n,r=this.buf;return e=127&(n=r[this.pos++]),n<128?e:(e|=(127&(n=r[this.pos++]))<<7,n<128?e:(e|=(127&(n=r[this.pos++]))<<14,n<128?e:(e|=(127&(n=r[this.pos++]))<<21,n<128?e:function(t,e,n){var r,i,o=n.buf;if(r=(112&(i=o[n.pos++]))>>4,i<128)return nd(t,r,e);if(r|=(127&(i=o[n.pos++]))<<3,i<128)return nd(t,r,e);if(r|=(127&(i=o[n.pos++]))<<10,i<128)return nd(t,r,e);if(r|=(127&(i=o[n.pos++]))<<17,i<128)return nd(t,r,e);if(r|=(127&(i=o[n.pos++]))<<24,i<128)return nd(t,r,e);if(r|=(1&(i=o[n.pos++]))<<31,i<128)return nd(t,r,e);throw new Error("Expected varint not more than 10 bytes")}(e|=(15&(n=r[this.pos]))<<28,t,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var t=this.readVarint();return t%2==1?(t+1)/-2:t/2},readBoolean:function(){return Boolean(this.readVarint())},readString:function(){var t=this.readVarint()+this.pos,e=this.pos;return this.pos=t,t-e>=12&&td?function(t,e,n){return td.decode(t.subarray(e,n))}(this.buf,e,t):function(t,e,n){for(var r="",i=e;i<n;){var o,a,s,l=t[i],c=null,u=l>239?4:l>223?3:l>191?2:1;if(i+u>n)break;1===u?l<128&&(c=l):2===u?128==(192&(o=t[i+1]))&&(c=(31&l)<<6|63&o)<=127&&(c=null):3===u?(a=t[i+2],128==(192&(o=t[i+1]))&&128==(192&a)&&((c=(15&l)<<12|(63&o)<<6|63&a)<=2047||c>=55296&&c<=57343)&&(c=null)):4===u&&(a=t[i+2],s=t[i+3],128==(192&(o=t[i+1]))&&128==(192&a)&&128==(192&s)&&((c=(15&l)<<18|(63&o)<<12|(63&a)<<6|63&s)<=65535||c>=1114112)&&(c=null)),null===c?(c=65533,u=1):c>65535&&(c-=65536,r+=String.fromCharCode(c>>>10&1023|55296),c=56320|1023&c),r+=String.fromCharCode(c),i+=u}return r}(this.buf,e,t)},readBytes:function(){var t=this.readVarint()+this.pos,e=this.buf.subarray(this.pos,t);return this.pos=t,e},readPackedVarint:function(t,e){if(this.type!==$h.Bytes)return t.push(this.readVarint(e));var n=ed(this);for(t=t||[];this.pos<n;)t.push(this.readVarint(e));return t},readPackedSVarint:function(t){if(this.type!==$h.Bytes)return t.push(this.readSVarint());var e=ed(this);for(t=t||[];this.pos<e;)t.push(this.readSVarint());return t},readPackedBoolean:function(t){if(this.type!==$h.Bytes)return t.push(this.readBoolean());var e=ed(this);for(t=t||[];this.pos<e;)t.push(this.readBoolean());return t},readPackedFloat:function(t){if(this.type!==$h.Bytes)return t.push(this.readFloat());var e=ed(this);for(t=t||[];this.pos<e;)t.push(this.readFloat());return t},readPackedDouble:function(t){if(this.type!==$h.Bytes)return t.push(this.readDouble());var e=ed(this);for(t=t||[];this.pos<e;)t.push(this.readDouble());return t},readPackedFixed32:function(t){if(this.type!==$h.Bytes)return t.push(this.readFixed32());var e=ed(this);for(t=t||[];this.pos<e;)t.push(this.readFixed32());return t},readPackedSFixed32:function(t){if(this.type!==$h.Bytes)return t.push(this.readSFixed32());var e=ed(this);for(t=t||[];this.pos<e;)t.push(this.readSFixed32());return t},readPackedFixed64:function(t){if(this.type!==$h.Bytes)return t.push(this.readFixed64());var e=ed(this);for(t=t||[];this.pos<e;)t.push(this.readFixed64());return t},readPackedSFixed64:function(t){if(this.type!==$h.Bytes)return t.push(this.readSFixed64());var e=ed(this);for(t=t||[];this.pos<e;)t.push(this.readSFixed64());return t},skip:function(t){var e=7&t;if(e===$h.Varint)for(;this.buf[this.pos++]>127;);else if(e===$h.Bytes)this.pos=this.readVarint()+this.pos;else if(e===$h.Fixed32)this.pos+=4;else{if(e!==$h.Fixed64)throw new Error("Unimplemented type: "+e);this.pos+=8}},writeTag:function(t,e){this.writeVarint(t<<3|e)},realloc:function(t){for(var e=this.length||16;e<this.pos+t;)e*=2;if(e!==this.length){var n=new Uint8Array(e);n.set(this.buf),this.buf=n,this.length=e}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(t){this.realloc(4),pd(this.buf,t,this.pos),this.pos+=4},writeSFixed32:function(t){this.realloc(4),pd(this.buf,t,this.pos),this.pos+=4},writeFixed64:function(t){this.realloc(8),pd(this.buf,-1&t,this.pos),pd(this.buf,Math.floor(t*Qh),this.pos+4),this.pos+=8},writeSFixed64:function(t){this.realloc(8),pd(this.buf,-1&t,this.pos),pd(this.buf,Math.floor(t*Qh),this.pos+4),this.pos+=8},writeVarint:function(t){(t=+t||0)>268435455||t<0?function(t,e){var n,r;if(t>=0?(n=t%4294967296|0,r=t/4294967296|0):(r=~(-t/4294967296),4294967295^(n=~(-t%4294967296))?n=n+1|0:(n=0,r=r+1|0)),t>=0x10000000000000000||t<-0x10000000000000000)throw new Error("Given varint doesn't fit into 10 bytes");e.realloc(10),function(t,e,n){n.buf[n.pos++]=127&t|128,t>>>=7,n.buf[n.pos++]=127&t|128,t>>>=7,n.buf[n.pos++]=127&t|128,t>>>=7,n.buf[n.pos++]=127&t|128,n.buf[n.pos]=127&(t>>>=7)}(n,0,e),function(t,e){var n=(7&t)<<4;e.buf[e.pos++]|=n|((t>>>=3)?128:0),t&&(e.buf[e.pos++]=127&t|((t>>>=7)?128:0),t&&(e.buf[e.pos++]=127&t|((t>>>=7)?128:0),t&&(e.buf[e.pos++]=127&t|((t>>>=7)?128:0),t&&(e.buf[e.pos++]=127&t|((t>>>=7)?128:0),t&&(e.buf[e.pos++]=127&t)))))}(r,e)}(t,this):(this.realloc(4),this.buf[this.pos++]=127&t|(t>127?128:0),t<=127||(this.buf[this.pos++]=127&(t>>>=7)|(t>127?128:0),t<=127||(this.buf[this.pos++]=127&(t>>>=7)|(t>127?128:0),t<=127||(this.buf[this.pos++]=t>>>7&127))))},writeSVarint:function(t){this.writeVarint(t<0?2*-t-1:2*t)},writeBoolean:function(t){this.writeVarint(Boolean(t))},writeString:function(t){t=String(t),this.realloc(4*t.length),this.pos++;var e=this.pos;this.pos=function(t,e,n){for(var r,i,o=0;o<e.length;o++){if((r=e.charCodeAt(o))>55295&&r<57344){if(!i){r>56319||o+1===e.length?(t[n++]=239,t[n++]=191,t[n++]=189):i=r;continue}if(r<56320){t[n++]=239,t[n++]=191,t[n++]=189,i=r;continue}r=i-55296<<10|r-56320|65536,i=null}else i&&(t[n++]=239,t[n++]=191,t[n++]=189,i=null);r<128?t[n++]=r:(r<2048?t[n++]=r>>6|192:(r<65536?t[n++]=r>>12|224:(t[n++]=r>>18|240,t[n++]=r>>12&63|128),t[n++]=r>>6&63|128),t[n++]=63&r|128)}return n}(this.buf,t,this.pos);var n=this.pos-e;n>=128&&rd(e,n,this),this.pos=e-1,this.writeVarint(n),this.pos+=n},writeFloat:function(t){this.realloc(4),Kh(this.buf,t,this.pos,!0,23,4),this.pos+=4},writeDouble:function(t){this.realloc(8),Kh(this.buf,t,this.pos,!0,52,8),this.pos+=8},writeBytes:function(t){var e=t.length;this.writeVarint(e),this.realloc(e);for(var n=0;n<e;n++)this.buf[this.pos++]=t[n]},writeRawMessage:function(t,e){this.pos++;var n=this.pos;t(e,this);var r=this.pos-n;r>=128&&rd(n,r,this),this.pos=n-1,this.writeVarint(r),this.pos+=r},writeMessage:function(t,e,n){this.writeTag(t,$h.Bytes),this.writeRawMessage(e,n)},writePackedVarint:function(t,e){e.length&&this.writeMessage(t,id,e)},writePackedSVarint:function(t,e){e.length&&this.writeMessage(t,od,e)},writePackedBoolean:function(t,e){e.length&&this.writeMessage(t,ld,e)},writePackedFloat:function(t,e){e.length&&this.writeMessage(t,ad,e)},writePackedDouble:function(t,e){e.length&&this.writeMessage(t,sd,e)},writePackedFixed32:function(t,e){e.length&&this.writeMessage(t,cd,e)},writePackedSFixed32:function(t,e){e.length&&this.writeMessage(t,ud,e)},writePackedFixed64:function(t,e){e.length&&this.writeMessage(t,hd,e)},writePackedSFixed64:function(t,e){e.length&&this.writeMessage(t,dd,e)},writeBytesField:function(t,e){this.writeTag(t,$h.Bytes),this.writeBytes(e)},writeFixed32Field:function(t,e){this.writeTag(t,$h.Fixed32),this.writeFixed32(e)},writeSFixed32Field:function(t,e){this.writeTag(t,$h.Fixed32),this.writeSFixed32(e)},writeFixed64Field:function(t,e){this.writeTag(t,$h.Fixed64),this.writeFixed64(e)},writeSFixed64Field:function(t,e){this.writeTag(t,$h.Fixed64),this.writeSFixed64(e)},writeVarintField:function(t,e){this.writeTag(t,$h.Varint),this.writeVarint(e)},writeSVarintField:function(t,e){this.writeTag(t,$h.Varint),this.writeSVarint(e)},writeStringField:function(t,e){this.writeTag(t,$h.Bytes),this.writeString(e)},writeFloatField:function(t,e){this.writeTag(t,$h.Fixed32),this.writeFloat(e)},writeDoubleField:function(t,e){this.writeTag(t,$h.Fixed64),this.writeDouble(e)},writeBooleanField:function(t,e){this.writeVarintField(t,Boolean(e))}};var gd=d(Xh);const yd=3;function vd(t,e,n){e.glyphs=[],1===t&&n.readMessage(_d,e)}function _d(t,e,n){if(3===t){const{id:t,bitmap:r,width:i,height:o,left:a,top:s,advance:l}=n.readMessage(bd,{});e.glyphs.push({id:t,bitmap:new Bc({width:i+2*yd,height:o+2*yd},r),metrics:{width:i,height:o,left:a,top:s,advance:l}})}else 4===t?e.ascender=n.readSVarint():5===t&&(e.descender=n.readSVarint())}function bd(t,e,n){1===t?e.id=n.readVarint():2===t?e.bitmap=n.readBytes():3===t?e.width=n.readVarint():4===t?e.height=n.readVarint():5===t?e.left=n.readSVarint():6===t?e.top=n.readSVarint():7===t&&(e.advance=n.readVarint())}const xd=yd;function wd(t){let e=0,n=0;for(const a of t)e+=a.w*a.h,n=Math.max(n,a.w);t.sort(((t,e)=>e.h-t.h));const r=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(e/.95)),n),h:1/0}];let i=0,o=0;for(const a of t)for(let t=r.length-1;t>=0;t--){const e=r[t];if(!(a.w>e.w||a.h>e.h)){if(a.x=e.x,a.y=e.y,o=Math.max(o,a.y+a.h),i=Math.max(i,a.x+a.w),a.w===e.w&&a.h===e.h){const e=r.pop();t<r.length&&(r[t]=e)}else a.h===e.h?(e.x+=a.w,e.w-=a.w):a.w===e.w?(e.y+=a.h,e.h-=a.h):(r.push({x:e.x+a.w,y:e.y,w:e.w-a.w,h:a.h}),e.y+=a.h,e.h-=a.h);break}}return{w:i,h:o,fill:e/(i*o)||0}}const Sd=1;class Ed{constructor(t,e){let{pixelRatio:n,version:r,stretchX:i,stretchY:o,content:a}=e;this.paddedRect=t,this.pixelRatio=n,this.stretchX=i,this.stretchY=o,this.content=a,this.version=r}get tl(){return[this.paddedRect.x+Sd,this.paddedRect.y+Sd]}get br(){return[this.paddedRect.x+this.paddedRect.w-Sd,this.paddedRect.y+this.paddedRect.h-Sd]}get displaySize(){return[(this.paddedRect.w-2*Sd)/this.pixelRatio,(this.paddedRect.h-2*Sd)/this.pixelRatio]}}class Td{constructor(t,e){const n={},r={};this.haveRenderCallbacks=[];const i=[];this.addImages(t,n,i),this.addImages(e,r,i);const{w:o,h:a}=wd(i),s=new Fc({width:o||1,height:a||1});for(const l in t){const e=t[l],r=n[l].paddedRect;Fc.copy(e.data,s,{x:0,y:0},{x:r.x+Sd,y:r.y+Sd},e.data)}for(const l in e){const t=e[l],n=r[l].paddedRect,i=n.x+Sd,o=n.y+Sd,a=t.data.width,c=t.data.height;Fc.copy(t.data,s,{x:0,y:0},{x:i,y:o},t.data),Fc.copy(t.data,s,{x:0,y:c-1},{x:i,y:o-1},{width:a,height:1}),Fc.copy(t.data,s,{x:0,y:0},{x:i,y:o+c},{width:a,height:1}),Fc.copy(t.data,s,{x:a-1,y:0},{x:i-1,y:o},{width:1,height:c}),Fc.copy(t.data,s,{x:0,y:0},{x:i+a,y:o},{width:1,height:c})}this.image=s,this.iconPositions=n,this.patternPositions=r}addImages(t,e,n){for(const r in t){const i=t[r],o={x:0,y:0,w:i.data.width+2*Sd,h:i.data.height+2*Sd};n.push(o),e[r]=new Ed(o,i),i.hasRenderCallback&&this.haveRenderCallbacks.push(r)}}patchUpdatedImages(t,e){this.haveRenderCallbacks=this.haveRenderCallbacks.filter((e=>t.hasImage(e))),t.dispatchRenderCallbacks(this.haveRenderCallbacks);for(const n in t.updatedImages)this.patchUpdatedImage(this.iconPositions[n],t.getImage(n),e),this.patchUpdatedImage(this.patternPositions[n],t.getImage(n),e)}patchUpdatedImage(t,e,n){if(!t||!e)return;if(t.version===e.version)return;t.version=e.version;const[r,i]=t.tl;n.update(e.data,void 0,{x:r,y:i})}}Yi(Ed,"ImagePosition"),Yi(Td,"ImageAtlas");const Md={horizontal:1,vertical:2,horizontalOnly:3},Ad=-17;class Cd{constructor(){this.scale=1,this.fontStack="",this.imageName=null}static forText(t,e){const n=new Cd;return n.scale=t||1,n.fontStack=e,n}static forImage(t){const e=new Cd;return e.imageName=t,e}}class Pd{constructor(){this.text="",this.sectionIndex=[],this.sections=[],this.imageSectionID=null}static fromFeature(t,e){const n=new Pd;for(let r=0;r<t.sections.length;r++){const i=t.sections[r];i.image?n.addImageSection(i):n.addTextSection(i,e)}return n}length(){return this.text.length}getSection(t){return this.sections[this.sectionIndex[t]]}getSections(){return this.sections}getSectionIndex(t){return this.sectionIndex[t]}getCharCode(t){return this.text.charCodeAt(t)}verticalizePunctuation(t){this.text=function(t,e){let n="";for(let r=0;r<t.length;r++){const i=t.charCodeAt(r+1)||null,o=t.charCodeAt(r-1)||null;n+=!e&&(i&&oo(i)&&!qh[t[r+1]]||o&&oo(o)&&!qh[t[r-1]])||!qh[t[r]]?t[r]:qh[t[r]]}return n}(this.text,t)}trim(){let t=0;for(let n=0;n<this.text.length&&Id[this.text.charCodeAt(n)];n++)t++;let e=this.text.length;for(let n=this.text.length-1;n>=0&&n>=t&&Id[this.text.charCodeAt(n)];n--)e--;this.text=this.text.substring(t,e),this.sectionIndex=this.sectionIndex.slice(t,e)}substring(t,e){const n=new Pd;return n.text=this.text.substring(t,e),n.sectionIndex=this.sectionIndex.slice(t,e),n.sections=this.sections,n}toString(){return this.text}getMaxScale(){return this.sectionIndex.reduce(((t,e)=>Math.max(t,this.sections[e].scale)),0)}addTextSection(t,e){this.text+=t.text,this.sections.push(Cd.forText(t.scale,t.fontStack||e));const n=this.sections.length-1;for(let r=0;r<t.text.length;++r)this.sectionIndex.push(n)}addImageSection(t){const e=t.image?t.image.name:"";if(0===e.length)return void G("Can't add FormattedSection with an empty image.");const n=this.getNextImageSectionCharCode();n?(this.text+=String.fromCharCode(n),this.sections.push(Cd.forImage(e)),this.sectionIndex.push(this.sections.length-1)):G("Reached maximum number of images 6401")}getNextImageSectionCharCode(){return this.imageSectionID?this.imageSectionID>=63743?null:++this.imageSectionID:(this.imageSectionID=57344,this.imageSectionID)}}function kd(t,e,n,r,i,o,a,s,l,c,u,h,d,f,p){const m=Pd.fromFeature(t,i);h===Md.vertical&&m.verticalizePunctuation(d);let g=[];const y=function(t,e,n,r,i,o){if(!t)return[];const a=[],s=function(t,e,n,r,i,o){let a=0;for(let s=0;s<t.length();s++){const n=t.getSection(s);a+=Ld(t.getCharCode(s),n,r,i,e,o)}return a/Math.max(1,Math.ceil(a/n))}(t,e,n,r,i,o),l=t.text.indexOf("\u200b")>=0;let c=0;for(let h=0;h<t.length();h++){const n=t.getSection(h),d=t.getCharCode(h);if(Id[d]||(c+=Ld(d,n,r,i,e,o)),h<t.length()-1){const e=!((u=d)<11904||!(to["Bopomofo Extended"](u)||to.Bopomofo(u)||to["CJK Compatibility Forms"](u)||to["CJK Compatibility Ideographs"](u)||to["CJK Compatibility"](u)||to["CJK Radicals Supplement"](u)||to["CJK Strokes"](u)||to["CJK Symbols and Punctuation"](u)||to["CJK Unified Ideographs Extension A"](u)||to["CJK Unified Ideographs"](u)||to["Enclosed CJK Letters and Months"](u)||to["Halfwidth and Fullwidth Forms"](u)||to.Hiragana(u)||to["Ideographic Description Characters"](u)||to["Kangxi Radicals"](u)||to["Katakana Phonetic Extensions"](u)||to.Katakana(u)||to["Vertical Forms"](u)||to["Yi Radicals"](u)||to["Yi Syllables"](u)));(Od[d]||e||n.imageName)&&a.push(Rd(h+1,c,s,a,zd(d,t.getCharCode(h+1),e&&l),!1))}}var u;return Dd(Rd(t.length(),c,s,a,0,!0))}(m,c,o,e,r,f),{processBidirectionalText:v,processStyledBidirectionalText:_}=xo;if(v&&1===m.sections.length){const t=v(m.toString(),y);for(const e of t){const t=new Pd;t.text=e,t.sections=m.sections;for(let n=0;n<e.length;n++)t.sectionIndex.push(0);g.push(t)}}else if(_){const t=_(m.text,m.sectionIndex,y);for(const e of t){const t=new Pd;t.text=e[0],t.sectionIndex=e[1],t.sections=m.sections,g.push(t)}}else g=function(t,e){const n=[],r=t.text;let i=0;for(const o of e)n.push(t.substring(i,o)),i=o;return i<r.length&&n.push(t.substring(i,r.length)),n}(m,y);const b=[],x={positionedLines:b,text:m.toString(),top:u[1],bottom:u[1],left:u[0],right:u[0],writingMode:h,iconsInText:!1,verticalizable:!1,hasBaseline:!1};return function(t,e,n,r,i,o,a,s,l,c,u,h){let d=0,f=0,p=0;const m="right"===s?1:"left"===s?0:.5;let g=!1;for(const w of i){const t=w.getSections();for(const n of t){if(n.imageName)continue;const t=e[n.fontStack];if(t&&(g=void 0!==t.ascender&&void 0!==t.descender,!g))break}if(!g)break}let y=0;for(const w of i){w.trim();const i=w.getMaxScale(),a=(i-1)*Bh,s={positionedGlyphs:[],lineOffset:0};t.positionedLines[y]=s;const _=s.positionedGlyphs;let b=0;if(!w.length()){f+=o,++y;continue}let x=0,S=0;for(let o=0;o<w.length();o++){const a=w.getSection(o),s=w.getSectionIndex(o),p=w.getCharCode(o);let m=a.scale,y=null,E=null,T=null,M=Bh,A=0;const C=!(l===Md.horizontal||!u&&!io(p)||u&&(Id[p]||(v=p,to.Arabic(v)||to["Arabic Supplement"](v)||to["Arabic Extended-A"](v)||to["Arabic Presentation Forms-A"](v)||to["Arabic Presentation Forms-B"](v))));if(a.imageName){const e=r[a.imageName];if(!e)continue;T=a.imageName,t.iconsInText=t.iconsInText||!0,E=e.paddedRect;const n=e.displaySize;m=m*Bh/h,y={width:n[0],height:n[1],left:Sd,top:-xd,advance:C?n[1]:n[0],localGlyph:!1},A=g?-y.height*m:Ad+i*Bh-n[1]*m,M=y.advance;const o=(C?n[0]:n[1])*m-Bh*i;o>0&&o>b&&(b=o)}else{const t=n[a.fontStack];if(!t)continue;t[p]&&(E=t[p]);const r=e[a.fontStack];if(!r)continue;const o=r.glyphs[p];if(!o)continue;if(y=o.metrics,M=8203!==p?Bh:0,g){const t=void 0!==r.ascender?Math.abs(r.ascender):0,e=void 0!==r.descender?Math.abs(r.descender):0,n=(t+e)*m;x<n&&(x=n,S=(t-e)/2*m),A=-t*m}else A=Ad+(i-m)*Bh}C?(t.verticalizable=!0,_.push({glyph:p,imageName:T,x:d,y:f+A,vertical:C,scale:m,localGlyph:y.localGlyph,fontStack:a.fontStack,sectionIndex:s,metrics:y,rect:E}),d+=M*m+c):(_.push({glyph:p,imageName:T,x:d,y:f+A,vertical:C,scale:m,localGlyph:y.localGlyph,fontStack:a.fontStack,sectionIndex:s,metrics:y,rect:E}),d+=y.advance*m+c)}0!==_.length&&(p=Math.max(d-c,p),g?Fd(_,m,b,S,o*i/2):Fd(_,m,b,0,o/2)),d=0;const E=o*i+b;s.lineOffset=Math.max(b,a),f+=E,++y}var v;const _=f,{horizontalAlign:b,verticalAlign:x}=Bd(a);(function(t,e,n,r,i,o){const a=(e-n)*i,s=-o*r;for(const l of t)for(const t of l.positionedGlyphs)t.x+=a,t.y+=s})(t.positionedLines,m,b,x,p,_),t.top+=-x*_,t.bottom=t.top+_,t.left+=-b*p,t.right=t.left+p,t.hasBaseline=g}(x,e,n,r,g,a,s,l,h,c,d,p),!function(t){for(const e of t)if(0!==e.positionedGlyphs.length)return!1;return!0}(b)&&x}const Id={9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},Od={10:!0,32:!0,38:!0,40:!0,41:!0,43:!0,45:!0,47:!0,173:!0,183:!0,8203:!0,8208:!0,8211:!0,8231:!0};function Ld(t,e,n,r,i,o){if(e.imageName){const t=r[e.imageName];return t?t.displaySize[0]*e.scale*Bh/o+i:0}{const r=n[e.fontStack],o=r&&r.glyphs[t];return o?o.metrics.advance*e.scale+i:0}}function jd(t,e,n,r){const i=Math.pow(t-e,2);return r?t<e?i/2:2*i:i+Math.abs(n)*n}function zd(t,e,n){let r=0;return 10===t&&(r-=1e4),n&&(r+=150),40!==t&&65288!==t||(r+=50),41!==e&&65289!==e||(r+=50),r}function Rd(t,e,n,r,i,o){let a=null,s=jd(e,n,i,o);for(const l of r){const t=jd(e-l.x,n,i,o)+l.badness;t<=s&&(a=l,s=t)}return{index:t,x:e,priorBreak:a,badness:s}}function Dd(t){return t?Dd(t.priorBreak).concat(t.index):[]}function Bd(t){let e=.5,n=.5;switch(t){case"right":case"top-right":case"bottom-right":e=1;break;case"left":case"top-left":case"bottom-left":e=0}switch(t){case"bottom":case"bottom-right":case"bottom-left":n=1;break;case"top":case"top-right":case"top-left":n=0}return{horizontalAlign:e,verticalAlign:n}}function Fd(t,e,n,r,i){if(!(e||n||r||i))return;const o=t.length-1,a=t[o],s=(a.x+a.metrics.advance*a.scale)*e;for(let l=0;l<=o;l++)t[l].x-=s,t[l].y+=n+r+i}function Nd(t,e,n){const{horizontalAlign:r,verticalAlign:i}=Bd(n),o=e[0]-t.displaySize[0]*r,a=e[1]-t.displaySize[1]*i;return{image:t,top:a,bottom:a+t.displaySize[1],left:o,right:o+t.displaySize[0]}}function Ud(t,e,n,r,i,o){const a=t.image;let s;if(a.content){const t=a.content,e=a.pixelRatio||1;s=[t[0]/e,t[1]/e,a.displaySize[0]-t[2]/e,a.displaySize[1]-t[3]/e]}const l=e.left*o,c=e.right*o;let u,h,d,f;"width"===n||"both"===n?(f=i[0]+l-r[3],h=i[0]+c+r[1]):(f=i[0]+(l+c-a.displaySize[0])/2,h=f+a.displaySize[0]);const p=e.top*o,m=e.bottom*o;return"height"===n||"both"===n?(u=i[1]+p-r[0],d=i[1]+m+r[2]):(u=i[1]+(p+m-a.displaySize[1])/2,d=u+a.displaySize[1]),{image:a,top:u,right:h,bottom:d,left:f,collisionPadding:s}}class Vd extends v{constructor(t,e,n,r,i){super(t,e),this.angle=r,this.z=n,void 0!==i&&(this.segment=i)}clone(){return new Vd(this.x,this.y,this.z,this.angle,this.segment)}}function Wd(t,e,n,r,i){if(void 0===e.segment)return!0;let o=e,a=e.segment+1,s=0;for(;s>-n/2;){if(a--,a<0)return!1;s-=t[a].dist(o),o=t[a]}s+=t[a].dist(t[a+1]),a++;const l=[];let c=0;for(;s<n/2;){const e=t[a],n=t[a+1];if(!n)return!1;let o=t[a-1].angleTo(e)-e.angleTo(n);for(o=Math.abs((o+3*Math.PI)%(2*Math.PI)-Math.PI),l.push({distance:s,angleDelta:o}),c+=o;s-l[0].distance>r;)c-=l.shift().angleDelta;if(c>i)return!1;a++,s+=e.dist(n)}return!0}function Gd(t){let e=0;for(let n=0;n<t.length-1;n++)e+=t[n].dist(t[n+1]);return e}function qd(t,e,n){return t?.6*e*n:0}function Hd(t,e){return Math.max(t?t.right-t.left:0,e?e.right-e.left:0)}function Zd(t,e,n,r,i,o){const a=qd(n,i,o),s=Hd(n,r)*o;let l=0;const c=Gd(t)/2;for(let u=0;u<t.length-1;u++){const n=t[u],r=t[u+1],i=n.dist(r);if(l+i>c){const o=(c-l)/i,h=On(n.x,r.x,o),d=On(n.y,r.y,o),f=new Vd(h,d,0,r.angleTo(n),u);return!a||Wd(t,f,s,a,e)?f:void 0}l+=i}}function Xd(t,e,n,r,i,o,a,s,l){const c=qd(r,o,a),u=Hd(r,i),h=u*a,d=0===t[0].x||t[0].x===l||0===t[0].y||t[0].y===l;return e-h<e/4&&(e=h+e/4),Yd(t,d?e/2*s%e:(u/2+2*o)*a*s%e,e,c,n,h,d,!1,l)}function Yd(t,e,n,r,i,o,a,s,l){const c=o/2,u=Gd(t);let h=0,d=e-n,f=[];for(let p=0;p<t.length-1;p++){const e=t[p],a=t[p+1],s=e.dist(a),m=a.angleTo(e);for(;d+n<h+s;){d+=n;const g=(d-h)/s,y=On(e.x,a.x,g),v=On(e.y,a.y,g);if(y>=0&&y<l&&v>=0&&v<l&&d-c>=0&&d+c<=u){const e=new Vd(y,v,0,m,p);e._round(),r&&!Wd(t,e,o,r,i)||f.push(e)}}h+=s}return s||f.length||a||(f=Yd(t,h/2,n,r,i,o,a,!0,l)),f}function Kd(t,e,n,r,i){const o=[];for(let a=0;a<t.length;a++){const s=t[a];let l;for(let t=0;t<s.length-1;t++){let a=s[t],c=s[t+1];a.x<e&&c.x<e||(a.x<e?a=new v(e,a.y+(e-a.x)/(c.x-a.x)*(c.y-a.y))._round():c.x<e&&(c=new v(e,a.y+(e-a.x)/(c.x-a.x)*(c.y-a.y))._round()),a.y<n&&c.y<n||(a.y<n?a=new v(a.x+(n-a.y)/(c.y-a.y)*(c.x-a.x),n)._round():c.y<n&&(c=new v(a.x+(n-a.y)/(c.y-a.y)*(c.x-a.x),n)._round()),a.x>=r&&c.x>=r||(a.x>=r?a=new v(r,a.y+(r-a.x)/(c.x-a.x)*(c.y-a.y))._round():c.x>=r&&(c=new v(r,a.y+(r-a.x)/(c.x-a.x)*(c.y-a.y))._round()),a.y>=i&&c.y>=i||(a.y>=i?a=new v(a.x+(i-a.y)/(c.y-a.y)*(c.x-a.x),i)._round():c.y>=i&&(c=new v(a.x+(i-a.y)/(c.y-a.y)*(c.x-a.x),i)._round()),l&&a.equals(l[l.length-1])||(l=[a],o.push(l)),l.push(c)))))}}return o}Yi(Vd,"Anchor");const $d=1e20;function Jd(t,e,n,r,i,o,a,s,l){for(let c=e;c<e+r;c++)Qd(t,n*o+c,o,i,a,s,l);for(let c=n;c<n+i;c++)Qd(t,c*o+e,1,r,a,s,l)}function Qd(t,e,n,r,i,o,a){o[0]=0,a[0]=-$d,a[1]=$d,i[0]=t[e];for(let s=1,l=0,c=0;s<r;s++){i[s]=t[e+s*n];const r=s*s;do{const t=o[l];c=(i[s]-i[t]+r-t*t)/(s-t)/2}while(c<=a[l]&&--l>-1);l++,o[l]=s,a[l]=c,a[l+1]=$d}for(let s=0,l=0;s<r;s++){for(;a[l+1]<s;)l++;const r=o[l],c=s-r;t[e+s*n]=i[r]+c*c}}const tf=2,ef={none:0,ideographs:1,all:2};class nf{constructor(t,e,n){this.requestManager=t,this.localGlyphMode=e,this.localFontFamily=n,this.entries={},this.localGlyphs={200:{},400:{},500:{},900:{}}}setURL(t){this.url=t}getGlyphs(t,e){const n=[];for(const r in t)for(const e of t[r])n.push({stack:r,id:e});k(n,((t,e)=>{let{stack:n,id:r}=t,i=this.entries[n];i||(i=this.entries[n]={glyphs:{},requests:{},ranges:{},ascender:void 0,descender:void 0});let o=i.glyphs[r];if(void 0!==o)return void e(null,{stack:n,id:r,glyph:o});if(o=this._tinySDF(i,n,r),o)return i.glyphs[r]=o,void e(null,{stack:n,id:r,glyph:o});const a=Math.floor(r/256);if(256*a>65535)return void e(new Error("glyphs > 65535 not supported"));if(i.ranges[a])return void e(null,{stack:n,id:r,glyph:o});let s=i.requests[a];s||(s=i.requests[a]=[],nf.loadGlyphRange(n,a,this.url,this.requestManager,((t,e)=>{if(e){i.ascender=e.ascender,i.descender=e.descender;for(const t in e.glyphs)this._doesCharSupportLocalGlyph(+t)||(i.glyphs[+t]=e.glyphs[+t]);i.ranges[a]=!0}for(const n of s)n(t,e);delete i.requests[a]}))),s.push(((t,i)=>{t?e(t):i&&e(null,{stack:n,id:r,glyph:i.glyphs[r]||null})}))}),((t,n)=>{if(t)e(t);else if(n){const t={};for(const{stack:e,id:r,glyph:i}of n)void 0===t[e]&&(t[e]={}),void 0===t[e].glyphs&&(t[e].glyphs={}),t[e].glyphs[r]=i&&{id:i.id,bitmap:i.bitmap.clone(),metrics:i.metrics},t[e].ascender=this.entries[e].ascender,t[e].descender=this.entries[e].descender;e(null,t)}}))}_doesCharSupportLocalGlyph(t){return this.localGlyphMode!==ef.none&&(this.localGlyphMode===ef.all?!!this.localFontFamily:!!this.localFontFamily&&(to["CJK Unified Ideographs"](t)||to["Hangul Syllables"](t)||to.Hiragana(t)||to.Katakana(t)||to["CJK Symbols and Punctuation"](t)))}_tinySDF(t,e,n){const r=this.localFontFamily;if(!r||!this._doesCharSupportLocalGlyph(n))return;let i=t.tinySDF;if(!i){let n="400";/bold/i.test(e)?n="900":/medium/i.test(e)?n="500":/light/i.test(e)&&(n="200"),i=t.tinySDF=new nf.TinySDF({fontFamily:r,fontWeight:n,fontSize:24*tf,buffer:3*tf,radius:8*tf}),i.fontWeight=n}if(this.localGlyphs[i.fontWeight][n])return this.localGlyphs[i.fontWeight][n];const o=String.fromCharCode(n),{data:a,width:s,height:l,glyphWidth:c,glyphHeight:u,glyphLeft:h,glyphTop:d,glyphAdvance:f}=i.draw(o);return this.localGlyphs[i.fontWeight][n]={id:n,bitmap:new Bc({width:s,height:l},a),metrics:{width:c/tf,height:u/tf,left:h/tf,top:d/tf-27,advance:f/tf,localGlyph:!0}}}}nf.loadGlyphRange=function(t,e,n,r,i){const o=256*e,a=o+255,s=r.transformRequest(r.normalizeGlyphsURL(n).replace("{fontstack}",t).replace("{range}","".concat(o,"-").concat(a)),lt.Glyphs);dt(s,((t,e)=>{if(t)i(t);else if(e){const t={},n=function(t){return new gd(t).readFields(vd,{})}(e);for(const e of n.glyphs)t[e.id]=e;i(null,{glyphs:t,ascender:n.ascender,descender:n.descender})}}))},nf.TinySDF=class{constructor(){let{fontSize:t=24,buffer:e=3,radius:n=8,cutoff:r=.25,fontFamily:i="sans-serif",fontWeight:o="normal",fontStyle:a="normal"}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.buffer=e,this.cutoff=r,this.radius=n;const s=this.size=t+4*e,l=this._createCanvas(s),c=this.ctx=l.getContext("2d",{willReadFrequently:!0});c.font="".concat(a," ").concat(o," ").concat(t,"px ").concat(i),c.textBaseline="alphabetic",c.textAlign="left",c.fillStyle="black",this.gridOuter=new Float64Array(s*s),this.gridInner=new Float64Array(s*s),this.f=new Float64Array(s),this.z=new Float64Array(s+1),this.v=new Uint16Array(s)}_createCanvas(t){const e=document.createElement("canvas");return e.width=e.height=t,e}draw(t){const{width:e,actualBoundingBoxAscent:n,actualBoundingBoxDescent:r,actualBoundingBoxLeft:i,actualBoundingBoxRight:o}=this.ctx.measureText(t),a=Math.ceil(n),s=Math.max(0,Math.min(this.size-this.buffer,Math.ceil(o-i))),l=Math.min(this.size-this.buffer,a+Math.ceil(r)),c=s+2*this.buffer,u=l+2*this.buffer,h=Math.max(c*u,0),d=new Uint8ClampedArray(h),f={data:d,width:c,height:u,glyphWidth:s,glyphHeight:l,glyphTop:a,glyphLeft:0,glyphAdvance:e};if(0===s||0===l)return f;const{ctx:p,buffer:m,gridInner:g,gridOuter:y}=this;p.clearRect(m,m,s,l),p.fillText(t,m,m+a);const v=p.getImageData(m,m,s,l);y.fill($d,0,h),g.fill(0,0,h);for(let _=0;_<l;_++)for(let t=0;t<s;t++){const e=v.data[4*(_*s+t)+3]/255;if(0===e)continue;const n=(_+m)*c+t+m;if(1===e)y[n]=0,g[n]=$d;else{const t=.5-e;y[n]=t>0?t*t:0,g[n]=t<0?t*t:0}}Jd(y,0,0,c,u,c,this.f,this.v,this.z),Jd(g,m,m,s,l,c,this.f,this.v,this.z);for(let _=0;_<h;_++){const t=Math.sqrt(y[_])-Math.sqrt(g[_]);d[_]=Math.round(255-255*(t/this.radius+this.cutoff))}return f}};const rf=Sd;function of(t,e,n,r){const i=[],o=t.image,a=o.pixelRatio,s=o.paddedRect.w-2*rf,l=o.paddedRect.h-2*rf,c=t.right-t.left,u=t.bottom-t.top,h=o.stretchX||[[0,s]],d=o.stretchY||[[0,l]],f=(t,e)=>t+e[1]-e[0],p=h.reduce(f,0),m=d.reduce(f,0),g=s-p,y=l-m;let _=0,b=p,x=0,w=m,S=0,E=g,T=0,M=y;if(o.content&&r){const t=o.content;_=af(h,0,t[0]),x=af(d,0,t[1]),b=af(h,t[0],t[2]),w=af(d,t[1],t[3]),S=t[0]-_,T=t[1]-x,E=t[2]-t[0]-b,M=t[3]-t[1]-w}const A=(r,i,s,l)=>{const h=lf(r.stretch-_,b,c,t.left),d=cf(r.fixed-S,E,r.stretch,p),f=lf(i.stretch-x,w,u,t.top),g=cf(i.fixed-T,M,i.stretch,m),y=lf(s.stretch-_,b,c,t.left),A=cf(s.fixed-S,E,s.stretch,p),C=lf(l.stretch-x,w,u,t.top),P=cf(l.fixed-T,M,l.stretch,m),k=new v(h,f),I=new v(y,f),O=new v(y,C),L=new v(h,C),j=new v(d/a,g/a),z=new v(A/a,P/a),R=e*Math.PI/180;if(R){const t=Math.sin(R),e=Math.cos(R),n=[e,-t,t,e];k._matMult(n),I._matMult(n),L._matMult(n),O._matMult(n)}const D=r.stretch+r.fixed,B=i.stretch+i.fixed;return{tl:k,tr:I,bl:L,br:O,tex:{x:o.paddedRect.x+rf+D,y:o.paddedRect.y+rf+B,w:s.stretch+s.fixed-D,h:l.stretch+l.fixed-B},writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:j,pixelOffsetBR:z,minFontScaleX:E/a/c,minFontScaleY:M/a/u,isSDF:n}};if(r&&(o.stretchX||o.stretchY)){const t=sf(h,g,p),e=sf(d,y,m);for(let n=0;n<t.length-1;n++){const r=t[n],o=t[n+1];for(let t=0;t<e.length-1;t++)i.push(A(r,e[t],o,e[t+1]))}}else i.push(A({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:s+1},{fixed:0,stretch:l+1}));return i}function af(t,e,n){let r=0;for(const i of t)r+=Math.max(e,Math.min(n,i[1]))-Math.max(e,Math.min(n,i[0]));return r}function sf(t,e,n){const r=[{fixed:-rf,stretch:0}];for(const[i,o]of t){const t=r[r.length-1];r.push({fixed:i-t.stretch,stretch:t.stretch}),r.push({fixed:i-t.stretch,stretch:t.stretch+(o-i)})}return r.push({fixed:e+rf,stretch:n}),r}function lf(t,e,n,r){return t/e*n+r}function cf(t,e,n,r){return t-e*n/r}function uf(t,e,n,r){const i=e+t.positionedLines[r].lineOffset;return 0===r?n+i/2:n+(i+(e+t.positionedLines[r-1].lineOffset))/2}class hf{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:df;if(this.data=t,this.length=this.data.length,this.compare=e,this.length>0)for(let n=(this.length>>1)-1;n>=0;n--)this._down(n)}push(t){this.data.push(t),this.length++,this._up(this.length-1)}pop(){if(0===this.length)return;const t=this.data[0],e=this.data.pop();return this.length--,this.length>0&&(this.data[0]=e,this._down(0)),t}peek(){return this.data[0]}_up(t){const{data:e,compare:n}=this,r=e[t];for(;t>0;){const i=t-1>>1,o=e[i];if(n(r,o)>=0)break;e[t]=o,t=i}e[t]=r}_down(t){const{data:e,compare:n}=this,r=this.length>>1,i=e[t];for(;t<r;){let r=1+(t<<1),o=e[r];const a=r+1;if(a<this.length&&n(e[a],o)<0&&(r=a,o=e[a]),n(o,i)>=0)break;e[t]=o,t=r}e[t]=i}}function df(t,e){return t<e?-1:t>e?1:0}function ff(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=1/0,i=1/0,o=-1/0,a=-1/0;const s=t[0];for(let f=0;f<s.length;f++){const t=s[f];(!f||t.x<r)&&(r=t.x),(!f||t.y<i)&&(i=t.y),(!f||t.x>o)&&(o=t.x),(!f||t.y>a)&&(a=t.y)}const l=Math.min(o-r,a-i);let c=l/2;const u=new hf([],pf);if(0===l)return new v(r,i);for(let f=r;f<o;f+=l)for(let e=i;e<a;e+=l)u.push(new mf(f+c,e+c,c,t));let h=function(t){let e=0,n=0,r=0;const i=t[0];for(let o=0,a=i.length,s=a-1;o<a;s=o++){const t=i[o],a=i[s],l=t.x*a.y-a.x*t.y;n+=(t.x+a.x)*l,r+=(t.y+a.y)*l,e+=3*l}return new mf(n/e,r/e,0,t)}(t),d=u.length;for(;u.length;){const r=u.pop();(r.d>h.d||!h.d)&&(h=r,n&&console.log("found best %d after %d probes",Math.round(1e4*r.d)/1e4,d)),r.max-h.d<=e||(c=r.h/2,u.push(new mf(r.p.x-c,r.p.y-c,c,t)),u.push(new mf(r.p.x+c,r.p.y-c,c,t)),u.push(new mf(r.p.x-c,r.p.y+c,c,t)),u.push(new mf(r.p.x+c,r.p.y+c,c,t)),d+=4)}return n&&(console.log("num probes: ".concat(d)),console.log("best distance: ".concat(h.d))),h.p}function pf(t,e){return e.max-t.max}class mf{constructor(t,e,n,r){this.p=new v(t,e),this.h=n,this.d=function(t,e){let n=!1,r=1/0;for(let i=0;i<e.length;i++){const o=e[i];for(let e=0,i=o.length,a=i-1;e<i;a=e++){const i=o[e],s=o[a];i.y>t.y!=s.y>t.y&&t.x<(s.x-i.x)*(t.y-i.y)/(s.y-i.y)+i.x&&(n=!n),r=Math.min(r,vc(t,i,s))}}return(n?1:-1)*Math.sqrt(r)}(this.p,r),this.max=this.d+this.h*Math.SQRT2}}const gf=7,yf=Number.POSITIVE_INFINITY,vf=Math.sqrt(2);function _f(t,e){let[n,r]=e,i=0,o=0;if(r===yf){n<0&&(n=0);const e=n/vf;switch(t){case"top-right":case"top-left":o=e-gf;break;case"bottom-right":case"bottom-left":o=-e+gf;break;case"bottom":o=-n+gf;break;case"top":o=n-gf}switch(t){case"top-right":case"bottom-right":i=-e;break;case"top-left":case"bottom-left":i=e;break;case"left":i=n;break;case"right":i=-n}}else{switch(n=Math.abs(n),r=Math.abs(r),t){case"top-right":case"top-left":case"top":o=r-gf;break;case"bottom-right":case"bottom-left":case"bottom":o=-r+gf}switch(t){case"top-right":case"bottom-right":case"right":i=-n;break;case"top-left":case"bottom-left":case"left":i=n}}return[i,o]}function bf(t,e,n,r,i,o,a,s,l,c){t.createArrays(),t.tilePixelRatio=ss/(512*t.overscaling),t.compareText={},t.iconsNeedLinear=!1;const u=t.layers[0].layout,h=t.layers[0]._unevaluatedLayout._values,d={};if("composite"===t.textSizeData.kind){const{minZoom:e,maxZoom:n}=t.textSizeData;d.compositeTextSizes=[h["text-size"].possiblyEvaluate(new wo(e),s),h["text-size"].possiblyEvaluate(new wo(n),s)]}if("composite"===t.iconSizeData.kind){const{minZoom:e,maxZoom:n}=t.iconSizeData;d.compositeIconSizes=[h["icon-size"].possiblyEvaluate(new wo(e),s),h["icon-size"].possiblyEvaluate(new wo(n),s)]}d.layoutTextSize=h["text-size"].possiblyEvaluate(new wo(l+1),s),d.layoutIconSize=h["icon-size"].possiblyEvaluate(new wo(l+1),s),d.textMaxSize=h["text-size"].possiblyEvaluate(new wo(18),s);const f="map"===u.get("text-rotation-alignment")&&"point"!==u.get("symbol-placement"),p=u.get("text-size");for(const m of t.features){const o=u.get("text-font").evaluate(m,{},s).join(","),l=p.evaluate(m,{},s),h=d.layoutTextSize.evaluate(m,{},s),g=(d.layoutIconSize.evaluate(m,{},s),{horizontal:{},vertical:void 0}),y=m.text;let v,_=[0,0];if(y){const r=y.toString(),a=u.get("text-letter-spacing").evaluate(m,{},s)*Bh,c=u.get("text-line-height").evaluate(m,{},s)*Bh,d=no(r)?a:0,p=u.get("text-anchor").evaluate(m,{},s),v=u.get("text-variable-anchor");if(!v){const t=u.get("text-radial-offset").evaluate(m,{},s);_=t?_f(p,[t*Bh,yf]):u.get("text-offset").evaluate(m,{},s).map((t=>t*Bh))}let b=f?"center":u.get("text-justify").evaluate(m,{},s);const x="point"===u.get("symbol-placement"),w=x?u.get("text-max-width").evaluate(m,{},s)*Bh:1/0,S=a=>{t.allowVerticalPlacement&&eo(r)&&(g.vertical=kd(y,e,n,i,o,w,c,p,a,d,_,Md.vertical,!0,h,l))};if(!f&&v){const t="auto"===b?v.map((t=>xf(t))):[b];let r=!1;for(let a=0;a<t.length;a++){const s=t[a];if(!g.horizontal[s])if(r)g.horizontal[s]=g.horizontal[0];else{const t=kd(y,e,n,i,o,w,c,"center",s,d,_,Md.horizontal,!1,h,l);t&&(g.horizontal[s]=t,r=1===t.positionedLines.length)}}S("left")}else{if("auto"===b&&(b=xf(p)),x||u.get("text-writing-mode").indexOf("horizontal")>=0||!eo(r)){const t=kd(y,e,n,i,o,w,c,p,b,d,_,Md.horizontal,!1,h,l);t&&(g.horizontal[b]=t)}S(x?"left":b)}}let b=!1;if(m.icon&&m.icon.name){const e=r[m.icon.name];e&&(v=Nd(i[m.icon.name],u.get("icon-offset").evaluate(m,{},s),u.get("icon-anchor").evaluate(m,{},s)),b=e.sdf,void 0===t.sdfIcons?t.sdfIcons=e.sdf:t.sdfIcons!==e.sdf&&G("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),(e.pixelRatio!==t.pixelRatio||0!==u.get("icon-rotate").constantOr(1))&&(t.iconsNeedLinear=!0))}const x=Mf(g.horizontal)||g.vertical;t.iconsInText||(t.iconsInText=!!x&&x.iconsInText),(x||v)&&wf(t,m,g,v,r,d,h,0,_,b,a,s,c)}o&&t.generateCollisionDebugBuffers(l,t.collisionBoxArray)}function xf(t){switch(t){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}function wf(t,e,n,r,i,o,a,s,l,c,u,h,d){let f=o.textMaxSize.evaluate(e,{},h);void 0===f&&(f=a);const p=t.layers[0].layout,m=p.get("icon-offset").evaluate(e,{},h),g=Mf(n.horizontal)||n.vertical,y="globe"===d.name,v=Bh,_=a/v,b=t.tilePixelRatio*f/v,w=(k=t.overscaling,t.zoom>18&&k>2&&(k>>=1),Math.max(ss/(512*k),1)*p.get("symbol-spacing")),S=p.get("text-padding")*t.tilePixelRatio,E=p.get("icon-padding")*t.tilePixelRatio,T=x(p.get("text-max-angle")),M="map"===p.get("text-rotation-alignment")&&"point"!==p.get("symbol-placement"),A="map"===p.get("icon-rotation-alignment")&&"point"!==p.get("symbol-placement"),C=p.get("symbol-placement"),P=w/2;var k;const I=p.get("icon-text-fit");let O;r&&"none"!==I&&(t.allowVerticalPlacement&&n.vertical&&(O=Ud(r,n.vertical,I,p.get("icon-text-fit-padding"),m,_)),g&&(r=Ud(r,g,I,p.get("icon-text-fit-padding"),m,_)));const L=(a,s,f)=>{if(s.x<0||s.x>=ss||s.y<0||s.y>=ss)return;let p=null;if(y){const{x:t,y:e,z:n}=d.projectTilePoint(s.x,s.y,f);p={anchor:new Vd(t,e,n,0,void 0),up:d.upVector(f,s.x,s.y)}}!function(t,e,n,r,i,o,a,s,l,c,u,h,d,f,p,m,g,y,v,_,b,x,w,S,E){const T=t.addToLineVertexArray(e,r);let M,A,C,P,k,I,O,L=0,j=0,z=0,R=0,D=-1,B=-1;const F={};let N=Ia("");const U=n?n.anchor:e;let V=0,W=0;if(void 0===l._unevaluatedLayout.getValue("text-radial-offset")?[V,W]=l.layout.get("text-offset").evaluate(b,{},E).map((t=>t*Bh)):(V=l.layout.get("text-radial-offset").evaluate(b,{},E)*Bh,W=yf),t.allowVerticalPlacement&&i.vertical){const t=i.vertical;if(p)I=Cf(t),s&&(O=Cf(s));else{const n=l.layout.get("text-rotate").evaluate(b,{},E)+90;C=Af(c,U,e,u,h,d,t,f,n,m),s&&(P=Af(c,U,e,u,h,d,s,y,n))}}if(o){const r=l.layout.get("icon-rotate").evaluate(b,{},E),i="none"!==l.layout.get("icon-text-fit"),a=of(o,r,w,i),f=s?of(s,r,w,i):void 0;A=Af(c,U,e,u,h,d,o,y,r),L=4*a.length;const p=t.iconSizeData;let m=null;"source"===p.kind?(m=[Fh*l.layout.get("icon-size").evaluate(b,{},E)],m[0]>Ef&&G("".concat(t.layerIds[0],': Value for "icon-size" is >= ').concat(Sf,'. Reduce your "icon-size".'))):"composite"===p.kind&&(m=[Fh*x.compositeIconSizes[0].evaluate(b,{},E),Fh*x.compositeIconSizes[1].evaluate(b,{},E)],(m[0]>Ef||m[1]>Ef)&&G("".concat(t.layerIds[0],': Value for "icon-size" is >= ').concat(Sf,'. Reduce your "icon-size".'))),t.addSymbols(t.icon,a,m,_,v,b,!1,n,e,T.lineStartIndex,T.lineLength,-1,S,E),D=t.icon.placedSymbolArray.length-1,f&&(j=4*f.length,t.addSymbols(t.icon,f,m,_,v,b,Md.vertical,n,e,T.lineStartIndex,T.lineLength,-1,S,E),B=t.icon.placedSymbolArray.length-1)}for(const G in i.horizontal){const r=i.horizontal[G];M||(N=Ia(r.text),p?k=Cf(r):M=Af(c,U,e,u,h,d,r,f,l.layout.get("text-rotate").evaluate(b,{},E),m));const o=1===r.positionedLines.length;if(z+=Tf(t,n,e,r,a,l,p,b,m,T,i.vertical?Md.horizontal:Md.horizontalOnly,o?Object.keys(i.horizontal):[G],F,D,x,S,E),o)break}i.vertical&&(R+=Tf(t,n,e,i.vertical,a,l,p,b,m,T,Md.vertical,["vertical"],F,B,x,S,E));let q=-1;const H=(t,e)=>t?Math.max(t,e):e;q=H(k,q),q=H(I,q),q=H(O,q);const Z=q>-1?1:0;t.glyphOffsetArray.length>=sp.MAX_GLYPHS&&G("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),void 0!==b.sortKey&&t.addToSortKeyRanges(t.symbolInstances.length,b.sortKey),t.symbolInstances.emplaceBack(U.x,U.y,U.z,e.x,e.y,F.right>=0?F.right:-1,F.center>=0?F.center:-1,F.left>=0?F.left:-1,F.vertical>=0?F.vertical:-1,D,B,N,void 0!==M?M:t.collisionBoxArray.length,void 0!==M?M+1:t.collisionBoxArray.length,void 0!==C?C:t.collisionBoxArray.length,void 0!==C?C+1:t.collisionBoxArray.length,void 0!==A?A:t.collisionBoxArray.length,void 0!==A?A+1:t.collisionBoxArray.length,P||t.collisionBoxArray.length,P?P+1:t.collisionBoxArray.length,u,z,R,L,j,Z,0,V,W,q)}(t,s,p,a,n,r,i,O,t.layers[0],t.collisionBoxArray,e.index,e.sourceLayerIndex,t.index,S,M,l,0,E,A,m,e,o,c,u,h)};if("line"===C)for(const x of Kd(e.geometry,0,0,ss,ss)){const e=Xd(x,w,T,n.vertical||g,r,v,b,t.overscaling,ss);for(const n of e)g&&Pf(t,g.text,P,n)||L(x,n,h)}else if("line-center"===C){for(const x of e.geometry)if(x.length>1){const t=Zd(x,T,n.vertical||g,r,v,b);t&&L(x,t,h)}}else if("Polygon"===e.type)for(const x of Su(e.geometry,0)){const t=ff(x,16);L(x[0],new Vd(t.x,t.y,0,0,void 0),h)}else if("LineString"===e.type)for(const x of e.geometry)L(x,new Vd(x[0].x,x[0].y,0,0,void 0),h);else if("Point"===e.type)for(const x of e.geometry)for(const t of x)L([t],new Vd(t.x,t.y,0,0,void 0),h)}const Sf=255,Ef=Sf*Fh;function Tf(t,e,n,r,i,o,a,s,l,c,u,h,d,f,p,m,g){const y=function(t,e,n,r,i,o,a,s){const l=[];if(0===e.positionedLines.length)return l;const c=r.layout.get("text-rotate").evaluate(o,{})*Math.PI/180,u=function(t){const e=t[0],n=t[1],r=e*n;return r>0?[e,-n]:r<0?[-e,n]:0===e?[n,e]:[n,-e]}(n);let h=Math.abs(e.top-e.bottom);for(const m of e.positionedLines)h-=m.lineOffset;const d=e.positionedLines.length,f=h/d;let p=e.top-n[1];for(let m=0;m<d;++m){const t=e.positionedLines[m];p=uf(e,f,p,m);for(const r of t.positionedGlyphs){if(!r.rect)continue;const t=r.rect||{};let o=xd+1,h=!0,d=1,f=0;if(r.imageName){const t=a[r.imageName];if(!t)continue;if(t.sdf){G("SDF images are not supported in formatted text and will be ignored.");continue}h=!1,d=t.pixelRatio,o=Sd/d}const m=(i||s)&&r.vertical,g=r.metrics.advance*r.scale/2,y=r.metrics,_=r.rect;if(null===_)continue;s&&e.verticalizable&&(f=r.imageName?g-r.metrics.width*r.scale/2:0);const b=i?[r.x+g,r.y]:[0,0];let x=[0,0],w=[0,0],S=!1;i||(m?(w=[r.x+g+u[0],r.y+u[1]-f],S=!0):x=[r.x+g+n[0],r.y+n[1]-f]);const E=_.w*r.scale/(d*(r.localGlyph?tf:1)),T=_.h*r.scale/(d*(r.localGlyph?tf:1));let M,A,C,P;if(m){const t=r.y-p,e=new v(-g,g-t),n=-Math.PI/2,i=new v(...w);M=new v(-g+x[0],x[1]),M._rotateAround(n,e)._add(i),M.x+=-t+g,M.y-=(y.left-o)*r.scale;const a=r.imageName?y.advance*r.scale:Bh*r.scale,s=String.fromCharCode(r.glyph);Hh(s)?M.x+=(1-o)*r.scale:Zh(s)?M.x+=a-y.height*r.scale+(-o-1)*r.scale:M.x+=r.imageName||y.width+2*o===_.w&&y.height+2*o===_.h?(a-T)/2:(a-(y.height+2*o)*r.scale)/2,A=new v(M.x,M.y-E),C=new v(M.x+T,M.y),P=new v(M.x+T,M.y-E)}else{const t=(y.left-o)*r.scale-g+x[0],e=(-y.top-o)*r.scale+x[1],n=t+E,i=e+T;M=new v(t,e),A=new v(n,e),C=new v(t,i),P=new v(n,i)}if(c){let t;t=i?new v(0,0):S?new v(u[0],u[1]):new v(n[0],n[1]),M._rotateAround(c,t),A._rotateAround(c,t),C._rotateAround(c,t),P._rotateAround(c,t)}const k=new v(0,0),I=new v(0,0);l.push({tl:M,tr:A,bl:C,br:P,tex:t,writingMode:e.writingMode,glyphOffset:b,sectionIndex:r.sectionIndex,isSDF:h,pixelOffsetTL:k,pixelOffsetBR:I,minFontScaleX:0,minFontScaleY:0})}}return l}(0,r,l,o,a,s,i,t.allowVerticalPlacement),_=t.textSizeData;let b=null;"source"===_.kind?(b=[Fh*o.layout.get("text-size").evaluate(s,{},g)],b[0]>Ef&&G("".concat(t.layerIds[0],': Value for "text-size" is >= ').concat(Sf,'. Reduce your "text-size".'))):"composite"===_.kind&&(b=[Fh*p.compositeTextSizes[0].evaluate(s,{},g),Fh*p.compositeTextSizes[1].evaluate(s,{},g)],(b[0]>Ef||b[1]>Ef)&&G("".concat(t.layerIds[0],': Value for "text-size" is >= ').concat(Sf,'. Reduce your "text-size".'))),t.addSymbols(t.text,y,b,l,a,s,u,e,n,c.lineStartIndex,c.lineLength,f,m,g);for(const v of h)d[v]=t.text.placedSymbolArray.length-1;return 4*y.length}function Mf(t){for(const e in t)return t[e];return null}function Af(t,e,n,r,i,o,a,s,l,c){let u=a.top,h=a.bottom,d=a.left,f=a.right;const p=a.collisionPadding;if(p&&(d-=p[0],u-=p[1],f+=p[2],h+=p[3]),l){const t=new v(d,u),e=new v(f,u),n=new v(d,h),r=new v(f,h),i=x(l);let o=new v(0,0);c&&(o=new v(c[0],c[1])),t._rotateAround(i,o),e._rotateAround(i,o),n._rotateAround(i,o),r._rotateAround(i,o),d=Math.min(t.x,e.x,n.x,r.x),f=Math.max(t.x,e.x,n.x,r.x),u=Math.min(t.y,e.y,n.y,r.y),h=Math.max(t.y,e.y,n.y,r.y)}return t.emplaceBack(e.x,e.y,e.z,n.x,n.y,d,u,f,h,s,r,i,o),t.length-1}function Cf(t){t.collisionPadding&&(t.top-=t.collisionPadding[1],t.bottom+=t.collisionPadding[3]);const e=t.bottom-t.top;return e>0?Math.max(10,e):null}function Pf(t,e,n,r){const i=t.compareText;if(e in i){const t=i[e];for(let e=t.length-1;e>=0;e--)if(r.dist(t[e])<n)return!0}else i[e]=[];return i[e].push(r),!1}function kf(t,e){const n=t.fovAboveCenter,r=t.elevation?t.elevation.getMinElevationBelowMSL()*e:0,i=(t._camera.position[2]*t.worldSize-r)/Math.cos(t._pitch),o=Math.sin(n)*i/Math.sin(Math.max(Math.PI/2-t._pitch-n,.01)),a=Math.sin(t._pitch)*o+i;return Math.min(1.01*a,i*(1/t._horizonShift))}function If(t,e){if(!e.isReprojectedInTileSpace)return{scale:1<<t.z,x:t.x,y:t.y,x2:t.x+1,y2:t.y+1,projection:e};const n=Math.pow(2,-t.z),r=t.x*n,i=(t.x+1)*n,o=t.y*n,a=(t.y+1)*n,s=Zl(r),l=Zl(i),c=Xl(o),u=Xl(a),h=e.project(s,c),d=e.project(l,c),f=e.project(l,u),p=e.project(s,u);let m=Math.min(h.x,d.x,f.x,p.x),g=Math.min(h.y,d.y,f.y,p.y),y=Math.max(h.x,d.x,f.x,p.x),v=Math.max(h.y,d.y,f.y,p.y);const _=n/16;function b(t,n,r,i,o,a){const s=(r+o)/2,l=(i+a)/2,c=e.project(Zl(s),Xl(l)),u=Math.max(0,m-c.x,g-c.y,c.x-y,c.y-v);m=Math.min(m,c.x),y=Math.max(y,c.x),g=Math.min(g,c.y),v=Math.max(v,c.y),u>_&&(b(t,c,r,i,s,l),b(c,n,s,l,o,a))}b(h,d,r,o,i,o),b(d,f,i,o,i,a),b(f,p,i,a,r,a),b(p,h,r,a,r,o),m-=_,g-=_,y+=_,v+=_;const x=1/Math.max(y-m,v-g);return{scale:x,x:m*x,y:g*x,x2:y*x,y2:v*x,projection:e}}const Of=fs(new Float32Array(16));class Lf{constructor(t){this.spec=t,this.name=t.name,this.wrap=!1,this.requiresDraping=!1,this.supportsWorldCopies=!1,this.supportsTerrain=!1,this.supportsFog=!1,this.supportsFreeCamera=!1,this.zAxisUnit="meters",this.isReprojectedInTileSpace=!0,this.unsupportedLayers=["custom"],this.center=[0,0],this.range=[3.5,7]}project(t,e){return{x:0,y:0,z:0}}unproject(t,e){return new Vl(0,0)}projectTilePoint(t,e,n){return{x:t,y:e,z:0}}locationPoint(t,e){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return t._coordinatePoint(t.locationCoordinate(e),n)}pixelsPerMeter(t,e){return Hl(1,t)*e}pixelSpaceConversion(t,e,n){return 1}farthestPixelDistance(t){return kf(t,t.pixelsPerMeter)}pointCoordinate(t,e,n,r){const i=t.horizonLineFromTop(!1),o=new v(e,Math.max(i,n));return t.rayIntersectionCoordinate(t.pointRayIntersection(o,r))}pointCoordinate3D(t,e,n){const r=new v(e,n);if(t.elevation)return t.elevation.pointCoordinate(r);{const e=this.pointCoordinate(t,r.x,r.y,0);return[e.x,e.y,e.z]}}isPointAboveHorizon(t,e){if(t.elevation)return!this.pointCoordinate3D(t,e.x,e.y);const n=t.horizonLineFromTop();return e.y<n}createInversionMatrix(t,e){return Of}createTileMatrix(t,e,n){let r,i,o;const a=n.canonical,s=fs(new Float64Array(16));if(this.isReprojectedInTileSpace){const l=If(a,this);r=1,i=l.x+n.wrap*l.scale,o=l.y,ys(s,s,[r/l.scale,r/l.scale,t.pixelsPerMeter/e])}else r=e/t.zoomScale(a.z),i=(a.x+Math.pow(2,a.z)*n.wrap)*r,o=a.y*r;return gs(s,s,[i,o,0]),ys(s,s,[r/ss,r/ss,1]),s}upVector(t,e,n){return[0,0,1]}upVectorScale(t,e,n){return{metersToTile:1}}}class jf extends Lf{constructor(t){super(t),this.range=[4,7],this.center=t.center||[-96,37.5];const[e,n]=this.parallels=t.parallels||[29.5,45.5],r=Math.sin(x(e));this.n=(r+Math.sin(x(n)))/2,this.c=1+r*(2*this.n-r),this.r0=Math.sqrt(this.c)/this.n}project(t,e){const{n:n,c:r,r0:i}=this,o=x(t-this.center[0]),a=x(e),s=Math.sqrt(r-2*n*Math.sin(a))/n;return{x:s*Math.sin(o*n),y:s*Math.cos(o*n)-i,z:0}}unproject(t,e){const{n:n,c:r,r0:i}=this,o=i+e;let a=Math.atan2(t,Math.abs(o))*Math.sign(o);o*n<0&&(a-=Math.PI*Math.sign(t)*Math.sign(o));const s=x(this.center[0])*n;a=P(a,-Math.PI-s,Math.PI-s);const l=A(w(a/n)+this.center[0],-180,180),c=Math.asin(A((r-(t*t+o*o)*n*n)/(2*n),-1,1)),u=A(w(c),-Kl,Kl);return new Vl(l,u)}}const zf=1.340264,Rf=-.081106,Df=893e-6,Bf=.003796,Ff=Math.sqrt(3)/2;class Nf extends Lf{project(t,e){e=e/180*Math.PI,t=t/180*Math.PI;const n=Math.asin(Ff*Math.sin(e)),r=n*n,i=r*r*r;return{x:.5*(t*Math.cos(n)/(Ff*(zf+3*Rf*r+i*(7*Df+9*Bf*r)))/Math.PI+.5),y:1-.5*(n*(zf+Rf*r+i*(Df+Bf*r))/Math.PI+1),z:0}}unproject(t,e){t=(2*t-.5)*Math.PI;let n=e=(2*(1-e)-1)*Math.PI,r=n*n,i=r*r*r;for(let c,u,h,d=0;d<12&&(u=n*(zf+Rf*r+i*(Df+Bf*r))-e,h=zf+3*Rf*r+i*(7*Df+9*Bf*r),c=u/h,n=A(n-c,-Math.PI/3,Math.PI/3),r=n*n,i=r*r*r,!(Math.abs(c)<1e-12));++d);const o=Ff*t*(zf+3*Rf*r+i*(7*Df+9*Bf*r))/Math.cos(n),a=Math.asin(Math.sin(n)/Ff),s=A(180*o/Math.PI,-180,180),l=A(180*a/Math.PI,-Kl,Kl);return new Vl(s,l)}}class Uf extends Lf{constructor(t){super(t),this.wrap=!0,this.supportsWorldCopies=!0}project(t,e){return{x:.5+t/360,y:.5-e/360,z:0}}unproject(t,e){const n=360*(t-.5),r=A(360*(.5-e),-Kl,Kl);return new Vl(n,r)}}const Vf=Math.PI/2;function Wf(t){return Math.tan((Vf+t)/2)}class Gf extends Lf{constructor(t){super(t),this.center=t.center||[0,30];const[e,n]=this.parallels=t.parallels||[30,30];let r=x(e),i=x(n);this.southernCenter=r+i<0,this.southernCenter&&(r=-r,i=-i);const o=Math.cos(r),a=Wf(r);this.n=r===i?Math.sin(r):Math.log(o/Math.cos(i))/Math.log(Wf(i)/a),this.f=o*Math.pow(Wf(r),this.n)/this.n}project(t,e){e=x(e),this.southernCenter&&(e=-e),t=x(t-this.center[0]);const n=1e-6,{n:r,f:i}=this;i>0?e<-Vf+n&&(e=-Vf+n):e>Vf-n&&(e=Vf-n);const o=i/Math.pow(Wf(e),r);let a=o*Math.sin(r*t),s=i-o*Math.cos(r*t);return a=.5*(a/Math.PI+.5),s=.5*(s/Math.PI+.5),{x:a,y:this.southernCenter?s:1-s,z:0}}unproject(t,e){t=(2*t-.5)*Math.PI,this.southernCenter&&(e=1-e),e=(2*(1-e)-.5)*Math.PI;const{n:n,f:r}=this,i=r-e,o=Math.sign(i),a=Math.sign(n)*Math.sqrt(t*t+i*i);let s=Math.atan2(t,Math.abs(i))*o;i*n<0&&(s-=Math.PI*Math.sign(t)*o);const l=A(w(s/n)+this.center[0],-180,180),c=A(w(2*Math.atan(Math.pow(r/a,1/n))-Vf),-Kl,Kl);return new Vl(l,this.southernCenter?-c:c)}}class qf extends Lf{constructor(t){super(t),this.wrap=!0,this.supportsWorldCopies=!0,this.supportsTerrain=!0,this.supportsFog=!0,this.supportsFreeCamera=!0,this.isReprojectedInTileSpace=!1,this.unsupportedLayers=[],this.range=null}project(t,e){return{x:Gl(t),y:ql(e),z:0}}unproject(t,e){const n=Zl(t),r=Xl(e);return new Vl(n,r)}}const Hf=x(Kl);class Zf extends Lf{project(t,e){const n=(e=x(e))*e,r=n*n;return{x:.5*((t=x(t))*(.8707-.131979*n+r*(r*(.003971*n-.001529*r)-.013791))/Math.PI+.5),y:1-.5*(e*(1.007226+n*(.015085+r*(.028874*n-.044475-.005916*r)))/Math.PI+1),z:0}}unproject(t,e){t=(2*t-.5)*Math.PI;let n=e=(2*(1-e)-1)*Math.PI,r=25,i=0,o=n*n;do{o=n*n;const t=o*o;i=(n*(1.007226+o*(.015085+t*(.028874*o-.044475-.005916*t)))-e)/(1.007226+o*(.045255+t*(.259866*o-.311325-.005916*11*t))),n=A(n-i,-Hf,Hf)}while(Math.abs(i)>1e-6&&--r>0);o=n*n;const a=A(w(t/(.8707+o*(o*(o*o*o*(.003971-.001529*o)-.013791)-.131979))),-180,180),s=w(n);return new Vl(a,s)}}const Xf=x(Kl);class Yf extends Lf{project(t,e){e=x(e),t=x(t);const n=Math.cos(e),r=2/Math.PI,i=Math.acos(n*Math.cos(t/2)),o=Math.sin(i)/i,a=.5*(t*r+2*n*Math.sin(t/2)/o)||0,s=.5*(e+Math.sin(e)/o)||0;return{x:.5*(a/Math.PI+.5),y:1-.5*(s/Math.PI+1),z:0}}unproject(t,e){let n=t=(2*t-.5)*Math.PI,r=e=(2*(1-e)-1)*Math.PI,i=25;const o=1e-6;let a=0,s=0;do{const i=Math.cos(r),o=Math.sin(r),l=2*o*i,c=o*o,u=i*i,h=Math.cos(n/2),d=Math.sin(n/2),f=2*h*d,p=d*d,m=1-u*h*h,g=m?1/m:0,y=m?Math.acos(i*h)*Math.sqrt(1/m):0,v=.5*(2*y*i*d+2*n/Math.PI)-t,_=.5*(y*o+r)-e,b=.5*g*(u*p+y*i*h*c)+1/Math.PI,x=g*(f*l/4-y*o*d),w=.125*g*(l*d-y*o*u*f),S=.5*g*(c*h+y*p*i)+.5,E=x*w-S*b;a=(_*x-v*S)/E,s=(v*w-_*b)/E,n=A(n-a,-Math.PI,Math.PI),r=A(r-s,-Xf,Xf)}while((Math.abs(a)>o||Math.abs(s)>o)&&--i>0);return new Vl(w(n),w(r))}}class Kf extends Lf{constructor(t){super(t),this.center=t.center||[0,0],this.parallels=t.parallels||[0,0],this.cosPhi=Math.max(.01,Math.cos(x(this.parallels[0]))),this.scale=1/(2*Math.max(Math.PI*this.cosPhi,1/this.cosPhi)),this.wrap=!0,this.supportsWorldCopies=!0}project(t,e){const{scale:n,cosPhi:r}=this;return{x:x(t)*r*n+.5,y:-Math.sin(x(e))/r*n+.5,z:0}}unproject(t,e){const{scale:n,cosPhi:r}=this,i=-(e-.5)/n,o=A(w((t-.5)/n)/r,-180,180),a=Math.asin(A(i*r,-1,1)),s=A(w(a),-Kl,Kl);return new Vl(o,s)}}class $f extends qf{constructor(t){super(t),this.requiresDraping=!0,this.supportsWorldCopies=!1,this.supportsFog=!0,this.zAxisUnit="pixels",this.unsupportedLayers=["debug"],this.range=[3,5]}projectTilePoint(t,e,n){const r=Al(t,e,n);return Ds(r,r,kl(vl(n))),{x:r[0],y:r[1],z:r[2]}}locationPoint(t,e){const n=Ml(e.lat,e.lng),r=js([],n),i=t.elevation?t.elevation.getAtPointOrZero(t.locationCoordinate(e),t._centerAltitude):t._centerAltitude;Ls(n,n,r,Hl(1,0)*ss*i);const o=fs(new Float64Array(16));return ms(o,t.pixelMatrix,t.globeMatrix),Ds(n,n,o),new v(n[0],n[1])}pixelsPerMeter(t,e){return Hl(1,0)*e}pixelSpaceConversion(t,e,n){const r=Hl(1,t)*e,i=On(Hl(1,45)*e,r,n);return this.pixelsPerMeter(t,e)/i}createTileMatrix(t,e,n){const r=Il(vl(n.canonical));return ms(new Float64Array(16),t.globeMatrix,r)}createInversionMatrix(t,e){const{center:n}=t,r=kl(vl(e));return _s(r,r,x(n.lng)),vs(r,r,x(n.lat)),ys(r,r,[t._pixelsPerMercatorPixel,t._pixelsPerMercatorPixel,1]),Float32Array.from(r)}pointCoordinate(t,e,n,r){return ml(t,e,n,!0)||new Jl(0,0)}pointCoordinate3D(t,e,n){const r=this.pointCoordinate(t,e,n,0);return[r.x,r.y,r.z]}isPointAboveHorizon(t,e){return!ml(t,e.x,e.y,!1)}farthestPixelDistance(t){const e=function(t,e){const n=t.cameraToCenterDistance,r=t._centerAltitude*e,i=t._camera,o=t._camera.forward(),a=As([],Os([],o,-n),[0,0,r]),s=t.worldSize/(2*Math.PI),l=[0,0,-s],c=t.width/t.height,u=Math.tan(t.fovAboveCenter),h=Os([],i.up(),u),d=Os([],i.right(),u*c),f=js([],As([],As([],o,h),d)),p=[];let m;if(new el(a,f).closestPointOnSphere(l,s,p)){const e=As([],p,l),n=Ns([],e,a);m=Math.cos(t.fovAboveCenter)*Ts(n)}else{const t=Ns([],a,l),e=Ns([],l,a);js(e,e);const n=Ts(t)-s;m=Math.sqrt(n*(n+2*s));const r=Math.acos(m/(s+n))-Math.acos(zs(o,e));m*=Math.cos(r)}return 1.01*m}(t,this.pixelsPerMeter(t.center.lat,t.worldSize)),n=Ll(t.zoom);if(n>0){const r=kf(t,Hl(1,t.center.lat)*t.worldSize),i=t.worldSize/(2*Math.PI),o=Math.max(t.width,t.height)/t.worldSize*Math.PI;return On(e,r+i*(1-Math.cos(o)),Math.pow(n,10))}return e}upVector(t,e,n){return Al(e,n,t,1)}upVectorScale(t){return{metersToTile:pl(Cl(vl(t)))}}}function Jf(t){const e=t.parallels,n=!!e&&Math.abs(e[0]+e[1])<.01;switch(t.name){case"mercator":return new qf(t);case"equirectangular":return new Uf(t);case"naturalEarth":return new Zf(t);case"equalEarth":return new Nf(t);case"winkelTripel":return new Yf(t);case"albers":return n?new Kf(t):new jf(t);case"lambertConformalConic":return n?new Kf(t):new Gf(t);case"globe":return new $f(t)}throw new Error("Invalid projection name: ".concat(t.name))}const Qf=Zu.types,tp=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function ep(t,e,n,r,i,o,a,s,l,c,u,h,d){const f=s?Math.min(Ef,Math.round(s[0])):0,p=s?Math.min(Ef,Math.round(s[1])):0;t.emplaceBack(e,n,Math.round(32*r),Math.round(32*i),o,a,(f<<1)+(l?1:0),p,16*c,16*u,256*h,256*d)}function np(t,e,n,r,i,o,a){t.emplaceBack(e,n,r,i,o,a)}function rp(t,e,n,r,i){t.emplaceBack(e,n,r,i),t.emplaceBack(e,n,r,i),t.emplaceBack(e,n,r,i),t.emplaceBack(e,n,r,i)}function ip(t){for(const e of t.sections)if(lo(e.text))return!0;return!1}class op{constructor(t){this.layoutVertexArray=new Yo,this.indexArray=new ra,this.programConfigurations=t,this.segments=new as,this.dynamicLayoutVertexArray=new qo,this.opacityVertexArray=new $o,this.placedSymbolArray=new ma,this.globeExtVertexArray=new Ko}isEmpty(){return 0===this.layoutVertexArray.length&&0===this.indexArray.length&&0===this.dynamicLayoutVertexArray.length&&0===this.opacityVertexArray.length}upload(t,e,n,r){this.isEmpty()||(n&&(this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,Ih.members),this.indexBuffer=t.createIndexBuffer(this.indexArray,e),this.dynamicLayoutVertexBuffer=t.createVertexBuffer(this.dynamicLayoutVertexArray,Lh.members,!0),this.opacityVertexBuffer=t.createVertexBuffer(this.opacityVertexArray,tp,!0),this.globeExtVertexArray.length>0&&(this.globeExtVertexBuffer=t.createVertexBuffer(this.globeExtVertexArray,Oh.members,!0)),this.opacityVertexBuffer.itemSize=1),(n||r)&&this.programConfigurations.upload(t))}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy(),this.globeExtVertexBuffer&&this.globeExtVertexBuffer.destroy())}}Yi(op,"SymbolBuffers");class ap{constructor(t,e,n){this.layoutVertexArray=new t,this.layoutAttributes=e,this.indexArray=new n,this.segments=new as,this.collisionVertexArray=new ea,this.collisionVertexArrayExt=new na}upload(t){this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=t.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=t.createVertexBuffer(this.collisionVertexArray,jh.members,!0),this.collisionVertexBufferExt=t.createVertexBuffer(this.collisionVertexArrayExt,zh.members,!0)}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy(),this.collisionVertexBufferExt.destroy())}}Yi(ap,"CollisionBuffers");class sp{constructor(t){this.collisionBoxArray=t.collisionBoxArray,this.zoom=t.zoom,this.overscaling=t.overscaling,this.layers=t.layers,this.layerIds=this.layers.map((t=>t.id)),this.index=t.index,this.pixelRatio=t.pixelRatio,this.sourceLayerIndex=t.sourceLayerIndex,this.hasPattern=!1,this.hasRTLText=!1,this.fullyClipped=!1,this.sortKeyRanges=[],this.collisionCircleArray=[],this.placementInvProjMatrix=fs([]),this.placementViewportMatrix=fs([]);const e=this.layers[0]._unevaluatedLayout._values;this.textSizeData=Nh(this.zoom,e["text-size"]),this.iconSizeData=Nh(this.zoom,e["icon-size"]);const n=this.layers[0].layout,r=n.get("symbol-sort-key"),i=n.get("symbol-z-order");this.canOverlap=n.get("text-allow-overlap")||n.get("icon-allow-overlap")||n.get("text-ignore-placement")||n.get("icon-ignore-placement"),this.sortFeaturesByKey="viewport-y"!==i&&void 0!==r.constantOr(1),this.sortFeaturesByY=("viewport-y"===i||"auto"===i&&!this.sortFeaturesByKey)&&this.canOverlap,this.writingModes=n.get("text-writing-mode").map((t=>Md[t])),this.stateDependentLayerIds=this.layers.filter((t=>t.isStateDependent())).map((t=>t.id)),this.sourceID=t.sourceID,this.projection=t.projection}createArrays(){this.text=new op(new Ka(this.layers,this.zoom,(t=>/^text/.test(t)))),this.icon=new op(new Ka(this.layers,this.zoom,(t=>/^icon/.test(t)))),this.glyphOffsetArray=new va,this.lineVertexArray=new _a,this.symbolInstances=new ya}calculateGlyphDependencies(t,e,n,r,i){for(let o=0;o<t.length;o++)if(e[t.charCodeAt(o)]=!0,r&&i){const n=qh[t.charAt(o)];n&&(e[n.charCodeAt(0)]=!0)}}populate(t,e,n,r){const i=this.layers[0],o=i.layout,a="globe"===this.projection.name,s=o.get("text-font"),l=o.get("text-field"),c=o.get("icon-image"),u=("constant"!==l.value.kind||l.value.value instanceof je&&!l.value.value.isEmpty()||l.value.value.toString().length>0)&&("constant"!==s.value.kind||s.value.value.length>0),h="constant"!==c.value.kind||!!c.value.value||Object.keys(c.parameters).length>0,d=o.get("symbol-sort-key");if(this.features=[],!u&&!h)return;const f=e.iconDependencies,p=e.glyphDependencies,m=e.availableImages,g=new wo(this.zoom);for(const{feature:y,id:v,index:_,sourceLayerIndex:b}of t){const t=i._featureFilter.needGeometry,e=sc(y,t);if(!i._featureFilter.filter(g,e,n))continue;if(t||(e.geometry=ac(y,n,r)),a&&1!==y.type&&n.z<=5){const t=e.geometry,r=.98078528056,i=(t,e)=>zs(Al(t.x,t.y,n,1),Al(e.x,e.y,n,1))<r;for(let e=0;e<t.length;e++)t[e]=nc(t[e],i)}let l,c;if(u){const t=i.getValueAndResolveTokens("text-field",e,n,m),r=je.factory(t);ip(r)&&(this.hasRTLText=!0),(!this.hasRTLText||"unavailable"===_o()||this.hasRTLText&&xo.isParsed())&&(l=Gh(r,i,e))}if(h){const t=i.getValueAndResolveTokens("icon-image",e,n,m);c=t instanceof ze?t:ze.fromString(t)}if(!l&&!c)continue;const x=this.sortFeaturesByKey?d.evaluate(e,{},n):void 0;if(this.features.push({id:v,text:l,icon:c,index:_,sourceLayerIndex:b,geometry:e.geometry,properties:y.properties,type:Qf[y.type],sortKey:x}),c&&(f[c.name]=!0),l){const t=s.evaluate(e,{},n).join(","),r="map"===o.get("text-rotation-alignment")&&"point"!==o.get("symbol-placement");this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(Md.vertical)>=0;for(const e of l.sections)if(e.image)f[e.image.name]=!0;else{const n=eo(l.toString()),i=e.fontStack||t,o=p[i]=p[i]||{};this.calculateGlyphDependencies(e.text,o,r,this.allowVerticalPlacement,n)}}}"line"===o.get("symbol-placement")&&(this.features=function(t){const e={},n={},r=[];let i=0;function o(e){r.push(t[e]),i++}function a(t,e,i){const o=n[t];return delete n[t],n[e]=o,r[o].geometry[0].pop(),r[o].geometry[0]=r[o].geometry[0].concat(i[0]),o}function s(t,n,i){const o=e[n];return delete e[n],e[t]=o,r[o].geometry[0].shift(),r[o].geometry[0]=i[0].concat(r[o].geometry[0]),o}function l(t,e,n){const r=n?e[0][e[0].length-1]:e[0][0];return"".concat(t,":").concat(r.x,":").concat(r.y)}for(let c=0;c<t.length;c++){const u=t[c],h=u.geometry,d=u.text?u.text.toString():null;if(!d){o(c);continue}const f=l(d,h),p=l(d,h,!0);if(f in n&&p in e&&n[f]!==e[p]){const t=s(f,p,h),i=a(f,p,r[t].geometry);delete e[f],delete n[p],n[l(d,r[i].geometry,!0)]=i,r[t].geometry=null}else f in n?a(f,p,h):p in e?s(f,p,h):(o(c),e[f]=i-1,n[p]=i-1)}return r.filter((t=>t.geometry))}(this.features)),this.sortFeaturesByKey&&this.features.sort(((t,e)=>t.sortKey-e.sortKey))}update(t,e,n,r){this.stateDependentLayers.length&&(this.text.programConfigurations.updatePaintArrays(t,e,this.layers,n,r),this.icon.programConfigurations.updatePaintArrays(t,e,this.layers,n,r))}isEmpty(){return 0===this.symbolInstances.length&&!this.hasRTLText}uploadPending(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload}upload(t){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(t),this.iconCollisionBox.upload(t)),this.text.upload(t,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(t,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0}destroyDebugData(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()}getProjection(){return this.projectionInstance||(this.projectionInstance=Jf(this.projection)),this.projectionInstance}destroy(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()}addToLineVertexArray(t,e){const n=this.lineVertexArray.length;if(void 0!==t.segment)for(const{x:r,y:i}of e)this.lineVertexArray.emplaceBack(r,i);return{lineStartIndex:n,lineLength:this.lineVertexArray.length-n}}addSymbols(t,e,n,r,i,o,a,s,l,c,u,h,d,f){const p=t.indexArray,m=t.layoutVertexArray,g=t.globeExtVertexArray,y=t.segments.prepareSegment(4*e.length,m,p,this.canOverlap?o.sortKey:void 0),v=this.glyphOffsetArray.length,_=y.vertexLength,b=this.allowVerticalPlacement&&a===Md.vertical?Math.PI/2:0,x=o.text&&o.text.sections;for(let S=0;S<e.length;S++){const{tl:r,tr:i,bl:a,br:c,tex:u,pixelOffsetTL:h,pixelOffsetBR:v,minFontScaleX:_,minFontScaleY:w,glyphOffset:E,isSDF:T,sectionIndex:M}=e[S],A=y.vertexLength,C=E[1];if(ep(m,l.x,l.y,r.x,C+r.y,u.x,u.y,n,T,h.x,h.y,_,w),ep(m,l.x,l.y,i.x,C+i.y,u.x+u.w,u.y,n,T,v.x,h.y,_,w),ep(m,l.x,l.y,a.x,C+a.y,u.x,u.y+u.h,n,T,h.x,v.y,_,w),ep(m,l.x,l.y,c.x,C+c.y,u.x+u.w,u.y+u.h,n,T,v.x,v.y,_,w),s){const{x:e,y:n,z:r}=s.anchor,[i,o,a]=s.up;np(g,e,n,r,i,o,a),np(g,e,n,r,i,o,a),np(g,e,n,r,i,o,a),np(g,e,n,r,i,o,a),rp(t.dynamicLayoutVertexArray,e,n,r,b)}else rp(t.dynamicLayoutVertexArray,l.x,l.y,l.z,b);p.emplaceBack(A,A+1,A+2),p.emplaceBack(A+1,A+2,A+3),y.vertexLength+=4,y.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(E[0]),S!==e.length-1&&M===e[S+1].sectionIndex||t.programConfigurations.populatePaintArrays(m.length,o,o.index,{},d,f,x&&x[M])}const w=s?s.anchor:l;t.placedSymbolArray.emplaceBack(w.x,w.y,w.z,l.x,l.y,v,this.glyphOffsetArray.length-v,_,c,u,l.segment,n?n[0]:0,n?n[1]:0,r[0],r[1],a,0,!1,0,h,0)}_commitLayoutVertex(t,e,n,r,i,o,a){t.emplaceBack(e,n,r,i,o,Math.round(a.x),Math.round(a.y))}_addCollisionDebugVertices(t,e,n,r,i,o,a){const s=n.segments.prepareSegment(4,n.layoutVertexArray,n.indexArray),l=s.vertexLength,c=a.tileAnchorX,u=a.tileAnchorY;for(let d=0;d<4;d++)n.collisionVertexArray.emplaceBack(0,0,0,0);n.collisionVertexArrayExt.emplaceBack(e,-t.padding,-t.padding),n.collisionVertexArrayExt.emplaceBack(e,t.padding,-t.padding),n.collisionVertexArrayExt.emplaceBack(e,t.padding,t.padding),n.collisionVertexArrayExt.emplaceBack(e,-t.padding,t.padding),this._commitLayoutVertex(n.layoutVertexArray,r,i,o,c,u,new v(t.x1,t.y1)),this._commitLayoutVertex(n.layoutVertexArray,r,i,o,c,u,new v(t.x2,t.y1)),this._commitLayoutVertex(n.layoutVertexArray,r,i,o,c,u,new v(t.x2,t.y2)),this._commitLayoutVertex(n.layoutVertexArray,r,i,o,c,u,new v(t.x1,t.y2)),s.vertexLength+=4;const h=n.indexArray;h.emplaceBack(l,l+1),h.emplaceBack(l+1,l+2),h.emplaceBack(l+2,l+3),h.emplaceBack(l+3,l),s.primitiveLength+=4}_addTextDebugCollisionBoxes(t,e,n,r,i,o){for(let a=r;a<i;a++){const r=n.get(a),i=this.getSymbolInstanceTextSize(t,o,e,a);this._addCollisionDebugVertices(r,i,this.textCollisionBox,r.projectedAnchorX,r.projectedAnchorY,r.projectedAnchorZ,o)}}_addIconDebugCollisionBoxes(t,e,n,r,i,o){for(let a=r;a<i;a++){const r=n.get(a),i=this.getSymbolInstanceIconSize(t,e,o.placedIconSymbolIndex);this._addCollisionDebugVertices(r,i,this.iconCollisionBox,r.projectedAnchorX,r.projectedAnchorY,r.projectedAnchorZ,o)}}generateCollisionDebugBuffers(t,e){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new ap(Qo,Rh.members,ca),this.iconCollisionBox=new ap(Qo,Rh.members,ca);const n=Vh(this.iconSizeData,t),r=Vh(this.textSizeData,t);for(let i=0;i<this.symbolInstances.length;i++){const o=this.symbolInstances.get(i);this._addTextDebugCollisionBoxes(r,t,e,o.textBoxStartIndex,o.textBoxEndIndex,o),this._addTextDebugCollisionBoxes(r,t,e,o.verticalTextBoxStartIndex,o.verticalTextBoxEndIndex,o),this._addIconDebugCollisionBoxes(n,t,e,o.iconBoxStartIndex,o.iconBoxEndIndex,o),this._addIconDebugCollisionBoxes(n,t,e,o.verticalIconBoxStartIndex,o.verticalIconBoxEndIndex,o)}}getSymbolInstanceTextSize(t,e,n,r){const i=this.text.placedSymbolArray.get(e.rightJustifiedTextSymbolIndex>=0?e.rightJustifiedTextSymbolIndex:e.centerJustifiedTextSymbolIndex>=0?e.centerJustifiedTextSymbolIndex:e.leftJustifiedTextSymbolIndex>=0?e.leftJustifiedTextSymbolIndex:e.verticalPlacedTextSymbolIndex>=0?e.verticalPlacedTextSymbolIndex:r),o=Uh(this.textSizeData,t,i)/Bh;return this.tilePixelRatio*o}getSymbolInstanceIconSize(t,e,n){const r=this.icon.placedSymbolArray.get(n),i=Uh(this.iconSizeData,t,r);return this.tilePixelRatio*i}_commitDebugCollisionVertexUpdate(t,e,n){t.emplaceBack(e,-n,-n),t.emplaceBack(e,n,-n),t.emplaceBack(e,n,n),t.emplaceBack(e,-n,n)}_updateTextDebugCollisionBoxes(t,e,n,r,i,o){for(let a=r;a<i;a++){const r=n.get(a),i=this.getSymbolInstanceTextSize(t,o,e,a);this._commitDebugCollisionVertexUpdate(this.textCollisionBox.collisionVertexArrayExt,i,r.padding)}}_updateIconDebugCollisionBoxes(t,e,n,r,i,o){for(let a=r;a<i;a++){const r=n.get(a),i=this.getSymbolInstanceIconSize(t,e,o);this._commitDebugCollisionVertexUpdate(this.iconCollisionBox.collisionVertexArrayExt,i,r.padding)}}updateCollisionDebugBuffers(t,e){if(!this.hasDebugData())return;this.hasTextCollisionBoxData()&&this.textCollisionBox.collisionVertexArrayExt.clear(),this.hasIconCollisionBoxData()&&this.iconCollisionBox.collisionVertexArrayExt.clear();const n=Vh(this.iconSizeData,t),r=Vh(this.textSizeData,t);for(let i=0;i<this.symbolInstances.length;i++){const o=this.symbolInstances.get(i);this._updateTextDebugCollisionBoxes(r,t,e,o.textBoxStartIndex,o.textBoxEndIndex,o),this._updateTextDebugCollisionBoxes(r,t,e,o.verticalTextBoxStartIndex,o.verticalTextBoxEndIndex,o),this._updateIconDebugCollisionBoxes(n,t,e,o.iconBoxStartIndex,o.iconBoxEndIndex,o.placedIconSymbolIndex),this._updateIconDebugCollisionBoxes(n,t,e,o.verticalIconBoxStartIndex,o.verticalIconBoxEndIndex,o.placedIconSymbolIndex)}this.hasTextCollisionBoxData()&&this.textCollisionBox.collisionVertexBufferExt&&this.textCollisionBox.collisionVertexBufferExt.updateData(this.textCollisionBox.collisionVertexArrayExt),this.hasIconCollisionBoxData()&&this.iconCollisionBox.collisionVertexBufferExt&&this.iconCollisionBox.collisionVertexBufferExt.updateData(this.iconCollisionBox.collisionVertexArrayExt)}_deserializeCollisionBoxesForSymbol(t,e,n,r,i,o,a,s,l){const c={};if(e<n){const{x1:n,y1:r,x2:i,y2:o,padding:a,projectedAnchorX:s,projectedAnchorY:l,projectedAnchorZ:u,tileAnchorX:h,tileAnchorY:d,featureIndex:f}=t.get(e);c.textBox={x1:n,y1:r,x2:i,y2:o,padding:a,projectedAnchorX:s,projectedAnchorY:l,projectedAnchorZ:u,tileAnchorX:h,tileAnchorY:d},c.textFeatureIndex=f}if(r<i){const{x1:e,y1:n,x2:i,y2:o,padding:a,projectedAnchorX:s,projectedAnchorY:l,projectedAnchorZ:u,tileAnchorX:h,tileAnchorY:d,featureIndex:f}=t.get(r);c.verticalTextBox={x1:e,y1:n,x2:i,y2:o,padding:a,projectedAnchorX:s,projectedAnchorY:l,projectedAnchorZ:u,tileAnchorX:h,tileAnchorY:d},c.verticalTextFeatureIndex=f}if(o<a){const{x1:e,y1:n,x2:r,y2:i,padding:a,projectedAnchorX:s,projectedAnchorY:l,projectedAnchorZ:u,tileAnchorX:h,tileAnchorY:d,featureIndex:f}=t.get(o);c.iconBox={x1:e,y1:n,x2:r,y2:i,padding:a,projectedAnchorX:s,projectedAnchorY:l,projectedAnchorZ:u,tileAnchorX:h,tileAnchorY:d},c.iconFeatureIndex=f}if(s<l){const{x1:e,y1:n,x2:r,y2:i,padding:o,projectedAnchorX:a,projectedAnchorY:l,projectedAnchorZ:u,tileAnchorX:h,tileAnchorY:d,featureIndex:f}=t.get(s);c.verticalIconBox={x1:e,y1:n,x2:r,y2:i,padding:o,projectedAnchorX:a,projectedAnchorY:l,projectedAnchorZ:u,tileAnchorX:h,tileAnchorY:d},c.verticalIconFeatureIndex=f}return c}deserializeCollisionBoxes(t){this.collisionArrays=[];for(let e=0;e<this.symbolInstances.length;e++){const n=this.symbolInstances.get(e);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(t,n.textBoxStartIndex,n.textBoxEndIndex,n.verticalTextBoxStartIndex,n.verticalTextBoxEndIndex,n.iconBoxStartIndex,n.iconBoxEndIndex,n.verticalIconBoxStartIndex,n.verticalIconBoxEndIndex))}}hasTextData(){return this.text.segments.get().length>0}hasIconData(){return this.icon.segments.get().length>0}hasDebugData(){return this.textCollisionBox&&this.iconCollisionBox}hasTextCollisionBoxData(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0}hasIconCollisionBoxData(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0}addIndicesForPlacedSymbol(t,e){const n=t.placedSymbolArray.get(e),r=n.vertexStartIndex+4*n.numGlyphs;for(let i=n.vertexStartIndex;i<r;i+=4)t.indexArray.emplaceBack(i,i+1,i+2),t.indexArray.emplaceBack(i+1,i+2,i+3)}getSortedSymbolIndexes(t){if(this.sortedAngle===t&&void 0!==this.symbolInstanceIndexes)return this.symbolInstanceIndexes;const e=Math.sin(t),n=Math.cos(t),r=[],i=[],o=[];for(let a=0;a<this.symbolInstances.length;++a){o.push(a);const t=this.symbolInstances.get(a);r.push(0|Math.round(e*t.tileAnchorX+n*t.tileAnchorY)),i.push(t.featureIndex)}return o.sort(((t,e)=>r[t]-r[e]||i[e]-i[t])),o}addToSortKeyRanges(t,e){const n=this.sortKeyRanges[this.sortKeyRanges.length-1];n&&n.sortKey===e?n.symbolInstanceEnd=t+1:this.sortKeyRanges.push({sortKey:e,symbolInstanceStart:t,symbolInstanceEnd:t+1})}sortFeatures(t){if(this.sortFeaturesByY&&this.sortedAngle!==t&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(t),this.sortedAngle=t,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(const t of this.symbolInstanceIndexes){const e=this.symbolInstances.get(t);this.featureSortOrder.push(e.featureIndex);const{rightJustifiedTextSymbolIndex:n,centerJustifiedTextSymbolIndex:r,leftJustifiedTextSymbolIndex:i,verticalPlacedTextSymbolIndex:o,placedIconSymbolIndex:a,verticalPlacedIconSymbolIndex:s}=e;n>=0&&this.addIndicesForPlacedSymbol(this.text,n),r>=0&&r!==n&&this.addIndicesForPlacedSymbol(this.text,r),i>=0&&i!==r&&i!==n&&this.addIndicesForPlacedSymbol(this.text,i),o>=0&&this.addIndicesForPlacedSymbol(this.text,o),a>=0&&this.addIndicesForPlacedSymbol(this.icon,a),s>=0&&this.addIndicesForPlacedSymbol(this.icon,s)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}}}Yi(sp,"SymbolBucket",{omit:["layers","collisionBoxArray","features","compareText"]}),sp.MAX_GLYPHS=65535,sp.addDynamicAttributes=rp;const lp=new jo({"symbol-placement":new Io(te.layout_symbol["symbol-placement"]),"symbol-spacing":new Io(te.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new Io(te.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new Oo(te.layout_symbol["symbol-sort-key"]),"symbol-z-order":new Io(te.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new Io(te.layout_symbol["icon-allow-overlap"]),"icon-ignore-placement":new Io(te.layout_symbol["icon-ignore-placement"]),"icon-optional":new Io(te.layout_symbol["icon-optional"]),"icon-rotation-alignment":new Io(te.layout_symbol["icon-rotation-alignment"]),"icon-size":new Oo(te.layout_symbol["icon-size"]),"icon-text-fit":new Io(te.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new Io(te.layout_symbol["icon-text-fit-padding"]),"icon-image":new Oo(te.layout_symbol["icon-image"]),"icon-rotate":new Oo(te.layout_symbol["icon-rotate"]),"icon-padding":new Io(te.layout_symbol["icon-padding"]),"icon-keep-upright":new Io(te.layout_symbol["icon-keep-upright"]),"icon-offset":new Oo(te.layout_symbol["icon-offset"]),"icon-anchor":new Oo(te.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new Io(te.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new Io(te.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new Io(te.layout_symbol["text-rotation-alignment"]),"text-field":new Oo(te.layout_symbol["text-field"]),"text-font":new Oo(te.layout_symbol["text-font"]),"text-size":new Oo(te.layout_symbol["text-size"]),"text-max-width":new Oo(te.layout_symbol["text-max-width"]),"text-line-height":new Oo(te.layout_symbol["text-line-height"]),"text-letter-spacing":new Oo(te.layout_symbol["text-letter-spacing"]),"text-justify":new Oo(te.layout_symbol["text-justify"]),"text-radial-offset":new Oo(te.layout_symbol["text-radial-offset"]),"text-variable-anchor":new Io(te.layout_symbol["text-variable-anchor"]),"text-anchor":new Oo(te.layout_symbol["text-anchor"]),"text-max-angle":new Io(te.layout_symbol["text-max-angle"]),"text-writing-mode":new Io(te.layout_symbol["text-writing-mode"]),"text-rotate":new Oo(te.layout_symbol["text-rotate"]),"text-padding":new Io(te.layout_symbol["text-padding"]),"text-keep-upright":new Io(te.layout_symbol["text-keep-upright"]),"text-transform":new Oo(te.layout_symbol["text-transform"]),"text-offset":new Oo(te.layout_symbol["text-offset"]),"text-allow-overlap":new Io(te.layout_symbol["text-allow-overlap"]),"text-ignore-placement":new Io(te.layout_symbol["text-ignore-placement"]),"text-optional":new Io(te.layout_symbol["text-optional"])});var cp={paint:new jo({"icon-opacity":new Oo(te.paint_symbol["icon-opacity"]),"icon-color":new Oo(te.paint_symbol["icon-color"]),"icon-halo-color":new Oo(te.paint_symbol["icon-halo-color"]),"icon-halo-width":new Oo(te.paint_symbol["icon-halo-width"]),"icon-halo-blur":new Oo(te.paint_symbol["icon-halo-blur"]),"icon-translate":new Io(te.paint_symbol["icon-translate"]),"icon-translate-anchor":new Io(te.paint_symbol["icon-translate-anchor"]),"text-opacity":new Oo(te.paint_symbol["text-opacity"]),"text-color":new Oo(te.paint_symbol["text-color"],{runtimeType:de,getOverride:t=>t.textColor,hasOverride:t=>!!t.textColor}),"text-halo-color":new Oo(te.paint_symbol["text-halo-color"]),"text-halo-width":new Oo(te.paint_symbol["text-halo-width"]),"text-halo-blur":new Oo(te.paint_symbol["text-halo-blur"]),"text-translate":new Io(te.paint_symbol["text-translate"]),"text-translate-anchor":new Io(te.paint_symbol["text-translate-anchor"])}),layout:lp};class up{constructor(t){this.type=t.property.overrides?t.property.overrides.runtimeType:le,this.defaultValue=t}evaluate(t){if(t.formattedSection){const e=this.defaultValue.property.overrides;if(e&&e.hasOverride(t.formattedSection))return e.getOverride(t.formattedSection)}return t.feature&&t.featureState?this.defaultValue.evaluate(t.feature,t.featureState):this.defaultValue.property.specification.default}eachChild(t){this.defaultValue.isConstant()||t(this.defaultValue.value._styleExpression.expression)}outputDefined(){return!1}serialize(){return null}}Yi(up,"FormatSectionOverride",{omit:["defaultValue"]});class hp extends rs{constructor(t){super(t,cp)}recalculate(t,e){super.recalculate(t,e),"auto"===this.layout.get("icon-rotation-alignment")&&(this.layout._values["icon-rotation-alignment"]="point"!==this.layout.get("symbol-placement")?"map":"viewport"),"auto"===this.layout.get("text-rotation-alignment")&&(this.layout._values["text-rotation-alignment"]="point"!==this.layout.get("symbol-placement")?"map":"viewport"),"auto"===this.layout.get("text-pitch-alignment")&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")),"auto"===this.layout.get("icon-pitch-alignment")&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment"));const n=this.layout.get("text-writing-mode");if(n){const t=[];for(const e of n)t.indexOf(e)<0&&t.push(e);this.layout._values["text-writing-mode"]=t}else this.layout._values["text-writing-mode"]="point"===this.layout.get("symbol-placement")?["horizontal"]:["horizontal","vertical"];this._setPaintOverrides()}getValueAndResolveTokens(t,e,n,r){const i=this.layout.get(t).evaluate(e,{},n,r),o=this._unevaluatedLayout._values[t];return o.isDataDriven()||Yr(o.value)||!i?i:function(t,e){return e.replace(/{([^{}]+)}/g,((e,n)=>n in t?String(t[n]):""))}(e.properties,i)}createBucket(t){return new sp(t)}queryRadius(){return 0}queryIntersectsFeature(){return!1}_setPaintOverrides(){for(const t of cp.paint.overridableProperties){if(!hp.hasPaintOverride(this.layout,t))continue;const e=this.paint.get(t),n=new up(e),r=new Xr(n,e.property.specification);let i=null;i="constant"===e.value.kind||"source"===e.value.kind?new $r("source",r):new Jr("composite",r,e.value.zoomStops,e.value._interpolationType),this.paint._values[t]=new Po(e.property,i,e.parameters)}}_handleOverridablePaintPropertyUpdate(t,e,n){return!(!this.layout||e.isDataDriven()||n.isDataDriven())&&hp.hasPaintOverride(this.layout,t)}static hasPaintOverride(t,e){const n=t.get("text-field"),r=cp.paint.properties[e];let i=!1;const o=t=>{for(const e of t)if(r.overrides&&r.overrides.hasOverride(e))return void(i=!0)};if("constant"===n.value.kind&&n.value.value instanceof je)o(n.value.value.sections);else if("source"===n.value.kind){const t=e=>{i||(e instanceof Ue&&Be(e.value)===ge?o(e.value.sections):e instanceof He?o(e.sections):e.eachChild(t))},e=n.value;e._styleExpression&&t(e._styleExpression.expression)}return i}getProgramConfiguration(t){return new Ya(this,t)}}var dp={paint:new jo({"background-color":new Io(te.paint_background["background-color"]),"background-pattern":new Io(te.paint_background["background-pattern"]),"background-opacity":new Io(te.paint_background["background-opacity"])})},fp={paint:new jo({"raster-opacity":new Io(te.paint_raster["raster-opacity"]),"raster-hue-rotate":new Io(te.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new Io(te.paint_raster["raster-brightness-min"]),"raster-brightness-max":new Io(te.paint_raster["raster-brightness-max"]),"raster-saturation":new Io(te.paint_raster["raster-saturation"]),"raster-contrast":new Io(te.paint_raster["raster-contrast"]),"raster-resampling":new Io(te.paint_raster["raster-resampling"]),"raster-fade-duration":new Io(te.paint_raster["raster-fade-duration"])})};class pp extends rs{constructor(t){super(t,{}),this.implementation=t}is3D(){return"3d"===this.implementation.renderingMode}hasOffscreenPass(){return void 0!==this.implementation.prerender}isLayerDraped(){return void 0!==this.implementation.renderToTile}shouldRedrape(){return!!this.implementation.shouldRerenderTiles&&this.implementation.shouldRerenderTiles()}recalculate(){}updateTransitions(){}hasTransition(){return!1}serialize(){}onAdd(t){this.implementation.onAdd&&this.implementation.onAdd(t,t.painter.context.gl)}onRemove(t){this.implementation.onRemove&&this.implementation.onRemove(t,t.painter.context.gl)}}var mp={paint:new jo({"sky-type":new Io(te.paint_sky["sky-type"]),"sky-atmosphere-sun":new Io(te.paint_sky["sky-atmosphere-sun"]),"sky-atmosphere-sun-intensity":new Io(te.paint_sky["sky-atmosphere-sun-intensity"]),"sky-gradient-center":new Io(te.paint_sky["sky-gradient-center"]),"sky-gradient-radius":new Io(te.paint_sky["sky-gradient-radius"]),"sky-gradient":new Lo(te.paint_sky["sky-gradient"]),"sky-atmosphere-halo-color":new Io(te.paint_sky["sky-atmosphere-halo-color"]),"sky-atmosphere-color":new Io(te.paint_sky["sky-atmosphere-color"]),"sky-opacity":new Io(te.paint_sky["sky-opacity"])})};function gp(t,e,n){const r=[0,0,1],i=Zs([]);return Ys(i,i,n?-x(t)+Math.PI:x(t)),Xs(i,i,-x(e)),Bs(r,r,i),js(r,r)}const yp={circle:class extends rs{constructor(t){super(t,Cc)}createBucket(t){return new uc(t)}queryRadius(t){const e=t;return Sc("circle-radius",this,e)+Sc("circle-stroke-width",this,e)+Ec(this.paint.get("circle-translate"))}queryIntersectsFeature(t,e,n,r,i,o,a,s){const l=Mc(this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),o.angle,t.pixelToTileUnitsFactor),c=this.paint.get("circle-radius").evaluate(e,n)+this.paint.get("circle-stroke-width").evaluate(e,n);return Pc(t,r,o,a,s,"map"===this.paint.get("circle-pitch-alignment"),"map"===this.paint.get("circle-pitch-scale"),l,c)}getProgramIds(){return["circle"]}getProgramConfiguration(t){return new Ya(this,t)}},heatmap:class extends rs{createBucket(t){return new jc(t)}constructor(t){super(t,Nc),this._updateColorRamp()}_handleSpecialPaintPropertyUpdate(t){"heatmap-color"===t&&this._updateColorRamp()}_updateColorRamp(){this.colorRamp=Uc({expression:this._transitionablePaint._values["heatmap-color"].value.expression,evaluationKey:"heatmapDensity",image:this.colorRamp}),this.colorRampTexture=null}resize(){this.heatmapFbo&&(this.heatmapFbo.destroy(),this.heatmapFbo=null)}queryRadius(t){return Sc("heatmap-radius",this,t)}queryIntersectsFeature(t,e,n,r,i,o,a,s){const l=this.paint.get("heatmap-radius").evaluate(e,n);return Pc(t,r,o,a,s,!0,!0,new v(0,0),l)}hasOffscreenPass(){return 0!==this.paint.get("heatmap-opacity")&&"none"!==this.visibility}getProgramIds(){return["heatmap","heatmapTexture"]}getProgramConfiguration(t){return new Ya(this,t)}},hillshade:class extends rs{constructor(t){super(t,Vc)}hasOffscreenPass(){return 0!==this.paint.get("hillshade-exaggeration")&&"none"!==this.visibility}getProgramIds(){return["hillshade","hillshadePrepare"]}},fill:class extends rs{constructor(t){super(t,Pu)}getProgramIds(){const t=this.paint.get("fill-pattern"),e=t&&t.constantOr(1),n=[e?"fillPattern":"fill"];return this.paint.get("fill-antialias")&&n.push(e&&!this.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline"),n}getProgramConfiguration(t){return new Ya(this,t)}recalculate(t,e){super.recalculate(t,e);const n=this.paint._values["fill-outline-color"];"constant"===n.value.kind&&void 0===n.value.value&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])}createBucket(t){return new Au(t)}queryRadius(){return Ec(this.paint.get("fill-translate"))}queryIntersectsFeature(t,e,n,r,i,o){return!t.queryGeometry.isAboveHorizon&&fc(Tc(t.tilespaceGeometry,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),o.angle,t.pixelToTileUnitsFactor),r)}isTileClipped(){return!0}},"fill-extrusion":class extends rs{constructor(t){super(t,uh)}createBucket(t){return new th(t)}queryRadius(){return Ec(this.paint.get("fill-extrusion-translate"))}is3D(){return!0}getProgramIds(){return[this.paint.get("fill-extrusion-pattern").constantOr(1)?"fillExtrusionPattern":"fillExtrusion"]}getProgramConfiguration(t){return new Ya(this,t)}queryIntersectsFeature(t,e,n,r,i,o,a,s,l){const c=Mc(this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),o.angle,t.pixelToTileUnitsFactor),u=this.paint.get("fill-extrusion-height").evaluate(e,n),h=this.paint.get("fill-extrusion-base").evaluate(e,n),d=[0,0],f=s&&o.elevation,p=o.elevation?o.elevation.exaggeration():1,m=t.tile.getBucket(this);if(f&&m instanceof th){const t=m.centroidVertexArray,e=l+1;e<t.length&&(d[0]=t.geta_centroid_pos0(e),d[1]=t.geta_centroid_pos1(e))}if(0===d[0]&&1===d[1])return!1;"globe"===o.projection.name&&(r=lh([r],[new v(0,0),new v(ss,ss)],t.tileID.canonical).map((t=>t.polygon)).flat());const g=f?s:null,[y,_]=function(t,e,n,r,i,o,a,s,l,c,u){return"globe"===t.projection.name?function(t,e,n,r,i,o,a,s,l,c,u){const h=[],d=[],f=t.projection.upVectorScale(u,t.center.lat,t.worldSize).metersToTile,p=[0,0,0,1],m=[0,0,0,1],g=(t,e,n,r)=>{t[0]=e,t[1]=n,t[2]=r,t[3]=1},y=sh();n>0&&(n+=y),r+=y;for(const v of e){const e=[],y=[];for(const h of v){const d=h.x+i.x,v=h.y+i.y,_=t.projection.projectTilePoint(d,v,u),b=t.projection.upVector(u,h.x,h.y);let x=n,w=r;if(a){const t=_h(d,v,n,r,a,s,l,c);x+=t.base,w+=t.top}0!==n?g(p,_.x+b[0]*f*x,_.y+b[1]*f*x,_.z+b[2]*f*x):g(p,_.x,_.y,_.z),g(m,_.x+b[0]*f*w,_.y+b[1]*f*w,_.z+b[2]*f*w),Ds(p,p,o),Ds(m,m,o),e.push(new gh(p[0],p[1],p[2])),y.push(new gh(m[0],m[1],m[2]))}h.push(e),d.push(y)}return[h,d]}(t,e,n,r,i,o,a,s,l,c,u):a?function(t,e,n,r,i,o,a,s,l){const c=[],u=[],h=[0,0,0,1];for(const d of t){const t=[],f=[];for(const c of d){const u=c.x+r.x,d=c.y+r.y,p=_h(u,d,e,n,o,a,s,l);h[0]=u,h[1]=d,h[2]=p.base,h[3]=1,qs(h,h,i),h[3]=Math.max(h[3],1e-5);const m=new gh(h[0]/h[3],h[1]/h[3],h[2]/h[3]);h[0]=u,h[1]=d,h[2]=p.top,h[3]=1,qs(h,h,i),h[3]=Math.max(h[3],1e-5);const g=new gh(h[0]/h[3],h[1]/h[3],h[2]/h[3]);t.push(m),f.push(g)}c.push(t),u.push(f)}return[c,u]}(e,n,r,i,o,a,s,l,c):function(t,e,n,r,i){const o=[],a=[],s=i[8]*e,l=i[9]*e,c=i[10]*e,u=i[11]*e,h=i[8]*n,d=i[9]*n,f=i[10]*n,p=i[11]*n;for(const m of t){const t=[],e=[];for(const n of m){const o=n.x+r.x,a=n.y+r.y,m=i[0]*o+i[4]*a+i[12],g=i[1]*o+i[5]*a+i[13],y=i[2]*o+i[6]*a+i[14],v=i[3]*o+i[7]*a+i[15],_=m+s,b=g+l,x=y+c,w=Math.max(v+u,1e-5),S=m+h,E=g+d,T=y+f,M=Math.max(v+p,1e-5);t.push(new gh(_/w,b/w,x/w)),e.push(new gh(S/M,E/M,T/M))}o.push(t),a.push(e)}return[o,a]}(e,n,r,i,o)}(o,r,h,u,c,a,g,d,p,o.center.lat,t.tileID.canonical),b=t.queryGeometry;return function(t,e,n){let r=1/0;fc(n,e)&&(r=vh(n,e[0]));for(let i=0;i<e.length;i++){const o=e[i],a=t[i];for(let t=0;t<o.length-1;t++){const e=o[t],i=[e,o[t+1],a[t+1],a[t],e];hc(n,i)&&(r=Math.min(r,vh(n,i)))}}return r!==1/0&&r}(y,_,b.isPointQuery()?b.screenBounds:b.screenGeometry)}},line:class extends rs{constructor(t){super(t,Ch),this.gradientVersion=0}_handleSpecialPaintPropertyUpdate(t){if("line-gradient"===t){const t=this._transitionablePaint._values["line-gradient"].value.expression;this.stepInterpolant=t._styleExpression&&t._styleExpression.expression instanceof In,this.gradientVersion=(this.gradientVersion+1)%Number.MAX_SAFE_INTEGER}}gradientExpression(){return this._transitionablePaint._values["line-gradient"].value.expression}widthExpression(){return this._transitionablePaint._values["line-width"].value.expression}recalculate(t,e){super.recalculate(t,e),this.paint._values["line-floorwidth"]=Ph.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,t)}createBucket(t){return new Mh(t)}getProgramIds(){return[this.paint.get("line-pattern").constantOr(1)?"linePattern":"line"]}getProgramConfiguration(t){return new Ya(this,t)}queryRadius(t){const e=t,n=kh(Sc("line-width",this,e),Sc("line-gap-width",this,e)),r=Sc("line-offset",this,e);return n/2+Math.abs(r)+Ec(this.paint.get("line-translate"))}queryIntersectsFeature(t,e,n,r,i,o){if(t.queryGeometry.isAboveHorizon)return!1;const a=Tc(t.tilespaceGeometry,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),o.angle,t.pixelToTileUnitsFactor),s=t.pixelToTileUnitsFactor/2*kh(this.paint.get("line-width").evaluate(e,n),this.paint.get("line-gap-width").evaluate(e,n)),l=this.paint.get("line-offset").evaluate(e,n);return l&&(r=function(t,e){const n=[],r=new v(0,0);for(let i=0;i<t.length;i++){const o=t[i],a=[];for(let t=0;t<o.length;t++){const n=o[t],i=o[t+1],s=0===t?r:n.sub(o[t-1])._unit()._perp(),l=t===o.length-1?r:i.sub(n)._unit()._perp(),c=s._add(l)._unit();c._mult(1/(c.x*l.x+c.y*l.y)),a.push(c._mult(e)._add(n))}n.push(a)}return n}(r,l*t.pixelToTileUnitsFactor)),function(t,e,n){for(let r=0;r<e.length;r++){const i=e[r];if(t.length>=3)for(let e=0;e<i.length;e++)if(bc(t,i[e]))return!0;if(pc(t,i,n))return!0}return!1}(a,r,s)}isTileClipped(){return!0}},symbol:hp,background:class extends rs{constructor(t){super(t,dp)}getProgramIds(){return[this.paint.get("background-pattern")?"backgroundPattern":"background"]}},raster:class extends rs{constructor(t){super(t,fp)}getProgramIds(){return["raster"]}},sky:class extends rs{constructor(t){super(t,mp),this._updateColorRamp()}_handleSpecialPaintPropertyUpdate(t){"sky-gradient"===t?this._updateColorRamp():"sky-atmosphere-sun"!==t&&"sky-atmosphere-halo-color"!==t&&"sky-atmosphere-color"!==t&&"sky-atmosphere-sun-intensity"!==t||(this._skyboxInvalidated=!0)}_updateColorRamp(){this.colorRamp=Uc({expression:this._transitionablePaint._values["sky-gradient"].value.expression,evaluationKey:"skyRadialProgress"}),this.colorRampTexture&&(this.colorRampTexture.destroy(),this.colorRampTexture=null)}needsSkyboxCapture(t){if(this._skyboxInvalidated||!this.skyboxTexture||!this.skyboxGeometry)return!0;if(!this.paint.get("sky-atmosphere-sun")){const e=t.style.light.properties.get("position");return this._lightPosition.azimuthal!==e.azimuthal||this._lightPosition.polar!==e.polar}return!1}getCenter(t,e){if("atmosphere"===this.paint.get("sky-type")){const n=this.paint.get("sky-atmosphere-sun"),r=!n,i=t.style.light,o=i.properties.get("position");return r&&"viewport"===i.properties.get("anchor")&&G("The sun direction is attached to a light with viewport anchor, lighting may behave unexpectedly."),r?gp(o.azimuthal,90-o.polar,e):gp(n[0],90-n[1],e)}const n=this.paint.get("sky-gradient-center");return gp(n[0],90-n[1],e)}is3D(){return!1}isSky(){return!0}markSkyboxValid(t){this._skyboxInvalidated=!1,this._lightPosition=t.style.light.properties.get("position")}hasOffscreenPass(){return!0}getProgramIds(){const t=this.paint.get("sky-type");return"atmosphere"===t?["skyboxCapture","skybox"]:"gradient"===t?["skyboxGradient"]:null}}};class vp{constructor(t,e,n,r){this.context=t,this.format=n,this.texture=t.gl.createTexture(),this.update(e,r)}update(t,n,r){const{width:i,height:o}=t,{context:a}=this,{gl:s}=a,{HTMLImageElement:l,HTMLCanvasElement:c,HTMLVideoElement:u,ImageData:h,ImageBitmap:d}=e;if(s.bindTexture(s.TEXTURE_2D,this.texture),a.pixelStoreUnpackFlipY.set(!1),a.pixelStoreUnpack.set(1),a.pixelStoreUnpackPremultiplyAlpha.set(this.format===s.RGBA&&(!n||!1!==n.premultiply)),r||this.size&&this.size[0]===i&&this.size[1]===o){const{x:e,y:n}=r||{x:0,y:0};t instanceof l||t instanceof c||t instanceof u||t instanceof h||d&&t instanceof d?s.texSubImage2D(s.TEXTURE_2D,0,e,n,s.RGBA,s.UNSIGNED_BYTE,t):s.texSubImage2D(s.TEXTURE_2D,0,e,n,i,o,s.RGBA,s.UNSIGNED_BYTE,t.data)}else this.size=[i,o],t instanceof l||t instanceof c||t instanceof u||t instanceof h||d&&t instanceof d?s.texImage2D(s.TEXTURE_2D,0,this.format,this.format,s.UNSIGNED_BYTE,t):s.texImage2D(s.TEXTURE_2D,0,this.format,i,o,0,this.format,s.UNSIGNED_BYTE,t.data);this.useMipmap=Boolean(n&&n.useMipmap&&this.isSizePowerOfTwo()),this.useMipmap&&s.generateMipmap(s.TEXTURE_2D)}bind(t,e){const{context:n}=this,{gl:r}=n;r.bindTexture(r.TEXTURE_2D,this.texture),t!==this.filter&&(r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MAG_FILTER,t),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MIN_FILTER,this.useMipmap?t===r.NEAREST?r.NEAREST_MIPMAP_NEAREST:r.LINEAR_MIPMAP_NEAREST:t),this.filter=t),e!==this.wrap&&(r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_S,e),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_T,e),this.wrap=e)}isSizePowerOfTwo(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1==0}destroy(){const{gl:t}=this.context;t.deleteTexture(this.texture),this.texture=null}}class _p{constructor(t){this._callback=t,this._triggered=!1,"undefined"!=typeof MessageChannel&&(this._channel=new MessageChannel,this._channel.port2.onmessage=()=>{this._triggered=!1,this._callback()})}trigger(){this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout((()=>{this._triggered=!1,this._callback()}),0))}remove(){this._channel=void 0,this._callback=()=>{}}}class bp{constructor(){this.tasks={},this.taskQueue=[],B(["process"],this),this.invoker=new _p(this.process),this.nextId=0}add(t,e){const n=this.nextId++,r=function(t){let{type:e,isSymbolTile:n,zoom:r}=t;return r=r||0,"message"===e?0:"maybePrepare"!==e||n?"parseTile"!==e||n?"parseTile"===e&&n?300-r:"maybePrepare"===e&&n?400-r:500:200-r:100-r}(e);if(0===r){Z();try{t()}finally{}return{cancel:()=>{}}}return this.tasks[n]={fn:t,metadata:e,priority:r,id:n},this.taskQueue.push(n),this.invoker.trigger(),{cancel:()=>{delete this.tasks[n]}}}process(){Z();try{if(this.taskQueue=this.taskQueue.filter((t=>!!this.tasks[t])),!this.taskQueue.length)return;const t=this.pick();if(null===t)return;const e=this.tasks[t];if(delete this.tasks[t],this.taskQueue.length&&this.invoker.trigger(),!e)return;e.fn()}finally{}}pick(){let t=null,e=1/0;for(let r=0;r<this.taskQueue.length;r++){const n=this.tasks[this.taskQueue[r]];n.priority<e&&(e=n.priority,t=r)}if(null===t)return null;const n=this.taskQueue[t];return this.taskQueue.splice(t,1),n}remove(){this.invoker.remove()}}class xp{constructor(t){this._stringToNumber={},this._numberToString=[];for(let e=0;e<t.length;e++){const n=t[e];this._stringToNumber[n]=e,this._numberToString[e]=n}}encode(t){return this._stringToNumber[t]}decode(t){return this._numberToString[t]}}const wp=["tile","layer","source","sourceLayer","state"];class Sp{constructor(t,e,n,r,i){this.type="Feature",this._vectorTileFeature=t,this._z=e,this._x=n,this._y=r,this.properties=t.properties,this.id=i}get geometry(){return void 0===this._geometry&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._x,this._y,this._z).geometry),this._geometry}set geometry(t){this._geometry=t}toJSON(){const t={type:"Feature",state:void 0,geometry:this.geometry,properties:this.properties};void 0!==this.id&&(t.id=this.id);for(const e of wp)void 0!==this[e]&&(t[e]=this[e]);return t}}const Ep=32,Tp=33,Mp=new Uint16Array(8184);for(let Sm=0;Sm<2046;Sm++){let t=Sm+2,e=0,n=0,r=0,i=0,o=0,a=0;for(1&t?r=i=o=Ep:e=n=a=Ep;(t>>=1)>1;){const s=e+r>>1,l=n+i>>1;1&t?(r=e,i=n,e=o,n=a):(e=r,n=i,r=o,i=a),o=s,a=l}const s=4*Sm;Mp[s+0]=e,Mp[s+1]=n,Mp[s+2]=r,Mp[s+3]=i}const Ap=new Uint16Array(2178),Cp=new Uint8Array(1089),Pp=new Uint16Array(1089);function kp(t){return 0===t?-.03125:32===t?.03125:0}var Ip=Fo([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]);const Op={type:2,extent:ss,loadGeometry:()=>[[new v(0,0),new v(ss+1,0),new v(ss+1,ss+1),new v(0,ss+1),new v(0,0)]]};class Lp{constructor(t,e,n,r,i){this.tileID=t,this.uid=j(),this.uses=0,this.tileSize=e,this.tileZoom=n,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.isRaster=i,this.expiredRequestCount=0,this.state="loading",r&&r.transform&&(this.projection=r.transform.projection)}registerFadeDuration(t){const e=t+this.timeAdded;e<Xt.now()||this.fadeEndTime&&e<this.fadeEndTime||(this.fadeEndTime=e)}wasRequested(){return"errored"===this.state||"loaded"===this.state||"reloading"===this.state}get tileTransform(){return this._tileTransform||(this._tileTransform=If(this.tileID.canonical,this.projection)),this._tileTransform}loadVectorData(t,e,n){if(this.unloadVectorData(),this.state="loaded",t){t.featureIndex&&(this.latestFeatureIndex=t.featureIndex,t.rawTileData?(this.latestRawTileData=t.rawTileData,this.latestFeatureIndex.rawTileData=t.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=t.collisionBoxArray,this.buckets=function(t,e){const n={};if(!e)return n;for(const r of t){const t=r.layerIds.map((t=>e.getLayer(t))).filter(Boolean);if(0!==t.length){r.layers=t,r.stateDependentLayerIds&&(r.stateDependentLayers=r.stateDependentLayerIds.map((e=>t.filter((t=>t.id===e))[0])));for(const e of t)n[e.id]=r}}return n}(t.buckets,e.style),this.hasSymbolBuckets=!1;for(const t in this.buckets){const e=this.buckets[t];if(e instanceof sp){if(this.hasSymbolBuckets=!0,!n)break;e.justReloaded=!0}}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(const t in this.buckets){const e=this.buckets[t];if(e instanceof sp&&e.hasRTLText){this.hasRTLText=!0,xo.isLoading()||xo.isLoaded()||"deferred"!==_o()||bo();break}}this.queryPadding=0;for(const t in this.buckets){const n=this.buckets[t];this.queryPadding=Math.max(this.queryPadding,e.style.getLayer(t).queryRadius(n))}t.imageAtlas&&(this.imageAtlas=t.imageAtlas),t.glyphAtlasImage&&(this.glyphAtlasImage=t.glyphAtlasImage),t.lineAtlas&&(this.lineAtlas=t.lineAtlas)}else this.collisionBoxArray=new fa}unloadVectorData(){if(this.hasData()){for(const t in this.buckets)this.buckets[t].destroy();this.buckets={},this.imageAtlas&&(this.imageAtlas=null),this.lineAtlas&&(this.lineAtlas=null),this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.lineAtlasTexture&&this.lineAtlasTexture.destroy(),this._tileBoundsBuffer&&(this._tileBoundsBuffer.destroy(),this._tileBoundsIndexBuffer.destroy(),this._tileBoundsSegments.destroy(),this._tileBoundsBuffer=null),this._tileDebugBuffer&&(this._tileDebugBuffer.destroy(),this._tileDebugSegments.destroy(),this._tileDebugBuffer=null),this._tileDebugIndexBuffer&&(this._tileDebugIndexBuffer.destroy(),this._tileDebugIndexBuffer=null),this._globeTileDebugBorderBuffer&&(this._globeTileDebugBorderBuffer.destroy(),this._globeTileDebugBorderBuffer=null),this._tileDebugTextBuffer&&(this._tileDebugTextBuffer.destroy(),this._tileDebugTextSegments.destroy(),this._tileDebugTextIndexBuffer.destroy(),this._tileDebugTextBuffer=null),this._globeTileDebugTextBuffer&&(this._globeTileDebugTextBuffer.destroy(),this._globeTileDebugTextBuffer=null),this.latestFeatureIndex=null,this.state="unloaded"}}getBucket(t){return this.buckets[t.id]}upload(t){for(const n in this.buckets){const e=this.buckets[n];e.uploadPending()&&e.upload(t)}const e=t.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new vp(t,this.imageAtlas.image,e.RGBA),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new vp(t,this.glyphAtlasImage,e.ALPHA),this.glyphAtlasImage=null),this.lineAtlas&&!this.lineAtlas.uploaded&&(this.lineAtlasTexture=new vp(t,this.lineAtlas.image,e.ALPHA),this.lineAtlas.uploaded=!0)}prepare(t){this.imageAtlas&&this.imageAtlas.patchUpdatedImages(t,this.imageAtlasTexture)}queryRenderedFeatures(t,e,n,r,i,o,a,s){return this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData?this.latestFeatureIndex.query({tileResult:r,pixelPosMatrix:a,transform:o,params:i,tileTransform:this.tileTransform},t,e,n):{}}querySourceFeatures(t,e){const n=this.latestFeatureIndex;if(!n||!n.rawTileData)return;const r=n.loadVTLayers(),i=e?e.sourceLayer:"",o=r._geojsonTileLayer||r[i];if(!o)return;const a=hi(e&&e.filter),{z:s,x:l,y:c}=this.tileID.canonical,u={z:s,x:l,y:c};for(let h=0;h<o.length;h++){const e=o.feature(h);if(a.needGeometry){const t=sc(e,!0);if(!a.filter(new wo(this.tileID.overscaledZ),t,this.tileID.canonical))continue}else if(!a.filter(new wo(this.tileID.overscaledZ),e))continue;const r=n.getId(e,i),d=new Sp(e,s,l,c,r);d.tile=u,t.push(d)}}hasData(){return"loaded"===this.state||"reloading"===this.state||"expired"===this.state}patternsLoaded(){return!!this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length}setExpiryData(t){const e=this.expirationTime;if(t.cacheControl){const e=X(t.cacheControl);e["max-age"]&&(this.expirationTime=Date.now()+1e3*e["max-age"])}else t.expires&&(this.expirationTime=new Date(t.expires).getTime());if(this.expirationTime){const t=Date.now();let n=!1;if(this.expirationTime>t)n=!1;else if(e)if(this.expirationTime<e)n=!0;else{const r=this.expirationTime-e;r?this.expirationTime=t+Math.max(r,3e4):n=!0}else n=!0;n?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}}getExpiryTimeout(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-(new Date).getTime(),Math.pow(2,31)-1)}setFeatureState(t,e){if(!this.latestFeatureIndex||!this.latestFeatureIndex.rawTileData||0===Object.keys(t).length||!e)return;const n=this.latestFeatureIndex.loadVTLayers(),r=e.style.listImages();for(const i in this.buckets){if(!e.style.hasLayer(i))continue;const o=this.buckets[i],a=o.layers[0].sourceLayer||"_geojsonTileLayer",s=n[a],l=t[a];if(!s||!l||0===Object.keys(l).length)continue;if(o.update(l,s,r,this.imageAtlas&&this.imageAtlas.patternPositions||{}),o instanceof Mh||o instanceof Au){const t=e.style._getSourceCache(o.layers[0].source);e._terrain&&e._terrain.enabled&&t&&o.programConfigurations.needsUpload&&e._terrain._clearRenderCacheForTile(t.id,this.tileID)}const c=e&&e.style&&e.style.getLayer(i);c&&(this.queryPadding=Math.max(this.queryPadding,c.queryRadius(o)))}}holdingForFade(){return void 0!==this.symbolFadeHoldUntil}symbolFadeFinished(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<Xt.now()}clearFadeHold(){this.symbolFadeHoldUntil=void 0}setHoldDuration(t){this.symbolFadeHoldUntil=Xt.now()+t}setTexture(t,e){const n=e.context,r=n.gl;this.texture=this.texture||e.getTileTexture(t.width),this.texture?this.texture.update(t,{useMipmap:!0}):(this.texture=new vp(n,t,r.RGBA,{useMipmap:!0}),this.texture.bind(r.LINEAR,r.CLAMP_TO_EDGE))}setDependencies(t,e){const n={};for(const r of e)n[r]=!0;this.dependencies[t]=n}hasDependency(t,e){for(const n of t){const t=this.dependencies[n];if(t)for(const n of e)if(t[n])return!0}return!1}clearQueryDebugViz(){}_makeDebugTileBoundsBuffers(t,e){if(!e||"mercator"===e.name||this._tileDebugBuffer)return;const n=ac(Op,this.tileID.canonical,this.tileTransform)[0],r=new Uo,i=new ua;for(let o=0;o<n.length;o++){const{x:t,y:e}=n[o];r.emplaceBack(t,e),i.emplaceBack(o)}i.emplaceBack(0),this._tileDebugIndexBuffer=t.createIndexBuffer(i),this._tileDebugBuffer=t.createVertexBuffer(r,tl.members),this._tileDebugSegments=as.simpleSegment(0,0,r.length,i.length)}_makeTileBoundsBuffers(t,e){if(this._tileBoundsBuffer||!e||"mercator"===e.name)return;const n=ac(Op,this.tileID.canonical,this.tileTransform)[0];let r,i;if(this.isRaster){const t=function(t,e){const n=If(t,e),r=Math.pow(2,t.z);for(let c=0;c<Tp;c++)for(let i=0;i<Tp;i++){const o=Zl((t.x+(i+kp(i))/Ep)/r),a=Xl((t.y+(c+kp(c))/Ep)/r),s=e.project(o,a),l=c*Tp+i;Ap[2*l+0]=Math.round((s.x*n.scale-n.x)*ss),Ap[2*l+1]=Math.round((s.y*n.scale-n.y)*ss)}Cp.fill(0),Pp.fill(0);for(let c=2045;c>=0;c--){const t=4*c,e=Mp[t+0],n=Mp[t+1],r=Mp[t+2],i=Mp[t+3],o=e+r>>1,a=n+i>>1,s=o+a-n,l=a+e-o,u=n*Tp+e,h=i*Tp+r,d=a*Tp+o,f=Math.hypot((Ap[2*u+0]+Ap[2*h+0])/2-Ap[2*d+0],(Ap[2*u+1]+Ap[2*h+1])/2-Ap[2*d+1])>=16;Cp[d]=Cp[d]||(f?1:0),c<1022&&(Cp[d]=Cp[d]||Cp[(n+l>>1)*Tp+(e+s>>1)]||Cp[(i+l>>1)*Tp+(r+s>>1)])}const i=new Wo,o=new ra;let a=0;function s(t,e){const n=e*Tp+t;return 0===Pp[n]&&(i.emplaceBack(Ap[2*n+0],Ap[2*n+1],t*ss/Ep,e*ss/Ep),Pp[n]=++a),Pp[n]-1}function l(t,e,n,r,i,a){const c=t+n>>1,u=e+r>>1;if(Math.abs(t-i)+Math.abs(e-a)>1&&Cp[u*Tp+c])l(i,a,t,e,c,u),l(n,r,i,a,c,u);else{const l=s(t,e),c=s(n,r),u=s(i,a);o.emplaceBack(l,c,u)}}return l(0,0,Ep,Ep,Ep,0),l(Ep,Ep,0,0,0,Ep),{vertices:i,indices:o}}(this.tileID.canonical,e);r=t.vertices,i=t.indices}else{r=new Wo,i=new ra;for(const{x:e,y:i}of n)r.emplaceBack(e,i,0,0);const t=vu(r.int16,void 0,4);for(let e=0;e<t.length;e+=3)i.emplaceBack(t[e],t[e+1],t[e+2])}this._tileBoundsBuffer=t.createVertexBuffer(r,Ip.members),this._tileBoundsIndexBuffer=t.createIndexBuffer(i),this._tileBoundsSegments=as.simpleSegment(0,0,r.length,i.length)}_makeGlobeTileDebugBuffers(t,e){const n=e.projection;if(!n||"globe"!==n.name||e.freezeTileCoverage)return;const r=this.tileID.canonical,i=kl(bl(r,e)),o=Ll(e.zoom);let a;o>0&&(a=ps(new Float64Array(16),e.globeMatrix)),this._makeGlobeTileDebugBorderBuffer(t,r,e,i,a,o),this._makeGlobeTileDebugTextBuffer(t,r,e,i,a,o)}_globePoint(t,e,n,r,i,o,a){let s=Al(t,e,n);if(o){const i=1<<n.z,l=Gl(r.center.lng),c=ql(r.center.lat),u=(n.x+.5)/i-l;let h=0;u>.5?h=-1:u<-.5&&(h=1);let d=(t/ss+n.x)/i+h,f=(e/ss+n.y)/i;d=(d-l)*r._pixelsPerMercatorPixel+l,f=(f-c)*r._pixelsPerMercatorPixel+c;const p=[d*r.worldSize,f*r.worldSize,0];Ds(p,p,o),s=_l(s,p,a)}return Ds(s,s,i)}_makeGlobeTileDebugBorderBuffer(t,e,n,r,i,o){const a=new Uo,s=new ua,l=new Vo,c=(t,c,u,h,d)=>{const f=(u-t)/(d-1),p=(h-c)/(d-1),m=a.length;for(let g=0;g<d;g++){const u=t+g*f,h=c+g*p;a.emplaceBack(u,h);const d=this._globePoint(u,h,e,n,r,i,o);l.emplaceBack(d[0],d[1],d[2]),s.emplaceBack(m+g)}},u=ss;c(0,0,u,0,16),c(u,0,u,u,16),c(u,u,0,u,16),c(0,u,0,0,16),this._tileDebugIndexBuffer=t.createIndexBuffer(s),this._tileDebugBuffer=t.createVertexBuffer(a,tl.members),this._globeTileDebugBorderBuffer=t.createVertexBuffer(l,Qs.members),this._tileDebugSegments=as.simpleSegment(0,0,a.length,s.length)}_makeGlobeTileDebugTextBuffer(t,e,n,r,i,o){const a=ss/4,s=new Uo,l=new ra,c=new Vo,u=25;l.reserve(32),s.reserve(u),c.reserve(u);const h=(t,e)=>u*t+e;for(let d=0;d<u;d++){const t=d*a;for(let l=0;l<u;l++){const u=l*a;s.emplaceBack(u,t);const h=this._globePoint(u,t,e,n,r,i,o);c.emplaceBack(h[0],h[1],h[2])}}for(let d=0;d<4;d++)for(let t=0;t<4;t++){const e=h(d,t),n=h(d,t+1),r=h(d+1,t),i=h(d+1,t+1);l.emplaceBack(e,n,r),l.emplaceBack(r,n,i)}this._tileDebugTextIndexBuffer=t.createIndexBuffer(l),this._tileDebugTextBuffer=t.createVertexBuffer(s,tl.members),this._globeTileDebugTextBuffer=t.createVertexBuffer(c,Qs.members),this._tileDebugTextSegments=as.simpleSegment(0,0,u,32)}}class jp{constructor(){this.state={},this.stateChanges={},this.deletedStates={}}updateState(t,e,n){const r=String(e);if(this.stateChanges[t]=this.stateChanges[t]||{},this.stateChanges[t][r]=this.stateChanges[t][r]||{},O(this.stateChanges[t][r],n),null===this.deletedStates[t]){this.deletedStates[t]={};for(const e in this.state[t])e!==r&&(this.deletedStates[t][e]=null)}else if(this.deletedStates[t]&&null===this.deletedStates[t][r]){this.deletedStates[t][r]={};for(const e in this.state[t][r])n[e]||(this.deletedStates[t][r][e]=null)}else for(const i in n)this.deletedStates[t]&&this.deletedStates[t][r]&&null===this.deletedStates[t][r][i]&&delete this.deletedStates[t][r][i]}removeFeatureState(t,e,n){if(null===this.deletedStates[t])return;const r=String(e);if(this.deletedStates[t]=this.deletedStates[t]||{},n&&void 0!==e)null!==this.deletedStates[t][r]&&(this.deletedStates[t][r]=this.deletedStates[t][r]||{},this.deletedStates[t][r][n]=null);else if(void 0!==e)if(this.stateChanges[t]&&this.stateChanges[t][r])for(n in this.deletedStates[t][r]={},this.stateChanges[t][r])this.deletedStates[t][r][n]=null;else this.deletedStates[t][r]=null;else this.deletedStates[t]=null}getState(t,e){const n=String(e),r=O({},(this.state[t]||{})[n],(this.stateChanges[t]||{})[n]);if(null===this.deletedStates[t])return{};if(this.deletedStates[t]){const n=this.deletedStates[t][e];if(null===n)return{};for(const t in n)delete r[t]}return r}initializeTileState(t,e){t.setFeatureState(this.state,e)}coalesceChanges(t,e){const n={};for(const r in this.stateChanges){this.state[r]=this.state[r]||{};const t={};for(const e in this.stateChanges[r])this.state[r][e]||(this.state[r][e]={}),O(this.state[r][e],this.stateChanges[r][e]),t[e]=this.state[r][e];n[r]=t}for(const r in this.deletedStates){this.state[r]=this.state[r]||{};const t={};if(null===this.deletedStates[r])for(const e in this.state[r])t[e]={},this.state[r][e]={};else for(const e in this.deletedStates[r]){if(null===this.deletedStates[r][e])this.state[r][e]={};else if(this.state[r][e])for(const t of Object.keys(this.deletedStates[r][e]))delete this.state[r][e][t];t[e]=this.state[r][e]}n[r]=n[r]||{},O(n[r],t)}if(this.stateChanges={},this.deletedStates={},0!==Object.keys(n).length)for(const r in t)t[r].setFeatureState(n,e)}}class zp{constructor(t){this.size=t,this.minimums=[],this.maximums=[],this.leaves=[]}getElevation(t,e){const n=this.toIdx(t,e);return{min:this.minimums[n],max:this.maximums[n]}}isLeaf(t,e){return this.leaves[this.toIdx(t,e)]}toIdx(t,e){return e*this.size+t}}function Rp(t,e,n,r){let i=0,o=Number.MAX_VALUE;for(let a=0;a<3;a++)if(Math.abs(r[a])<1e-15){if(n[a]<t[a]||n[a]>e[a])return null}else{const s=1/r[a];let l=(t[a]-n[a])*s,c=(e[a]-n[a])*s;if(l>c){const t=l;l=c,c=t}if(l>i&&(i=l),c<o&&(o=c),i>o)return null}return i}function Dp(t,e,n,r,i,o,a,s,l,c,u){const h=r-t,d=i-e,f=o-n,p=a-t,m=s-e,g=l-n,y=u[1]*g-u[2]*m,v=u[2]*p-u[0]*g,_=u[0]*m-u[1]*p,b=h*y+d*v+f*_;if(Math.abs(b)<1e-15)return null;const x=1/b,w=c[0]-t,S=c[1]-e,E=c[2]-n,T=(w*y+S*v+E*_)*x;if(T<0||T>1)return null;const M=S*f-E*d,A=E*h-w*f,C=w*d-S*h,P=(u[0]*M+u[1]*A+u[2]*C)*x;return P<0||T+P>1?null:(p*M+m*A+g*C)*x}function Bp(t,e,n){return(t-e)/(n-e)}function Fp(t,e,n,r,i,o,a,s,l){const c=1<<n,u=o-r,h=a-i,d=(t+1)/c*u+r,f=(e+0)/c*h+i,p=(e+1)/c*h+i;s[0]=(t+0)/c*u+r,s[1]=f,l[0]=d,l[1]=p}class Np{constructor(t){if(this.maximums=[],this.minimums=[],this.leaves=[],this.childOffsets=[],this.nodeCount=0,this.dem=t,this._siblingOffset=[[0,0],[1,0],[0,1],[1,1]],!this.dem)return;const e=function(t){const e=Math.ceil(Math.log2(t.dim/8)),n=[];let r=Math.ceil(Math.pow(2,e));const i=1/r,o=(t,e,n,r,i)=>{const o=r?1:0,a=(t+1)*n-o,s=e*n,l=(e+1)*n-o;i[0]=t*n,i[1]=s,i[2]=a,i[3]=l};let a=new zp(r);const s=[];for(let l=0;l<r*r;l++){o(l%r,Math.floor(l/r),i,!1,s);const e=Vp(s[0],s[1],t),n=Vp(s[2],s[1],t),c=Vp(s[2],s[3],t),u=Vp(s[0],s[3],t);a.minimums.push(Math.min(e,n,c,u)),a.maximums.push(Math.max(e,n,c,u)),a.leaves.push(1)}for(n.push(a),r/=2;r>=1;r/=2){const t=n[n.length-1];a=new zp(r);for(let e=0;e<r*r;e++){o(e%r,Math.floor(e/r),2,!0,s);const n=t.getElevation(s[0],s[1]),i=t.getElevation(s[2],s[1]),l=t.getElevation(s[2],s[3]),c=t.getElevation(s[0],s[3]),u=t.isLeaf(s[0],s[1]),h=t.isLeaf(s[2],s[1]),d=t.isLeaf(s[2],s[3]),f=t.isLeaf(s[0],s[3]),p=Math.min(n.min,i.min,l.min,c.min),m=Math.max(n.max,i.max,l.max,c.max),g=u&&h&&d&&f;a.maximums.push(m),a.minimums.push(p),a.leaves.push(m-p<=5&&g?1:0)}n.push(a)}return n}(this.dem),n=e.length-1,r=e[n];this._addNode(r.minimums[0],r.maximums[0],r.leaves[0]),this._construct(e,0,0,n,0)}raycastRoot(t,e,n,r,i,o){let a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:1;return Rp([t,e,-100],[n,r,this.maximums[0]*a],i,o)}raycast(t,e,n,r,i,o){let a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:1;if(!this.nodeCount)return null;const s=this.raycastRoot(t,e,n,r,i,o,a);if(null==s)return null;const l=[],c=[],u=[],h=[],d=[{idx:0,t:s,nodex:0,nodey:0,depth:0}];for(;d.length>0;){const{idx:s,t:f,nodex:p,nodey:m,depth:g}=d.pop();if(this.leaves[s]){Fp(p,m,g,t,e,n,r,u,h);const s=1<<g,l=(p+0)/s,c=(p+1)/s,d=(m+0)/s,y=(m+1)/s,v=Vp(l,d,this.dem)*a,_=Vp(c,d,this.dem)*a,b=Vp(c,y,this.dem)*a,x=Vp(l,y,this.dem)*a,w=Dp(u[0],u[1],v,h[0],u[1],_,h[0],h[1],b,i,o),S=Dp(h[0],h[1],b,u[0],h[1],x,u[0],u[1],v,i,o),E=Math.min(null!==w?w:Number.MAX_VALUE,null!==S?S:Number.MAX_VALUE);if(E!==Number.MAX_VALUE)return E;{const t=Ls([],i,o,f);if(Up(v,_,x,b,Bp(t[0],u[0],h[0]),Bp(t[1],u[1],h[1]))>=t[2])return f}continue}let y=0;for(let d=0;d<this._siblingOffset.length;d++){Fp((p<<1)+this._siblingOffset[d][0],(m<<1)+this._siblingOffset[d][1],g+1,t,e,n,r,u,h),u[2]=-100,h[2]=this.maximums[this.childOffsets[s]+d]*a;const f=Rp(u,h,i,o);if(null!=f){const t=f;l[d]=t;let e=!1;for(let n=0;n<y&&!e;n++)t>=l[c[n]]&&(c.splice(n,0,d),e=!0);e||(c[y]=d),y++}}for(let t=0;t<y;t++){const e=c[t];d.push({idx:this.childOffsets[s]+e,t:l[e],nodex:(p<<1)+this._siblingOffset[e][0],nodey:(m<<1)+this._siblingOffset[e][1],depth:g+1})}}return null}_addNode(t,e,n){return this.minimums.push(t),this.maximums.push(e),this.leaves.push(n),this.childOffsets.push(0),this.nodeCount++}_construct(t,e,n,r,i){if(1===t[r].isLeaf(e,n))return;this.childOffsets[i]||(this.childOffsets[i]=this.nodeCount);const o=r-1,a=t[o];let s=0,l=0;for(let c=0;c<this._siblingOffset.length;c++){const t=2*e+this._siblingOffset[c][0],r=2*n+this._siblingOffset[c][1],i=a.getElevation(t,r),o=a.isLeaf(t,r),u=this._addNode(i.min,i.max,o);o&&(s|=1<<c),l||(l=u)}for(let c=0;c<this._siblingOffset.length;c++)s&1<<c||this._construct(t,2*e+this._siblingOffset[c][0],2*n+this._siblingOffset[c][1],o,l+c)}}function Up(t,e,n,r,i,o){return On(On(t,n,o),On(e,r,o),i)}function Vp(t,e,n){const r=n.dim,i=A(t*r-.5,0,r-1),o=A(e*r-.5,0,r-1),a=Math.floor(i),s=Math.floor(o),l=Math.min(a+1,r-1),c=Math.min(s+1,r-1);return Up(n.get(a,s),n.get(l,s),n.get(a,c),n.get(l,c),i-a,o-s)}const Wp={mapbox:[6553.6,25.6,.1,1e4],terrarium:[256,1,1/256,32768]};function Gp(t,e,n){return(256*t*256+256*e+n)/10-1e4}function qp(t,e,n){return 256*t+e+n/256-32768}class Hp{get tree(){return this._tree||this._buildQuadTree(),this._tree}constructor(t,e,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=arguments.length>4&&void 0!==arguments[4]&&arguments[4];if(this.uid=t,e.height!==e.width)throw new RangeError("DEM tiles must be square");if(n&&"mapbox"!==n&&"terrarium"!==n)return G('"'.concat(n,'" is not a valid encoding type. Valid types include "mapbox" and "terrarium".'));this.stride=e.height;const o=this.dim=e.height-2,a=new Uint32Array(e.data.buffer);if(this.pixels=new Uint8Array(e.data.buffer),this.encoding=n||"mapbox",this.borderReady=r,!r){for(let t=0;t<o;t++)a[this._idx(-1,t)]=a[this._idx(0,t)],a[this._idx(o,t)]=a[this._idx(o-1,t)],a[this._idx(t,-1)]=a[this._idx(t,0)],a[this._idx(t,o)]=a[this._idx(t,o-1)];a[this._idx(-1,-1)]=a[this._idx(0,0)],a[this._idx(o,-1)]=a[this._idx(o-1,0)],a[this._idx(-1,o)]=a[this._idx(0,o-1)],a[this._idx(o,o)]=a[this._idx(o-1,o-1)],i&&this._buildQuadTree()}}_buildQuadTree(){this._tree=new Np(this)}get(t,e){arguments.length>2&&void 0!==arguments[2]&&arguments[2]&&(t=A(t,-1,this.dim),e=A(e,-1,this.dim));const n=4*this._idx(t,e);return("terrarium"===this.encoding?qp:Gp)(this.pixels[n],this.pixels[n+1],this.pixels[n+2])}static getUnpackVector(t){return Wp[t]}get unpackVector(){return Wp[this.encoding]}_idx(t,e){if(t<-1||t>=this.dim+1||e<-1||e>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(e+1)*this.stride+(t+1)}static pack(t,e){const n=[0,0,0,0],r=Hp.getUnpackVector(e);let i=Math.floor((t+r[3])/r[2]);return n[2]=i%256,i=Math.floor(i/256),n[1]=i%256,i=Math.floor(i/256),n[0]=i,n}getPixels(){return new Fc({width:this.stride,height:this.stride},this.pixels)}backfillBorder(t,e,n){if(this.dim!==t.dim)throw new Error("dem dimension mismatch");let r=e*this.dim,i=e*this.dim+this.dim,o=n*this.dim,a=n*this.dim+this.dim;switch(e){case-1:r=i-1;break;case 1:i=r+1}switch(n){case-1:o=a-1;break;case 1:a=o+1}const s=-e*this.dim,l=-n*this.dim;for(let c=o;c<a;c++)for(let e=r;e<i;e++){const n=4*this._idx(e,c),r=4*this._idx(e+s,c+l);this.pixels[n+0]=t.pixels[r+0],this.pixels[n+1]=t.pixels[r+1],this.pixels[n+2]=t.pixels[r+2],this.pixels[n+3]=t.pixels[r+3]}}onDeserialize(){this._tree&&(this._tree.dem=this)}}Yi(Hp,"DEMData"),Yi(Np,"DemMinMaxQuadTree",{omit:["dem"]});class Zp{constructor(t,e){this.max=t,this.onRemove=e,this.reset()}reset(){for(const t in this.data)for(const e of this.data[t])e.timeout&&clearTimeout(e.timeout),this.onRemove(e.value);return this.data={},this.order=[],this}add(t,e,n){const r=t.wrapped().key;void 0===this.data[r]&&(this.data[r]=[]);const i={value:e,timeout:void 0};if(void 0!==n&&(i.timeout=setTimeout((()=>{this.remove(t,i)}),n)),this.data[r].push(i),this.order.push(r),this.order.length>this.max){const t=this._getAndRemoveByKey(this.order[0]);t&&this.onRemove(t)}return this}has(t){return t.wrapped().key in this.data}getAndRemove(t){return this.has(t)?this._getAndRemoveByKey(t.wrapped().key):null}_getAndRemoveByKey(t){const e=this.data[t].shift();return e.timeout&&clearTimeout(e.timeout),0===this.data[t].length&&delete this.data[t],this.order.splice(this.order.indexOf(t),1),e.value}getByKey(t){const e=this.data[t];return e?e[0].value:null}get(t){return this.has(t)?this.data[t.wrapped().key][0].value:null}remove(t,e){if(!this.has(t))return this;const n=t.wrapped().key,r=void 0===e?0:this.data[n].indexOf(e),i=this.data[n][r];return this.data[n].splice(r,1),i.timeout&&clearTimeout(i.timeout),0===this.data[n].length&&delete this.data[n],this.onRemove(i.value),this.order.splice(this.order.indexOf(n),1),this}setMaxSize(t){for(this.max=t;this.order.length>this.max;){const t=this._getAndRemoveByKey(this.order[0]);t&&this.onRemove(t)}return this}filter(t){const e=[];for(const n in this.data)for(const r of this.data[n])t(r.value)||e.push(r);for(const n of e)this.remove(n.value.tileID,n)}}class Xp{constructor(t,e,n){this.func=t,this.mask=e,this.range=n}}Xp.ReadOnly=!1,Xp.ReadWrite=!0,Xp.disabled=new Xp(519,Xp.ReadOnly,[0,1]);const Yp=7680;class Kp{constructor(t,e,n,r,i,o){this.test=t,this.ref=e,this.mask=n,this.fail=r,this.depthFail=i,this.pass=o}}Kp.disabled=new Kp({func:519,mask:0},0,0,Yp,Yp,Yp);class $p{constructor(t,e,n){this.blendFunction=t,this.blendColor=e,this.mask=n}}$p.Replace=[1,0],$p.disabled=new $p($p.Replace,Ie.transparent,[!1,!1,!1,!1]),$p.unblended=new $p($p.Replace,Ie.transparent,[!0,!0,!0,!0]),$p.alphaBlended=new $p([1,771],Ie.transparent,[!0,!0,!0,!0]);const Jp=1029,Qp=2305;class tm{constructor(t,e,n){this.enable=t,this.mode=e,this.frontFace=n}}tm.disabled=new tm(!1,Jp,Qp),tm.backCCW=new tm(!0,Jp,Qp),tm.backCW=new tm(!0,Jp,2304),tm.frontCW=new tm(!0,1028,2304),tm.frontCCW=new tm(!0,1028,Qp);class em extends Qt{constructor(t,e,n){super(),this.id=t,this._onlySymbols=n,e.on("data",(t=>{"source"===t.dataType&&"metadata"===t.sourceDataType&&(this._sourceLoaded=!0),this._sourceLoaded&&!this._paused&&"source"===t.dataType&&"content"===t.sourceDataType&&(this.reload(),this.transform&&this.update(this.transform))})),e.on("error",(()=>{this._sourceErrored=!0})),this._source=e,this._tiles={},this._cache=new Zp(0,this._unloadTile.bind(this)),this._timers={},this._cacheTimers={},this._minTileCacheSize=e.minTileCacheSize,this._maxTileCacheSize=e.maxTileCacheSize,this._loadedParentTiles={},this._coveredTiles={},this._state=new jp,this._isRaster="raster"===this._source.type||"raster-dem"===this._source.type||"custom"===this._source.type&&"raster"===this._source._dataType}onAdd(t){this.map=t,this._minTileCacheSize=void 0===this._minTileCacheSize&&t?t._minTileCacheSize:this._minTileCacheSize,this._maxTileCacheSize=void 0===this._maxTileCacheSize&&t?t._maxTileCacheSize:this._maxTileCacheSize}loaded(){if(this._sourceErrored)return!0;if(!this._sourceLoaded)return!1;if(!this._source.loaded())return!1;for(const t in this._tiles){const e=this._tiles[t];if("loaded"!==e.state&&"errored"!==e.state)return!1}return!0}getSource(){return this._source}pause(){this._paused=!0}resume(){if(!this._paused)return;const t=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,t&&this.reload(),this.transform&&this.update(this.transform)}_loadTile(t,e){return t.isSymbolTile=this._onlySymbols,this._source.loadTile(t,e)}_unloadTile(t){if(this._source.unloadTile)return this._source.unloadTile(t,(()=>{}))}_abortTile(t){if(this._source.abortTile)return this._source.abortTile(t,(()=>{}))}serialize(){return this._source.serialize()}prepare(t){this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null);for(const e in this._tiles){const n=this._tiles[e];n.upload(t),n.prepare(this.map.style.imageManager)}}getIds(){return I(this._tiles).map((t=>t.tileID)).sort(nm).map((t=>t.key))}getRenderableIds(t){const e=[];for(const n in this._tiles)this._isIdRenderable(+n,t)&&e.push(this._tiles[n]);return t?e.sort(((t,e)=>{const n=t.tileID,r=e.tileID,i=new v(n.canonical.x,n.canonical.y)._rotate(this.transform.angle),o=new v(r.canonical.x,r.canonical.y)._rotate(this.transform.angle);return n.overscaledZ-r.overscaledZ||o.y-i.y||o.x-i.x})).map((t=>t.tileID.key)):e.map((t=>t.tileID)).sort(nm).map((t=>t.key))}hasRenderableParent(t){const e=this.findLoadedParent(t,0);return!!e&&this._isIdRenderable(e.tileID.key)}_isIdRenderable(t,e){return this._tiles[t]&&this._tiles[t].hasData()&&!this._coveredTiles[t]&&(e||!this._tiles[t].holdingForFade())}reload(){if(this._paused)this._shouldReloadOnResume=!0;else{this._cache.reset();for(const t in this._tiles)"errored"!==this._tiles[t].state&&this._reloadTile(+t,"reloading")}}_reloadTile(t,e){const n=this._tiles[t];n&&("loading"!==n.state&&(n.state=e),this._loadTile(n,this._tileLoaded.bind(this,n,t,e)))}_tileLoaded(t,e,n,r){if(r)if(t.state="errored",404!==r.status)this._source.fire(new Jt(r,{tile:t}));else if("raster-dem"===this._source.type&&this.usedForTerrain&&this.map.painter.terrain){const t=this.map.painter.terrain;this.update(this.transform,t.getScaledDemTileSize(),!0),t.resetTileLookupCache(this.id)}else this.update(this.transform);else t.timeAdded=Xt.now(),"expired"===n&&(t.refreshedUponExpiration=!0),this._setTileReloadTimer(e,t),"raster-dem"===this._source.type&&t.dem&&this._backfillDEM(t),this._state.initializeTileState(t,this.map?this.map.painter:null),this._source.fire(new $t("data",{dataType:"source",tile:t,coord:t.tileID,sourceCacheId:this.id}))}_backfillDEM(t){const e=this.getRenderableIds();for(let r=0;r<e.length;r++){const i=e[r];if(t.neighboringTiles&&t.neighboringTiles[i]){const e=this.getTileByID(i);n(t,e),n(e,t)}}function n(t,e){if(!t.dem||t.dem.borderReady)return;t.needsHillshadePrepare=!0,t.needsDEMTextureUpload=!0;let n=e.tileID.canonical.x-t.tileID.canonical.x;const r=e.tileID.canonical.y-t.tileID.canonical.y,i=Math.pow(2,t.tileID.canonical.z),o=e.tileID.key;0===n&&0===r||Math.abs(r)>1||(Math.abs(n)>1&&(1===Math.abs(n+i)?n+=i:1===Math.abs(n-i)&&(n-=i)),e.dem&&t.dem&&(t.dem.backfillBorder(e.dem,n,r),t.neighboringTiles&&t.neighboringTiles[o]&&(t.neighboringTiles[o].backfilled=!0)))}}getTile(t){return this.getTileByID(t.key)}getTileByID(t){return this._tiles[t]}_retainLoadedChildren(t,e,n,r){for(const i in this._tiles){let o=this._tiles[i];if(r[i]||!o.hasData()||o.tileID.overscaledZ<=e||o.tileID.overscaledZ>n)continue;let a=o.tileID;for(;o&&o.tileID.overscaledZ>e+1;){const t=o.tileID.scaledTo(o.tileID.overscaledZ-1);o=this._tiles[t.key],o&&o.hasData()&&(a=t)}let s=a;for(;s.overscaledZ>e;)if(s=s.scaledTo(s.overscaledZ-1),t[s.key]){r[a.key]=a;break}}}findLoadedParent(t,e){if(t.key in this._loadedParentTiles){const n=this._loadedParentTiles[t.key];return n&&n.tileID.overscaledZ>=e?n:null}for(let n=t.overscaledZ-1;n>=e;n--){const e=t.scaledTo(n),r=this._getLoadedTile(e);if(r)return r}}_getLoadedTile(t){const e=this._tiles[t.key];return e&&e.hasData()?e:this._cache.getByKey(this._source.reparseOverscaled?t.wrapped().key:t.canonical.key)}updateCacheSize(t,e){e=e||this._source.tileSize;const n=Math.ceil(t.width/e)+1,r=Math.ceil(t.height/e)+1,i=Math.floor(n*r*5),o="number"==typeof this._minTileCacheSize?Math.max(this._minTileCacheSize,i):i,a="number"==typeof this._maxTileCacheSize?Math.min(this._maxTileCacheSize,o):o;this._cache.setMaxSize(a)}handleWrapJump(t){const e=Math.round((t-(void 0===this._prevLng?t:this._prevLng))/360);if(this._prevLng=t,e){const t={};for(const n in this._tiles){const r=this._tiles[n];r.tileID=r.tileID.unwrapTo(r.tileID.wrap+e),t[r.tileID.key]=r}this._tiles=t;for(const e in this._timers)clearTimeout(this._timers[e]),delete this._timers[e];for(const e in this._tiles)this._setTileReloadTimer(+e,this._tiles[e])}}update(t,e,n){if(this.transform=t,!this._sourceLoaded||this._paused||this.transform.freezeTileCoverage)return;if(this.usedForTerrain&&!n)return;let r;this.updateCacheSize(t,e),"globe"!==this.transform.projection.name&&this.handleWrapJump(this.transform.center.lng),this._coveredTiles={},this.used||this.usedForTerrain?this._source.tileID?r=t.getVisibleUnwrappedCoordinates(this._source.tileID).map((t=>new ph(t.canonical.z,t.wrap,t.canonical.z,t.canonical.x,t.canonical.y))):(r=t.coveringTiles({tileSize:e||this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom&&!n,reparseOverscaled:this._source.reparseOverscaled,isTerrainDEM:this.usedForTerrain}),this._source.hasTile&&(r=r.filter((t=>this._source.hasTile(t))))):r=[];const i=this._updateRetainedTiles(r);if(rm(this._source.type)&&0!==r.length){const t={},e={},n=Object.keys(i);for(const r of n){const n=i[r],o=this._tiles[r];if(!o||o.fadeEndTime&&o.fadeEndTime<=Xt.now())continue;const a=this.findLoadedParent(n,Math.max(n.overscaledZ-em.maxOverzooming,this._source.minzoom));a&&(this._addTile(a.tileID),t[a.tileID.key]=a.tileID),e[r]=n}const o=r[r.length-1].overscaledZ;for(const r in this._tiles){const t=this._tiles[r];if(i[r]||!t.hasData())continue;let n=t.tileID;for(;n.overscaledZ>o;){n=n.scaledTo(n.overscaledZ-1);const o=this._tiles[n.key];if(o&&o.hasData()&&e[n.key]){i[r]=t.tileID;break}}}for(const r in t)i[r]||(this._coveredTiles[r]=!0,i[r]=t[r])}for(const a in i)this._tiles[a].clearFadeHold();const o=function(t,e){const n=[];for(const r in t)r in e||n.push(r);return n}(this._tiles,i);for(const a of o){const t=this._tiles[a];t.hasSymbolBuckets&&!t.holdingForFade()?t.setHoldDuration(this.map._fadeDuration):t.hasSymbolBuckets&&!t.symbolFadeFinished()||this._removeTile(+a)}this._updateLoadedParentTileCache(),this._onlySymbols&&this._source.afterUpdate&&this._source.afterUpdate()}releaseSymbolFadeTiles(){for(const t in this._tiles)this._tiles[t].holdingForFade()&&this._removeTile(+t)}_updateRetainedTiles(t){const e={};if(0===t.length)return e;const n={},r=t.reduce(((t,e)=>Math.min(t,e.overscaledZ)),1/0),i=t[0].overscaledZ,o=Math.max(i-em.maxOverzooming,this._source.minzoom),a=Math.max(i+em.maxUnderzooming,this._source.minzoom),s={};for(const l of t){const t=this._addTile(l);e[l.key]=l,t.hasData()||r<this._source.maxzoom&&(s[l.key]=l)}this._retainLoadedChildren(s,r,a,e);for(const l of t){let t=this._tiles[l.key];if(t.hasData())continue;if(l.canonical.z>=this._source.maxzoom){const t=l.children(this._source.maxzoom)[0],n=this.getTile(t);if(n&&n.hasData()){e[t.key]=t;continue}}else{const t=l.children(this._source.maxzoom);if(e[t[0].key]&&e[t[1].key]&&e[t[2].key]&&e[t[3].key])continue}let r=t.wasRequested();for(let i=l.overscaledZ-1;i>=o;--i){const o=l.scaledTo(i);if(n[o.key])break;if(n[o.key]=!0,t=this.getTile(o),!t&&r&&(t=this._addTile(o)),t&&(e[o.key]=o,r=t.wasRequested(),t.hasData()))break}}return e}_updateLoadedParentTileCache(){this._loadedParentTiles={};for(const t in this._tiles){const e=[];let n,r=this._tiles[t].tileID;for(;r.overscaledZ>0;){if(r.key in this._loadedParentTiles){n=this._loadedParentTiles[r.key];break}e.push(r.key);const t=r.scaledTo(r.overscaledZ-1);if(n=this._getLoadedTile(t),n)break;r=t}for(const t of e)this._loadedParentTiles[t]=n}}_addTile(t){let e=this._tiles[t.key];if(e)return e;e=this._cache.getAndRemove(t),e&&(this._setTileReloadTimer(t.key,e),e.tileID=t,this._state.initializeTileState(e,this.map?this.map.painter:null),this._cacheTimers[t.key]&&(clearTimeout(this._cacheTimers[t.key]),delete this._cacheTimers[t.key],this._setTileReloadTimer(t.key,e)));const n=Boolean(e);if(!n){const n=this.map?this.map.painter:null;e=new Lp(t,this._source.tileSize*t.overscaleFactor(),this.transform.tileZoom,n,this._isRaster),this._loadTile(e,this._tileLoaded.bind(this,e,t.key,e.state))}return e?(e.uses++,this._tiles[t.key]=e,n||this._source.fire(new $t("dataloading",{tile:e,coord:e.tileID,dataType:"source"})),e):null}_setTileReloadTimer(t,e){t in this._timers&&(clearTimeout(this._timers[t]),delete this._timers[t]);const n=e.getExpiryTimeout();n&&(this._timers[t]=setTimeout((()=>{this._reloadTile(t,"expired"),delete this._timers[t]}),n))}_removeTile(t){const e=this._tiles[t];e&&(e.uses--,delete this._tiles[t],this._timers[t]&&(clearTimeout(this._timers[t]),delete this._timers[t]),e.uses>0||(e.hasData()&&"reloading"!==e.state?this._cache.add(e.tileID,e,e.getExpiryTimeout()):(e.aborted=!0,this._abortTile(e),this._unloadTile(e))))}clearTiles(){this._shouldReloadOnResume=!1,this._paused=!1;for(const t in this._tiles)this._removeTile(+t);this._source._clear&&this._source._clear(),this._cache.reset(),this.map&&this.usedForTerrain&&this.map.painter.terrain&&this.map.painter.terrain.resetTileLookupCache(this.id)}tilesIn(t,e,n){const r=[],i=this.transform;if(!i)return r;const o="globe"===i.projection.name,a=Gl(i.center.lng);for(const s in this._tiles){const l=this._tiles[s];if(n&&l.clearQueryDebugViz(),l.holdingForFade())continue;let c;if(o){const t=l.tileID.canonical;if(0===t.z){const e=[Math.abs(A(a,...im(t,-1))-a),Math.abs(A(a,...im(t,1))-a)];c=[0,2*e.indexOf(Math.min(...e))-1]}else{const e=[Math.abs(A(a,...im(t,-1))-a),Math.abs(A(a,...im(t,0))-a),Math.abs(A(a,...im(t,1))-a)];c=[e.indexOf(Math.min(...e))-1]}}else c=[0];for(const n of c){const o=t.containsTile(l,i,e,n);o&&r.push(o)}}return r}getVisibleCoordinates(t){const e=this.getRenderableIds(t).map((t=>this._tiles[t].tileID));for(const n of e)n.projMatrix=this.transform.calculateProjMatrix(n.toUnwrapped());return e}hasTransition(){if(this._source.hasTransition())return!0;if(rm(this._source.type))for(const t in this._tiles){const e=this._tiles[t];if(void 0!==e.fadeEndTime&&e.fadeEndTime>=Xt.now())return!0}return!1}setFeatureState(t,e,n){this._state.updateState(t=t||"_geojsonTileLayer",e,n)}removeFeatureState(t,e,n){this._state.removeFeatureState(t=t||"_geojsonTileLayer",e,n)}getFeatureState(t,e){return this._state.getState(t=t||"_geojsonTileLayer",e)}setDependencies(t,e,n){const r=this._tiles[t];r&&r.setDependencies(e,n)}reloadTilesForDependencies(t,e){for(const n in this._tiles)this._tiles[n].hasDependency(t,e)&&this._reloadTile(+n,"reloading");this._cache.filter((n=>!n.hasDependency(t,e)))}_preloadTiles(t,e){if(!this._sourceLoaded){const n=()=>{this._sourceLoaded&&(this._source.off("data",n),this._preloadTiles(t,e))};return void this._source.on("data",n)}const n=new Map,r=Array.isArray(t)?t:[t],i=this.map.painter.terrain,o=this.usedForTerrain&&i?i.getScaledDemTileSize():this._source.tileSize;for(const a of r){const t=a.coveringTiles({tileSize:o,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom&&!this.usedForTerrain,reparseOverscaled:this._source.reparseOverscaled,isTerrainDEM:this.usedForTerrain});for(const e of t)n.set(e.key,e);this.usedForTerrain&&a.updateElevation(!1)}k(Array.from(n.values()),((t,e)=>{const n=new Lp(t,this._source.tileSize*t.overscaleFactor(),this.transform.tileZoom,this.map.painter,this._isRaster);this._loadTile(n,(t=>{"raster-dem"===this._source.type&&n.dem&&this._backfillDEM(n),e(t,n)}))}),e)}}function nm(t,e){const n=Math.abs(2*t.wrap)-+(t.wrap<0),r=Math.abs(2*e.wrap)-+(e.wrap<0);return t.overscaledZ-e.overscaledZ||r-n||e.canonical.y-t.canonical.y||e.canonical.x-t.canonical.x}function rm(t){return"raster"===t||"image"===t||"video"===t||"custom"===t}function im(t,e){const n=1<<t.z;return[t.x/n+e,(t.x+1)/n+e]}em.maxOverzooming=10,em.maxUnderzooming=3;class om{constructor(t,e,n){this._demTile=t,this._dem=this._demTile.dem,this._scale=e,this._offset=n}static create(t,e,n){const r=n||t.findDEMTileFor(e);if(!r||!r.dem)return;const i=r.dem,o=r.tileID,a=1<<e.canonical.z-o.canonical.z;return new om(r,r.tileSize/ss/a,[(e.canonical.x/a-o.canonical.x)*i.dim,(e.canonical.y/a-o.canonical.y)*i.dim])}tileCoordToPixel(t,e){const n=e*this._scale+this._offset[1],r=Math.floor(t*this._scale+this._offset[0]),i=Math.floor(n);return new v(r,i)}getElevationAt(t,e,n,r){const i=t*this._scale+this._offset[0],o=e*this._scale+this._offset[1],a=Math.floor(i),s=Math.floor(o),l=this._dem;return r=!!r,n?On(On(l.get(a,s,r),l.get(a,s+1,r),o-s),On(l.get(a+1,s,r),l.get(a+1,s+1,r),o-s),i-a):l.get(a,s,r)}getElevationAtPixel(t,e,n){return this._dem.get(t,e,!!n)}getMeterToDEM(t){return(1<<this._demTile.tileID.canonical.z)*Hl(1,t)*this._dem.stride}}class am{constructor(t,e){this.tileID=t,this.x=t.canonical.x,this.y=t.canonical.y,this.z=t.canonical.z,this.grid=new Zi(ss,16,0),this.featureIndexArray=new xa,this.promoteId=e}insert(t,e,n,r,i){let o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0;const a=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(n,r,i,o);const s=this.grid;for(let l=0;l<e.length;l++){const t=e[l],n=[1/0,1/0,-1/0,-1/0];for(let e=0;e<t.length;e++){const r=t[e];n[0]=Math.min(n[0],r.x),n[1]=Math.min(n[1],r.y),n[2]=Math.max(n[2],r.x),n[3]=Math.max(n[3],r.y)}n[0]<ss&&n[1]<ss&&n[2]>=0&&n[3]>=0&&s.insert(a,n[0],n[1],n[2],n[3])}}loadVTLayers(){if(!this.vtLayers){this.vtLayers=new Hu(new gd(this.rawTileData)).layers,this.sourceLayerCoder=new xp(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"]),this.vtFeatures={};for(const t in this.vtLayers)this.vtFeatures[t]=[]}return this.vtLayers}query(t,e,n,r){var i=this;this.loadVTLayers();const o=t.params||{},a=hi(o.filter),s=t.tileResult,l=t.transform,c=s.bufferedTilespaceBounds,u=this.grid.query(c.min.x,c.min.y,c.max.x,c.max.y,((t,e,n,r)=>xc(s.bufferedTilespaceGeometry,t,e,n,r)));u.sort(lm);let h=null;l.elevation&&u.length>0&&(h=om.create(l.elevation,this.tileID));const d={};let f;for(let p=0;p<u.length;p++){const l=u[p];if(l===f)continue;f=l;const c=this.featureIndexArray.get(l);let m=null;this.loadMatchingFeature(d,c,a,o.layers,o.availableImages,e,n,r,(function(e,n,r){let o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;return m||(m=ac(e,i.tileID.canonical,t.tileTransform)),n.queryIntersectsFeature(s,e,r,m,i.z,t.transform,t.pixelPosMatrix,h,o)}))}return d}loadMatchingFeature(t,e,n,r,i,o,a,s,l){const{featureIndex:c,bucketIndex:u,sourceLayerIndex:h,layoutVertexArrayOffset:d}=e,f=this.bucketLayerIDs[u];if(r&&!function(t,e){for(let n=0;n<t.length;n++)if(e.indexOf(t[n])>=0)return!0;return!1}(r,f))return;const p=this.sourceLayerCoder.decode(h),m=this.vtLayers[p].feature(c);if(n.needGeometry){const t=sc(m,!0);if(!n.filter(new wo(this.tileID.overscaledZ),t,this.tileID.canonical))return}else if(!n.filter(new wo(this.tileID.overscaledZ),m))return;const g=this.getId(m,p);for(let y=0;y<f.length;y++){const e=f[y];if(r&&r.indexOf(e)<0)continue;const n=o[e];if(!n)continue;let u={};void 0!==g&&s&&(u=s.getState(n.sourceLayer||"_geojsonTileLayer",g));const h=O({},a[e]);h.paint=sm(h.paint,n.paint,m,u,i),h.layout=sm(h.layout,n.layout,m,u,i);const p=!l||l(m,n,u,d);if(!p)continue;const v=new Sp(m,this.z,this.x,this.y,g);v.layer=h;let _=t[e];void 0===_&&(_=t[e]=[]),_.push({featureIndex:c,feature:v,intersectionZ:p})}}lookupSymbolFeatures(t,e,n,r,i,o,a,s){const l={};this.loadVTLayers();const c=hi(i);for(const u of t)this.loadMatchingFeature(l,{bucketIndex:n,sourceLayerIndex:r,featureIndex:u,layoutVertexArrayOffset:0},c,o,a,s,e);return l}loadFeature(t){const{featureIndex:e,sourceLayerIndex:n}=t;this.loadVTLayers();const r=this.sourceLayerCoder.decode(n),i=this.vtFeatures[r];if(i[e])return i[e];const o=this.vtLayers[r].feature(e);return i[e]=o,o}hasLayer(t){for(const e of this.bucketLayerIDs)for(const n of e)if(t===n)return!0;return!1}getId(t,e){let n=t.id;if(this.promoteId){const r="string"==typeof this.promoteId?this.promoteId:this.promoteId[e];null!=r&&(n=t.properties[r]),"boolean"==typeof n&&(n=Number(n))}return n}}function sm(t,e,n,r,i){return N(t,((t,o)=>{const a=e instanceof ko?e.get(o):null;return a&&a.evaluate?a.evaluate(n,r,i):a}))}function lm(t,e){return e-t}Yi(am,"FeatureIndex",{omit:["rawTileData","sourceLayerCoder"]});class cm{constructor(t,e){this.width=t,this.height=e,this.nextRow=0,this.image=new Bc({width:t,height:e}),this.positions={},this.uploaded=!1}getDash(t,e){const n=this.getKey(t,e);return this.positions[n]}trim(){const t=this.width,e=this.height=R(this.nextRow);this.image.resize({width:t,height:e})}getKey(t,e){return t.join(",")+e}getDashRanges(t,e,n){const r=[];let i=t.length%2==1?-t[t.length-1]*n:0,o=t[0]*n,a=!0;r.push({left:i,right:o,isDash:a,zeroLength:0===t[0]});let s=t[0];for(let l=1;l<t.length;l++){a=!a;const e=t[l];i=s*n,s+=e,o=s*n,r.push({left:i,right:o,isDash:a,zeroLength:0===e})}return r}addRoundDash(t,e,n){const r=e/2;for(let i=-n;i<=n;i++){const e=this.width*(this.nextRow+n+i);let o=0,a=t[o];for(let s=0;s<this.width;s++){s/a.right>1&&(a=t[++o]);const l=Math.abs(s-a.left),c=Math.abs(s-a.right),u=Math.min(l,c);let h;const d=i/n*(r+1);if(a.isDash){const t=r-Math.abs(d);h=Math.sqrt(u*u+t*t)}else h=r-Math.sqrt(u*u+d*d);this.image.data[e+s]=Math.max(0,Math.min(255,h+128))}}}addRegularDash(t,e){for(let s=t.length-1;s>=0;--s){const e=t[s],n=t[s+1];e.zeroLength?t.splice(s,1):n&&n.isDash===e.isDash&&(n.left=e.left,t.splice(s,1))}const n=t[0],r=t[t.length-1];n.isDash===r.isDash&&(n.left=r.left-this.width,r.right=n.right+this.width);const i=this.width*this.nextRow;let o=0,a=t[o];for(let s=0;s<this.width;s++){s/a.right>1&&(a=t[++o]);const n=Math.abs(s-a.left),r=Math.abs(s-a.right),l=Math.min(n,r);this.image.data[i+s]=Math.max(0,Math.min(255,(a.isDash?l:-l)+e+128))}}addDash(t,e){const n=this.getKey(t,e);if(this.positions[n])return this.positions[n];const r="round"===e,i=r?7:0,o=2*i+1;if(this.nextRow+o>this.height)return G("LineAtlas out of space"),null;0===t.length&&t.push(1);let a=0;for(let c=0;c<t.length;c++)t[c]<0&&(G("Negative value is found in line dasharray, replacing values with 0"),t[c]=0),a+=t[c];if(0!==a){const n=this.width/a,o=this.getDashRanges(t,this.width,n);r?this.addRoundDash(o,n,i):this.addRegularDash(o,"square"===e?.5*n:0)}const s=this.nextRow+i;this.nextRow+=o;const l={tl:[s,i],br:[a,0]};return this.positions[n]=l,l}}Yi(cm,"LineAtlas");const um=1*tf;class hm{constructor(t){const e={},n=[];for(const a in t){const r=t[a],i=e[a]={};for(const t in r.glyphs){const e=r.glyphs[+t];if(!e||0===e.bitmap.width||0===e.bitmap.height)continue;const o=e.metrics.localGlyph?um:1,a={x:0,y:0,w:e.bitmap.width+2*o,h:e.bitmap.height+2*o};n.push(a),i[t]=a}}const{w:r,h:i}=wd(n),o=new Bc({width:r||1,height:i||1});for(const a in t){const n=t[a];for(const t in n.glyphs){const r=n.glyphs[+t];if(!r||0===r.bitmap.width||0===r.bitmap.height)continue;const i=e[a][t],s=r.metrics.localGlyph?um:1;Bc.copy(r.bitmap,o,{x:0,y:0},{x:i.x+s,y:i.y+s},r.bitmap)}}this.image=o,this.positions=e}}Yi(hm,"GlyphAtlas");class dm{constructor(t){this.tileID=new ph(t.tileID.overscaledZ,t.tileID.wrap,t.tileID.canonical.z,t.tileID.canonical.x,t.tileID.canonical.y),this.tileZoom=t.tileZoom,this.uid=t.uid,this.zoom=t.zoom,this.canonical=t.tileID.canonical,this.pixelRatio=t.pixelRatio,this.tileSize=t.tileSize,this.source=t.source,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=t.showCollisionBoxes,this.collectResourceTiming=!!t.collectResourceTiming,this.returnDependencies=!!t.returnDependencies,this.promoteId=t.promoteId,this.enableTerrain=!!t.enableTerrain,this.isSymbolTile=t.isSymbolTile,this.tileTransform=If(t.tileID.canonical,t.projection),this.projection=t.projection}parse(t,e,n,r,i){this.status="parsing",this.data=t,this.collisionBoxArray=new fa;const o=new xp(Object.keys(t.layers).sort()),a=new am(this.tileID,this.promoteId);a.bucketLayerIDs=[];const s={},l=new cm(256,256),c={featureIndex:a,iconDependencies:{},patternDependencies:{},glyphDependencies:{},lineAtlas:l,availableImages:n},u=e.familiesBySource[this.source];for(const b in u){const e=t.layers[b];if(!e)continue;let r=!1,i=!1;for(const t of u[b])"symbol"===t[0].type?r=!0:i=!0;if(!0===this.isSymbolTile&&!r)continue;if(!1===this.isSymbolTile&&!i)continue;1===e.version&&G('Vector tile source "'.concat(this.source,'" layer "').concat(b,'" does not use vector tile spec v2 and therefore may have some rendering errors.'));const l=o.encode(b),h=[];for(let t=0;t<e.length;t++){const n=e.feature(t),r=a.getId(n,b);h.push({feature:n,id:r,index:t,sourceLayerIndex:l})}for(const t of u[b]){const e=t[0];void 0!==this.isSymbolTile&&"symbol"===e.type!==this.isSymbolTile||e.minzoom&&this.zoom<Math.floor(e.minzoom)||e.maxzoom&&this.zoom>=e.maxzoom||"none"!==e.visibility&&(fm(t,this.zoom,n),(s[e.id]=e.createBucket({index:a.bucketLayerIDs.length,layers:t,zoom:this.zoom,canonical:this.canonical,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:l,sourceID:this.source,enableTerrain:this.enableTerrain,projection:this.projection.spec,availableImages:n})).populate(h,c,this.tileID.canonical,this.tileTransform),a.bucketLayerIDs.push(t.map((t=>t.id))))}}let h,d,f,p;l.trim();const m={type:"maybePrepare",isSymbolTile:this.isSymbolTile,zoom:this.zoom},g=()=>{if(h)return i(h);if(d&&f&&p){const t=new hm(d),e=new Td(f,p);for(const r in s){const i=s[r];i instanceof sp?(fm(i.layers,this.zoom,n),bf(i,d,t.positions,f,e.iconPositions,this.showCollisionBoxes,n,this.tileID.canonical,this.tileZoom,this.projection)):i.hasPattern&&(i instanceof Mh||i instanceof Au||i instanceof th)&&(fm(i.layers,this.zoom,n),i.addFeatures(c,this.tileID.canonical,e.patternPositions,n,this.tileTransform))}this.status="done",i(null,{buckets:I(s).filter((t=>!t.isEmpty())),featureIndex:a,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:t.image,lineAtlas:l,imageAtlas:e,glyphMap:this.returnDependencies?d:null,iconMap:this.returnDependencies?f:null,glyphPositions:this.returnDependencies?t.positions:null})}},y=N(c.glyphDependencies,(t=>Object.keys(t).map(Number)));Object.keys(y).length?r.send("getGlyphs",{uid:this.uid,stacks:y},((t,e)=>{h||(h=t,d=e,g())}),void 0,!1,m):d={};const v=Object.keys(c.iconDependencies);v.length?r.send("getImages",{icons:v,source:this.source,tileID:this.tileID,type:"icons"},((t,e)=>{h||(h=t,f=e,g())}),void 0,!1,m):f={};const _=Object.keys(c.patternDependencies);_.length?r.send("getImages",{icons:_,source:this.source,tileID:this.tileID,type:"patterns"},((t,e)=>{h||(h=t,p=e,g())}),void 0,!1,m):p={},g()}}function fm(t,e,n){const r=new wo(e);for(const i of t)i.recalculate(r,n)}class pm{constructor(t){this.entries={},this.scheduler=t}request(t,e,n,r){const i=this.entries[t]=this.entries[t]||{callbacks:[]};if(i.result){const[t,n]=i.result;return this.scheduler?this.scheduler.add((()=>{r(t,n)}),e):r(t,n),()=>{}}return i.callbacks.push(r),i.cancel||(i.cancel=n(((n,r)=>{i.result=[n,r];for(const t of i.callbacks)this.scheduler?this.scheduler.add((()=>{t(n,r)}),e):t(n,r);setTimeout((()=>delete this.entries[t]),3e3)}))),()=>{i.result||(i.callbacks=i.callbacks.filter((t=>t!==r)),i.callbacks.length||(i.cancel(),delete this.entries[t]))}}}function mm(t,e,n){const r=JSON.stringify(t.request);return t.data&&(this.deduped.entries[r]={result:[null,t.data]}),this.deduped.request(r,{type:"parseTile",isSymbolTile:t.isSymbolTile,zoom:t.tileZoom},(e=>{const r=dt(t.request,((t,r,i,o)=>{t?e(t):r&&e(null,{vectorTile:n?void 0:new Hu(new gd(r)),rawData:r,cacheControl:i,expires:o})}));return()=>{r.cancel(),e()}}),e)}const gm=[Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array];class ym{static from(t){if(!(t instanceof ArrayBuffer))throw new Error("Data must be an instance of ArrayBuffer.");const[e,n]=new Uint8Array(t,0,2);if(219!==e)throw new Error("Data does not appear to be in a KDBush format.");const r=n>>4;if(1!==r)throw new Error("Got v".concat(r," data when expected v1."));const i=gm[15&n];if(!i)throw new Error("Unrecognized array type.");const[o]=new Uint16Array(t,2,1),[a]=new Uint32Array(t,4,1);return new ym(a,o,i,t)}constructor(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:64,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Float64Array,r=arguments.length>3?arguments[3]:void 0;if(isNaN(t)||t<0)throw new Error("Unpexpected numItems value: ".concat(t,"."));this.numItems=+t,this.nodeSize=Math.min(Math.max(+e,2),65535),this.ArrayType=n,this.IndexArrayType=t<65536?Uint16Array:Uint32Array;const i=gm.indexOf(this.ArrayType),o=2*t*this.ArrayType.BYTES_PER_ELEMENT,a=t*this.IndexArrayType.BYTES_PER_ELEMENT,s=(8-a%8)%8;if(i<0)throw new Error("Unexpected typed array class: ".concat(n,"."));r&&r instanceof ArrayBuffer?(this.data=r,this.ids=new this.IndexArrayType(this.data,8,t),this.coords=new this.ArrayType(this.data,8+a+s,2*t),this._pos=2*t,this._finished=!0):(this.data=new ArrayBuffer(8+o+a+s),this.ids=new this.IndexArrayType(this.data,8,t),this.coords=new this.ArrayType(this.data,8+a+s,2*t),this._pos=0,this._finished=!1,new Uint8Array(this.data,0,2).set([219,16+i]),new Uint16Array(this.data,2,1)[0]=e,new Uint32Array(this.data,4,1)[0]=t)}add(t,e){const n=this._pos>>1;return this.ids[n]=n,this.coords[this._pos++]=t,this.coords[this._pos++]=e,n}finish(){const t=this._pos>>1;if(t!==this.numItems)throw new Error("Added ".concat(t," items when expected ").concat(this.numItems,"."));return vm(this.ids,this.coords,this.nodeSize,0,this.numItems-1,0),this._finished=!0,this}range(t,e,n,r){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:i,coords:o,nodeSize:a}=this,s=[0,i.length-1,0],l=[];for(;s.length;){const c=s.pop()||0,u=s.pop()||0,h=s.pop()||0;if(u-h<=a){for(let a=h;a<=u;a++){const s=o[2*a],c=o[2*a+1];s>=t&&s<=n&&c>=e&&c<=r&&l.push(i[a])}continue}const d=h+u>>1,f=o[2*d],p=o[2*d+1];f>=t&&f<=n&&p>=e&&p<=r&&l.push(i[d]),(0===c?t<=f:e<=p)&&(s.push(h),s.push(d-1),s.push(1-c)),(0===c?n>=f:r>=p)&&(s.push(d+1),s.push(u),s.push(1-c))}return l}within(t,e,n){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:r,coords:i,nodeSize:o}=this,a=[0,r.length-1,0],s=[],l=n*n;for(;a.length;){const c=a.pop()||0,u=a.pop()||0,h=a.pop()||0;if(u-h<=o){for(let n=h;n<=u;n++)wm(i[2*n],i[2*n+1],t,e)<=l&&s.push(r[n]);continue}const d=h+u>>1,f=i[2*d],p=i[2*d+1];wm(f,p,t,e)<=l&&s.push(r[d]),(0===c?t-n<=f:e-n<=p)&&(a.push(h),a.push(d-1),a.push(1-c)),(0===c?t+n>=f:e+n>=p)&&(a.push(d+1),a.push(u),a.push(1-c))}return s}}function vm(t,e,n,r,i,o){if(i-r<=n)return;const a=r+i>>1;_m(t,e,a,r,i,o),vm(t,e,n,r,a-1,1-o),vm(t,e,n,a+1,i,1-o)}function _m(t,e,n,r,i,o){for(;i>r;){if(i-r>600){const a=i-r+1,s=n-r+1,l=Math.log(a),c=.5*Math.exp(2*l/3),u=.5*Math.sqrt(l*c*(a-c)/a)*(s-a/2<0?-1:1);_m(t,e,n,Math.max(r,Math.floor(n-s*c/a+u)),Math.min(i,Math.floor(n+(a-s)*c/a+u)),o)}const a=e[2*n+o];let s=r,l=i;for(bm(t,e,r,n),e[2*i+o]>a&&bm(t,e,r,i);s<l;){for(bm(t,e,s,l),s++,l--;e[2*s+o]<a;)s++;for(;e[2*l+o]>a;)l--}e[2*r+o]===a?bm(t,e,r,l):(l++,bm(t,e,l,i)),l<=n&&(r=l+1),n<=l&&(i=l-1)}}function bm(t,e,n,r){xm(t,n,r),xm(e,2*n,2*r),xm(e,2*n+1,2*r+1)}function xm(t,e,n){const r=t[e];t[e]=t[n],t[n]=r}function wm(t,e,n,r){const i=t-n,o=e-r;return i*i+o*o}t.ARRAY_TYPE=us,t.AUTH_ERR_MSG=vt,t.Aabb=il,t.Actor=class{constructor(t,n,r){this.target=t,this.parent=n,this.mapId=r,this.callbacks={},this.cancelCallbacks={},B(["receive"],this),this.target.addEventListener("message",this.receive,!1),this.globalScope=Z()?t:e,this.scheduler=new bp}send(t,e,n,r){let i=arguments.length>4&&void 0!==arguments[4]&&arguments[4],o=arguments.length>5?arguments[5]:void 0;const a=Math.round(1e18*Math.random()).toString(36).substring(0,10);n&&(n.metadata=o,this.callbacks[a]=n);const s=K(this.globalScope)?void 0:[];return this.target.postMessage({id:a,type:t,hasCallback:!!n,targetMapId:r,mustQueue:i,sourceMapId:this.mapId,data:Ji(e,s)},s),{cancel:()=>{n&&delete this.callbacks[a],this.target.postMessage({id:a,type:"<cancel>",targetMapId:r,sourceMapId:this.mapId})}}}receive(t){const e=t.data,n=e.id;if(n&&(!e.targetMapId||this.mapId===e.targetMapId))if("<cancel>"===e.type){const t=this.cancelCallbacks[n];delete this.cancelCallbacks[n],t&&t.cancel()}else if(e.mustQueue||Z()){const t=this.callbacks[n];this.cancelCallbacks[n]=this.scheduler.add((()=>this.processTask(n,e)),t&&t.metadata||{type:"message"})}else this.processTask(n,e)}processTask(t,e){if("<response>"===e.type){const n=this.callbacks[t];delete this.callbacks[t],n&&(e.error?n(Qi(e.error)):n(null,Qi(e.data)))}else{const n=K(this.globalScope)?void 0:[],r=e.hasCallback?(e,r)=>{delete this.cancelCallbacks[t],this.target.postMessage({id:t,type:"<response>",sourceMapId:this.mapId,error:e?Ji(e):null,data:Ji(r,n)},n)}:t=>{},i=Qi(e.data);if(this.parent[e.type])this.parent[e.type](e.sourceMapId,i,r);else if(this.parent.getWorkerSource){const t=e.type.split(".");this.parent.getWorkerSource(e.sourceMapId,t[0],i.source)[t[1]](i,r)}else r(new Error("Could not find function ".concat(e.type)))}}remove(){this.scheduler.remove(),this.target.removeEventListener("message",this.receive,!1)}},t.CanonicalTileID=dh,t.Color=Ie,t.ColorMode=$p,t.CullFaceMode=tm,t.DEMData=Hp,t.DataConstantProperty=Io,t.DedupedRequest=pm,t.DepthMode=Xp,t.EXTENT=ss,t.Elevation=class{isDataAvailableAtPoint(t){const e=this._source();if(this.isUsingMockSource()||!e||t.y<0||t.y>1)return!1;const n=e.getSource().maxzoom,r=1<<n,i=Math.floor(t.x),o=Math.floor((t.x-i)*r),a=Math.floor(t.y*r),s=this.findDEMTileFor(new ph(n,i,n,o,a));return!(!s||!s.dem)}getAtPointOrZero(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.getAtPoint(t,e)||0}getAtPoint(t,e){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(this.isUsingMockSource())return null;null==e&&(e=null);const r=this._source();if(!r)return e;if(t.y<0||t.y>1)return e;const i=r.getSource().maxzoom,o=1<<i,a=Math.floor(t.x),s=t.x-a,l=new ph(i,a,i,Math.floor(s*o),Math.floor(t.y*o)),c=this.findDEMTileFor(l);if(!c||!c.dem)return e;const u=c.dem,h=1<<c.tileID.canonical.z,d=(s*h-c.tileID.canonical.x)*u.dim,f=(t.y*h-c.tileID.canonical.y)*u.dim,p=Math.floor(d),m=Math.floor(f);return(n?this.exaggeration():1)*On(On(u.get(p,m),u.get(p,m+1),f-m),On(u.get(p+1,m),u.get(p+1,m+1),f-m),d-p)}getAtTileOffset(t,e,n){const r=1<<t.canonical.z;return this.getAtPointOrZero(new Jl(t.wrap+(t.canonical.x+e/ss)/r,(t.canonical.y+n/ss)/r))}getAtTileOffsetFunc(t,e,n,r){return i=>{const o=this.getAtTileOffset(t,i.x,i.y),a=r.upVector(t.canonical,i.x,i.y);return Os(a,a,o*r.upVectorScale(t.canonical,e,n).metersToTile),a}}getForTilePoints(t,e,n,r){if(this.isUsingMockSource())return!1;const i=om.create(this,t,r);return!!i&&(e.forEach((t=>{t[2]=this.exaggeration()*i.getElevationAt(t[0],t[1],n)})),!0)}getMinMaxForTile(t){if(this.isUsingMockSource())return null;const e=this.findDEMTileFor(t);if(!e||!e.dem)return null;const n=e.dem.tree,r=e.tileID,i=1<<t.canonical.z-r.canonical.z;let o=t.canonical.x/i-r.canonical.x,a=t.canonical.y/i-r.canonical.y,s=0;for(let l=0;l<t.canonical.z-r.canonical.z&&!n.leaves[s];l++){o*=2,a*=2;const t=2*Math.floor(a)+Math.floor(o);s=n.childOffsets[s]+t,o%=1,a%=1}return{min:this.exaggeration()*n.minimums[s],max:this.exaggeration()*n.maximums[s]}}getMinElevationBelowMSL(){throw new Error("Pure virtual method called.")}raycast(t,e,n){throw new Error("Pure virtual method called.")}pointCoordinate(t){throw new Error("Pure virtual method called.")}_source(){throw new Error("Pure virtual method called.")}isUsingMockSource(){throw new Error("Pure virtual method called.")}exaggeration(){throw new Error("Pure virtual method called.")}findDEMTileFor(t){throw new Error("Pure virtual method called.")}get visibleDemTiles(){throw new Error("Getter must be implemented in subclass.")}},t.ErrorEvent=Jt,t.EvaluationParameters=wo,t.Event=$t,t.Evented=Qt,t.FillExtrusionBucket=th,t.Frustum=rl,t.FrustumCorners=nl,t.GLOBE_RADIUS=sl,t.GLOBE_SCALE_MATCH_LATITUDE=45,t.GLOBE_ZOOM_THRESHOLD_MAX=al,t.GLOBE_ZOOM_THRESHOLD_MIN=ol,t.GlobeSharedBuffers=class{constructor(t){this._createGrid(t),this._createPoles(t)}destroy(){this._poleIndexBuffer.destroy(),this._gridBuffer.destroy(),this._gridIndexBuffer.destroy(),this._poleNorthVertexBuffer.destroy(),this._poleSouthVertexBuffer.destroy();for(const t of this._poleSegments)t.destroy();for(const t of this._gridSegments)t.withSkirts.destroy(),t.withoutSkirts.destroy();if(this._wireframeIndexBuffer){this._wireframeIndexBuffer.destroy();for(const t of this._wireframeSegments)t.destroy()}}_fillGridMeshWithLods(t,e){const n=new Uo,r=new ra,i=[],o=t+1+2,a=e[0]+1,s=e[0]+1+(1+e.length),l=(t,e,n)=>{let r=t===o-1?t-2:0===t?t:t-1;return r+=n?24575:0,[r,e]};for(let c=0;c<o;++c)n.emplaceBack(...l(c,0,!0));for(let c=0;c<a;++c)for(let t=0;t<o;++t)n.emplaceBack(...l(t,c,(0===t||t===o-1)&&!0));for(let c=0;c<e.length;++c){const t=e[c];for(let e=0;e<o;++e)n.emplaceBack(...l(e,t,!0))}for(let c=0;c<e.length;++c){const t=r.length,a=e[c]+1+2,l=new ra;for(let n=0;n<a-1;n++){const t=n===a-2,i=t?o*(s-e.length+c-n):o;for(let e=0;e<o-1;e++){const a=n*o+e;0===n||t||0===e||e===o-2?(l.emplaceBack(a+1,a,a+i),l.emplaceBack(a+i,a+i+1,a+1)):(r.emplaceBack(a+1,a,a+i),r.emplaceBack(a+i,a+i+1,a+1))}}const u=as.simpleSegment(0,t,n.length,r.length-t);for(let e=0;e<l.uint16.length;e+=3)r.emplaceBack(l.uint16[e],l.uint16[e+1],l.uint16[e+2]);const h=as.simpleSegment(0,t,n.length,r.length-t);i.push({withoutSkirts:u,withSkirts:h})}return{vertices:n,indices:r,segments:i}}_createGrid(t){const e=this._fillGridMeshWithLods(cl,ul);this._gridSegments=e.segments,this._gridBuffer=t.createVertexBuffer(e.vertices,tl.members),this._gridIndexBuffer=t.createIndexBuffer(e.indices,!0)}_createPoles(t){const e=new ra;for(let i=0;i<=cl;i++)e.emplaceBack(0,i+1,i+2);this._poleIndexBuffer=t.createIndexBuffer(e,!0);const n=new sa,r=new sa;this._poleSegments=[];for(let i=0,o=0;i<ol;i++){const t=360/(1<<i);n.emplaceBack(0,-sl,0,.5,0),r.emplaceBack(0,-sl,0,.5,1);for(let e=0;e<=cl;e++){const i=e/cl,o=On(0,t,i),[a,s,l]=Tl(Dl,Bl,o,sl);n.emplaceBack(a,s,l,i,0),r.emplaceBack(a,s,l,i,1)}this._poleSegments.push(as.simpleSegment(o,0,66,64)),o+=66}this._poleNorthVertexBuffer=t.createVertexBuffer(n,Js,!1),this._poleSouthVertexBuffer=t.createVertexBuffer(r,Js,!1)}getGridBuffers(t,e){return[this._gridBuffer,this._gridIndexBuffer,e?this._gridSegments[t].withSkirts:this._gridSegments[t].withoutSkirts]}getPoleBuffers(t){return[this._poleNorthVertexBuffer,this._poleSouthVertexBuffer,this._poleIndexBuffer,this._poleSegments[t]]}getWirefameBuffers(t,e){if(!this._wireframeSegments){const e=new ca,n=cl,r=n+1+2,i=1;this._wireframeSegments=[];for(let t=0,o=0;t<ul.length;t++){const a=ul[t];for(let t=i;t<a+i;t++)for(let o=i;o<n+i;o++){const n=t*r+o;e.emplaceBack(n,n+1),e.emplaceBack(n,n+r),e.emplaceBack(n,n+r+1)}const s=a*n*3;this._wireframeSegments.push(as.simpleSegment(0,o,(a+1)*r,s)),o+=s}this._wireframeIndexBuffer=t.createIndexBuffer(e)}return[this._gridBuffer,this._wireframeIndexBuffer,this._wireframeSegments[e]]}},t.GlyphManager=nf,t.ImagePosition=Ed,t.KDBush=ym,t.LivePerformanceUtils=Nt,t.LngLat=Vl,t.LngLatBounds=ls,t.LocalGlyphMode=ef,t.MAX_MERCATOR_LATITUDE=Kl,t.MercatorCoordinate=Jl,t.ONE_EM=Bh,t.OverscaledTileID=ph,t.PerformanceMarkers=Ft,t.Point=v,t.Properties=jo,t.RGBAImage=Fc,t.Ray=el,t.RequestManager=class{constructor(t,e,n){this._transformRequestFn=t,this._customAccessToken=e,this._silenceAuthErrors=!!n,this._createSkuToken()}_createSkuToken(){const t=function(){let t="";for(let e=0;e<10;e++)t+="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ"[Math.floor(62*Math.random())];return{token:["1",h,t].join(""),tokenExpiresAt:Date.now()+432e5}}();this._skuToken=t.token,this._skuTokenExpiresAt=t.tokenExpiresAt}_isSkuTokenExpired(){return Date.now()>this._skuTokenExpiresAt}transformRequest(t,e){return this._transformRequestFn&&this._transformRequestFn(t,e)||{url:t}}normalizeStyleURL(t,e){if(!_t(t))return t;const n=Tt(t);return n.path="/styles/v1".concat(n.path),this._makeAPIURL(n,this._customAccessToken||e)}normalizeGlyphsURL(t,e){if(!_t(t))return t;const n=Tt(t);return n.path="/fonts/v1".concat(n.path),this._makeAPIURL(n,this._customAccessToken||e)}normalizeSourceURL(t,e,n,r){if(!_t(t))return t;const i=Tt(t);return i.path="/v4/".concat(i.authority,".json"),i.params.push("secure"),n&&i.params.push("language=".concat(n)),r&&i.params.push("worldview=".concat(r)),this._makeAPIURL(i,this._customAccessToken||e)}normalizeSpriteURL(t,e,n,r){const i=Tt(t);return _t(t)?(i.path="/styles/v1".concat(i.path,"/sprite").concat(e).concat(n),this._makeAPIURL(i,this._customAccessToken||r)):(i.path+="".concat(e).concat(n),Mt(i))}normalizeTileURL(t,e,n){if(this._isSkuTokenExpired()&&this._createSkuToken(),t&&!_t(t))return t;const r=Tt(t);r.path=r.path.replace(/(\.(png|jpg)\d*)(?=$)/,"".concat(e||n&&"raster"!==r.authority&&512===n?"@2x":"").concat(o.supported?".webp":"$1")),"raster"===r.authority?r.path="/".concat(i.RASTER_URL_PREFIX).concat(r.path):(r.path=r.path.replace(/^.+\/v4\//,"/"),r.path="/".concat(i.TILE_URL_VERSION).concat(r.path));const a=this._customAccessToken||function(t){for(const e of t){const t=e.match(/^access_token=(.*)$/);if(t)return t[1]}return null}(r.params)||i.ACCESS_TOKEN;return i.REQUIRE_ACCESS_TOKEN&&a&&this._skuToken&&r.params.push("sku=".concat(this._skuToken)),this._makeAPIURL(r,a)}canonicalizeTileURL(t,e){const n=Tt(t);if(!n.path.match(/^(\/v4\/|\/raster\/v1\/)/)||!n.path.match(/\.[\w]+$/))return t;let r="mapbox://";n.path.match(/^\/raster\/v1\//)?r+="raster/".concat(n.path.replace("/".concat(i.RASTER_URL_PREFIX,"/"),"")):r+="tiles/".concat(n.path.replace("/".concat(i.TILE_URL_VERSION,"/"),""));let o=n.params;return e&&(o=o.filter((t=>!t.match(/^access_token=/)))),o.length&&(r+="?".concat(o.join("&"))),r}canonicalizeTileset(t,e){const n=!!e&&_t(e),r=[];for(const i of t.tiles||[])bt(i)?r.push(this.canonicalizeTileURL(i,n)):r.push(i);return r}_makeAPIURL(t,e){const n="See https://docs.mapbox.com/api/overview/#access-tokens-and-token-scopes",r=Tt(i.API_URL);if(t.protocol=r.protocol,t.authority=r.authority,"http"===t.protocol){const e=t.params.indexOf("secure");e>=0&&t.params.splice(e,1)}if("/"!==r.path&&(t.path="".concat(r.path).concat(t.path)),!i.REQUIRE_ACCESS_TOKEN)return Mt(t);if(e=e||i.ACCESS_TOKEN,!this._silenceAuthErrors){if(!e)throw new Error("An API access token is required to use Mapbox GL. ".concat(n));if("s"===e[0])throw new Error("Use a public access token (pk.*) with Mapbox GL, not a secret access token (sk.*). ".concat(n))}return t.params=t.params.filter((t=>-1===t.indexOf("access_token"))),t.params.push("access_token=".concat(e||"")),Mt(t)}},t.ResourceType=lt,t.SegmentVector=as,t.SourceCache=em,t.StencilMode=Kp,t.StructArrayLayout1ui2=ua,t.StructArrayLayout2f1f2i16=ta,t.StructArrayLayout2i4=Uo,t.StructArrayLayout2ui4=ca,t.StructArrayLayout3f12=na,t.StructArrayLayout3ui6=ra,t.StructArrayLayout4i8=Wo,t.StructArrayLayout5f20=sa,t.Texture=vp,t.Tile=Lp,t.Transitionable=To,t.Uniform1f=Da,t.Uniform1i=class extends Ra{constructor(t){super(t),this.current=0}set(t,e,n){this.fetchUniformLocation(t,e)&&this.current!==n&&(this.current=n,this.gl.uniform1i(this.location,n))}},t.Uniform2f=class extends Ra{constructor(t){super(t),this.current=[0,0]}set(t,e,n){this.fetchUniformLocation(t,e)&&(n[0]===this.current[0]&&n[1]===this.current[1]||(this.current=n,this.gl.uniform2f(this.location,n[0],n[1])))}},t.Uniform3f=class extends Ra{constructor(t){super(t),this.current=[0,0,0]}set(t,e,n){this.fetchUniformLocation(t,e)&&(n[0]===this.current[0]&&n[1]===this.current[1]&&n[2]===this.current[2]||(this.current=n,this.gl.uniform3f(this.location,n[0],n[1],n[2])))}},t.Uniform4f=Ba,t.UniformColor=Fa,t.UniformMatrix2f=class extends Ra{constructor(t){super(t),this.current=Va}set(t,e,n){if(this.fetchUniformLocation(t,e))for(let r=0;r<4;r++)if(n[r]!==this.current[r]){this.current=n,this.gl.uniformMatrix2fv(this.location,!1,n);break}}},t.UniformMatrix3f=class extends Ra{constructor(t){super(t),this.current=Ua}set(t,e,n){if(this.fetchUniformLocation(t,e))for(let r=0;r<9;r++)if(n[r]!==this.current[r]){this.current=n,this.gl.uniformMatrix3fv(this.location,!1,n);break}}},t.UniformMatrix4f=class extends Ra{constructor(t){super(t),this.current=Na}set(t,e,n){if(this.fetchUniformLocation(t,e)){if(n[12]!==this.current[12]||n[0]!==this.current[0])return this.current=n,void this.gl.uniformMatrix4fv(this.location,!1,n);for(let t=1;t<16;t++)if(n[t]!==this.current[t]){this.current=n,this.gl.uniformMatrix4fv(this.location,!1,n);break}}}},t.UnwrappedTileID=fh,t.ValidationError=ni,t.VectorTileFeature=Zu,t.VectorTileWorkerSource=class extends Qt{constructor(t,e,n,r,i){super(),this.actor=t,this.layerIndex=e,this.availableImages=n,this.loadVectorData=i||mm,this.loading={},this.loaded={},this.deduped=new pm(t.scheduler),this.isSpriteLoaded=r,this.scheduler=t.scheduler}loadTile(t,e){const n=t.uid,r=t&&t.request,i=r&&r.collectResourceTiming,o=this.loading[n]=new dm(t);o.abort=this.loadVectorData(t,((a,s)=>{const l=!this.loading[n];if(delete this.loading[n],l||a||!s)return o.status="done",l||(this.loaded[n]=o),e(a);const c=s.rawData,u={};s.expires&&(u.expires=s.expires),s.cacheControl&&(u.cacheControl=s.cacheControl),o.vectorTile=s.vectorTile||new Hu(new gd(c));const h=()=>{o.parse(o.vectorTile,this.layerIndex,this.availableImages,this.actor,((t,n)=>{if(t||!n)return e(t);const o={};if(i){const t=Wt(r);t.length>0&&(o.resourceTiming=JSON.parse(JSON.stringify(t)))}e(null,O({rawTileData:c.slice(0)},n,u,o))}))};this.isSpriteLoaded?h():this.once("isSpriteLoaded",(()=>{this.scheduler?this.scheduler.add(h,{type:"parseTile",isSymbolTile:t.isSymbolTile,zoom:t.tileZoom}):h()})),this.loaded=this.loaded||{},this.loaded[n]=o}))}reloadTile(t,e){const n=this.loaded,r=t.uid,i=this;if(n&&n[r]){const o=n[r];o.showCollisionBoxes=t.showCollisionBoxes,o.enableTerrain=!!t.enableTerrain,o.projection=t.projection,o.tileTransform=If(t.tileID.canonical,t.projection);const a=(t,n)=>{const r=o.reloadCallback;r&&(delete o.reloadCallback,o.parse(o.vectorTile,i.layerIndex,this.availableImages,i.actor,r)),e(t,n)};"parsing"===o.status?o.reloadCallback=a:"done"===o.status&&(o.vectorTile?o.parse(o.vectorTile,this.layerIndex,this.availableImages,this.actor,a):a())}}abortTile(t,e){const n=t.uid,r=this.loading[n];r&&(r.abort&&r.abort(),delete this.loading[n]),e()}removeTile(t,e){const n=this.loaded,r=t.uid;n&&n[r]&&delete n[r],e()}},t.WritingMode=Md,t.ZoomDependentExpression=Jr,t.add=As,t.addDynamicAttributes=rp,t.adjoint=function(t,e){var n=e[0],r=e[1],i=e[2],o=e[3],a=e[4],s=e[5],l=e[6],c=e[7],u=e[8];return t[0]=a*u-s*c,t[1]=i*c-r*u,t[2]=r*s-i*a,t[3]=s*l-o*u,t[4]=n*u-i*l,t[5]=i*o-n*s,t[6]=o*c-a*l,t[7]=r*l-n*c,t[8]=n*a-r*o,t},t.asyncAll=k,t.bezier=T,t.bindAll=B,t.boundsAttributes=Ip,t.bufferConvexPolygon=function(t,e){const n=[];for(let r=0;r<t.length;r++){const i=P(r-1,-1,t.length-1),o=P(r+1,-1,t.length-1),a=t[r],s=t[o],l=t[i].sub(a).unit(),c=s.sub(a).unit(),u=c.angleWithSep(l.x,l.y),h=l.add(c).unit().mult(-1*e/Math.sin(u/2));n.push(a.add(h))}return n},t.cacheEntryPossiblyAdded=function(t){st++,st>rt&&(t.getActor().send("enforceCacheSizeLimit",nt),st=0)},t.calculateGlobeLabelMatrix=function(t,e){const{x:n,y:r}=t.point,i=Ol(n,r,t.worldSize/t._pixelsPerMercatorPixel,0,0);return ms(i,i,Il(vl(e)))},t.calculateGlobeMatrix=function(t){const{x:e,y:n}=t.point,{lng:r,lat:i}=t._center;return Ol(e,n,t.worldSize,r,i)},t.calculateGlobeMercatorMatrix=function(t){const e=t.pixelsPerMeter,n=e/Hl(1,t.center.lat),r=fs(new Float64Array(16));return gs(r,r,[t.point.x,t.point.y,0]),ys(r,r,[n,n,e]),Float32Array.from(r)},t.circumferenceAtLatitude=Wl,t.clamp=A,t.clearTileCache=function(t){if(!it())return;const n=e.caches.delete(Q);t&&n.catch(t).then((()=>t()))},t.clipLine=Kd,t.clone=function(t){var e=new us(16);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e},t.clone$1=V,t.collisionCircleLayout=Dh,t.config=i,t.conjugate=function(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t[3]=e[3],t},t.create=function(){var t=new us(16);return us!=Float32Array&&(t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0),t[0]=1,t[5]=1,t[10]=1,t[15]=1,t},t.create$1=hs,t.createExpression=Kr,t.createLayout=Fo,t.createStyleLayer=function(t){return"custom"===t.type?new pp(t):new yp[t.type](t)},t.cross=Rs,t.degToRad=x,t.distance=function(t,e){return Math.hypot(e[0]-t[0],e[1]-t[1],e[2]-t[2])},t.div=function(t,e,n){return t[0]=e[0]/n[0],t[1]=e[1]/n[1],t[2]=e[2]/n[2],t},t.dot=zs,t.earthRadius=Fl,t.ease=M,t.easeCubicInOut=E,t.ecefToLatLng=function(t){let[e,n,r]=t;const i=Math.hypot(e,n,r),o=Math.atan2(e,r),a=.5*Math.PI-Math.acos(-n/i);return new Vl(w(o),w(a))},t.emitValidationErrors=Wi,t.endsWith=F,t.enforceCacheSizeLimit=function(t){ot(),tt&&tt.then((e=>{e.keys().then((n=>{for(let r=0;r<n.length-t;r++)e.delete(n[r])}))}))},t.evaluateSizeForFeature=Uh,t.evaluateSizeForZoom=Vh,t.evaluateVariableOffset=_f,t.evented=vo,t.exactEquals=function(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]},t.exactEquals$1=function(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]},t.exported=Xt,t.exported$1=o,t.extend=O,t.extend$1=ee,t.fillExtrusionHeightLift=sh,t.filterObject=U,t.fromMat4=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[4],t[4]=e[5],t[5]=e[6],t[6]=e[8],t[7]=e[9],t[8]=e[10],t},t.fromQuat=function(t,e){var n=e[0],r=e[1],i=e[2],o=e[3],a=n+n,s=r+r,l=i+i,c=n*a,u=r*a,h=r*s,d=i*a,f=i*s,p=i*l,m=o*a,g=o*s,y=o*l;return t[0]=1-h-p,t[1]=u+y,t[2]=d-g,t[3]=0,t[4]=u-y,t[5]=1-c-p,t[6]=f+m,t[7]=0,t[8]=d+g,t[9]=f-m,t[10]=1-c-h,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},t.fromRotation=function(t,e){var n=Math.sin(e),r=Math.cos(e);return t[0]=r,t[1]=n,t[2]=0,t[3]=-n,t[4]=r,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t},t.fromScaling=bs,t.furthestTileCorner=function(t){const e=Math.round((t+45+360)%360/90)%4;return S[e]},t.getAABBPointSquareDist=function(t,e,n){let r=0;for(let i=0;i<2;++i){const o=n?n[i]:0;t[i]>o&&(r+=(t[i]-o)*(t[i]-o)),e[i]<o&&(r+=(o-e[i])*(o-e[i]))}return r},t.getAnchorAlignment=Bd,t.getAnchorJustification=xf,t.getBounds=function(t){let e=1/0,n=1/0,r=-1/0,i=-1/0;for(const o of t)e=Math.min(e,o.x),n=Math.min(n,o.y),r=Math.max(r,o.x),i=Math.max(i,o.y);return{min:new v(e,n),max:new v(r,i)}},t.getColumn=J,t.getDefaultExportFromCjs=d,t.getGridMatrix=function(t,e,n,r){const i=e.getNorth(),o=e.getSouth(),a=e.getWest(),s=e.getEast(),l=1<<t.z,c=s-a,u=i-o,h=c/cl,d=-u/ul[n],f=[0,h,0,d,0,0,i,a,0];if(t.z>0){const t=180/r;ds(f,f,[t/c+1,0,0,0,t/u+1,0,-.5*t/h,.5*t/d,1])}return f[2]=l,f[5]=t.x,f[8]=t.y,f},t.getImage=yt,t.getJSON=function(t,e){return ht(O(t,{type:"json"}),e)},t.getLatitudinalLod=function(t){const e=Kl-5;t=A(t,-e,e)/e*90;const n=Math.pow(Math.abs(Math.sin(x(t))),3);return Math.round(n*(ul.length-1))},t.getMapSessionAPI=Dt,t.getPerformanceMeasurement=Wt,t.getProjection=Jf,t.getRTLTextPluginStatus=_o,t.getReferrer=ut,t.getTilePoint=function(t,e){let{x:n,y:r}=e;return new v(((n-(arguments.length>2&&void 0!==arguments[2]?arguments[2]:0))*t.scale-t.x)*ss,(r*t.scale-t.y)*ss)},t.getTileVec3=function(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return Ms(((e.x-n)*t.scale-t.x)*ss,(e.y*t.scale-t.y)*ss,Yl(e.z,e.y))},t.getVideo=function(t,n){const r=e.document.createElement("video");r.muted=!0,r.onloadstart=function(){n(null,r)};for(let i=0;i<t.length;i++){const n=e.document.createElement("source");ft(t[i])||(r.crossOrigin="Anonymous"),n.src=t[i],r.appendChild(n)}return{cancel:()=>{}}},t.globeCenterToScreenPoint=function(t){const e=[0,0,0],n=fs(new Float64Array(16));return ms(n,t.pixelMatrix,t.globeMatrix),Ds(e,e,n),new v(e[0],e[1])},t.globeDenormalizeECEF=Il,t.globeECEFOrigin=function(t,e){const n=[0,0,0];return Ds(n,n,kl(vl(e.canonical))),Ds(n,n,t),n},t.globeMetersToEcef=pl,t.globeNormalizeECEF=kl,t.globePixelsToTileUnits=function(t,e){return ss/(512*Math.pow(2,t))*Cl(vl(e))},t.globePoleMatrixForTile=function(t,e,n){const r=fs(new Float64Array(16)),i=(e/(1<<t)-.5)*Math.PI*2;return _s(r,n.globeMatrix,i),Float32Array.from(r)},t.globeTileBounds=vl,t.globeTiltAtLngLat=jl,t.globeToMercatorTransition=Ll,t.globeUseCustomAntiAliasing=function(t,e,n){const r=Ll(n.zoom),i=t.style.map._antialias,o=!!e.extStandardDerivatives,a=e.extStandardDerivativesForceOff||t.terrain&&t.terrain.exaggeration()>0;return 0===r&&!i&&!a&&o},t.identity=fs,t.identity$1=Zs,t.invert=ps,t.isFullscreen=function(){return!!e.document.fullscreenElement||!!e.document.webkitFullscreenElement},t.isLngLatBehindGlobe=zl,t.isMapAuthenticated=function(t){return Bt.has(t)},t.isMapboxURL=_t,t.isSafariWithAntialiasingBug=function(t){const e=t.navigator?t.navigator.userAgent:null;return!!K(t)&&e&&(e.match("Version/15.4")||e.match("Version/15.5")||e.match(/CPU (OS|iPhone OS) (15_4|15_5) like Mac OS X/))},t.latFromMercatorY=Xl,t.latLngToECEF=Ml,t.len=Vs,t.length=Ts,t.length$1=function(t){return Math.hypot(t[0],t[1],t[2],t[3])},t.lngFromMercatorX=Zl,t.loadVectorTile=mm,t.makeRequest=ht,t.mapValue=function(t,e,n,r,i){return A((t-e)/(n-e)*(i-r)+r,r,i)},t.mercatorScale=$l,t.mercatorXfromLng=Gl,t.mercatorYfromLat=ql,t.mercatorZfromAltitude=Hl,t.mul=ws,t.mul$1=Us,t.multiply=ms,t.multiply$1=ds,t.multiply$2=Ps,t.nextPowerOfTwo=R,t.normalize=js,t.normalize$1=Ks,t.normalize$2=Gs,t.number=On,t.ortho=function(t,e,n,r,i,o,a){var s=1/(e-n),l=1/(r-i),c=1/(o-a);return t[0]=-2*s,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*l,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=2*c,t[11]=0,t[12]=(e+n)*s,t[13]=(i+r)*l,t[14]=(a+o)*c,t[15]=1,t},t.pbf=Xh,t.perspective=function(t,e,n,r,i){var o,a=1/Math.tan(e/2);return t[0]=a/n,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=a,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=-1,t[12]=0,t[13]=0,t[15]=0,null!=i&&i!==1/0?(t[10]=(i+r)*(o=1/(r-i)),t[14]=2*i*r*o):(t[10]=-1,t[14]=-2*r),t},t.pick=function(t,e){const n={};for(let r=0;r<e.length;r++){const i=e[r];i in t&&(n[i]=t[i])}return n},t.plugin=xo,t.pointGeometry=g,t.polesInViewport=function(t){const e=fs(new Float64Array(16));ms(e,t.pixelMatrix,t.globeMatrix);const n=[0,hl,0],r=[0,dl,0];return Ds(n,n,e),Ds(r,r,e),[n[0]>0&&n[0]<=t.width&&n[1]>0&&n[1]<=t.height&&!zl(t,new Vl(t.center.lat,90)),r[0]>0&&r[0]<=t.width&&r[1]>0&&r[1]<=t.height&&!zl(t,new Vl(t.center.lat,-90))]},t.polygonContainsPoint=bc,t.polygonIntersectsBox=xc,t.polygonIntersectsPolygon=hc,t.polygonizeBounds=function(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];const i=new v(n,n),o=t.sub(i),a=e.add(i),s=[o,new v(a.x,o.y),a,new v(o.x,a.y)];return r&&s.push(o.clone()),s},t.posAttributes=tl,t.postMapLoadEvent=Lt,t.postPerformanceEvent=zt,t.postTurnstileEvent=It,t.potpack=wd,t.prevPowerOfTwo=function(t){return t<=1?1:Math.pow(2,Math.floor(Math.log(t)/Math.LN2))},t.radToDeg=w,t.refProperties=["type","source","source-layer","minzoom","maxzoom","filter","layout"],t.registerForPluginStateChange=function(t){return t({pluginStatus:po,pluginURL:mo}),vo.on("pluginStateChange",t),t},t.removeAuthState=function(t){Bt.delete(t)},t.renderColorRamp=Uc,t.resample=tc,t.rotateX=vs,t.rotateX$1=Xs,t.rotateY=_s,t.rotateY$1=Ys,t.rotateZ=function(t,e,n){var r=Math.sin(n),i=Math.cos(n),o=e[0],a=e[1],s=e[2],l=e[3],c=e[4],u=e[5],h=e[6],d=e[7];return e!==t&&(t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=o*i+c*r,t[1]=a*i+u*r,t[2]=s*i+h*r,t[3]=l*i+d*r,t[4]=c*i-o*r,t[5]=u*i-a*r,t[6]=h*i-s*r,t[7]=d*i-l*r,t},t.rotateZ$1=function(t,e,n){n*=.5;var r=e[0],i=e[1],o=e[2],a=e[3],s=Math.sin(n),l=Math.cos(n);return t[0]=r*l+i*s,t[1]=i*l-r*s,t[2]=o*l+a*s,t[3]=a*l-o*s,t},t.scale=ys,t.scale$1=Ws,t.scale$2=Os,t.scaleAndAdd=Ls,t.set=function(t,e,n,r){return t[0]=e,t[1]=n,t[2]=r,t},t.setCacheLimits=function(t,e){nt=t,rt=e},t.setColumn=function(t,e,n){t[4*e+0]=n[0],t[4*e+1]=n[1],t[4*e+2]=n[2],t[4*e+3]=n[3]},t.setRTLTextPlugin=function(t,e){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(po===co||po===uo||po===ho)throw new Error("setRTLTextPlugin cannot be called multiple times.");mo=Xt.resolveURL(t),po=co,fo=e,yo(),n||bo()},t.smoothstep=C,t.spec=te,t.squaredLength=function(t){var e=t[0],n=t[1],r=t[2];return e*e+n*n+r*r},t.storeAuthState=function(t,e){e?Bt.add(t):Bt.delete(t)},t.sub=Ns,t.subtract=Cs,t.symbolSize=Wh,t.tileAABB=function(t,e,n,r,i,o,a,s,l){if("globe"===l.name)return wl(t,e,new dh(n,r,i));const c=If({z:n,x:r,y:i},l);return new il([(o+c.x/c.scale)*e,e*(c.y/c.scale),a],[(o+c.x2/c.scale)*e,e*(c.y2/c.scale),s])},t.tileCornersToBounds=Sl,t.tileTransform=If,t.transformMat3=function(t,e,n){var r=e[0],i=e[1],o=e[2];return t[0]=r*n[0]+i*n[3]+o*n[6],t[1]=r*n[1]+i*n[4]+o*n[7],t[2]=r*n[2]+i*n[5]+o*n[8],t},t.transformMat4=Ds,t.transformMat4$1=qs,t.transformQuat=Bs,t.transitionTileAABBinECEF=bl,t.translate=gs,t.transpose=function(t,e){if(t===e){var n=e[1],r=e[2],i=e[5];t[1]=e[3],t[2]=e[6],t[3]=n,t[5]=e[7],t[6]=r,t[7]=i}else t[0]=e[0],t[1]=e[3],t[2]=e[6],t[3]=e[1],t[4]=e[4],t[5]=e[7],t[6]=e[2],t[7]=e[5],t[8]=e[8];return t},t.triggerPluginCompletionEvent=go,t.uniqueId=j,t.updateGlobeVertexNormal=function(t,e,n,r,i){const o=5*e+2;t.float32[o+0]=n,t.float32[o+1]=r,t.float32[o+2]=i},t.validateCustomStyleLayer=function(t){const e=[],n=t.id;return void 0===n&&e.push({message:"layers.".concat(n,': missing required property "id"')}),void 0===t.render&&e.push({message:"layers.".concat(n,': missing required method "render"')}),t.renderingMode&&"2d"!==t.renderingMode&&"3d"!==t.renderingMode&&e.push({message:"layers.".concat(n,': property "renderingMode" must be either "2d" or "3d"')}),e},t.validateFilter=t=>Vi(Si(t)),t.validateFog=t=>Vi(zi(t)),t.validateLayer=t=>Vi(Ci(t)),t.validateLight=t=>Vi(Li(t)),t.validateSource=t=>Vi(Ii(t)),t.validateStyle=Fi,t.validateTerrain=t=>Vi(ji(t)),t.values=I,t.vectorTile=ju,t.version=n,t.warnOnce=G,t.window=e,t.wrap=P})),r(["./shared"],(function(t){function e(t){if("number"==typeof t||"boolean"==typeof t||"string"==typeof t||null==t)return JSON.stringify(t);if(Array.isArray(t)){let n="[";for(const r of t)n+="".concat(e(r),",");return"".concat(n,"]")}let n="{";for(const r of Object.keys(t).sort())n+="".concat(r,":").concat(e(t[r]),",");return"".concat(n,"}")}function n(n){let r="";for(const i of t.refProperties)r+="/".concat(e(n[i]));return r}class r{constructor(t){this.keyCache={},t&&this.replace(t)}replace(t){this._layerConfigs={},this._layers={},this.update(t,[])}update(e,r){for(const n of e)this._layerConfigs[n.id]=n,(this._layers[n.id]=t.createStyleLayer(n)).compileFilter(),this.keyCache[n.id]&&delete this.keyCache[n.id];for(const t of r)delete this.keyCache[t],delete this._layerConfigs[t],delete this._layers[t];this.familiesBySource={};const i=function(t,e){const r={};for(let o=0;o<t.length;o++){const i=e&&e[t[o].id]||n(t[o]);e&&(e[t[o].id]=i);let a=r[i];a||(a=r[i]=[]),a.push(t[o])}const i=[];for(const n in r)i.push(r[n]);return i}(t.values(this._layerConfigs),this.keyCache);for(const t of i){const e=t.map((t=>this._layers[t.id])),n=e[0];if("none"===n.visibility)continue;const r=n.source||"";let i=this.familiesBySource[r];i||(i=this.familiesBySource[r]={});const o=n.sourceLayer||"_geojsonTileLayer";let a=i[o];a||(a=i[o]=[]),a.push(e)}}}class i{loadTile(e,n){const{uid:r,encoding:i,rawImageData:o,padding:a,buildQuadTree:s}=e,l=t.window.ImageBitmap&&o instanceof t.window.ImageBitmap?this.getImageData(o,a):o;n(null,new t.DEMData(r,l,i,a<1,s))}getImageData(t,e){this.offscreenCanvas&&this.offscreenCanvasContext||(this.offscreenCanvas=new OffscreenCanvas(t.width,t.height),this.offscreenCanvasContext=this.offscreenCanvas.getContext("2d",{willReadFrequently:!0})),this.offscreenCanvas.width=t.width,this.offscreenCanvas.height=t.height,this.offscreenCanvasContext.drawImage(t,0,0,t.width,t.height);const n=this.offscreenCanvasContext.getImageData(-e,-e,t.width+2*e,t.height+2*e);return this.offscreenCanvasContext.clearRect(0,0,this.offscreenCanvas.width,this.offscreenCanvas.height),n}}function o(t,e){if(0!==t.length){a(t[0],e);for(var n=1;n<t.length;n++)a(t[n],!e)}}function a(t,e){for(var n=0,r=0,i=0,o=t.length,a=o-1;i<o;a=i++){var s=(t[i][0]-t[a][0])*(t[a][1]+t[i][1]),l=n+s;r+=Math.abs(n)>=Math.abs(s)?n-l+s:s-l+n,n=l}n+r>=0!=!!e&&t.reverse()}var s=t.getDefaultExportFromCjs((function t(e,n){var r,i=e&&e.type;if("FeatureCollection"===i)for(r=0;r<e.features.length;r++)t(e.features[r],n);else if("GeometryCollection"===i)for(r=0;r<e.geometries.length;r++)t(e.geometries[r],n);else if("Feature"===i)t(e.geometry,n);else if("Polygon"===i)o(e.coordinates,n);else if("MultiPolygon"===i)for(r=0;r<e.coordinates.length;r++)o(e.coordinates[r],n);return e}));const l=t.VectorTileFeature.prototype.toGeoJSON;var c={exports:{}},u=t.pointGeometry,h=t.vectorTile.VectorTileFeature,d=f;function f(t,e){this.options=e||{},this.features=t,this.length=t.length}function p(t,e){this.id="number"==typeof t.id?t.id:void 0,this.type=t.type,this.rawGeometry=1===t.type?[t.geometry]:t.geometry,this.properties=t.tags,this.extent=e||4096}f.prototype.feature=function(t){return new p(this.features[t],this.options.extent)},p.prototype.loadGeometry=function(){var t=this.rawGeometry;this.geometry=[];for(var e=0;e<t.length;e++){for(var n=t[e],r=[],i=0;i<n.length;i++)r.push(new u(n[i][0],n[i][1]));this.geometry.push(r)}return this.geometry},p.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var t=this.geometry,e=1/0,n=-1/0,r=1/0,i=-1/0,o=0;o<t.length;o++)for(var a=t[o],s=0;s<a.length;s++){var l=a[s];e=Math.min(e,l.x),n=Math.max(n,l.x),r=Math.min(r,l.y),i=Math.max(i,l.y)}return[e,r,n,i]},p.prototype.toGeoJSON=h.prototype.toGeoJSON;var m=t.pbf,g=d;function y(t){var e=new m;return function(t,e){for(var n in t.layers)e.writeMessage(3,v,t.layers[n])}(t,e),e.finish()}function v(t,e){var n;e.writeVarintField(15,t.version||1),e.writeStringField(1,t.name||""),e.writeVarintField(5,t.extent||4096);var r={keys:[],values:[],keycache:{},valuecache:{}};for(n=0;n<t.length;n++)r.feature=t.feature(n),e.writeMessage(2,_,r);var i=r.keys;for(n=0;n<i.length;n++)e.writeStringField(3,i[n]);var o=r.values;for(n=0;n<o.length;n++)e.writeMessage(4,E,o[n])}function _(t,e){var n=t.feature;void 0!==n.id&&e.writeVarintField(1,n.id),e.writeMessage(2,b,t),e.writeVarintField(3,n.type),e.writeMessage(4,S,n)}function b(t,e){var n=t.feature,r=t.keys,i=t.values,o=t.keycache,a=t.valuecache;for(var s in n.properties){var l=n.properties[s],c=o[s];if(null!==l){void 0===c&&(r.push(s),o[s]=c=r.length-1),e.writeVarint(c);var u=typeof l;"string"!==u&&"boolean"!==u&&"number"!==u&&(l=JSON.stringify(l));var h=u+":"+l,d=a[h];void 0===d&&(i.push(l),a[h]=d=i.length-1),e.writeVarint(d)}}}function x(t,e){return(e<<3)+(7&t)}function w(t){return t<<1^t>>31}function S(t,e){for(var n=t.loadGeometry(),r=t.type,i=0,o=0,a=n.length,s=0;s<a;s++){var l=n[s],c=1;1===r&&(c=l.length),e.writeVarint(x(1,c));for(var u=3===r?l.length-1:l.length,h=0;h<u;h++){1===h&&1!==r&&e.writeVarint(x(2,u-1));var d=l[h].x-i,f=l[h].y-o;e.writeVarint(w(d)),e.writeVarint(w(f)),i+=d,o+=f}3===r&&e.writeVarint(x(7,1))}}function E(t,e){var n=typeof t;"string"===n?e.writeStringField(1,t):"boolean"===n?e.writeBooleanField(7,t):"number"===n&&(t%1!=0?e.writeDoubleField(3,t):t<0?e.writeSVarintField(6,t):e.writeVarintField(5,t))}c.exports=y,c.exports.fromVectorTileJs=y,c.exports.fromGeojsonVt=function(t,e){e=e||{};var n={};for(var r in t)n[r]=new g(t[r].features,e),n[r].name=r,n[r].version=e.version,n[r].extent=e.extent;return y({layers:n})},c.exports.GeoJSONWrapper=g;var T=t.getDefaultExportFromCjs(c.exports);const M={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:t=>t},A=Math.fround||(C=new Float32Array(1),t=>(C[0]=+t,C[0]));var C;const P=3,k=5,I=6;class O{constructor(t){this.options=Object.assign(Object.create(M),t),this.trees=new Array(this.options.maxZoom+1),this.stride=this.options.reduce?7:6,this.clusterProps=[]}load(t){const{log:e,minZoom:n,maxZoom:r}=this.options;e&&console.time("total time");const i="prepare ".concat(t.length," points");e&&console.time(i),this.points=t;const o=[];for(let s=0;s<t.length;s++){const e=t[s];if(!e.geometry)continue;const[n,r]=e.geometry.coordinates,i=A(z(n)),a=A(R(r));o.push(i,a,1/0,s,-1,1),this.options.reduce&&o.push(0)}let a=this.trees[r+1]=this._createTree(o);e&&console.timeEnd(i);for(let s=r;s>=n;s--){const t=+Date.now();a=this.trees[s]=this._createTree(this._cluster(a,s)),e&&console.log("z%d: %d clusters in %dms",s,a.numItems,+Date.now()-t)}return e&&console.timeEnd("total time"),this}getClusters(t,e){let n=((t[0]+180)%360+360)%360-180;const r=Math.max(-90,Math.min(90,t[1]));let i=180===t[2]?180:((t[2]+180)%360+360)%360-180;const o=Math.max(-90,Math.min(90,t[3]));if(t[2]-t[0]>=360)n=-180,i=180;else if(n>i){const t=this.getClusters([n,r,180,o],e),a=this.getClusters([-180,r,i,o],e);return t.concat(a)}const a=this.trees[this._limitZoom(e)],s=a.range(z(n),R(o),z(i),R(r)),l=a.data,c=[];for(const u of s){const t=this.stride*u;c.push(l[t+k]>1?L(l,t,this.clusterProps):this.points[l[t+P]])}return c}getChildren(t){const e=this._getOriginId(t),n=this._getOriginZoom(t),r="No cluster with the specified id.",i=this.trees[n];if(!i)throw new Error(r);const o=i.data;if(e*this.stride>=o.length)throw new Error(r);const a=this.options.radius/(this.options.extent*Math.pow(2,n-1)),s=i.within(o[e*this.stride],o[e*this.stride+1],a),l=[];for(const c of s){const e=c*this.stride;o[e+4]===t&&l.push(o[e+k]>1?L(o,e,this.clusterProps):this.points[o[e+P]])}if(0===l.length)throw new Error(r);return l}getLeaves(t,e,n){const r=[];return this._appendLeaves(r,t,e=e||10,n=n||0,0),r}getTile(t,e,n){const r=this.trees[this._limitZoom(t)],i=Math.pow(2,t),{extent:o,radius:a}=this.options,s=a/o,l=(n-s)/i,c=(n+1+s)/i,u={features:[]};return this._addTileFeatures(r.range((e-s)/i,l,(e+1+s)/i,c),r.data,e,n,i,u),0===e&&this._addTileFeatures(r.range(1-s/i,l,1,c),r.data,i,n,i,u),e===i-1&&this._addTileFeatures(r.range(0,l,s/i,c),r.data,-1,n,i,u),u.features.length?u:null}getClusterExpansionZoom(t){let e=this._getOriginZoom(t)-1;for(;e<=this.options.maxZoom;){const n=this.getChildren(t);if(e++,1!==n.length)break;t=n[0].properties.cluster_id}return e}_appendLeaves(t,e,n,r,i){const o=this.getChildren(e);for(const a of o){const e=a.properties;if(e&&e.cluster?i+e.point_count<=r?i+=e.point_count:i=this._appendLeaves(t,e.cluster_id,n,r,i):i<r?i++:t.push(a),t.length===n)break}return i}_createTree(e){const n=new t.KDBush(e.length/this.stride|0,this.options.nodeSize,Float32Array);for(let t=0;t<e.length;t+=this.stride)n.add(e[t],e[t+1]);return n.finish(),n.data=e,n}_addTileFeatures(t,e,n,r,i,o){for(const a of t){const t=a*this.stride,s=e[t+k]>1;let l,c,u;if(s)l=j(e,t,this.clusterProps),c=e[t],u=e[t+1];else{const n=this.points[e[t+P]];l=n.properties;const[r,i]=n.geometry.coordinates;c=z(r),u=R(i)}const h={type:1,geometry:[[Math.round(this.options.extent*(c*i-n)),Math.round(this.options.extent*(u*i-r))]],tags:l};let d;d=s||this.options.generateId?e[t+P]:this.points[e[t+P]].id,void 0!==d&&(h.id=d),o.features.push(h)}}_limitZoom(t){return Math.max(this.options.minZoom,Math.min(Math.floor(+t),this.options.maxZoom+1))}_cluster(t,e){const{radius:n,extent:r,reduce:i,minPoints:o}=this.options,a=n/(r*Math.pow(2,e)),s=t.data,l=[],c=this.stride;for(let u=0;u<s.length;u+=c){if(s[u+2]<=e)continue;s[u+2]=e;const n=s[u],r=s[u+1],h=t.within(s[u],s[u+1],a),d=s[u+k];let f=d;for(const t of h){const n=t*c;s[n+2]>e&&(f+=s[n+k])}if(f>d&&f>=o){let t,o=n*d,a=r*d,p=-1;const m=(u/c<<5)+(e+1)+this.points.length;for(const n of h){const r=n*c;if(s[r+2]<=e)continue;s[r+2]=e;const l=s[r+k];o+=s[r]*l,a+=s[r+1]*l,s[r+4]=m,i&&(t||(t=this._map(s,u,!0),p=this.clusterProps.length,this.clusterProps.push(t)),i(t,this._map(s,r)))}s[u+4]=m,l.push(o/f,a/f,1/0,m,-1,f),i&&l.push(p)}else{for(let t=0;t<c;t++)l.push(s[u+t]);if(f>1)for(const t of h){const n=t*c;if(!(s[n+2]<=e)){s[n+2]=e;for(let t=0;t<c;t++)l.push(s[n+t])}}}}return l}_getOriginId(t){return t-this.points.length>>5}_getOriginZoom(t){return(t-this.points.length)%32}_map(t,e,n){if(t[e+k]>1){const r=this.clusterProps[t[e+I]];return n?Object.assign({},r):r}const r=this.points[t[e+P]].properties,i=this.options.map(r);return n&&i===r?Object.assign({},i):i}}function L(t,e,n){return{type:"Feature",id:t[e+P],properties:j(t,e,n),geometry:{type:"Point",coordinates:[(r=t[e],360*(r-.5)),D(t[e+1])]}};var r}function j(t,e,n){const r=t[e+k],i=r>=1e4?"".concat(Math.round(r/1e3),"k"):r>=1e3?Math.round(r/100)/10+"k":r,o=t[e+I],a=-1===o?{}:Object.assign({},n[o]);return Object.assign(a,{cluster:!0,cluster_id:t[e+P],point_count:r,point_count_abbreviated:i})}function z(t){return t/360+.5}function R(t){const e=Math.sin(t*Math.PI/180),n=.5-.25*Math.log((1+e)/(1-e))/Math.PI;return n<0?0:n>1?1:n}function D(t){const e=(180-360*t)*Math.PI/180;return 360*Math.atan(Math.exp(e))/Math.PI-90}function B(t,e,n,r){for(var i,o=r,a=n-e>>1,s=n-e,l=t[e],c=t[e+1],u=t[n],h=t[n+1],d=e+3;d<n;d+=3){var f=F(t[d],t[d+1],l,c,u,h);if(f>o)i=d,o=f;else if(f===o){var p=Math.abs(d-a);p<s&&(i=d,s=p)}}o>r&&(i-e>3&&B(t,e,i,r),t[i+2]=o,n-i>3&&B(t,i,n,r))}function F(t,e,n,r,i,o){var a=i-n,s=o-r;if(0!==a||0!==s){var l=((t-n)*a+(e-r)*s)/(a*a+s*s);l>1?(n=i,r=o):l>0&&(n+=a*l,r+=s*l)}return(a=t-n)*a+(s=e-r)*s}function N(t,e,n,r){var i={id:void 0===t?null:t,type:e,geometry:n,tags:r,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};return function(t){var e=t.geometry,n=t.type;if("Point"===n||"MultiPoint"===n||"LineString"===n)U(t,e);else if("Polygon"===n||"MultiLineString"===n)for(var r=0;r<e.length;r++)U(t,e[r]);else if("MultiPolygon"===n)for(r=0;r<e.length;r++)for(var i=0;i<e[r].length;i++)U(t,e[r][i])}(i),i}function U(t,e){for(var n=0;n<e.length;n+=3)t.minX=Math.min(t.minX,e[n]),t.minY=Math.min(t.minY,e[n+1]),t.maxX=Math.max(t.maxX,e[n]),t.maxY=Math.max(t.maxY,e[n+1])}function V(t,e,n,r){if(e.geometry){var i=e.geometry.coordinates,o=e.geometry.type,a=Math.pow(n.tolerance/((1<<n.maxZoom)*n.extent),2),s=[],l=e.id;if(n.promoteId?l=e.properties[n.promoteId]:n.generateId&&(l=r||0),"Point"===o)W(i,s);else if("MultiPoint"===o)for(var c=0;c<i.length;c++)W(i[c],s);else if("LineString"===o)G(i,s,a,!1);else if("MultiLineString"===o){if(n.lineMetrics){for(c=0;c<i.length;c++)G(i[c],s=[],a,!1),t.push(N(l,"LineString",s,e.properties));return}q(i,s,a,!1)}else if("Polygon"===o)q(i,s,a,!0);else{if("MultiPolygon"!==o){if("GeometryCollection"===o){for(c=0;c<e.geometry.geometries.length;c++)V(t,{id:l,geometry:e.geometry.geometries[c],properties:e.properties},n,r);return}throw new Error("Input data is not a valid GeoJSON object.")}for(c=0;c<i.length;c++){var u=[];q(i[c],u,a,!0),s.push(u)}}t.push(N(l,o,s,e.properties))}}function W(t,e){e.push(H(t[0])),e.push(Z(t[1])),e.push(0)}function G(t,e,n,r){for(var i,o,a=0,s=0;s<t.length;s++){var l=H(t[s][0]),c=Z(t[s][1]);e.push(l),e.push(c),e.push(0),s>0&&(a+=r?(i*c-l*o)/2:Math.sqrt(Math.pow(l-i,2)+Math.pow(c-o,2))),i=l,o=c}var u=e.length-3;e[2]=1,B(e,0,u,n),e[u+2]=1,e.size=Math.abs(a),e.start=0,e.end=e.size}function q(t,e,n,r){for(var i=0;i<t.length;i++){var o=[];G(t[i],o,n,r),e.push(o)}}function H(t){return t/360+.5}function Z(t){var e=Math.sin(t*Math.PI/180),n=.5-.25*Math.log((1+e)/(1-e))/Math.PI;return n<0?0:n>1?1:n}function X(t,e,n,r,i,o,a,s){if(r/=e,o>=(n/=e)&&a<r)return t;if(a<n||o>=r)return null;for(var l=[],c=0;c<t.length;c++){var u=t[c],h=u.geometry,d=u.type,f=0===i?u.minX:u.minY,p=0===i?u.maxX:u.maxY;if(f>=n&&p<r)l.push(u);else if(!(p<n||f>=r)){var m=[];if("Point"===d||"MultiPoint"===d)Y(h,m,n,r,i);else if("LineString"===d)K(h,m,n,r,i,!1,s.lineMetrics);else if("MultiLineString"===d)J(h,m,n,r,i,!1);else if("Polygon"===d)J(h,m,n,r,i,!0);else if("MultiPolygon"===d)for(var g=0;g<h.length;g++){var y=[];J(h[g],y,n,r,i,!0),y.length&&m.push(y)}if(m.length){if(s.lineMetrics&&"LineString"===d){for(g=0;g<m.length;g++)l.push(N(u.id,d,m[g],u.tags));continue}"LineString"!==d&&"MultiLineString"!==d||(1===m.length?(d="LineString",m=m[0]):d="MultiLineString"),"Point"!==d&&"MultiPoint"!==d||(d=3===m.length?"Point":"MultiPoint"),l.push(N(u.id,d,m,u.tags))}}}return l.length?l:null}function Y(t,e,n,r,i){for(var o=0;o<t.length;o+=3){var a=t[o+i];a>=n&&a<=r&&(e.push(t[o]),e.push(t[o+1]),e.push(t[o+2]))}}function K(t,e,n,r,i,o,a){for(var s,l,c=$(t),u=0===i?tt:et,h=t.start,d=0;d<t.length-3;d+=3){var f=t[d],p=t[d+1],m=t[d+2],g=t[d+3],y=t[d+4],v=0===i?f:p,_=0===i?g:y,b=!1;a&&(s=Math.sqrt(Math.pow(f-g,2)+Math.pow(p-y,2))),v<n?_>n&&(l=u(c,f,p,g,y,n),a&&(c.start=h+s*l)):v>r?_<r&&(l=u(c,f,p,g,y,r),a&&(c.start=h+s*l)):Q(c,f,p,m),_<n&&v>=n&&(l=u(c,f,p,g,y,n),b=!0),_>r&&v<=r&&(l=u(c,f,p,g,y,r),b=!0),!o&&b&&(a&&(c.end=h+s*l),e.push(c),c=$(t)),a&&(h+=s)}var x=t.length-3;f=t[x],p=t[x+1],m=t[x+2],(v=0===i?f:p)>=n&&v<=r&&Q(c,f,p,m),x=c.length-3,o&&x>=3&&(c[x]!==c[0]||c[x+1]!==c[1])&&Q(c,c[0],c[1],c[2]),c.length&&e.push(c)}function $(t){var e=[];return e.size=t.size,e.start=t.start,e.end=t.end,e}function J(t,e,n,r,i,o){for(var a=0;a<t.length;a++)K(t[a],e,n,r,i,o,!1)}function Q(t,e,n,r){t.push(e),t.push(n),t.push(r)}function tt(t,e,n,r,i,o){var a=(o-e)/(r-e);return t.push(o),t.push(n+(i-n)*a),t.push(1),a}function et(t,e,n,r,i,o){var a=(o-n)/(i-n);return t.push(e+(r-e)*a),t.push(o),t.push(1),a}function nt(t,e){for(var n=[],r=0;r<t.length;r++){var i,o=t[r],a=o.type;if("Point"===a||"MultiPoint"===a||"LineString"===a)i=rt(o.geometry,e);else if("MultiLineString"===a||"Polygon"===a){i=[];for(var s=0;s<o.geometry.length;s++)i.push(rt(o.geometry[s],e))}else if("MultiPolygon"===a)for(i=[],s=0;s<o.geometry.length;s++){for(var l=[],c=0;c<o.geometry[s].length;c++)l.push(rt(o.geometry[s][c],e));i.push(l)}n.push(N(o.id,a,i,o.tags))}return n}function rt(t,e){var n=[];n.size=t.size,void 0!==t.start&&(n.start=t.start,n.end=t.end);for(var r=0;r<t.length;r+=3)n.push(t[r]+e,t[r+1],t[r+2]);return n}function it(t,e){if(t.transformed)return t;var n,r,i,o=1<<t.z,a=t.x,s=t.y;for(n=0;n<t.features.length;n++){var l=t.features[n],c=l.geometry,u=l.type;if(l.geometry=[],1===u)for(r=0;r<c.length;r+=2)l.geometry.push(ot(c[r],c[r+1],e,o,a,s));else for(r=0;r<c.length;r++){var h=[];for(i=0;i<c[r].length;i+=2)h.push(ot(c[r][i],c[r][i+1],e,o,a,s));l.geometry.push(h)}}return t.transformed=!0,t}function ot(t,e,n,r,i,o){return[Math.round(n*(t*r-i)),Math.round(n*(e*r-o))]}function at(t,e,n,r,i){for(var o=e===i.maxZoom?0:i.tolerance/((1<<e)*i.extent),a={features:[],numPoints:0,numSimplified:0,numFeatures:0,source:null,x:n,y:r,z:e,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0},s=0;s<t.length;s++){a.numFeatures++,st(a,t[s],o,i);var l=t[s].minX,c=t[s].minY,u=t[s].maxX,h=t[s].maxY;l<a.minX&&(a.minX=l),c<a.minY&&(a.minY=c),u>a.maxX&&(a.maxX=u),h>a.maxY&&(a.maxY=h)}return a}function st(t,e,n,r){var i=e.geometry,o=e.type,a=[];if("Point"===o||"MultiPoint"===o)for(var s=0;s<i.length;s+=3)a.push(i[s]),a.push(i[s+1]),t.numPoints++,t.numSimplified++;else if("LineString"===o)lt(a,i,t,n,!1,!1);else if("MultiLineString"===o||"Polygon"===o)for(s=0;s<i.length;s++)lt(a,i[s],t,n,"Polygon"===o,0===s);else if("MultiPolygon"===o)for(var l=0;l<i.length;l++){var c=i[l];for(s=0;s<c.length;s++)lt(a,c[s],t,n,!0,0===s)}if(a.length){var u=e.tags||null;if("LineString"===o&&r.lineMetrics){for(var h in u={},e.tags)u[h]=e.tags[h];u.mapbox_clip_start=i.start/i.size,u.mapbox_clip_end=i.end/i.size}var d={geometry:a,type:"Polygon"===o||"MultiPolygon"===o?3:"LineString"===o||"MultiLineString"===o?2:1,tags:u};null!==e.id&&(d.id=e.id),t.features.push(d)}}function lt(t,e,n,r,i,o){var a=r*r;if(r>0&&e.size<(i?a:r))n.numPoints+=e.length/3;else{for(var s=[],l=0;l<e.length;l+=3)(0===r||e[l+2]>a)&&(n.numSimplified++,s.push(e[l]),s.push(e[l+1])),n.numPoints++;i&&function(t,e){for(var n=0,r=0,i=t.length,o=i-2;r<i;o=r,r+=2)n+=(t[r]-t[o])*(t[r+1]+t[o+1]);if(n>0===e)for(r=0,i=t.length;r<i/2;r+=2){var a=t[r],s=t[r+1];t[r]=t[i-2-r],t[r+1]=t[i-1-r],t[i-2-r]=a,t[i-1-r]=s}}(s,o),t.push(s)}}function ct(t,e){var n=(e=this.options=function(t,e){for(var n in e)t[n]=e[n];return t}(Object.create(this.options),e)).debug;if(n&&console.time("preprocess data"),e.maxZoom<0||e.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(e.promoteId&&e.generateId)throw new Error("promoteId and generateId cannot be used together.");var r=function(t,e){var n=[];if("FeatureCollection"===t.type)for(var r=0;r<t.features.length;r++)V(n,t.features[r],e,r);else V(n,"Feature"===t.type?t:{geometry:t},e);return n}(t,e);this.tiles={},this.tileCoords=[],n&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",e.indexMaxZoom,e.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),r=function(t,e){var n=e.buffer/e.extent,r=t,i=X(t,1,-1-n,n,0,-1,2,e),o=X(t,1,1-n,2+n,0,-1,2,e);return(i||o)&&(r=X(t,1,-n,1+n,0,-1,2,e)||[],i&&(r=nt(i,1).concat(r)),o&&(r=r.concat(nt(o,-1)))),r}(r,e),r.length&&this.splitTile(r,0,0,0),n&&(r.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}function ut(t,e,n){return 32*((1<<t)*n+e)+t}function ht(e,n){const r=e.tileID.canonical;if(!this._geoJSONIndex)return n(null,null);const i=this._geoJSONIndex.getTile(r.z,r.x,r.y);if(!i)return n(null,null);const o=new class{constructor(e){this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.extent=t.EXTENT,this.length=e.length,this._features=e}feature(e){return new class{constructor(e){this._feature=e,this.extent=t.EXTENT,this.type=e.type,this.properties=e.tags,"id"in e&&!isNaN(e.id)&&(this.id=parseInt(e.id,10))}loadGeometry(){if(1===this._feature.type){const e=[];for(const n of this._feature.geometry)e.push([new t.Point(n[0],n[1])]);return e}{const e=[];for(const n of this._feature.geometry){const r=[];for(const e of n)r.push(new t.Point(e[0],e[1]));e.push(r)}return e}}toGeoJSON(t,e,n){return l.call(this,t,e,n)}}(this._features[e])}}(i.features);let a=T(o);0===a.byteOffset&&a.byteLength===a.buffer.byteLength||(a=new Uint8Array(a)),n(null,{vectorTile:o,rawData:a.buffer})}ct.prototype.options={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0},ct.prototype.splitTile=function(t,e,n,r,i,o,a){for(var s=[t,e,n,r],l=this.options,c=l.debug;s.length;){r=s.pop(),n=s.pop(),e=s.pop(),t=s.pop();var u=1<<e,h=ut(e,n,r),d=this.tiles[h];if(!d&&(c>1&&console.time("creation"),d=this.tiles[h]=at(t,e,n,r,l),this.tileCoords.push({z:e,x:n,y:r}),c)){c>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",e,n,r,d.numFeatures,d.numPoints,d.numSimplified),console.timeEnd("creation"));var f="z"+e;this.stats[f]=(this.stats[f]||0)+1,this.total++}if(d.source=t,i){if(e===l.maxZoom||e===i)continue;var p=1<<i-e;if(n!==Math.floor(o/p)||r!==Math.floor(a/p))continue}else if(e===l.indexMaxZoom||d.numPoints<=l.indexMaxPoints)continue;if(d.source=null,0!==t.length){c>1&&console.time("clipping");var m,g,y,v,_,b,x=.5*l.buffer/l.extent,w=.5-x,S=.5+x,E=1+x;m=g=y=v=null,_=X(t,u,n-x,n+S,0,d.minX,d.maxX,l),b=X(t,u,n+w,n+E,0,d.minX,d.maxX,l),t=null,_&&(m=X(_,u,r-x,r+S,1,d.minY,d.maxY,l),g=X(_,u,r+w,r+E,1,d.minY,d.maxY,l),_=null),b&&(y=X(b,u,r-x,r+S,1,d.minY,d.maxY,l),v=X(b,u,r+w,r+E,1,d.minY,d.maxY,l),b=null),c>1&&console.timeEnd("clipping"),s.push(m||[],e+1,2*n,2*r),s.push(g||[],e+1,2*n,2*r+1),s.push(y||[],e+1,2*n+1,2*r),s.push(v||[],e+1,2*n+1,2*r+1)}}},ct.prototype.getTile=function(t,e,n){var r=this.options,i=r.extent,o=r.debug;if(t<0||t>24)return null;var a=1<<t,s=ut(t,e=(e%a+a)%a,n);if(this.tiles[s])return it(this.tiles[s],i);o>1&&console.log("drilling down to z%d-%d-%d",t,e,n);for(var l,c=t,u=e,h=n;!l&&c>0;)c--,u=Math.floor(u/2),h=Math.floor(h/2),l=this.tiles[ut(c,u,h)];return l&&l.source?(o>1&&console.log("found parent tile z%d-%d-%d",c,u,h),o>1&&console.time("drilling down"),this.splitTile(l.source,c,u,h,t,e,n),o>1&&console.timeEnd("drilling down"),this.tiles[s]?it(this.tiles[s],i):null):null};class dt extends t.VectorTileWorkerSource{constructor(t,e,n,r,i){super(t,e,n,r,ht),i&&(this.loadGeoJSON=i)}loadData(e,n){const r=e&&e.request,i=r&&r.collectResourceTiming;this.loadGeoJSON(e,((o,a)=>{if(o||!a)return n(o);if("object"!=typeof a)return n(new Error("Input data given to '".concat(e.source,"' is not a valid GeoJSON object.")));{s(a,!0);try{if(e.filter){const n=t.createExpression(e.filter,{type:"boolean","property-type":"data-driven",overridable:!1,transition:!1});if("error"===n.result)throw new Error(n.value.map((t=>"".concat(t.key,": ").concat(t.message))).join(", "));const r=a.features.filter((t=>n.value.evaluate({zoom:0},t)));a={type:"FeatureCollection",features:r}}this._geoJSONIndex=e.cluster?new O(function(e){let{superclusterOptions:n,clusterProperties:r}=e;if(!r||!n)return n;const i={},o={},a={accumulated:null,zoom:0},s={properties:null},l=Object.keys(r);for(const c of l){const[e,n]=r[c],a=t.createExpression(n),s=t.createExpression("string"==typeof e?[e,["accumulated"],["get",c]]:e);i[c]=a.value,o[c]=s.value}return n.map=t=>{s.properties=t;const e={};for(const n of l)e[n]=i[n].evaluate(a,s);return e},n.reduce=(t,e)=>{s.properties=e;for(const n of l)a.accumulated=t[n],t[n]=o[n].evaluate(a,s)},n}(e)).load(a.features):function(t,e){return new ct(t,e)}(a,e.geojsonVtOptions)}catch(o){return n(o)}this.loaded={};const l={};if(i){const n=t.getPerformanceMeasurement(r);n&&(l.resourceTiming={},l.resourceTiming[e.source]=JSON.parse(JSON.stringify(n)))}n(null,l)}}))}reloadTile(t,e){const n=this.loaded;return n&&n[t.uid]?super.reloadTile(t,e):this.loadTile(t,e)}loadGeoJSON(e,n){if(e.request)t.getJSON(e.request,n);else{if("string"!=typeof e.data)return n(new Error("Input data given to '".concat(e.source,"' is not a valid GeoJSON object.")));try{return n(null,JSON.parse(e.data))}catch(t){return n(new Error("Input data given to '".concat(e.source,"' is not a valid GeoJSON object.")))}}}getClusterExpansionZoom(t,e){try{e(null,this._geoJSONIndex.getClusterExpansionZoom(t.clusterId))}catch(t){e(t)}}getClusterChildren(t,e){try{e(null,this._geoJSONIndex.getChildren(t.clusterId))}catch(t){e(t)}}getClusterLeaves(t,e){try{e(null,this._geoJSONIndex.getLeaves(t.clusterId,t.limit,t.offset))}catch(t){e(t)}}}class ft{constructor(e){this.self=e,this.actor=new t.Actor(e,this),this.layerIndexes={},this.availableImages={},this.isSpriteLoaded={},this.projections={},this.defaultProjection=t.getProjection({name:"mercator"}),this.workerSourceTypes={vector:t.VectorTileWorkerSource,geojson:dt},this.workerSources={},this.demWorkerSources={},this.self.registerWorkerSource=(t,e)=>{if(this.workerSourceTypes[t])throw new Error('Worker source with name "'.concat(t,'" already registered.'));this.workerSourceTypes[t]=e},this.self.registerRTLTextPlugin=e=>{if(t.plugin.isParsed())throw new Error("RTL text plugin already registered.");t.plugin.applyArabicShaping=e.applyArabicShaping,t.plugin.processBidirectionalText=e.processBidirectionalText,t.plugin.processStyledBidirectionalText=e.processStyledBidirectionalText}}clearCaches(t,e,n){delete this.layerIndexes[t],delete this.availableImages[t],delete this.workerSources[t],delete this.demWorkerSources[t],n()}checkIfReady(t,e,n){n()}setReferrer(t,e){this.referrer=e}spriteLoaded(e,n){this.isSpriteLoaded[e]=n;for(const r in this.workerSources[e]){const i=this.workerSources[e][r];for(const e in i)i[e]instanceof t.VectorTileWorkerSource&&(i[e].isSpriteLoaded=n,i[e].fire(new t.Event("isSpriteLoaded")))}}setImages(t,e,n){this.availableImages[t]=e;for(const r in this.workerSources[t]){const n=this.workerSources[t][r];for(const t in n)n[t].availableImages=e}n()}enableTerrain(t,e,n){this.terrain=e,n()}setProjection(e,n){this.projections[e]=t.getProjection(n)}setLayers(t,e,n){this.getLayerIndex(t).replace(e),n()}updateLayers(t,e,n){this.getLayerIndex(t).update(e.layers,e.removedIds),n()}loadTile(e,n,r){const i=this.enableTerrain?t.extend({enableTerrain:this.terrain},n):n;i.projection=this.projections[e]||this.defaultProjection,this.getWorkerSource(e,n.type,n.source).loadTile(i,r)}loadDEMTile(e,n,r){const i=this.enableTerrain?t.extend({buildQuadTree:this.terrain},n):n;this.getDEMWorkerSource(e,n.source).loadTile(i,r)}reloadTile(e,n,r){const i=this.enableTerrain?t.extend({enableTerrain:this.terrain},n):n;i.projection=this.projections[e]||this.defaultProjection,this.getWorkerSource(e,n.type,n.source).reloadTile(i,r)}abortTile(t,e,n){this.getWorkerSource(t,e.type,e.source).abortTile(e,n)}removeTile(t,e,n){this.getWorkerSource(t,e.type,e.source).removeTile(e,n)}removeSource(t,e,n){if(!this.workerSources[t]||!this.workerSources[t][e.type]||!this.workerSources[t][e.type][e.source])return;const r=this.workerSources[t][e.type][e.source];delete this.workerSources[t][e.type][e.source],void 0!==r.removeSource?r.removeSource(e,n):n()}loadWorkerSource(t,e,n){try{this.self.importScripts(e.url),n()}catch(t){n(t.toString())}}syncRTLPluginState(e,n,r){try{t.plugin.setState(n);const e=t.plugin.getPluginURL();if(t.plugin.isLoaded()&&!t.plugin.isParsed()&&null!=e){this.self.importScripts(e);const n=t.plugin.isParsed();r(n?void 0:new Error("RTL Text Plugin failed to import scripts from ".concat(e)),n)}}catch(t){r(t.toString())}}getAvailableImages(t){let e=this.availableImages[t];return e||(e=[]),e}getLayerIndex(t){let e=this.layerIndexes[t];return e||(e=this.layerIndexes[t]=new r),e}getWorkerSource(t,e,n){if(this.workerSources[t]||(this.workerSources[t]={}),this.workerSources[t][e]||(this.workerSources[t][e]={}),!this.workerSources[t][e][n]){const r={send:(e,n,r,i,o,a)=>{this.actor.send(e,n,r,t,o,a)},scheduler:this.actor.scheduler};this.workerSources[t][e][n]=new this.workerSourceTypes[e](r,this.getLayerIndex(t),this.getAvailableImages(t),this.isSpriteLoaded[t])}return this.workerSources[t][e][n]}getDEMWorkerSource(t,e){return this.demWorkerSources[t]||(this.demWorkerSources[t]={}),this.demWorkerSources[t][e]||(this.demWorkerSources[t][e]=new i),this.demWorkerSources[t][e]}enforceCacheSizeLimit(e,n){t.enforceCacheSizeLimit(n)}getWorkerPerformanceMetrics(t,e,n){n(void 0,void 0)}}return"undefined"!=typeof WorkerGlobalScope&&"undefined"!=typeof self&&self instanceof WorkerGlobalScope&&(self.worker=new ft(self)),ft})),r(["./shared"],(function(t){function e(t,n){if(Array.isArray(t)){if(!Array.isArray(n)||t.length!==n.length)return!1;for(let r=0;r<t.length;r++)if(!e(t[r],n[r]))return!1;return!0}if("object"==typeof t&&null!==t&&null!==n){if("object"!=typeof n)return!1;if(Object.keys(t).length!==Object.keys(n).length)return!1;for(const r in t)if(!e(t[r],n[r]))return!1;return!0}return t===n}var n=r;function r(t){return!function(t){return"undefined"==typeof window||"undefined"==typeof document?"not a browser":Array.prototype&&Array.prototype.every&&Array.prototype.filter&&Array.prototype.forEach&&Array.prototype.indexOf&&Array.prototype.lastIndexOf&&Array.prototype.map&&Array.prototype.some&&Array.prototype.reduce&&Array.prototype.reduceRight&&Array.isArray?Function.prototype&&Function.prototype.bind?Object.keys&&Object.create&&Object.getPrototypeOf&&Object.getOwnPropertyNames&&Object.isSealed&&Object.isFrozen&&Object.isExtensible&&Object.getOwnPropertyDescriptor&&Object.defineProperty&&Object.defineProperties&&Object.seal&&Object.freeze&&Object.preventExtensions?"JSON"in window&&"parse"in JSON&&"stringify"in JSON?function(){if(!("Worker"in window&&"Blob"in window&&"URL"in window))return!1;var t,e,n=new Blob([""],{type:"text/javascript"}),r=URL.createObjectURL(n);try{e=new Worker(r),t=!0}catch(e){t=!1}return e&&e.terminate(),URL.revokeObjectURL(r),t}()?"Uint8ClampedArray"in window?ArrayBuffer.isView?function(){var t=document.createElement("canvas");t.width=t.height=1;var e=t.getContext("2d");if(!e)return!1;var n=e.getImageData(0,0,1,1);return n&&n.width===t.width}()?(void 0===i[e=t&&t.failIfMajorPerformanceCaveat]&&(i[e]=function(t){var e,n=function(t){var e=document.createElement("canvas"),n=Object.create(r.webGLContextAttributes);return n.failIfMajorPerformanceCaveat=t,e.getContext("webgl",n)||e.getContext("experimental-webgl",n)}(t);if(!n)return!1;try{e=n.createShader(n.VERTEX_SHADER)}catch(t){return!1}return!(!e||n.isContextLost())&&(n.shaderSource(e,"void main() {}"),n.compileShader(e),!0===n.getShaderParameter(e,n.COMPILE_STATUS))}(e)),i[e]?document.documentMode?"insufficient ECMAScript 6 support":void 0:"insufficient WebGL support"):"insufficient Canvas/getImageData support":"insufficient ArrayBuffer support":"insufficient Uint8ClampedArray support":"insufficient worker support":"insufficient JSON support":"insufficient Object support":"insufficient Function support":"insufficent Array support";var e}(t)}var i={};function o(e,n,r){const i=t.window.document.createElement(e);return void 0!==n&&(i.className=n),r&&r.appendChild(i),i}function a(e,n,r){const i=t.window.document.createElementNS("http://www.w3.org/2000/svg",e);for(const t of Object.keys(n))i.setAttributeNS(null,t,n[t]);return r&&r.appendChild(i),i}r.webGLContextAttributes={antialias:!1,alpha:!0,stencil:!0,depth:!0};const s=t.window.document&&t.window.document.documentElement.style,l=s&&void 0!==s.userSelect?"userSelect":"WebkitUserSelect";let c;function u(){s&&l&&(c=s[l],s[l]="none")}function h(){s&&l&&(s[l]=c)}function d(e){e.preventDefault(),e.stopPropagation(),t.window.removeEventListener("click",d,!0)}function f(){t.window.addEventListener("click",d,!0),t.window.setTimeout((()=>{t.window.removeEventListener("click",d,!0)}),0)}function p(t,e){const n=t.getBoundingClientRect();return y(t,n,e)}function m(t,e){const n=t.getBoundingClientRect(),r=[];for(let i=0;i<e.length;i++)r.push(y(t,n,e[i]));return r}function g(e){return void 0!==t.window.InstallTrigger&&2===e.button&&e.ctrlKey&&t.window.navigator.platform.toUpperCase().indexOf("MAC")>=0?0:e.button}function y(e,n,r){const i=e.offsetWidth===n.width?1:e.offsetWidth/n.width;return new t.Point((r.clientX-n.left)*i,(r.clientY-n.top)*i)}function v(t,e){var n=e[0],r=e[1],i=e[2],o=e[3],a=n*o-i*r;return a?(t[0]=o*(a=1/a),t[1]=-r*a,t[2]=-i*a,t[3]=n*a,t):null}function _(t){const{userImage:e}=t;return!!(e&&e.render&&e.render())&&(t.data.replace(new Uint8Array(e.data.buffer)),!0)}class b extends t.Evented{constructor(){super(),this.images={},this.updatedImages={},this.callbackDispatchedThisFrame={},this.loaded=!1,this.requestors=[],this.patterns={},this.atlasImage=new t.RGBAImage({width:1,height:1}),this.dirty=!0}isLoaded(){return this.loaded}setLoaded(t){if(this.loaded!==t&&(this.loaded=t,t)){for(const{ids:t,callback:e}of this.requestors)this._notify(t,e);this.requestors=[]}}hasImage(t){return!!this.getImage(t)}getImage(t){return this.images[t]}addImage(t,e){this._validate(t,e)&&(this.images[t]=e)}_validate(e,n){let r=!0;return this._validateStretch(n.stretchX,n.data&&n.data.width)||(this.fire(new t.ErrorEvent(new Error('Image "'.concat(e,'" has invalid "stretchX" value')))),r=!1),this._validateStretch(n.stretchY,n.data&&n.data.height)||(this.fire(new t.ErrorEvent(new Error('Image "'.concat(e,'" has invalid "stretchY" value')))),r=!1),this._validateContent(n.content,n)||(this.fire(new t.ErrorEvent(new Error('Image "'.concat(e,'" has invalid "content" value')))),r=!1),r}_validateStretch(t,e){if(!t)return!0;let n=0;for(const r of t){if(r[0]<n||r[1]<r[0]||e<r[1])return!1;n=r[1]}return!0}_validateContent(t,e){return!(t&&(4!==t.length||t[0]<0||e.data.width<t[0]||t[1]<0||e.data.height<t[1]||t[2]<0||e.data.width<t[2]||t[3]<0||e.data.height<t[3]||t[2]<t[0]||t[3]<t[1]))}updateImage(t,e){e.version=this.images[t].version+1,this.images[t]=e,this.updatedImages[t]=!0}removeImage(t){const e=this.images[t];delete this.images[t],delete this.patterns[t],e.userImage&&e.userImage.onRemove&&e.userImage.onRemove()}listImages(){return Object.keys(this.images)}getImages(t,e){let n=!0;if(!this.isLoaded())for(const r of t)this.images[r]||(n=!1);this.isLoaded()||n?this._notify(t,e):this.requestors.push({ids:t,callback:e})}_notify(e,n){const r={};for(const i of e){this.images[i]||this.fire(new t.Event("styleimagemissing",{id:i}));const e=this.images[i];e?r[i]={data:e.data.clone(),pixelRatio:e.pixelRatio,sdf:e.sdf,version:e.version,stretchX:e.stretchX,stretchY:e.stretchY,content:e.content,hasRenderCallback:Boolean(e.userImage&&e.userImage.render)}:t.warnOnce('Image "'.concat(i,'" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.'))}n(null,r)}getPixelSize(){const{width:t,height:e}=this.atlasImage;return{width:t,height:e}}getPattern(e){const n=this.patterns[e],r=this.getImage(e);if(!r)return null;if(n&&n.position.version===r.version)return n.position;if(n)n.position.version=r.version;else{const n={w:r.data.width+2,h:r.data.height+2,x:0,y:0},i=new t.ImagePosition(n,r);this.patterns[e]={bin:n,position:i}}return this._updatePatternAtlas(),this.patterns[e].position}bind(e){const n=e.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new t.Texture(e,this.atlasImage,n.RGBA),this.atlasTexture&&this.atlasTexture.bind(n.LINEAR,n.CLAMP_TO_EDGE)}_updatePatternAtlas(){const e=[];for(const t in this.patterns)e.push(this.patterns[t].bin);const{w:n,h:r}=t.potpack(e),i=this.atlasImage;i.resize({width:n||1,height:r||1});for(const o in this.patterns){const{bin:e}=this.patterns[o],n=e.x+1,r=e.y+1,a=this.images[o].data,s=a.width,l=a.height;t.RGBAImage.copy(a,i,{x:0,y:0},{x:n,y:r},{width:s,height:l}),t.RGBAImage.copy(a,i,{x:0,y:l-1},{x:n,y:r-1},{width:s,height:1}),t.RGBAImage.copy(a,i,{x:0,y:0},{x:n,y:r+l},{width:s,height:1}),t.RGBAImage.copy(a,i,{x:s-1,y:0},{x:n-1,y:r},{width:1,height:l}),t.RGBAImage.copy(a,i,{x:0,y:0},{x:n+s,y:r},{width:1,height:l})}this.dirty=!0}beginFrame(){this.callbackDispatchedThisFrame={}}dispatchRenderCallbacks(t){for(const e of t){if(this.callbackDispatchedThisFrame[e])continue;this.callbackDispatchedThisFrame[e]=!0;const t=this.images[e];_(t)&&this.updateImage(e,t)}}}const x=new t.Properties({anchor:new t.DataConstantProperty(t.spec.light.anchor),position:new class{constructor(){this.specification=t.spec.light.position}possiblyEvaluate(e,n){return function(e){let[n,r,i]=e;const o=t.degToRad(r+90),a=t.degToRad(i);return{x:n*Math.cos(o)*Math.sin(a),y:n*Math.sin(o)*Math.sin(a),z:n*Math.cos(a),azimuthal:r,polar:i}}(e.expression.evaluate(n))}interpolate(e,n,r){return{x:t.number(e.x,n.x,r),y:t.number(e.y,n.y,r),z:t.number(e.z,n.z,r),azimuthal:t.number(e.azimuthal,n.azimuthal,r),polar:t.number(e.polar,n.polar,r)}}},color:new t.DataConstantProperty(t.spec.light.color),intensity:new t.DataConstantProperty(t.spec.light.intensity)});class w extends t.Evented{constructor(e){super(),this._transitionable=new t.Transitionable(x),this.setLight(e),this._transitioning=this._transitionable.untransitioned()}getLight(){return this._transitionable.serialize()}setLight(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!this._validate(t.validateLight,e,n))for(const r in e){const n=e[r];t.endsWith(r,"-transition")?this._transitionable.setTransition(r.slice(0,-11),n):this._transitionable.setValue(r,n)}}updateTransitions(t){this._transitioning=this._transitionable.transitioned(t,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(t){this.properties=this._transitioning.possiblyEvaluate(t)}_validate(e,n,r){return(!r||!1!==r.validate)&&t.emitValidationErrors(this,e.call(t.validateStyle,t.extend({value:n,style:{glyphs:!0,sprite:!0},styleSpec:t.spec})))}}const S=new t.Properties({source:new t.DataConstantProperty(t.spec.terrain.source),exaggeration:new t.DataConstantProperty(t.spec.terrain.exaggeration)});let E=class extends t.Evented{constructor(e,n){super(),this._transitionable=new t.Transitionable(S),this.set(e),this._transitioning=this._transitionable.untransitioned(),this.drapeRenderMode=n}get(){return this._transitionable.serialize()}set(e){for(const n in e){const r=e[n];t.endsWith(n,"-transition")?this._transitionable.setTransition(n.slice(0,-11),r):this._transitionable.setValue(n,r)}}updateTransitions(t){this._transitioning=this._transitionable.transitioned(t,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(t){this.properties=this._transitioning.possiblyEvaluate(t)}};function T(e,n,r,i){const o=t.smoothstep(45,65,r),[a,s]=M(e,i),l=t.length(n);let c=1-Math.min(1,Math.exp((l-a)/(s-a)*-6));return c*=c*c,c=Math.min(1,1.00747*c),c*o*e.alpha}function M(t,e){const n=.5/Math.tan(.5*e);return[t.range[0]+n,t.range[1]+n]}const A=new t.Properties({range:new t.DataConstantProperty(t.spec.fog.range),color:new t.DataConstantProperty(t.spec.fog.color),"high-color":new t.DataConstantProperty(t.spec.fog["high-color"]),"space-color":new t.DataConstantProperty(t.spec.fog["space-color"]),"horizon-blend":new t.DataConstantProperty(t.spec.fog["horizon-blend"]),"star-intensity":new t.DataConstantProperty(t.spec.fog["star-intensity"])});class C extends t.Evented{constructor(e,n){super(),this._transitionable=new t.Transitionable(A),this.set(e),this._transitioning=this._transitionable.untransitioned(),this._transform=n}get state(){const e=this._transform,n="globe"===e.projection.name,r=t.globeToMercatorTransition(e.zoom),i=this.properties.get("range"),o=[.5,3];return{range:n?[t.number(o[0],i[0],r),t.number(o[1],i[1],r)]:i,horizonBlend:this.properties.get("horizon-blend"),alpha:this.properties.get("color").a}}get(){return this._transitionable.serialize()}set(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!this._validate(t.validateFog,e,n)){for(const n of Object.keys(t.spec.fog))e&&void 0===e[n]&&(e[n]=t.spec.fog[n].default);for(const n in e){const r=e[n];t.endsWith(n,"-transition")?this._transitionable.setTransition(n.slice(0,-11),r):this._transitionable.setValue(n,r)}}}getOpacity(e){if(!this._transform.projection.supportsFog)return 0;const n=this.properties&&this.properties.get("color")||1;return("globe"===this._transform.projection.name?1:t.smoothstep(45,65,e))*n.a}getOpacityAtLatLng(e,n){return this._transform.projection.supportsFog?function(e,n,r){const i=t.MercatorCoordinate.fromLngLat(n),o=r.elevation?r.elevation.getAtPointOrZero(i):0,a=[i.x,i.y,o];return t.transformMat4(a,a,r.mercatorFogMatrix),T(e,a,r.pitch,r._fov)}(this.state,e,n):0}getFovAdjustedRange(t){return this._transform.projection.supportsFog?M(this.state,t):[0,1]}updateTransitions(t){this._transitioning=this._transitionable.transitioned(t,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(t){this.properties=this._transitioning.possiblyEvaluate(t)}_validate(e,n,r){return(!r||!1!==r.validate)&&t.emitValidationErrors(this,e.call(t.validateStyle,t.extend({value:n,style:{glyphs:!0,sprite:!0},styleSpec:t.spec})))}}class P{constructor(e,n){this.workerPool=e,this.actors=[],this.currentActor=0,this.id=t.uniqueId();const r=this.workerPool.acquire(this.id);for(let t=0;t<r.length;t++){const e=new P.Actor(r[t],n,this.id);e.name="Worker ".concat(t),this.actors.push(e)}this.ready=!1,this.broadcast("checkIfReady",null,(()=>{this.ready=!0}))}broadcast(e,n,r){t.asyncAll(this.actors,((t,r)=>{t.send(e,n,r)}),r=r||function(){})}getActor(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]}remove(){this.actors.forEach((t=>{t.remove()})),this.actors=[],this.workerPool.release(this.id)}}function k(e,n,r){return n*(t.EXTENT/(e.tileSize*Math.pow(2,r-e.tileID.overscaledZ)))}P.Actor=t.Actor;class I{constructor(t,e,n,r){this.screenBounds=t,this.cameraPoint=e,this._screenRaycastCache={},this._cameraRaycastCache={},this.isAboveHorizon=n,this.screenGeometry=this.bufferedScreenGeometry(0),this.screenGeometryMercator=this._bufferedScreenMercator(0,r)}static createFromScreenPoints(e,n){let r,i;if(e instanceof t.Point||"number"==typeof e[0]){const o=t.Point.convert(e);r=[o],i=n.isPointAboveHorizon(o)}else{const o=t.Point.convert(e[0]),a=t.Point.convert(e[1]);r=[o,a],i=t.polygonizeBounds(o,a).every((t=>n.isPointAboveHorizon(t)))}return new I(r,n.getCameraPoint(),i,n)}isPointQuery(){return 1===this.screenBounds.length}bufferedScreenGeometry(e){return t.polygonizeBounds(this.screenBounds[0],1===this.screenBounds.length?this.screenBounds[0]:this.screenBounds[1],e)}bufferedCameraGeometry(e){const n=this.screenBounds[0],r=1===this.screenBounds.length?this.screenBounds[0].add(new t.Point(1,1)):this.screenBounds[1],i=t.polygonizeBounds(n,r,0,!1);return this.cameraPoint.y>r.y&&(this.cameraPoint.x>n.x&&this.cameraPoint.x<r.x?i.splice(3,0,this.cameraPoint):this.cameraPoint.x>=r.x?i[2]=this.cameraPoint:this.cameraPoint.x<=n.x&&(i[3]=this.cameraPoint)),t.bufferConvexPolygon(i,e)}bufferedCameraGeometryGlobe(e){const n=this.screenBounds[0],r=1===this.screenBounds.length?this.screenBounds[0].add(new t.Point(1,1)):this.screenBounds[1],i=t.polygonizeBounds(n,r,e),o=this.cameraPoint.clone();switch(3*((o.y>n.y)+(o.y>r.y))+((o.x>n.x)+(o.x>r.x))){case 0:i[0]=o,i[4]=o.clone();break;case 1:i.splice(1,0,o);break;case 2:i[1]=o;break;case 3:i.splice(4,0,o);break;case 5:i.splice(2,0,o);break;case 6:i[3]=o;break;case 7:i.splice(3,0,o);break;case 8:i[2]=o}return i}containsTile(e,n,r){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;const o=e.queryPadding/n._pixelsPerMercatorPixel+1,a=r?this._bufferedCameraMercator(o,n):this._bufferedScreenMercator(o,n);let s=e.tileID.wrap+(a.unwrapped?i:0);const l=a.polygon.map((n=>t.getTilePoint(e.tileTransform,n,s)));if(!t.polygonIntersectsBox(l,0,0,t.EXTENT,t.EXTENT))return;s=e.tileID.wrap+(this.screenGeometryMercator.unwrapped?i:0);const c=this.screenGeometryMercator.polygon.map((n=>t.getTileVec3(e.tileTransform,n,s))),u=c.map((e=>new t.Point(e[0],e[1]))),h=n.getFreeCameraOptions().position||new t.MercatorCoordinate(0,0,0),d=t.getTileVec3(e.tileTransform,h,s),f=c.map((e=>{const n=t.sub(e,e,d);return t.normalize(n,n),new t.Ray(d,n)})),p=k(e,1,n.zoom)*n._pixelsPerMercatorPixel;return{queryGeometry:this,tilespaceGeometry:u,tilespaceRays:f,bufferedTilespaceGeometry:l,bufferedTilespaceBounds:(m=t.getBounds(l),m.min.x=t.clamp(m.min.x,0,t.EXTENT),m.min.y=t.clamp(m.min.y,0,t.EXTENT),m.max.x=t.clamp(m.max.x,0,t.EXTENT),m.max.y=t.clamp(m.max.y,0,t.EXTENT),m),tile:e,tileID:e.tileID,pixelToTileUnitsFactor:p};var m}_bufferedScreenMercator(t,e){const n=j(t);if(this._screenRaycastCache[n])return this._screenRaycastCache[n];{let r;return r="globe"===e.projection.name?this._projectAndResample(this.bufferedScreenGeometry(t),e):{polygon:this.bufferedScreenGeometry(t).map((t=>e.pointCoordinate3D(t))),unwrapped:!0},this._screenRaycastCache[n]=r,r}}_bufferedCameraMercator(t,e){const n=j(t);if(this._cameraRaycastCache[n])return this._cameraRaycastCache[n];{let r;return r="globe"===e.projection.name?this._projectAndResample(this.bufferedCameraGeometryGlobe(t),e):{polygon:this.bufferedCameraGeometry(t).map((t=>e.pointCoordinate3D(t))),unwrapped:!0},this._cameraRaycastCache[n]=r,r}}_projectAndResample(e,n){const r=function(e,n){const r=t.multiply([],n.pixelMatrix,n.globeMatrix),i=[0,-t.GLOBE_RADIUS,0,1],o=[0,t.GLOBE_RADIUS,0,1],a=[0,0,0,1];t.transformMat4$1(i,i,r),t.transformMat4$1(o,o,r),t.transformMat4$1(a,a,r);const s=new t.Point(i[0]/i[3],i[1]/i[3]),l=new t.Point(o[0]/o[3],o[1]/o[3]),c=t.polygonContainsPoint(e,s)&&i[3]<a[3],u=t.polygonContainsPoint(e,l)&&o[3]<a[3];if(!c&&!u)return null;const h=function(t,e,n){for(let r=1;r<t.length;r++){const i=L(e.pointCoordinate3D(t[r-1]).x),o=L(e.pointCoordinate3D(t[r]).x);if(n<0){if(i<o)return{idx:r,t:-i/(o-1-i)}}else if(o<i)return{idx:r,t:(1-i)/(o+1-i)}}return null}(e,n,c?-1:1);if(!h)return null;const{idx:d,t:f}=h;let p=d>1?O(e.slice(0,d),n):[],m=d<e.length?O(e.slice(d),n):[];p=p.map((e=>new t.Point(L(e.x),e.y))),m=m.map((e=>new t.Point(L(e.x),e.y)));const g=[...p];0===g.length&&g.push(m[m.length-1]);const y=t.number(g[g.length-1].y,(0===m.length?p[0]:m[0]).y,f);let v;return v=c?[new t.Point(0,y),new t.Point(0,0),new t.Point(1,0),new t.Point(1,y)]:[new t.Point(1,y),new t.Point(1,1),new t.Point(0,1),new t.Point(0,y)],g.push(...v),0===m.length?g.push(p[0]):g.push(...m),{polygon:g.map((e=>new t.MercatorCoordinate(e.x,e.y))),unwrapped:!1}}(e,n);if(r)return r;const i=function(e,n){let r=!1,i=-1/0,o=0;for(let t=0;t<e.length-1;t++)e[t].x>i&&(i=e[t].x,o=t);for(let t=0;t<e.length-1;t++){const n=(o+t)%(e.length-1),i=e[n],a=e[n+1];Math.abs(i.x-a.x)>.5&&(i.x<a.x?(i.x+=1,0===n&&(e[e.length-1].x+=1)):(a.x+=1,n+1===e.length-1&&(e[0].x+=1)),r=!0)}const a=t.mercatorXfromLng(n.center.lng);return r&&a<Math.abs(a-1)&&e.forEach((t=>{t.x-=1})),{polygon:e,unwrapped:r}}(O(e,n).map((e=>new t.Point(L(e.x),e.y))),n);return{polygon:i.polygon.map((e=>new t.MercatorCoordinate(e.x,e.y))),unwrapped:i.unwrapped}}}function O(e,n){return t.resample(e,(t=>{const e=n.pointCoordinate3D(t);t.x=e.x,t.y=e.y}),1/256)}function L(t){return t<0?1+t%1:t%1}function j(t){return 100*t|0}function z(e,n,r,i,o){const a=function(r,i){if(r)return o(r);if(i){e.url&&i.tiles&&e.tiles&&delete e.tiles;const r=t.pick(t.extend(i,e),["tiles","minzoom","maxzoom","attribution","mapbox_logo","bounds","scheme","tileSize","encoding"]);i.vector_layers&&(r.vectorLayers=i.vector_layers,r.vectorLayerIds=r.vectorLayers.map((t=>t.id))),r.tiles=n.canonicalizeTileset(r,e.url),o(null,r)}};return e.url?t.getJSON(n.transformRequest(n.normalizeSourceURL(e.url,null,r,i),t.ResourceType.Source),a):t.exported.frame((()=>a(null,e)))}class R{constructor(e,n,r){this.bounds=t.LngLatBounds.convert(this.validateBounds(e)),this.minzoom=n||0,this.maxzoom=r||24}validateBounds(t){return Array.isArray(t)&&4===t.length?[Math.max(-180,t[0]),Math.max(-90,t[1]),Math.min(180,t[2]),Math.min(90,t[3])]:[-180,-90,180,90]}contains(e){const n=Math.pow(2,e.z),r=Math.floor(t.mercatorXfromLng(this.bounds.getWest())*n),i=Math.floor(t.mercatorYfromLat(this.bounds.getNorth())*n),o=Math.ceil(t.mercatorXfromLng(this.bounds.getEast())*n),a=Math.ceil(t.mercatorYfromLat(this.bounds.getSouth())*n);return e.x>=r&&e.x<o&&e.y>=i&&e.y<a}}class D{constructor(t,e,n){this.context=t;const r=t.gl;this.buffer=r.createBuffer(),this.dynamicDraw=Boolean(n),this.context.unbindVAO(),t.bindElementBuffer.set(this.buffer),r.bufferData(r.ELEMENT_ARRAY_BUFFER,e.arrayBuffer,this.dynamicDraw?r.DYNAMIC_DRAW:r.STATIC_DRAW),this.dynamicDraw||e.destroy()}bind(){this.context.bindElementBuffer.set(this.buffer)}updateData(t){const e=this.context.gl;this.context.unbindVAO(),this.bind(),e.bufferSubData(e.ELEMENT_ARRAY_BUFFER,0,t.arrayBuffer)}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}const B={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"};class F{constructor(t,e,n,r){this.length=e.length,this.attributes=n,this.itemSize=e.bytesPerElement,this.dynamicDraw=r,this.context=t;const i=t.gl;this.buffer=i.createBuffer(),t.bindVertexBuffer.set(this.buffer),i.bufferData(i.ARRAY_BUFFER,e.arrayBuffer,this.dynamicDraw?i.DYNAMIC_DRAW:i.STATIC_DRAW),this.dynamicDraw||e.destroy()}bind(){this.context.bindVertexBuffer.set(this.buffer)}updateData(t){const e=this.context.gl;this.bind(),e.bufferSubData(e.ARRAY_BUFFER,0,t.arrayBuffer)}enableAttributes(t,e){for(let n=0;n<this.attributes.length;n++){const r=e.attributes[this.attributes[n].name];void 0!==r&&t.enableVertexAttribArray(r)}}setVertexAttribPointers(t,e,n){for(let r=0;r<this.attributes.length;r++){const i=this.attributes[r],o=e.attributes[i.name];void 0!==o&&t.vertexAttribPointer(o,i.components,t[B[i.type]],!1,this.itemSize,i.offset+this.itemSize*(n||0))}}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}class N{constructor(t){this.gl=t.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1}get(){return this.current}set(t){}getDefault(){return this.default}setDefault(){this.set(this.default)}}class U extends N{getDefault(){return t.Color.transparent}set(t){const e=this.current;(t.r!==e.r||t.g!==e.g||t.b!==e.b||t.a!==e.a||this.dirty)&&(this.gl.clearColor(t.r,t.g,t.b,t.a),this.current=t,this.dirty=!1)}}class V extends N{getDefault(){return 1}set(t){(t!==this.current||this.dirty)&&(this.gl.clearDepth(t),this.current=t,this.dirty=!1)}}class W extends N{getDefault(){return 0}set(t){(t!==this.current||this.dirty)&&(this.gl.clearStencil(t),this.current=t,this.dirty=!1)}}class G extends N{getDefault(){return[!0,!0,!0,!0]}set(t){const e=this.current;(t[0]!==e[0]||t[1]!==e[1]||t[2]!==e[2]||t[3]!==e[3]||this.dirty)&&(this.gl.colorMask(t[0],t[1],t[2],t[3]),this.current=t,this.dirty=!1)}}class q extends N{getDefault(){return!0}set(t){(t!==this.current||this.dirty)&&(this.gl.depthMask(t),this.current=t,this.dirty=!1)}}class H extends N{getDefault(){return 255}set(t){(t!==this.current||this.dirty)&&(this.gl.stencilMask(t),this.current=t,this.dirty=!1)}}class Z extends N{getDefault(){return{func:this.gl.ALWAYS,ref:0,mask:255}}set(t){const e=this.current;(t.func!==e.func||t.ref!==e.ref||t.mask!==e.mask||this.dirty)&&(this.gl.stencilFunc(t.func,t.ref,t.mask),this.current=t,this.dirty=!1)}}class X extends N{getDefault(){const t=this.gl;return[t.KEEP,t.KEEP,t.KEEP]}set(t){const e=this.current;(t[0]!==e[0]||t[1]!==e[1]||t[2]!==e[2]||this.dirty)&&(this.gl.stencilOp(t[0],t[1],t[2]),this.current=t,this.dirty=!1)}}class Y extends N{getDefault(){return!1}set(t){if(t===this.current&&!this.dirty)return;const e=this.gl;t?e.enable(e.STENCIL_TEST):e.disable(e.STENCIL_TEST),this.current=t,this.dirty=!1}}class K extends N{getDefault(){return[0,1]}set(t){const e=this.current;(t[0]!==e[0]||t[1]!==e[1]||this.dirty)&&(this.gl.depthRange(t[0],t[1]),this.current=t,this.dirty=!1)}}class $ extends N{getDefault(){return!1}set(t){if(t===this.current&&!this.dirty)return;const e=this.gl;t?e.enable(e.DEPTH_TEST):e.disable(e.DEPTH_TEST),this.current=t,this.dirty=!1}}class J extends N{getDefault(){return this.gl.LESS}set(t){(t!==this.current||this.dirty)&&(this.gl.depthFunc(t),this.current=t,this.dirty=!1)}}class Q extends N{getDefault(){return!1}set(t){if(t===this.current&&!this.dirty)return;const e=this.gl;t?e.enable(e.BLEND):e.disable(e.BLEND),this.current=t,this.dirty=!1}}class tt extends N{getDefault(){const t=this.gl;return[t.ONE,t.ZERO]}set(t){const e=this.current;(t[0]!==e[0]||t[1]!==e[1]||this.dirty)&&(this.gl.blendFunc(t[0],t[1]),this.current=t,this.dirty=!1)}}class et extends N{getDefault(){return t.Color.transparent}set(t){const e=this.current;(t.r!==e.r||t.g!==e.g||t.b!==e.b||t.a!==e.a||this.dirty)&&(this.gl.blendColor(t.r,t.g,t.b,t.a),this.current=t,this.dirty=!1)}}class nt extends N{getDefault(){return this.gl.FUNC_ADD}set(t){(t!==this.current||this.dirty)&&(this.gl.blendEquation(t),this.current=t,this.dirty=!1)}}class rt extends N{getDefault(){return!1}set(t){if(t===this.current&&!this.dirty)return;const e=this.gl;t?e.enable(e.CULL_FACE):e.disable(e.CULL_FACE),this.current=t,this.dirty=!1}}class it extends N{getDefault(){return this.gl.BACK}set(t){(t!==this.current||this.dirty)&&(this.gl.cullFace(t),this.current=t,this.dirty=!1)}}class ot extends N{getDefault(){return this.gl.CCW}set(t){(t!==this.current||this.dirty)&&(this.gl.frontFace(t),this.current=t,this.dirty=!1)}}let at,st=class extends N{getDefault(){return null}set(t){(t!==this.current||this.dirty)&&(this.gl.useProgram(t),this.current=t,this.dirty=!1)}};class lt extends N{getDefault(){return this.gl.TEXTURE0}set(t){(t!==this.current||this.dirty)&&(this.gl.activeTexture(t),this.current=t,this.dirty=!1)}}class ct extends N{getDefault(){const t=this.gl;return[0,0,t.drawingBufferWidth,t.drawingBufferHeight]}set(t){const e=this.current;(t[0]!==e[0]||t[1]!==e[1]||t[2]!==e[2]||t[3]!==e[3]||this.dirty)&&(this.gl.viewport(t[0],t[1],t[2],t[3]),this.current=t,this.dirty=!1)}}class ut extends N{getDefault(){return null}set(t){if(t===this.current&&!this.dirty)return;const e=this.gl;e.bindFramebuffer(e.FRAMEBUFFER,t),this.current=t,this.dirty=!1}}class ht extends N{getDefault(){return null}set(t){if(t===this.current&&!this.dirty)return;const e=this.gl;e.bindRenderbuffer(e.RENDERBUFFER,t),this.current=t,this.dirty=!1}}class dt extends N{getDefault(){return null}set(t){if(t===this.current&&!this.dirty)return;const e=this.gl;e.bindTexture(e.TEXTURE_2D,t),this.current=t,this.dirty=!1}}class ft extends N{getDefault(){return null}set(t){if(t===this.current&&!this.dirty)return;const e=this.gl;e.bindBuffer(e.ARRAY_BUFFER,t),this.current=t,this.dirty=!1}}class pt extends N{getDefault(){return null}set(t){const e=this.gl;e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,t),this.current=t,this.dirty=!1}}class mt extends N{constructor(t){super(t),this.vao=t.extVertexArrayObject}getDefault(){return null}set(t){this.vao&&(t!==this.current||this.dirty)&&(this.vao.bindVertexArrayOES(t),this.current=t,this.dirty=!1)}}class gt extends N{getDefault(){return 4}set(t){if(t===this.current&&!this.dirty)return;const e=this.gl;e.pixelStorei(e.UNPACK_ALIGNMENT,t),this.current=t,this.dirty=!1}}class yt extends N{getDefault(){return!1}set(t){if(t===this.current&&!this.dirty)return;const e=this.gl;e.pixelStorei(e.UNPACK_PREMULTIPLY_ALPHA_WEBGL,t),this.current=t,this.dirty=!1}}class vt extends N{getDefault(){return!1}set(t){if(t===this.current&&!this.dirty)return;const e=this.gl;e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,t),this.current=t,this.dirty=!1}}class _t extends N{constructor(t,e){super(t),this.context=t,this.parent=e}getDefault(){return null}}class bt extends _t{setDirty(){this.dirty=!0}set(t){if(t===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const e=this.gl;e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,t,0),this.current=t,this.dirty=!1}}class xt extends _t{attachment(){return this.gl.DEPTH_ATTACHMENT}set(t){if(t===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const e=this.gl;e.framebufferRenderbuffer(e.FRAMEBUFFER,this.attachment(),e.RENDERBUFFER,t),this.current=t,this.dirty=!1}}class wt extends xt{attachment(){return this.gl.DEPTH_STENCIL_ATTACHMENT}}class St{constructor(t,e,n,r){this.context=t,this.width=e,this.height=n;const i=this.framebuffer=t.gl.createFramebuffer();this.colorAttachment=new bt(t,i),r&&(this.depthAttachment=new xt(t,i))}destroy(){const t=this.context.gl,e=this.colorAttachment.get();if(e&&t.deleteTexture(e),this.depthAttachment){const e=this.depthAttachment.get();e&&t.deleteRenderbuffer(e)}t.deleteFramebuffer(this.framebuffer)}}class Et{constructor(t){let e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(this.gl=t,this.isWebGL2=e,this.extVertexArrayObject=this.gl.getExtension("OES_vertex_array_object"),e){const e=t;this.extVertexArrayObject={createVertexArrayOES:e.createVertexArray.bind(t),deleteVertexArrayOES:e.deleteVertexArray.bind(t),bindVertexArrayOES:e.bindVertexArray.bind(t)}}this.clearColor=new U(this),this.clearDepth=new V(this),this.clearStencil=new W(this),this.colorMask=new G(this),this.depthMask=new q(this),this.stencilMask=new H(this),this.stencilFunc=new Z(this),this.stencilOp=new X(this),this.stencilTest=new Y(this),this.depthRange=new K(this),this.depthTest=new $(this),this.depthFunc=new J(this),this.blend=new Q(this),this.blendFunc=new tt(this),this.blendColor=new et(this),this.blendEquation=new nt(this),this.cullFace=new rt(this),this.cullFaceSide=new it(this),this.frontFace=new ot(this),this.program=new st(this),this.activeTexture=new lt(this),this.viewport=new ct(this),this.bindFramebuffer=new ut(this),this.bindRenderbuffer=new ht(this),this.bindTexture=new dt(this),this.bindVertexBuffer=new ft(this),this.bindElementBuffer=new pt(this),this.bindVertexArrayOES=this.extVertexArrayObject&&new mt(this),this.pixelStoreUnpack=new gt(this),this.pixelStoreUnpackPremultiplyAlpha=new yt(this),this.pixelStoreUnpackFlipY=new vt(this),this.extTextureFilterAnisotropic=t.getExtension("EXT_texture_filter_anisotropic")||t.getExtension("MOZ_EXT_texture_filter_anisotropic")||t.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=t.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.extTextureFilterAnisotropicForceOff=!1,this.extStandardDerivativesForceOff=!1,this.extDebugRendererInfo=t.getExtension("WEBGL_debug_renderer_info"),this.extDebugRendererInfo&&(this.renderer=t.getParameter(this.extDebugRendererInfo.UNMASKED_RENDERER_WEBGL),this.vendor=t.getParameter(this.extDebugRendererInfo.UNMASKED_VENDOR_WEBGL)),e||(this.extTextureHalfFloat=t.getExtension("OES_texture_half_float")),(e||this.extTextureHalfFloat&&t.getExtension("OES_texture_half_float_linear"))&&(this.extRenderToTextureHalfFloat=t.getExtension("EXT_color_buffer_half_float")),this.extStandardDerivatives=e||t.getExtension("OES_standard_derivatives"),this.extTimerQuery=t.getExtension("EXT_disjoint_timer_query"),this.maxTextureSize=t.getParameter(t.MAX_TEXTURE_SIZE)}setDefault(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()}setDirty(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.extVertexArrayObject&&(this.bindVertexArrayOES.dirty=!0),this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0}createIndexBuffer(t,e){return new D(this,t,e)}createVertexBuffer(t,e,n){return new F(this,t,e,n)}createRenderbuffer(t,e,n){const r=this.gl,i=r.createRenderbuffer();return this.bindRenderbuffer.set(i),r.renderbufferStorage(r.RENDERBUFFER,t,e,n),this.bindRenderbuffer.set(null),i}createFramebuffer(t,e,n){return new St(this,t,e,n)}clear(t){let{color:e,depth:n,stencil:r}=t;const i=this.gl;let o=0;e&&(o|=i.COLOR_BUFFER_BIT,this.clearColor.set(e),this.colorMask.set([!0,!0,!0,!0])),void 0!==n&&(o|=i.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(n),this.depthMask.set(!0)),void 0!==r&&(o|=i.STENCIL_BUFFER_BIT,this.clearStencil.set(r),this.stencilMask.set(255)),i.clear(o)}setCullFace(t){!1===t.enable?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(t.mode),this.frontFace.set(t.frontFace))}setDepthMode(t){t.func!==this.gl.ALWAYS||t.mask?(this.depthTest.set(!0),this.depthFunc.set(t.func),this.depthMask.set(t.mask),this.depthRange.set(t.range)):this.depthTest.set(!1)}setStencilMode(t){t.test.func!==this.gl.ALWAYS||t.mask?(this.stencilTest.set(!0),this.stencilMask.set(t.mask),this.stencilOp.set([t.fail,t.depthFail,t.pass]),this.stencilFunc.set({func:t.test.func,ref:t.ref,mask:t.test.mask})):this.stencilTest.set(!1)}setColorMode(n){e(n.blendFunction,t.ColorMode.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(n.blendFunction),this.blendColor.set(n.blendColor)),this.colorMask.set(n.mask)}unbindVAO(){this.extVertexArrayObject&&this.bindVertexArrayOES.set(null)}}class Tt extends t.Evented{constructor(e,n,r,i){if(super(),this.id=e,this.dispatcher=r,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,t.extend(this,t.pick(n,["url","scheme","tileSize","promoteId"])),this._options=t.extend({type:"vector"},n),this._collectResourceTiming=n.collectResourceTiming,512!==this.tileSize)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(i),this._tileWorkers={},this._deduped=new t.DedupedRequest}load(e){this._loaded=!1,this.fire(new t.Event("dataloading",{dataType:"source"}));const n=Array.isArray(this.map._language)?this.map._language.join():this.map._language,r=this.map._worldview;this._tileJSONRequest=z(this._options,this.map._requestManager,n,r,((i,o)=>{this._tileJSONRequest=null,this._loaded=!0,i?(n&&console.warn("Ensure that your requested language string is a valid BCP-47 code or list of codes. Found: ".concat(n)),r&&2!==r.length&&console.warn("Requested worldview strings must be a valid ISO alpha-2 code. Found: ".concat(r)),this.fire(new t.ErrorEvent(i))):o&&(t.extend(this,o),o.bounds&&(this.tileBounds=new R(o.bounds,this.minzoom,this.maxzoom)),t.postTurnstileEvent(o.tiles,this.map._requestManager._customAccessToken),this.fire(new t.Event("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new t.Event("data",{dataType:"source",sourceDataType:"content"}))),e&&e(i)}))}loaded(){return this._loaded}hasTile(t){return!this.tileBounds||this.tileBounds.contains(t.canonical)}onAdd(t){this.map=t,this.load()}reload(){this.cancelTileJSONRequest(),this.load((()=>this.map.style._clearSource(this.id)))}setTiles(t){return this._options.tiles=t,this.reload(),this}setUrl(t){return this.url=t,this._options.url=t,this.reload(),this}onRemove(){this.cancelTileJSONRequest()}serialize(){return t.extend({},this._options)}loadTile(e,n){const r=this.map._requestManager.normalizeTileURL(e.tileID.canonical.url(this.tiles,this.scheme)),i={request:this.map._requestManager.transformRequest(r,t.ResourceType.Tile),data:void 0,uid:e.uid,tileID:e.tileID,tileZoom:e.tileZoom,zoom:e.tileID.overscaledZ,tileSize:this.tileSize*e.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:t.exported.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId,isSymbolTile:e.isSymbolTile};if(i.request.collectResourceTiming=this._collectResourceTiming,e.actor&&"expired"!==e.state)"loading"===e.state?e.reloadCallback=n:e.request=e.actor.send("reloadTile",i,o.bind(this));else if(e.actor=this._tileWorkers[r]=this._tileWorkers[r]||this.dispatcher.getActor(),this.dispatcher.ready)e.request=e.actor.send("loadTile",i,o.bind(this),void 0,!0);else{const n=t.loadVectorTile.call({deduped:this._deduped},i,((t,n)=>{t||!n?o.call(this,t):(i.data={cacheControl:n.cacheControl,expires:n.expires,rawData:n.rawData.slice(0)},e.actor&&e.actor.send("loadTile",i,o.bind(this),void 0,!0))}),!0);e.request={cancel:n}}function o(r,i){return delete e.request,e.aborted?n(null):r&&404!==r.status?n(r):(i&&i.resourceTiming&&(e.resourceTiming=i.resourceTiming),this.map._refreshExpiredTiles&&i&&e.setExpiryData(i),e.loadVectorData(i,this.map.painter),t.cacheEntryPossiblyAdded(this.dispatcher),n(null),void(e.reloadCallback&&(this.loadTile(e,e.reloadCallback),e.reloadCallback=null)))}}abortTile(t){t.request&&(t.request.cancel(),delete t.request),t.actor&&t.actor.send("abortTile",{uid:t.uid,type:this.type,source:this.id})}unloadTile(t){t.unloadVectorData(),t.actor&&t.actor.send("removeTile",{uid:t.uid,type:this.type,source:this.id})}hasTransition(){return!1}afterUpdate(){this._tileWorkers={}}cancelTileJSONRequest(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)}}class Mt extends t.Evented{constructor(e,n,r,i){super(),this.id=e,this.dispatcher=r,this.setEventedParent(i),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=t.extend({type:"raster"},n),t.extend(this,t.pick(n,["url","scheme","tileSize"]))}load(e){this._loaded=!1,this.fire(new t.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=z(this._options,this.map._requestManager,null,null,((n,r)=>{this._tileJSONRequest=null,this._loaded=!0,n?this.fire(new t.ErrorEvent(n)):r&&(t.extend(this,r),r.bounds&&(this.tileBounds=new R(r.bounds,this.minzoom,this.maxzoom)),t.postTurnstileEvent(r.tiles),this.fire(new t.Event("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new t.Event("data",{dataType:"source",sourceDataType:"content"}))),e&&e(n)}))}loaded(){return this._loaded}onAdd(t){this.map=t,this.load()}reload(){this.cancelTileJSONRequest(),this.load((()=>this.map.style._clearSource(this.id)))}setTiles(t){return this._options.tiles=t,this.reload(),this}setUrl(t){return this.url=t,this._options.url=t,this.reload(),this}onRemove(){this.cancelTileJSONRequest()}serialize(){return t.extend({},this._options)}hasTile(t){return!this.tileBounds||this.tileBounds.contains(t.canonical)}loadTile(e,n){const r=t.exported.devicePixelRatio>=2,i=this.map._requestManager.normalizeTileURL(e.tileID.canonical.url(this.tiles,this.scheme),r,this.tileSize);e.request=t.getImage(this.map._requestManager.transformRequest(i,t.ResourceType.Tile),((r,i,o,a)=>(delete e.request,e.aborted?(e.state="unloaded",n(null)):r?(e.state="errored",n(r)):i?(this.map._refreshExpiredTiles&&e.setExpiryData({cacheControl:o,expires:a}),e.setTexture(i,this.map.painter),e.state="loaded",t.cacheEntryPossiblyAdded(this.dispatcher),void n(null)):n(null))))}static loadTileData(t,e,n){t.setTexture(e,n)}static unloadTileData(t,e){t.texture&&e.saveTileTexture(t.texture)}abortTile(t,e){t.request&&(t.request.cancel(),delete t.request),e()}unloadTile(t,e){t.texture&&this.map.painter.saveTileTexture(t.texture),e()}hasTransition(){return!1}cancelTileJSONRequest(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)}}function At(e,n,r,i,o,a,s,l){const c=[e,r,o,n,i,a,1,1,1],u=[s,l,1],h=t.adjoint([],c),[d,f,p]=t.transformMat3(u,u,t.transpose(h,h));return t.multiply$1(c,[d,0,0,0,f,0,0,0,p],c)}class Ct extends t.Evented{constructor(t,e,n,r){super(),this.id=t,this.dispatcher=n,this.coordinates=e.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.setEventedParent(r),this.options=e,this._dirty=!1}load(e,n){this._loaded=n||!1,this.fire(new t.Event("dataloading",{dataType:"source"})),this.url=this.options.url,this._imageRequest=t.getImage(this.map._requestManager.transformRequest(this.url,t.ResourceType.Image),((n,r)=>{if(this._imageRequest=null,this._loaded=!0,n)this.fire(new t.ErrorEvent(n));else if(r){const{HTMLImageElement:n}=t.window;this.image=r instanceof n?t.exported.getImageData(r):r,this._dirty=!0,this.width=this.image.width,this.height=this.image.height,e&&(this.coordinates=e),this._finishLoading()}}))}loaded(){return this._loaded}updateImage(t){return this.image&&t.url?(this._imageRequest&&t.url!==this.options.url&&(this._imageRequest.cancel(),this._imageRequest=null),this.options.url=t.url,this.load(t.coordinates,this._loaded),this):this}_finishLoading(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new t.Event("data",{dataType:"source",sourceDataType:"metadata"})))}onAdd(t){this.map=t,this.load()}onRemove(){this._imageRequest&&(this._imageRequest.cancel(),this._imageRequest=null),this.texture&&this.texture.destroy()}setCoordinates(e){this.coordinates=e,this._boundsArray=void 0;const n=e.map(t.MercatorCoordinate.fromLngLat);return this.tileID=function(e){let n=1/0,r=1/0,i=-1/0,o=-1/0;for(const t of e)n=Math.min(n,t.x),r=Math.min(r,t.y),i=Math.max(i,t.x),o=Math.max(o,t.y);const a=Math.max(i-n,o-r),s=Math.max(0,Math.floor(-Math.log(a)/Math.LN2)),l=Math.pow(2,s);return new t.CanonicalTileID(s,Math.floor((n+i)/2*l),Math.floor((r+o)/2*l))}(n),this.minzoom=this.maxzoom=this.tileID.z,this.fire(new t.Event("data",{dataType:"source",sourceDataType:"content"})),this}_clear(){this._boundsArray=void 0}_prepareData(e){for(const t in this.tiles){const e=this.tiles[t];"loaded"!==e.state&&(e.state="loaded",e.texture=this.texture)}if(this._boundsArray)return;const n=t.tileTransform(this.tileID,this.map.transform.projection),[r,i,o,a]=this.coordinates.map((e=>{const r=n.projection.project(e[0],e[1]);return t.getTilePoint(n,r)._round()}));this.perspectiveTransform=function(e,n,r,i,o,a,s,l,c,u){const h=At(0,0,e,0,0,n,e,n),d=At(r,i,o,a,s,l,c,u);return t.multiply$1(d,t.adjoint(h,h),d),[d[6]/d[8]*e/t.EXTENT,d[7]/d[8]*n/t.EXTENT]}(this.width,this.height,r.x,r.y,i.x,i.y,a.x,a.y,o.x,o.y);const s=this._boundsArray=new t.StructArrayLayout4i8;s.emplaceBack(r.x,r.y,0,0),s.emplaceBack(i.x,i.y,t.EXTENT,0),s.emplaceBack(a.x,a.y,0,t.EXTENT),s.emplaceBack(o.x,o.y,t.EXTENT,t.EXTENT),this.boundsBuffer&&this.boundsBuffer.destroy(),this.boundsBuffer=e.createVertexBuffer(s,t.boundsAttributes.members),this.boundsSegments=t.SegmentVector.simpleSegment(0,0,4,2)}prepare(){if(0===Object.keys(this.tiles).length||!this.image)return;const e=this.map.painter.context,n=e.gl;this._dirty&&(this.texture?this.texture.update(this.image):(this.texture=new t.Texture(e,this.image,n.RGBA),this.texture.bind(n.LINEAR,n.CLAMP_TO_EDGE)),this._dirty=!1),this._prepareData(e)}loadTile(t,e){this.tileID&&this.tileID.equals(t.tileID.canonical)?(this.tiles[String(t.tileID.wrap)]=t,t.buckets={},e(null)):(t.state="errored",e(null))}serialize(){return{type:"image",url:this.options.url,coordinates:this.coordinates}}hasTransition(){return!1}}const Pt={vector:Tt,raster:Mt,"raster-dem":class extends Mt{constructor(e,n,r,i){super(e,n,r,i),this.type="raster-dem",this.maxzoom=22,this._options=t.extend({type:"raster-dem"},n),this.encoding=n.encoding||"mapbox"}loadTile(e,n){const r=this.map._requestManager.normalizeTileURL(e.tileID.canonical.url(this.tiles,this.scheme),!1,this.tileSize);function i(t,r){t&&(e.state="errored",n(t)),r&&(e.dem=r,e.dem.onDeserialize(),e.needsHillshadePrepare=!0,e.needsDEMTextureUpload=!0,e.state="loaded",n(null))}e.request=t.getImage(this.map._requestManager.transformRequest(r,t.ResourceType.Tile),function(r,o,a,s){if(delete e.request,e.aborted)e.state="unloaded",n(null);else if(r)e.state="errored",n(r);else if(o){this.map._refreshExpiredTiles&&e.setExpiryData({cacheControl:a,expires:s});const n=t.window.ImageBitmap&&o instanceof t.window.ImageBitmap&&(null==at&&(at=t.window.OffscreenCanvas&&new t.window.OffscreenCanvas(1,1).getContext("2d")&&"function"==typeof t.window.createImageBitmap),at),r=1-(o.width-t.prevPowerOfTwo(o.width))/2;r<1||e.neighboringTiles||(e.neighboringTiles=this._getNeighboringTiles(e.tileID));const l=n?o:t.exported.getImageData(o,r),c={uid:e.uid,coord:e.tileID,source:this.id,rawImageData:l,encoding:this.encoding,padding:r};e.actor&&"expired"!==e.state||(e.actor=this.dispatcher.getActor(),e.actor.send("loadDEMTile",c,i.bind(this),void 0,!0))}}.bind(this))}_getNeighboringTiles(e){const n=e.canonical,r=Math.pow(2,n.z),i=(n.x-1+r)%r,o=0===n.x?e.wrap-1:e.wrap,a=(n.x+1+r)%r,s=n.x+1===r?e.wrap+1:e.wrap,l={};return l[new t.OverscaledTileID(e.overscaledZ,o,n.z,i,n.y).key]={backfilled:!1},l[new t.OverscaledTileID(e.overscaledZ,s,n.z,a,n.y).key]={backfilled:!1},n.y>0&&(l[new t.OverscaledTileID(e.overscaledZ,o,n.z,i,n.y-1).key]={backfilled:!1},l[new t.OverscaledTileID(e.overscaledZ,e.wrap,n.z,n.x,n.y-1).key]={backfilled:!1},l[new t.OverscaledTileID(e.overscaledZ,s,n.z,a,n.y-1).key]={backfilled:!1}),n.y+1<r&&(l[new t.OverscaledTileID(e.overscaledZ,o,n.z,i,n.y+1).key]={backfilled:!1},l[new t.OverscaledTileID(e.overscaledZ,e.wrap,n.z,n.x,n.y+1).key]={backfilled:!1},l[new t.OverscaledTileID(e.overscaledZ,s,n.z,a,n.y+1).key]={backfilled:!1}),l}unloadTile(t){t.demTexture&&this.map.painter.saveTileTexture(t.demTexture),t.fbo&&(t.fbo.destroy(),delete t.fbo),t.dem&&delete t.dem,delete t.neighboringTiles,t.state="unloaded"}},geojson:class extends t.Evented{constructor(e,n,r,i){super(),this.id=e,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._loaded=!1,this.actor=r.getActor(),this.setEventedParent(i),this._data=n.data,this._options=t.extend({},n),this._collectResourceTiming=n.collectResourceTiming,void 0!==n.maxzoom&&(this.maxzoom=n.maxzoom),n.type&&(this.type=n.type),n.attribution&&(this.attribution=n.attribution),this.promoteId=n.promoteId;const o=t.EXTENT/this.tileSize;this.workerOptions=t.extend({source:this.id,cluster:n.cluster||!1,geojsonVtOptions:{buffer:(void 0!==n.buffer?n.buffer:128)*o,tolerance:(void 0!==n.tolerance?n.tolerance:.375)*o,extent:t.EXTENT,maxZoom:this.maxzoom,lineMetrics:n.lineMetrics||!1,generateId:n.generateId||!1},superclusterOptions:{maxZoom:void 0!==n.clusterMaxZoom?n.clusterMaxZoom:this.maxzoom-1,minPoints:Math.max(2,n.clusterMinPoints||2),extent:t.EXTENT,radius:(void 0!==n.clusterRadius?n.clusterRadius:50)*o,log:!1,generateId:n.generateId||!1},clusterProperties:n.clusterProperties,filter:n.filter},n.workerOptions)}onAdd(t){this.map=t,this.setData(this._data)}setData(t){return this._data=t,this._updateWorkerData(),this}getClusterExpansionZoom(t,e){return this.actor.send("geojson.getClusterExpansionZoom",{clusterId:t,source:this.id},e),this}getClusterChildren(t,e){return this.actor.send("geojson.getClusterChildren",{clusterId:t,source:this.id},e),this}getClusterLeaves(t,e,n,r){return this.actor.send("geojson.getClusterLeaves",{source:this.id,clusterId:t,limit:e,offset:n},r),this}_updateWorkerData(){if(this._pendingLoad)return void(this._coalesce=!0);this.fire(new t.Event("dataloading",{dataType:"source"})),this._loaded=!1;const e=t.extend({},this.workerOptions),n=this._data;"string"==typeof n?(e.request=this.map._requestManager.transformRequest(t.exported.resolveURL(n),t.ResourceType.Source),e.request.collectResourceTiming=this._collectResourceTiming):e.data=JSON.stringify(n),this._pendingLoad=this.actor.send("".concat(this.type,".loadData"),e,((e,n)=>{if(this._loaded=!0,this._pendingLoad=null,e)this.fire(new t.ErrorEvent(e));else{const e={dataType:"source",sourceDataType:this._metadataFired?"content":"metadata"};this._collectResourceTiming&&n&&n.resourceTiming&&n.resourceTiming[this.id]&&(e.resourceTiming=n.resourceTiming[this.id]),this.fire(new t.Event("data",e)),this._metadataFired=!0}this._coalesce&&(this._updateWorkerData(),this._coalesce=!1)}))}loaded(){return this._loaded}loadTile(e,n){const r=e.actor?"reloadTile":"loadTile";e.actor=this.actor,e.request=this.actor.send(r,{type:this.type,uid:e.uid,tileID:e.tileID,tileZoom:e.tileZoom,zoom:e.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:t.exported.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId},((t,i)=>(delete e.request,e.unloadVectorData(),e.aborted?n(null):t?n(t):(e.loadVectorData(i,this.map.painter,"reloadTile"===r),n(null)))),void 0,"loadTile"===r)}abortTile(t){t.request&&(t.request.cancel(),delete t.request),t.aborted=!0}unloadTile(t){t.unloadVectorData(),this.actor.send("removeTile",{uid:t.uid,type:this.type,source:this.id})}onRemove(){this._pendingLoad&&this._pendingLoad.cancel()}serialize(){return t.extend({},this._options,{type:this.type,data:this._data})}hasTransition(){return!1}},video:class extends Ct{constructor(t,e,n,r){super(t,e,n,r),this.roundZoom=!0,this.type="video",this.options=e}load(){this._loaded=!1;const e=this.options;this.urls=[];for(const n of e.urls)this.urls.push(this.map._requestManager.transformRequest(n,t.ResourceType.Source).url);t.getVideo(this.urls,((e,n)=>{this._loaded=!0,e?this.fire(new t.ErrorEvent(e)):n&&(this.video=n,this.video.loop=!0,this.video.setAttribute("playsinline",""),this.video.addEventListener("playing",(()=>{this.map.triggerRepaint()})),this.map&&this.video.play(),this._finishLoading())}))}pause(){this.video&&this.video.pause()}play(){this.video&&this.video.play()}seek(e){if(this.video){const n=this.video.seekable;e<n.start(0)||e>n.end(0)?this.fire(new t.ErrorEvent(new t.ValidationError("sources.".concat(this.id),null,"Playback for this video can be set only between the ".concat(n.start(0)," and ").concat(n.end(0),"-second mark.")))):this.video.currentTime=e}}getVideo(){return this.video}onAdd(t){this.map||(this.map=t,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))}prepare(){if(0===Object.keys(this.tiles).length||this.video.readyState<2)return;const e=this.map.painter.context,n=e.gl;this.texture?this.video.paused||(this.texture.bind(n.LINEAR,n.CLAMP_TO_EDGE),n.texSubImage2D(n.TEXTURE_2D,0,0,0,n.RGBA,n.UNSIGNED_BYTE,this.video)):(this.texture=new t.Texture(e,this.video,n.RGBA),this.texture.bind(n.LINEAR,n.CLAMP_TO_EDGE),this.width=this.video.videoWidth,this.height=this.video.videoHeight),this._prepareData(e)}serialize(){return{type:"video",urls:this.urls,coordinates:this.coordinates}}hasTransition(){return this.video&&!this.video.paused}},image:Ct,canvas:class extends Ct{constructor(e,n,r,i){super(e,n,r,i),n.coordinates?Array.isArray(n.coordinates)&&4===n.coordinates.length&&!n.coordinates.some((t=>!Array.isArray(t)||2!==t.length||t.some((t=>"number"!=typeof t))))||this.fire(new t.ErrorEvent(new t.ValidationError("sources.".concat(e),null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new t.ErrorEvent(new t.ValidationError("sources.".concat(e),null,'missing required property "coordinates"'))),n.animate&&"boolean"!=typeof n.animate&&this.fire(new t.ErrorEvent(new t.ValidationError("sources.".concat(e),null,'optional "animate" property must be a boolean value'))),n.canvas?"string"==typeof n.canvas||n.canvas instanceof t.window.HTMLCanvasElement||this.fire(new t.ErrorEvent(new t.ValidationError("sources.".concat(e),null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new t.ErrorEvent(new t.ValidationError("sources.".concat(e),null,'missing required property "canvas"'))),this.options=n,this.animate=void 0===n.animate||n.animate}load(){this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof t.window.HTMLCanvasElement?this.options.canvas:t.window.document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new t.ErrorEvent(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading())}getCanvas(){return this.canvas}onAdd(t){this.map=t,this.load(),this.canvas&&this.animate&&this.play()}onRemove(){this.pause()}prepare(){let e=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,e=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,e=!0),this._hasInvalidDimensions())return;if(0===Object.keys(this.tiles).length)return;const n=this.map.painter.context;this.texture?(e||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):this.texture=new t.Texture(n,this.canvas,n.gl.RGBA,{premultiply:!0}),this._prepareData(n)}serialize(){return{type:"canvas",coordinates:this.coordinates}}hasTransition(){return this._playing}_hasInvalidDimensions(){for(const t of[this.canvas.width,this.canvas.height])if(isNaN(t)||t<=0)return!0;return!1}},custom:class extends t.Evented{constructor(e,n,r,i){super(),this.id=e,this.type="custom",this._dataType="raster",this._dispatcher=r,this._implementation=n,this.setEventedParent(i),this.scheme="xyz",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this._loaded=!1,this.roundZoom=!0,this._implementation||this.fire(new t.ErrorEvent(new Error("Missing implementation for ".concat(this.id," custom source")))),this._implementation.loadTile||this.fire(new t.ErrorEvent(new Error("Missing loadTile implementation for ".concat(this.id," custom source")))),this._implementation.bounds&&(this.tileBounds=new R(this._implementation.bounds,this.minzoom,this.maxzoom)),n.update=this._update.bind(this),n.clearTiles=this._clearTiles.bind(this),n.coveringTiles=this._coveringTiles.bind(this),t.extend(this,t.pick(n,["dataType","scheme","minzoom","maxzoom","tileSize","attribution","minTileCacheSize","maxTileCacheSize"]))}serialize(){return t.pick(this,["type","scheme","minzoom","maxzoom","tileSize","attribution"])}load(){this._loaded=!0,this.fire(new t.Event("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new t.Event("data",{dataType:"source",sourceDataType:"content"}))}loaded(){return this._loaded}onAdd(e){this._map=e,this._loaded=!1,this.fire(new t.Event("dataloading",{dataType:"source"})),this._implementation.onAdd&&this._implementation.onAdd(e),this.load()}onRemove(t){this._implementation.onRemove&&this._implementation.onRemove(t)}hasTile(t){if(this._implementation.hasTile){const{x:e,y:n,z:r}=t.canonical;return this._implementation.hasTile({x:e,y:n,z:r})}return!this.tileBounds||this.tileBounds.contains(t.canonical)}loadTile(e,n){const{x:r,y:i,z:o}=e.tileID.canonical,a=new t.window.AbortController;e.request=Promise.resolve(this._implementation.loadTile({x:r,y:i,z:o},{signal:a.signal})).then(function(r){return delete e.request,e.aborted?(e.state="unloaded",n(null)):void 0===r?(e.state="errored",n(null)):null===r?(this.loadTileData(e,{width:this.tileSize,height:this.tileSize,data:null}),e.state="loaded",n(null)):function(e){return e instanceof t.window.ImageData||e instanceof t.window.HTMLCanvasElement||e instanceof t.window.ImageBitmap||e instanceof t.window.HTMLImageElement}(r)?(this.loadTileData(e,r),e.state="loaded",void n(null)):(e.state="errored",n(new Error("Can't infer data type for ".concat(this.id,", only raster data supported at the moment"))))}.bind(this)).catch((t=>{20!==t.code&&(e.state="errored",n(t))})),e.request.cancel=()=>a.abort()}loadTileData(t,e){Mt.loadTileData(t,e,this._map.painter)}unloadTileData(t){Mt.unloadTileData(t,this._map.painter)}unloadTile(t,e){if(this.unloadTileData(t),this._implementation.unloadTile){const{x:e,y:n,z:r}=t.tileID.canonical;this._implementation.unloadTile({x:e,y:n,z:r})}e()}abortTile(t,e){t.request&&t.request.cancel&&(t.request.cancel(),delete t.request),e()}hasTransition(){return!1}_coveringTiles(){return this._map.transform.coveringTiles({tileSize:this.tileSize,minzoom:this.minzoom,maxzoom:this.maxzoom,roundZoom:this.roundZoom}).map((t=>({x:t.canonical.x,y:t.canonical.y,z:t.canonical.z})))}_clearTiles(){this._map.style._clearSource(this.id)}_update(){this.fire(new t.Event("data",{dataType:"source",sourceDataType:"content"}))}}},kt=function(e,n,r,i){const o=new Pt[n.type](e,n,r,i);if(o.id!==e)throw new Error("Expected Source id to be ".concat(e," instead of ").concat(o.id));return t.bindAll(["load","abort","unload","serialize","prepare"],o),o};function It(e,n){const r=t.identity([]);return t.scale(r,r,[.5*e.width,.5*-e.height,1]),t.translate(r,r,[1,-1,0]),t.multiply(r,r,e.calculateProjMatrix(n.toUnwrapped())),Float32Array.from(r)}function Ot(t,e,n,r,i,o,a){let s=arguments.length>7&&void 0!==arguments[7]&&arguments[7];const l=t.tilesIn(r,a,s);l.sort(jt);const c=[];for(const h of l)c.push({wrappedTileID:h.tile.tileID.wrapped().key,queryResults:h.tile.queryRenderedFeatures(e,n,t._state,h,i,o,It(t.transform,h.tile.tileID),s)});const u=function(t){const e={},n={};for(const r of t){const t=r.queryResults,i=r.wrappedTileID,o=n[i]=n[i]||{};for(const n in t){const r=t[n],i=o[n]=o[n]||{},a=e[n]=e[n]||[];for(const t of r)i[t.featureIndex]||(i[t.featureIndex]=!0,a.push(t))}}return e}(c);for(const h in u)u[h].forEach((e=>{const n=e.feature,r=n.layer;r&&"background"!==r.type&&"sky"!==r.type&&(n.source=r.source,r["source-layer"]&&(n.sourceLayer=r["source-layer"]),n.state=void 0!==n.id?t.getFeatureState(r["source-layer"],n.id):{})}));return u}function Lt(t,e){const n=t.getRenderableIds().map((e=>t.getTileByID(e))),r=[],i={};for(let o=0;o<n.length;o++){const t=n[o],a=t.tileID.canonical.key;i[a]||(i[a]=!0,t.querySourceFeatures(r,e))}return r}function jt(t,e){const n=t.tileID,r=e.tileID;return n.overscaledZ-r.overscaledZ||n.canonical.y-r.canonical.y||n.wrap-r.wrap||n.canonical.x-r.canonical.x}function zt(){return null!=fo.workerClass?new fo.workerClass:new t.window.Worker(fo.workerUrl)}const Rt="mapboxgl_preloaded_worker_pool";class Dt{constructor(){this.active={}}acquire(t){if(!this.workers)for(this.workers=[];this.workers.length<Dt.workerCount;)this.workers.push(new zt);return this.active[t]=!0,this.workers.slice()}release(t){delete this.active[t],0===this.numActive()&&(this.workers.forEach((t=>{t.terminate()})),this.workers=null)}isPreloaded(){return!!this.active[Rt]}numActive(){return Object.keys(this.active).length}}let Bt;function Ft(){return Bt||(Bt=new Dt),Bt}function Nt(e,n){const r={};for(const t in e)"ref"!==t&&(r[t]=e[t]);return t.refProperties.forEach((t=>{t in n&&(r[t]=n[t])})),r}function Ut(t){t=t.slice();const e=Object.create(null);for(let n=0;n<t.length;n++)e[t[n].id]=t[n];for(let n=0;n<t.length;n++)"ref"in t[n]&&(t[n]=Nt(t[n],e[t[n].ref]));return t}Dt.workerCount=2;const Vt={setStyle:"setStyle",addLayer:"addLayer",removeLayer:"removeLayer",setPaintProperty:"setPaintProperty",setLayoutProperty:"setLayoutProperty",setFilter:"setFilter",addSource:"addSource",removeSource:"removeSource",setGeoJSONSourceData:"setGeoJSONSourceData",setLayerZoomRange:"setLayerZoomRange",setLayerProperty:"setLayerProperty",setCenter:"setCenter",setZoom:"setZoom",setBearing:"setBearing",setPitch:"setPitch",setSprite:"setSprite",setGlyphs:"setGlyphs",setTransition:"setTransition",setLight:"setLight",setTerrain:"setTerrain",setFog:"setFog",setProjection:"setProjection"};function Wt(t,e,n){n.push({command:Vt.addSource,args:[t,e[t]]})}function Gt(t,e,n){e.push({command:Vt.removeSource,args:[t]}),n[t]=!0}function qt(t,e,n,r){Gt(t,n,r),Wt(t,e,n)}function Ht(t,n,r){let i;for(i in t[r])if(t[r].hasOwnProperty(i)&&"data"!==i&&!e(t[r][i],n[r][i]))return!1;for(i in n[r])if(n[r].hasOwnProperty(i)&&"data"!==i&&!e(t[r][i],n[r][i]))return!1;return!0}function Zt(t,n,r,i,o,a){let s;for(s in n=n||{},t=t||{})t.hasOwnProperty(s)&&(e(t[s],n[s])||r.push({command:a,args:[i,s,n[s],o]}));for(s in n)n.hasOwnProperty(s)&&!t.hasOwnProperty(s)&&(e(t[s],n[s])||r.push({command:a,args:[i,s,n[s],o]}))}function Xt(t){return t.id}function Yt(t,e){return t[e.id]=e,t}class Kt{constructor(t,e){this.reset(t,e)}reset(t,e){this.points=t||[],this._distances=[0];for(let n=1;n<this.points.length;n++)this._distances[n]=this._distances[n-1]+this.points[n].dist(this.points[n-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(e||0,.5*this.length),this.paddedLength=this.length-2*this.padding}lerp(e){if(1===this.points.length)return this.points[0];e=t.clamp(e,0,1);let n=1,r=this._distances[n];const i=e*this.paddedLength+this.padding;for(;r<i&&n<this._distances.length;)r=this._distances[++n];const o=n-1,a=this._distances[o],s=r-a,l=s>0?(i-a)/s:0;return this.points[o].mult(1-l).add(this.points[n].mult(l))}}class $t{constructor(t,e,n){const r=this.boxCells=[],i=this.circleCells=[];this.xCellCount=Math.ceil(t/n),this.yCellCount=Math.ceil(e/n);for(let o=0;o<this.xCellCount*this.yCellCount;o++)r.push([]),i.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=t,this.height=e,this.xScale=this.xCellCount/t,this.yScale=this.yCellCount/e,this.boxUid=0,this.circleUid=0}keysLength(){return this.boxKeys.length+this.circleKeys.length}insert(t,e,n,r,i){this._forEachCell(e,n,r,i,this._insertBoxCell,this.boxUid++),this.boxKeys.push(t),this.bboxes.push(e),this.bboxes.push(n),this.bboxes.push(r),this.bboxes.push(i)}insertCircle(t,e,n,r){this._forEachCell(e-r,n-r,e+r,n+r,this._insertCircleCell,this.circleUid++),this.circleKeys.push(t),this.circles.push(e),this.circles.push(n),this.circles.push(r)}_insertBoxCell(t,e,n,r,i,o){this.boxCells[i].push(o)}_insertCircleCell(t,e,n,r,i,o){this.circleCells[i].push(o)}_query(t,e,n,r,i,o){if(n<0||t>this.width||r<0||e>this.height)return!i&&[];const a=[];if(t<=0&&e<=0&&this.width<=n&&this.height<=r){if(i)return!0;for(let t=0;t<this.boxKeys.length;t++)a.push({key:this.boxKeys[t],x1:this.bboxes[4*t],y1:this.bboxes[4*t+1],x2:this.bboxes[4*t+2],y2:this.bboxes[4*t+3]});for(let t=0;t<this.circleKeys.length;t++){const e=this.circles[3*t],n=this.circles[3*t+1],r=this.circles[3*t+2];a.push({key:this.circleKeys[t],x1:e-r,y1:n-r,x2:e+r,y2:n+r})}return o?a.filter(o):a}return this._forEachCell(t,e,n,r,this._queryCell,a,{hitTest:i,seenUids:{box:{},circle:{}}},o),i?a.length>0:a}_queryCircle(t,e,n,r,i){const o=t-n,a=t+n,s=e-n,l=e+n;if(a<0||o>this.width||l<0||s>this.height)return!r&&[];const c=[];return this._forEachCell(o,s,a,l,this._queryCellCircle,c,{hitTest:r,circle:{x:t,y:e,radius:n},seenUids:{box:{},circle:{}}},i),r?c.length>0:c}query(t,e,n,r,i){return this._query(t,e,n,r,!1,i)}hitTest(t,e,n,r,i){return this._query(t,e,n,r,!0,i)}hitTestCircle(t,e,n,r){return this._queryCircle(t,e,n,!0,r)}_queryCell(t,e,n,r,i,o,a,s){const l=a.seenUids,c=this.boxCells[i];if(null!==c){const i=this.bboxes;for(const u of c)if(!l.box[u]){l.box[u]=!0;const c=4*u;if(t<=i[c+2]&&e<=i[c+3]&&n>=i[c+0]&&r>=i[c+1]&&(!s||s(this.boxKeys[u]))){if(a.hitTest)return o.push(!0),!0;o.push({key:this.boxKeys[u],x1:i[c],y1:i[c+1],x2:i[c+2],y2:i[c+3]})}}}const u=this.circleCells[i];if(null!==u){const i=this.circles;for(const c of u)if(!l.circle[c]){l.circle[c]=!0;const u=3*c;if(this._circleAndRectCollide(i[u],i[u+1],i[u+2],t,e,n,r)&&(!s||s(this.circleKeys[c]))){if(a.hitTest)return o.push(!0),!0;{const t=i[u],e=i[u+1],n=i[u+2];o.push({key:this.circleKeys[c],x1:t-n,y1:e-n,x2:t+n,y2:e+n})}}}}}_queryCellCircle(t,e,n,r,i,o,a,s){const l=a.circle,c=a.seenUids,u=this.boxCells[i];if(null!==u){const t=this.bboxes;for(const e of u)if(!c.box[e]){c.box[e]=!0;const n=4*e;if(this._circleAndRectCollide(l.x,l.y,l.radius,t[n+0],t[n+1],t[n+2],t[n+3])&&(!s||s(this.boxKeys[e])))return o.push(!0),!0}}const h=this.circleCells[i];if(null!==h){const t=this.circles;for(const e of h)if(!c.circle[e]){c.circle[e]=!0;const n=3*e;if(this._circlesCollide(t[n],t[n+1],t[n+2],l.x,l.y,l.radius)&&(!s||s(this.circleKeys[e])))return o.push(!0),!0}}}_forEachCell(t,e,n,r,i,o,a,s){const l=this._convertToXCellCoord(t),c=this._convertToYCellCoord(e),u=this._convertToXCellCoord(n),h=this._convertToYCellCoord(r);for(let d=l;d<=u;d++)for(let l=c;l<=h;l++)if(i.call(this,t,e,n,r,this.xCellCount*l+d,o,a,s))return}_convertToXCellCoord(t){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(t*this.xScale)))}_convertToYCellCoord(t){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(t*this.yScale)))}_circlesCollide(t,e,n,r,i,o){const a=r-t,s=i-e,l=n+o;return l*l>a*a+s*s}_circleAndRectCollide(t,e,n,r,i,o,a){const s=(o-r)/2,l=Math.abs(t-(r+s));if(l>s+n)return!1;const c=(a-i)/2,u=Math.abs(e-(i+c));if(u>c+n)return!1;if(l<=s||u<=c)return!0;const h=l-s,d=u-c;return h*h+d*d<=n*n}}const Jt={unknown:0,flipRequired:1,flipNotRequired:2},Qt=Math.tan(85*Math.PI/180);function te(e,n,r,i,o,a,s){const l=t.create();if(r)if("globe"===a.name){const e=t.calculateGlobeLabelMatrix(o,n);t.multiply(l,l,e)}else{const e=v([],s);l[0]=e[0],l[1]=e[1],l[4]=e[2],l[5]=e[3],i||t.rotateZ(l,l,o.angle)}else t.multiply(l,o.labelPlaneMatrix,e);return l}function ee(t,e,n,r,i,o,a){const s=te(t,e,n,r,i,o,a);return"globe"===o.name&&n||(s[2]=s[6]=s[10]=s[14]=0),s}function ne(e,n,r,i,o,a,s){if(r){if("globe"===a.name){const l=te(e,n,r,i,o,a,s);return t.invert(l,l),t.multiply(l,e,l),l}{const n=t.clone(e),r=t.identity([]);return r[0]=s[0],r[1]=s[1],r[4]=s[2],r[5]=s[3],t.multiply(n,n,r),i||t.rotateZ(n,n,-o.angle),n}}return o.glCoordMatrix}function re(e,n,r,i){const o=[e,n,r,1];r?t.transformMat4$1(o,o,i):pe(o,o,i);const a=o[3];return o[0]/=a,o[1]/=a,o[2]/=a,o}function ie(t,e){return Math.min(.5+t/e*.5,1.5)}function oe(t,e){const n=t[0]/t[3],r=t[1]/t[3];return n>=-e[0]&&n<=e[0]&&r>=-e[1]&&r<=e[1]}function ae(e,n,r,i,o,a,s,l,c,u){const h=r.transform,d=i?e.textSizeData:e.iconSizeData,f=t.evaluateSizeForZoom(d,r.transform.zoom),p="globe"===h.projection.name,m=[256/r.width*2+1,256/r.height*2+1],g=i?e.text.dynamicLayoutVertexArray:e.icon.dynamicLayoutVertexArray;g.clear();let y=null;p&&(y=i?e.text.globeExtVertexArray:e.icon.globeExtVertexArray);const v=e.lineVertexArray,_=i?e.text.placedSymbolArray:e.icon.placedSymbolArray,b=r.transform.width/r.transform.height;let x,w=!1;for(let S=0;S<_.length;S++){const i=_.get(S),{numGlyphs:p,writingMode:E}=i;if(E!==t.WritingMode.vertical||w||x===t.WritingMode.horizontal||(w=!0),x=E,(i.hidden||E===t.WritingMode.vertical)&&!w){fe(p,g);continue}w=!1;const T=new t.Point(i.tileAnchorX,i.tileAnchorY);let{x:M,y:A,z:C}=h.projection.projectTilePoint(T.x,T.y,u.canonical);if(c){const[t,e,n]=c(T);M+=t,A+=e,C+=n}const P=[M,A,C,1];if(t.transformMat4$1(P,P,n),!oe(P,m)){fe(p,g);continue}const k=ie(r.transform.cameraToCenterDistance,P[3]),I=t.evaluateSizeForFeature(d,f,i),O=s?I/k:I*k,L=re(M,A,C,o);if(L[3]<=0){fe(p,g);continue}let j={};const z=s?null:c,R=ce(i,O,!1,l,n,o,a,e.glyphOffsetArray,v,g,y,L,T,j,b,z,h.projection,u,s);w=R.useVertical,z&&R.needsFlipping&&(j={}),(R.notEnoughRoom||w||R.needsFlipping&&ce(i,O,!0,l,n,o,a,e.glyphOffsetArray,v,g,y,L,T,j,b,z,h.projection,u,s).notEnoughRoom)&&fe(p,g)}i?(e.text.dynamicLayoutVertexBuffer.updateData(g),y&&e.text.globeExtVertexBuffer.updateData(y)):(e.icon.dynamicLayoutVertexBuffer.updateData(g),y&&e.icon.globeExtVertexBuffer.updateData(y))}function se(t,e,n,r,i,o,a,s,l,c,u,h,d,f,p,m){const{lineStartIndex:g,glyphStartIndex:y,segment:v}=s,_=y+s.numGlyphs,b=g+s.lineLength,x=e.getoffsetX(y),w=e.getoffsetX(_-1),S=de(t*x,n,r,i,o,a,v,g,b,l,c,u,h,d,!0,f,p,m);if(!S)return null;const E=de(t*w,n,r,i,o,a,v,g,b,l,c,u,h,d,!0,f,p,m);return E?{first:S,last:E}:null}function le(e,n,r,i){return e===t.WritingMode.horizontal&&Math.abs(i)>Math.abs(r)?{useVertical:!0}:e===t.WritingMode.vertical?i>0?{needsFlipping:!0}:null:n!==Jt.unknown&&function(t,e){return 0===t||Math.abs(e/t)>Qt}(r,i)?n===Jt.flipRequired?{needsFlipping:!0}:null:r<0?{needsFlipping:!0}:null}function ce(e,n,r,i,o,a,s,l,c,u,h,d,f,p,m,g,y,v,_){const b=n/24,x=e.lineOffsetX*b,w=e.lineOffsetY*b,{lineStartIndex:S,glyphStartIndex:E,numGlyphs:T,segment:M,writingMode:A,flipState:C}=e,P=S+e.lineLength,k=e=>{if(h){const[n,r,i]=e.up,o=u.length;t.updateGlobeVertexNormal(h,o+0,n,r,i),t.updateGlobeVertexNormal(h,o+1,n,r,i),t.updateGlobeVertexNormal(h,o+2,n,r,i),t.updateGlobeVertexNormal(h,o+3,n,r,i)}const[n,r,i]=e.point;t.addDynamicAttributes(u,n,r,i,e.angle)};if(T>1){const t=se(b,l,x,w,r,d,f,e,c,a,p,g,!1,y,v,_);if(!t)return{notEnoughRoom:!0};if(i&&!r){let[n,r,i]=t.first.point,[o,a,l]=t.last.point;[n,r]=re(n,r,i,s),[o,a]=re(o,a,l,s);const c=le(A,C,(o-n)*m,a-r);if(e.flipState=c&&c.needsFlipping?Jt.flipRequired:Jt.flipNotRequired,c)return c}k(t.first);for(let e=E+1;e<E+T-1;e++){const t=de(b*l.getoffsetX(e),x,w,r,d,f,M,S,P,c,a,p,g,!1,!1,y,v,_);if(!t)return u.length-=4*(e-E),{notEnoughRoom:!0};k(t)}k(t.last)}else{if(i&&!r){const n=re(f.x,f.y,0,o),r=S+M+1,i=new t.Point(c.getx(r),c.gety(r)),a=re(i.x,i.y,0,o),s=a[3]>0?a:he(f,i,n,1,o,void 0,y,v.canonical),l=le(A,C,(s[0]-n[0])*m,s[1]-n[1]);if(e.flipState=l&&l.needsFlipping?Jt.flipRequired:Jt.flipNotRequired,l)return l}const n=de(b*l.getoffsetX(E),x,w,r,d,f,M,S,P,c,a,p,g,!1,!1,y,v,_);if(!n)return{notEnoughRoom:!0};k(n)}return{}}function ue(t,e,n,r,i){const{x:o,y:a,z:s}=r.projectTilePoint(t.x,t.y,e);if(!i)return re(o,a,s,n);const[l,c,u]=i(t);return re(o+l,a+c,s+u,n)}function he(e,n,r,i,o,a,s,l){const c=ue(e.sub(n)._unit()._add(e),l,o,s,a);return t.sub(c,r,c),t.normalize(c,c),t.scaleAndAdd(c,r,c,i)}function de(e,n,r,i,o,a,s,l,c,u,h,d,f,p,m,g,y,v){const _=i?e-n:e+n;let b=_>0?1:-1,x=0;i&&(b*=-1,x=Math.PI),b<0&&(x+=Math.PI);let w=l+s+(b>0?0:1)|0,S=o,E=o,T=0,M=0;const A=Math.abs(_),C=[],P=[];let k=a,I=k;const O=()=>he(I,k,E,A-T+1,h,f,g,y.canonical);for(;T+M<=A;){if(w+=b,w<l||w>=c)return null;if(E=S,I=k,C.push(E),p&&P.push(I),k=new t.Point(u.getx(w),u.gety(w)),S=d[w],!S){const t=ue(k,y.canonical,h,g,f);S=t[3]>0?d[w]=t:O()}T+=M,M=t.distance(E,S)}m&&f&&(d[w]&&(S=O(),M=t.distance(E,S)),d[w]=S);const L=(A-T)/M,j=k.sub(I)._mult(L)._add(I),z=t.sub([],S,E),R=t.scaleAndAdd([],E,z,L);let D=[0,0,1],B=z[0],F=z[1];if(v&&(D=g.upVector(y.canonical,j.x,j.y),0!==D[0]||0!==D[1]||1!==D[2])){const e=[D[2],0,-D[0]],n=t.cross([],D,e);t.normalize(e,e),t.normalize(n,n),B=t.dot(z,e),F=t.dot(z,n)}if(r){const e=t.cross([],D,z);t.normalize(e,e),t.scaleAndAdd(R,R,e,r*b)}const N=x+Math.atan2(F,B);return C.push(R),p&&P.push(j),{point:R,angle:N,path:C,tilePath:P,up:D}}function fe(t,e){const n=e.length,r=n+4*t;e.resize(r),e.float32.fill(-1/0,4*n,4*r)}function pe(t,e,n){const r=e[0],i=e[1];return t[0]=n[0]*r+n[4]*i+n[12],t[1]=n[1]*r+n[5]*i+n[13],t[3]=n[3]*r+n[7]*i+n[15],t}const me=100;class ge{constructor(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new $t(t.width+200,t.height+200,25),r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:new $t(t.width+200,t.height+200,25);this.transform=t,this.grid=n,this.ignoredGrid=r,this.pitchfactor=Math.cos(t._pitch)*t.cameraToCenterDistance,this.screenRightBoundary=t.width+me,this.screenBottomBoundary=t.height+me,this.gridRightBoundary=t.width+200,this.gridBottomBoundary=t.height+200,this.fogState=e}placeCollisionBox(t,e,n,r,i,o,a,s){let l=n.projectedAnchorX,c=n.projectedAnchorY,u=n.projectedAnchorZ;const h=n.elevation,d=n.tileID,f=t.getProjection();if(h&&d){const[t,e,r]=f.upVector(d.canonical,n.tileAnchorX,n.tileAnchorY),i=f.upVectorScale(d.canonical,this.transform.center.lat,this.transform.worldSize).metersToTile;l+=t*h*i,c+=e*h*i,u+=r*h*i}const p=this.projectAndGetPerspectiveRatio(a,l,c,u,n.tileID,"globe"===f.name||!!h||this.transform.pitch>0,f),m=o*p.perspectiveRatio,g=(n.x1*e+r.x-n.padding)*m+p.point.x,y=(n.y1*e+r.y-n.padding)*m+p.point.y,v=(n.x2*e+r.x+n.padding)*m+p.point.x,_=(n.y2*e+r.y+n.padding)*m+p.point.y,b=p.perspectiveRatio<=.55||p.occluded;return!this.isInsideGrid(g,y,v,_)||!i&&this.grid.hitTest(g,y,v,_,s)||b?{box:[],offscreen:!1,occluded:p.occluded}:{box:[g,y,v,_],offscreen:this.isOffscreen(g,y,v,_),occluded:!1}}placeCollisionCircles(e,n,r,i,o,a,s,l,c,u,h,d,f,p,m){const g=[],y=this.transform.elevation,v=e.getProjection(),_=y?y.getAtTileOffsetFunc(m,this.transform.center.lat,this.transform.worldSize,v):null,b=new t.Point(r.tileAnchorX,r.tileAnchorY);let{x:x,y:w,z:S}=v.projectTilePoint(b.x,b.y,m.canonical);if(_){const[t,e,n]=_(b);x+=t,w+=e,S+=n}const E="globe"===v.name,T=this.projectAndGetPerspectiveRatio(s,x,w,S,m,E||!!y||this.transform.pitch>0,v),{perspectiveRatio:M}=T,A=(h?a/M:a*M)/t.ONE_EM,C=re(x,w,S,l),P=T.signedDistanceFromCamera>0?se(A,o,r.lineOffsetX*A,r.lineOffsetY*A,!1,C,b,r,i,l,{},y&&!h?_:null,h&&!!y,v,m,h):null;let k=!1,I=!1,O=!0;if(P&&!T.occluded){const e=.5*f*M+p,r=new t.Point(-100,-100),i=new t.Point(this.screenRightBoundary,this.screenBottomBoundary),o=new Kt,{first:a,last:s}=P,l=a.path.length;let h=[];for(let t=l-1;t>=1;t--)h.push(a.path[t]);for(let t=1;t<s.path.length;t++)h.push(s.path[t]);const m=2.5*e;c&&(h=h.map(((t,e)=>{let[n,r,i]=t;return _&&!E&&(i=_(e<l-1?a.tilePath[l-1-e]:s.tilePath[e-l+2])[2]),re(n,r,i,c)})),h.some((t=>t[3]<=0))&&(h=[]));let y=[];if(h.length>0){let e=1/0,n=-1/0,o=1/0,a=-1/0;for(const t of h)e=Math.min(e,t[0]),o=Math.min(o,t[1]),n=Math.max(n,t[0]),a=Math.max(a,t[1]);n>=r.x&&e<=i.x&&a>=r.y&&o<=i.y&&(y=[h.map((e=>new t.Point(e[0],e[1])))],(e<r.x||n>i.x||o<r.y||a>i.y)&&(y=t.clipLine(y,r.x,r.y,i.x,i.y)))}for(const t of y){o.reset(t,.25*e);let r=0;r=o.length<=.5*e?1:Math.ceil(o.paddedLength/m)+1;for(let t=0;t<r;t++){const i=t/Math.max(r-1,1),a=o.lerp(i),s=a.x+me,l=a.y+me;g.push(s,l,e,0);const c=s-e,h=l-e,f=s+e,p=l+e;if(O=O&&this.isOffscreen(c,h,f,p),I=I||this.isInsideGrid(c,h,f,p),!n&&this.grid.hitTestCircle(s,l,e,d)&&(k=!0,!u))return{circles:[],offscreen:!1,collisionDetected:k,occluded:!1}}}}return{circles:!u&&k||!I?[]:g,offscreen:O,collisionDetected:k,occluded:T.occluded}}queryRenderedSymbols(e){if(0===e.length||0===this.grid.keysLength()&&0===this.ignoredGrid.keysLength())return{};const n=[];let r=1/0,i=1/0,o=-1/0,a=-1/0;for(const u of e){const e=new t.Point(u.x+me,u.y+me);r=Math.min(r,e.x),i=Math.min(i,e.y),o=Math.max(o,e.x),a=Math.max(a,e.y),n.push(e)}const s=this.grid.query(r,i,o,a).concat(this.ignoredGrid.query(r,i,o,a)),l={},c={};for(const u of s){const e=u.key;if(void 0===l[e.bucketInstanceId]&&(l[e.bucketInstanceId]={}),l[e.bucketInstanceId][e.featureIndex])continue;const r=[new t.Point(u.x1,u.y1),new t.Point(u.x2,u.y1),new t.Point(u.x2,u.y2),new t.Point(u.x1,u.y2)];t.polygonIntersectsPolygon(n,r)&&(l[e.bucketInstanceId][e.featureIndex]=!0,void 0===c[e.bucketInstanceId]&&(c[e.bucketInstanceId]=[]),c[e.bucketInstanceId].push(e.featureIndex))}return c}insertCollisionBox(t,e,n,r,i){(e?this.ignoredGrid:this.grid).insert({bucketInstanceId:n,featureIndex:r,collisionGroupID:i},t[0],t[1],t[2],t[3])}insertCollisionCircles(t,e,n,r,i){const o=e?this.ignoredGrid:this.grid,a={bucketInstanceId:n,featureIndex:r,collisionGroupID:i};for(let s=0;s<t.length;s+=4)o.insertCircle(a,t[s],t[s+1],t[s+2])}projectAndGetPerspectiveRatio(e,n,r,i,o,a,s){const l=[n,r,i,1];let c=!1;if(i||this.transform.pitch>0){if(t.transformMat4$1(l,l,e),this.fogState&&o&&"globe"!==s.name){const e=function(e,n,r,i,o,a){const s=a.calculateFogTileMatrix(o),l=[n,r,i];return t.transformMat4(l,l,s),T(e,l,a.pitch,a._fov)}(this.fogState,n,r,i,o.toUnwrapped(),this.transform);c=e>.9}}else pe(l,l,e);const u=l[3];return{point:new t.Point((l[0]/u+1)/2*this.transform.width+me,(-l[1]/u+1)/2*this.transform.height+me),perspectiveRatio:Math.min(.5+this.transform.getCameraToCenterDistance(s)/u*.5,1.5),signedDistanceFromCamera:u,occluded:a&&l[2]>u||c}}isOffscreen(t,e,n,r){return n<me||t>=this.screenRightBoundary||r<me||e>this.screenBottomBoundary}isInsideGrid(t,e,n,r){return n>=0&&t<this.gridRightBoundary&&r>=0&&e<this.gridBottomBoundary}getViewportMatrix(){const e=t.identity([]);return t.translate(e,e,[-100,-100,0]),e}}function ye(e,n,r){const i=n.createTileMatrix(e,e.worldSize,r.toUnwrapped());return t.multiply(new Float32Array(16),e.projMatrix,i)}function ve(t,e,n){if(e.projection.name===n.projection.name)return t.projMatrix;const r=n.clone();return r.setProjection(e.projection),ye(r,e.getProjection(),t)}function _e(t,e,n){return e.name===n.projection.name?t.projMatrix:ye(n,e,t)}class be{constructor(t,e,n,r){this.opacity=t?Math.max(0,Math.min(1,t.opacity+(t.placed?e:-e))):r&&n?1:0,this.placed=n}isHidden(){return 0===this.opacity&&!this.placed}}class xe{constructor(t,e,n,r,i){let o=arguments.length>5&&void 0!==arguments[5]&&arguments[5];this.text=new be(t?t.text:null,e,n,i),this.icon=new be(t?t.icon:null,e,r,i),this.clipped=o}isHidden(){return this.text.isHidden()&&this.icon.isHidden()}}class we{constructor(t,e,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];this.text=t,this.icon=e,this.skipFade=n,this.clipped=r}}class Se{constructor(){this.invProjMatrix=t.create(),this.viewportMatrix=t.create(),this.circles=[]}}class Ee{constructor(t,e,n,r,i){this.bucketInstanceId=t,this.featureIndex=e,this.sourceLayerIndex=n,this.bucketIndex=r,this.tileID=i}}class Te{constructor(t){this.crossSourceCollisions=t,this.maxGroupID=0,this.collisionGroups={}}get(t){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[t]){const e=++this.maxGroupID;this.collisionGroups[t]={ID:e,predicate:t=>t.collisionGroupID===e}}return this.collisionGroups[t]}}function Me(e,n,r,i,o){const{horizontalAlign:a,verticalAlign:s}=t.getAnchorAlignment(e),l=-(a-.5)*n,c=-(s-.5)*r,u=t.evaluateVariableOffset(e,i);return new t.Point(l+u[0]*o,c+u[1]*o)}function Ae(e,n,r,i,o){const a=new t.Point(e,n);return r&&a._rotate(i?o:-o),a}class Ce{constructor(t,e,n,r,i){this.transform=t.clone(),this.projection=t.projection.name,this.collisionIndex=new ge(this.transform,i),this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=e,this.retainedQueryData={},this.collisionGroups=new Te(n),this.collisionCircleArrays={},this.prevPlacement=r,r&&(r.prevPlacement=void 0),this.placedOrientations={}}getBucketParts(e,n,r,i){const o=r.getBucket(n),a=r.latestFeatureIndex;if(!o||!a||n.id!==o.layerIds[0])return;const s=o.layers[0].layout,l=r.collisionBoxArray,c=Math.pow(2,this.transform.zoom-r.tileID.overscaledZ),u=r.tileSize/t.EXTENT,h=r.tileID.toUnwrapped();this.transform.setProjection(o.projection);const d=(f=r.tileID,p=o.getProjection(),m=this.transform,p.name===this.projection?m.calculateProjMatrix(f.toUnwrapped()):ye(m,p,f));var f,p,m;const g="map"===s.get("text-pitch-alignment"),y="map"===s.get("text-rotation-alignment");n.compileFilter();const v=n.dynamicFilter(),_=n.dynamicFilterNeedsFeature(),b=this.transform.calculatePixelsToTileUnitsMatrix(r),x=ee(d,r.tileID.canonical,g,y,this.transform,o.getProjection(),b);let w=null;if(g){const e=ne(d,r.tileID.canonical,g,y,this.transform,o.getProjection(),b);w=t.multiply([],this.transform.labelPlaneMatrix,e)}let S=null;v&&r.latestFeatureIndex&&(S={unwrappedTileID:h,dynamicFilter:v,dynamicFilterNeedsFeature:_,featureIndex:r.latestFeatureIndex}),this.retainedQueryData[o.bucketInstanceId]=new Ee(o.bucketInstanceId,a,o.sourceLayerIndex,o.index,r.tileID);const E={bucket:o,layout:s,posMatrix:d,textLabelPlaneMatrix:x,labelToScreenMatrix:w,clippingData:S,scale:c,textPixelRatio:u,holdingForFade:r.holdingForFade(),collisionBoxArray:l,partiallyEvaluatedTextSize:t.evaluateSizeForZoom(o.textSizeData,this.transform.zoom),partiallyEvaluatedIconSize:t.evaluateSizeForZoom(o.iconSizeData,this.transform.zoom),collisionGroup:this.collisionGroups.get(o.sourceID)};if(i)for(const t of o.sortKeyRanges){const{sortKey:n,symbolInstanceStart:r,symbolInstanceEnd:i}=t;e.push({sortKey:n,symbolInstanceStart:r,symbolInstanceEnd:i,parameters:E})}else e.push({symbolInstanceStart:0,symbolInstanceEnd:o.symbolInstances.length,parameters:E})}attemptAnchorPlacement(t,e,n,r,i,o,a,s,l,c,u,h,d,f,p,m,g,y){const{textOffset0:v,textOffset1:_,crossTileID:b}=h,x=[v,_],w=Me(t,n,r,x,i),S=this.collisionIndex.placeCollisionBox(f,i,e,Ae(w.x,w.y,o,a,this.transform.angle),u,s,l,c.predicate);if(m){const t=f.getSymbolInstanceIconSize(y,this.transform.zoom,h.placedIconSymbolIndex);if(0===this.collisionIndex.placeCollisionBox(f,t,m,Ae(w.x,w.y,o,a,this.transform.angle),u,s,l,c.predicate).box.length)return}if(S.box.length>0){let e;return this.prevPlacement&&this.prevPlacement.variableOffsets[b]&&this.prevPlacement.placements[b]&&this.prevPlacement.placements[b].text&&(e=this.prevPlacement.variableOffsets[b].anchor),this.variableOffsets[b]={textOffset:x,width:n,height:r,anchor:t,textScale:i,prevAnchor:e},this.markUsedJustification(f,t,h,p),f.allowVerticalPlacement&&(this.markUsedOrientation(f,p,h),this.placedOrientations[b]=p),{shift:w,placedGlyphBoxes:S}}}placeLayerBucketPart(e,n,r,i){const{bucket:o,layout:a,posMatrix:s,textLabelPlaneMatrix:l,labelToScreenMatrix:c,clippingData:u,textPixelRatio:h,holdingForFade:d,collisionBoxArray:f,partiallyEvaluatedTextSize:p,partiallyEvaluatedIconSize:m,collisionGroup:g}=e.parameters,y=a.get("text-optional"),v=a.get("icon-optional"),_=a.get("text-allow-overlap"),b=a.get("icon-allow-overlap"),x="map"===a.get("text-rotation-alignment"),w="map"===a.get("text-pitch-alignment"),S="none"!==a.get("icon-text-fit"),E="viewport-y"===a.get("symbol-z-order");this.transform.setProjection(o.projection);let T=_&&(b||!o.hasIconData()||v),M=b&&(_||!o.hasTextData()||y);!o.collisionArrays&&f&&o.deserializeCollisionBoxes(f),r&&i&&o.updateCollisionDebugBuffers(this.transform.zoom,f);const A=(e,i,f)=>{const{crossTileID:E,numVerticalGlyphVertices:A}=e;if(u){const r={zoom:this.transform.zoom,pitch:this.transform.pitch};let i=null;if(u.dynamicFilterNeedsFeature){const t=this.retainedQueryData[o.bucketInstanceId];i=u.featureIndex.loadFeature({featureIndex:e.featureIndex,bucketIndex:t.bucketIndex,sourceLayerIndex:t.sourceLayerIndex,layoutVertexArrayOffset:0})}if(!(0,u.dynamicFilter)(r,i,this.retainedQueryData[o.bucketInstanceId].tileID.canonical,new t.Point(e.tileAnchorX,e.tileAnchorY),this.transform.calculateDistanceTileData(u.unwrappedTileID)))return this.placements[E]=new we(!1,!1,!1,!0),void n.add(E)}if(n.has(E))return;if(d)return void(this.placements[E]=new we(!1,!1,!1));let C=!1,P=!1,k=!0,I=!1,O=!1,L=null,j={box:null,offscreen:null,occluded:null},z={box:null,offscreen:null,occluded:null},R=null,D=null,B=null,F=0,N=0,U=0;f.textFeatureIndex?F=f.textFeatureIndex:e.useRuntimeCollisionCircles&&(F=e.featureIndex),f.verticalTextFeatureIndex&&(N=f.verticalTextFeatureIndex);const V=t=>{t.tileID=this.retainedQueryData[o.bucketInstanceId].tileID;const e=this.transform.elevation;(e||t.elevation)&&(t.elevation=e?e.getAtTileOffset(t.tileID,t.tileAnchorX,t.tileAnchorY):0)},W=f.textBox;if(W){V(W);const n=n=>{let r=t.WritingMode.horizontal;if(o.allowVerticalPlacement&&!n&&this.prevPlacement){const t=this.prevPlacement.placedOrientations[E];t&&(this.placedOrientations[E]=t,r=t,this.markUsedOrientation(o,r,e))}return r},r=(e,n)=>{if(o.allowVerticalPlacement&&A>0&&f.verticalTextBox){for(const r of o.writingModes)if(r===t.WritingMode.vertical?(j=n(),z=j):j=e(),j&&j.box&&j.box.length)break}else j=e()};if(a.get("text-variable-anchor")){let l=a.get("text-variable-anchor");if(this.prevPlacement&&this.prevPlacement.variableOffsets[E]){const t=this.prevPlacement.variableOffsets[E];l.indexOf(t.anchor)>0&&(l=l.filter((e=>e!==t.anchor)),l.unshift(t.anchor))}const c=(t,n,r)=>{const a=o.getSymbolInstanceTextSize(p,e,this.transform.zoom,i),c=(t.x2-t.x1)*a+2*t.padding,u=(t.y2-t.y1)*a+2*t.padding,d=S&&!b?n:null;d&&V(d);let f={box:[],offscreen:!1,occluded:!1};const y=_?2*l.length:l.length;for(let v=0;v<y;++v){const n=this.attemptAnchorPlacement(l[v%l.length],t,c,u,a,x,w,h,s,g,v>=l.length,e,i,o,r,d,p,m);if(n&&(f=n.placedGlyphBoxes,f&&f.box&&f.box.length)){C=!0,L=n.shift;break}}return f};r((()=>c(W,f.iconBox,t.WritingMode.horizontal)),(()=>{const e=f.verticalTextBox;return e&&V(e),o.allowVerticalPlacement&&!(j&&j.box&&j.box.length)&&A>0&&e?c(e,f.verticalIconBox,t.WritingMode.vertical):{box:null,offscreen:null,occluded:null}})),j&&(C=j.box,k=j.offscreen,I=j.occluded);const u=n(!(!j||!j.box));if(!C&&this.prevPlacement){const t=this.prevPlacement.variableOffsets[E];t&&(this.variableOffsets[E]=t,this.markUsedJustification(o,t.anchor,e,u))}}else{const a=(n,r)=>{const a=o.getSymbolInstanceTextSize(p,e,this.transform.zoom,i),l=this.collisionIndex.placeCollisionBox(o,a,n,new t.Point(0,0),_,h,s,g.predicate);return l&&l.box&&l.box.length&&(this.markUsedOrientation(o,r,e),this.placedOrientations[E]=r),l};r((()=>a(W,t.WritingMode.horizontal)),(()=>{const e=f.verticalTextBox;return o.allowVerticalPlacement&&A>0&&e?(V(e),a(e,t.WritingMode.vertical)):{box:null,offscreen:null,occluded:null}})),n(!!(j&&j.box&&j.box.length))}}if(R=j,C=R&&R.box&&R.box.length>0,k=R&&R.offscreen,I=R&&R.occluded,e.useRuntimeCollisionCircles){const n=o.text.placedSymbolArray.get(e.centerJustifiedTextSymbolIndex>=0?e.centerJustifiedTextSymbolIndex:e.verticalPlacedTextSymbolIndex),i=t.evaluateSizeForFeature(o.textSizeData,p,n),u=a.get("text-padding");D=this.collisionIndex.placeCollisionCircles(o,_,n,o.lineVertexArray,o.glyphOffsetArray,i,s,l,c,r,w,g.predicate,e.collisionCircleDiameter*i/t.ONE_EM,u,this.retainedQueryData[o.bucketInstanceId].tileID),C=_||D.circles.length>0&&!D.collisionDetected,k=k&&D.offscreen,I=D.occluded}if(f.iconFeatureIndex&&(U=f.iconFeatureIndex),f.iconBox){const n=n=>{V(n);const r=S&&L?Ae(L.x,L.y,x,w,this.transform.angle):new t.Point(0,0),i=o.getSymbolInstanceIconSize(m,this.transform.zoom,e.placedIconSymbolIndex);return this.collisionIndex.placeCollisionBox(o,i,n,r,b,h,s,g.predicate)};z&&z.box&&z.box.length&&f.verticalIconBox?(B=n(f.verticalIconBox),P=B.box.length>0):(B=n(f.iconBox),P=B.box.length>0),k=k&&B.offscreen,O=B.occluded}const G=y||0===e.numHorizontalGlyphVertices&&0===A,q=v||0===e.numIconVertices;if(G||q?q?G||(P=P&&C):C=P&&C:P=C=P&&C,C&&R&&R.box&&this.collisionIndex.insertCollisionBox(R.box,a.get("text-ignore-placement"),o.bucketInstanceId,z&&z.box&&N?N:F,g.ID),P&&B&&this.collisionIndex.insertCollisionBox(B.box,a.get("icon-ignore-placement"),o.bucketInstanceId,U,g.ID),D&&(C&&this.collisionIndex.insertCollisionCircles(D.circles,a.get("text-ignore-placement"),o.bucketInstanceId,F,g.ID),r)){const t=o.bucketInstanceId;let e=this.collisionCircleArrays[t];void 0===e&&(e=this.collisionCircleArrays[t]=new Se);for(let n=0;n<D.circles.length;n+=4)e.circles.push(D.circles[n+0]),e.circles.push(D.circles[n+1]),e.circles.push(D.circles[n+2]),e.circles.push(D.collisionDetected?1:0)}const H="globe"!==o.projection.name;T=T&&(H||!I),M=M&&(H||!O),this.placements[E]=new we(C||T,P||M,k||o.justReloaded),n.add(E)};if(E){const t=o.getSortedSymbolIndexes(this.transform.angle);for(let e=t.length-1;e>=0;--e){const n=t[e];A(o.symbolInstances.get(n),n,o.collisionArrays[n])}}else for(let t=e.symbolInstanceStart;t<e.symbolInstanceEnd;t++)A(o.symbolInstances.get(t),t,o.collisionArrays[t]);if(r&&o.bucketInstanceId in this.collisionCircleArrays){const e=this.collisionCircleArrays[o.bucketInstanceId];t.invert(e.invProjMatrix,s),e.viewportMatrix=this.collisionIndex.getViewportMatrix()}o.justReloaded=!1}markUsedJustification(e,n,r,i){const{leftJustifiedTextSymbolIndex:o,centerJustifiedTextSymbolIndex:a,rightJustifiedTextSymbolIndex:s,verticalPlacedTextSymbolIndex:l,crossTileID:c}=r,u=t.getAnchorJustification(n),h=i===t.WritingMode.vertical?l:"left"===u?o:"center"===u?a:"right"===u?s:-1;o>=0&&(e.text.placedSymbolArray.get(o).crossTileID=h>=0&&o!==h?0:c),a>=0&&(e.text.placedSymbolArray.get(a).crossTileID=h>=0&&a!==h?0:c),s>=0&&(e.text.placedSymbolArray.get(s).crossTileID=h>=0&&s!==h?0:c),l>=0&&(e.text.placedSymbolArray.get(l).crossTileID=h>=0&&l!==h?0:c)}markUsedOrientation(e,n,r){const i=n===t.WritingMode.horizontal||n===t.WritingMode.horizontalOnly?n:0,o=n===t.WritingMode.vertical?n:0,{leftJustifiedTextSymbolIndex:a,centerJustifiedTextSymbolIndex:s,rightJustifiedTextSymbolIndex:l,verticalPlacedTextSymbolIndex:c}=r,u=e.text.placedSymbolArray;a>=0&&(u.get(a).placedOrientation=i),s>=0&&(u.get(s).placedOrientation=i),l>=0&&(u.get(l).placedOrientation=i),c>=0&&(u.get(c).placedOrientation=o)}commit(t){this.commitTime=t,this.zoomAtLastRecencyCheck=this.transform.zoom;const e=this.prevPlacement;let n=!1;this.prevZoomAdjustment=e?e.zoomAdjustment(this.transform.zoom):0;const r=e?e.symbolFadeChange(t):1,i=e?e.opacities:{},o=e?e.variableOffsets:{},a=e?e.placedOrientations:{};for(const s in this.placements){const t=this.placements[s],e=i[s];e?(this.opacities[s]=new xe(e,r,t.text,t.icon,null,t.clipped),n=n||t.text!==e.text.placed||t.icon!==e.icon.placed):(this.opacities[s]=new xe(null,r,t.text,t.icon,t.skipFade,t.clipped),n=n||t.text||t.icon)}for(const s in i){const t=i[s];if(!this.opacities[s]){const e=new xe(t,r,!1,!1);e.isHidden()||(this.opacities[s]=e,n=n||t.text.placed||t.icon.placed)}}for(const s in o)this.variableOffsets[s]||!this.opacities[s]||this.opacities[s].isHidden()||(this.variableOffsets[s]=o[s]);for(const s in a)this.placedOrientations[s]||!this.opacities[s]||this.opacities[s].isHidden()||(this.placedOrientations[s]=a[s]);n?this.lastPlacementChangeTime=t:"number"!=typeof this.lastPlacementChangeTime&&(this.lastPlacementChangeTime=e?e.lastPlacementChangeTime:t)}updateLayerOpacities(t,e){const n=new Set;for(const r of e){const e=r.getBucket(t);e&&r.latestFeatureIndex&&t.id===e.layerIds[0]&&this.updateBucketOpacities(e,n,r.collisionBoxArray)}}updateBucketOpacities(e,n,r){e.hasTextData()&&e.text.opacityVertexArray.clear(),e.hasIconData()&&e.icon.opacityVertexArray.clear(),e.hasIconCollisionBoxData()&&e.iconCollisionBox.collisionVertexArray.clear(),e.hasTextCollisionBoxData()&&e.textCollisionBox.collisionVertexArray.clear();const i=e.layers[0].layout,o=!!e.layers[0].dynamicFilter(),a=new xe(null,0,!1,!1,!0),s=i.get("text-allow-overlap"),l=i.get("icon-allow-overlap"),c=i.get("text-variable-anchor"),u="map"===i.get("text-rotation-alignment"),h="map"===i.get("text-pitch-alignment"),d="none"!==i.get("icon-text-fit"),f=new xe(null,0,s&&(l||!e.hasIconData()||i.get("icon-optional")),l&&(s||!e.hasTextData()||i.get("text-optional")),!0);!e.collisionArrays&&r&&(e.hasIconCollisionBoxData()||e.hasTextCollisionBoxData())&&e.deserializeCollisionBoxes(r);const p=(t,e,n)=>{for(let r=0;r<e/4;r++)t.opacityVertexArray.emplaceBack(n)};let m=0;for(let g=0;g<e.symbolInstances.length;g++){const r=e.symbolInstances.get(g),{numHorizontalGlyphVertices:i,numVerticalGlyphVertices:s,crossTileID:l,numIconVertices:y}=r,v=n.has(l);let _=this.opacities[l];v?_=a:_||(_=f,this.opacities[l]=_),n.add(l);const b=i>0||s>0,x=y>0,w=this.placedOrientations[l],S=w===t.WritingMode.vertical,E=w===t.WritingMode.horizontal||w===t.WritingMode.horizontalOnly;if(!b&&!x||_.isHidden()||m++,b){const t=De(_.text);p(e.text,i,S?Be:t),p(e.text,s,E?Be:t);const n=_.text.isHidden(),{leftJustifiedTextSymbolIndex:o,centerJustifiedTextSymbolIndex:a,rightJustifiedTextSymbolIndex:c,verticalPlacedTextSymbolIndex:u}=r,h=e.text.placedSymbolArray,d=n||S?1:0;o>=0&&(h.get(o).hidden=d),a>=0&&(h.get(a).hidden=d),c>=0&&(h.get(c).hidden=d),u>=0&&(h.get(u).hidden=n||E?1:0);const f=this.variableOffsets[l];f&&this.markUsedJustification(e,f.anchor,r,w);const m=this.placedOrientations[l];m&&(this.markUsedJustification(e,"left",r,m),this.markUsedOrientation(e,m,r))}if(x){const t=De(_.icon),{placedIconSymbolIndex:n,verticalPlacedIconSymbolIndex:i}=r,o=e.icon.placedSymbolArray,a=_.icon.isHidden()?1:0;n>=0&&(p(e.icon,y,S?Be:t),o.get(n).hidden=a),i>=0&&(p(e.icon,r.numVerticalIconVertices,E?Be:t),o.get(i).hidden=a)}if(e.hasIconCollisionBoxData()||e.hasTextCollisionBoxData()){const n=e.collisionArrays[g];if(n){let r=new t.Point(0,0),i=!0;if(n.textBox||n.verticalTextBox){if(c){const t=this.variableOffsets[l];t?(r=Me(t.anchor,t.width,t.height,t.textOffset,t.textScale),u&&r._rotate(h?this.transform.angle:-this.transform.angle)):i=!1}o&&(i=!_.clipped),n.textBox&&Pe(e.textCollisionBox.collisionVertexArray,_.text.placed,!i||S,r.x,r.y),n.verticalTextBox&&Pe(e.textCollisionBox.collisionVertexArray,_.text.placed,!i||E,r.x,r.y)}const a=i&&Boolean(!E&&n.verticalIconBox);n.iconBox&&Pe(e.iconCollisionBox.collisionVertexArray,_.icon.placed,a,d?r.x:0,d?r.y:0),n.verticalIconBox&&Pe(e.iconCollisionBox.collisionVertexArray,_.icon.placed,!a,d?r.x:0,d?r.y:0)}}}if(e.fullyClipped=0===m,e.sortFeatures(this.transform.angle),this.retainedQueryData[e.bucketInstanceId]&&(this.retainedQueryData[e.bucketInstanceId].featureSortOrder=e.featureSortOrder),e.hasTextData()&&e.text.opacityVertexBuffer&&e.text.opacityVertexBuffer.updateData(e.text.opacityVertexArray),e.hasIconData()&&e.icon.opacityVertexBuffer&&e.icon.opacityVertexBuffer.updateData(e.icon.opacityVertexArray),e.hasIconCollisionBoxData()&&e.iconCollisionBox.collisionVertexBuffer&&e.iconCollisionBox.collisionVertexBuffer.updateData(e.iconCollisionBox.collisionVertexArray),e.hasTextCollisionBoxData()&&e.textCollisionBox.collisionVertexBuffer&&e.textCollisionBox.collisionVertexBuffer.updateData(e.textCollisionBox.collisionVertexArray),e.bucketInstanceId in this.collisionCircleArrays){const t=this.collisionCircleArrays[e.bucketInstanceId];e.placementInvProjMatrix=t.invProjMatrix,e.placementViewportMatrix=t.viewportMatrix,e.collisionCircleArray=t.circles,delete this.collisionCircleArrays[e.bucketInstanceId]}}symbolFadeChange(t){return 0===this.fadeDuration?1:(t-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment}zoomAdjustment(t){return Math.max(0,(this.transform.zoom-t)/1.5)}hasTransitions(t){return this.stale||t-this.lastPlacementChangeTime<this.fadeDuration}stillRecent(t,e){const n=this.zoomAtLastRecencyCheck===e?1-this.zoomAdjustment(e):1;return this.zoomAtLastRecencyCheck=e,this.commitTime+this.fadeDuration*n>t}setStale(){this.stale=!0}}function Pe(t,e,n,r,i){t.emplaceBack(e?1:0,n?1:0,r||0,i||0),t.emplaceBack(e?1:0,n?1:0,r||0,i||0),t.emplaceBack(e?1:0,n?1:0,r||0,i||0),t.emplaceBack(e?1:0,n?1:0,r||0,i||0)}const ke=Math.pow(2,25),Ie=Math.pow(2,24),Oe=Math.pow(2,17),Le=Math.pow(2,16),je=Math.pow(2,9),ze=Math.pow(2,8),Re=Math.pow(2,1);function De(t){if(0===t.opacity&&!t.placed)return 0;if(1===t.opacity&&t.placed)return 4294967295;const e=t.placed?1:0,n=Math.floor(127*t.opacity);return n*ke+e*Ie+n*Oe+e*Le+n*je+e*ze+n*Re+e}const Be=0;class Fe{constructor(t){this._sortAcrossTiles="viewport-y"!==t.layout.get("symbol-z-order")&&void 0!==t.layout.get("symbol-sort-key").constantOr(1),this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs=new Set,this._bucketParts=[]}continuePlacement(t,e,n,r,i){const o=this._bucketParts;for(;this._currentTileIndex<t.length;)if(e.getBucketParts(o,r,t[this._currentTileIndex],this._sortAcrossTiles),this._currentTileIndex++,i())return!0;for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,o.sort(((t,e)=>t.sortKey-e.sortKey)));this._currentPartIndex<o.length;){const t=o[this._currentPartIndex];if(e.placeLayerBucketPart(t,this._seenCrossTileIDs,n,0===t.symbolInstanceStart),this._currentPartIndex++,i())return!0}return!1}}class Ne{constructor(t,e,n,r,i,o,a,s){this.placement=new Ce(t,i,o,a,s),this._currentPlacementIndex=e.length-1,this._forceFullPlacement=n,this._showCollisionBoxes=r,this._done=!1}isDone(){return this._done}continuePlacement(e,n,r){const i=t.exported.now(),o=()=>{const e=t.exported.now()-i;return!this._forceFullPlacement&&e>2};for(;this._currentPlacementIndex>=0;){const t=n[e[this._currentPlacementIndex]],i=this.placement.collisionIndex.transform.zoom;if("symbol"===t.type&&(!t.minzoom||t.minzoom<=i)&&(!t.maxzoom||t.maxzoom>i)){if(this._inProgressLayer||(this._inProgressLayer=new Fe(t)),this._inProgressLayer.continuePlacement(r[t.source],this.placement,this._showCollisionBoxes,t,o))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0}commit(t){return this.placement.commit(t),this.placement}}const Ue=512/t.EXTENT/2;class Ve{constructor(e,n,r){this.tileID=e,this.bucketInstanceId=r,this.index=new t.KDBush(n.length,16,Int32Array),this.keys=[],this.crossTileIDs=[];const i=e.canonical.x*t.EXTENT,o=e.canonical.y*t.EXTENT;for(let t=0;t<n.length;t++){const{key:e,crossTileID:r,tileAnchorX:a,tileAnchorY:s}=n.get(t),l=Math.floor((i+a)*Ue),c=Math.floor((o+s)*Ue);this.index.add(l,c),this.keys.push(e),this.crossTileIDs.push(r)}this.index.finish()}findMatches(e,n,r){const i=this.tileID.canonical.z<n.canonical.z?1:Math.pow(2,this.tileID.canonical.z-n.canonical.z),o=Ue/Math.pow(2,n.canonical.z-this.tileID.canonical.z),a=n.canonical.x*t.EXTENT,s=n.canonical.y*t.EXTENT;for(let t=0;t<e.length;t++){const n=e.get(t);if(n.crossTileID)continue;const{key:l,tileAnchorX:c,tileAnchorY:u}=n,h=Math.floor((a+c)*o),d=Math.floor((s+u)*o),f=this.index.range(h-i,d-i,h+i,d+i);for(const t of f){const e=this.crossTileIDs[t];if(this.keys[t]===l&&!r.has(e)){r.add(e),n.crossTileID=e;break}}}}}class We{constructor(){this.maxCrossTileID=0}generate(){return++this.maxCrossTileID}}class Ge{constructor(){this.indexes={},this.usedCrossTileIDs={},this.lng=0}handleWrapJump(t){const e=Math.round((t-this.lng)/360);if(0!==e)for(const n in this.indexes){const t=this.indexes[n],r={};for(const n in t){const i=t[n];i.tileID=i.tileID.unwrapTo(i.tileID.wrap+e),r[i.tileID.key]=i}this.indexes[n]=r}this.lng=t}addBucket(t,e,n){if(this.indexes[t.overscaledZ]&&this.indexes[t.overscaledZ][t.key]){if(this.indexes[t.overscaledZ][t.key].bucketInstanceId===e.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(t.overscaledZ,this.indexes[t.overscaledZ][t.key])}for(let i=0;i<e.symbolInstances.length;i++)e.symbolInstances.get(i).crossTileID=0;this.usedCrossTileIDs[t.overscaledZ]||(this.usedCrossTileIDs[t.overscaledZ]=new Set);const r=this.usedCrossTileIDs[t.overscaledZ];for(const i in this.indexes){const n=this.indexes[i];if(Number(i)>t.overscaledZ)for(const i in n){const o=n[i];o.tileID.isChildOf(t)&&o.findMatches(e.symbolInstances,t,r)}else{const o=n[t.scaledTo(Number(i)).key];o&&o.findMatches(e.symbolInstances,t,r)}}for(let i=0;i<e.symbolInstances.length;i++){const t=e.symbolInstances.get(i);t.crossTileID||(t.crossTileID=n.generate(),r.add(t.crossTileID))}return void 0===this.indexes[t.overscaledZ]&&(this.indexes[t.overscaledZ]={}),this.indexes[t.overscaledZ][t.key]=new Ve(t,e.symbolInstances,e.bucketInstanceId),!0}removeBucketCrossTileIDs(t,e){for(const n of e.crossTileIDs)this.usedCrossTileIDs[t].delete(n)}removeStaleBuckets(t){let e=!1;for(const n in this.indexes){const r=this.indexes[n];for(const i in r)t[r[i].bucketInstanceId]||(this.removeBucketCrossTileIDs(n,r[i]),delete r[i],e=!0)}return e}}class qe{constructor(){this.layerIndexes={},this.crossTileIDs=new We,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}}addLayer(t,e,n,r){let i=this.layerIndexes[t.id];void 0===i&&(i=this.layerIndexes[t.id]=new Ge);let o=!1;const a={};"globe"!==r.name&&i.handleWrapJump(n);for(const s of e){const e=s.getBucket(t);e&&t.id===e.layerIds[0]&&(e.bucketInstanceId||(e.bucketInstanceId=++this.maxBucketInstanceId),i.addBucket(s.tileID,e,this.crossTileIDs)&&(o=!0),a[e.bucketInstanceId]=!0)}return i.removeStaleBuckets(a)&&(o=!0),o}pruneUnusedLayers(t){const e={};t.forEach((t=>{e[t]=!0}));for(const n in this.layerIndexes)e[n]||delete this.layerIndexes[n]}}const He=(e,n)=>t.emitValidationErrors(e,n&&n.filter((t=>"source.canvas"!==t.identifier))),Ze=t.pick(Vt,["addLayer","removeLayer","setPaintProperty","setLayoutProperty","setFilter","addSource","removeSource","setLayerZoomRange","setLight","setTransition","setGeoJSONSourceData","setTerrain","setFog","setProjection"]),Xe=t.pick(Vt,["setCenter","setZoom","setBearing","setPitch"]),Ye={version:8,layers:[],sources:{}},Ke={fill:!0,line:!0,background:!0,hillshade:!0,raster:!0};class $e extends t.Evented{constructor(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};super(),this.map=e,this.dispatcher=new P(Ft(),this),this.imageManager=new b,this.imageManager.setEventedParent(this),this.glyphManager=new t.GlyphManager(e._requestManager,n.localFontFamily?t.LocalGlyphMode.all:n.localIdeographFontFamily?t.LocalGlyphMode.ideographs:t.LocalGlyphMode.none,n.localFontFamily||n.localIdeographFontFamily),this.crossTileSymbolIndex=new qe,this._layers={},this._num3DLayers=0,this._numSymbolLayers=0,this._numCircleLayers=0,this._serializedLayers={},this._sourceCaches={},this._otherSourceCaches={},this._symbolSourceCaches={},this._loaded=!1,this._availableImages=[],this._order=[],this._drapedFirstOrder=[],this._markersNeedUpdate=!1,this._resetUpdates(),this.dispatcher.broadcast("setReferrer",t.getReferrer());const r=this;this._rtlTextPluginCallback=$e.registerForPluginStateChange((e=>{r.dispatcher.broadcast("syncRTLPluginState",{pluginStatus:e.pluginStatus,pluginURL:e.pluginURL},((e,n)=>{if(t.triggerPluginCompletionEvent(e),n&&n.every((t=>t)))for(const t in r._sourceCaches){const e=r._sourceCaches[t],n=e.getSource().type;"vector"!==n&&"geojson"!==n||e.reload()}}))})),this.on("data",(t=>{if("source"!==t.dataType||"metadata"!==t.sourceDataType)return;const e=this.getSource(t.sourceId);if(e&&e.vectorLayerIds)for(const n in this._layers){const t=this._layers[n];t.source===e.id&&this._validateLayer(t)}}))}loadURL(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.fire(new t.Event("dataloading",{dataType:"style"}));const r="boolean"==typeof n.validate?n.validate:!t.isMapboxURL(e);e=this.map._requestManager.normalizeStyleURL(e,n.accessToken);const i=this.map._requestManager.transformRequest(e,t.ResourceType.Style);this._request=t.getJSON(i,((e,n)=>{this._request=null,e?this.fire(new t.ErrorEvent(e)):n&&this._load(n,r)}))}loadJSON(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.fire(new t.Event("dataloading",{dataType:"style"})),this._request=t.exported.frame((()=>{this._request=null,this._load(e,!1!==n.validate)}))}loadEmpty(){this.fire(new t.Event("dataloading",{dataType:"style"})),this._load(Ye,!1)}_updateLayerCount(t,e){const n=e?1:-1;t.is3D()&&(this._num3DLayers+=n),"circle"===t.type&&(this._numCircleLayers+=n),"symbol"===t.type&&(this._numSymbolLayers+=n)}_load(e,n){if(n&&He(this,t.validateStyle(e)))return;this._loaded=!0,this.stylesheet=t.clone$1(e),this._updateMapProjection();for(const t in e.sources)this.addSource(t,e.sources[t],{validate:!1});this._changed=!1,e.sprite?this._loadSprite(e.sprite):(this.imageManager.setLoaded(!0),this.dispatcher.broadcast("spriteLoaded",!0)),this.glyphManager.setURL(e.glyphs);const r=Ut(this.stylesheet.layers);this._order=r.map((t=>t.id)),this._layers={},this._serializedLayers={};for(const i of r){const e=t.createStyleLayer(i);e.setEventedParent(this,{layer:{id:e.id}}),this._layers[e.id]=e,this._serializedLayers[e.id]=e.serialize(),this._updateLayerCount(e,!0)}this.dispatcher.broadcast("setLayers",this._serializeLayers(this._order)),this.light=new w(this.stylesheet.light),this.stylesheet.terrain&&!this.terrainSetForDrapingOnly()&&this._createTerrain(this.stylesheet.terrain,1),this.stylesheet.fog&&this._createFog(this.stylesheet.fog),this._updateDrapeFirstLayers(),this.fire(new t.Event("data",{dataType:"style"})),this.fire(new t.Event("style.load"))}terrainSetForDrapingOnly(){return!!this.terrain&&0===this.terrain.drapeRenderMode}setProjection(t){t?this.stylesheet.projection=t:delete this.stylesheet.projection,this._updateMapProjection()}applyProjectionUpdate(){this._loaded&&(this.dispatcher.broadcast("setProjection",this.map.transform.projectionOptions),this.map.transform.projection.requiresDraping?this.getTerrain()||this.stylesheet.terrain||this.setTerrainForDraping():this.terrainSetForDrapingOnly()&&this.setTerrain(null))}_updateMapProjection(){this.map._useExplicitProjection?this.applyProjectionUpdate():this.map._prioritizeAndUpdateProjection(null,this.stylesheet.projection)}_loadSprite(e){this._spriteRequest=function(e,n,r){let i,o,a;const s=t.exported.devicePixelRatio>1?"@2x":"";let l=t.getJSON(n.transformRequest(n.normalizeSpriteURL(e,s,".json"),t.ResourceType.SpriteJSON),((t,e)=>{l=null,a||(a=t,i=e,u())})),c=t.getImage(n.transformRequest(n.normalizeSpriteURL(e,s,".png"),t.ResourceType.SpriteImage),((t,e)=>{c=null,a||(a=t,o=e,u())}));function u(){if(a)r(a);else if(i&&o){const e=t.exported.getImageData(o),n={};for(const r in i){const{width:o,height:a,x:s,y:l,sdf:c,pixelRatio:u,stretchX:h,stretchY:d,content:f}=i[r],p=new t.RGBAImage({width:o,height:a});t.RGBAImage.copy(e,p,{x:s,y:l},{x:0,y:0},{width:o,height:a}),n[r]={data:p,pixelRatio:u,sdf:c,stretchX:h,stretchY:d,content:f}}r(null,n)}}return{cancel(){l&&(l.cancel(),l=null),c&&(c.cancel(),c=null)}}}(e,this.map._requestManager,((e,n)=>{if(this._spriteRequest=null,e)this.fire(new t.ErrorEvent(e));else if(n)for(const t in n)this.imageManager.addImage(t,n[t]);this.imageManager.setLoaded(!0),this._availableImages=this.imageManager.listImages(),this.dispatcher.broadcast("setImages",this._availableImages),this.dispatcher.broadcast("spriteLoaded",!0),this.fire(new t.Event("data",{dataType:"style"}))}))}_validateLayer(e){const n=this.getSource(e.source);if(!n)return;const r=e.sourceLayer;r&&("geojson"===n.type||n.vectorLayerIds&&-1===n.vectorLayerIds.indexOf(r))&&this.fire(new t.ErrorEvent(new Error('Source layer "'.concat(r,'" does not exist on source "').concat(n.id,'" as specified by style layer "').concat(e.id,'"'))))}loaded(){if(!this._loaded)return!1;if(Object.keys(this._updatedSources).length)return!1;for(const t in this._sourceCaches)if(!this._sourceCaches[t].loaded())return!1;return!!this.imageManager.isLoaded()}_serializeLayers(t){const e=[];for(const n of t){const t=this._layers[n];"custom"!==t.type&&e.push(t.serialize())}return e}hasTransitions(){if(this.light&&this.light.hasTransition())return!0;if(this.fog&&this.fog.hasTransition())return!0;for(const t in this._sourceCaches)if(this._sourceCaches[t].hasTransition())return!0;for(const t in this._layers)if(this._layers[t].hasTransition())return!0;return!1}get order(){return this.map._optimizeForTerrain&&this.terrain?this._drapedFirstOrder:this._order}isLayerDraped(t){return!!this.terrain&&("function"==typeof t.isLayerDraped?t.isLayerDraped():Ke[t.type])}_checkLoaded(){if(!this._loaded)throw new Error("Style is not done loading")}update(e){if(!this._loaded)return;const n=this._changed;if(this._changed){const t=Object.keys(this._updatedLayers),n=Object.keys(this._removedLayers);(t.length||n.length)&&this._updateWorkerLayers(t,n);for(const e in this._updatedSources){const t=this._updatedSources[e];"reload"===t?this._reloadSource(e):"clear"===t&&this._clearSource(e)}this._updateTilesForChangedImages();for(const r in this._updatedPaintProps)this._layers[r].updateTransitions(e);this.light.updateTransitions(e),this.fog&&this.fog.updateTransitions(e),this._resetUpdates()}const r={};for(const t in this._sourceCaches){const e=this._sourceCaches[t];r[t]=e.used,e.used=!1}for(const t of this._order){const n=this._layers[t];if(n.recalculate(e,this._availableImages),!n.isHidden(e.zoom)){const t=this._getLayerSourceCache(n);t&&(t.used=!0)}const r=this.map.painter;if(r){const t=n.getProgramIds();if(!t)continue;const i=n.getProgramConfiguration(e.zoom);for(const e of t)r.useProgram(e,i)}}for(const i in r){const e=this._sourceCaches[i];r[i]!==e.used&&e.getSource().fire(new t.Event("data",{sourceDataType:"visibility",dataType:"source",sourceId:e.getSource().id}))}this.light.recalculate(e),this.terrain&&this.terrain.recalculate(e),this.fog&&this.fog.recalculate(e),this.z=e.zoom,this._markersNeedUpdate&&(this._updateMarkersOpacity(),this._markersNeedUpdate=!1),n&&this.fire(new t.Event("data",{dataType:"style"}))}_updateTilesForChangedImages(){const t=Object.keys(this._changedImages);if(t.length){for(const e in this._sourceCaches)this._sourceCaches[e].reloadTilesForDependencies(["icons","patterns"],t);this._changedImages={}}}_updateWorkerLayers(t,e){this.dispatcher.broadcast("updateLayers",{layers:this._serializeLayers(t),removedIds:e})}_resetUpdates(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={},this._changedImages={}}setState(n){if(this._checkLoaded(),He(this,t.validateStyle(n)))return!1;(n=t.clone$1(n)).layers=Ut(n.layers);const r=function(t,n){if(!t)return[{command:Vt.setStyle,args:[n]}];let r=[];try{if(!e(t.version,n.version))return[{command:Vt.setStyle,args:[n]}];e(t.center,n.center)||r.push({command:Vt.setCenter,args:[n.center]}),e(t.zoom,n.zoom)||r.push({command:Vt.setZoom,args:[n.zoom]}),e(t.bearing,n.bearing)||r.push({command:Vt.setBearing,args:[n.bearing]}),e(t.pitch,n.pitch)||r.push({command:Vt.setPitch,args:[n.pitch]}),e(t.sprite,n.sprite)||r.push({command:Vt.setSprite,args:[n.sprite]}),e(t.glyphs,n.glyphs)||r.push({command:Vt.setGlyphs,args:[n.glyphs]}),e(t.transition,n.transition)||r.push({command:Vt.setTransition,args:[n.transition]}),e(t.light,n.light)||r.push({command:Vt.setLight,args:[n.light]}),e(t.fog,n.fog)||r.push({command:Vt.setFog,args:[n.fog]}),e(t.projection,n.projection)||r.push({command:Vt.setProjection,args:[n.projection]});const i={},o=[];!function(t,n,r,i){let o;for(o in n=n||{},t=t||{})t.hasOwnProperty(o)&&(n.hasOwnProperty(o)||Gt(o,r,i));for(o in n){if(!n.hasOwnProperty(o))continue;const a=n[o];t.hasOwnProperty(o)?e(t[o],a)||("geojson"===t[o].type&&"geojson"===a.type&&Ht(t,n,o)?r.push({command:Vt.setGeoJSONSourceData,args:[o,a.data]}):qt(o,n,r,i)):Wt(o,n,r)}}(t.sources,n.sources,o,i);const a=[];t.layers&&t.layers.forEach((t=>{t.source&&i[t.source]?r.push({command:Vt.removeLayer,args:[t.id]}):a.push(t)}));let s=t.terrain;s&&i[s.source]&&(r.push({command:Vt.setTerrain,args:[void 0]}),s=void 0),r=r.concat(o),e(s,n.terrain)||r.push({command:Vt.setTerrain,args:[n.terrain]}),function(t,n,r){n=n||[];const i=(t=t||[]).map(Xt),o=n.map(Xt),a=t.reduce(Yt,{}),s=n.reduce(Yt,{}),l=i.slice(),c=Object.create(null);let u,h,d,f,p,m,g;for(u=0,h=0;u<i.length;u++)d=i[u],s.hasOwnProperty(d)?h++:(r.push({command:Vt.removeLayer,args:[d]}),l.splice(l.indexOf(d,h),1));for(u=0,h=0;u<o.length;u++)d=o[o.length-1-u],l[l.length-1-u]!==d&&(a.hasOwnProperty(d)?(r.push({command:Vt.removeLayer,args:[d]}),l.splice(l.lastIndexOf(d,l.length-h),1)):h++,m=l[l.length-u],r.push({command:Vt.addLayer,args:[s[d],m]}),l.splice(l.length-u,0,d),c[d]=!0);for(u=0;u<o.length;u++)if(d=o[u],f=a[d],p=s[d],!c[d]&&!e(f,p))if(e(f.source,p.source)&&e(f["source-layer"],p["source-layer"])&&e(f.type,p.type)){for(g in Zt(f.layout,p.layout,r,d,null,Vt.setLayoutProperty),Zt(f.paint,p.paint,r,d,null,Vt.setPaintProperty),e(f.filter,p.filter)||r.push({command:Vt.setFilter,args:[d,p.filter]}),e(f.minzoom,p.minzoom)&&e(f.maxzoom,p.maxzoom)||r.push({command:Vt.setLayerZoomRange,args:[d,p.minzoom,p.maxzoom]}),f)f.hasOwnProperty(g)&&"layout"!==g&&"paint"!==g&&"filter"!==g&&"metadata"!==g&&"minzoom"!==g&&"maxzoom"!==g&&(0===g.indexOf("paint.")?Zt(f[g],p[g],r,d,g.slice(6),Vt.setPaintProperty):e(f[g],p[g])||r.push({command:Vt.setLayerProperty,args:[d,g,p[g]]}));for(g in p)p.hasOwnProperty(g)&&!f.hasOwnProperty(g)&&"layout"!==g&&"paint"!==g&&"filter"!==g&&"metadata"!==g&&"minzoom"!==g&&"maxzoom"!==g&&(0===g.indexOf("paint.")?Zt(f[g],p[g],r,d,g.slice(6),Vt.setPaintProperty):e(f[g],p[g])||r.push({command:Vt.setLayerProperty,args:[d,g,p[g]]}))}else r.push({command:Vt.removeLayer,args:[d]}),m=l[l.lastIndexOf(d)+1],r.push({command:Vt.addLayer,args:[p,m]})}(a,n.layers,r)}catch(t){console.warn("Unable to compute style diff:",t),r=[{command:Vt.setStyle,args:[n]}]}return r}(this.serialize(),n).filter((t=>!(t.command in Xe)));if(0===r.length)return!1;const i=r.filter((t=>!(t.command in Ze)));if(i.length>0)throw new Error("Unimplemented: ".concat(i.map((t=>t.command)).join(", "),"."));return r.forEach((t=>{"setTransition"!==t.command&&"setProjection"!==t.command&&this[t.command].apply(this,t.args)})),this.stylesheet=n,this._updateMapProjection(),!0}addImage(e,n){return this.getImage(e)?this.fire(new t.ErrorEvent(new Error("An image with this name already exists."))):(this.imageManager.addImage(e,n),this._afterImageUpdated(e),this)}updateImage(t,e){this.imageManager.updateImage(t,e)}getImage(t){return this.imageManager.getImage(t)}removeImage(e){return this.getImage(e)?(this.imageManager.removeImage(e),this._afterImageUpdated(e),this):this.fire(new t.ErrorEvent(new Error("No image with this name exists.")))}_afterImageUpdated(e){this._availableImages=this.imageManager.listImages(),this._changedImages[e]=!0,this._changed=!0,this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new t.Event("data",{dataType:"style"}))}listImages(){return this._checkLoaded(),this._availableImages.slice()}addSource(e,n){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(this._checkLoaded(),void 0!==this.getSource(e))throw new Error("There is already a source with this ID");if(!n.type)throw new Error("The type property must be defined, but only the following properties were given: ".concat(Object.keys(n).join(", "),"."));if(["vector","raster","geojson","video","image"].indexOf(n.type)>=0&&this._validate(t.validateSource,"sources.".concat(e),n,null,r))return;this.map&&this.map._collectResourceTiming&&(n.collectResourceTiming=!0);const i=kt(e,n,this.dispatcher,this);i.setEventedParent(this,(()=>({isSourceLoaded:this._isSourceCacheLoaded(e),source:i.serialize(),sourceId:e})));const o=n=>{const r=(n?"symbol:":"other:")+e,o=this._sourceCaches[r]=new t.SourceCache(r,i,n);(n?this._symbolSourceCaches:this._otherSourceCaches)[e]=o,o.style=this,o.onAdd(this.map)};o(!1),"vector"!==n.type&&"geojson"!==n.type||o(!0),i.onAdd&&i.onAdd(this.map),this._changed=!0}removeSource(e){this._checkLoaded();const n=this.getSource(e);if(!n)throw new Error("There is no source with this ID");for(const i in this._layers)if(this._layers[i].source===e)return this.fire(new t.ErrorEvent(new Error('Source "'.concat(e,'" cannot be removed while layer "').concat(i,'" is using it.'))));if(this.terrain&&this.terrain.get().source===e)return this.fire(new t.ErrorEvent(new Error('Source "'.concat(e,'" cannot be removed while terrain is using it.'))));const r=this._getSourceCaches(e);for(const i of r)delete this._sourceCaches[i.id],delete this._updatedSources[i.id],i.fire(new t.Event("data",{sourceDataType:"metadata",dataType:"source",sourceId:i.getSource().id})),i.setEventedParent(null),i.clearTiles();return delete this._otherSourceCaches[e],delete this._symbolSourceCaches[e],n.setEventedParent(null),n.onRemove&&n.onRemove(this.map),this._changed=!0,this}setGeoJSONSourceData(t,e){this._checkLoaded(),this.getSource(t).setData(e),this._changed=!0}getSource(t){const e=this._getSourceCache(t);return e&&e.getSource()}_getSources(){const t=[];for(const e in this._otherSourceCaches){const n=this._getSourceCache(e);n&&t.push(n.getSource())}return t}addLayer(e,n){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};this._checkLoaded();const i=e.id;if(this.getLayer(i))return void this.fire(new t.ErrorEvent(new Error('Layer with id "'.concat(i,'" already exists on this map'))));let o;if("custom"===e.type){if(He(this,t.validateCustomStyleLayer(e)))return;o=t.createStyleLayer(e)}else{if("object"==typeof e.source&&(this.addSource(i,e.source),e=t.clone$1(e),e=t.extend(e,{source:i})),this._validate(t.validateLayer,"layers.".concat(i),e,{arrayIndex:-1},r))return;o=t.createStyleLayer(e),this._validateLayer(o),o.setEventedParent(this,{layer:{id:i}}),this._serializedLayers[o.id]=o.serialize(),this._updateLayerCount(o,!0)}const a=n?this._order.indexOf(n):this._order.length;if(n&&-1===a)return void this.fire(new t.ErrorEvent(new Error('Layer with id "'.concat(n,'" does not exist on this map.'))));this._order.splice(a,0,i),this._layerOrderChanged=!0,this._layers[i]=o;const s=this._getLayerSourceCache(o);if(this._removedLayers[i]&&o.source&&s&&"custom"!==o.type){const t=this._removedLayers[i];delete this._removedLayers[i],t.type!==o.type?this._updatedSources[o.source]="clear":(this._updatedSources[o.source]="reload",s.pause())}this._updateLayer(o),o.onAdd&&o.onAdd(this.map),this._updateDrapeFirstLayers()}moveLayer(e,n){if(this._checkLoaded(),this._changed=!0,!this._layers[e])return void this.fire(new t.ErrorEvent(new Error("The layer '".concat(e,"' does not exist in the map's style and cannot be moved."))));if(e===n)return;const r=this._order.indexOf(e);this._order.splice(r,1);const i=n?this._order.indexOf(n):this._order.length;n&&-1===i?this.fire(new t.ErrorEvent(new Error('Layer with id "'.concat(n,'" does not exist on this map.')))):(this._order.splice(i,0,e),this._layerOrderChanged=!0,this._updateDrapeFirstLayers())}removeLayer(e){this._checkLoaded();const n=this._layers[e];if(!n)return void this.fire(new t.ErrorEvent(new Error("The layer '".concat(e,"' does not exist in the map's style and cannot be removed."))));n.setEventedParent(null),this._updateLayerCount(n,!1);const r=this._order.indexOf(e);this._order.splice(r,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[e]=n,delete this._layers[e],delete this._serializedLayers[e],delete this._updatedLayers[e],delete this._updatedPaintProps[e],n.onRemove&&n.onRemove(this.map),this._updateDrapeFirstLayers()}getLayer(t){return this._layers[t]}hasLayer(t){return t in this._layers}hasLayerType(t){for(const e in this._layers)if(this._layers[e].type===t)return!0;return!1}setLayerZoomRange(e,n,r){this._checkLoaded();const i=this.getLayer(e);i?i.minzoom===n&&i.maxzoom===r||(null!=n&&(i.minzoom=n),null!=r&&(i.maxzoom=r),this._updateLayer(i)):this.fire(new t.ErrorEvent(new Error("The layer '".concat(e,"' does not exist in the map's style and cannot have zoom extent."))))}setFilter(n,r){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};this._checkLoaded();const o=this.getLayer(n);if(o){if(!e(o.filter,r))return null==r?(o.filter=void 0,void this._updateLayer(o)):void(this._validate(t.validateFilter,"layers.".concat(o.id,".filter"),r,{layerType:o.type},i)||(o.filter=t.clone$1(r),this._updateLayer(o)))}else this.fire(new t.ErrorEvent(new Error("The layer '".concat(n,"' does not exist in the map's style and cannot be filtered."))))}getFilter(e){const n=this.getLayer(e);return n&&t.clone$1(n.filter)}setLayoutProperty(n,r,i){let o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};this._checkLoaded();const a=this.getLayer(n);a?e(a.getLayoutProperty(r),i)||(a.setLayoutProperty(r,i,o),this._updateLayer(a)):this.fire(new t.ErrorEvent(new Error("The layer '".concat(n,"' does not exist in the map's style and cannot be styled."))))}getLayoutProperty(e,n){const r=this.getLayer(e);if(r)return r.getLayoutProperty(n);this.fire(new t.ErrorEvent(new Error("The layer '".concat(e,"' does not exist in the map's style."))))}setPaintProperty(n,r,i){let o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};this._checkLoaded();const a=this.getLayer(n);a?e(a.getPaintProperty(r),i)||(a.setPaintProperty(r,i,o)&&this._updateLayer(a),this._changed=!0,this._updatedPaintProps[n]=!0):this.fire(new t.ErrorEvent(new Error("The layer '".concat(n,"' does not exist in the map's style and cannot be styled."))))}getPaintProperty(t,e){const n=this.getLayer(t);return n&&n.getPaintProperty(e)}setFeatureState(e,n){this._checkLoaded();const r=e.source,i=e.sourceLayer,o=this.getSource(r);if(!o)return void this.fire(new t.ErrorEvent(new Error("The source '".concat(r,"' does not exist in the map's style."))));const a=o.type;if("geojson"===a&&i)return void this.fire(new t.ErrorEvent(new Error("GeoJSON sources cannot have a sourceLayer parameter.")));if("vector"===a&&!i)return void this.fire(new t.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")));void 0===e.id&&this.fire(new t.ErrorEvent(new Error("The feature id parameter must be provided.")));const s=this._getSourceCaches(r);for(const t of s)t.setFeatureState(i,e.id,n)}removeFeatureState(e,n){this._checkLoaded();const r=e.source,i=this.getSource(r);if(!i)return void this.fire(new t.ErrorEvent(new Error("The source '".concat(r,"' does not exist in the map's style."))));const o=i.type,a="vector"===o?e.sourceLayer:void 0;if("vector"===o&&!a)return void this.fire(new t.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")));if(n&&"string"!=typeof e.id&&"number"!=typeof e.id)return void this.fire(new t.ErrorEvent(new Error("A feature id is required to remove its specific state property.")));const s=this._getSourceCaches(r);for(const t of s)t.removeFeatureState(a,e.id,n)}getFeatureState(e){this._checkLoaded();const n=e.source,r=e.sourceLayer,i=this.getSource(n);if(i){if("vector"!==i.type||r)return void 0===e.id&&this.fire(new t.ErrorEvent(new Error("The feature id parameter must be provided."))),this._getSourceCaches(n)[0].getFeatureState(r,e.id);this.fire(new t.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}else this.fire(new t.ErrorEvent(new Error("The source '".concat(n,"' does not exist in the map's style."))))}getTransition(){return t.extend({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)}serialize(){const e={};for(const t in this._sourceCaches){const n=this._sourceCaches[t].getSource();e[n.id]||(e[n.id]=n.serialize())}return t.filterObject({version:this.stylesheet.version,name:this.stylesheet.name,metadata:this.stylesheet.metadata,light:this.stylesheet.light,terrain:this.getTerrain()||void 0,fog:this.stylesheet.fog,center:this.stylesheet.center,zoom:this.stylesheet.zoom,bearing:this.stylesheet.bearing,pitch:this.stylesheet.pitch,sprite:this.stylesheet.sprite,glyphs:this.stylesheet.glyphs,transition:this.stylesheet.transition,projection:this.stylesheet.projection,sources:e,layers:this._serializeLayers(this._order)},(t=>void 0!==t))}_updateLayer(t){this._updatedLayers[t.id]=!0;const e=this._getLayerSourceCache(t);t.source&&!this._updatedSources[t.source]&&e&&"raster"!==e.getSource().type&&(this._updatedSources[t.source]="reload",e.pause()),this._changed=!0,t.invalidateCompiledFilter()}_flattenAndSortRenderedFeatures(t){const e=t=>"fill-extrusion"===this._layers[t].type,n={},r=[];for(let o=this._order.length-1;o>=0;o--){const i=this._order[o];if(e(i)){n[i]=o;for(const e of t){const t=e[i];if(t)for(const e of t)r.push(e)}}}r.sort(((t,e)=>e.intersectionZ-t.intersectionZ));const i=[];for(let o=this._order.length-1;o>=0;o--){const a=this._order[o];if(e(a))for(let t=r.length-1;t>=0;t--){const e=r[t].feature;if(n[e.layer.id]<o)break;i.push(e),r.pop()}else for(const e of t){const t=e[a];if(t)for(const e of t)i.push(e.feature)}}return i}queryRenderedFeatures(e,n,r){n&&n.filter&&this._validate(t.validateFilter,"queryRenderedFeatures.filter",n.filter,null,n);const i={};if(n&&n.layers){if(!Array.isArray(n.layers))return this.fire(new t.ErrorEvent(new Error("parameters.layers must be an Array."))),[];for(const e of n.layers){const n=this._layers[e];if(!n)return this.fire(new t.ErrorEvent(new Error("The layer '".concat(e,"' does not exist in the map's style and cannot be queried for features.")))),[];i[n.source]=!0}}const o=[];n.availableImages=this._availableImages;const a=n&&n.layers?n.layers.some((t=>{const e=this.getLayer(t);return e&&e.is3D()})):this.has3DLayers(),s=I.createFromScreenPoints(e,r);for(const t in this._sourceCaches){const e=this._sourceCaches[t].getSource().id;n.layers&&!i[e]||o.push(Ot(this._sourceCaches[t],this._layers,this._serializedLayers,s,n,r,a,!!this.map._showQueryGeometry))}return this.placement&&o.push(function(t,e,n,r,i,o,a){const s={},l=o.queryRenderedSymbols(r),c=[];for(const u of Object.keys(l).map(Number))c.push(a[u]);c.sort(jt);for(const u of c){const n=u.featureIndex.lookupSymbolFeatures(l[u.bucketInstanceId],e,u.bucketIndex,u.sourceLayerIndex,i.filter,i.layers,i.availableImages,t);for(const t in n){const e=s[t]=s[t]||[],r=n[t];r.sort(((t,e)=>{const n=u.featureSortOrder;if(n){const r=n.indexOf(t.featureIndex);return n.indexOf(e.featureIndex)-r}return e.featureIndex-t.featureIndex}));for(const t of r)e.push(t)}}for(const u in s)s[u].forEach((e=>{const r=e.feature,i=n(t[u]);if(!i)return;const o=i.getFeatureState(r.layer["source-layer"],r.id);r.source=r.layer.source,r.layer["source-layer"]&&(r.sourceLayer=r.layer["source-layer"]),r.state=o}));return s}(this._layers,this._serializedLayers,this._getLayerSourceCache.bind(this),s.screenGeometry,n,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(o)}querySourceFeatures(e,n){n&&n.filter&&this._validate(t.validateFilter,"querySourceFeatures.filter",n.filter,null,n);const r=this._getSourceCaches(e);let i=[];for(const t of r)i=i.concat(Lt(t,n));return i}addSourceType(t,e,n){return $e.getSourceType(t)?n(new Error('A source type called "'.concat(t,'" already exists.'))):($e.setSourceType(t,e),e.workerSourceURL?void this.dispatcher.broadcast("loadWorkerSource",{name:t,url:e.workerSourceURL},n):n(null,null))}getLight(){return this.light.getLight()}setLight(t){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this._checkLoaded();const r=this.light.getLight();let i=!1;for(const a in t)if(!e(t[a],r[a])){i=!0;break}if(!i)return;const o=this._setTransitionParameters({duration:300,delay:0});this.light.setLight(t,n),this.light.updateTransitions(o)}getTerrain(){return this.terrain&&1===this.terrain.drapeRenderMode?this.terrain.get():null}setTerrainForDraping(){this.setTerrain({source:"",exaggeration:0},0)}setTerrain(n){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;if(this._checkLoaded(),!n)return delete this.terrain,delete this.stylesheet.terrain,this.dispatcher.broadcast("enableTerrain",!1),this._force3DLayerUpdate(),void(this._markersNeedUpdate=!0);let i=n;if(1===r){if("object"==typeof i.source){const e="terrain-dem-src";this.addSource(e,i.source),i=t.clone$1(i),i=t.extend(i,{source:e})}if(this._validate(t.validateTerrain,"terrain",i))return}if(!this.terrain||this.terrain&&r!==this.terrain.drapeRenderMode){if(!i)return;this._createTerrain(i,r)}else{const n=this.terrain,r=n.get();for(const e of Object.keys(t.spec.terrain))!i.hasOwnProperty(e)&&t.spec.terrain[e].default&&(i[e]=t.spec.terrain[e].default);for(const t in i)if(!e(i[t],r[t])){n.set(i),this.stylesheet.terrain=i;const t=this._setTransitionParameters({duration:0});n.updateTransitions(t);break}}this._updateDrapeFirstLayers(),this._markersNeedUpdate=!0}_createFog(t){const e=this.fog=new C(t,this.map.transform);this.stylesheet.fog=t;const n=this._setTransitionParameters({duration:0});e.updateTransitions(n)}_updateMarkersOpacity(){0!==this.map._markers.length&&this.map._requestDomTask((()=>{for(const t of this.map._markers)t._evaluateOpacity()}))}getFog(){return this.fog?this.fog.get():null}setFog(t){if(this._checkLoaded(),!t)return delete this.fog,delete this.stylesheet.fog,void(this._markersNeedUpdate=!0);if(this.fog){const n=this.fog,r=n.get();0===Object.keys(t).length&&n.set(t);for(const i in t)if(!e(t[i],r[i])){n.set(t),this.stylesheet.fog=t;const e=this._setTransitionParameters({duration:0});n.updateTransitions(e);break}}else this._createFog(t);this._markersNeedUpdate=!0}_setTransitionParameters(e){return{now:t.exported.now(),transition:t.extend(e,this.stylesheet.transition)}}_updateDrapeFirstLayers(){if(!this.map._optimizeForTerrain||!this.terrain)return;const t=this._order.filter((t=>this.isLayerDraped(this._layers[t]))),e=this._order.filter((t=>!this.isLayerDraped(this._layers[t])));this._drapedFirstOrder=[],this._drapedFirstOrder.push(...t),this._drapedFirstOrder.push(...e)}_createTerrain(t,e){const n=this.terrain=new E(t,e);this.stylesheet.terrain=t,this.dispatcher.broadcast("enableTerrain",!this.terrainSetForDrapingOnly()),this._force3DLayerUpdate();const r=this._setTransitionParameters({duration:0});n.updateTransitions(r)}_force3DLayerUpdate(){for(const t in this._layers){const e=this._layers[t];"fill-extrusion"===e.type&&this._updateLayer(e)}}_forceSymbolLayerUpdate(){for(const t in this._layers){const e=this._layers[t];"symbol"===e.type&&this._updateLayer(e)}}_validate(e,n,r,i){let o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};return(!o||!1!==o.validate)&&He(this,e.call(t.validateStyle,t.extend({key:n,style:this.serialize(),value:r,styleSpec:t.spec},i)))}_remove(){this._request&&(this._request.cancel(),this._request=null),this._spriteRequest&&(this._spriteRequest.cancel(),this._spriteRequest=null),t.evented.off("pluginStateChange",this._rtlTextPluginCallback);for(const t in this._layers)this._layers[t].setEventedParent(null);for(const t in this._sourceCaches)this._sourceCaches[t].clearTiles(),this._sourceCaches[t].setEventedParent(null);this.imageManager.setEventedParent(null),this.setEventedParent(null),this.dispatcher.remove()}_clearSource(t){const e=this._getSourceCaches(t);for(const n of e)n.clearTiles()}_reloadSource(t){const e=this._getSourceCaches(t);for(const n of e)n.resume(),n.reload()}_reloadSources(){for(const t of this._getSources())t.reload&&t.reload()}_updateSources(t){for(const e in this._sourceCaches)this._sourceCaches[e].update(t)}_generateCollisionBoxes(){for(const t in this._sourceCaches){const e=this._sourceCaches[t];e.resume(),e.reload()}}_updatePlacement(e,n,r,i){let o=arguments.length>4&&void 0!==arguments[4]&&arguments[4],a=!1,s=!1;const l={};for(const t of this._order){const n=this._layers[t];if("symbol"!==n.type)continue;if(!l[n.source]){const t=this._getLayerSourceCache(n);if(!t)continue;l[n.source]=t.getRenderableIds(!0).map((e=>t.getTileByID(e))).sort(((t,e)=>e.tileID.overscaledZ-t.tileID.overscaledZ||(t.tileID.isLessThan(e.tileID)?-1:1)))}const r=this.crossTileSymbolIndex.addLayer(n,l[n.source],e.center.lng,e.projection);a=a||r}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._order),o=o||this._layerOrderChanged||0===r,this._layerOrderChanged&&this.fire(new t.Event("neworder")),(o||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(t.exported.now(),e.zoom))&&(this.pauseablePlacement=new Ne(e,this._order,o,n,r,i,this.placement,this.fog&&e.projection.supportsFog?this.fog.state:null),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,l),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(t.exported.now()),s=!0),a&&this.pauseablePlacement.placement.setStale()),s||a)for(const t of this._order){const e=this._layers[t];"symbol"===e.type&&this.placement.updateLayerOpacities(e,l[e.source])}return!this.pauseablePlacement.isDone()||this.placement.hasTransitions(t.exported.now())}_releaseSymbolFadeTiles(){for(const t in this._sourceCaches)this._sourceCaches[t].releaseSymbolFadeTiles()}getImages(t,e,n){this.imageManager.getImages(e.icons,n),this._updateTilesForChangedImages();const r=t=>{t&&t.setDependencies(e.tileID.key,e.type,e.icons)};r(this._otherSourceCaches[e.source]),r(this._symbolSourceCaches[e.source])}getGlyphs(t,e,n){this.glyphManager.getGlyphs(e.stacks,n)}getResource(e,n,r){return t.makeRequest(n,r)}_getSourceCache(t){return this._otherSourceCaches[t]}_getLayerSourceCache(t){return"symbol"===t.type?this._symbolSourceCaches[t.source]:this._otherSourceCaches[t.source]}_getSourceCaches(t){const e=[];return this._otherSourceCaches[t]&&e.push(this._otherSourceCaches[t]),this._symbolSourceCaches[t]&&e.push(this._symbolSourceCaches[t]),e}_isSourceCacheLoaded(e){const n=this._getSourceCaches(e);return 0===n.length?(this.fire(new t.ErrorEvent(new Error("There is no source with ID '".concat(e,"'")))),!1):n.every((t=>t.loaded()))}has3DLayers(){return this._num3DLayers>0}hasSymbolLayers(){return this._numSymbolLayers>0}hasCircleLayers(){return this._numCircleLayers>0}_clearWorkerCaches(){this.dispatcher.broadcast("clearCaches")}destroy(){this._clearWorkerCaches(),this.terrainSetForDrapingOnly()&&(delete this.terrain,delete this.stylesheet.terrain)}}$e.getSourceType=function(t){return Pt[t]},$e.setSourceType=function(t,e){Pt[t]=e},$e.registerForPluginStateChange=t.registerForPluginStateChange;var Je="\n#define EPSILON 0.0000001\n#define PI 3.141592653589793\n#define EXTENT 8192.0\n#define HALF_PI PI/2.0\n#define QUARTER_PI PI/4.0\n#define RAD_TO_DEG 180.0/PI\n#define DEG_TO_RAD PI/180.0\n#define GLOBE_RADIUS EXTENT/PI/2.0",Qe="attribute highp vec3 a_pos_3f;uniform lowp mat4 u_matrix;varying highp vec3 v_uv;void main() {const mat3 half_neg_pi_around_x=mat3(1.0,0.0, 0.0,0.0,0.0,-1.0,0.0,1.0, 0.0);v_uv=half_neg_pi_around_x*a_pos_3f;vec4 pos=u_matrix*vec4(a_pos_3f,1.0);gl_Position=pos.xyww;}",tn="\n#define ELEVATION_SCALE 7.0\n#define ELEVATION_OFFSET 450.0\n#ifdef PROJECTION_GLOBE_VIEW\nuniform vec3 u_tile_tl_up;uniform vec3 u_tile_tr_up;uniform vec3 u_tile_br_up;uniform vec3 u_tile_bl_up;uniform float u_tile_up_scale;vec3 elevationVector(vec2 pos) {vec2 uv=pos/EXTENT;vec3 up=normalize(mix(\nmix(u_tile_tl_up,u_tile_tr_up,uv.xxx),mix(u_tile_bl_up,u_tile_br_up,uv.xxx),uv.yyy));return up*u_tile_up_scale;}\n#else\nvec3 elevationVector(vec2 pos) { return vec3(0,0,1); }\n#endif\nconst float skirtOffset=24575.0;vec3 decomposeToPosAndSkirt(vec2 posWithComposedSkirt)\n{float skirt=float(posWithComposedSkirt.x >=skirtOffset);vec2 pos=posWithComposedSkirt-vec2(skirt*skirtOffset,0.0);return vec3(pos,skirt);}\n#ifdef TERRAIN\n#ifdef TERRAIN_DEM_FLOAT_FORMAT\nuniform highp sampler2D u_dem;uniform highp sampler2D u_dem_prev;\n#else\nuniform sampler2D u_dem;uniform sampler2D u_dem_prev;\n#endif\nuniform vec4 u_dem_unpack;uniform vec2 u_dem_tl;uniform vec2 u_dem_tl_prev;uniform float u_dem_scale;uniform float u_dem_scale_prev;uniform float u_dem_size;uniform float u_dem_lerp;uniform float u_exaggeration;uniform float u_meter_to_dem;uniform mat4 u_label_plane_matrix_inv;uniform sampler2D u_depth;uniform vec2 u_depth_size_inv;vec4 tileUvToDemSample(vec2 uv,float dem_size,float dem_scale,vec2 dem_tl) {vec2 pos=dem_size*(uv*dem_scale+dem_tl)+1.0;vec2 f=fract(pos);return vec4((pos-f+0.5)/(dem_size+2.0),f);}float decodeElevation(vec4 v) {return dot(vec4(v.xyz*255.0,-1.0),u_dem_unpack);}float currentElevation(vec2 apos) {\n#ifdef TERRAIN_DEM_FLOAT_FORMAT\nvec2 pos=(u_dem_size*(apos/8192.0*u_dem_scale+u_dem_tl)+1.5)/(u_dem_size+2.0);return u_exaggeration*texture2D(u_dem,pos).a;\n#else\nfloat dd=1.0/(u_dem_size+2.0);vec4 r=tileUvToDemSample(apos/8192.0,u_dem_size,u_dem_scale,u_dem_tl);vec2 pos=r.xy;vec2 f=r.zw;float tl=decodeElevation(texture2D(u_dem,pos));\n#ifdef TERRAIN_DEM_NEAREST_FILTER\nreturn u_exaggeration*tl;\n#endif\nfloat tr=decodeElevation(texture2D(u_dem,pos+vec2(dd,0.0)));float bl=decodeElevation(texture2D(u_dem,pos+vec2(0.0,dd)));float br=decodeElevation(texture2D(u_dem,pos+vec2(dd,dd)));return u_exaggeration*mix(mix(tl,tr,f.x),mix(bl,br,f.x),f.y);\n#endif\n}float prevElevation(vec2 apos) {\n#ifdef TERRAIN_DEM_FLOAT_FORMAT\nvec2 pos=(u_dem_size*(apos/8192.0*u_dem_scale_prev+u_dem_tl_prev)+1.5)/(u_dem_size+2.0);return u_exaggeration*texture2D(u_dem_prev,pos).a;\n#else\nfloat dd=1.0/(u_dem_size+2.0);vec4 r=tileUvToDemSample(apos/8192.0,u_dem_size,u_dem_scale_prev,u_dem_tl_prev);vec2 pos=r.xy;vec2 f=r.zw;float tl=decodeElevation(texture2D(u_dem_prev,pos));float tr=decodeElevation(texture2D(u_dem_prev,pos+vec2(dd,0.0)));float bl=decodeElevation(texture2D(u_dem_prev,pos+vec2(0.0,dd)));float br=decodeElevation(texture2D(u_dem_prev,pos+vec2(dd,dd)));return u_exaggeration*mix(mix(tl,tr,f.x),mix(bl,br,f.x),f.y);\n#endif\n}\n#ifdef TERRAIN_VERTEX_MORPHING\nfloat elevation(vec2 apos) {\n#ifdef ZERO_EXAGGERATION\nreturn 0.0;\n#endif\nfloat nextElevation=currentElevation(apos);float prevElevation=prevElevation(apos);return mix(prevElevation,nextElevation,u_dem_lerp);}\n#else\nfloat elevation(vec2 apos) {\n#ifdef ZERO_EXAGGERATION\nreturn 0.0;\n#endif\nreturn currentElevation(apos);}\n#endif\nhighp float unpack_depth(highp vec4 rgba_depth)\n{const highp vec4 bit_shift=vec4(1.0/(255.0*255.0*255.0),1.0/(255.0*255.0),1.0/255.0,1.0);return dot(rgba_depth,bit_shift)*2.0-1.0;}bool isOccluded(vec4 frag) {vec3 coord=frag.xyz/frag.w;float depth=unpack_depth(texture2D(u_depth,(coord.xy+1.0)*0.5));return coord.z > depth+0.0005;}float occlusionFade(vec4 frag) {vec3 coord=frag.xyz/frag.w;vec3 df=vec3(5.0*u_depth_size_inv,0.0);vec2 uv=0.5*coord.xy+0.5;vec4 depth=vec4(\nunpack_depth(texture2D(u_depth,uv-df.xz)),unpack_depth(texture2D(u_depth,uv+df.xz)),unpack_depth(texture2D(u_depth,uv-df.zy)),unpack_depth(texture2D(u_depth,uv+df.zy))\n);return dot(vec4(0.25),vec4(1.0)-clamp(300.0*(vec4(coord.z-0.001)-depth),0.0,1.0));}vec4 fourSample(vec2 pos,vec2 off) {\n#ifdef TERRAIN_DEM_FLOAT_FORMAT\nfloat tl=texture2D(u_dem,pos).a;float tr=texture2D(u_dem,pos+vec2(off.x,0.0)).a;float bl=texture2D(u_dem,pos+vec2(0.0,off.y)).a;float br=texture2D(u_dem,pos+off).a;\n#else\nvec4 demtl=vec4(texture2D(u_dem,pos).xyz*255.0,-1.0);float tl=dot(demtl,u_dem_unpack);vec4 demtr=vec4(texture2D(u_dem,pos+vec2(off.x,0.0)).xyz*255.0,-1.0);float tr=dot(demtr,u_dem_unpack);vec4 dembl=vec4(texture2D(u_dem,pos+vec2(0.0,off.y)).xyz*255.0,-1.0);float bl=dot(dembl,u_dem_unpack);vec4 dembr=vec4(texture2D(u_dem,pos+off).xyz*255.0,-1.0);float br=dot(dembr,u_dem_unpack);\n#endif\nreturn vec4(tl,tr,bl,br);}float flatElevation(vec2 pack) {vec2 apos=floor(pack/8.0);vec2 span=10.0*(pack-apos*8.0);vec2 uvTex=(apos-vec2(1.0,1.0))/8190.0;float size=u_dem_size+2.0;float dd=1.0/size;vec2 pos=u_dem_size*(uvTex*u_dem_scale+u_dem_tl)+1.0;vec2 f=fract(pos);pos=(pos-f+0.5)*dd;vec4 h=fourSample(pos,vec2(dd));float z=mix(mix(h.x,h.y,f.x),mix(h.z,h.w,f.x),f.y);vec2 w=floor(0.5*(span*u_meter_to_dem-1.0));vec2 d=dd*w;h=fourSample(pos-d,2.0*d+vec2(dd));vec4 diff=abs(h.xzxy-h.ywzw);vec2 slope=min(vec2(0.25),u_meter_to_dem*0.5*(diff.xz+diff.yw)/(2.0*w+vec2(1.0)));vec2 fix=slope*span;float base=z+max(fix.x,fix.y);return u_exaggeration*base;}float elevationFromUint16(float word) {return u_exaggeration*(word/ELEVATION_SCALE-ELEVATION_OFFSET);}\n#else\nfloat elevation(vec2 pos) { return 0.0; }bool isOccluded(vec4 frag) { return false; }float occlusionFade(vec4 frag) { return 1.0; }\n#endif",en="#ifdef FOG\nuniform mediump vec4 u_fog_color;uniform mediump vec2 u_fog_range;uniform mediump float u_fog_horizon_blend;uniform mediump mat4 u_fog_matrix;varying vec3 v_fog_pos;float fog_range(float depth) {return (depth-u_fog_range[0])/(u_fog_range[1]-u_fog_range[0]);}float fog_horizon_blending(vec3 camera_dir) {float t=max(0.0,camera_dir.z/u_fog_horizon_blend);return u_fog_color.a*exp(-3.0*t*t);}float fog_opacity(float t) {const float decay=6.0;float falloff=1.0-min(1.0,exp(-decay*t));falloff*=falloff*falloff;return u_fog_color.a*min(1.0,1.00747*falloff);}vec3 fog_position(vec3 pos) {return (u_fog_matrix*vec4(pos,1.0)).xyz;}vec3 fog_position(vec2 pos) {return fog_position(vec3(pos,0.0));}float fog(vec3 pos) {float depth=length(pos);float opacity=fog_opacity(fog_range(depth));return opacity*fog_horizon_blending(pos/depth);}\n#endif",nn="#ifdef FOG\nuniform mediump vec4 u_fog_color;uniform mediump vec2 u_fog_range;uniform mediump float u_fog_horizon_blend;uniform mediump float u_fog_temporal_offset;varying vec3 v_fog_pos;uniform highp vec3 u_frustum_tl;uniform highp vec3 u_frustum_tr;uniform highp vec3 u_frustum_br;uniform highp vec3 u_frustum_bl;uniform highp vec3 u_globe_pos;uniform highp float u_globe_radius;uniform highp vec2 u_viewport;uniform float u_globe_transition;uniform int u_is_globe;float fog_range(float depth) {return (depth-u_fog_range[0])/(u_fog_range[1]-u_fog_range[0]);}float fog_horizon_blending(vec3 camera_dir) {float t=max(0.0,camera_dir.z/u_fog_horizon_blend);return u_fog_color.a*exp(-3.0*t*t);}float fog_opacity(float t) {const float decay=6.0;float falloff=1.0-min(1.0,exp(-decay*t));falloff*=falloff*falloff;return u_fog_color.a*min(1.0,1.00747*falloff);}float globe_glow_progress() {highp vec2 uv=gl_FragCoord.xy/u_viewport;highp vec3 ray_dir=mix(\nmix(u_frustum_tl,u_frustum_tr,uv.x),mix(u_frustum_bl,u_frustum_br,uv.x),1.0-uv.y);highp vec3 dir=normalize(ray_dir);highp vec3 closest_point=dot(u_globe_pos,dir)*dir;highp float sdf=length(closest_point-u_globe_pos)/u_globe_radius;return sdf+PI*0.5;}float fog_opacity(vec3 pos) {float depth=length(pos);return fog_opacity(fog_range(depth));}vec3 fog_apply(vec3 color,vec3 pos) {float depth=length(pos);float opacity;if (u_is_globe==1) {float glow_progress=globe_glow_progress();float t=mix(glow_progress,depth,u_globe_transition);opacity=fog_opacity(fog_range(t));} else {opacity=fog_opacity(fog_range(depth));opacity*=fog_horizon_blending(pos/depth);}return mix(color,u_fog_color.rgb,opacity);}vec4 fog_apply_from_vert(vec4 color,float fog_opac) {float alpha=EPSILON+color.a;color.rgb=mix(color.rgb/alpha,u_fog_color.rgb,fog_opac)*alpha;return color;}vec3 fog_apply_sky_gradient(vec3 camera_ray,vec3 sky_color) {float horizon_blend=fog_horizon_blending(normalize(camera_ray));return mix(sky_color,u_fog_color.rgb,horizon_blend);}vec4 fog_apply_premultiplied(vec4 color,vec3 pos) {float alpha=EPSILON+color.a;color.rgb=fog_apply(color.rgb/alpha,pos)*alpha;return color;}vec3 fog_dither(vec3 color) {vec2 dither_seed=gl_FragCoord.xy+u_fog_temporal_offset;return dither(color,dither_seed);}vec4 fog_dither(vec4 color) {return vec4(fog_dither(color.rgb),color.a);}\n#endif";let rn={},on={};const an=[];hn(Je,an),hn(tn,an),hn(en,an),hn(nn,an),rn=dn("",tn),on=dn(nn,en);const sn=dn("\n#if __VERSION__ >=300\n#define varying in\n#define gl_FragColor glFragColor\n#define texture2D texture\n#define textureCube texture\nout vec4 glFragColor;\n#endif\nhighp vec3 hash(highp vec2 p) {highp vec3 p3=fract(p.xyx*vec3(443.8975,397.2973,491.1871));p3+=dot(p3,p3.yxz+19.19);return fract((p3.xxy+p3.yzz)*p3.zyx);}vec3 dither(vec3 color,highp vec2 seed) {vec3 rnd=hash(seed)+hash(seed+0.59374)-0.5;return color+rnd/255.0;}highp float unpack_depth(highp vec4 rgba_depth)\n{const highp vec4 bit_shift=vec4(1.0/(255.0*255.0*255.0),1.0/(255.0*255.0),1.0/255.0,1.0);return dot(rgba_depth,bit_shift)*2.0-1.0;}highp vec4 pack_depth(highp float ndc_z) {highp float depth=ndc_z*0.5+0.5;const highp vec4 bit_shift=vec4(255.0*255.0*255.0,255.0*255.0,255.0,1.0);const highp vec4 bit_mask =vec4(0.0,1.0/255.0,1.0/255.0,1.0/255.0);highp vec4 res=fract(depth*bit_shift);res-=res.xxyz*bit_mask;return res;}","\n#if __VERSION__ >=300\n#define attribute in\n#define varying out\n#define texture2D texture\n#endif\nfloat wrap(float n,float min,float max) {float d=max-min;float w=mod(mod(n-min,d)+d,d)+min;return (w==min) ? max : w;}\n#ifdef PROJECTION_GLOBE_VIEW\nvec3 mercator_tile_position(mat4 matrix,vec2 tile_anchor,vec3 tile_id,vec2 mercator_center) {\n#ifndef PROJECTED_POS_ON_VIEWPORT\nfloat tiles=tile_id.z;vec2 mercator=(tile_anchor/EXTENT+tile_id.xy)/tiles;mercator-=mercator_center;mercator.x=wrap(mercator.x,-0.5,0.5);vec4 mercator_tile=vec4(mercator.xy*EXTENT,EXTENT/(2.0*PI),1.0);mercator_tile=matrix*mercator_tile;return mercator_tile.xyz;\n#else\nreturn vec3(0.0);\n#endif\n}vec3 mix_globe_mercator(vec3 globe,vec3 mercator,float t) {return mix(globe,mercator,t);}mat3 globe_mercator_surface_vectors(vec3 pos_normal,vec3 up_dir,float zoom_transition) {vec3 normal=zoom_transition==0.0 ? pos_normal : normalize(mix(pos_normal,up_dir,zoom_transition));vec3 xAxis=normalize(vec3(normal.z,0.0,-normal.x));vec3 yAxis=normalize(cross(normal,xAxis));return mat3(xAxis,yAxis,normal);}\n#endif\nvec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(\nunpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0\n);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}const vec4 AWAY=vec4(-1000.0,-1000.0,-1000.0,1);//Normalized device coordinate that is not rendered."),ln=Je,cn="\n#ifdef GL_ES\nprecision mediump float;\n#else\n\n#if !defined(lowp)\n#define lowp\n#endif\n\n#if !defined(mediump)\n#define mediump\n#endif\n\n#if !defined(highp)\n#define highp\n#endif\n\n#endif";var un={background:dn("uniform vec4 u_color;uniform float u_opacity;\n#ifdef LIGHTING_3D_MODE\nvarying vec4 v_color;\n#endif\nvoid main() {vec4 out_color;\n#ifdef LIGHTING_3D_MODE\nout_color=v_color;\n#else\nout_color=u_color;\n#endif\n#ifdef FOG\nout_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));\n#endif\ngl_FragColor=out_color*u_opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec2 a_pos;uniform mat4 u_matrix;\n#ifdef LIGHTING_3D_MODE\nuniform vec4 u_color;varying vec4 v_color;\n#endif\nvoid main() {gl_Position=u_matrix*vec4(a_pos,0,1);\n#ifdef LIGHTING_3D_MODE\nv_color=apply_lighting(u_color);\n#endif\n#ifdef FOG\nv_fog_pos=fog_position(a_pos);\n#endif\n}"),backgroundPattern:dn("uniform vec2 u_pattern_tl;uniform vec2 u_pattern_br;uniform vec2 u_texsize;uniform float u_opacity;uniform sampler2D u_image;varying vec2 v_pos;void main() {vec2 imagecoord=mod(v_pos,1.0);vec2 pos=mix(u_pattern_tl/u_texsize,u_pattern_br/u_texsize,imagecoord);vec4 out_color=texture2D(u_image,pos);\n#ifdef LIGHTING_3D_MODE\nout_color=apply_lighting(out_color);\n#endif\n#ifdef FOG\nout_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));\n#endif\ngl_FragColor=out_color*u_opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_pattern_size;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_pattern_size,u_tile_units_to_pixels,a_pos);\n#ifdef FOG\nv_fog_pos=fog_position(a_pos);\n#endif\n}"),circle:dn("varying vec3 v_data;varying float v_visibility;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define mediump float radius\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define highp vec4 stroke_color\n#pragma mapbox: define mediump float stroke_width\n#pragma mapbox: define lowp float stroke_opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize mediump float radius\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize highp vec4 stroke_color\n#pragma mapbox: initialize mediump float stroke_width\n#pragma mapbox: initialize lowp float stroke_opacity\nvec2 extrude=v_data.xy;float extrude_length=length(extrude);lowp float antialiasblur=v_data.z;float antialiased_blur=-max(blur,antialiasblur);float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(\nantialiased_blur,0.0,extrude_length-radius/(radius+stroke_width)\n);vec4 out_color=mix(color*opacity,stroke_color*stroke_opacity,color_t);\n#ifdef LIGHTING_3D_MODE\nout_color=apply_lighting(out_color);\n#endif\n#ifdef FOG\nout_color=fog_apply_premultiplied(out_color,v_fog_pos);\n#endif\ngl_FragColor=out_color*(v_visibility*opacity_t);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","#define NUM_VISIBILITY_RINGS 2\n#define INV_SQRT2 0.70710678\n#define ELEVATION_BIAS 0.0001\n#define NUM_SAMPLES_PER_RING 16\nuniform mat4 u_matrix;uniform mat2 u_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;attribute vec2 a_pos;\n#ifdef PROJECTION_GLOBE_VIEW\nattribute vec3 a_pos_3;attribute vec3 a_pos_normal_3;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_tile_id;uniform float u_zoom_transition;uniform vec3 u_up_dir;\n#endif\nvarying vec3 v_data;varying float v_visibility;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define mediump float radius\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define highp vec4 stroke_color\n#pragma mapbox: define mediump float stroke_width\n#pragma mapbox: define lowp float stroke_opacity\nvec2 calc_offset(vec2 extrusion,float radius,float stroke_width, float view_scale) {return extrusion*(radius+stroke_width)*u_extrude_scale*view_scale;}float cantilevered_elevation(vec2 pos,float radius,float stroke_width,float view_scale) {vec2 c1=pos+calc_offset(vec2(-1,-1),radius,stroke_width,view_scale);vec2 c2=pos+calc_offset(vec2(1,-1),radius,stroke_width,view_scale);vec2 c3=pos+calc_offset(vec2(1,1),radius,stroke_width,view_scale);vec2 c4=pos+calc_offset(vec2(-1,1),radius,stroke_width,view_scale);float h1=elevation(c1)+ELEVATION_BIAS;float h2=elevation(c2)+ELEVATION_BIAS;float h3=elevation(c3)+ELEVATION_BIAS;float h4=elevation(c4)+ELEVATION_BIAS;return max(h4,max(h3,max(h1,h2)));}float circle_elevation(vec2 pos) {\n#if defined(TERRAIN)\nreturn elevation(pos)+ELEVATION_BIAS;\n#else\nreturn 0.0;\n#endif\n}vec4 project_vertex(vec2 extrusion,vec4 world_center,vec4 projected_center,float radius,float stroke_width, float view_scale,mat3 surface_vectors) {vec2 sample_offset=calc_offset(extrusion,radius,stroke_width,view_scale);\n#ifdef PITCH_WITH_MAP\n#ifdef PROJECTION_GLOBE_VIEW\nreturn u_matrix*( world_center+vec4(sample_offset.x*surface_vectors[0]+sample_offset.y*surface_vectors[1],0) );\n#else\nreturn u_matrix*( world_center+vec4(sample_offset,0,0) );\n#endif\n#else\nreturn projected_center+vec4(sample_offset,0,0);\n#endif\n}float get_sample_step() {\n#ifdef PITCH_WITH_MAP\nreturn 2.0*PI/float(NUM_SAMPLES_PER_RING);\n#else\nreturn PI/float(NUM_SAMPLES_PER_RING);\n#endif\n}void main(void) {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize mediump float radius\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize highp vec4 stroke_color\n#pragma mapbox: initialize mediump float stroke_width\n#pragma mapbox: initialize lowp float stroke_opacity\nvec2 extrude=vec2(mod(a_pos,2.0)*2.0-1.0);vec2 circle_center=floor(a_pos*0.5);vec4 world_center;mat3 surface_vectors;\n#ifdef PROJECTION_GLOBE_VIEW\nvec3 pos_normal_3=a_pos_normal_3/16384.0;surface_vectors=globe_mercator_surface_vectors(pos_normal_3,u_up_dir,u_zoom_transition);vec3 surface_extrusion=extrude.x*surface_vectors[0]+extrude.y*surface_vectors[1];vec3 globe_elevation=elevationVector(circle_center)*circle_elevation(circle_center);vec3 globe_pos=a_pos_3+surface_extrusion+globe_elevation;vec3 mercator_elevation=u_up_dir*u_tile_up_scale*circle_elevation(circle_center);vec3 merc_pos=mercator_tile_position(u_inv_rot_matrix,circle_center,u_tile_id,u_merc_center)+surface_extrusion+mercator_elevation;vec3 pos=mix_globe_mercator(globe_pos,merc_pos,u_zoom_transition);world_center=vec4(pos,1);\n#else \nsurface_vectors=mat3(1.0);float height=circle_elevation(circle_center);world_center=vec4(circle_center,height,1);\n#endif\nvec4 projected_center=u_matrix*world_center;float view_scale=0.0;\n#ifdef PITCH_WITH_MAP\n#ifdef SCALE_WITH_MAP\nview_scale=1.0;\n#else\nview_scale=projected_center.w/u_camera_to_center_distance;\n#endif\n#else\n#ifdef SCALE_WITH_MAP\nview_scale=u_camera_to_center_distance;\n#else\nview_scale=projected_center.w;\n#endif\n#endif\ngl_Position=project_vertex(extrude,world_center,projected_center,radius,stroke_width,view_scale,surface_vectors);float visibility=0.0;\n#ifdef TERRAIN\nfloat step=get_sample_step();vec4 occlusion_world_center;vec4 occlusion_projected_center;\n#ifdef PITCH_WITH_MAP\nfloat cantilevered_height=cantilevered_elevation(circle_center,radius,stroke_width,view_scale);occlusion_world_center=vec4(circle_center,cantilevered_height,1);occlusion_projected_center=u_matrix*occlusion_world_center;\n#else\nocclusion_world_center=world_center;occlusion_projected_center=projected_center;\n#endif\nfor(int ring=0; ring < NUM_VISIBILITY_RINGS; ring++) {float scale=(float(ring)+1.0)/float(NUM_VISIBILITY_RINGS);for(int i=0; i < NUM_SAMPLES_PER_RING; i++) {vec2 extrusion=vec2(cos(step*float(i)),-sin(step*float(i)))*scale;vec4 frag_pos=project_vertex(extrusion,occlusion_world_center,occlusion_projected_center,radius,stroke_width,view_scale,surface_vectors);visibility+=float(!isOccluded(frag_pos));}}visibility/=float(NUM_VISIBILITY_RINGS)*float(NUM_SAMPLES_PER_RING);\n#else\nvisibility=1.0;\n#endif\n#ifdef PROJECTION_GLOBE_VIEW\nvisibility=1.0;\n#endif\nv_visibility=visibility;lowp float antialiasblur=1.0/u_device_pixel_ratio/(radius+stroke_width);v_data=vec3(extrude.x,extrude.y,antialiasblur);\n#ifdef FOG\nv_fog_pos=fog_position(world_center.xyz);\n#endif\n}"),clippingMask:dn("void main() {gl_FragColor=vec4(1.0);}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),heatmap:dn("uniform highp float u_intensity;varying vec2 v_extrude;\n#pragma mapbox: define highp float weight\n#define GAUSS_COEF 0.3989422804014327\nvoid main() {\n#pragma mapbox: initialize highp float weight\nfloat d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);gl_FragColor=vec4(val,1.0,1.0,1.0);\n#ifdef FOG\nif (u_is_globe==0) {gl_FragColor.r*=pow(1.0-fog_opacity(v_fog_pos),2.0);}\n#endif\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;attribute vec2 a_pos;\n#ifdef PROJECTION_GLOBE_VIEW\nattribute vec3 a_pos_3;attribute vec3 a_pos_normal_3;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_tile_id;uniform float u_zoom_transition;uniform vec3 u_up_dir;\n#endif\nvarying vec2 v_extrude;\n#pragma mapbox: define highp float weight\n#pragma mapbox: define mediump float radius\nconst highp float ZERO=1.0/255.0/16.0;\n#define GAUSS_COEF 0.3989422804014327\nvoid main(void) {\n#pragma mapbox: initialize highp float weight\n#pragma mapbox: initialize mediump float radius\nvec2 unscaled_extrude=vec2(mod(a_pos,2.0)*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec2 tilePos=floor(a_pos*0.5);vec3 pos;\n#ifdef PROJECTION_GLOBE_VIEW\nvec3 pos_normal_3=a_pos_normal_3/16384.0;mat3 surface_vectors=globe_mercator_surface_vectors(pos_normal_3,u_up_dir,u_zoom_transition);vec3 surface_extrusion=extrude.x*surface_vectors[0]+extrude.y*surface_vectors[1];vec3 globe_elevation=elevationVector(tilePos)*elevation(tilePos);vec3 globe_pos=a_pos_3+surface_extrusion+globe_elevation;vec3 mercator_elevation=u_up_dir*u_tile_up_scale*elevation(tilePos);vec3 merc_pos=mercator_tile_position(u_inv_rot_matrix,tilePos,u_tile_id,u_merc_center)+surface_extrusion+mercator_elevation;pos=mix_globe_mercator(globe_pos,merc_pos,u_zoom_transition);\n#else\npos=vec3(tilePos+extrude,elevation(tilePos));\n#endif\ngl_Position=u_matrix*vec4(pos,1);\n#ifdef FOG\nv_fog_pos=fog_position(pos);\n#endif\n}"),heatmapTexture:dn("uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;varying vec2 v_pos;void main() {float t=texture2D(u_image,v_pos).r;vec4 color=texture2D(u_color_ramp,vec2(t,0.5));gl_FragColor=color*u_opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(0.0);\n#endif\n}","attribute vec2 a_pos;varying vec2 v_pos;void main() {gl_Position=vec4(a_pos,0,1);v_pos=a_pos*0.5+0.5;}"),collisionBox:dn("varying float v_placed;varying float v_notUsed;void main() {vec4 red =vec4(1.0,0.0,0.0,1.0);vec4 blue=vec4(0.0,0.0,1.0,0.5);gl_FragColor =mix(red,blue,step(0.5,v_placed))*0.5;gl_FragColor*=mix(1.0,0.1,step(0.5,v_notUsed));}","attribute vec3 a_pos;attribute vec2 a_anchor_pos;attribute vec2 a_extrude;attribute vec2 a_placed;attribute vec2 a_shift;attribute float a_size_scale;attribute vec2 a_padding;uniform mat4 u_matrix;uniform vec2 u_extrude_scale;uniform float u_camera_to_center_distance;varying float v_placed;varying float v_notUsed;void main() {vec4 projectedPoint=u_matrix*vec4(a_pos+elevationVector(a_anchor_pos)*elevation(a_anchor_pos),1);highp float camera_to_anchor_distance=projectedPoint.w;highp float collision_perspective_ratio=clamp(\n0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,1.5);gl_Position=projectedPoint;gl_Position.xy+=(a_extrude*a_size_scale+a_shift+a_padding)*u_extrude_scale*gl_Position.w*collision_perspective_ratio;v_placed=a_placed.x;v_notUsed=a_placed.y;}"),collisionCircle:dn("varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;void main() {float alpha=0.5*min(v_perspective_ratio,1.0);float stroke_radius=0.9*max(v_perspective_ratio,1.0);float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);gl_FragColor=color*alpha*opacity_t;}","attribute vec2 a_pos_2f;attribute float a_radius;attribute vec2 a_flags;uniform mat4 u_matrix;uniform mat4 u_inv_matrix;uniform vec2 u_viewport_size;uniform float u_camera_to_center_distance;varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;vec3 toTilePosition(vec2 screenPos) {vec4 rayStart=u_inv_matrix*vec4(screenPos,-1.0,1.0);vec4 rayEnd  =u_inv_matrix*vec4(screenPos, 1.0,1.0);rayStart.xyz/=rayStart.w;rayEnd.xyz  /=rayEnd.w;highp float t=(0.0-rayStart.z)/(rayEnd.z-rayStart.z);return mix(rayStart.xyz,rayEnd.xyz,t);}void main() {vec2 quadCenterPos=a_pos_2f;float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(\nmix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;vec3 tilePos=toTilePosition(quadCenterPos);vec4 clipPos=u_matrix*vec4(tilePos,1.0);highp float camera_to_anchor_distance=clipPos.w;highp float collision_perspective_ratio=clamp(\n0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_perspective_ratio=collision_perspective_ratio;v_collision=collision;gl_Position=vec4(clipPos.xyz/clipPos.w,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}"),debug:dn("uniform highp vec4 u_color;uniform sampler2D u_overlay;varying vec2 v_uv;void main() {vec4 overlay_color=texture2D(u_overlay,v_uv);gl_FragColor=mix(u_color,overlay_color,overlay_color.a);}","attribute vec2 a_pos;\n#ifdef PROJECTION_GLOBE_VIEW\nattribute vec3 a_pos_3;\n#endif\nvarying vec2 v_uv;uniform mat4 u_matrix;uniform float u_overlay_scale;void main() {float h=elevation(a_pos);v_uv=a_pos/8192.0;\n#ifdef PROJECTION_GLOBE_VIEW\ngl_Position=u_matrix*vec4(a_pos_3+elevationVector(a_pos)*h,1);\n#else\ngl_Position=u_matrix*vec4(a_pos*u_overlay_scale,h,1);\n#endif\n}"),fill:dn("#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float opacity\nvec4 out_color=color;\n#ifdef LIGHTING_3D_MODE\nout_color=apply_lighting(out_color);\n#endif\n#ifdef FOG\nout_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));\n#endif\ngl_FragColor=out_color*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec2 a_pos;uniform mat4 u_matrix;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float opacity\ngl_Position=u_matrix*vec4(a_pos,0,1);\n#ifdef FOG\nv_fog_pos=fog_position(a_pos);\n#endif\n}"),fillOutline:dn("varying vec2 v_pos;\n#pragma mapbox: define highp vec4 outline_color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 outline_color\n#pragma mapbox: initialize lowp float opacity\nfloat dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);vec4 out_color=outline_color;\n#ifdef LIGHTING_3D_MODE\nout_color=apply_lighting(out_color);\n#endif\n#ifdef FOG\nout_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));\n#endif\ngl_FragColor=out_color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec2 a_pos;uniform mat4 u_matrix;uniform vec2 u_world;varying vec2 v_pos;\n#pragma mapbox: define highp vec4 outline_color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 outline_color\n#pragma mapbox: initialize lowp float opacity\ngl_Position=u_matrix*vec4(a_pos,0,1);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;\n#ifdef FOG\nv_fog_pos=fog_position(a_pos);\n#endif\n}"),fillOutlinePattern:dn("uniform vec2 u_texsize;uniform sampler2D u_image;varying vec2 v_pos;varying vec2 v_pos_world;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern\nvec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;vec2 imagecoord=mod(v_pos,1.0);vec2 pos=mix(pattern_tl/u_texsize,pattern_br/u_texsize,imagecoord);float dist=length(v_pos_world-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);vec4 out_color=texture2D(u_image,pos);\n#ifdef LIGHTING_3D_MODE\nout_color=apply_lighting(out_color);\n#endif\n#ifdef FOG\nout_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));\n#endif\ngl_FragColor=out_color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos;varying vec2 v_pos_world;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern\n#pragma mapbox: define lowp float pixel_ratio\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern\n#pragma mapbox: initialize lowp float pixel_ratio\nvec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;gl_Position=u_matrix*vec4(a_pos,0,1);vec2 display_size=(pattern_br-pattern_tl)/pixel_ratio;v_pos=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,display_size,u_tile_units_to_pixels,a_pos);v_pos_world=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;\n#ifdef FOG\nv_fog_pos=fog_position(a_pos);\n#endif\n}"),fillPattern:dn("uniform vec2 u_texsize;uniform sampler2D u_image;varying vec2 v_pos;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern\nvec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;vec2 imagecoord=mod(v_pos,1.0);vec2 pos=mix(pattern_tl/u_texsize,pattern_br/u_texsize,imagecoord);vec4 out_color=texture2D(u_image,pos);\n#ifdef LIGHTING_3D_MODE\nout_color=apply_lighting(out_color);\n#endif\n#ifdef FOG\nout_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));\n#endif\ngl_FragColor=out_color*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern\n#pragma mapbox: define lowp float pixel_ratio\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern\n#pragma mapbox: initialize lowp float pixel_ratio\nvec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;vec2 display_size=(pattern_br-pattern_tl)/pixel_ratio;gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,display_size,u_tile_units_to_pixels,a_pos);\n#ifdef FOG\nv_fog_pos=fog_position(a_pos);\n#endif\n}"),fillExtrusion:dn("varying vec4 v_color;\n#ifdef RENDER_SHADOWS\nvarying highp vec4 v_pos_light_view_0;varying highp vec4 v_pos_light_view_1;varying float v_depth;\n#endif\n#ifdef FAUX_AO\nuniform lowp vec2 u_ao;varying vec3 v_ao;\n#endif\n#ifdef ZERO_ROOF_RADIUS\nvarying vec4 v_roof_color;\n#endif\n#if defined(ZERO_ROOF_RADIUS) || defined(RENDER_SHADOWS)\nvarying highp vec3 v_normal;\n#endif\nvoid main() {\n#if defined(ZERO_ROOF_RADIUS) || defined(RENDER_SHADOWS)\nvec3 normal=v_normal;\n#endif\nfloat z;vec4 color;\n#ifdef ZERO_ROOF_RADIUS\nz=float(normal.z > 0.00001);color=mix(v_color,v_roof_color,z);\n#else\ncolor=v_color;\n#endif\n#ifdef FAUX_AO\nfloat intensity=u_ao[0];float h=max(0.0,v_ao.z);float h_floors=h/u_ao[1];float y_shade=1.0-0.9*intensity*min(v_ao.y,1.0);float shade=(1.0-0.08*intensity)*(y_shade+(1.0-y_shade)*(1.0-pow(1.0-min(h_floors/16.0,1.0),16.0)))+0.08*intensity*min(h_floors/160.0,1.0);float concave=v_ao.x*v_ao.x;\n#ifdef ZERO_ROOF_RADIUS\nconcave*=(1.0-z);\n#endif\nfloat x_shade=mix(1.0,mix(0.6,0.75,min(h_floors/30.0,1.0)),intensity)+0.1*intensity*min(h,1.0);shade*=mix(1.0,x_shade*x_shade*x_shade,concave);color.rgb=color.rgb*shade;\n#endif\n#ifdef RENDER_SHADOWS\n#ifdef ZERO_ROOF_RADIUS\nnormal=mix(normal,vec3(0.0,0.0,1.0),z);\n#endif\ncolor.xyz=shadowed_color_normal(color.xyz,normalize(normal),v_pos_light_view_0,v_pos_light_view_1,v_depth);\n#endif\n#ifdef FOG\ncolor=fog_dither(fog_apply_premultiplied(color,v_fog_pos));\n#endif\ngl_FragColor=color;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform float u_edge_radius;attribute vec4 a_pos_normal_ed;attribute vec2 a_centroid_pos;\n#ifdef PROJECTION_GLOBE_VIEW\nattribute vec3 a_pos_3;attribute vec3 a_pos_normal_3;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_tile_id;uniform float u_zoom_transition;uniform vec3 u_up_dir;uniform float u_height_lift;\n#endif\nvarying vec4 v_color;\n#ifdef RENDER_SHADOWS\nuniform mat4 u_light_matrix_0;uniform mat4 u_light_matrix_1;varying highp vec4 v_pos_light_view_0;varying highp vec4 v_pos_light_view_1;varying float v_depth;\n#endif\n#ifdef ZERO_ROOF_RADIUS\nvarying vec4 v_roof_color;\n#endif\n#if defined(ZERO_ROOF_RADIUS) || defined(RENDER_SHADOWS)\nvarying highp vec3 v_normal;\n#endif\n#ifdef FAUX_AO\nuniform lowp vec2 u_ao;varying vec3 v_ao;\n#endif\n#pragma mapbox: define highp float base\n#pragma mapbox: define highp float height\n#pragma mapbox: define highp vec4 color\nvoid main() {\n#pragma mapbox: initialize highp float base\n#pragma mapbox: initialize highp float height\n#pragma mapbox: initialize highp vec4 color\nvec4 pos_nx=floor(a_pos_normal_ed*0.5);vec4 top_up_ny_start=a_pos_normal_ed-2.0*pos_nx;vec3 top_up_ny=top_up_ny_start.xyz;float x_normal=pos_nx.z/8192.0;vec3 normal=top_up_ny.y==1.0 ? vec3(0.0,0.0,1.0) : normalize(vec3(x_normal,(2.0*top_up_ny.z-1.0)*(1.0-abs(x_normal)),0.0));\n#if defined(ZERO_ROOF_RADIUS) || defined(RENDER_SHADOWS)\nv_normal=normal;\n#endif\nbase=max(0.0,base);height=max(0.0,top_up_ny.y==0.0 && top_up_ny.x==1.0 ? height-u_edge_radius : height);float t=top_up_ny.x;vec2 centroid_pos=vec2(0.0);\n#if defined(HAS_CENTROID) || defined(TERRAIN)\ncentroid_pos=a_centroid_pos;\n#endif\nfloat ele=0.0;float h=0.0;float c_ele;vec3 pos;\n#ifdef TERRAIN\nbool flat_roof=centroid_pos.x !=0.0 && t > 0.0;ele=elevation(pos_nx.xy);c_ele=flat_roof ? centroid_pos.y==0.0 ? elevationFromUint16(centroid_pos.x) : flatElevation(centroid_pos) : ele;h=flat_roof ? max(c_ele+height,ele+base+2.0) : ele+(t > 0.0 ? height : base==0.0 ?-5.0 : base);pos=vec3(pos_nx.xy,h);\n#else\nh=t > 0.0 ? height : base;pos=vec3(pos_nx.xy,h);\n#endif\n#ifdef PROJECTION_GLOBE_VIEW\nfloat lift=float((t+base) > 0.0)*u_height_lift;h+=lift;vec3 globe_normal=normalize(mix(a_pos_normal_3/16384.0,u_up_dir,u_zoom_transition));vec3 globe_pos=a_pos_3+globe_normal*(u_tile_up_scale*h);vec3 merc_pos=mercator_tile_position(u_inv_rot_matrix,pos.xy,u_tile_id,u_merc_center)+u_up_dir*u_tile_up_scale*pos.z;pos=mix_globe_mercator(globe_pos,merc_pos,u_zoom_transition);\n#endif\nfloat hidden=float(centroid_pos.x==0.0 && centroid_pos.y==1.0);gl_Position=mix(u_matrix*vec4(pos,1),AWAY,hidden);\n#ifdef RENDER_SHADOWS\nv_pos_light_view_0=u_light_matrix_0*vec4(pos,1);v_pos_light_view_1=u_light_matrix_1*vec4(pos,1);v_depth=gl_Position.w;\n#endif\nfloat NdotL=0.0;float colorvalue=0.0;\n#ifdef LIGHTING_3D_MODE\nNdotL=calculate_NdotL(normal);\n#else\ncolorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;NdotL=clamp(dot(normal,u_lightpos),0.0,1.0);NdotL=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),NdotL);\n#endif\nif (normal.y !=0.0) {float r=0.84;\n#ifndef LIGHTING_3D_MODE\nr=mix(0.7,0.98,1.0-u_lightintensity);\n#endif\nNdotL*=(\n(1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),r,1.0)));}v_color=vec4(0.0,0.0,0.0,1.0);\n#ifdef FAUX_AO\nfloat concave=pos_nx.w-floor(pos_nx.w*0.5)*2.0;float start=top_up_ny_start.w;float y_ground=1.0-clamp(t+base,0.0,1.0);float top_height=height;\n#ifdef TERRAIN\ntop_height=mix(max(c_ele+height,ele+base+2.0),ele+height,float(centroid_pos.x==0.0))-ele;y_ground+=y_ground*5.0/max(3.0,top_height);\n#endif\nv_ao=vec3(mix(concave,-concave,start),y_ground,h-ele);NdotL*=(1.0+0.05*(1.0-top_up_ny.y)*u_ao[0]);\n#ifdef PROJECTION_GLOBE_VIEW\ntop_height+=u_height_lift;\n#endif\ngl_Position.z-=(0.0000006*(min(top_height,500.)+2.0*min(base,500.0)+60.0*concave+3.0*start))*gl_Position.w;\n#endif\n#ifdef LIGHTING_3D_MODE\nv_color=apply_lighting(color,NdotL);\n#else\nv_color.rgb+=clamp(color.rgb*NdotL*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));\n#endif\nv_color*=u_opacity;\n#ifdef ZERO_ROOF_RADIUS\nv_roof_color=vec4(0.0,0.0,0.0,1.0);\n#ifdef LIGHTING_3D_MODE\nv_roof_color=apply_lighting(color,calculate_NdotL(vec3(0.0,0.0,1.0)));\n#else\nfloat roofNdotL=clamp(u_lightpos.z,0.0,1.0);roofNdotL=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),roofNdotL);v_roof_color.rgb+=clamp(color.rgb*roofNdotL*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));\n#endif\nv_roof_color*=u_opacity;\n#endif\n#ifdef FOG\nv_fog_pos=fog_position(pos);\n#endif\n}"),fillExtrusionPattern:dn("uniform vec2 u_texsize;uniform sampler2D u_image;\n#ifdef FAUX_AO\nuniform lowp vec2 u_ao;varying vec3 v_ao;\n#endif\n#ifdef LIGHTING_3D_MODE\nvarying float v_NdotL;\n#endif\nvarying vec2 v_pos;varying vec4 v_lighting;uniform lowp float u_opacity;\n#pragma mapbox: define lowp float base\n#pragma mapbox: define lowp float height\n#pragma mapbox: define lowp vec4 pattern\n#pragma mapbox: define lowp float pixel_ratio\nvoid main() {\n#pragma mapbox: initialize lowp float base\n#pragma mapbox: initialize lowp float height\n#pragma mapbox: initialize mediump vec4 pattern\n#pragma mapbox: initialize lowp float pixel_ratio\nvec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;vec2 imagecoord=mod(v_pos,1.0);vec2 pos=mix(pattern_tl/u_texsize,pattern_br/u_texsize,imagecoord);vec4 out_color=texture2D(u_image,pos);\n#ifdef LIGHTING_3D_MODE\nout_color=apply_lighting(out_color,v_NdotL)*u_opacity;\n#else\nout_color=out_color*v_lighting;\n#endif\n#ifdef FAUX_AO\nfloat intensity=u_ao[0];float h=max(0.0,v_ao.z);float h_floors=h/u_ao[1];float y_shade=1.0-0.9*intensity*min(v_ao.y,1.0);float shade=(1.0-0.08*intensity)*(y_shade+(1.0-y_shade)*(1.0-pow(1.0-min(h_floors/16.0,1.0),16.0)))+0.08*intensity*min(h_floors/160.0,1.0);float concave=v_ao.x*v_ao.x;float x_shade=mix(1.0,mix(0.6,0.75,min(h_floors/30.0,1.0)),intensity)+0.1*intensity*min(h,1.0);shade*=mix(1.0,x_shade*x_shade*x_shade,concave);out_color.rgb=out_color.rgb*shade;\n#endif\n#ifdef FOG\nout_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));\n#endif\ngl_FragColor=out_color;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform float u_tile_units_to_pixels;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;attribute vec4 a_pos_normal_ed;attribute vec2 a_centroid_pos;\n#ifdef PROJECTION_GLOBE_VIEW\nattribute vec3 a_pos_3;attribute vec3 a_pos_normal_3;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_tile_id;uniform float u_zoom_transition;uniform vec3 u_up_dir;uniform float u_height_lift;\n#endif\nvarying vec2 v_pos;varying vec4 v_lighting;\n#ifdef FAUX_AO\nuniform lowp vec2 u_ao;varying vec3 v_ao;\n#endif\n#ifdef LIGHTING_3D_MODE\nvarying float v_NdotL;\n#endif\n#pragma mapbox: define lowp float base\n#pragma mapbox: define lowp float height\n#pragma mapbox: define lowp vec4 pattern\n#pragma mapbox: define lowp float pixel_ratio\nvoid main() {\n#pragma mapbox: initialize lowp float base\n#pragma mapbox: initialize lowp float height\n#pragma mapbox: initialize mediump vec4 pattern\n#pragma mapbox: initialize lowp float pixel_ratio\nvec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;vec4 pos_nx=floor(a_pos_normal_ed*0.5);mediump vec4 top_up_ny_start=a_pos_normal_ed-2.0*pos_nx;mediump vec3 top_up_ny=top_up_ny_start.xyz;float x_normal=pos_nx.z/8192.0;vec3 normal=top_up_ny.y==1.0 ? vec3(0.0,0.0,1.0) : normalize(vec3(x_normal,(2.0*top_up_ny.z-1.0)*(1.0-abs(x_normal)),0.0));float edgedistance=a_pos_normal_ed.w;vec2 display_size=(pattern_br-pattern_tl)/pixel_ratio;base=max(0.0,base);height=max(0.0,height);float t=top_up_ny.x;float z=t > 0.0 ? height : base;vec2 centroid_pos=vec2(0.0);\n#if defined(HAS_CENTROID) || defined(TERRAIN)\ncentroid_pos=a_centroid_pos;\n#endif\nfloat ele=0.0;float h=z;vec3 p;float c_ele;\n#ifdef TERRAIN\nbool flat_roof=centroid_pos.x !=0.0 && t > 0.0;ele=elevation(pos_nx.xy);c_ele=flat_roof ? centroid_pos.y==0.0 ? elevationFromUint16(centroid_pos.x) : flatElevation(centroid_pos) : ele;h=flat_roof ? max(c_ele+height,ele+base+2.0) : ele+(t > 0.0 ? height : base==0.0 ?-5.0 : base);p=vec3(pos_nx.xy,h);\n#else\np=vec3(pos_nx.xy,z);\n#endif\n#ifdef PROJECTION_GLOBE_VIEW\nfloat lift=float((t+base) > 0.0)*u_height_lift;h+=lift;vec3 globe_normal=normalize(mix(a_pos_normal_3/16384.0,u_up_dir,u_zoom_transition));vec3 globe_pos=a_pos_3+globe_normal*(u_tile_up_scale*(p.z+lift));vec3 merc_pos=mercator_tile_position(u_inv_rot_matrix,p.xy,u_tile_id,u_merc_center)+u_up_dir*u_tile_up_scale*p.z;p=mix_globe_mercator(globe_pos,merc_pos,u_zoom_transition);\n#endif\nfloat hidden=float(centroid_pos.x==0.0 && centroid_pos.y==1.0);gl_Position=mix(u_matrix*vec4(p,1),AWAY,hidden);vec2 pos=normal.z==1.0\n? pos_nx.xy\n: vec2(edgedistance,z*u_height_factor);v_pos=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,display_size,u_tile_units_to_pixels,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float NdotL=0.0;\n#ifdef LIGHTING_3D_MODE\nNdotL=calculate_NdotL(normal);\n#else\nNdotL=clamp(dot(normal,u_lightpos),0.0,1.0);NdotL=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),NdotL);\n#endif\nif (normal.y !=0.0) {float r=0.84;\n#ifndef LIGHTING_3D_MODE\nr=mix(0.7,0.98,1.0-u_lightintensity);\n#endif\nNdotL*=(\n(1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),r,1.0)));}\n#ifdef FAUX_AO\nfloat concave=pos_nx.w-floor(pos_nx.w*0.5)*2.0;float start=top_up_ny_start.w;float y_ground=1.0-clamp(t+base,0.0,1.0);float top_height=height;\n#ifdef TERRAIN\ntop_height=mix(max(c_ele+height,ele+base+2.0),ele+height,float(centroid_pos.x==0.0))-ele;y_ground+=y_ground*5.0/max(3.0,top_height);\n#endif\nv_ao=vec3(mix(concave,-concave,start),y_ground,h-ele);NdotL*=(1.0+0.05*(1.0-top_up_ny.y)*u_ao[0]);\n#ifdef PROJECTION_GLOBE_VIEW\ntop_height+=u_height_lift;\n#endif\ngl_Position.z-=(0.0000006*(min(top_height,500.)+2.0*min(base,500.0)+60.0*concave+3.0*start))*gl_Position.w;\n#endif\n#ifdef LIGHTING_3D_MODE\nv_NdotL=NdotL;\n#else\nv_lighting.rgb+=clamp(NdotL*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;\n#endif \n#ifdef FOG\nv_fog_pos=fog_position(p);\n#endif\n}"),hillshadePrepare:dn("#ifdef GL_ES\nprecision highp float;\n#endif\nuniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform vec4 u_unpack;float getElevation(vec2 coord) {\n#ifdef TERRAIN_DEM_FLOAT_FORMAT\nreturn texture2D(u_image,coord).a/4.0;\n#else\nvec4 data=texture2D(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack)/4.0;\n#endif\n}void main() {vec2 epsilon=1.0/u_dimension;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y));float b=getElevation(v_pos+vec2(0,-epsilon.y));float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y));float d=getElevation(v_pos+vec2(-epsilon.x,0));float e=getElevation(v_pos+vec2(epsilon.x,0));float f=getElevation(v_pos+vec2(-epsilon.x,epsilon.y));float g=getElevation(v_pos+vec2(0,epsilon.y));float h=getElevation(v_pos+vec2(epsilon.x,epsilon.y));float exaggerationFactor=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;float exaggeration=u_zoom < 15.0 ? (u_zoom-15.0)*exaggerationFactor : 0.0;vec2 deriv=vec2(\n(c+e+e+h)-(a+d+d+f),(f+g+g+h)-(a+b+b+c)\n)/pow(2.0,exaggeration+(19.2562-u_zoom));gl_FragColor=clamp(vec4(\nderiv.x/2.0+0.5,deriv.y/2.0+0.5,1.0,1.0),0.0,1.0);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_dimension;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"),hillshade:dn("uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_latrange;uniform vec2 u_light;uniform vec4 u_shadow;uniform vec4 u_highlight;uniform vec4 u_accent;void main() {vec4 pixel=texture2D(u_image,v_pos);vec2 deriv=((pixel.rg*2.0)-1.0);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));float slope=atan(1.25*length(deriv)/scaleFactor);float aspect=deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);float intensity=u_light.x;float azimuth=u_light.y+PI;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadow,u_highlight,shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);gl_FragColor=accent_color*(1.0-shade_color.a)+shade_color;\n#ifdef LIGHTING_3D_MODE\ngl_FragColor=apply_lighting(gl_FragColor);\n#endif\n#ifdef FOG\ngl_FragColor=fog_dither(fog_apply_premultiplied(gl_FragColor,v_fog_pos));\n#endif\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=a_texture_pos/8192.0;\n#ifdef FOG\nv_fog_pos=fog_position(a_pos);\n#endif\n}"),line:dn("uniform lowp float u_device_pixel_ratio;uniform float u_alpha_discard_threshold;uniform highp vec2 u_trim_offset;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;varying highp vec4 v_uv;\n#ifdef RENDER_LINE_DASH\nuniform sampler2D u_dash_image;varying vec2 v_tex;\n#endif\n#ifdef RENDER_LINE_GRADIENT\nuniform sampler2D u_gradient_image;\n#endif\nuniform float u_border_width;uniform vec4 u_border_color;float luminance(vec3 c) {return (c.r+c.r+c.b+c.g+c.g+c.g)*0.1667;}\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float floorwidth\n#pragma mapbox: define lowp vec4 dash\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\nfloat linearstep(float edge0,float edge1,float x) {return  clamp((x-edge0)/(edge1-edge0),0.0,1.0);}void main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float floorwidth\n#pragma mapbox: initialize lowp vec4 dash\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\nfloat dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);\n#ifdef RENDER_LINE_DASH\nfloat sdfdist=texture2D(u_dash_image,v_tex).a;float sdfgamma=1.0/(2.0*u_device_pixel_ratio)/dash.z;alpha*=linearstep(0.5-sdfgamma/floorwidth,0.5+sdfgamma/floorwidth,sdfdist);\n#endif\nhighp vec4 out_color;\n#ifdef RENDER_LINE_GRADIENT\nout_color=texture2D(u_gradient_image,v_uv.xy);\n#else\nout_color=color;\n#endif\nfloat trimmed=1.0;\n#ifdef RENDER_LINE_TRIM_OFFSET\nhighp float start=v_uv[2];highp float end=v_uv[3];highp float trim_start=u_trim_offset[0];highp float trim_end=u_trim_offset[1];highp float line_progress=(start+(v_uv.x)*(end-start));if (trim_end > trim_start) {if (line_progress <=trim_end && line_progress >=trim_start) {out_color=vec4(0,0,0,0);trimmed=0.0;}}\n#endif\n#ifdef LIGHTING_3D_MODE\nout_color=apply_lighting(out_color);\n#endif\n#ifdef FOG\nout_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));\n#endif\n#ifdef RENDER_LINE_ALPHA_DISCARD\nif (alpha < u_alpha_discard_threshold) {discard;}\n#endif\n#ifdef RENDER_LINE_BORDER\nfloat edgeBlur=(u_border_width+1.0/u_device_pixel_ratio);float alpha2=clamp(min(dist-(v_width2.t-edgeBlur),v_width2.s-dist)/edgeBlur,0.0,1.0);if (alpha2 < 1.) {float smoothAlpha=smoothstep(0.6,1.0,alpha2);\n#ifdef RENDER_LINE_BORDER_AUTO\nfloat Y=(out_color.a > 0.01) ? luminance(out_color.rgb/out_color.a) : 1.;float adjustment=(Y > 0.) ? 0.5/Y : 0.45;if (out_color.a > 0.25 && Y < 0.25) {vec3 borderColor=(Y > 0.) ? out_color.rgb : vec3(1,1,1)*out_color.a;out_color.rgb=out_color.rgb+borderColor*(adjustment*(1.0-smoothAlpha));} else {out_color.rgb*=(0.6 +0.4*smoothAlpha);}\n#else\nout_color.rgb=mix(u_border_color.rgb*u_border_color.a*trimmed,out_color.rgb,smoothAlpha);\n#endif\n}\n#endif\ngl_FragColor=out_color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","\n#define EXTRUDE_SCALE 0.015873016\nattribute vec2 a_pos_normal;attribute vec4 a_data;\n#if defined(RENDER_LINE_GRADIENT) || defined(RENDER_LINE_TRIM_OFFSET)\nattribute highp vec4 a_packed;\n#endif\n#ifdef RENDER_LINE_DASH\nattribute float a_linesofar;\n#endif\nuniform mat4 u_matrix;uniform mat2 u_pixels_to_tile_units;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp vec4 v_uv;\n#ifdef RENDER_LINE_DASH\nuniform vec2 u_texsize;uniform float u_tile_units_to_pixels;varying vec2 v_tex;\n#endif\n#ifdef RENDER_LINE_GRADIENT\nuniform float u_image_height;\n#endif\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float floorwidth\n#pragma mapbox: define lowp vec4 dash\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float width\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float floorwidth\n#pragma mapbox: initialize lowp vec4 dash\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float width\nfloat ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*EXTRUDE_SCALE;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*EXTRUDE_SCALE*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist*u_pixels_to_tile_units,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2*u_pixels_to_tile_units,0.0,1.0)+projected_extrude;\n#ifndef RENDER_TO_TEXTURE\nfloat extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;\n#else\nv_gamma_scale=1.0;\n#endif\n#if defined(RENDER_LINE_GRADIENT) || defined(RENDER_LINE_TRIM_OFFSET)\nfloat a_uv_x=a_packed[0];float a_split_index=a_packed[1];highp float a_clip_start=a_packed[2];highp float a_clip_end=a_packed[3];\n#ifdef RENDER_LINE_GRADIENT\nhighp float texel_height=1.0/u_image_height;highp float half_texel_height=0.5*texel_height;v_uv=vec4(a_uv_x,a_split_index*texel_height-half_texel_height,a_clip_start,a_clip_end);\n#else\nv_uv=vec4(a_uv_x,0.0,a_clip_start,a_clip_end);\n#endif\n#endif\n#ifdef RENDER_LINE_DASH\nfloat scale=dash.z==0.0 ? 0.0 : u_tile_units_to_pixels/dash.z;float height=dash.y;v_tex=vec2(a_linesofar*scale/floorwidth,(-normal.y*height+dash.x+0.5)/u_texsize.y);\n#endif\nv_width2=vec2(outset,inset);\n#ifdef FOG\nv_fog_pos=fog_position(pos);\n#endif\n}"),linePattern:dn("uniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_tile_units_to_pixels;uniform sampler2D u_image;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;\n#pragma mapbox: define lowp vec4 pattern\n#pragma mapbox: define lowp float pixel_ratio\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize mediump vec4 pattern\n#pragma mapbox: initialize lowp float pixel_ratio\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\nvec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;vec2 display_size=(pattern_br-pattern_tl)/pixel_ratio;vec2 pattern_size=vec2(display_size.x/u_tile_units_to_pixels,display_size.y);float aspect=display_size.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x=mod(v_linesofar/pattern_size.x*aspect,1.0);float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;vec2 pos=mix(pattern_tl*texel_size-texel_size,pattern_br*texel_size+texel_size,vec2(x,y));vec4 color=texture2D(u_image,pos);\n#ifdef LIGHTING_3D_MODE\ncolor=apply_lighting(color);\n#endif\n#ifdef FOG\ncolor=fog_dither(fog_apply_premultiplied(color,v_fog_pos));\n#endif\ngl_FragColor=color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","\n#define scale 0.015873016\nattribute vec2 a_pos_normal;attribute vec4 a_data;attribute float a_linesofar;uniform mat4 u_matrix;uniform vec2 u_units_to_pixels;uniform mat2 u_pixels_to_tile_units;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define mediump float width\n#pragma mapbox: define lowp float floorwidth\n#pragma mapbox: define lowp vec4 pattern\n#pragma mapbox: define lowp float pixel_ratio\nvoid main() {\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize mediump float width\n#pragma mapbox: initialize lowp float floorwidth\n#pragma mapbox: initialize mediump vec4 pattern\n#pragma mapbox: initialize lowp float pixel_ratio\nfloat ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist*u_pixels_to_tile_units,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2*u_pixels_to_tile_units,0.0,1.0)+projected_extrude;\n#ifndef RENDER_TO_TEXTURE\nfloat extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;\n#else\nv_gamma_scale=1.0;\n#endif\nv_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=floorwidth;\n#ifdef FOG\nv_fog_pos=fog_position(pos);\n#endif\n}"),raster:dn("uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;varying vec2 v_pos0;varying vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0=texture2D(u_image0,v_pos0);vec4 color1=texture2D(u_image1,v_pos1);if (color0.a > 0.0) {color0.rgb=color0.rgb/color0.a;}if (color1.a > 0.0) {color1.rgb=color1.rgb/color1.a;}vec4 color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(\ndot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);vec3 out_color=mix(u_high_vec,u_low_vec,rgb);\n#ifdef LIGHTING_3D_MODE\nout_color=apply_lighting(out_color);\n#endif\n#ifdef FOG\nout_color=fog_dither(fog_apply(out_color,v_fog_pos));\n#endif\ngl_FragColor=vec4(out_color*color.a,color.a);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform vec2 u_perspective_transform;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos0;varying vec2 v_pos1;void main() {float w=1.0+dot(a_texture_pos,u_perspective_transform);gl_Position=u_matrix*vec4(a_pos*w,0,w);v_pos0=a_texture_pos/8192.0;v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;\n#ifdef FOG\nv_fog_pos=fog_position(a_pos);\n#endif\n}"),symbolIcon:dn("uniform sampler2D u_texture;varying vec2 v_tex;varying float v_fade_opacity;\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\nlowp float alpha=opacity*v_fade_opacity;gl_FragColor=texture2D(u_texture,v_tex)*alpha;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec4 a_pos_offset;attribute vec4 a_tex_size;attribute vec4 a_pixeloffset;attribute vec4 a_projected_pos;attribute float a_fade_opacity;\n#ifdef PROJECTION_GLOBE_VIEW\nattribute vec3 a_globe_anchor;attribute vec3 a_globe_normal;\n#endif\nuniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;uniform vec3 u_up_vector;\n#ifdef PROJECTION_GLOBE_VIEW\nuniform vec3 u_tile_id;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_camera_forward;uniform float u_zoom_transition;uniform vec3 u_ecef_origin;uniform mat4 u_tile_matrix;\n#endif\nvarying vec2 v_tex;varying float v_fade_opacity;\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\nvec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_tex_size.xy;vec2 a_size=a_tex_size.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_min_font_scale=a_pixeloffset.zw/256.0;highp float segment_angle=-a_projected_pos[3];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 tile_anchor=a_pos;vec3 h=elevationVector(tile_anchor)*elevation(tile_anchor);float globe_occlusion_fade;vec3 world_pos;vec3 mercator_pos;\n#ifdef PROJECTION_GLOBE_VIEW\nmercator_pos=mercator_tile_position(u_inv_rot_matrix,tile_anchor,u_tile_id,u_merc_center);world_pos=mix_globe_mercator(a_globe_anchor+h,mercator_pos,u_zoom_transition);vec4 ecef_point=u_tile_matrix*vec4(world_pos,1.0);vec3 origin_to_point=ecef_point.xyz-u_ecef_origin;globe_occlusion_fade=dot(origin_to_point,u_camera_forward) >=0.0 ? 0.0 : 1.0;\n#else\nworld_pos=vec3(tile_anchor,0)+h;globe_occlusion_fade=1.0;\n#endif\nvec4 projected_point=u_matrix*vec4(world_pos,1);highp float camera_to_anchor_distance=projected_point.w;highp float distance_ratio=u_pitch_with_map ?\ncamera_to_anchor_distance/u_camera_to_center_distance :\nu_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(\n0.5+0.5*distance_ratio,0.0,1.5);size*=perspective_ratio;float font_scale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjected_point;\n#ifdef PROJECTION_GLOBE_VIEW\nvec3 displacement=vec3(a_globe_normal.z,0,-a_globe_normal.x);offsetProjected_point=u_matrix*vec4(a_globe_anchor+displacement,1);\n#else\noffsetProjected_point=u_matrix*vec4(tile_anchor+vec2(1,0),0,1);\n#endif\nvec2 a=projected_point.xy/projected_point.w;vec2 b=offsetProjected_point.xy/offsetProjected_point.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}vec4 projected_pos;\n#ifdef PROJECTION_GLOBE_VIEW\nvec3 proj_pos=mix_globe_mercator(a_projected_pos.xyz+h,mercator_pos,u_zoom_transition);projected_pos=u_label_plane_matrix*vec4(proj_pos,1.0);\n#else\nprojected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,h.z,1.0);\n#endif\nhighp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);float z=0.0;vec2 offset=rotation_matrix*(a_offset/32.0*max(a_min_font_scale,font_scale)+a_pxoffset/16.0);\n#ifdef TERRAIN\n#ifdef PITCH_WITH_MAP_TERRAIN\nvec4 tile_pos=u_label_plane_matrix_inv*vec4(a_projected_pos.xy+offset,0.0,1.0);z=elevation(tile_pos.xy);\n#endif\n#endif\nfloat occlusion_fade=occlusionFade(projected_point)*globe_occlusion_fade;\n#ifdef PROJECTION_GLOBE_VIEW\nvec3 xAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,u_up_vector)) : vec3(1,0,0);vec3 yAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,xAxis)) : vec3(0,1,0);gl_Position=mix(u_coord_matrix*vec4(projected_pos.xyz/projected_pos.w+xAxis*offset.x+yAxis*offset.y,1.0),AWAY,float(projected_point.w <=0.0 || occlusion_fade==0.0));\n#else\ngl_Position=mix(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+offset,z,1.0),AWAY,float(projected_point.w <=0.0 || occlusion_fade==0.0));\n#endif\nfloat projection_transition_fade=1.0;\n#if defined(PROJECTED_POS_ON_VIEWPORT) && defined(PROJECTION_GLOBE_VIEW)\nprojection_transition_fade=1.0-step(EPSILON,u_zoom_transition);\n#endif\nv_tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;v_fade_opacity=max(0.0,min(occlusion_fade,fade_opacity[0]+fade_change))*projection_transition_fade;}"),symbolSDF:dn("#define SDF_PX 8.0\nuniform bool u_is_halo;uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;varying vec2 v_data0;varying vec3 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nfloat EDGE_GAMMA=0.105/u_device_pixel_ratio;vec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec4 a_pos_offset;attribute vec4 a_tex_size;attribute vec4 a_pixeloffset;attribute vec4 a_projected_pos;attribute float a_fade_opacity;\n#ifdef PROJECTION_GLOBE_VIEW\nattribute vec3 a_globe_anchor;attribute vec3 a_globe_normal;\n#endif\nuniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec3 u_up_vector;\n#ifdef PROJECTION_GLOBE_VIEW\nuniform vec3 u_tile_id;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_camera_forward;uniform float u_zoom_transition;uniform vec3 u_ecef_origin;uniform mat4 u_tile_matrix;\n#endif\nvarying vec2 v_data0;varying vec3 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nvec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_tex_size.xy;vec2 a_size=a_tex_size.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;highp float segment_angle=-a_projected_pos[3];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 tile_anchor=a_pos;vec3 h=elevationVector(tile_anchor)*elevation(tile_anchor);float globe_occlusion_fade;vec3 world_pos;vec3 mercator_pos;\n#ifdef PROJECTION_GLOBE_VIEW\nmercator_pos=mercator_tile_position(u_inv_rot_matrix,tile_anchor,u_tile_id,u_merc_center);world_pos=mix_globe_mercator(a_globe_anchor+h,mercator_pos,u_zoom_transition);vec4 ecef_point=u_tile_matrix*vec4(world_pos,1.0);vec3 origin_to_point=ecef_point.xyz-u_ecef_origin;globe_occlusion_fade=dot(origin_to_point,u_camera_forward) >=0.0 ? 0.0 : 1.0;\n#else\nworld_pos=vec3(tile_anchor,0)+h;globe_occlusion_fade=1.0;\n#endif\nvec4 projected_point=u_matrix*vec4(world_pos,1);highp float camera_to_anchor_distance=projected_point.w;highp float distance_ratio=u_pitch_with_map ?\ncamera_to_anchor_distance/u_camera_to_center_distance :\nu_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(\n0.5+0.5*distance_ratio,0.0,1.5);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetprojected_point;\n#ifdef PROJECTION_GLOBE_VIEW\nvec3 displacement=vec3(a_globe_normal.z,0,-a_globe_normal.x);offsetprojected_point=u_matrix*vec4(a_globe_anchor+displacement,1);\n#else\noffsetprojected_point=u_matrix*vec4(tile_anchor+vec2(1,0),0,1);\n#endif\nvec2 a=projected_point.xy/projected_point.w;vec2 b=offsetprojected_point.xy/offsetprojected_point.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}vec4 projected_pos;\n#ifdef PROJECTION_GLOBE_VIEW\nvec3 proj_pos=mix_globe_mercator(a_projected_pos.xyz+h,mercator_pos,u_zoom_transition);projected_pos=u_label_plane_matrix*vec4(proj_pos,1.0);\n#else\nprojected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,h.z,1.0);\n#endif\nhighp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);float z=0.0;vec2 offset=rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset);\n#ifdef TERRAIN\n#ifdef PITCH_WITH_MAP_TERRAIN\nvec4 tile_pos=u_label_plane_matrix_inv*vec4(a_projected_pos.xy+offset,0.0,1.0);z=elevation(tile_pos.xy);\n#endif\n#endif\nfloat occlusion_fade=occlusionFade(projected_point)*globe_occlusion_fade;\n#ifdef PROJECTION_GLOBE_VIEW\nvec3 xAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,u_up_vector)) : vec3(1,0,0);vec3 yAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,xAxis)) : vec3(0,1,0);gl_Position=mix(u_coord_matrix*vec4(projected_pos.xyz/projected_pos.w+xAxis*offset.x+yAxis*offset.y,1.0),AWAY,float(projected_point.w <=0.0 || occlusion_fade==0.0));\n#else\ngl_Position=mix(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+offset,z,1.0),AWAY,float(projected_point.w <=0.0 || occlusion_fade==0.0));\n#endif\nfloat gamma_scale=gl_Position.w;float projection_transition_fade=1.0;\n#if defined(PROJECTED_POS_ON_VIEWPORT) && defined(PROJECTION_GLOBE_VIEW)\nprojection_transition_fade=1.0-step(EPSILON,u_zoom_transition);\n#endif\nvec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(occlusion_fade,fade_opacity[0]+fade_change));v_data0=a_tex/u_texsize;v_data1=vec3(gamma_scale,size,interpolated_fade_opacity*projection_transition_fade);}"),symbolTextAndIcon:dn("#define SDF_PX 8.0\n#define SDF 1.0\n#define ICON 0.0\nuniform bool u_is_halo;uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;varying vec4 v_data0;varying vec4 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nfloat fade_opacity=v_data1[2];if (v_data1.w==ICON) {vec2 tex_icon=v_data0.zw;lowp float alpha=opacity*fade_opacity;gl_FragColor=texture2D(u_texture_icon,tex_icon)*alpha;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\nreturn;}vec2 tex=v_data0.xy;float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_data1.x;float size=v_data1.y;float fontScale=size/24.0;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec4 a_pos_offset;attribute vec4 a_tex_size;attribute vec4 a_projected_pos;attribute float a_fade_opacity;\n#ifdef PROJECTION_GLOBE_VIEW\nattribute vec3 a_globe_anchor;attribute vec3 a_globe_normal;\n#endif\nuniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec3 u_up_vector;uniform vec2 u_texsize_icon;\n#ifdef PROJECTION_GLOBE_VIEW\nuniform vec3 u_tile_id;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_camera_forward;uniform float u_zoom_transition;uniform vec3 u_ecef_origin;uniform mat4 u_tile_matrix;\n#endif\nvarying vec4 v_data0;varying vec4 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nvec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_tex_size.xy;vec2 a_size=a_tex_size.zw;float a_size_min=floor(a_size[0]*0.5);float is_sdf=a_size[0]-2.0*a_size_min;highp float segment_angle=-a_projected_pos[3];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 tile_anchor=a_pos;vec3 h=elevationVector(tile_anchor)*elevation(tile_anchor);float globe_occlusion_fade;vec3 world_pos;vec3 mercator_pos;\n#ifdef PROJECTION_GLOBE_VIEW\nmercator_pos=mercator_tile_position(u_inv_rot_matrix,tile_anchor,u_tile_id,u_merc_center);world_pos=mix_globe_mercator(a_globe_anchor+h,mercator_pos,u_zoom_transition);vec4 ecef_point=u_tile_matrix*vec4(world_pos,1.0);vec3 origin_to_point=ecef_point.xyz-u_ecef_origin;globe_occlusion_fade=dot(origin_to_point,u_camera_forward) >=0.0 ? 0.0 : 1.0;\n#else\nworld_pos=vec3(tile_anchor,0)+h;globe_occlusion_fade=1.0;\n#endif\nvec4 projected_point=u_matrix*vec4(world_pos,1);highp float camera_to_anchor_distance=projected_point.w;highp float distance_ratio=u_pitch_with_map ?\ncamera_to_anchor_distance/u_camera_to_center_distance :\nu_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(\n0.5+0.5*distance_ratio,0.0,1.5);size*=perspective_ratio;float font_scale=size/24.0;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offset_projected_point=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projected_point.xy/projected_point.w;vec2 b=offset_projected_point.xy/offset_projected_point.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}vec4 projected_pos;\n#ifdef PROJECTION_GLOBE_VIEW\nvec3 proj_pos=mix_globe_mercator(a_projected_pos.xyz+h,mercator_pos,u_zoom_transition);projected_pos=u_label_plane_matrix*vec4(proj_pos,1.0);\n#else\nprojected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,h.z,1.0);\n#endif\nhighp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);float z=0.0;vec2 offset=rotation_matrix*(a_offset/32.0*font_scale);\n#ifdef TERRAIN\n#ifdef PITCH_WITH_MAP_TERRAIN\nvec4 tile_pos=u_label_plane_matrix_inv*vec4(a_projected_pos.xy+offset,0.0,1.0);z=elevation(tile_pos.xy);\n#endif\n#endif\nfloat occlusion_fade=occlusionFade(projected_point)*globe_occlusion_fade;\n#ifdef PROJECTION_GLOBE_VIEW\nvec3 xAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,u_up_vector)) : vec3(1,0,0);vec3 yAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,xAxis)) : vec3(0,1,0);gl_Position=mix(u_coord_matrix*vec4(projected_pos.xyz/projected_pos.w+xAxis*offset.x+yAxis*offset.y,1.0),AWAY,float(projected_point.w <=0.0 || occlusion_fade==0.0));\n#else\ngl_Position=mix(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+offset,z,1.0),AWAY,float(projected_point.w <=0.0 || occlusion_fade==0.0));\n#endif\nfloat gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(occlusion_fade,fade_opacity[0]+fade_change));float projection_transition_fade=1.0;\n#if defined(PROJECTED_POS_ON_VIEWPORT) && defined(PROJECTION_GLOBE_VIEW)\nprojection_transition_fade=1.0-step(EPSILON,u_zoom_transition);\n#endif\nv_data0.xy=a_tex/u_texsize;v_data0.zw=a_tex/u_texsize_icon;v_data1=vec4(gamma_scale,size,interpolated_fade_opacity*projection_transition_fade,is_sdf);}"),terrainRaster:dn("uniform sampler2D u_image0;varying vec2 v_pos0;\n#ifdef FOG\nvarying float v_fog_opacity;\n#endif\n#ifdef RENDER_SHADOWS\nvarying vec4 v_pos_light_view_0;varying vec4 v_pos_light_view_1;varying float v_depth;\n#endif\nvoid main() {vec4 color=texture2D(u_image0,v_pos0);\n#ifdef RENDER_SHADOWS\ncolor.xyz=shadowed_color(color.xyz,v_pos_light_view_0,v_pos_light_view_1,v_depth);\n#endif\n#ifdef FOG\n#ifdef ZERO_EXAGGERATION\ncolor=fog_dither(fog_apply_premultiplied(color,v_fog_pos));\n#else\ncolor=fog_dither(fog_apply_from_vert(color,v_fog_opacity));\n#endif\n#endif\ngl_FragColor=color;\n#ifdef TERRAIN_WIREFRAME\ngl_FragColor=vec4(1.0,0.0,0.0,0.8);\n#endif\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform float u_skirt_height;attribute vec2 a_pos;varying vec2 v_pos0;\n#ifdef FOG\nvarying float v_fog_opacity;\n#endif\n#ifdef RENDER_SHADOWS\nuniform mat4 u_light_matrix_0;uniform mat4 u_light_matrix_1;varying vec4 v_pos_light_view_0;varying vec4 v_pos_light_view_1;varying float v_depth;\n#endif\nconst float wireframeOffset=0.00015;void main() {vec3 decomposedPosAndSkirt=decomposeToPosAndSkirt(a_pos);float skirt=decomposedPosAndSkirt.z;vec2 decodedPos=decomposedPosAndSkirt.xy;float elevation=elevation(decodedPos)-skirt*u_skirt_height;\n#ifdef TERRAIN_WIREFRAME\nelevation+=wireframeOffset;\n#endif\nv_pos0=decodedPos/8192.0;gl_Position=u_matrix*vec4(decodedPos,elevation,1.0);\n#ifdef FOG\n#ifdef ZERO_EXAGGERATION\nv_fog_pos=fog_position(decodedPos);\n#else\nv_fog_opacity=fog(fog_position(vec3(decodedPos,elevation)));\n#endif\n#endif\n#ifdef RENDER_SHADOWS\nvec3 pos=vec3(decodedPos,elevation);v_pos_light_view_0=u_light_matrix_0*vec4(pos,1.);v_pos_light_view_1=u_light_matrix_1*vec4(pos,1.);v_depth=gl_Position.w;\n#endif\n}"),terrainDepth:dn("#ifdef GL_ES\nprecision highp float;\n#endif\nvarying float v_depth;void main() {gl_FragColor=pack_depth(v_depth);}","uniform mat4 u_matrix;attribute vec2 a_pos;varying float v_depth;void main() {float elevation=elevation(a_pos);gl_Position=u_matrix*vec4(a_pos,elevation,1.0);v_depth=gl_Position.z/gl_Position.w;}"),skybox:dn("\nvarying lowp vec3 v_uv;uniform lowp samplerCube u_cubemap;uniform lowp float u_opacity;uniform highp float u_temporal_offset;uniform highp vec3 u_sun_direction;float sun_disk(highp vec3 ray_direction,highp vec3 sun_direction) {highp float cos_angle=dot(normalize(ray_direction),sun_direction);const highp float cos_sun_angular_diameter=0.99996192306;const highp float smoothstep_delta=1e-5;return smoothstep(\ncos_sun_angular_diameter-smoothstep_delta,cos_sun_angular_diameter+smoothstep_delta,cos_angle);}float map(float value,float start,float end,float new_start,float new_end) {return ((value-start)*(new_end-new_start))/(end-start)+new_start;}void main() {vec3 uv=v_uv;const float y_bias=0.015;uv.y+=y_bias;uv.y=pow(abs(uv.y),1.0/5.0);uv.y=map(uv.y,0.0,1.0,-1.0,1.0);vec3 sky_color=textureCube(u_cubemap,uv).rgb;\n#ifdef FOG\nsky_color=fog_apply_sky_gradient(v_uv.xzy,sky_color);\n#endif\nsky_color.rgb=dither(sky_color.rgb,gl_FragCoord.xy+u_temporal_offset);sky_color+=0.1*sun_disk(v_uv,u_sun_direction);gl_FragColor=vec4(sky_color*u_opacity,u_opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}",Qe),skyboxGradient:dn("varying highp vec3 v_uv;uniform lowp sampler2D u_color_ramp;uniform highp vec3 u_center_direction;uniform lowp float u_radius;uniform lowp float u_opacity;uniform highp float u_temporal_offset;void main() {float progress=acos(dot(normalize(v_uv),u_center_direction))/u_radius;vec4 color=texture2D(u_color_ramp,vec2(progress,0.5));\n#ifdef FOG\ncolor.rgb=fog_apply_sky_gradient(v_uv.xzy,color.rgb/color.a)*color.a;\n#endif\ncolor*=u_opacity;color.rgb=dither(color.rgb,gl_FragCoord.xy+u_temporal_offset);gl_FragColor=color;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}",Qe),skyboxCapture:dn("\nvarying highp vec3 v_position;uniform highp float u_sun_intensity;uniform highp float u_luminance;uniform lowp vec3 u_sun_direction;uniform highp vec4 u_color_tint_r;uniform highp vec4 u_color_tint_m;\n#ifdef GL_ES\nprecision highp float;\n#endif\n#define BETA_R                  vec3(5.5e-6,13.0e-6,22.4e-6)\n#define BETA_M                  vec3(21e-6,21e-6,21e-6)\n#define MIE_G                   0.76\n#define DENSITY_HEIGHT_SCALE_R  8000.0\n#define DENSITY_HEIGHT_SCALE_M  1200.0\n#define PLANET_RADIUS           6360e3\n#define ATMOSPHERE_RADIUS       6420e3\n#define SAMPLE_STEPS            10\n#define DENSITY_STEPS           4\nfloat ray_sphere_exit(vec3 orig,vec3 dir,float radius) {float a=dot(dir,dir);float b=2.0*dot(dir,orig);float c=dot(orig,orig)-radius*radius;float d=sqrt(b*b-4.0*a*c);return (-b+d)/(2.0*a);}vec3 extinction(vec2 density) {return exp(-vec3(BETA_R*u_color_tint_r.a*density.x+BETA_M*u_color_tint_m.a*density.y));}vec2 local_density(vec3 point) {float height=max(length(point)-PLANET_RADIUS,0.0);float exp_r=exp(-height/DENSITY_HEIGHT_SCALE_R);float exp_m=exp(-height/DENSITY_HEIGHT_SCALE_M);return vec2(exp_r,exp_m);}float phase_ray(float cos_angle) {return (3.0/(16.0*PI))*(1.0+cos_angle*cos_angle);}float phase_mie(float cos_angle) {return (3.0/(8.0*PI))*((1.0-MIE_G*MIE_G)*(1.0+cos_angle*cos_angle))/((2.0+MIE_G*MIE_G)*pow(1.0+MIE_G*MIE_G-2.0*MIE_G*cos_angle,1.5));}vec2 density_to_atmosphere(vec3 point,vec3 light_dir) {float ray_len=ray_sphere_exit(point,light_dir,ATMOSPHERE_RADIUS);float step_len=ray_len/float(DENSITY_STEPS);vec2 density_point_to_atmosphere=vec2(0.0);for (int i=0; i < DENSITY_STEPS;++i) {vec3 point_on_ray=point+light_dir*((float(i)+0.5)*step_len);density_point_to_atmosphere+=local_density(point_on_ray)*step_len;;}return density_point_to_atmosphere;}vec3 atmosphere(vec3 ray_dir,vec3 sun_direction,float sun_intensity) {vec2 density_orig_to_point=vec2(0.0);vec3 scatter_r=vec3(0.0);vec3 scatter_m=vec3(0.0);vec3 origin=vec3(0.0,PLANET_RADIUS,0.0);float ray_len=ray_sphere_exit(origin,ray_dir,ATMOSPHERE_RADIUS);float step_len=ray_len/float(SAMPLE_STEPS);for (int i=0; i < SAMPLE_STEPS;++i) {vec3 point_on_ray=origin+ray_dir*((float(i)+0.5)*step_len);vec2 density=local_density(point_on_ray)*step_len;density_orig_to_point+=density;vec2 density_point_to_atmosphere=density_to_atmosphere(point_on_ray,sun_direction);vec2 density_orig_to_atmosphere=density_orig_to_point+density_point_to_atmosphere;vec3 extinction=extinction(density_orig_to_atmosphere);scatter_r+=density.x*extinction;scatter_m+=density.y*extinction;}float cos_angle=dot(ray_dir,sun_direction);float phase_r=phase_ray(cos_angle);float phase_m=phase_mie(cos_angle);vec3 beta_r=BETA_R*u_color_tint_r.rgb*u_color_tint_r.a;vec3 beta_m=BETA_M*u_color_tint_m.rgb*u_color_tint_m.a;return (scatter_r*phase_r*beta_r+scatter_m*phase_m*beta_m)*sun_intensity;}const float A=0.15;const float B=0.50;const float C=0.10;const float D=0.20;const float E=0.02;const float F=0.30;vec3 uncharted2_tonemap(vec3 x) {return ((x*(A*x+C*B)+D*E)/(x*(A*x+B)+D*F))-E/F;}void main() {vec3 ray_direction=v_position;ray_direction.y=pow(ray_direction.y,5.0);const float y_bias=0.015;ray_direction.y+=y_bias;vec3 color=atmosphere(normalize(ray_direction),u_sun_direction,u_sun_intensity);float white_scale=1.0748724675633854;color=uncharted2_tonemap((log2(2.0/pow(u_luminance,4.0)))*color)*white_scale;gl_FragColor=vec4(color,1.0);}","attribute highp vec3 a_pos_3f;uniform mat3 u_matrix_3f;varying highp vec3 v_position;float map(float value,float start,float end,float new_start,float new_end) {return ((value-start)*(new_end-new_start))/(end-start)+new_start;}void main() {vec4 pos=vec4(u_matrix_3f*a_pos_3f,1.0);v_position=pos.xyz;v_position.y*=-1.0;v_position.y=map(v_position.y,-1.0,1.0,0.0,1.0);gl_Position=vec4(a_pos_3f.xy,0.0,1.0);}"),globeRaster:dn("uniform sampler2D u_image0;varying vec2 v_pos0;\n#ifndef FOG\nuniform highp vec3 u_frustum_tl;uniform highp vec3 u_frustum_tr;uniform highp vec3 u_frustum_br;uniform highp vec3 u_frustum_bl;uniform highp vec3 u_globe_pos;uniform highp float u_globe_radius;uniform vec2 u_viewport;\n#endif\nvoid main() {vec4 color;\n#ifdef CUSTOM_ANTIALIASING\nvec2 uv=gl_FragCoord.xy/u_viewport;highp vec3 ray_dir=mix(\nmix(u_frustum_tl,u_frustum_tr,uv.x),mix(u_frustum_bl,u_frustum_br,uv.x),1.0-uv.y);vec3 dir=normalize(ray_dir);vec3 closest_point=dot(u_globe_pos,dir)*dir;float norm_dist_from_center=1.0-length(closest_point-u_globe_pos)/u_globe_radius;const float antialias_pixel=2.0;float antialias_factor=antialias_pixel*fwidth(norm_dist_from_center);float antialias=smoothstep(0.0,antialias_factor,norm_dist_from_center);vec4 raster=texture2D(u_image0,v_pos0);color=vec4(raster.rgb*antialias,raster.a*antialias);\n#else\ncolor=texture2D(u_image0,v_pos0);\n#endif\n#ifdef FOG\ncolor=fog_dither(fog_apply_premultiplied(color,v_fog_pos));\n#endif\ngl_FragColor=color;\n#ifdef TERRAIN_WIREFRAME\ngl_FragColor=vec4(1.0,0.0,0.0,0.8);\n#endif\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_proj_matrix;uniform mat4 u_normalize_matrix;uniform mat4 u_globe_matrix;uniform mat4 u_merc_matrix;uniform float u_zoom_transition;uniform vec2 u_merc_center;uniform mat3 u_grid_matrix;uniform float u_skirt_height;\n#ifdef GLOBE_POLES\nattribute vec3 a_globe_pos;attribute vec2 a_uv;\n#else\nattribute vec2 a_pos;\n#endif\nvarying vec2 v_pos0;const float wireframeOffset=1e3;float mercatorXfromLng(float lng) {return (180.0+lng)/360.0;}float mercatorYfromLat(float lat) {return (180.0-(RAD_TO_DEG*log(tan(QUARTER_PI+lat/2.0*DEG_TO_RAD))))/360.0;}vec3 latLngToECEF(vec2 latLng) {latLng=DEG_TO_RAD*latLng;float cosLat=cos(latLng[0]);float sinLat=sin(latLng[0]);float cosLng=cos(latLng[1]);float sinLng=sin(latLng[1]);float sx=cosLat*sinLng*GLOBE_RADIUS;float sy=-sinLat*GLOBE_RADIUS;float sz=cosLat*cosLng*GLOBE_RADIUS;return vec3(sx,sy,sz);}void main() {\n#ifdef GLOBE_POLES\nvec3 globe_pos=a_globe_pos;vec2 uv=a_uv;\n#else\nfloat tiles=u_grid_matrix[0][2];float idx=u_grid_matrix[1][2];float idy=u_grid_matrix[2][2];vec3 decomposed_pos_and_skirt=decomposeToPosAndSkirt(a_pos);vec3 latLng=u_grid_matrix*vec3(decomposed_pos_and_skirt.xy,1.0);float mercatorY=mercatorYfromLat(latLng[0]);float uvY=mercatorY*tiles-idy;float mercatorX=mercatorXfromLng(latLng[1]);float uvX=mercatorX*tiles-idx;vec3 globe_pos=latLngToECEF(latLng.xy);vec2 merc_pos=vec2(mercatorX,mercatorY);vec2 uv=vec2(uvX,uvY);\n#endif\nv_pos0=uv;vec2 tile_pos=uv*EXTENT;vec3 globe_derived_up_vector=normalize(globe_pos)*u_tile_up_scale;\n#ifdef GLOBE_POLES\nvec3 up_vector=globe_derived_up_vector;\n#else\nvec3 up_vector=elevationVector(tile_pos);\n#endif\nfloat height=elevation(tile_pos);\n#ifdef TERRAIN_WIREFRAME\nheight+=wireframeOffset;\n#endif\nglobe_pos+=up_vector*height;\n#ifndef GLOBE_POLES\nglobe_pos-=globe_derived_up_vector*u_skirt_height*decomposed_pos_and_skirt.z;\n#endif\n#ifdef GLOBE_POLES\nvec4 interpolated_pos=u_globe_matrix*vec4(globe_pos,1.0);\n#else\nvec4 globe_world_pos=u_globe_matrix*vec4(globe_pos,1.0);vec4 merc_world_pos=vec4(0.0);if (u_zoom_transition > 0.0) {merc_world_pos=vec4(merc_pos,height-u_skirt_height*decomposed_pos_and_skirt.z,1.0);merc_world_pos.xy-=u_merc_center;merc_world_pos.x=wrap(merc_world_pos.x,-0.5,0.5);merc_world_pos=u_merc_matrix*merc_world_pos;}vec4 interpolated_pos=vec4(mix(globe_world_pos.xyz,merc_world_pos.xyz,u_zoom_transition),1.0);\n#endif\ngl_Position=u_proj_matrix*interpolated_pos;\n#ifdef FOG\nv_fog_pos=fog_position((u_normalize_matrix*vec4(globe_pos,1.0)).xyz);\n#endif\n}"),globeAtmosphere:dn("uniform float u_transition;uniform highp float u_fadeout_range;uniform highp float u_temporal_offset;uniform vec3 u_start_color;uniform vec4 u_color;uniform vec4 u_space_color;uniform vec4 u_high_color;uniform float u_star_intensity;uniform float u_star_size;uniform float u_star_density;uniform float u_horizon_angle;uniform mat4 u_rotation_matrix;varying highp vec3 v_ray_dir;varying highp vec3 v_horizon_dir;highp float random(highp vec3 p) {p=fract(p*vec3(23.2342,97.1231,91.2342));p+=dot(p.zxy,p.yxz+123.1234);return fract(p.x*p.y);}float stars(vec3 p,float scale,vec2 offset) {vec2 uv_scale=(u_viewport/u_star_size)*scale;vec3 position=vec3(p.xy*uv_scale+offset*u_viewport,p.z);vec3 q=fract(position)-0.5;vec3 id=floor(position);float random_visibility=step(random(id),u_star_density);float circle=smoothstep(0.5+u_star_intensity,0.5,length(q));return circle*random_visibility;}void main() {highp vec3 dir=normalize(v_ray_dir);float globe_pos_dot_dir;\n#ifdef PROJECTION_GLOBE_VIEW\nglobe_pos_dot_dir=dot(u_globe_pos,dir);highp vec3 closest_point_forward=abs(globe_pos_dot_dir)*dir;float norm_dist_from_center=length(closest_point_forward-u_globe_pos)/u_globe_radius;if (norm_dist_from_center < 0.98) {discard;return;}\n#endif\nhighp vec3 horizon_dir=normalize(v_horizon_dir);float horizon_angle_mercator=dir.y < horizon_dir.y ?\n0.0 : max(acos(dot(dir,horizon_dir)),0.0);float horizon_angle;\n#ifdef PROJECTION_GLOBE_VIEW\nhighp vec3 closest_point=globe_pos_dot_dir*dir;float closest_point_to_center=length(closest_point-u_globe_pos);float theta=asin(clamp(closest_point_to_center/length(u_globe_pos),-1.0,1.0));horizon_angle=globe_pos_dot_dir < 0.0 ?\nPI-theta-u_horizon_angle : theta-u_horizon_angle;float angle_t=pow(u_transition,10.0);horizon_angle=mix(horizon_angle,horizon_angle_mercator,angle_t);\n#else\nhorizon_angle=horizon_angle_mercator;\n#endif\nhorizon_angle/=PI;float t=exp(-horizon_angle/u_fadeout_range);float alpha_0=u_color.a;float alpha_1=u_high_color.a;float alpha_2=u_space_color.a;vec3 color_stop_0=u_color.rgb;vec3 color_stop_1=u_high_color.rgb;vec3 color_stop_2=u_space_color.rgb;vec3 c0=mix(color_stop_2,color_stop_1,alpha_1);vec3 c1=mix(c0,color_stop_0,alpha_0);vec3 c2=mix(c0,c1,t);vec3 c =mix(color_stop_2,c2,t);float a0=mix(alpha_2,1.0,alpha_1);float a1=mix(a0,1.0,alpha_0);float a2=mix(a0,a1,t);float a =mix(alpha_2,a2,t);vec2 uv=gl_FragCoord.xy/u_viewport-0.5;float aspect_ratio=u_viewport.x/u_viewport.y;vec4 uv_dir=vec4(normalize(vec3(uv.x*aspect_ratio,uv.y,1.0)),1.0);uv_dir=u_rotation_matrix*uv_dir;vec3 n=abs(uv_dir.xyz);vec2 uv_remap=(n.x > n.y && n.x > n.z) ? uv_dir.yz/uv_dir.x:\n(n.y > n.x && n.y > n.z) ? uv_dir.zx/uv_dir.y:\nuv_dir.xy/uv_dir.z;uv_remap.x/=aspect_ratio;vec3 D=vec3(uv_remap,1.0);highp float star_field=0.0;if (u_star_intensity > 0.0) {star_field+=stars(D,1.2,vec2(0.0,0.0));star_field+=stars(D,1.0,vec2(1.0,0.0));star_field+=stars(D,0.8,vec2(0.0,1.0));star_field+=stars(D,0.6,vec2(1.0,1.0));star_field*=(1.0-pow(t,0.25+(1.0-u_high_color.a)*0.75));c+=star_field*alpha_2;}c=dither(c,gl_FragCoord.xy+u_temporal_offset);gl_FragColor=vec4(c,a);}","attribute vec3 a_pos;attribute vec2 a_uv;uniform vec3 u_frustum_tl;uniform vec3 u_frustum_tr;uniform vec3 u_frustum_br;uniform vec3 u_frustum_bl;uniform float u_horizon;varying highp vec3 v_ray_dir;varying highp vec3 v_horizon_dir;void main() {v_ray_dir=mix(\nmix(u_frustum_tl,u_frustum_tr,a_uv.x),mix(u_frustum_bl,u_frustum_br,a_uv.x),a_uv.y);v_horizon_dir=mix(\nmix(u_frustum_tl,u_frustum_bl,u_horizon),mix(u_frustum_tr,u_frustum_br,u_horizon),a_uv.x);gl_Position=vec4(a_pos,1.0);}")};function hn(t,e){const n=t.replace(/\s*\/\/[^\n]*\n/g,"\n").split("\n");for(let r of n)if(r=r.trim(),"#"===r[0]&&r.includes("if")&&!r.includes("endif")){r=r.replace("#","").replace(/ifdef|ifndef|elif|if/g,"").replace(/!|defined|\(|\)|\|\||&&/g,"").replace(/\s+/g," ").trim();const t=r.split(" ");for(const n of t)e.includes(n)||e.push(n)}}function dn(t,e){const n=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,r=e.match(/attribute (highp |mediump |lowp )?([\w]+) ([\w]+)/g),i={},o=[...an];return hn(t,o),hn(e,o),{fragmentSource:t=t.replace(n,((t,e,n,r,o)=>(i[o]=!0,"define"===e?"\n#ifndef HAS_UNIFORM_u_".concat(o,"\nvarying ").concat(n," ").concat(r," ").concat(o,";\n#else\nuniform ").concat(n," ").concat(r," u_").concat(o,";\n#endif\n"):"\n#ifdef HAS_UNIFORM_u_".concat(o,"\n    ").concat(n," ").concat(r," ").concat(o," = u_").concat(o,";\n#endif\n")))),vertexSource:e=e.replace(n,((t,e,n,r,o)=>{const a="float"===r?"vec2":"vec4",s=o.match(/color/)?"color":a;return i[o]?"define"===e?"\n#ifndef HAS_UNIFORM_u_".concat(o,"\nuniform lowp float u_").concat(o,"_t;\nattribute ").concat(n," ").concat(a," a_").concat(o,";\nvarying ").concat(n," ").concat(r," ").concat(o,";\n#else\nuniform ").concat(n," ").concat(r," u_").concat(o,";\n#endif\n"):"vec4"===s?"\n#ifndef HAS_UNIFORM_u_".concat(o,"\n    ").concat(o," = a_").concat(o,";\n#else\n    ").concat(n," ").concat(r," ").concat(o," = u_").concat(o,";\n#endif\n"):"\n#ifndef HAS_UNIFORM_u_".concat(o,"\n    ").concat(o," = unpack_mix_").concat(s,"(a_").concat(o,", u_").concat(o,"_t);\n#else\n    ").concat(n," ").concat(r," ").concat(o," = u_").concat(o,";\n#endif\n"):"define"===e?"\n#ifndef HAS_UNIFORM_u_".concat(o,"\nuniform lowp float u_").concat(o,"_t;\nattribute ").concat(n," ").concat(a," a_").concat(o,";\n#else\nuniform ").concat(n," ").concat(r," u_").concat(o,";\n#endif\n"):"vec4"===s?"\n#ifndef HAS_UNIFORM_u_".concat(o,"\n    ").concat(n," ").concat(r," ").concat(o," = a_").concat(o,";\n#else\n    ").concat(n," ").concat(r," ").concat(o," = u_").concat(o,";\n#endif\n"):"\n#ifndef HAS_UNIFORM_u_".concat(o,"\n    ").concat(n," ").concat(r," ").concat(o," = unpack_mix_").concat(s,"(a_").concat(o,", u_").concat(o,"_t);\n#else\n    ").concat(n," ").concat(r," ").concat(o," = u_").concat(o,";\n#endif\n")})),staticAttributes:r,usedDefines:o}}class fn{constructor(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffers=[],this.vao=null}bind(t,e,n,r,i,o,a){this.context=t;let s=this.boundPaintVertexBuffers.length!==r.length;for(let c=0;!s&&c<r.length;c++)this.boundPaintVertexBuffers[c]!==r[c]&&(s=!0);let l=this.boundDynamicVertexBuffers.length!==a.length;for(let c=0;!l&&c<a.length;c++)this.boundDynamicVertexBuffers[c]!==a[c]&&(l=!0);if(!t.extVertexArrayObject||!this.vao||this.boundProgram!==e||this.boundLayoutVertexBuffer!==n||s||l||this.boundIndexBuffer!==i||this.boundVertexOffset!==o)this.freshBind(e,n,r,i,o,a);else{t.bindVertexArrayOES.set(this.vao);for(const t of a)t&&t.bind();i&&i.dynamicDraw&&i.bind()}}freshBind(t,e,n,r,i,o){let a;const s=t.numAttributes,l=this.context,c=l.gl;if(l.extVertexArrayObject)this.vao&&this.destroy(),this.vao=l.extVertexArrayObject.createVertexArrayOES(),l.bindVertexArrayOES.set(this.vao),a=0,this.boundProgram=t,this.boundLayoutVertexBuffer=e,this.boundPaintVertexBuffers=n,this.boundIndexBuffer=r,this.boundVertexOffset=i,this.boundDynamicVertexBuffers=o;else{a=l.currentNumAttributes||0;for(let t=s;t<a;t++)c.disableVertexAttribArray(t)}e.enableAttributes(c,t),e.bind(),e.setVertexAttribPointers(c,t,i);for(const u of n)u.enableAttributes(c,t),u.bind(),u.setVertexAttribPointers(c,t,i);for(const u of o)u&&(u.enableAttributes(c,t),u.bind(),u.setVertexAttribPointers(c,t,i));r&&r.bind(),l.currentNumAttributes=s}destroy(){this.vao&&(this.context.extVertexArrayObject.deleteVertexArrayOES(this.vao),this.vao=null)}}function pn(e,n){const r=Math.pow(2,n.canonical.z),i=n.canonical.y;return[new t.MercatorCoordinate(0,i/r).toLngLat().lat,new t.MercatorCoordinate(0,(i+1)/r).toLngLat().lat]}function mn(e,n,r,i,o,a,s){const l=e.context,c=l.gl,u=r.fbo;if(!u)return;e.prepareDrawTile();const h=e.useProgram("hillshade");l.activeTexture.set(c.TEXTURE0),c.bindTexture(c.TEXTURE_2D,u.colorAttachment.get());const d=((t,e,n,r)=>{const i=n.paint.get("hillshade-shadow-color"),o=n.paint.get("hillshade-highlight-color"),a=n.paint.get("hillshade-accent-color");let s=n.paint.get("hillshade-illumination-direction")*(Math.PI/180);"viewport"===n.paint.get("hillshade-illumination-anchor")&&(s-=t.transform.angle);const l=!t.options.moving;return{u_matrix:r||t.transform.calculateProjMatrix(e.tileID.toUnwrapped(),l),u_image:0,u_latrange:pn(0,e.tileID),u_light:[n.paint.get("hillshade-exaggeration"),s],u_shadow:i,u_highlight:o,u_accent:a}})(e,r,i,e.terrain?n.projMatrix:null);e.prepareDrawProgram(l,h,n.toUnwrapped());const{tileBoundsBuffer:f,tileBoundsIndexBuffer:p,tileBoundsSegments:m}=e.getTileBoundsBuffers(r);h.draw(l,c.TRIANGLES,o,a,s,t.CullFaceMode.disabled,d,i.id,f,p,m)}function gn(e,n,r){if(!n.needsDEMTextureUpload)return;const i=e.context,o=i.gl;i.pixelStoreUnpackPremultiplyAlpha.set(!1),n.demTexture=n.demTexture||e.getTileTexture(r.stride);const a=r.getPixels();n.demTexture?n.demTexture.update(a,{premultiply:!1}):n.demTexture=new t.Texture(i,a,o.RGBA,{premultiply:!1}),n.needsDEMTextureUpload=!1}function yn(e,n,r,i,o,a){const s=e.context,l=s.gl;if(!n.dem)return;const c=n.dem;if(s.activeTexture.set(l.TEXTURE1),gn(e,n,c),!n.demTexture)return;n.demTexture.bind(l.NEAREST,l.CLAMP_TO_EDGE);const u=c.dim;s.activeTexture.set(l.TEXTURE0);let h=n.fbo;if(!h){const e=new t.Texture(s,{width:u,height:u,data:null},l.RGBA);e.bind(l.LINEAR,l.CLAMP_TO_EDGE),h=n.fbo=s.createFramebuffer(u,u,!0),h.colorAttachment.set(e.texture)}s.bindFramebuffer.set(h.framebuffer),s.viewport.set([0,0,u,u]);const{tileBoundsBuffer:d,tileBoundsIndexBuffer:f,tileBoundsSegments:p}=e.getMercatorTileBoundsBuffers();e.useProgram("hillshadePrepare").draw(s,l.TRIANGLES,i,o,a,t.CullFaceMode.disabled,((e,n)=>{const r=n.stride,i=t.create();return t.ortho(i,0,t.EXTENT,-t.EXTENT,0,0,1),t.translate(i,i,[0,-t.EXTENT,0]),{u_matrix:i,u_image:1,u_dimension:[r,r],u_zoom:e.overscaledZ,u_unpack:n.unpackVector}})(n.tileID,c),r.id,d,f,p),n.needsHillshadePrepare=!1}const vn=e=>({u_matrix:new t.UniformMatrix4f(e),u_image0:new t.Uniform1i(e),u_skirt_height:new t.Uniform1f(e)}),_n=(t,e)=>({u_matrix:t,u_image0:0,u_skirt_height:e}),bn=(t,e,n,r,i,o,a,s,l,c,u,h,d,f,p)=>({u_proj_matrix:Float32Array.from(t),u_globe_matrix:e,u_normalize_matrix:Float32Array.from(r),u_merc_matrix:n,u_zoom_transition:i,u_merc_center:o,u_image0:0,u_frustum_tl:a,u_frustum_tr:s,u_frustum_br:l,u_frustum_bl:c,u_globe_pos:u,u_globe_radius:h,u_viewport:d,u_grid_matrix:p?Float32Array.from(p):new Float32Array(9),u_skirt_height:f});function xn(t,e){return null!=t&&null!=e&&!(!t.hasData()||!e.hasData())&&null!=t.demTexture&&null!=e.demTexture&&t.tileID.key!==e.tileID.key}const wn=new class{constructor(){this.operations={}}newMorphing(t,e,n,r,i){if(t in this.operations){const e=this.operations[t];e.to.tileID.key!==n.tileID.key&&(e.queued=n)}else this.operations[t]={startTime:r,phase:0,duration:i,from:e,to:n,queued:null}}getMorphValuesForProxy(t){if(!(t in this.operations))return null;const e=this.operations[t];return{from:e.from,to:e.to,phase:e.phase}}update(t){for(const e in this.operations){const n=this.operations[e];for(n.phase=(t-n.startTime)/n.duration;n.phase>=1||!this._validOp(n);)if(!this._nextOp(n,t)){delete this.operations[e];break}}}_nextOp(t,e){return!!t.queued&&(t.from=t.to,t.to=t.queued,t.queued=null,t.phase=0,t.startTime=e,!0)}_validOp(t){return t.from.hasData()&&t.to.hasData()}},Sn={0:null,1:"TERRAIN_VERTEX_MORPHING",2:"TERRAIN_WIREFRAME"};function En(t){return 6*Math.pow(1.5,22-t)}function Tn(t,e){const n=1<<t.z;return!e&&(0===t.x||t.x===n-1)||0===t.y||t.y===n-1}const Mn=t=>({u_matrix:t});function An(e,n,r,i,o){if(o>0){const a=t.exported.now(),s=(a-e.timeAdded)/o,l=n?(a-n.timeAdded)/o:-1,c=r.getSource(),u=i.coveringZoomLevel({tileSize:c.tileSize,roundZoom:c.roundZoom}),h=!n||Math.abs(n.tileID.overscaledZ-u)>Math.abs(e.tileID.overscaledZ-u),d=h&&e.refreshedUponExpiration?1:t.clamp(h?s:1-l,0,1);return e.refreshedUponExpiration&&s>=1&&(e.refreshedUponExpiration=!1),n?{opacity:1,mix:1-d}:{opacity:d,mix:0}}return{opacity:1,mix:0}}class Cn extends t.SourceCache{constructor(t){const e={type:"raster-dem",maxzoom:t.transform.maxZoom},n=new P(Ft(),null),r=kt("mock-dem",e,n,t.style);super("mock-dem",r,!1),r.setEventedParent(this),this._sourceLoaded=!0}_loadTile(t,e){t.state="loaded",e(null)}}class Pn extends t.SourceCache{constructor(t){const e=kt("proxy",{type:"geojson",maxzoom:t.transform.maxZoom},new P(Ft(),null),t.style);super("proxy",e,!1),e.setEventedParent(this),this.map=this.getSource().map=t,this.used=this._sourceLoaded=!0,this.renderCache=[],this.renderCachePool=[],this.proxyCachedFBO={}}update(e,n,r){if(e.freezeTileCoverage)return;this.transform=e;const i=e.coveringTiles({tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled}).reduce(((n,r)=>{if(n[r.key]="",!this._tiles[r.key]){const n=new t.Tile(r,this._source.tileSize*r.overscaleFactor(),e.tileZoom);n.state="loaded",this._tiles[r.key]=n}return n}),{});for(const t in this._tiles)t in i||(this.freeFBO(t),this._tiles[t].unloadVectorData(),delete this._tiles[t])}freeFBO(t){const e=this.proxyCachedFBO[t];if(void 0!==e){const n=Object.values(e);this.renderCachePool.push(...n),delete this.proxyCachedFBO[t]}}deallocRenderCache(){this.renderCache.forEach((t=>t.fb.destroy())),this.renderCache=[],this.renderCachePool=[],this.proxyCachedFBO={}}}class kn extends t.OverscaledTileID{constructor(t,e,n){super(t.overscaledZ,t.wrap,t.canonical.z,t.canonical.x,t.canonical.y),this.proxyTileKey=e,this.projMatrix=n}}class In extends t.Elevation{constructor(e,n){super(),this.painter=e,this.terrainTileForTile={},this.prevTerrainTileForTile={};const[r,i,o]=function(e){const n=new t.StructArrayLayout2i4,r=new t.StructArrayLayout3ui6,i=131;n.reserve(17161),r.reserve(33800);const o=t.EXTENT/128,a=t.EXTENT+o/2,s=a+o;for(let c=-o;c<s;c+=o)for(let e=-o;e<s;e+=o){const r=e<0||e>a||c<0||c>a?24575:0,i=t.clamp(Math.round(e),0,t.EXTENT),o=t.clamp(Math.round(c),0,t.EXTENT);n.emplaceBack(i+r,o)}const l=(t,e)=>{const n=e*i+t;r.emplaceBack(n+1,n,n+i),r.emplaceBack(n+i,n+i+1,n+1)};for(let t=1;t<129;t++)for(let e=1;e<129;e++)l(e,t);return[0,129].forEach((t=>{for(let e=0;e<130;e++)l(e,t),l(t,e)})),[n,r,32768]}(),a=e.context;this.gridBuffer=a.createVertexBuffer(r,t.posAttributes.members),this.gridIndexBuffer=a.createIndexBuffer(i),this.gridSegments=t.SegmentVector.simpleSegment(0,0,r.length,i.length),this.gridNoSkirtSegments=t.SegmentVector.simpleSegment(0,0,r.length,o),this.proxyCoords=[],this.proxiedCoords={},this._visibleDemTiles=[],this._drapedRenderBatches=[],this._sourceTilesOverlap={},this.proxySourceCache=new Pn(n.map),this.orthoMatrix=t.create(),t.ortho(this.orthoMatrix,"globe"===this.painter.transform.projection.name?.015:0,t.EXTENT,0,t.EXTENT,0,1);const s=a.gl;this._overlapStencilMode=new t.StencilMode({func:s.GEQUAL,mask:255},0,255,s.KEEP,s.KEEP,s.REPLACE),this._previousZoom=e.transform.zoom,this.pool=[],this._findCoveringTileCache={},this._tilesDirty={},this.style=n,this._useVertexMorphing=!0,this._exaggeration=1,this._mockSourceCache=new Cn(n.map)}set style(t){t.on("data",this._onStyleDataEvent.bind(this)),t.on("neworder",this._checkRenderCacheEfficiency.bind(this)),this._style=t,this._checkRenderCacheEfficiency(),this._style.map.on("moveend",(()=>{this._clearLineLayersFromRenderCache()}))}update(e,n,r){if(e&&e.terrain){this._style!==e&&(this.style=e),this.enabled=!0;const i=e.terrain.properties;this.sourceCache=0===e.terrain.drapeRenderMode?this._mockSourceCache:e._getSourceCache(i.get("source")),this._exaggeration=i.get("exaggeration");const o=()=>{this.sourceCache.used&&t.warnOnce("Raster DEM source '".concat(this.sourceCache.id,"' is used both for terrain and as layer source.\nThis leads to lower resolution of hillshade. For full hillshade resolution but higher memory consumption, define another raster DEM source."));const e=this.getScaledDemTileSize();this.sourceCache.update(n,e,!0),this.resetTileLookupCache(this.sourceCache.id)};this.sourceCache.usedForTerrain||(this.resetTileLookupCache(this.sourceCache.id),this.sourceCache.usedForTerrain=!0,o(),this._initializing=!0),o(),n.updateElevation(!0,r),this.resetTileLookupCache(this.proxySourceCache.id),this.proxySourceCache.update(n),this._emptyDEMTextureDirty=!0}else this._disable()}resetTileLookupCache(t){this._findCoveringTileCache[t]={}}getScaledDemTileSize(){return this.sourceCache.getSource().tileSize/128*this.proxySourceCache.getSource().tileSize}_checkRenderCacheEfficiency(){const e=this.renderCacheEfficiency(this._style);this._style.map._optimizeForTerrain||100!==e.efficiency&&t.warnOnce("Terrain render cache efficiency is not optimal (".concat(e.efficiency,"%) and performance\n                may be affected negatively, consider placing all background, fill and line layers before layer\n                with id '").concat(e.firstUndrapedLayer,"' or create a map using optimizeForTerrain: true option."))}_onStyleDataEvent(t){t.coord&&"source"===t.dataType?this._clearRenderCacheForTile(t.sourceCacheId,t.coord):"style"===t.dataType&&(this._invalidateRenderCache=!0)}_disable(){if(this.enabled&&(this.enabled=!1,this._sharedDepthStencil=void 0,this.proxySourceCache.deallocRenderCache(),this._style))for(const t in this._style._sourceCaches)this._style._sourceCaches[t].usedForTerrain=!1}destroy(){this._disable(),this._emptyDEMTexture&&this._emptyDEMTexture.destroy(),this._emptyDepthBufferTexture&&this._emptyDepthBufferTexture.destroy(),this.pool.forEach((t=>t.fb.destroy())),this.pool=[],this._depthFBO&&(this._depthFBO.destroy(),this._depthFBO=void 0,this._depthTexture=void 0)}_source(){return this.enabled?this.sourceCache:null}isUsingMockSource(){return this.sourceCache===this._mockSourceCache}exaggeration(){return this._exaggeration}get visibleDemTiles(){return this._visibleDemTiles}get drapeBufferSize(){const t=2*this.proxySourceCache.getSource().tileSize;return[t,t]}set useVertexMorphing(t){this._useVertexMorphing=t}updateTileBinding(e){if(!this.enabled)return;this.prevTerrainTileForTile=this.terrainTileForTile;const n=this.proxySourceCache,r=this.painter.transform;this._initializing&&(this._initializing=0===r._centerAltitude&&-1===this.getAtPointOrZero(t.MercatorCoordinate.fromLngLat(r.center),-1),this._emptyDEMTextureDirty=!this._initializing);const i=this.proxyCoords=n.getIds().map((t=>{const e=n.getTileByID(t).tileID;return e.projMatrix=r.calculateProjMatrix(e.toUnwrapped()),e}));!function(e,n){const r=n.transform.pointCoordinate(n.transform.getCameraPoint()),i=new t.Point(r.x,r.y);e.sort(((e,n)=>{if(n.overscaledZ-e.overscaledZ)return n.overscaledZ-e.overscaledZ;const r=new t.Point(e.canonical.x+(1<<e.canonical.z)*e.wrap,e.canonical.y),o=new t.Point(n.canonical.x+(1<<n.canonical.z)*n.wrap,n.canonical.y),a=i.mult(1<<e.canonical.z);return a.x-=.5,a.y-=.5,a.distSqr(r)-a.distSqr(o)}))}(i,this.painter),this._previousZoom=r.zoom;const o=this.proxyToSource||{};this.proxyToSource={},i.forEach((t=>{this.proxyToSource[t.key]={}})),this.terrainTileForTile={};const a=this._style._sourceCaches;for(const t in a){const n=a[t];if(!n.used)continue;if(n!==this.sourceCache&&this.resetTileLookupCache(n.id),this._setupProxiedCoordsForOrtho(n,e[t],o),n.usedForTerrain)continue;const r=e[t];n.getSource().reparseOverscaled&&this._assignTerrainTiles(r)}this.proxiedCoords[n.id]=i.map((t=>new kn(t,t.key,this.orthoMatrix))),this._assignTerrainTiles(i),this._prepareDEMTextures(),this._setupDrapedRenderBatches(),this._initFBOPool(),this._setupRenderCache(o),this.renderingToTexture=!1,this._updateTimestamp=t.exported.now();const s={};this._visibleDemTiles=[];for(const t of this.proxyCoords){const e=this.terrainTileForTile[t.key];if(!e)continue;const n=e.tileID.key;n in s||(this._visibleDemTiles.push(e),s[n]=n)}}_assignTerrainTiles(t){this._initializing||t.forEach((t=>{if(this.terrainTileForTile[t.key])return;const e=this._findTileCoveringTileID(t,this.sourceCache);e&&(this.terrainTileForTile[t.key]=e)}))}_prepareDEMTextures(){const t=this.painter.context,e=t.gl;for(const n in this.terrainTileForTile){const r=this.terrainTileForTile[n],i=r.dem;!i||r.demTexture&&!r.needsDEMTextureUpload||(t.activeTexture.set(e.TEXTURE1),gn(this.painter,r,i))}}_prepareDemTileUniforms(t,e,n,r){if(!e||null==e.demTexture)return!1;const i=t.tileID.canonical,o=Math.pow(2,e.tileID.canonical.z-i.z),a=r||"";return n["u_dem_tl".concat(a)]=[i.x*o%1,i.y*o%1],n["u_dem_scale".concat(a)]=o,!0}get emptyDEMTexture(){return!this._emptyDEMTextureDirty&&this._emptyDEMTexture?this._emptyDEMTexture:this._updateEmptyDEMTexture()}get emptyDepthBufferTexture(){const e=this.painter.context,n=e.gl;if(!this._emptyDepthBufferTexture){const r=new t.RGBAImage({width:1,height:1},Uint8Array.of(255,255,255,255));this._emptyDepthBufferTexture=new t.Texture(e,r,n.RGBA,{premultiply:!1})}return this._emptyDepthBufferTexture}_getLoadedAreaMinimum(){let t=0;const e=this._visibleDemTiles.reduce(((e,n)=>{if(!n.dem)return e;const r=n.dem.tree.minimums[0];return r>0&&t++,e+r}),0);return t?e/t:0}_updateEmptyDEMTexture(){const e=this.painter.context,n=e.gl;e.activeTexture.set(n.TEXTURE2);const r=this._getLoadedAreaMinimum(),i=new t.RGBAImage({width:1,height:1},new Uint8Array(t.DEMData.pack(r,this.sourceCache.getSource().encoding)));this._emptyDEMTextureDirty=!1;let o=this._emptyDEMTexture;return o?o.update(i,{premultiply:!1}):o=this._emptyDEMTexture=new t.Texture(e,i,n.RGBA,{premultiply:!1}),o}setupElevationDraw(e,n,r){const i=this.painter.context,o=i.gl,a=(s=this.sourceCache.getSource().encoding,{u_dem:2,u_dem_prev:4,u_dem_unpack:t.DEMData.getUnpackVector(s),u_dem_tl:[0,0],u_dem_tl_prev:[0,0],u_dem_scale:0,u_dem_scale_prev:0,u_dem_size:0,u_dem_lerp:1,u_depth:3,u_depth_size_inv:[0,0],u_exaggeration:0});var s;a.u_dem_size=this.sourceCache.getSource().tileSize,a.u_exaggeration=this.exaggeration();let l=null,c=null,u=1;if(r&&r.morphing&&this._useVertexMorphing){const t=r.morphing.srcDemTile,n=r.morphing.dstDemTile;u=r.morphing.phase,t&&n&&(this._prepareDemTileUniforms(e,t,a,"_prev")&&(c=t),this._prepareDemTileUniforms(e,n,a)&&(l=n))}if(c&&l?(i.activeTexture.set(o.TEXTURE2),l.demTexture.bind(o.NEAREST,o.CLAMP_TO_EDGE,o.NEAREST),i.activeTexture.set(o.TEXTURE4),c.demTexture.bind(o.NEAREST,o.CLAMP_TO_EDGE,o.NEAREST),a.u_dem_lerp=u):(l=this.terrainTileForTile[e.tileID.key],i.activeTexture.set(o.TEXTURE2),(this._prepareDemTileUniforms(e,l,a)?l.demTexture:this.emptyDEMTexture).bind(o.NEAREST,o.CLAMP_TO_EDGE)),i.activeTexture.set(o.TEXTURE3),r&&r.useDepthForOcclusion?(this._depthTexture&&this._depthTexture.bind(o.NEAREST,o.CLAMP_TO_EDGE),this._depthFBO&&(a.u_depth_size_inv=[1/this._depthFBO.width,1/this._depthFBO.height])):(this.emptyDepthBufferTexture.bind(o.NEAREST,o.CLAMP_TO_EDGE),a.u_depth_size_inv=[1,1]),r&&r.useMeterToDem&&l){const e=(1<<l.tileID.canonical.z)*t.mercatorZfromAltitude(1,this.painter.transform.center.lat)*this.sourceCache.getSource().tileSize;a.u_meter_to_dem=e}if(r&&r.labelPlaneMatrixInv&&(a.u_label_plane_matrix_inv=r.labelPlaneMatrixInv),n.setTerrainUniformValues(i,a),"globe"===this.painter.transform.projection.name){const t=this.globeUniformValues(this.painter.transform,e.tileID.canonical,r&&r.useDenormalizedUpVectorScale);n.setGlobeUniformValues(i,t)}}globeUniformValues(e,n,r){const i=e.projection;return{u_tile_tl_up:i.upVector(n,0,0),u_tile_tr_up:i.upVector(n,t.EXTENT,0),u_tile_br_up:i.upVector(n,t.EXTENT,t.EXTENT),u_tile_bl_up:i.upVector(n,0,t.EXTENT),u_tile_up_scale:r?t.globeMetersToEcef(1):i.upVectorScale(n,e.center.lat,e.worldSize).metersToTile}}renderToBackBuffer(e){const n=this.painter,r=this.painter.context;0!==e.length&&(r.bindFramebuffer.set(null),r.viewport.set([0,0,n.width,n.height]),n.gpuTimingDeferredRenderStart(),this.renderingToTexture=!1,function(e,n,r,i,o){if("globe"===e.transform.projection.name)!function(e,n,r,i,o){const a=e.context,s=a.gl;let l,c;const u=e.options.showTerrainWireframe?2:0,h=e.transform,d=t.globeUseCustomAntiAliasing(e,a,h),f=(t,n)=>{if(c===t)return;const r=[Sn[t],"PROJECTION_GLOBE_VIEW"];d&&r.push("CUSTOM_ANTIALIASING"),n&&r.push(Sn[u]),l=e.useProgram("globeRaster",null,r),c=t},p=e.colorModeForRenderPass(),m=new t.DepthMode(s.LEQUAL,t.DepthMode.ReadWrite,e.depthRangeFor3D);wn.update(o);const g=t.calculateGlobeMercatorMatrix(h),y=[t.mercatorXfromLng(h.center.lng),t.mercatorYfromLat(h.center.lat)],v=u?[!1,!0]:[!1],_=e.globeSharedBuffers,b=[h.width*t.exported.devicePixelRatio,h.height*t.exported.devicePixelRatio],x=Float32Array.from(h.globeMatrix),w={useDenormalizedUpVectorScale:!0};if(v.forEach((u=>{const h=e.transform,d=En(h.zoom)*n.exaggeration();c=-1;const v=u?s.LINES:s.TRIANGLES;for(const c of i){const i=r.getTile(c),S=t.StencilMode.disabled,E=n.prevTerrainTileForTile[c.key],T=n.terrainTileForTile[c.key];xn(E,T)&&wn.newMorphing(c.key,E,T,o,250),a.activeTexture.set(s.TEXTURE0),i.texture.bind(s.LINEAR,s.CLAMP_TO_EDGE);const M=wn.getMorphValuesForProxy(c.key),A=M?1:0;M&&t.extend$1(w,{morphing:{srcDemTile:M.from,dstDemTile:M.to,phase:t.easeCubicInOut(M.phase)}});const C=t.tileCornersToBounds(c.canonical),P=t.getLatitudinalLod(C.getCenter().lat),k=t.getGridMatrix(c.canonical,C,P,h.worldSize/h._pixelsPerMercatorPixel),I=t.globeNormalizeECEF(t.globeTileBounds(c.canonical)),O=bn(h.projMatrix,x,g,I,t.globeToMercatorTransition(h.zoom),y,h.frustumCorners.TL,h.frustumCorners.TR,h.frustumCorners.BR,h.frustumCorners.BL,h.globeCenterInViewSpace,h.globeRadius,b,d,k);if(f(A,u),n.setupElevationDraw(i,l,w),e.prepareDrawProgram(a,l,c.toUnwrapped()),_){const[n,r,i]=u?_.getWirefameBuffers(e.context,P):_.getGridBuffers(P,0!==d);l.draw(a,v,m,S,p,t.CullFaceMode.backCCW,O,"globe_raster",n,r,i)}}})),_){const o=["GLOBE_POLES","PROJECTION_GLOBE_VIEW"];d&&o.push("CUSTOM_ANTIALIASING"),l=e.useProgram("globeRaster",null,o);for(const c of i){const{x:i,y:o,z:u}=c.canonical,d=0===o,f=o===(1<<u)-1,[g,v,x,S]=_.getPoleBuffers(u);if(S&&(d||f)){const o=r.getTile(c);a.activeTexture.set(s.TEXTURE0),o.texture.bind(s.LINEAR,s.CLAMP_TO_EDGE);let _=t.globePoleMatrixForTile(u,i,h);const E=t.globeNormalizeECEF(t.globeTileBounds(c.canonical)),T=(e,n)=>e.draw(a,s.TRIANGLES,m,t.StencilMode.disabled,p,t.CullFaceMode.disabled,bn(h.projMatrix,_,_,E,0,y,h.frustumCorners.TL,h.frustumCorners.TR,h.frustumCorners.BR,h.frustumCorners.BL,h.globeCenterInViewSpace,h.globeRadius,b,0),"globe_pole_raster",n,x,S);n.setupElevationDraw(o,l,w),e.prepareDrawProgram(a,l,c.toUnwrapped()),d&&T(l,g),f&&(_=t.scale(t.create(),_,[1,-1,1]),T(l,v))}}}}(e,n,r,i,o);else{const a=e.context,s=a.gl;let l,c;const u=e.options.showTerrainWireframe?2:0,h=(t,n)=>{if(c===t)return;const r=[Sn[t]];n&&r.push(Sn[u]),l=e.useProgram("terrainRaster",null,r),c=t},d=e.colorModeForRenderPass(),f=new t.DepthMode(s.LEQUAL,t.DepthMode.ReadWrite,e.depthRangeFor3D);wn.update(o);const p=e.transform,m=En(p.zoom)*n.exaggeration();(u?[!1,!0]:[!1]).forEach((u=>{c=-1;const g=u?s.LINES:s.TRIANGLES,[y,v]=u?n.getWirefameBuffer():[n.gridIndexBuffer,n.gridSegments];for(const c of i){const i=r.getTile(c),_=t.StencilMode.disabled,b=n.prevTerrainTileForTile[c.key],x=n.terrainTileForTile[c.key];xn(b,x)&&wn.newMorphing(c.key,b,x,o,250),a.activeTexture.set(s.TEXTURE0),i.texture.bind(s.LINEAR,s.CLAMP_TO_EDGE,s.LINEAR_MIPMAP_NEAREST);const w=wn.getMorphValuesForProxy(c.key),S=w?1:0;let E;w&&(E={morphing:{srcDemTile:w.from,dstDemTile:w.to,phase:t.easeCubicInOut(w.phase)}});const T=_n(c.projMatrix,Tn(c.canonical,p.renderWorldCopies)?m/10:m);h(S,u),n.setupElevationDraw(i,l,E),e.prepareDrawProgram(a,l,c.toUnwrapped()),l.draw(a,g,f,_,d,t.CullFaceMode.backCCW,T,"terrain_raster",n.gridBuffer,y,v)}}))}}(n,this,this.proxySourceCache,e,this._updateTimestamp),this.renderingToTexture=!0,n.gpuTimingDeferredRenderEnd(),e.splice(0,e.length))}renderBatch(e){if(0===this._drapedRenderBatches.length)return e+1;this.renderingToTexture=!0;const n=this.painter,r=this.painter.context,i=this.proxySourceCache,o=this.proxiedCoords[i.id],a=this._drapedRenderBatches.shift(),s=[],l=n.style.order;let c=0;for(const u of o){const o=i.getTileByID(u.proxyTileKey),h=i.proxyCachedFBO[u.key]?i.proxyCachedFBO[u.key][e]:void 0,d=void 0!==h?i.renderCache[h]:this.pool[c++],f=void 0!==h;if(o.texture=d.tex,f&&!d.dirty){s.push(o.tileID);continue}let p;r.bindFramebuffer.set(d.fb.framebuffer),this.renderedToTile=!1,d.dirty&&(r.clear({color:t.Color.transparent,stencil:0}),d.dirty=!1);for(let t=a.start;t<=a.end;++t){const e=n.style._layers[l[t]];if(e.isHidden(n.transform.zoom))continue;const i=n.style._getLayerSourceCache(e),o=i?this.proxyToSource[u.key][i.id]:[u];if(!o)continue;const a=o;r.viewport.set([0,0,d.fb.width,d.fb.height]),p!==(i?i.id:null)&&(this._setupStencil(d,o,e,i),p=i?i.id:null),n.renderLayer(n,i,e,a)}this.renderedToTile?(d.dirty=!0,s.push(o.tileID)):f||--c,5===c&&(c=0,this.renderToBackBuffer(s))}return this.renderToBackBuffer(s),this.renderingToTexture=!1,r.bindFramebuffer.set(null),r.viewport.set([0,0,n.width,n.height]),a.end+1}postRender(){}renderCacheEfficiency(t){const e=t.order.length;if(0===e)return{efficiency:100};let n,r=0,i=0,o=!1;for(let a=0;a<e;++a){const e=t._layers[t.order[a]];this._style.isLayerDraped(e)?(o&&++r,++i):o||(o=!0,n=e.id)}return 0===i?{efficiency:100}:{efficiency:100*(1-r/i),firstUndrapedLayer:n}}getMinElevationBelowMSL(){let t=0;return this._visibleDemTiles.filter((t=>t.dem)).forEach((e=>{t=Math.min(t,e.dem.tree.minimums[0])})),0===t?t:(t-30)*this._exaggeration}raycast(t,e,n){if(!this._visibleDemTiles)return null;const r=this._visibleDemTiles.filter((t=>t.dem)).map((r=>{const i=r.tileID,o=1<<i.overscaledZ,{x:a,y:s}=i.canonical,l=a/o,c=(a+1)/o,u=s/o,h=(s+1)/o;return{minx:l,miny:u,maxx:c,maxy:h,t:r.dem.tree.raycastRoot(l,u,c,h,t,e,n),tile:r}}));r.sort(((t,e)=>(null!==t.t?t.t:Number.MAX_VALUE)-(null!==e.t?e.t:Number.MAX_VALUE)));for(const i of r){if(null==i.t)return null;const r=i.tile.dem.tree.raycast(i.minx,i.miny,i.maxx,i.maxy,t,e,n);if(null!=r)return r}return null}_createFBO(){const e=this.painter.context,n=e.gl,r=this.drapeBufferSize;e.activeTexture.set(n.TEXTURE0);const i=new t.Texture(e,{width:r[0],height:r[1],data:null},n.RGBA);i.bind(n.LINEAR,n.CLAMP_TO_EDGE);const o=e.createFramebuffer(r[0],r[1],!1);return o.colorAttachment.set(i.texture),o.depthAttachment=new wt(e,o.framebuffer),void 0===this._sharedDepthStencil?(this._sharedDepthStencil=e.createRenderbuffer(e.gl.DEPTH_STENCIL,r[0],r[1]),this._stencilRef=0,o.depthAttachment.set(this._sharedDepthStencil),e.clear({stencil:0})):o.depthAttachment.set(this._sharedDepthStencil),e.extTextureFilterAnisotropic&&!e.extTextureFilterAnisotropicForceOff&&n.texParameterf(n.TEXTURE_2D,e.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,e.extTextureFilterAnisotropicMax),{fb:o,tex:i,dirty:!1}}_initFBOPool(){for(;this.pool.length<Math.min(5,this.proxyCoords.length);)this.pool.push(this._createFBO())}_shouldDisableRenderCache(){if(this._style.light&&this._style.light.hasTransition())return!0;for(const t in this._style._sourceCaches)if(this._style._sourceCaches[t].hasTransition())return!0;return this._style.order.some((t=>{const e=this._style._layers[t],n=e.isHidden(this.painter.transform.zoom);return"custom"===e.type?!n&&e.shouldRedrape():!n&&e.hasTransition()}))}_clearLineLayersFromRenderCache(){let e=!1;for(const t of this._style._getSources())if(t instanceof Tt){e=!0;break}if(!e)return;const n={};for(let r=0;r<this._style.order.length;++r){const e=this._style._layers[this._style.order[r]],i=this._style._getLayerSourceCache(e);if(i&&!n[i.id]&&!e.isHidden(this.painter.transform.zoom)&&"line"===e.type&&e.widthExpression()instanceof t.ZoomDependentExpression){n[i.id]=!0;for(const t of this.proxyCoords){const e=this.proxyToSource[t.key][i.id];if(e)for(const t of e)this._clearRenderCacheForTile(i.id,t)}}}}_clearRasterLayersFromRenderCache(){let t=!1;for(const n in this._style._sourceCaches)if(this._style._sourceCaches[n]._source instanceof Mt){t=!0;break}if(!t)return;const e={};for(let n=0;n<this._style.order.length;++n){const t=this._style._layers[this._style.order[n]],r=this._style._getLayerSourceCache(t);if(!r||e[r.id])continue;if(t.isHidden(this.painter.transform.zoom)||"raster"!==t.type)continue;const i=t.paint.get("raster-fade-duration");for(const e of this.proxyCoords){const t=this.proxyToSource[e.key][r.id];if(t)for(const e of t){const t=An(r.getTile(e),r.findLoadedParent(e,0),r,this.painter.transform,i);(1!==t.opacity||0!==t.mix)&&this._clearRenderCacheForTile(r.id,e)}}}}_setupDrapedRenderBatches(){const t=this._style.order,e=t.length;if(0===e)return;const n=[];let r,i=0,o=this._style._layers[t[i]];for(;!this._style.isLayerDraped(o)&&o.isHidden(this.painter.transform.zoom)&&++i<e;)o=this._style._layers[t[i]];for(;i<e;++i){const e=this._style._layers[t[i]];e.isHidden(this.painter.transform.zoom)||(this._style.isLayerDraped(e)?void 0===r&&(r=i):void 0!==r&&(n.push({start:r,end:i-1}),r=void 0))}void 0!==r&&n.push({start:r,end:i-1}),this._drapedRenderBatches=n}_setupRenderCache(t){const e=this.proxySourceCache;if(this._shouldDisableRenderCache()||this._invalidateRenderCache){if(this._invalidateRenderCache=!1,e.renderCache.length>e.renderCachePool.length){const t=Object.values(e.proxyCachedFBO);e.proxyCachedFBO={};for(let n=0;n<t.length;++n){const r=Object.values(t[n]);e.renderCachePool.push(...r)}}return}this._clearRasterLayersFromRenderCache();const n=this.proxyCoords,r=this._tilesDirty;for(let o=n.length-1;o>=0;o--){const i=n[o];if(e.getTileByID(i.key),void 0!==e.proxyCachedFBO[i.key]){const n=t[i.key],o=this.proxyToSource[i.key];let a=0;for(const t in o){const e=o[t],i=n[t];if(!i||i.length!==e.length||e.some(((e,n)=>e!==i[n]||r[t]&&r[t].hasOwnProperty(e.key)))){a=-1;break}++a}for(const t in e.proxyCachedFBO[i.key])e.renderCache[e.proxyCachedFBO[i.key][t]].dirty=a<0||a!==Object.values(n).length}}const i=[...this._drapedRenderBatches];i.sort(((t,e)=>e.end-e.start-(t.end-t.start)));for(const o of i)for(const t of n){if(e.proxyCachedFBO[t.key])continue;let n=e.renderCachePool.pop();void 0===n&&e.renderCache.length<50&&(n=e.renderCache.length,e.renderCache.push(this._createFBO())),void 0!==n&&(e.proxyCachedFBO[t.key]={},e.proxyCachedFBO[t.key][o.start]=n,e.renderCache[n].dirty=!0)}this._tilesDirty={}}_setupStencil(t,e,n,r){if(!r||!this._sourceTilesOverlap[r.id])return void(this._overlapStencilType&&(this._overlapStencilType=!1));const i=this.painter.context,o=i.gl;if(e.length<=1)return void(this._overlapStencilType=!1);let a;if(n.isTileClipped())a=e.length,this._overlapStencilMode.test={func:o.EQUAL,mask:255},this._overlapStencilType="Clip";else{if(!(e[0].overscaledZ>e[e.length-1].overscaledZ))return void(this._overlapStencilType=!1);a=1,this._overlapStencilMode.test={func:o.GREATER,mask:255},this._overlapStencilType="Mask"}this._stencilRef+a>255&&(i.clear({stencil:0}),this._stencilRef=0),this._stencilRef+=a,this._overlapStencilMode.ref=this._stencilRef,n.isTileClipped()&&this._renderTileClippingMasks(e,this._overlapStencilMode.ref)}clipOrMaskOverlapStencilType(){return"Clip"===this._overlapStencilType||"Mask"===this._overlapStencilType}stencilModeForRTTOverlap(e){return this.renderingToTexture&&this._overlapStencilType?("Clip"===this._overlapStencilType&&(this._overlapStencilMode.ref=this.painter._tileClippingMaskIDs[e.key]),this._overlapStencilMode):t.StencilMode.disabled}_renderTileClippingMasks(e,n){const r=this.painter,i=this.painter.context,o=i.gl;r._tileClippingMaskIDs={},i.setColorMode(t.ColorMode.disabled),i.setDepthMode(t.DepthMode.disabled);const a=r.useProgram("clippingMask");for(const s of e){const e=r._tileClippingMaskIDs[s.key]=--n;a.draw(i,o.TRIANGLES,t.DepthMode.disabled,new t.StencilMode({func:o.ALWAYS,mask:0},e,255,o.KEEP,o.KEEP,o.REPLACE),t.ColorMode.disabled,t.CullFaceMode.disabled,Mn(s.projMatrix),"$clipping",r.tileExtentBuffer,r.quadTriangleIndexBuffer,r.tileExtentSegments)}}pointCoordinate(e){const n=this.painter.transform;if(e.x<0||e.x>n.width||e.y<0||e.y>n.height)return null;const r=[e.x,e.y,1,1];t.transformMat4$1(r,r,n.pixelMatrixInverse),t.scale$1(r,r,1/r[3]),r[0]/=n.worldSize,r[1]/=n.worldSize;const i=n._camera.position,o=t.mercatorZfromAltitude(1,n.center.lat),a=[i[0],i[1],i[2]/o,0],s=t.subtract([],r.slice(0,3),a);t.normalize(s,s);const l=this.raycast(a,s,this._exaggeration);return null!==l&&l?(t.scaleAndAdd(a,a,s,l),a[3]=a[2],a[2]*=o,a):null}drawDepth(){const e=this.painter,n=e.context,r=this.proxySourceCache,i=Math.ceil(e.width),o=Math.ceil(e.height);if(!this._depthFBO||this._depthFBO.width===i&&this._depthFBO.height===o||(this._depthFBO.destroy(),this._depthFBO=void 0,this._depthTexture=void 0),!this._depthFBO){const e=n.gl,r=n.createFramebuffer(i,o,!0);n.activeTexture.set(e.TEXTURE0);const a=new t.Texture(n,{width:i,height:o,data:null},e.RGBA);a.bind(e.NEAREST,e.CLAMP_TO_EDGE),r.colorAttachment.set(a.texture);const s=n.createRenderbuffer(n.gl.DEPTH_COMPONENT16,i,o);r.depthAttachment.set(s),this._depthFBO=r,this._depthTexture=a}n.bindFramebuffer.set(this._depthFBO.framebuffer),n.viewport.set([0,0,i,o]),function(e,n,r,i){if("globe"===e.transform.projection.name)return;const o=e.context,a=o.gl;o.clear({depth:1});const s=e.useProgram("terrainDepth"),l=new t.DepthMode(a.LESS,t.DepthMode.ReadWrite,e.depthRangeFor3D);for(const c of i){const e=r.getTile(c),i=_n(c.projMatrix,0);n.setupElevationDraw(e,s),s.draw(o,a.TRIANGLES,l,t.StencilMode.disabled,t.ColorMode.unblended,t.CullFaceMode.backCCW,i,"terrain_depth",n.gridBuffer,n.gridIndexBuffer,n.gridNoSkirtSegments)}}(e,this,r,this.proxyCoords)}_setupProxiedCoordsForOrtho(t,e,n){if(t.getSource()instanceof Ct)return this._setupProxiedCoordsForImageSource(t,e,n);this._findCoveringTileCache[t.id]=this._findCoveringTileCache[t.id]||{};const r=this.proxiedCoords[t.id]=[],i=this.proxyCoords;for(let a=0;a<i.length;a++){const e=i[a],o=this._findTileCoveringTileID(e,t);if(o){const i=this._createProxiedId(e,o,n[e.key]&&n[e.key][t.id]);r.push(i),this.proxyToSource[e.key][t.id]=[i]}}let o=!1;for(let a=0;a<e.length;a++){const i=t.getTile(e[a]);if(!i||!i.hasData())continue;const s=this._findTileCoveringTileID(i.tileID,this.proxySourceCache);if(s&&s.tileID.canonical.z!==i.tileID.canonical.z){const e=this.proxyToSource[s.tileID.key][t.id],a=this._createProxiedId(s.tileID,i,n[s.tileID.key]&&n[s.tileID.key][t.id]);e?e.splice(e.length-1,0,a):this.proxyToSource[s.tileID.key][t.id]=[a],r.push(a),o=!0}}this._sourceTilesOverlap[t.id]=o}_setupProxiedCoordsForImageSource(e,n,r){if(!e.getSource().loaded())return;const i=this.proxiedCoords[e.id]=[],o=this.proxyCoords,a=e.getSource(),s=new t.Point(a.tileID.x,a.tileID.y)._div(1<<a.tileID.z),l=a.coordinates.map(t.MercatorCoordinate.fromLngLat).reduce(((t,e)=>(t.min.x=Math.min(t.min.x,e.x-s.x),t.min.y=Math.min(t.min.y,e.y-s.y),t.max.x=Math.max(t.max.x,e.x-s.x),t.max.y=Math.max(t.max.y,e.y-s.y),t)),{min:new t.Point(Number.MAX_VALUE,Number.MAX_VALUE),max:new t.Point(-Number.MAX_VALUE,-Number.MAX_VALUE)}),c=(e,n)=>{const r=e.wrap+e.canonical.x/(1<<e.canonical.z),i=e.canonical.y/(1<<e.canonical.z),o=t.EXTENT/(1<<e.canonical.z),a=n.wrap+n.canonical.x/(1<<n.canonical.z),s=n.canonical.y/(1<<n.canonical.z);return r+o<a+l.min.x||r>a+l.max.x||i+o<s+l.min.y||i>s+l.max.y};for(let t=0;t<o.length;t++){const a=o[t];for(let t=0;t<n.length;t++){const o=e.getTile(n[t]);if(!o||!o.hasData())continue;if(c(a,o.tileID))continue;const s=this._createProxiedId(a,o,r[a.key]&&r[a.key][e.id]),l=this.proxyToSource[a.key][e.id];l?l.push(s):this.proxyToSource[a.key][e.id]=[s],i.push(s)}}}_createProxiedId(e,n,r){let i=this.orthoMatrix;if(r){const t=r.find((t=>t.key===n.tileID.key));if(t)return t}if(n.tileID.key!==e.key){const r=e.canonical.z-n.tileID.canonical.z;let o,a,s;i=t.create();const l=n.tileID.wrap-e.wrap<<e.overscaledZ;r>0?(o=t.EXTENT>>r,a=o*((n.tileID.canonical.x<<r)-e.canonical.x+l),s=o*((n.tileID.canonical.y<<r)-e.canonical.y)):(o=t.EXTENT<<-r,a=t.EXTENT*(n.tileID.canonical.x-(e.canonical.x+l<<-r)),s=t.EXTENT*(n.tileID.canonical.y-(e.canonical.y<<-r))),t.ortho(i,0,o,0,o,0,1),t.translate(i,i,[a,s,0])}return new kn(n.tileID,e.key,i)}_findTileCoveringTileID(e,n){let r=n.getTile(e);if(r&&r.hasData())return r;const i=this._findCoveringTileCache[n.id],o=i[e.key];if(r=o?n.getTileByID(o):null,r&&r.hasData()||null===o)return r;let a=r?r.tileID:e,s=a.overscaledZ;const l=n.getSource().minzoom,c=[];if(!o){const i=n.getSource().maxzoom;if(e.canonical.z>=i){const r=e.canonical.z-i;n.getSource().reparseOverscaled?(s=Math.max(e.canonical.z+2,n.transform.tileZoom),a=new t.OverscaledTileID(s,e.wrap,i,e.canonical.x>>r,e.canonical.y>>r)):0!==r&&(s=i,a=new t.OverscaledTileID(s,e.wrap,i,e.canonical.x>>r,e.canonical.y>>r))}a.key!==e.key&&(c.push(a.key),r=n.getTile(a))}const u=t=>{c.forEach((e=>{i[e]=t})),c.length=0};for(s-=1;s>=l&&(!r||!r.hasData());s--){r&&u(r.tileID.key);const t=a.calculateScaledKey(s);if(r=n.getTileByID(t),r&&r.hasData())break;const e=i[t];if(null===e)break;void 0===e?c.push(t):r=n.getTileByID(e)}return u(r?r.tileID.key:null),r&&r.hasData()?r:null}findDEMTileFor(t){return this.enabled?this._findTileCoveringTileID(t,this.sourceCache):null}prepareDrawTile(){this.renderedToTile=!0}_clearRenderCacheForTile(t,e){let n=this._tilesDirty[t];n||(n=this._tilesDirty[t]={}),n[e.key]=!0}getWirefameBuffer(){if(!this.wireframeSegments){const e=function(e){let n=0;const r=new t.StructArrayLayout2ui4,i=131;for(let t=1;t<129;t++){for(let e=1;e<129;e++)n=t*i+e,r.emplaceBack(n,n+1),r.emplaceBack(n,n+i),r.emplaceBack(n+1,n+i),128===t&&r.emplaceBack(n+i,n+i+1);r.emplaceBack(n+1,n+1+i)}return r}();this.wireframeIndexBuffer=this.painter.context.createIndexBuffer(e),this.wireframeSegments=t.SegmentVector.simpleSegment(0,0,this.gridBuffer.length,e.length)}return[this.wireframeIndexBuffer,this.wireframeSegments]}}class On{static cacheKey(t,e,n,r){let i="".concat(e).concat(r?r.cacheKey:"");for(const o of n)t.usedDefines.includes(o)&&(i+="/".concat(o));return i}constructor(e,n,r,i,o,a){const s=e.gl;this.program=s.createProgram();const l=function(t){const e=[];for(let n=0;n<t.length;n++){if(null===t[n])continue;const r=t[n].split(" ");e.push(r.pop())}return e}(r.staticAttributes),c=i?i.getBinderAttributes():[],u=l.concat(c);let h=i?i.defines():[];h=h.concat(a.map((t=>"#define ".concat(t))));const d=e.isWebGL2?"#version 300 es\n":"",f=d+h.concat(e.extStandardDerivatives&&0===d.length?"#extension GL_OES_standard_derivatives : enable\n".concat(cn):cn,cn,ln,sn.fragmentSource,on.fragmentSource,r.fragmentSource).join("\n"),p=d+h.concat("\n#ifdef GL_ES\nprecision highp float;\n#else\n\n#if !defined(lowp)\n#define lowp\n#endif\n\n#if !defined(mediump)\n#define mediump\n#endif\n\n#if !defined(highp)\n#define highp\n#endif\n\n#endif",ln,sn.vertexSource,on.vertexSource,rn.vertexSource,r.vertexSource).join("\n"),m=s.createShader(s.FRAGMENT_SHADER);if(s.isContextLost())return void(this.failedToCreate=!0);s.shaderSource(m,f),s.compileShader(m),s.attachShader(this.program,m);const g=s.createShader(s.VERTEX_SHADER);if(s.isContextLost())this.failedToCreate=!0;else{s.shaderSource(g,p),s.compileShader(g),s.attachShader(this.program,g),this.attributes={},this.numAttributes=u.length;for(let t=0;t<this.numAttributes;t++)u[t]&&(s.bindAttribLocation(this.program,t,u[t]),this.attributes[u[t]]=t);s.linkProgram(this.program),s.deleteShader(g),s.deleteShader(m),this.fixedUniforms=o(e),this.binderUniforms=i?i.getUniforms(e):[],a.includes("TERRAIN")&&(this.terrainUniforms=(e=>({u_dem:new t.Uniform1i(e),u_dem_prev:new t.Uniform1i(e),u_dem_unpack:new t.Uniform4f(e),u_dem_tl:new t.Uniform2f(e),u_dem_scale:new t.Uniform1f(e),u_dem_tl_prev:new t.Uniform2f(e),u_dem_scale_prev:new t.Uniform1f(e),u_dem_size:new t.Uniform1f(e),u_dem_lerp:new t.Uniform1f(e),u_exaggeration:new t.Uniform1f(e),u_depth:new t.Uniform1i(e),u_depth_size_inv:new t.Uniform2f(e),u_meter_to_dem:new t.Uniform1f(e),u_label_plane_matrix_inv:new t.UniformMatrix4f(e)}))(e)),a.includes("GLOBE")&&(this.globeUniforms=(e=>({u_tile_tl_up:new t.Uniform3f(e),u_tile_tr_up:new t.Uniform3f(e),u_tile_br_up:new t.Uniform3f(e),u_tile_bl_up:new t.Uniform3f(e),u_tile_up_scale:new t.Uniform1f(e)}))(e)),a.includes("FOG")&&(this.fogUniforms=(e=>({u_fog_matrix:new t.UniformMatrix4f(e),u_fog_range:new t.Uniform2f(e),u_fog_color:new t.Uniform4f(e),u_fog_horizon_blend:new t.Uniform1f(e),u_fog_temporal_offset:new t.Uniform1f(e),u_frustum_tl:new t.Uniform3f(e),u_frustum_tr:new t.Uniform3f(e),u_frustum_br:new t.Uniform3f(e),u_frustum_bl:new t.Uniform3f(e),u_globe_pos:new t.Uniform3f(e),u_globe_radius:new t.Uniform1f(e),u_globe_transition:new t.Uniform1f(e),u_is_globe:new t.Uniform1i(e),u_viewport:new t.Uniform2f(e)}))(e))}}setTerrainUniformValues(t,e){if(!this.terrainUniforms)return;const n=this.terrainUniforms;if(!this.failedToCreate){t.program.set(this.program);for(const t in e)n[t]&&n[t].set(this.program,t,e[t])}}setGlobeUniformValues(t,e){if(!this.globeUniforms)return;const n=this.globeUniforms;if(!this.failedToCreate){t.program.set(this.program);for(const t in e)n[t]&&n[t].set(this.program,t,e[t])}}setFogUniformValues(t,e){if(!this.fogUniforms)return;const n=this.fogUniforms;if(!this.failedToCreate){t.program.set(this.program);for(const t in e)n[t].set(this.program,t,e[t])}}draw(t,e,n,r,i,o,a,s,l,c,u,h,d,f,p){const m=t.gl;if(this.failedToCreate)return;t.program.set(this.program),t.setDepthMode(n),t.setStencilMode(r),t.setColorMode(i),t.setCullFace(o);for(const y of Object.keys(this.fixedUniforms))this.fixedUniforms[y].set(this.program,y,a[y]);f&&f.setUniforms(this.program,t,this.binderUniforms,h,{zoom:d});const g={[m.LINES]:2,[m.TRIANGLES]:3,[m.LINE_STRIP]:1}[e];for(const y of u.get()){const n=y.vaos||(y.vaos={});(n[s]||(n[s]=new fn)).bind(t,this,l,f?f.getPaintVertexBuffers():[],c,y.vertexOffset,p||[]),m.drawElements(e,y.primitiveLength*g,m.UNSIGNED_SHORT,y.primitiveOffset*g*2)}}}function Ln(t,e){const n=Math.pow(2,e.tileID.overscaledZ),r=e.tileSize*Math.pow(2,t.transform.tileZoom)/n,i=r*(e.tileID.canonical.x+e.tileID.wrap*n),o=r*e.tileID.canonical.y;return{u_image:0,u_texsize:e.imageAtlasTexture.size,u_tile_units_to_pixels:1/k(e,1,t.transform.tileZoom),u_pixel_coord_upper:[i>>16,o>>16],u_pixel_coord_lower:[65535&i,65535&o]}}const jn=t.create(),zn=(e,n,r,i,o,a,s,l,c,u,h)=>{const d=n.style.light,f=d.properties.get("position"),p=[f.x,f.y,f.z],m=t.create$1();"viewport"===d.properties.get("anchor")&&(t.fromRotation(m,-n.transform.angle),t.transformMat3(p,p,m));const g=d.properties.get("color"),y=n.transform,v={u_matrix:e,u_lightpos:p,u_lightintensity:d.properties.get("intensity"),u_lightcolor:[g.r,g.g,g.b],u_vertical_gradient:+r,u_opacity:i,u_tile_id:[0,0,0],u_zoom_transition:0,u_inv_rot_matrix:jn,u_merc_center:[0,0],u_up_dir:[0,0,0],u_height_lift:0,u_ao:o,u_edge_radius:a};return"globe"===y.projection.name&&(v.u_tile_id=[s.canonical.x,s.canonical.y,1<<s.canonical.z],v.u_zoom_transition=c,v.u_inv_rot_matrix=h,v.u_merc_center=u,v.u_up_dir=y.projection.upVector(new t.CanonicalTileID(0,0,0),u[0]*t.EXTENT,u[1]*t.EXTENT),v.u_height_lift=l),v},Rn=(e,n,r,i,o,a,s,l,c,u,h,d)=>{const f=zn(e,n,r,i,o,a,s,c,u,h,d),p={u_height_factor:-Math.pow(2,s.overscaledZ)/l.tileSize/8};return t.extend(f,Ln(n,l),p)},Dn=t=>({u_matrix:t}),Bn=(e,n,r)=>t.extend(Dn(e),Ln(n,r)),Fn=(t,e)=>({u_matrix:t,u_world:e}),Nn=(e,n,r,i)=>t.extend(Bn(e,n,r),{u_world:i}),Un=t.create(),Vn=(e,n,r,i,o,a)=>{const s=e.transform,l="globe"===s.projection.name;let c;if("map"===a.paint.get("circle-pitch-alignment"))if(l){const e=t.globePixelsToTileUnits(s.zoom,n.canonical)*s._pixelsPerMercatorPixel;c=Float32Array.from([e,0,0,e])}else c=s.calculatePixelsToTileUnitsMatrix(r);else c=new Float32Array([s.pixelsToGLUnits[0],0,0,s.pixelsToGLUnits[1]]);const u={u_camera_to_center_distance:s.cameraToCenterDistance,u_matrix:e.translatePosMatrix(n.projMatrix,r,a.paint.get("circle-translate"),a.paint.get("circle-translate-anchor")),u_device_pixel_ratio:t.exported.devicePixelRatio,u_extrude_scale:c,u_inv_rot_matrix:Un,u_merc_center:[0,0],u_tile_id:[0,0,0],u_zoom_transition:0,u_up_dir:[0,0,0]};if(l){u.u_inv_rot_matrix=i,u.u_merc_center=o,u.u_tile_id=[n.canonical.x,n.canonical.y,1<<n.canonical.z],u.u_zoom_transition=t.globeToMercatorTransition(s.zoom);const e=o[0]*t.EXTENT,r=o[1]*t.EXTENT;u.u_up_dir=s.projection.upVector(new t.CanonicalTileID(0,0,0),e,r)}return u},Wn=t=>{const e=[];return"map"===t.paint.get("circle-pitch-alignment")&&e.push("PITCH_WITH_MAP"),"map"===t.paint.get("circle-pitch-scale")&&e.push("SCALE_WITH_MAP"),e},Gn=(e,n,r,i)=>{const o=t.EXTENT/r.tileSize;return{u_matrix:e,u_camera_to_center_distance:n.getCameraToCenterDistance(i),u_extrude_scale:[n.pixelsToGLUnits[0]/o,n.pixelsToGLUnits[1]/o]}},qn=function(t,e){return{u_matrix:t,u_color:e,u_overlay:0,u_overlay_scale:arguments.length>2&&void 0!==arguments[2]?arguments[2]:1}},Hn=t.create(),Zn=(e,n,r,i,o,a,s)=>{const l=e.transform,c="globe"===l.projection.name,u=c?t.globePixelsToTileUnits(l.zoom,n.canonical)*l._pixelsPerMercatorPixel:k(r,1,a),h={u_matrix:n.projMatrix,u_extrude_scale:u,u_intensity:s,u_inv_rot_matrix:Hn,u_merc_center:[0,0],u_tile_id:[0,0,0],u_zoom_transition:0,u_up_dir:[0,0,0]};if(c){h.u_inv_rot_matrix=i,h.u_merc_center=o,h.u_tile_id=[n.canonical.x,n.canonical.y,1<<n.canonical.z],h.u_zoom_transition=t.globeToMercatorTransition(l.zoom);const e=o[0]*t.EXTENT,r=o[1]*t.EXTENT;h.u_up_dir=l.projection.upVector(new t.CanonicalTileID(0,0,0),e,r)}return h},Xn=(t,e,n,r,i,o,a)=>{const s=t.transform,l=s.calculatePixelsToTileUnitsMatrix(e);return{u_matrix:$n(t,e,n,r),u_pixels_to_tile_units:l,u_device_pixel_ratio:o,u_units_to_pixels:[1/s.pixelsToGLUnits[0],1/s.pixelsToGLUnits[1]],u_dash_image:0,u_gradient_image:1,u_image_height:i,u_texsize:Jn(n)?e.lineAtlasTexture.size:[0,0],u_tile_units_to_pixels:Kn(e,t.transform),u_alpha_discard_threshold:0,u_trim_offset:a}},Yn=(t,e,n,r,i)=>{const o=t.transform;return{u_matrix:$n(t,e,n,r),u_texsize:e.imageAtlasTexture.size,u_pixels_to_tile_units:o.calculatePixelsToTileUnitsMatrix(e),u_device_pixel_ratio:i,u_image:0,u_tile_units_to_pixels:Kn(e,o),u_units_to_pixels:[1/o.pixelsToGLUnits[0],1/o.pixelsToGLUnits[1]],u_alpha_discard_threshold:0}};function Kn(t,e){return 1/k(t,1,e.tileZoom)}function $n(t,e,n,r){return t.translatePosMatrix(r||e.tileID.projMatrix,e,n.paint.get("line-translate"),n.paint.get("line-translate-anchor"))}function Jn(t){const e=t.paint.get("line-dasharray").value;return e.value||"constant"!==e.kind}const Qn=(t,e,n,r,i,o)=>{return{u_matrix:t,u_tl_parent:e,u_scale_parent:n,u_fade_t:r.mix,u_opacity:r.opacity*i.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:i.paint.get("raster-brightness-min"),u_brightness_high:i.paint.get("raster-brightness-max"),u_saturation_factor:(s=i.paint.get("raster-saturation"),s>0?1-1/(1.001-s):-s),u_contrast_factor:(a=i.paint.get("raster-contrast"),a>0?1/(1-a):1+a),u_spin_weights:tr(i.paint.get("raster-hue-rotate")),u_perspective_transform:o};var a,s};function tr(t){t*=Math.PI/180;const e=Math.sin(t),n=Math.cos(t);return[(2*n+1)/3,(-Math.sqrt(3)*e-n+1)/3,(Math.sqrt(3)*e-n+1)/3]}const er=t.create(),nr=(e,n,r,i,o,a,s,l,c,u,h,d,f,p,m,g)=>{const y=o.transform,v={u_is_size_zoom_constant:+("constant"===e||"source"===e),u_is_size_feature_constant:+("constant"===e||"camera"===e),u_size_t:n?n.uSizeT:0,u_size:n?n.uSize:0,u_camera_to_center_distance:y.cameraToCenterDistance,u_rotate_symbol:+r,u_aspect_ratio:y.width/y.height,u_fade_change:o.options.fadeDuration?o.symbolFadeChange:1,u_matrix:a,u_label_plane_matrix:s,u_coord_matrix:l,u_is_text:+c,u_pitch_with_map:+i,u_texsize:u,u_texture:0,u_tile_id:[0,0,0],u_zoom_transition:0,u_inv_rot_matrix:er,u_merc_center:[0,0],u_camera_forward:[0,0,0],u_ecef_origin:[0,0,0],u_tile_matrix:er,u_up_vector:[0,-1,0]};return"globe"===g.name&&(v.u_tile_id=[h.canonical.x,h.canonical.y,1<<h.canonical.z],v.u_zoom_transition=d,v.u_inv_rot_matrix=p,v.u_merc_center=f,v.u_camera_forward=y._camera.forward(),v.u_ecef_origin=t.globeECEFOrigin(y.globeMatrix,h.toUnwrapped()),v.u_tile_matrix=Float32Array.from(y.globeMatrix),v.u_up_vector=m),v},rr=(e,n,r,i,o,a,s,l,c,u,h,d,f,p,m,g,y)=>t.extend(nr(e,n,r,i,o,a,s,l,c,u,d,f,p,m,g,y),{u_gamma_scale:i?o.transform.cameraToCenterDistance*Math.cos(o.terrain?0:o.transform._pitch):1,u_device_pixel_ratio:t.exported.devicePixelRatio,u_is_halo:+h}),ir=(e,n,r,i,o,a,s,l,c,u,h,d,f,p,m,g)=>t.extend(rr(e,n,r,i,o,a,s,l,!0,c,!0,h,d,f,p,m,g),{u_texsize_icon:u,u_texture_icon:1}),or=(t,e,n)=>({u_matrix:t,u_opacity:e,u_color:n}),ar=(e,n,r,i,o)=>t.extend(function(t,e,n){const r=e.imageManager.getPattern(t.toString()),{width:i,height:o}=e.imageManager.getPixelSize(),a=Math.pow(2,n.tileID.overscaledZ),s=n.tileSize*Math.pow(2,e.transform.tileZoom)/a,l=s*(n.tileID.canonical.x+n.tileID.wrap*a),c=s*n.tileID.canonical.y;return{u_image:0,u_pattern_tl:r.tl,u_pattern_br:r.br,u_texsize:[i,o],u_pattern_size:r.displaySize,u_tile_units_to_pixels:1/k(n,1,e.transform.tileZoom),u_pixel_coord_upper:[l>>16,c>>16],u_pixel_coord_lower:[65535&l,65535&c]}}(i,r,o),{u_matrix:e,u_opacity:n}),sr={fillExtrusion:e=>({u_matrix:new t.UniformMatrix4f(e),u_lightpos:new t.Uniform3f(e),u_lightintensity:new t.Uniform1f(e),u_lightcolor:new t.Uniform3f(e),u_vertical_gradient:new t.Uniform1f(e),u_opacity:new t.Uniform1f(e),u_edge_radius:new t.Uniform1f(e),u_ao:new t.Uniform2f(e),u_tile_id:new t.Uniform3f(e),u_zoom_transition:new t.Uniform1f(e),u_inv_rot_matrix:new t.UniformMatrix4f(e),u_merc_center:new t.Uniform2f(e),u_up_dir:new t.Uniform3f(e),u_height_lift:new t.Uniform1f(e)}),fillExtrusionPattern:e=>({u_matrix:new t.UniformMatrix4f(e),u_lightpos:new t.Uniform3f(e),u_lightintensity:new t.Uniform1f(e),u_lightcolor:new t.Uniform3f(e),u_vertical_gradient:new t.Uniform1f(e),u_height_factor:new t.Uniform1f(e),u_edge_radius:new t.Uniform1f(e),u_ao:new t.Uniform2f(e),u_tile_id:new t.Uniform3f(e),u_zoom_transition:new t.Uniform1f(e),u_inv_rot_matrix:new t.UniformMatrix4f(e),u_merc_center:new t.Uniform2f(e),u_up_dir:new t.Uniform3f(e),u_height_lift:new t.Uniform1f(e),u_image:new t.Uniform1i(e),u_texsize:new t.Uniform2f(e),u_pixel_coord_upper:new t.Uniform2f(e),u_pixel_coord_lower:new t.Uniform2f(e),u_tile_units_to_pixels:new t.Uniform1f(e),u_opacity:new t.Uniform1f(e)}),fill:e=>({u_matrix:new t.UniformMatrix4f(e)}),fillPattern:e=>({u_matrix:new t.UniformMatrix4f(e),u_image:new t.Uniform1i(e),u_texsize:new t.Uniform2f(e),u_pixel_coord_upper:new t.Uniform2f(e),u_pixel_coord_lower:new t.Uniform2f(e),u_tile_units_to_pixels:new t.Uniform1f(e)}),fillOutline:e=>({u_matrix:new t.UniformMatrix4f(e),u_world:new t.Uniform2f(e)}),fillOutlinePattern:e=>({u_matrix:new t.UniformMatrix4f(e),u_world:new t.Uniform2f(e),u_image:new t.Uniform1i(e),u_texsize:new t.Uniform2f(e),u_pixel_coord_upper:new t.Uniform2f(e),u_pixel_coord_lower:new t.Uniform2f(e),u_tile_units_to_pixels:new t.Uniform1f(e)}),circle:e=>({u_camera_to_center_distance:new t.Uniform1f(e),u_extrude_scale:new t.UniformMatrix2f(e),u_device_pixel_ratio:new t.Uniform1f(e),u_matrix:new t.UniformMatrix4f(e),u_inv_rot_matrix:new t.UniformMatrix4f(e),u_merc_center:new t.Uniform2f(e),u_tile_id:new t.Uniform3f(e),u_zoom_transition:new t.Uniform1f(e),u_up_dir:new t.Uniform3f(e)}),collisionBox:e=>({u_matrix:new t.UniformMatrix4f(e),u_camera_to_center_distance:new t.Uniform1f(e),u_extrude_scale:new t.Uniform2f(e)}),collisionCircle:e=>({u_matrix:new t.UniformMatrix4f(e),u_inv_matrix:new t.UniformMatrix4f(e),u_camera_to_center_distance:new t.Uniform1f(e),u_viewport_size:new t.Uniform2f(e)}),debug:e=>({u_color:new t.UniformColor(e),u_matrix:new t.UniformMatrix4f(e),u_overlay:new t.Uniform1i(e),u_overlay_scale:new t.Uniform1f(e)}),clippingMask:e=>({u_matrix:new t.UniformMatrix4f(e)}),heatmap:e=>({u_extrude_scale:new t.Uniform1f(e),u_intensity:new t.Uniform1f(e),u_matrix:new t.UniformMatrix4f(e),u_inv_rot_matrix:new t.UniformMatrix4f(e),u_merc_center:new t.Uniform2f(e),u_tile_id:new t.Uniform3f(e),u_zoom_transition:new t.Uniform1f(e),u_up_dir:new t.Uniform3f(e)}),heatmapTexture:e=>({u_image:new t.Uniform1i(e),u_color_ramp:new t.Uniform1i(e),u_opacity:new t.Uniform1f(e)}),hillshade:e=>({u_matrix:new t.UniformMatrix4f(e),u_image:new t.Uniform1i(e),u_latrange:new t.Uniform2f(e),u_light:new t.Uniform2f(e),u_shadow:new t.UniformColor(e),u_highlight:new t.UniformColor(e),u_accent:new t.UniformColor(e)}),hillshadePrepare:e=>({u_matrix:new t.UniformMatrix4f(e),u_image:new t.Uniform1i(e),u_dimension:new t.Uniform2f(e),u_zoom:new t.Uniform1f(e),u_unpack:new t.Uniform4f(e)}),line:e=>({u_matrix:new t.UniformMatrix4f(e),u_pixels_to_tile_units:new t.UniformMatrix2f(e),u_device_pixel_ratio:new t.Uniform1f(e),u_units_to_pixels:new t.Uniform2f(e),u_dash_image:new t.Uniform1i(e),u_gradient_image:new t.Uniform1i(e),u_image_height:new t.Uniform1f(e),u_texsize:new t.Uniform2f(e),u_tile_units_to_pixels:new t.Uniform1f(e),u_alpha_discard_threshold:new t.Uniform1f(e),u_trim_offset:new t.Uniform2f(e)}),linePattern:e=>({u_matrix:new t.UniformMatrix4f(e),u_texsize:new t.Uniform2f(e),u_pixels_to_tile_units:new t.UniformMatrix2f(e),u_device_pixel_ratio:new t.Uniform1f(e),u_image:new t.Uniform1i(e),u_units_to_pixels:new t.Uniform2f(e),u_tile_units_to_pixels:new t.Uniform1f(e),u_alpha_discard_threshold:new t.Uniform1f(e)}),raster:e=>({u_matrix:new t.UniformMatrix4f(e),u_tl_parent:new t.Uniform2f(e),u_scale_parent:new t.Uniform1f(e),u_fade_t:new t.Uniform1f(e),u_opacity:new t.Uniform1f(e),u_image0:new t.Uniform1i(e),u_image1:new t.Uniform1i(e),u_brightness_low:new t.Uniform1f(e),u_brightness_high:new t.Uniform1f(e),u_saturation_factor:new t.Uniform1f(e),u_contrast_factor:new t.Uniform1f(e),u_spin_weights:new t.Uniform3f(e),u_perspective_transform:new t.Uniform2f(e)}),symbolIcon:e=>({u_is_size_zoom_constant:new t.Uniform1i(e),u_is_size_feature_constant:new t.Uniform1i(e),u_size_t:new t.Uniform1f(e),u_size:new t.Uniform1f(e),u_camera_to_center_distance:new t.Uniform1f(e),u_rotate_symbol:new t.Uniform1i(e),u_aspect_ratio:new t.Uniform1f(e),u_fade_change:new t.Uniform1f(e),u_matrix:new t.UniformMatrix4f(e),u_label_plane_matrix:new t.UniformMatrix4f(e),u_coord_matrix:new t.UniformMatrix4f(e),u_is_text:new t.Uniform1i(e),u_pitch_with_map:new t.Uniform1i(e),u_texsize:new t.Uniform2f(e),u_tile_id:new t.Uniform3f(e),u_zoom_transition:new t.Uniform1f(e),u_inv_rot_matrix:new t.UniformMatrix4f(e),u_merc_center:new t.Uniform2f(e),u_camera_forward:new t.Uniform3f(e),u_tile_matrix:new t.UniformMatrix4f(e),u_up_vector:new t.Uniform3f(e),u_ecef_origin:new t.Uniform3f(e),u_texture:new t.Uniform1i(e)}),symbolSDF:e=>({u_is_size_zoom_constant:new t.Uniform1i(e),u_is_size_feature_constant:new t.Uniform1i(e),u_size_t:new t.Uniform1f(e),u_size:new t.Uniform1f(e),u_camera_to_center_distance:new t.Uniform1f(e),u_rotate_symbol:new t.Uniform1i(e),u_aspect_ratio:new t.Uniform1f(e),u_fade_change:new t.Uniform1f(e),u_matrix:new t.UniformMatrix4f(e),u_label_plane_matrix:new t.UniformMatrix4f(e),u_coord_matrix:new t.UniformMatrix4f(e),u_is_text:new t.Uniform1i(e),u_pitch_with_map:new t.Uniform1i(e),u_texsize:new t.Uniform2f(e),u_texture:new t.Uniform1i(e),u_gamma_scale:new t.Uniform1f(e),u_device_pixel_ratio:new t.Uniform1f(e),u_tile_id:new t.Uniform3f(e),u_zoom_transition:new t.Uniform1f(e),u_inv_rot_matrix:new t.UniformMatrix4f(e),u_merc_center:new t.Uniform2f(e),u_camera_forward:new t.Uniform3f(e),u_tile_matrix:new t.UniformMatrix4f(e),u_up_vector:new t.Uniform3f(e),u_ecef_origin:new t.Uniform3f(e),u_is_halo:new t.Uniform1i(e)}),symbolTextAndIcon:e=>({u_is_size_zoom_constant:new t.Uniform1i(e),u_is_size_feature_constant:new t.Uniform1i(e),u_size_t:new t.Uniform1f(e),u_size:new t.Uniform1f(e),u_camera_to_center_distance:new t.Uniform1f(e),u_rotate_symbol:new t.Uniform1i(e),u_aspect_ratio:new t.Uniform1f(e),u_fade_change:new t.Uniform1f(e),u_matrix:new t.UniformMatrix4f(e),u_label_plane_matrix:new t.UniformMatrix4f(e),u_coord_matrix:new t.UniformMatrix4f(e),u_is_text:new t.Uniform1i(e),u_pitch_with_map:new t.Uniform1i(e),u_texsize:new t.Uniform2f(e),u_texsize_icon:new t.Uniform2f(e),u_texture:new t.Uniform1i(e),u_texture_icon:new t.Uniform1i(e),u_gamma_scale:new t.Uniform1f(e),u_device_pixel_ratio:new t.Uniform1f(e),u_is_halo:new t.Uniform1i(e)}),background:e=>({u_matrix:new t.UniformMatrix4f(e),u_opacity:new t.Uniform1f(e),u_color:new t.UniformColor(e)}),backgroundPattern:e=>({u_matrix:new t.UniformMatrix4f(e),u_opacity:new t.Uniform1f(e),u_image:new t.Uniform1i(e),u_pattern_tl:new t.Uniform2f(e),u_pattern_br:new t.Uniform2f(e),u_texsize:new t.Uniform2f(e),u_pattern_size:new t.Uniform2f(e),u_pixel_coord_upper:new t.Uniform2f(e),u_pixel_coord_lower:new t.Uniform2f(e),u_tile_units_to_pixels:new t.Uniform1f(e)}),terrainRaster:vn,terrainDepth:vn,skybox:e=>({u_matrix:new t.UniformMatrix4f(e),u_sun_direction:new t.Uniform3f(e),u_cubemap:new t.Uniform1i(e),u_opacity:new t.Uniform1f(e),u_temporal_offset:new t.Uniform1f(e)}),skyboxGradient:e=>({u_matrix:new t.UniformMatrix4f(e),u_color_ramp:new t.Uniform1i(e),u_center_direction:new t.Uniform3f(e),u_radius:new t.Uniform1f(e),u_opacity:new t.Uniform1f(e),u_temporal_offset:new t.Uniform1f(e)}),skyboxCapture:e=>({u_matrix_3f:new t.UniformMatrix3f(e),u_sun_direction:new t.Uniform3f(e),u_sun_intensity:new t.Uniform1f(e),u_color_tint_r:new t.Uniform4f(e),u_color_tint_m:new t.Uniform4f(e),u_luminance:new t.Uniform1f(e)}),globeRaster:e=>({u_proj_matrix:new t.UniformMatrix4f(e),u_globe_matrix:new t.UniformMatrix4f(e),u_normalize_matrix:new t.UniformMatrix4f(e),u_merc_matrix:new t.UniformMatrix4f(e),u_zoom_transition:new t.Uniform1f(e),u_merc_center:new t.Uniform2f(e),u_image0:new t.Uniform1i(e),u_grid_matrix:new t.UniformMatrix3f(e),u_skirt_height:new t.Uniform1f(e),u_frustum_tl:new t.Uniform3f(e),u_frustum_tr:new t.Uniform3f(e),u_frustum_br:new t.Uniform3f(e),u_frustum_bl:new t.Uniform3f(e),u_globe_pos:new t.Uniform3f(e),u_globe_radius:new t.Uniform1f(e),u_viewport:new t.Uniform2f(e)}),globeAtmosphere:e=>({u_frustum_tl:new t.Uniform3f(e),u_frustum_tr:new t.Uniform3f(e),u_frustum_br:new t.Uniform3f(e),u_frustum_bl:new t.Uniform3f(e),u_horizon:new t.Uniform1f(e),u_transition:new t.Uniform1f(e),u_fadeout_range:new t.Uniform1f(e),u_color:new t.Uniform4f(e),u_high_color:new t.Uniform4f(e),u_space_color:new t.Uniform4f(e),u_star_intensity:new t.Uniform1f(e),u_star_density:new t.Uniform1f(e),u_star_size:new t.Uniform1f(e),u_temporal_offset:new t.Uniform1f(e),u_horizon_angle:new t.Uniform1f(e),u_rotation_matrix:new t.UniformMatrix4f(e)})};let lr;function cr(e,n,r,i,o,a,s){const l=e.context,c=l.gl,u=e.transform,h=e.useProgram("collisionBox"),d=[];let f=0,p=0;for(let x=0;x<i.length;x++){const m=i[x],g=n.getTile(m),y=g.getBucket(r);if(!y)continue;const v=ve(m,y,u);let _=v;0===o[0]&&0===o[1]||(_=e.translatePosMatrix(v,g,o,a));const b=s?y.textCollisionBox:y.iconCollisionBox,w=y.collisionCircleArray;if(w.length>0){const e=t.create(),n=_;t.mul(e,y.placementInvProjMatrix,u.glCoordMatrix),t.mul(e,e,y.placementViewportMatrix),d.push({circleArray:w,circleOffset:p,transform:n,invTransform:e,projection:y.getProjection()}),f+=w.length/4,p=f}b&&(e.terrain&&e.terrain.setupElevationDraw(g,h),h.draw(l,c.LINES,t.DepthMode.disabled,t.StencilMode.disabled,e.colorModeForRenderPass(),t.CullFaceMode.disabled,Gn(_,u,g,y.getProjection()),r.id,b.layoutVertexBuffer,b.indexBuffer,b.segments,null,u.zoom,null,[b.collisionVertexBuffer,b.collisionVertexBufferExt]))}if(!s||!d.length)return;const m=e.useProgram("collisionCircle"),g=new t.StructArrayLayout2f1f2i16;g.resize(4*f),g._trim();let y=0;for(const t of d)for(let e=0;e<t.circleArray.length/4;e++){const n=4*e,r=t.circleArray[n+0],i=t.circleArray[n+1],o=t.circleArray[n+2],a=t.circleArray[n+3];g.emplace(y++,r,i,o,a,0),g.emplace(y++,r,i,o,a,1),g.emplace(y++,r,i,o,a,2),g.emplace(y++,r,i,o,a,3)}(!lr||lr.length<2*f)&&(lr=function(e){const n=2*e,r=new t.StructArrayLayout3ui6;r.resize(n),r._trim();for(let t=0;t<n;t++){const e=6*t;r.uint16[e+0]=4*t+0,r.uint16[e+1]=4*t+1,r.uint16[e+2]=4*t+2,r.uint16[e+3]=4*t+2,r.uint16[e+4]=4*t+3,r.uint16[e+5]=4*t+0}return r}(f));const v=l.createIndexBuffer(lr,!0),_=l.createVertexBuffer(g,t.collisionCircleLayout.members,!0);for(const x of d){const n={u_matrix:x.transform,u_inv_matrix:x.invTransform,u_camera_to_center_distance:(b=u).getCameraToCenterDistance(x.projection),u_viewport_size:[b.width,b.height]};m.draw(l,c.TRIANGLES,t.DepthMode.disabled,t.StencilMode.disabled,e.colorModeForRenderPass(),t.CullFaceMode.disabled,n,r.id,_,v,t.SegmentVector.simpleSegment(0,2*x.circleOffset,x.circleArray.length,x.circleArray.length/2),null,u.zoom)}var b;_.destroy(),v.destroy()}const ur=t.create();function hr(e,n){let{width:r,height:i,anchor:o,textOffset:a,textScale:s}=e;const{horizontalAlign:l,verticalAlign:c}=t.getAnchorAlignment(o),u=-(l-.5)*r,h=-(c-.5)*i,d=t.evaluateVariableOffset(o,a);return new t.Point((u/s+d[0])*n,(h/s+d[1])*n)}function dr(e,n,r,i,o,a,s,l,c,u,h){const d=e.text.placedSymbolArray,f=e.text.dynamicLayoutVertexArray,p=e.icon.dynamicLayoutVertexArray,m={},g=e.getProjection(),y=_e(l,g,a),v=a.elevation,_=g.upVectorScale(l.canonical,a.center.lat,a.worldSize).metersToTile;f.clear();for(let b=0;b<d.length;b++){const p=d.get(b),{tileAnchorX:x,tileAnchorY:w,numGlyphs:S}=p,E=p.hidden||!p.crossTileID||e.allowVerticalPlacement&&!p.placedOrientation?null:i[p.crossTileID];if(E){let i=0,d=0,b=0;if(v){const t=v?v.getAtTileOffset(l,x,w):0,[e,n,r]=g.upVector(l.canonical,x,w);i=t*e*_,d=t*n*_,b=t*r*_}let[T,M,A,C]=re(p.projectedAnchorX+i,p.projectedAnchorY+d,p.projectedAnchorZ+b,r?y:s);const P=ie(a.getCameraToCenterDistance(g),C);let k=o.evaluateSizeForFeature(e.textSizeData,u,p)*P/t.ONE_EM;r&&(k*=e.tilePixelRatio/c);const I=hr(E,k);r?(({x:T,y:M,z:A}=g.projectTilePoint(x+I.x,w+I.y,l.canonical)),[T,M,A]=re(T+i,M+d,A+b,s)):(n&&I._rotate(-a.angle),T+=I.x,M+=I.y,A=0);const O=e.allowVerticalPlacement&&p.placedOrientation===t.WritingMode.vertical?Math.PI/2:0;for(let e=0;e<S;e++)t.addDynamicAttributes(f,T,M,A,O);h&&p.associatedIconIndex>=0&&(m[p.associatedIconIndex]={x:T,y:M,z:A,angle:O})}else fe(S,f)}if(h){p.clear();const n=e.icon.placedSymbolArray;for(let e=0;e<n.length;e++){const r=n.get(e),{numGlyphs:i}=r,o=m[e];if(r.hidden||!o)fe(i,p);else{const{x:e,y:n,z:r,angle:a}=o;for(let o=0;o<i;o++)t.addDynamicAttributes(p,e,n,r,a)}}e.icon.dynamicLayoutVertexBuffer.updateData(p)}e.text.dynamicLayoutVertexBuffer.updateData(f)}function fr(t,e,n){return n.iconsInText&&e?"symbolTextAndIcon":t?"symbolSDF":"symbolIcon"}function pr(e,n,r,i,o,a,s,l,c,u,h,d){const f=e.context,p=f.gl,m=e.transform,g="map"===l,y="map"===c,v=g&&"point"!==r.layout.get("symbol-placement"),_=g&&!y&&!v,b=void 0!==r.layout.get("symbol-sort-key").constantOr(1);let x=!1;const w=e.depthModeForSublayer(0,t.DepthMode.ReadOnly),S=[t.mercatorXfromLng(m.center.lng),t.mercatorYfromLat(m.center.lat)],E=r.layout.get("text-variable-anchor"),T="globe"===m.projection.name,M=[],A=[0,-1,0];let C=A;!T&&!m.mercatorFromTransition||g||(C=function(e){const n=e._camera.getWorldToCamera(e.worldSize,1),r=t.multiply([],n,e.globeMatrix);t.invert(r,r);const i=[0,0,0],o=[0,1,0,0];return t.transformMat4$1(o,o,r),i[0]=o[0],i[1]=o[1],i[2]=o[2],t.normalize(i,i),i}(m));for(const P of i){const i=n.getTile(P),l=i.getBucket(r);if(!l)continue;if("mercator"===l.projection.name&&T)continue;const c=o?l.text:l.icon;if(!c||l.fullyClipped||!c.segments.get().length)continue;const h=c.programConfigurations.get(r.id),d=o||l.sdfIcons,f=o?l.textSizeData:l.iconSizeData,w=y||0!==m.pitch,k=t.evaluateSizeForZoom(f,m.zoom);let I,O,L,j,z=[0,0],R=null;if(o)O=i.glyphAtlasTexture,L=p.LINEAR,I=i.glyphAtlasTexture.size,l.iconsInText&&(z=i.imageAtlasTexture.size,R=i.imageAtlasTexture,j=w||e.options.rotating||e.options.zooming||"composite"===f.kind||"camera"===f.kind?p.LINEAR:p.NEAREST);else{const t=1!==r.layout.get("icon-size").constantOr(0)||l.iconsNeedLinear;O=i.imageAtlasTexture,L=d||e.options.rotating||e.options.zooming||t||w?p.LINEAR:p.NEAREST,I=i.imageAtlasTexture.size}const D="globe"===l.projection.name,B=D?C:A,F=D?t.globeToMercatorTransition(m.zoom):0,N=_e(P,l.getProjection(),m),U=m.calculatePixelsToTileUnitsMatrix(i),V=te(N,i.tileID.canonical,y,g,m,l.getProjection(),U),W=e.terrain&&y&&v?t.invert(t.create(),V):ur,G=ne(N,i.tileID.canonical,y,g,m,l.getProjection(),U),q=E&&l.hasTextData(),H="none"!==r.layout.get("icon-text-fit")&&q&&l.hasIconData();if(v){const t=m.elevation,n=t?t.getAtTileOffsetFunc(P,m.center.lat,m.worldSize,l.getProjection()):null,r=ee(N,i.tileID.canonical,y,g,m,l.getProjection(),U);ae(l,N,e,o,r,G,y,u,n,P)}const Z=v||o&&E||H,X=e.translatePosMatrix(N,i,a,s),Y=Z?ur:V,K=e.translatePosMatrix(G,i,a,s,!0),$=l.getProjection().createInversionMatrix(m,P.canonical),J=[];e.terrainRenderModeElevated()&&y&&J.push("PITCH_WITH_MAP_TERRAIN"),D&&J.push("PROJECTION_GLOBE_VIEW"),Z&&J.push("PROJECTED_POS_ON_VIEWPORT");const Q=d&&0!==r.paint.get(o?"text-halo-width":"icon-halo-width").constantOr(1);let tt;tt=d?l.iconsInText?ir(f.kind,k,_,y,e,X,Y,K,I,z,P,F,S,$,B,l.getProjection()):rr(f.kind,k,_,y,e,X,Y,K,o,I,!0,P,F,S,$,B,l.getProjection()):nr(f.kind,k,_,y,e,X,Y,K,o,I,P,F,S,$,B,l.getProjection());const et={program:e.useProgram(fr(d,o,l),h,J),buffers:c,uniformValues:tt,atlasTexture:O,atlasTextureIcon:R,atlasInterpolation:L,atlasInterpolationIcon:j,isSDF:d,hasHalo:Q,tile:i,labelPlaneMatrixInv:W};if(b&&l.canOverlap){x=!0;const e=c.segments.get();for(const n of e)M.push({segments:new t.SegmentVector([n]),sortKey:n.sortKey,state:et})}else M.push({segments:c.segments,sortKey:0,state:et})}x&&M.sort(((t,e)=>t.sortKey-e.sortKey));for(const t of M){const n=t.state;if(e.terrain&&e.terrain.setupElevationDraw(n.tile,n.program,{useDepthForOcclusion:!T,labelPlaneMatrixInv:n.labelPlaneMatrixInv}),f.activeTexture.set(p.TEXTURE0),n.atlasTexture.bind(n.atlasInterpolation,p.CLAMP_TO_EDGE),n.atlasTextureIcon&&(f.activeTexture.set(p.TEXTURE1),n.atlasTextureIcon&&n.atlasTextureIcon.bind(n.atlasInterpolationIcon,p.CLAMP_TO_EDGE)),n.isSDF){const i=n.uniformValues;n.hasHalo&&(i.u_is_halo=1,mr(n.buffers,t.segments,r,e,n.program,w,h,d,i)),i.u_is_halo=0}mr(n.buffers,t.segments,r,e,n.program,w,h,d,n.uniformValues)}}function mr(e,n,r,i,o,a,s,l,c){const u=i.context,h=[e.dynamicLayoutVertexBuffer,e.opacityVertexBuffer,e.globeExtVertexBuffer];o.draw(u,u.gl.TRIANGLES,a,s,l,t.CullFaceMode.disabled,c,r.id,e.layoutVertexBuffer,e.indexBuffer,n,r.paint,i.transform.zoom,e.programConfigurations.get(r.id),h)}function gr(e,n,r,i,o,a,s){const l=e.context.gl,c=r.paint.get("fill-pattern"),u=c&&c.constantOr(1);let h,d,f,p,m;s?(d=u&&!r.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",h=l.LINES):(d=u?"fillPattern":"fill",h=l.TRIANGLES);for(const g of i){const i=n.getTile(g);if(u&&!i.patternsLoaded())continue;const y=i.getBucket(r);if(!y)continue;e.prepareDrawTile();const v=y.programConfigurations.get(r.id),_=e.useProgram(d,v);u&&(e.context.activeTexture.set(l.TEXTURE0),i.imageAtlasTexture.bind(l.LINEAR,l.CLAMP_TO_EDGE),v.updatePaintBuffers());const b=c.constantOr(null);if(b&&i.imageAtlas){const t=i.imageAtlas.patternPositions[b.toString()];t&&v.setConstantPatternPositions(t)}const x=e.translatePosMatrix(g.projMatrix,i,r.paint.get("fill-translate"),r.paint.get("fill-translate-anchor"));if(s){p=y.indexBuffer2,m=y.segments2;const t=e.terrain&&e.terrain.renderingToTexture?e.terrain.drapeBufferSize:[l.drawingBufferWidth,l.drawingBufferHeight];f="fillOutlinePattern"===d&&u?Nn(x,e,i,t):Fn(x,t)}else p=y.indexBuffer,m=y.segments,f=u?Bn(x,e,i):Dn(x);e.prepareDrawProgram(e.context,_,g.toUnwrapped()),_.draw(e.context,h,o,e.stencilModeForClipping(g),a,t.CullFaceMode.disabled,f,r.id,y.layoutVertexBuffer,p,m,r.paint,e.transform.zoom,v)}}function yr(e,n,r,i,o,a,s){const l=e.context,c=l.gl,u=e.transform,h=r.paint.get("fill-extrusion-pattern"),d=h.constantOr(1),f=r.paint.get("fill-extrusion-opacity"),p=[r.paint.get("fill-extrusion-ambient-occlusion-intensity"),r.paint.get("fill-extrusion-ambient-occlusion-radius")],m=r.layout.get("fill-extrusion-edge-radius"),g=m>0&&!r.paint.get("fill-extrusion-rounded-roof"),y=g?0:m,v="globe"===u.projection.name?t.fillExtrusionHeightLift():0,_="globe"===u.projection.name,b=_?t.globeToMercatorTransition(u.zoom):0,x=[t.mercatorXfromLng(u.center.lng),t.mercatorYfromLat(u.center.lat)],w=[];_&&w.push("PROJECTION_GLOBE_VIEW"),p[0]>0&&w.push("FAUX_AO"),g&&w.push("ZERO_ROOF_RADIUS");for(const S of i){const i=n.getTile(S),m=i.getBucket(r);if(!m||m.projection.name!==u.projection.name)continue;const g=m.programConfigurations.get(r.id),E=e.useProgram(d?"fillExtrusionPattern":"fillExtrusion",g,w);if(e.terrain){const t=e.terrain;if(e.style.terrainSetForDrapingOnly())t.setupElevationDraw(i,E,{useMeterToDem:!0});else{if(!m.enableTerrain)continue;if(t.setupElevationDraw(i,E,{useMeterToDem:!0}),vr(l,n,S,m,r,t),!m.centroidVertexBuffer){const t=E.attributes.a_centroid_pos;void 0!==t&&c.vertexAttrib2f(t,0,0)}}}d&&(e.context.activeTexture.set(c.TEXTURE0),i.imageAtlasTexture.bind(c.LINEAR,c.CLAMP_TO_EDGE),g.updatePaintBuffers());const T=h.constantOr(null);if(T&&i.imageAtlas){const t=i.imageAtlas.patternPositions[T.toString()];t&&g.setConstantPatternPositions(t)}const M=e.translatePosMatrix(S.projMatrix,i,r.paint.get("fill-extrusion-translate"),r.paint.get("fill-extrusion-translate-anchor")),A=u.projection.createInversionMatrix(u,S.canonical),C=r.paint.get("fill-extrusion-vertical-gradient"),P=d?Rn(M,e,C,f,p,y,S,i,v,b,x,A):zn(M,e,C,f,p,y,S,v,b,x,A);e.prepareDrawProgram(l,E,S.toUnwrapped());const k=[];e.terrain&&k.push(m.centroidVertexBuffer),_&&k.push(m.layoutVertexExtBuffer),E.draw(l,l.gl.TRIANGLES,o,a,s,t.CullFaceMode.backCCW,P,r.id,m.layoutVertexBuffer,m.indexBuffer,m.segments,r.paint,e.transform.zoom,g,k)}}function vr(e,n,r,i,o,a){const s=[e=>{let n=e.canonical.x-1,r=e.wrap;return n<0&&(n=(1<<e.canonical.z)-1,r--),new t.OverscaledTileID(e.overscaledZ,r,e.canonical.z,n,e.canonical.y)},e=>{let n=e.canonical.x+1,r=e.wrap;return n===1<<e.canonical.z&&(n=0,r++),new t.OverscaledTileID(e.overscaledZ,r,e.canonical.z,n,e.canonical.y)},e=>new t.OverscaledTileID(e.overscaledZ,e.wrap,e.canonical.z,e.canonical.x,(0===e.canonical.y?1<<e.canonical.z:e.canonical.y)-1),e=>new t.OverscaledTileID(e.overscaledZ,e.wrap,e.canonical.z,e.canonical.x,e.canonical.y===(1<<e.canonical.z)-1?0:e.canonical.y+1)],l=t=>{const e=n.getSource().minzoom,r=t=>{const e=n.getTileByID(t);if(e&&e.hasData())return e.getBucket(o)},i=[0,-1,1];for(const n of i){if(t.overscaledZ+n<e)continue;const i=r(t.calculateScaledKey(t.overscaledZ+n));if(i)return i}},c=[0,0,0],u=(e,n)=>(c[0]=Math.min(e.min.y,n.min.y),c[1]=Math.max(e.max.y,n.max.y),c[2]=t.EXTENT-n.min.x>e.max.x?n.min.x-t.EXTENT:e.max.x,c),h=(e,n)=>(c[0]=Math.min(e.min.x,n.min.x),c[1]=Math.max(e.max.x,n.max.x),c[2]=t.EXTENT-n.min.y>e.max.y?n.min.y-t.EXTENT:e.max.y,c),d=[(t,e)=>u(t,e),(t,e)=>u(e,t),(t,e)=>h(t,e),(t,e)=>h(e,t)],f=new t.Point(0,0);let p,m,g;const y=(e,n,i,o,s)=>{const l=[[o?i:e,o?e:i,0],[o?i:n,o?n:i,0]],c=s<0?t.EXTENT+s:s,u=[o?c:(e+n)/2,o?(e+n)/2:c,0];return 0===i&&s<0||0!==i&&s>0?a.getForTilePoints(g,[u],!0,m):l.push(u),a.getForTilePoints(r,l,!0,p),Math.max(l[0][2],l[1][2],u[2])/a.exaggeration()};for(let v=0;v<4;v++){const e=(v<2?1:5)-v,n=i.borders[v];if(0===n.length)continue;const o=g=s[v](r),c=l(o);if(!(c&&c instanceof t.FillExtrusionBucket&&c.enableTerrain))continue;if(i.borderDoneWithNeighborZ[v]===c.canonical.z&&c.borderDoneWithNeighborZ[e]===i.canonical.z)continue;if(m=a.findDEMTileFor(o),!m||!m.dem)continue;if(!p){const t=a.findDEMTileFor(r);if(!t||!t.dem)return;p=t}const u=c.borders[e];let h=0;const _=c.borderDoneWithNeighborZ[e]!==i.canonical.z;if(i.canonical.z===c.canonical.z){for(let r=0;r<n.length;r++){const o=i.featuresOnBorder[n[r]],a=o.borders[v];let s;for(;h<u.length&&(s=c.featuresOnBorder[u[h]],!(s.borders[e][1]>a[0]+3));)_&&c.encodeCentroid(void 0,s,!1),h++;if(s&&h<u.length){const n=h;let r=0;for(;!(s.borders[e][0]>a[1]-3)&&(r++,++h!==u.length);)s=c.featuresOnBorder[u[h]];if(s=c.featuresOnBorder[u[n]],o.intersectsCount()>1||s.intersectsCount()>1||1!==r){1!==r&&(h=n),i.encodeCentroid(void 0,o,!1),_&&c.encodeCentroid(void 0,s,!1);continue}const l=d[v](o,s),p=v%2?t.EXTENT-1:0;f.x=y(l[0],Math.min(t.EXTENT-1,l[1]),p,v<2,l[2]),f.y=0,i.encodeCentroid(f,o,!1),_&&c.encodeCentroid(f,s,!1)}else i.encodeCentroid(void 0,o,!1)}i.borderDoneWithNeighborZ[v]=c.canonical.z,i.needsCentroidUpdate=!0,_&&(c.borderDoneWithNeighborZ[e]=i.canonical.z,c.needsCentroidUpdate=!0)}else{for(const t of n)i.encodeCentroid(void 0,i.featuresOnBorder[t],!1);if(_){for(const t of u)c.encodeCentroid(void 0,c.featuresOnBorder[t],!1);c.borderDoneWithNeighborZ[e]=i.canonical.z,c.needsCentroidUpdate=!0}i.borderDoneWithNeighborZ[v]=c.canonical.z,i.needsCentroidUpdate=!0}}(i.needsCentroidUpdate||!i.centroidVertexBuffer&&0!==i.centroidVertexArray.length)&&i.uploadCentroid(e)}const _r=new t.Color(1,0,0,1),br=new t.Color(0,1,0,1),xr=new t.Color(0,0,1,1),wr=new t.Color(1,0,1,1),Sr=new t.Color(0,1,1,1);function Er(e,n,r){const i=e.context,o=e.transform,a=i.gl,s="globe"===o.projection.name,l=s?["PROJECTION_GLOBE_VIEW"]:null;let c=r.projMatrix;if(s&&t.globeToMercatorTransition(o.zoom)>0){const e=t.transitionTileAABBinECEF(r.canonical,o),n=t.globeDenormalizeECEF(e);c=t.multiply(new Float32Array(16),o.globeMatrix,n),t.multiply(c,o.projMatrix,c)}const u=e.useProgram("debug",null,l),h=n.getTileByID(r.key);e.terrain&&e.terrain.setupElevationDraw(h,u);const d=t.DepthMode.disabled,f=t.StencilMode.disabled,p=e.colorModeForRenderPass(),m="$debug";i.activeTexture.set(a.TEXTURE0),e.emptyTexture.bind(a.LINEAR,a.CLAMP_TO_EDGE),s?h._makeGlobeTileDebugBuffers(e.context,o):h._makeDebugTileBoundsBuffers(e.context,o.projection);const g=h._tileDebugBuffer||e.debugBuffer,y=h._tileDebugIndexBuffer||e.debugIndexBuffer,v=h._tileDebugSegments||e.debugSegments;u.draw(i,a.LINE_STRIP,d,f,p,t.CullFaceMode.disabled,qn(c,t.Color.red),m,g,y,v,null,null,null,[h._globeTileDebugBorderBuffer]);const _=h.latestRawTileData,b=Math.floor((_&&_.byteLength||0)/1024),x=n.getTile(r).tileSize,w=512/Math.min(x,512)*(r.overscaledZ/o.zoom)*.5;let S=r.canonical.toString();r.overscaledZ!==r.canonical.z&&(S+=" => ".concat(r.overscaledZ)),S+=" ".concat(b,"kb"),function(t,e){t.initDebugOverlayCanvas();const n=t.debugOverlayCanvas,r=t.context.gl,i=t.debugOverlayCanvas.getContext("2d");i.clearRect(0,0,n.width,n.height),i.shadowColor="white",i.shadowBlur=2,i.lineWidth=1.5,i.strokeStyle="white",i.textBaseline="top",i.font="bold 36px Open Sans, sans-serif",i.fillText(e,5,5),i.strokeText(e,5,5),t.debugOverlayTexture.update(n),t.debugOverlayTexture.bind(r.LINEAR,r.CLAMP_TO_EDGE)}(e,S);const E=h._tileDebugTextBuffer||e.debugBuffer,T=h._tileDebugTextIndexBuffer||e.quadTriangleIndexBuffer,M=h._tileDebugTextSegments||e.debugSegments;u.draw(i,a.TRIANGLES,d,f,t.ColorMode.alphaBlended,t.CullFaceMode.disabled,qn(c,t.Color.transparent,w),m,E,T,M,null,null,null,[h._globeTileDebugTextBuffer])}function Tr(t,e,n,r){Ar(t,0,e+n/2,t.transform.width,n,r)}function Mr(t,e,n,r){Ar(t,e-n/2,0,n,t.transform.height,r)}function Ar(e,n,r,i,o,a){const s=e.context,l=s.gl;l.enable(l.SCISSOR_TEST),l.scissor(n*t.exported.devicePixelRatio,r*t.exported.devicePixelRatio,i*t.exported.devicePixelRatio,o*t.exported.devicePixelRatio),s.clear({color:a}),l.disable(l.SCISSOR_TEST)}const Cr=t.createLayout([{name:"a_pos_3f",components:3,type:"Float32"}]),{members:Pr}=Cr;function kr(t,e,n,r){t.emplaceBack(e,n,r)}class Ir{constructor(e){this.vertexArray=new t.StructArrayLayout3f12,this.indices=new t.StructArrayLayout3ui6,kr(this.vertexArray,-1,-1,1),kr(this.vertexArray,1,-1,1),kr(this.vertexArray,-1,1,1),kr(this.vertexArray,1,1,1),kr(this.vertexArray,-1,-1,-1),kr(this.vertexArray,1,-1,-1),kr(this.vertexArray,-1,1,-1),kr(this.vertexArray,1,1,-1),this.indices.emplaceBack(5,1,3),this.indices.emplaceBack(3,7,5),this.indices.emplaceBack(6,2,0),this.indices.emplaceBack(0,4,6),this.indices.emplaceBack(2,6,7),this.indices.emplaceBack(7,3,2),this.indices.emplaceBack(5,4,0),this.indices.emplaceBack(0,1,5),this.indices.emplaceBack(0,2,3),this.indices.emplaceBack(3,1,0),this.indices.emplaceBack(7,6,4),this.indices.emplaceBack(4,5,7),this.vertexBuffer=e.createVertexBuffer(this.vertexArray,Pr),this.indexBuffer=e.createIndexBuffer(this.indices),this.segment=t.SegmentVector.simpleSegment(0,0,36,12)}}function Or(e,n,r,i,o,a){const s=e.gl,l=n.paint.get("sky-atmosphere-color"),c=n.paint.get("sky-atmosphere-halo-color"),u=n.paint.get("sky-atmosphere-sun-intensity"),h=((t,e,n,r,i)=>({u_matrix_3f:t,u_sun_direction:e,u_sun_intensity:n,u_color_tint_r:[r.r,r.g,r.b,r.a],u_color_tint_m:[i.r,i.g,i.b,i.a],u_luminance:5e-5}))(t.fromMat4(t.create$1(),i),o,u,l,c);s.framebufferTexture2D(s.FRAMEBUFFER,s.COLOR_ATTACHMENT0,s.TEXTURE_CUBE_MAP_POSITIVE_X+a,n.skyboxTexture,0),r.draw(e,s.TRIANGLES,t.DepthMode.disabled,t.StencilMode.disabled,t.ColorMode.unblended,t.CullFaceMode.frontCW,h,"skyboxCapture",n.skyboxGeometry.vertexBuffer,n.skyboxGeometry.indexBuffer,n.skyboxGeometry.segment)}const Lr=t.createLayout([{type:"Float32",name:"a_pos",components:3},{type:"Float32",name:"a_uv",components:2}]);class jr{constructor(e){const n=new t.StructArrayLayout5f20;n.emplaceBack(-1,1,1,0,0),n.emplaceBack(1,1,1,1,0),n.emplaceBack(1,-1,1,1,1),n.emplaceBack(-1,-1,1,0,1);const r=new t.StructArrayLayout3ui6;r.emplaceBack(0,1,2),r.emplaceBack(2,3,0),this.vertexBuffer=e.createVertexBuffer(n,Lr.members),this.indexBuffer=e.createIndexBuffer(r),this.segments=t.SegmentVector.simpleSegment(0,0,4,2)}destroy(){this.vertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy()}}const zr={symbol:function(e,n,r,i,o){if("translucent"!==e.renderPass)return;const a=t.StencilMode.disabled,s=e.colorModeForRenderPass();r.layout.get("text-variable-anchor")&&function(e,n,r,i,o,a,s){const l=n.transform,c="map"===o,u="map"===a;for(const h of e){const e=i.getTile(h),n=e.getBucket(r);if(!n||!n.text||!n.text.segments.get().length)continue;const o=t.evaluateSizeForZoom(n.textSizeData,l.zoom),a=_e(h,n.getProjection(),l),d=l.calculatePixelsToTileUnitsMatrix(e),f=te(a,e.tileID.canonical,u,c,l,n.getProjection(),d),p="none"!==r.layout.get("icon-text-fit")&&n.hasIconData();if(o){const r=Math.pow(2,l.zoom-e.tileID.overscaledZ);dr(n,c,u,s,t.symbolSize,l,f,h,r,o,p)}}}(i,e,r,n,r.layout.get("text-rotation-alignment"),r.layout.get("text-pitch-alignment"),o),0!==r.paint.get("icon-opacity").constantOr(1)&&pr(e,n,r,i,!1,r.paint.get("icon-translate"),r.paint.get("icon-translate-anchor"),r.layout.get("icon-rotation-alignment"),r.layout.get("icon-pitch-alignment"),r.layout.get("icon-keep-upright"),a,s),0!==r.paint.get("text-opacity").constantOr(1)&&pr(e,n,r,i,!0,r.paint.get("text-translate"),r.paint.get("text-translate-anchor"),r.layout.get("text-rotation-alignment"),r.layout.get("text-pitch-alignment"),r.layout.get("text-keep-upright"),a,s),n.map.showCollisionBoxes&&(cr(e,n,r,i,r.paint.get("text-translate"),r.paint.get("text-translate-anchor"),!0),cr(e,n,r,i,r.paint.get("icon-translate"),r.paint.get("icon-translate-anchor"),!1))},circle:function(e,n,r,i){if("translucent"!==e.renderPass)return;const o=r.paint.get("circle-opacity"),a=r.paint.get("circle-stroke-width"),s=r.paint.get("circle-stroke-opacity"),l=void 0!==r.layout.get("circle-sort-key").constantOr(1);if(0===o.constantOr(1)&&(0===a.constantOr(1)||0===s.constantOr(1)))return;const c=e.context,u=c.gl,h=e.transform,d=e.depthModeForSublayer(0,t.DepthMode.ReadOnly),f=t.StencilMode.disabled,p=e.colorModeForRenderPass(),m="globe"===h.projection.name,g=[t.mercatorXfromLng(h.center.lng),t.mercatorYfromLat(h.center.lat)],y=[];for(let _=0;_<i.length;_++){const o=i[_],a=n.getTile(o),s=a.getBucket(r);if(!s||s.projection.name!==h.projection.name)continue;const c=s.programConfigurations.get(r.id),u=Wn(r);m&&u.push("PROJECTION_GLOBE_VIEW");const d=e.useProgram("circle",c,u),f=s.layoutVertexBuffer,p=s.globeExtVertexBuffer,v=s.indexBuffer,b=h.projection.createInversionMatrix(h,o.canonical),x={programConfiguration:c,program:d,layoutVertexBuffer:f,globeExtVertexBuffer:p,indexBuffer:v,uniformValues:Vn(e,o,a,b,g,r),tile:a};if(l){const e=s.segments.get();for(const n of e)y.push({segments:new t.SegmentVector([n]),sortKey:n.sortKey,state:x})}else y.push({segments:s.segments,sortKey:0,state:x})}l&&y.sort(((t,e)=>t.sortKey-e.sortKey));const v={useDepthForOcclusion:!m};for(const _ of y){const{programConfiguration:n,program:i,layoutVertexBuffer:o,globeExtVertexBuffer:a,indexBuffer:s,uniformValues:l,tile:m}=_.state,g=_.segments;e.terrain&&e.terrain.setupElevationDraw(m,i,v),e.prepareDrawProgram(c,i,m.tileID.toUnwrapped()),i.draw(c,u.TRIANGLES,d,f,p,t.CullFaceMode.disabled,l,r.id,o,s,g,r.paint,h.zoom,n,[a])}},heatmap:function(e,n,r,i){if(0!==r.paint.get("heatmap-opacity"))if("offscreen"===e.renderPass){const o=e.context,a=o.gl,s=t.StencilMode.disabled,l=new t.ColorMode([a.ONE,a.ONE],t.Color.transparent,[!0,!0,!0,!0]);!function(t,e,n,r){const i=t.gl,o=e.width*r,a=e.height*r;t.activeTexture.set(i.TEXTURE1),t.viewport.set([0,0,o,a]);let s=n.heatmapFbo;if(!s||s&&(s.width!==o||s.height!==a)){s&&s.destroy();const e=i.createTexture();i.bindTexture(i.TEXTURE_2D,e),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_WRAP_S,i.CLAMP_TO_EDGE),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_WRAP_T,i.CLAMP_TO_EDGE),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_MIN_FILTER,i.LINEAR),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_MAG_FILTER,i.LINEAR),s=n.heatmapFbo=t.createFramebuffer(o,a,!1),function(t,e,n,r,i,o){const a=t.gl;a.texImage2D(a.TEXTURE_2D,0,t.isWebGL2&&t.extRenderToTextureHalfFloat?a.RGBA16F:a.RGBA,i,o,0,a.RGBA,t.extRenderToTextureHalfFloat?t.isWebGL2?a.HALF_FLOAT:t.extTextureHalfFloat.HALF_FLOAT_OES:a.UNSIGNED_BYTE,null),r.colorAttachment.set(n)}(t,0,e,s,o,a)}else i.bindTexture(i.TEXTURE_2D,s.colorAttachment.get()),t.bindFramebuffer.set(s.framebuffer)}(o,e,r,"globe"===e.transform.projection.name?.5:.25),o.clear({color:t.Color.transparent});const c=e.transform,u="globe"===c.projection.name,h=u?["PROJECTION_GLOBE_VIEW"]:null,d=u?t.CullFaceMode.frontCCW:t.CullFaceMode.disabled,f=[t.mercatorXfromLng(c.center.lng),t.mercatorYfromLat(c.center.lat)];for(let p=0;p<i.length;p++){const m=i[p];if(n.hasRenderableParent(m))continue;const g=n.getTile(m),y=g.getBucket(r);if(!y||y.projection.name!==c.projection.name)continue;const v=y.programConfigurations.get(r.id),_=e.useProgram("heatmap",v,h),{zoom:b}=e.transform;e.terrain&&e.terrain.setupElevationDraw(g,_),e.prepareDrawProgram(o,_,m.toUnwrapped());const x=c.projection.createInversionMatrix(c,m.canonical);_.draw(o,a.TRIANGLES,t.DepthMode.disabled,s,l,d,Zn(e,m,g,x,f,b,r.paint.get("heatmap-intensity")),r.id,y.layoutVertexBuffer,y.indexBuffer,y.segments,r.paint,e.transform.zoom,v,u?[y.globeExtVertexBuffer]:null)}o.viewport.set([0,0,e.width,e.height])}else"translucent"===e.renderPass&&(e.context.setColorMode(e.colorModeForRenderPass()),function(e,n){const r=e.context,i=r.gl,o=n.heatmapFbo;if(!o)return;r.activeTexture.set(i.TEXTURE0),i.bindTexture(i.TEXTURE_2D,o.colorAttachment.get()),r.activeTexture.set(i.TEXTURE1);let a=n.colorRampTexture;a||(a=n.colorRampTexture=new t.Texture(r,n.colorRamp,i.RGBA)),a.bind(i.LINEAR,i.CLAMP_TO_EDGE),e.useProgram("heatmapTexture").draw(r,i.TRIANGLES,t.DepthMode.disabled,t.StencilMode.disabled,e.colorModeForRenderPass(),t.CullFaceMode.disabled,((t,e,n,r)=>({u_image:0,u_color_ramp:1,u_opacity:e.paint.get("heatmap-opacity")}))(0,n),n.id,e.viewportBuffer,e.quadTriangleIndexBuffer,e.viewportSegments,n.paint,e.transform.zoom)}(e,r))},line:function(e,n,r,i){if("translucent"!==e.renderPass)return;const o=r.paint.get("line-opacity"),a=r.paint.get("line-width");if(0===o.constantOr(1)||0===a.constantOr(1))return;const s=e.depthModeForSublayer(0,t.DepthMode.ReadOnly),l=e.colorModeForRenderPass(),c=e.terrain&&e.terrain.renderingToTexture?1:t.exported.devicePixelRatio,u=r.paint.get("line-dasharray"),h=u.constantOr(1),d=r.layout.get("line-cap"),f=r.paint.get("line-pattern"),p=f.constantOr(1),m=r.paint.get("line-gradient"),g=p?"linePattern":"line",y=e.context,v=y.gl,_=(t=>{const e=[];Jn(t)&&e.push("RENDER_LINE_DASH"),t.paint.get("line-gradient")&&e.push("RENDER_LINE_GRADIENT");const n=t.paint.get("line-trim-offset");0===n[0]&&0===n[1]||e.push("RENDER_LINE_TRIM_OFFSET");const r=t.paint.get("line-pattern").constantOr(1),i=1!==t.paint.get("line-opacity").constantOr(1);return!r&&i&&e.push("RENDER_LINE_ALPHA_DISCARD"),e})(r);let b=_.includes("RENDER_LINE_ALPHA_DISCARD");e.terrain&&e.terrain.clipOrMaskOverlapStencilType()&&(b=!1);for(const x of i){const i=n.getTile(x);if(p&&!i.patternsLoaded())continue;const o=i.getBucket(r);if(!o)continue;e.prepareDrawTile();const a=o.programConfigurations.get(r.id),w=e.useProgram(g,a,_),S=f.constantOr(null);if(S&&i.imageAtlas){const t=i.imageAtlas.patternPositions[S.toString()];t&&a.setConstantPatternPositions(t)}const E=u.constantOr(null),T=d.constantOr(null);if(!p&&E&&T&&i.lineAtlas){const t=i.lineAtlas.getDash(E,T);t&&a.setConstantPatternPositions(t)}let[M,A]=r.paint.get("line-trim-offset");if("round"===T||"square"===T){const t=1;M!==A&&(0===M&&(M-=t),1===A&&(A+=t))}const C=e.terrain?x.projMatrix:null,P=p?Yn(e,i,r,C,c):Xn(e,i,r,C,o.lineClipsArray.length,c,[M,A]);if(m){const i=o.gradients[r.id];let a=i.texture;if(r.gradientVersion!==i.version){let s=256;if(r.stepInterpolant){const r=n.getSource().maxzoom,i=x.canonical.z===r?Math.ceil(1<<e.transform.maxZoom-x.canonical.z):1;s=t.clamp(t.nextPowerOfTwo(o.maxLineLength/t.EXTENT*1024*i),256,y.maxTextureSize)}i.gradient=t.renderColorRamp({expression:r.gradientExpression(),evaluationKey:"lineProgress",resolution:s,image:i.gradient||void 0,clips:o.lineClipsArray}),i.texture?i.texture.update(i.gradient):i.texture=new t.Texture(y,i.gradient,v.RGBA),i.version=r.gradientVersion,a=i.texture}y.activeTexture.set(v.TEXTURE1),a.bind(r.stepInterpolant?v.NEAREST:v.LINEAR,v.CLAMP_TO_EDGE)}h&&(y.activeTexture.set(v.TEXTURE0),i.lineAtlasTexture.bind(v.LINEAR,v.REPEAT),a.updatePaintBuffers()),p&&(y.activeTexture.set(v.TEXTURE0),i.imageAtlasTexture.bind(v.LINEAR,v.CLAMP_TO_EDGE),a.updatePaintBuffers()),e.prepareDrawProgram(y,w,x.toUnwrapped());const k=n=>{w.draw(y,v.TRIANGLES,s,n,l,t.CullFaceMode.disabled,P,r.id,o.layoutVertexBuffer,o.indexBuffer,o.segments,r.paint,e.transform.zoom,a,[o.layoutVertexBuffer2])};if(b){const n=e.stencilModeForClipping(x).ref;0===n&&e.terrain&&y.clear({stencil:0});const r={func:v.EQUAL,mask:255};P.u_alpha_discard_threshold=.8,k(new t.StencilMode(r,n,255,v.KEEP,v.KEEP,v.INVERT)),P.u_alpha_discard_threshold=0,k(new t.StencilMode(r,n,255,v.KEEP,v.KEEP,v.KEEP))}else k(e.stencilModeForClipping(x))}b&&(e.resetStencilClippingMasks(),e.terrain&&y.clear({stencil:0}))},fill:function(e,n,r,i){const o=r.paint.get("fill-color"),a=r.paint.get("fill-opacity");if(0===a.constantOr(1))return;const s=e.colorModeForRenderPass(),l=r.paint.get("fill-pattern"),c=e.opaquePassEnabledForLayer()&&!l.constantOr(1)&&1===o.constantOr(t.Color.transparent).a&&1===a.constantOr(0)?"opaque":"translucent";if(e.renderPass===c){const o=e.depthModeForSublayer(1,"opaque"===e.renderPass?t.DepthMode.ReadWrite:t.DepthMode.ReadOnly);gr(e,n,r,i,o,s,!1)}if("translucent"===e.renderPass&&r.paint.get("fill-antialias")){const o=e.depthModeForSublayer(r.getPaintProperty("fill-outline-color")?2:0,t.DepthMode.ReadOnly);gr(e,n,r,i,o,s,!0)}},"fill-extrusion":function(e,n,r,i){const o=r.paint.get("fill-extrusion-opacity");if(0!==o&&"translucent"===e.renderPass){const a=new t.DepthMode(e.context.gl.LEQUAL,t.DepthMode.ReadWrite,e.depthRangeFor3D);if(1!==o||r.paint.get("fill-extrusion-pattern").constantOr(1))yr(e,n,r,i,a,t.StencilMode.disabled,t.ColorMode.disabled),yr(e,n,r,i,a,e.stencilModeFor3D(),e.colorModeForRenderPass()),e.resetStencilClippingMasks();else{const o=e.colorModeForRenderPass();yr(e,n,r,i,a,t.StencilMode.disabled,o)}}},hillshade:function(e,n,r,i){if("offscreen"!==e.renderPass&&"translucent"!==e.renderPass)return;const o=e.context,a=e.depthModeForSublayer(0,t.DepthMode.ReadOnly),s=e.colorModeForRenderPass(),l=e.terrain&&e.terrain.renderingToTexture,[c,u]="translucent"!==e.renderPass||l?[{},i]:e.stencilConfigForOverlap(i);for(const h of u){const i=n.getTile(h);if(i.needsHillshadePrepare&&"offscreen"===e.renderPass)yn(e,i,r,a,t.StencilMode.disabled,s);else if("translucent"===e.renderPass){const t=l&&e.terrain?e.terrain.stencilModeForRTTOverlap(h):c[h.overscaledZ];mn(e,h,i,r,a,t,s)}}o.viewport.set([0,0,e.width,e.height]),e.resetStencilClippingMasks()},raster:function(e,n,r,i,o,a){if("translucent"!==e.renderPass)return;if(0===r.paint.get("raster-opacity"))return;if(!i.length)return;const s=e.context,l=s.gl,c=n.getSource(),u=e.useProgram("raster"),h=e.colorModeForRenderPass(),d=e.terrain&&e.terrain.renderingToTexture,[f,p]=c instanceof Ct||d?[{},i]:e.stencilConfigForOverlap(i),m=p[p.length-1].overscaledZ,g=!e.options.moving;for(const y of p){const i=d?t.DepthMode.disabled:e.depthModeForSublayer(y.overscaledZ-m,1===r.paint.get("raster-opacity")?t.DepthMode.ReadWrite:t.DepthMode.ReadOnly,l.LESS),o=y.toUnwrapped(),p=n.getTile(y);if(d&&(!p||!p.hasData()))continue;const v=d?y.projMatrix:e.transform.calculateProjMatrix(o,g),_=e.terrain&&d?e.terrain.stencilModeForRTTOverlap(y):f[y.overscaledZ],b=a?0:r.paint.get("raster-fade-duration");p.registerFadeDuration(b);const x=n.findLoadedParent(y,0),w=An(p,x,n,e.transform,b);let S,E;e.terrain&&e.terrain.prepareDrawTile();const T="nearest"===r.paint.get("raster-resampling")?l.NEAREST:l.LINEAR;s.activeTexture.set(l.TEXTURE0),p.texture.bind(T,l.CLAMP_TO_EDGE),s.activeTexture.set(l.TEXTURE1),x?(x.texture.bind(T,l.CLAMP_TO_EDGE),S=Math.pow(2,x.tileID.overscaledZ-p.tileID.overscaledZ),E=[p.tileID.canonical.x*S%1,p.tileID.canonical.y*S%1]):p.texture.bind(T,l.CLAMP_TO_EDGE),p.texture.useMipmap&&s.extTextureFilterAnisotropic&&e.transform.pitch>20&&l.texParameterf(l.TEXTURE_2D,s.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,s.extTextureFilterAnisotropicMax);const M=Qn(v,E||[0,0],S||1,w,r,c instanceof Ct?c.perspectiveTransform:[0,0]);if(e.prepareDrawProgram(s,u,o),c instanceof Ct)c.boundsBuffer&&c.boundsSegments&&u.draw(s,l.TRIANGLES,i,t.StencilMode.disabled,h,t.CullFaceMode.disabled,M,r.id,c.boundsBuffer,e.quadTriangleIndexBuffer,c.boundsSegments);else{const{tileBoundsBuffer:n,tileBoundsIndexBuffer:o,tileBoundsSegments:a}=e.getTileBoundsBuffers(p);u.draw(s,l.TRIANGLES,i,_,h,t.CullFaceMode.disabled,M,r.id,n,o,a)}}e.resetStencilClippingMasks()},background:function(e,n,r,i){const o=r.paint.get("background-color"),a=r.paint.get("background-opacity");if(0===a)return;const s=e.context,l=s.gl,c=e.transform,u=c.tileSize,h=r.paint.get("background-pattern");if(e.isPatternMissing(h))return;const d=!h&&1===o.a&&1===a&&e.opaquePassEnabledForLayer()?"opaque":"translucent";if(e.renderPass!==d)return;const f=t.StencilMode.disabled,p=e.depthModeForSublayer(0,"opaque"===d?t.DepthMode.ReadWrite:t.DepthMode.ReadOnly),m=e.colorModeForRenderPass(),g=e.useProgram(h?"backgroundPattern":"background");let y,v=i;v||(y=e.getBackgroundTiles(),v=Object.values(y).map((t=>t.tileID))),h&&(s.activeTexture.set(l.TEXTURE0),e.imageManager.bind(e.context));for(const _ of v){const d=_.toUnwrapped(),v=i?_.projMatrix:e.transform.calculateProjMatrix(d);e.prepareDrawTile();const b=n?n.getTile(_):y?y[_.key]:new t.Tile(_,u,c.zoom,e),x=h?ar(v,a,e,h,{tileID:_,tileSize:u}):or(v,a,o);e.prepareDrawProgram(s,g,d);const{tileBoundsBuffer:w,tileBoundsIndexBuffer:S,tileBoundsSegments:E}=e.getTileBoundsBuffers(b);g.draw(s,l.TRIANGLES,p,f,m,t.CullFaceMode.disabled,x,r.id,w,S,E)}},sky:function(e,n,r){const i=e.transform,o="mercator"===i.projection.name||"globe"===i.projection.name?1:t.smoothstep(7,8,i.zoom),a=r.paint.get("sky-opacity")*o;if(0===a)return;const s=e.context,l=r.paint.get("sky-type"),c=new t.DepthMode(s.gl.LEQUAL,t.DepthMode.ReadOnly,[0,1]),u=e.frameCounter/1e3%1;"atmosphere"===l?"offscreen"===e.renderPass?r.needsSkyboxCapture(e)&&(function(e,n,r,i){const o=e.context,a=o.gl;let s=n.skyboxFbo;if(!s){s=n.skyboxFbo=o.createFramebuffer(32,32,!1),n.skyboxGeometry=new Ir(o),n.skyboxTexture=o.gl.createTexture(),a.bindTexture(a.TEXTURE_CUBE_MAP,n.skyboxTexture),a.texParameteri(a.TEXTURE_CUBE_MAP,a.TEXTURE_WRAP_S,a.CLAMP_TO_EDGE),a.texParameteri(a.TEXTURE_CUBE_MAP,a.TEXTURE_WRAP_T,a.CLAMP_TO_EDGE),a.texParameteri(a.TEXTURE_CUBE_MAP,a.TEXTURE_MIN_FILTER,a.LINEAR),a.texParameteri(a.TEXTURE_CUBE_MAP,a.TEXTURE_MAG_FILTER,a.LINEAR);for(let t=0;t<6;++t)a.texImage2D(a.TEXTURE_CUBE_MAP_POSITIVE_X+t,0,a.RGBA,32,32,0,a.RGBA,a.UNSIGNED_BYTE,null)}o.bindFramebuffer.set(s.framebuffer),o.viewport.set([0,0,32,32]);const l=n.getCenter(e,!0),c=e.useProgram("skyboxCapture"),u=new Float64Array(16);t.identity(u),t.rotateY(u,u,.5*-Math.PI),Or(o,n,c,u,l,0),t.identity(u),t.rotateY(u,u,.5*Math.PI),Or(o,n,c,u,l,1),t.identity(u),t.rotateX(u,u,.5*-Math.PI),Or(o,n,c,u,l,2),t.identity(u),t.rotateX(u,u,.5*Math.PI),Or(o,n,c,u,l,3),t.identity(u),Or(o,n,c,u,l,4),t.identity(u),t.rotateY(u,u,Math.PI),Or(o,n,c,u,l,5),o.viewport.set([0,0,e.width,e.height])}(e,r),r.markSkyboxValid(e)):"sky"===e.renderPass&&function(e,n,r,i,o){const a=e.context,s=a.gl,l=e.transform,c=e.useProgram("skybox");a.activeTexture.set(s.TEXTURE0),s.bindTexture(s.TEXTURE_CUBE_MAP,n.skyboxTexture);const u=((t,e,n,r,i)=>({u_matrix:t,u_sun_direction:e,u_cubemap:0,u_opacity:r,u_temporal_offset:i}))(l.skyboxMatrix,n.getCenter(e,!1),0,i,o);e.prepareDrawProgram(a,c),c.draw(a,s.TRIANGLES,r,t.StencilMode.disabled,e.colorModeForRenderPass(),t.CullFaceMode.backCW,u,"skybox",n.skyboxGeometry.vertexBuffer,n.skyboxGeometry.indexBuffer,n.skyboxGeometry.segment)}(e,r,c,a,u):"gradient"===l&&"sky"===e.renderPass&&function(e,n,r,i,o){const a=e.context,s=a.gl,l=e.transform,c=e.useProgram("skyboxGradient");n.skyboxGeometry||(n.skyboxGeometry=new Ir(a)),a.activeTexture.set(s.TEXTURE0);let u=n.colorRampTexture;u||(u=n.colorRampTexture=new t.Texture(a,n.colorRamp,s.RGBA)),u.bind(s.LINEAR,s.CLAMP_TO_EDGE);const h=((e,n,r,i,o)=>({u_matrix:e,u_color_ramp:0,u_center_direction:n,u_radius:t.degToRad(r),u_opacity:i,u_temporal_offset:o}))(l.skyboxMatrix,n.getCenter(e,!1),n.paint.get("sky-gradient-radius"),i,o);e.prepareDrawProgram(a,c),c.draw(a,s.TRIANGLES,r,t.StencilMode.disabled,e.colorModeForRenderPass(),t.CullFaceMode.backCW,h,"skyboxGradient",n.skyboxGeometry.vertexBuffer,n.skyboxGeometry.indexBuffer,n.skyboxGeometry.segment)}(e,r,c,a,u)},debug:function(t,e,n){for(let r=0;r<n.length;r++)Er(t,e,n[r])},custom:function(e,n,r,i){const o=e.context,a=r.implementation;if(!e.transform.projection.unsupportedLayers||!e.transform.projection.unsupportedLayers.includes("custom")||e.terrain&&(e.terrain.renderingToTexture||"offscreen"===e.renderPass)&&r.isLayerDraped()){if("offscreen"===e.renderPass){const n=a.prerender;if(n){if(e.setCustomLayerDefaults(),o.setColorMode(e.colorModeForRenderPass()),"globe"===e.transform.projection.name){const r=e.transform.pointMerc;n.call(a,o.gl,e.transform.customLayerMatrix(),e.transform.getProjection(),e.transform.globeToMercatorMatrix(),t.globeToMercatorTransition(e.transform.zoom),[r.x,r.y],e.transform.pixelsPerMeterRatio)}else n.call(a,o.gl,e.transform.customLayerMatrix());o.setDirty(),e.setBaseState()}}else if("translucent"===e.renderPass){if(e.terrain&&e.terrain.renderingToTexture){const n=a.renderToTile;if(n){const r=i[0].canonical,s=new t.MercatorCoordinate(r.x+i[0].wrap*(1<<r.z),r.y,r.z);o.setDepthMode(t.DepthMode.disabled),o.setStencilMode(t.StencilMode.disabled),o.setColorMode(e.colorModeForRenderPass()),e.setCustomLayerDefaults(),n.call(a,o.gl,s),o.setDirty(),e.setBaseState()}return}e.setCustomLayerDefaults(),o.setColorMode(e.colorModeForRenderPass()),o.setStencilMode(t.StencilMode.disabled);const n="3d"===a.renderingMode?new t.DepthMode(e.context.gl.LEQUAL,t.DepthMode.ReadWrite,e.depthRangeFor3D):e.depthModeForSublayer(0,t.DepthMode.ReadOnly);if(o.setDepthMode(n),"globe"===e.transform.projection.name){const n=e.transform.pointMerc;a.render(o.gl,e.transform.customLayerMatrix(),e.transform.getProjection(),e.transform.globeToMercatorMatrix(),t.globeToMercatorTransition(e.transform.zoom),[n.x,n.y],e.transform.pixelsPerMeterRatio)}else a.render(o.gl,e.transform.customLayerMatrix());o.setDirty(),e.setBaseState(),o.bindFramebuffer.set(null)}}else t.warnOnce("Custom layers are not yet supported with this projection. Use mercator or globe to enable usage of custom layers.")}};class Rr{constructor(e,n){let r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];this.context=new Et(e,r),this.transform=n,this._tileTextures={},this.frameCopies=[],this.loadTimeStamps=[],this.setup(),this.numSublayers=t.SourceCache.maxUnderzooming+t.SourceCache.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.deferredRenderGpuTimeQueries=[],this.gpuTimers={},this.frameCounter=0,this._backgroundTiles={}}updateTerrain(t,e){const n=!!t&&!!t.terrain&&this.transform.projection.supportsTerrain;if(!(n||this._terrain&&this._terrain.enabled))return;this._terrain||(this._terrain=new In(this,t));const r=this._terrain;this.transform.elevation=n?r:null,r.update(t,this.transform,e)}_updateFog(t){const e=t.fog;if(!e||"globe"===this.transform.projection.name||e.getOpacity(this.transform.pitch)<1||e.properties.get("horizon-blend")<.03)return void(this.transform.fogCullDistSq=null);const[n,r]=e.getFovAdjustedRange(this.transform._fov);if(n>r)return void(this.transform.fogCullDistSq=null);const i=n+.78*(r-n);this.transform.fogCullDistSq=i*i}get terrain(){return this.transform._terrainEnabled()&&this._terrain&&this._terrain.enabled?this._terrain:null}resize(e,n){if(this.width=e*t.exported.devicePixelRatio,this.height=n*t.exported.devicePixelRatio,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(const t of this.style.order)this.style._layers[t].resize()}setup(){const e=this.context,n=new t.StructArrayLayout2i4;n.emplaceBack(0,0),n.emplaceBack(t.EXTENT,0),n.emplaceBack(0,t.EXTENT),n.emplaceBack(t.EXTENT,t.EXTENT),this.tileExtentBuffer=e.createVertexBuffer(n,t.posAttributes.members),this.tileExtentSegments=t.SegmentVector.simpleSegment(0,0,4,2);const r=new t.StructArrayLayout2i4;r.emplaceBack(0,0),r.emplaceBack(t.EXTENT,0),r.emplaceBack(0,t.EXTENT),r.emplaceBack(t.EXTENT,t.EXTENT),this.debugBuffer=e.createVertexBuffer(r,t.posAttributes.members),this.debugSegments=t.SegmentVector.simpleSegment(0,0,4,5);const i=new t.StructArrayLayout2i4;i.emplaceBack(-1,-1),i.emplaceBack(1,-1),i.emplaceBack(-1,1),i.emplaceBack(1,1),this.viewportBuffer=e.createVertexBuffer(i,t.posAttributes.members),this.viewportSegments=t.SegmentVector.simpleSegment(0,0,4,2);const o=new t.StructArrayLayout4i8;o.emplaceBack(0,0,0,0),o.emplaceBack(t.EXTENT,0,t.EXTENT,0),o.emplaceBack(0,t.EXTENT,0,t.EXTENT),o.emplaceBack(t.EXTENT,t.EXTENT,t.EXTENT,t.EXTENT),this.mercatorBoundsBuffer=e.createVertexBuffer(o,t.boundsAttributes.members),this.mercatorBoundsSegments=t.SegmentVector.simpleSegment(0,0,4,2);const a=new t.StructArrayLayout3ui6;a.emplaceBack(0,1,2),a.emplaceBack(2,1,3),this.quadTriangleIndexBuffer=e.createIndexBuffer(a);const s=new t.StructArrayLayout1ui2;for(const t of[0,1,3,2,0])s.emplaceBack(t);this.debugIndexBuffer=e.createIndexBuffer(s),this.emptyTexture=new t.Texture(e,new t.RGBAImage({width:1,height:1},Uint8Array.of(0,0,0,0)),e.gl.RGBA),this.identityMat=t.create();const l=this.context.gl;this.stencilClearMode=new t.StencilMode({func:l.ALWAYS,mask:0},0,255,l.ZERO,l.ZERO,l.ZERO),this.loadTimeStamps.push(t.window.performance.now()),this.atmosphereBuffer=new jr(this.context)}getMercatorTileBoundsBuffers(){return{tileBoundsBuffer:this.mercatorBoundsBuffer,tileBoundsIndexBuffer:this.quadTriangleIndexBuffer,tileBoundsSegments:this.mercatorBoundsSegments}}getTileBoundsBuffers(t){return t._makeTileBoundsBuffers(this.context,this.transform.projection),t._tileBoundsBuffer?{tileBoundsBuffer:t._tileBoundsBuffer,tileBoundsIndexBuffer:t._tileBoundsIndexBuffer,tileBoundsSegments:t._tileBoundsSegments}:this.getMercatorTileBoundsBuffers()}clearStencil(){const e=this.context,n=e.gl;this.nextStencilID=1,this.currentStencilSource=void 0,this._tileClippingMaskIDs={},this.useProgram("clippingMask").draw(e,n.TRIANGLES,t.DepthMode.disabled,this.stencilClearMode,t.ColorMode.disabled,t.CullFaceMode.disabled,Mn(this.identityMat),"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)}resetStencilClippingMasks(){this.terrain||(this.currentStencilSource=void 0,this._tileClippingMaskIDs={})}_renderTileClippingMasks(e,n,r){if(!n||this.currentStencilSource===n.id||!e.isTileClipped()||!r||0===r.length)return;if(this._tileClippingMaskIDs&&!this.terrain){let t=!1;for(const e of r)if(void 0===this._tileClippingMaskIDs[e.key]){t=!0;break}if(!t)return}this.currentStencilSource=n.id;const i=this.context,o=i.gl;this.nextStencilID+r.length>256&&this.clearStencil(),i.setColorMode(t.ColorMode.disabled),i.setDepthMode(t.DepthMode.disabled);const a=this.useProgram("clippingMask");this._tileClippingMaskIDs={};for(const s of r){const e=n.getTile(s),r=this._tileClippingMaskIDs[s.key]=this.nextStencilID++,{tileBoundsBuffer:l,tileBoundsIndexBuffer:c,tileBoundsSegments:u}=this.getTileBoundsBuffers(e);a.draw(i,o.TRIANGLES,t.DepthMode.disabled,new t.StencilMode({func:o.ALWAYS,mask:0},r,255,o.KEEP,o.KEEP,o.REPLACE),t.ColorMode.disabled,t.CullFaceMode.disabled,Mn(s.projMatrix),"$clipping",l,c,u)}}stencilModeFor3D(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();const e=this.nextStencilID++,n=this.context.gl;return new t.StencilMode({func:n.NOTEQUAL,mask:255},e,255,n.KEEP,n.KEEP,n.REPLACE)}stencilModeForClipping(e){if(this.terrain)return this.terrain.stencilModeForRTTOverlap(e);const n=this.context.gl;return new t.StencilMode({func:n.EQUAL,mask:255},this._tileClippingMaskIDs[e.key],0,n.KEEP,n.KEEP,n.REPLACE)}stencilConfigForOverlap(e){const n=this.context.gl,r=e.sort(((t,e)=>e.overscaledZ-t.overscaledZ)),i=r[r.length-1].overscaledZ,o=r[0].overscaledZ-i+1;if(o>1){this.currentStencilSource=void 0,this.nextStencilID+o>256&&this.clearStencil();const e={};for(let r=0;r<o;r++)e[r+i]=new t.StencilMode({func:n.GEQUAL,mask:255},r+this.nextStencilID,255,n.KEEP,n.KEEP,n.REPLACE);return this.nextStencilID+=o,[e,r]}return[{[i]:t.StencilMode.disabled},r]}colorModeForRenderPass(){const e=this.context.gl;if(this._showOverdrawInspector){const n=1/8;return new t.ColorMode([e.CONSTANT_COLOR,e.ONE],new t.Color(n,n,n,0),[!0,!0,!0,!0])}return"opaque"===this.renderPass?t.ColorMode.unblended:t.ColorMode.alphaBlended}depthModeForSublayer(e,n,r){if(!this.opaquePassEnabledForLayer())return t.DepthMode.disabled;const i=1-((1+this.currentLayer)*this.numSublayers+e)*this.depthEpsilon;return new t.DepthMode(r||this.context.gl.LEQUAL,n,[i,i])}opaquePassEnabledForLayer(){return this.currentLayer<this.opaquePassCutoff}render(e,n){this.style=e,this.options=n,this.imageManager=e.imageManager,this.glyphManager=e.glyphManager,this.symbolFadeChange=e.placement.symbolFadeChange(t.exported.now()),this.imageManager.beginFrame();const r=this.style.order,i=this.style._sourceCaches;for(const t in i){const e=i[t];e.used&&e.prepare(this.context)}const o={},a={},s={};for(const t in i){const e=i[t];o[t]=e.getVisibleCoordinates(),a[t]=o[t].slice().reverse(),s[t]=e.getVisibleCoordinates(!0).reverse()}this.opaquePassCutoff=1/0;for(let t=0;t<r.length;t++)if(this.style._layers[r[t]].is3D()){this.opaquePassCutoff=t;break}if(this.terrain&&(this.terrain.updateTileBinding(s),this.opaquePassCutoff=0),"globe"!==this.transform.projection.name||this.globeSharedBuffers||(this.globeSharedBuffers=new t.GlobeSharedBuffers(this.context)),!t.isMapAuthenticated(this.context.gl))return;this.renderPass="offscreen";for(const t of r){const n=this.style._layers[t],r=e._getLayerSourceCache(n);if(!n.hasOffscreenPass()||n.isHidden(this.transform.zoom))continue;const i=r?a[r.id]:void 0;("custom"===n.type||n.isSky()||i&&i.length)&&this.renderLayer(this,r,n,i)}this.depthRangeFor3D=[0,1-(e.order.length+2)*this.numSublayers*this.depthEpsilon];const l=this.terrain;if(l&&(this.style.hasSymbolLayers()||this.style.hasCircleLayers())&&l.drawDepth(),this.context.bindFramebuffer.set(null),this.context.viewport.set([0,0,this.width,this.height]),this.context.clear({color:n.showOverdrawInspector?t.Color.black:t.Color.transparent,depth:1}),this.clearStencil(),this._showOverdrawInspector=n.showOverdrawInspector,this.renderPass="opaque",!this.terrain)for(this.currentLayer=r.length-1;this.currentLayer>=0;this.currentLayer--){const t=this.style._layers[r[this.currentLayer]],n=e._getLayerSourceCache(t);if(t.isSky())continue;const i=n?a[n.id]:void 0;this._renderTileClippingMasks(t,n,i),this.renderLayer(this,n,t,i)}if(this.style.fog&&this.transform.projection.supportsFog&&function(e,n){const r=e.context,i=r.gl,o=e.transform,a=new t.DepthMode(i.LEQUAL,t.DepthMode.ReadOnly,[0,1]),s=e.useProgram("globeAtmosphere",null,"globe"===o.projection.name?["PROJECTION_GLOBE_VIEW","FOG"]:["FOG"]),l=t.globeToMercatorTransition(o.zoom),c=n.properties.get("color").toArray01(),u=n.properties.get("high-color").toArray01(),h=n.properties.get("space-color").toArray01PremultipliedAlpha(),d=t.identity$1([]);t.rotateY$1(d,d,-t.degToRad(o._center.lng)),t.rotateX$1(d,d,t.degToRad(o._center.lat)),t.rotateZ$1(d,d,o.angle),t.rotateX$1(d,d,-o._pitch);const f=t.fromQuat(new Float32Array(16),d),p=t.mapValue(n.properties.get("star-intensity"),0,1,0,.25),m=5e-4,g=t.mapValue(n.properties.get("horizon-blend"),0,1,m,.25),y=t.globeUseCustomAntiAliasing(e,r,o)&&g===m?o.worldSize/(2*Math.PI*1.025)-1:o.globeRadius,v=e.frameCounter/1e3%1,_=t.length(o.globeCenterInViewSpace),b=Math.sqrt(Math.pow(_,2)-Math.pow(y,2)),x=Math.acos(b/_),w=((e,n,r,i,o,a,s,l,c,u,h,d,f,p)=>({u_frustum_tl:e,u_frustum_tr:n,u_frustum_br:r,u_frustum_bl:i,u_horizon:o,u_transition:a,u_fadeout_range:s,u_color:l,u_high_color:c,u_space_color:u,u_star_intensity:h,u_star_size:5*t.exported.devicePixelRatio,u_star_density:0,u_temporal_offset:d,u_horizon_angle:f,u_rotation_matrix:p}))(o.frustumCorners.TL,o.frustumCorners.TR,o.frustumCorners.BR,o.frustumCorners.BL,o.frustumCorners.horizon,l,g,c,u,h,p,v,x,f);e.prepareDrawProgram(r,s);const S=e.atmosphereBuffer;S&&s.draw(r,i.TRIANGLES,a,t.StencilMode.disabled,t.ColorMode.alphaBlended,t.CullFaceMode.backCW,w,"skybox",S.vertexBuffer,S.indexBuffer,S.segments)}(this,this.style.fog),this.renderPass="sky",(t.globeToMercatorTransition(this.transform.zoom)>0||"globe"!==this.transform.projection.name)&&this.transform.isHorizonVisible())for(this.currentLayer=0;this.currentLayer<r.length;this.currentLayer++){const t=this.style._layers[r[this.currentLayer]],n=e._getLayerSourceCache(t);t.isSky()&&this.renderLayer(this,n,t,n?a[n.id]:void 0)}for(this.renderPass="translucent",this.currentLayer=0;this.currentLayer<r.length;){const t=this.style._layers[r[this.currentLayer]],n=e._getLayerSourceCache(t);if(t.isSky()){++this.currentLayer;continue}if(this.terrain&&this.style.isLayerDraped(t)){if(t.isHidden(this.transform.zoom)){++this.currentLayer;continue}this.currentLayer=this.terrain.renderBatch(this.currentLayer);continue}const i=n?("symbol"===t.type?s:a)[n.id]:void 0;this._renderTileClippingMasks(t,n,n?o[n.id]:void 0),this.renderLayer(this,n,t,i),++this.currentLayer}if(this.terrain&&this.terrain.postRender(),this.options.showTileBoundaries||this.options.showQueryGeometry||this.options.showTileAABBs){let n=null;t.values(this.style._layers).forEach((t=>{const r=e._getLayerSourceCache(t);r&&!t.isHidden(this.transform.zoom)&&(!n||n.getSource().maxzoom<r.getSource().maxzoom)&&(n=r)})),n&&this.options.showTileBoundaries&&zr.debug(this,n,n.getVisibleCoordinates())}this.options.showPadding&&function(t){const e=t.transform.padding;Tr(t,t.transform.height-(e.top||0),3,_r),Tr(t,e.bottom||0,3,br),Mr(t,e.left||0,3,xr),Mr(t,t.transform.width-(e.right||0),3,wr);const n=t.transform.centerPoint;!function(t,e,n,r){Ar(t,e-1,n-10,2,20,r),Ar(t,e-10,n-1,20,2,r)}(t,n.x,t.transform.height-n.y,Sr)}(this),this.context.setDefault(),this.frameCounter=(this.frameCounter+1)%Number.MAX_SAFE_INTEGER,this.tileLoaded&&this.options.speedIndexTiming&&(this.loadTimeStamps.push(t.window.performance.now()),this.saveCanvasCopy())}renderLayer(t,e,n,r){n.isHidden(this.transform.zoom)||("background"===n.type||"sky"===n.type||"custom"===n.type||r&&r.length)&&(this.id=n.id,this.gpuTimingStart(n),(!t.transform.projection.unsupportedLayers||!t.transform.projection.unsupportedLayers.includes(n.type)||t.terrain&&"custom"===n.type)&&zr[n.type](t,e,n,r,this.style.placement.variableOffsets,this.options.isInitialLoad),this.gpuTimingEnd())}gpuTimingStart(t){if(!this.options.gpuTiming)return;const e=this.context.extTimerQuery;let n=this.gpuTimers[t.id];n||(n=this.gpuTimers[t.id]={calls:0,cpuTime:0,query:e.createQueryEXT()}),n.calls++,e.beginQueryEXT(e.TIME_ELAPSED_EXT,n.query)}gpuTimingDeferredRenderStart(){if(this.options.gpuTimingDeferredRender){const t=this.context.extTimerQuery,e=t.createQueryEXT();this.deferredRenderGpuTimeQueries.push(e),t.beginQueryEXT(t.TIME_ELAPSED_EXT,e)}}gpuTimingDeferredRenderEnd(){if(!this.options.gpuTimingDeferredRender)return;const t=this.context.extTimerQuery;t.endQueryEXT(t.TIME_ELAPSED_EXT)}gpuTimingEnd(){if(!this.options.gpuTiming)return;const t=this.context.extTimerQuery;t.endQueryEXT(t.TIME_ELAPSED_EXT)}collectGpuTimers(){const t=this.gpuTimers;return this.gpuTimers={},t}collectDeferredRenderGpuQueries(){const t=this.deferredRenderGpuTimeQueries;return this.deferredRenderGpuTimeQueries=[],t}queryGpuTimers(t){const e={};for(const n in t){const r=t[n],i=this.context.extTimerQuery,o=i.getQueryObjectEXT(r.query,i.QUERY_RESULT_EXT)/1e6;i.deleteQueryEXT(r.query),e[n]=o}return e}queryGpuTimeDeferredRender(t){if(!this.options.gpuTimingDeferredRender)return 0;const e=this.context.extTimerQuery;let n=0;for(const r of t)n+=e.getQueryObjectEXT(r,e.QUERY_RESULT_EXT)/1e6,e.deleteQueryEXT(r);return n}translatePosMatrix(e,n,r,i,o){if(!r[0]&&!r[1])return e;const a=o?"map"===i?this.transform.angle:0:"viewport"===i?-this.transform.angle:0;if(a){const t=Math.sin(a),e=Math.cos(a);r=[r[0]*e-r[1]*t,r[0]*t+r[1]*e]}const s=[o?r[0]:k(n,r[0],this.transform.zoom),o?r[1]:k(n,r[1],this.transform.zoom),0],l=new Float32Array(16);return t.translate(l,e,s),l}saveTileTexture(t){const e=this._tileTextures[t.size[0]];e?e.push(t):this._tileTextures[t.size[0]]=[t]}getTileTexture(t){const e=this._tileTextures[t];return e&&e.length>0?e.pop():null}isPatternMissing(t){return null===t||void 0!==t&&!this.imageManager.getPattern(t.toString())}terrainRenderModeElevated(){return this.style&&!!this.style.getTerrain()&&!!this.terrain&&!this.terrain.renderingToTexture}currentGlobalDefines(){const t=this.terrain&&this.terrain.renderingToTexture,e=this.terrain&&0===this.terrain.exaggeration(),n=this.style&&this.style.fog,r=[];return this.terrainRenderModeElevated()&&r.push("TERRAIN"),"globe"===this.transform.projection.name&&r.push("GLOBE"),e&&r.push("ZERO_EXAGGERATION"),n&&!t&&0!==n.getOpacity(this.transform.pitch)&&r.push("FOG"),t&&r.push("RENDER_TO_TEXTURE"),this._showOverdrawInspector&&r.push("OVERDRAW_INSPECTOR"),r}useProgram(t,e,n){this.cache=this.cache||{};const r=n||[],i=this.currentGlobalDefines().concat(r),o=On.cacheKey(un[t],t,i,e);return this.cache[o]||(this.cache[o]=new On(this.context,t,un[t],e,sr[t],i)),this.cache[o]}setCustomLayerDefaults(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.frontFace.setDefault(),this.context.cullFaceSide.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()}setBaseState(){const t=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(t.FUNC_ADD)}initDebugOverlayCanvas(){null==this.debugOverlayCanvas&&(this.debugOverlayCanvas=t.window.document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512,this.debugOverlayTexture=new t.Texture(this.context,this.debugOverlayCanvas,this.context.gl.RGBA))}destroy(){this._terrain&&this._terrain.destroy(),this.globeSharedBuffers&&this.globeSharedBuffers.destroy(),this.emptyTexture.destroy(),this.debugOverlayTexture&&this.debugOverlayTexture.destroy(),this.atmosphereBuffer&&this.atmosphereBuffer.destroy()}prepareDrawTile(){this.terrain&&this.terrain.prepareDrawTile()}prepareDrawProgram(e,n,r){if(this.terrain&&this.terrain.renderingToTexture)return;const i=this.style.fog;if(i){const o=i.getOpacity(this.transform.pitch),a=((e,n,r,i,o,a,s,l,c,u,h)=>{const d=e.transform,f=n.properties.get("color").toArray01();f[3]=i;const p=e.frameCounter/1e3%1;return{u_fog_matrix:r?d.calculateFogTileMatrix(r):e.identityMat,u_fog_range:n.getFovAdjustedRange(d._fov),u_fog_color:f,u_fog_horizon_blend:n.properties.get("horizon-blend"),u_fog_temporal_offset:p,u_frustum_tl:o,u_frustum_tr:a,u_frustum_br:s,u_frustum_bl:l,u_globe_pos:c,u_globe_radius:u,u_viewport:h,u_globe_transition:t.globeToMercatorTransition(d.zoom),u_is_globe:+("globe"===d.projection.name)}})(this,i,r,o,this.transform.frustumCorners.TL,this.transform.frustumCorners.TR,this.transform.frustumCorners.BR,this.transform.frustumCorners.BL,this.transform.globeCenterInViewSpace,this.transform.globeRadius,[this.transform.width*t.exported.devicePixelRatio,this.transform.height*t.exported.devicePixelRatio]);n.setFogUniformValues(e,a)}}setTileLoadedFlag(t){this.tileLoaded=t}saveCanvasCopy(){const t=this.canvasCopy();t&&(this.frameCopies.push(t),this.tileLoaded=!1)}canvasCopy(){const t=this.context.gl,e=t.createTexture();return t.bindTexture(t.TEXTURE_2D,e),t.copyTexImage2D(t.TEXTURE_2D,0,t.RGBA,0,0,t.drawingBufferWidth,t.drawingBufferHeight,0),e}getCanvasCopiesAndTimestamps(){return{canvasCopies:this.frameCopies,timeStamps:this.loadTimeStamps}}averageElevationNeedsEasing(){if(!this.transform._elevation)return!1;const t=this.style&&this.style.fog;return!!t&&0!==t.getOpacity(this.transform.pitch)}getBackgroundTiles(){const e=this._backgroundTiles,n=this._backgroundTiles={},r=this.transform.coveringTiles({tileSize:512});for(const i of r)n[i.key]=e[i.key]||new t.Tile(i,512,this.transform.tileZoom,this);return n}clearBackgroundTiles(){this._backgroundTiles={}}}class Dr{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;if(isNaN(t)||t<0||isNaN(e)||e<0||isNaN(n)||n<0||isNaN(r)||r<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=t,this.bottom=e,this.left=n,this.right=r}interpolate(e,n,r){return null!=n.top&&null!=e.top&&(this.top=t.number(e.top,n.top,r)),null!=n.bottom&&null!=e.bottom&&(this.bottom=t.number(e.bottom,n.bottom,r)),null!=n.left&&null!=e.left&&(this.left=t.number(e.left,n.left,r)),null!=n.right&&null!=e.right&&(this.right=t.number(e.right,n.right,r)),this}getCenter(e,n){const r=t.clamp((this.left+e-this.right)/2,0,e),i=t.clamp((this.top+n-this.bottom)/2,0,n);return new t.Point(r,i)}equals(t){return this.top===t.top&&this.bottom===t.bottom&&this.left===t.left&&this.right===t.right}clone(){return new Dr(this.top,this.bottom,this.left,this.right)}toJSON(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}}}function Br(e,n){const r=t.getColumn(e,3);t.fromQuat(e,n),t.setColumn(e,3,r)}function Fr(e,n){const r=t.identity$1([]);return t.rotateZ$1(r,r,-n),t.rotateX$1(r,r,-e),r}function Nr(e,n){const r=[e[0],e[1],0],i=[n[0],n[1],0];if(t.length(r)>=1e-15){const e=t.normalize([],r);t.scale$2(i,e,t.dot(i,e)),n[0]=i[0],n[1]=i[1]}const o=t.cross([],n,e);if(t.len(o)<1e-15)return null;const a=Math.atan2(-o[1],o[0]);return Fr(Math.atan2(Math.sqrt(e[0]*e[0]+e[1]*e[1]),-e[2]),a)}class Ur{constructor(t,e){this.position=t,this.orientation=e}get position(){return this._position}set position(e){if(e){const n=e instanceof t.MercatorCoordinate?e:new t.MercatorCoordinate(e[0],e[1],e[2]);this._renderWorldCopies&&(n.x=t.wrap(n.x,0,1)),this._position=n}else this._position=null}lookAtPoint(e,n){if(this.orientation=null,!this.position)return;const r=this.position,i=this._elevation?this._elevation.getAtPointOrZero(t.MercatorCoordinate.fromLngLat(e)):0,o=t.MercatorCoordinate.fromLngLat(e,i),a=[o.x-r.x,o.y-r.y,o.z-r.z];n||(n=[0,0,1]),n[2]=Math.abs(n[2]),this.orientation=Nr(a,n)}setPitchBearing(e,n){this.orientation=Fr(t.degToRad(e),t.degToRad(-n))}}class Vr{constructor(e,n){this._transform=t.identity([]),this.orientation=n,this.position=e}get mercatorPosition(){const e=this.position;return new t.MercatorCoordinate(e[0],e[1],e[2])}get position(){const e=t.getColumn(this._transform,3);return[e[0],e[1],e[2]]}set position(e){var n;e&&t.setColumn(this._transform,3,[(n=e)[0],n[1],n[2],1])}get orientation(){return this._orientation}set orientation(e){this._orientation=e||t.identity$1([]),e&&Br(this._transform,this._orientation)}getPitchBearing(){const t=this.forward(),e=this.right();return{bearing:Math.atan2(-e[1],e[0]),pitch:Math.atan2(Math.sqrt(t[0]*t[0]+t[1]*t[1]),-t[2])}}setPitchBearing(t,e){this._orientation=Fr(t,e),Br(this._transform,this._orientation)}forward(){const e=t.getColumn(this._transform,2);return[-e[0],-e[1],-e[2]]}up(){const e=t.getColumn(this._transform,1);return[-e[0],-e[1],-e[2]]}right(){const e=t.getColumn(this._transform,0);return[e[0],e[1],e[2]]}getCameraToWorld(e,n){const r=new Float64Array(16);return t.invert(r,this.getWorldToCamera(e,n)),r}getWorldToCameraPosition(e,n,r){const i=this.position;t.scale$2(i,i,-e);const o=new Float64Array(16);return t.fromScaling(o,[r,r,r]),t.translate(o,o,i),o[10]*=n,o}getWorldToCamera(e,n){const r=new Float64Array(16),i=new Float64Array(4),o=this.position;return t.conjugate(i,this._orientation),t.scale$2(o,o,-e),t.fromQuat(r,i),t.translate(r,r,o),r[1]*=-1,r[5]*=-1,r[9]*=-1,r[13]*=-1,r[8]*=n,r[9]*=n,r[10]*=n,r[11]*=n,r}getCameraToClipPerspective(e,n,r,i){const o=new Float64Array(16);return t.perspective(o,e,n,r,i),o}getDistanceToElevation(e){let n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const r=0===e?0:t.mercatorZfromAltitude(e,n?t.latFromMercatorY(this.position[1]):this.position[1]),i=this.forward();return(r-this.position[2])/i[2]}clone(){return new Vr([...this.position],[...this.orientation])}}function Wr(e,n){const r=qr(e.projection,e.zoom,e.width,e.height),i=function(e,n,r,i,o){const a=new t.LngLat(r.lng-180*Hr,r.lat),s=new t.LngLat(r.lng+180*Hr,r.lat),l=e.project(a.lng,a.lat),c=e.project(s.lng,s.lat),u=-Math.atan2(c.y-l.y,c.x-l.x),h=t.MercatorCoordinate.fromLngLat(r);h.y=t.clamp(h.y,-1+Hr,1-Hr);const d=h.toLngLat(),f=e.project(d.lng,d.lat),p=t.MercatorCoordinate.fromLngLat(d);p.x+=Hr;const m=p.toLngLat(),g=e.project(m.lng,m.lat),y=Xr(g.x-f.x,g.y-f.y,u),v=t.MercatorCoordinate.fromLngLat(d);v.y+=Hr;const _=v.toLngLat(),b=e.project(_.lng,_.lat),x=Xr(b.x-f.x,b.y-f.y,u),w=Math.abs(y.x)/Math.abs(x.y),S=t.identity([]);t.rotateZ(S,S,-u*(1-(o?0:i)));const E=t.identity([]);return t.scale(E,E,[1,1-(1-w)*i,1]),E[4]=-x.x/x.y*i,t.rotateZ(E,E,u),t.multiply(E,S,E),E}(e.projection,0,e.center,r,n),o=Gr(e);return t.scale(i,i,[o,o,1]),i}function Gr(e){const n=e.projection,r=qr(e.projection,e.zoom,e.width,e.height),i=Zr(n,e.center),o=Zr(n,t.LngLat.convert(n.center));return Math.pow(2,i*r+(1-r)*o)}function qr(e,n,r,i){let o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1/0;const a=e.range;if(!a)return 0;const s=Math.min(o,Math.max(r,i)),l=Math.log(s/1024)/Math.LN2;return t.smoothstep(a[0]+l,a[1]+l,n)}const Hr=1/4e4;function Zr(e,n){const r=t.clamp(n.lat,-t.MAX_MERCATOR_LATITUDE,t.MAX_MERCATOR_LATITUDE),i=new t.LngLat(n.lng-180*Hr,r),o=new t.LngLat(n.lng+180*Hr,r),a=e.project(i.lng,r),s=e.project(o.lng,r),l=t.MercatorCoordinate.fromLngLat(i),c=t.MercatorCoordinate.fromLngLat(o),u=s.x-a.x,h=s.y-a.y,d=c.x-l.x,f=c.y-l.y,p=Math.sqrt((d*d+f*f)/(u*u+h*h));return Math.log(p)/Math.LN2}function Xr(t,e,n){const r=Math.cos(n),i=Math.sin(n);return{x:t*r-e*i,y:t*i+e*r}}class Yr{constructor(e,n,r,i,o,a,s){this.tileSize=512,this._renderWorldCopies=void 0===o||o,this._minZoom=e||0,this._maxZoom=n||22,this._minPitch=null==r?0:r,this._maxPitch=null==i?60:i,this.setProjection(a),this.setMaxBounds(s),this.width=0,this.height=0,this._center=new t.LngLat(0,0),this.zoom=0,this.angle=0,this._fov=.6435011087932844,this._pitch=0,this._nearZ=0,this._farZ=0,this._unmodified=!0,this._edgeInsets=new Dr,this._projMatrixCache={},this._alignedProjMatrixCache={},this._fogTileMatrixCache={},this._distanceTileDataCache={},this._camera=new Vr,this._centerAltitude=0,this._averageElevation=0,this.cameraElevationReference="ground",this._pixelsPerMercatorPixel=1,this.globeRadius=0,this.globeCenterInViewSpace=[0,0,0],this._horizonShift=.1}clone(){const t=new Yr(this._minZoom,this._maxZoom,this._minPitch,this.maxPitch,this._renderWorldCopies,this.getProjection());return t._elevation=this._elevation,t._centerAltitude=this._centerAltitude,t._centerAltitudeValidForExaggeration=this._centerAltitudeValidForExaggeration,t.tileSize=this.tileSize,t.mercatorFromTransition=this.mercatorFromTransition,t.width=this.width,t.height=this.height,t.cameraElevationReference=this.cameraElevationReference,t._center=this._center,t._setZoom(this.zoom),t._seaLevelZoom=this._seaLevelZoom,t.angle=this.angle,t._fov=this._fov,t._pitch=this._pitch,t._nearZ=this._nearZ,t._farZ=this._farZ,t._averageElevation=this._averageElevation,t._unmodified=this._unmodified,t._edgeInsets=this._edgeInsets.clone(),t._camera=this._camera.clone(),t._calcMatrices(),t.freezeTileCoverage=this.freezeTileCoverage,t.frustumCorners=this.frustumCorners,t}get elevation(){return this._elevation}set elevation(t){this._elevation!==t&&(this._elevation=t,this._updateCameraOnTerrain(),this._calcMatrices())}updateElevation(t){let e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const n=this._elevation&&this._elevation.exaggeration()!==this._centerAltitudeValidForExaggeration;(null==this._seaLevelZoom||n)&&this._updateCameraOnTerrain(),(t||n)&&this._constrainCamera(e),this._calcMatrices()}getProjection(){return t.pick(this.projection,["name","center","parallels"])}setProjection(n){this.projectionOptions=n||{name:"mercator"};const r=this.projection?this.getProjection():void 0;this.projection=t.getProjection(this.projectionOptions);const i=!e(r,this.getProjection());return i&&this._calcMatrices(),this.mercatorFromTransition=!1,i}setMercatorFromTransition(){const e=this.projection.name;this.mercatorFromTransition=!0,this.projectionOptions={name:"mercator"},this.projection=t.getProjection({name:"mercator"});const n=e!==this.projection.name;return n&&this._calcMatrices(),n}get minZoom(){return this._minZoom}set minZoom(t){this._minZoom!==t&&(this._minZoom=t,this.zoom=Math.max(this.zoom,t))}get maxZoom(){return this._maxZoom}set maxZoom(t){this._maxZoom!==t&&(this._maxZoom=t,this.zoom=Math.min(this.zoom,t))}get minPitch(){return this._minPitch}set minPitch(t){this._minPitch!==t&&(this._minPitch=t,this.pitch=Math.max(this.pitch,t))}get maxPitch(){return this._maxPitch}set maxPitch(t){this._maxPitch!==t&&(this._maxPitch=t,this.pitch=Math.min(this.pitch,t))}get renderWorldCopies(){return this._renderWorldCopies&&!0===this.projection.supportsWorldCopies}set renderWorldCopies(t){void 0===t?t=!0:null===t&&(t=!1),this._renderWorldCopies=t}get worldSize(){return this.tileSize*this.scale}get cameraWorldSizeForFog(){const t=Math.max(this._camera.getDistanceToElevation(this._averageElevation),Number.EPSILON);return this._worldSizeFromZoom(this._zoomFromMercatorZ(t))}get cameraWorldSize(){const t=Math.max(this._camera.getDistanceToElevation(this._averageElevation,!0),Number.EPSILON);return this._worldSizeFromZoom(this._zoomFromMercatorZ(t))}get pixelsPerMeter(){return this.projection.pixelsPerMeter(this.center.lat,this.worldSize)}get cameraPixelsPerMeter(){return t.mercatorZfromAltitude(this.center.lat,this.cameraWorldSizeForFog)}get centerOffset(){return this.centerPoint._sub(this.size._div(2))}get size(){return new t.Point(this.width,this.height)}get bearing(){return t.wrap(this.rotation,-180,180)}set bearing(t){this.rotation=t}get rotation(){return-this.angle/Math.PI*180}set rotation(e){const n=-e*Math.PI/180;var r;this.angle!==n&&(this._unmodified=!1,this.angle=n,this._calcMatrices(),this.rotationMatrix=(r=new t.ARRAY_TYPE(4),t.ARRAY_TYPE!=Float32Array&&(r[1]=0,r[2]=0),r[0]=1,r[3]=1,r),function(t,e,n){var r=e[0],i=e[1],o=e[2],a=e[3],s=Math.sin(n),l=Math.cos(n);t[0]=r*l+o*s,t[1]=i*l+a*s,t[2]=r*-s+o*l,t[3]=i*-s+a*l}(this.rotationMatrix,this.rotationMatrix,this.angle))}get pitch(){return this._pitch/Math.PI*180}set pitch(e){const n=t.clamp(e,this.minPitch,this.maxPitch)/180*Math.PI;this._pitch!==n&&(this._unmodified=!1,this._pitch=n,this._calcMatrices())}get aspect(){return this.width/this.height}get fov(){return this._fov/Math.PI*180}get fovX(){return this._fov}get fovY(){const t=1/Math.tan(.5*this.fovX);return 2*Math.atan(1/this.aspect/t)}set fov(e){e=Math.max(.01,Math.min(60,e)),this._fov!==e&&(this._unmodified=!1,this._fov=t.degToRad(e),this._calcMatrices())}get averageElevation(){return this._averageElevation}set averageElevation(t){this._averageElevation=t,this._calcFogMatrices(),this._distanceTileDataCache={}}get zoom(){return this._zoom}set zoom(t){const e=Math.min(Math.max(t,this.minZoom),this.maxZoom);this._zoom!==e&&(this._unmodified=!1,this._setZoom(e),this._updateSeaLevelZoom(),this._constrain(),this._calcMatrices())}_setZoom(t){this._zoom=t,this.scale=this.zoomScale(t),this.tileZoom=Math.floor(t),this.zoomFraction=t-this.tileZoom}_updateCameraOnTerrain(){if(!this._elevation||!this._elevation.isDataAvailableAtPoint(this.locationCoordinate(this.center)))return this._centerAltitude=0,this._seaLevelZoom=null,void(this._centerAltitudeValidForExaggeration=void 0);const t=this._elevation;this._centerAltitude=t.getAtPointOrZero(this.locationCoordinate(this.center)),this._centerAltitudeValidForExaggeration=t.exaggeration(),this._updateSeaLevelZoom()}_updateSeaLevelZoom(){void 0!==this._centerAltitudeValidForExaggeration&&(this._seaLevelZoom=this._zoomFromMercatorZ((this.pixelsPerMeter*this._centerAltitude+this.cameraToCenterDistance)/this.worldSize))}sampleAverageElevation(){if(!this._elevation)return 0;const e=this._elevation,n=[[.5,.2],[.3,.5],[.5,.5],[.7,.5],[.5,.8]],r=this.horizonLineFromTop();let i=0,o=0;for(let a=0;a<n.length;a++){const s=new t.Point(n[a][0]*this.width,r+n[a][1]*(this.height-r)),l=e.pointCoordinate(s);if(!l)continue;const c=1/Math.hypot(l[0]-this._camera.position[0],l[1]-this._camera.position[1]);i+=l[3]*c,o+=c}return 0===o?NaN:i/o}get center(){return this._center}set center(t){t.lat===this._center.lat&&t.lng===this._center.lng||(this._unmodified=!1,this._center=t,this._terrainEnabled()&&("ground"===this.cameraElevationReference?this._updateCameraOnTerrain():this._updateZoomFromElevation()),this._constrain(),this._calcMatrices())}_updateZoomFromElevation(){if(null==this._seaLevelZoom||!this._elevation)return;const t=this._seaLevelZoom,e=this._elevation.getAtPointOrZero(this.locationCoordinate(this.center)),n=this.pixelsPerMeter/this.worldSize*e,r=this._mercatorZfromZoom(t),i=this._mercatorZfromZoom(this._maxZoom),o=Math.max(r-n,i);this._setZoom(this._zoomFromMercatorZ(o))}get padding(){return this._edgeInsets.toJSON()}set padding(t){this._edgeInsets.equals(t)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,t,1),this._calcMatrices())}computeZoomRelativeTo(e){const n=this.rayIntersectionCoordinate(this.pointRayIntersection(this.centerPoint,e.toAltitude()));let r;r=e.z<this._camera.position[2]?[n.x,n.y,n.z]:[e.x,e.y,e.z];const i=t.length(t.sub([],this._camera.position,r));return t.clamp(this._zoomFromMercatorZ(i),this._minZoom,this._maxZoom)}setFreeCameraOptions(e){if(!this.height)return;if(!e.position&&!e.orientation)return;this._updateCameraState();let n=!1;if(e.orientation&&!t.exactEquals(e.orientation,this._camera.orientation)&&(n=this._setCameraOrientation(e.orientation)),e.position){const r=[e.position.x,e.position.y,e.position.z];t.exactEquals$1(r,this._camera.position)||(this._setCameraPosition(r),n=!0)}n&&(this._updateStateFromCamera(),this.recenterOnTerrain())}getFreeCameraOptions(){this._updateCameraState();const e=this._camera.position,n=new Ur;return n.position=new t.MercatorCoordinate(e[0],e[1],e[2]),n.orientation=this._camera.orientation,n._elevation=this.elevation,n._renderWorldCopies=this.renderWorldCopies,n}_setCameraOrientation(e){if(!t.length$1(e))return!1;t.normalize$1(e,e);const n=t.transformQuat([],[0,0,-1],e),r=t.transformQuat([],[0,-1,0],e);if(r[2]<0)return!1;const i=Nr(n,r);return!!i&&(this._camera.orientation=i,!0)}_setCameraPosition(e){const n=this.zoomScale(this.minZoom)*this.tileSize,r=this.zoomScale(this.maxZoom)*this.tileSize,i=this.cameraToCenterDistance;e[2]=t.clamp(e[2],i/r,i/n),this._camera.position=e}get centerPoint(){return this._edgeInsets.getCenter(this.width,this.height)}get fovAboveCenter(){return this._fov*(.5+this.centerOffset.y/this.height)}isPaddingEqual(t){return this._edgeInsets.equals(t)}interpolatePadding(t,e,n){this._unmodified=!1,this._edgeInsets.interpolate(t,e,n),this._constrain(),this._calcMatrices()}coveringZoomLevel(t){const e=(t.roundZoom?Math.round:Math.floor)(this.zoom+this.scaleZoom(this.tileSize/t.tileSize));return Math.max(0,e)}getVisibleUnwrappedCoordinates(e){const n=[new t.UnwrappedTileID(0,e)];if(this.renderWorldCopies){const r=this.pointCoordinate(new t.Point(0,0)),i=this.pointCoordinate(new t.Point(this.width,0)),o=this.pointCoordinate(new t.Point(this.width,this.height)),a=this.pointCoordinate(new t.Point(0,this.height)),s=Math.floor(Math.min(r.x,i.x,o.x,a.x)),l=Math.floor(Math.max(r.x,i.x,o.x,a.x)),c=1;for(let u=s-c;u<=l+c;u++)0!==u&&n.push(new t.UnwrappedTileID(u,e))}return n}coveringTiles(e){let n=this.coveringZoomLevel(e);const r=n,i=this.elevation&&!e.isTerrainDEM,o="mercator"===this.projection.name;if(void 0!==e.minzoom&&n<e.minzoom)return[];void 0!==e.maxzoom&&n>e.maxzoom&&(n=e.maxzoom);const a=this.locationCoordinate(this.center),s=this.center.lat,l=1<<n,c=[l*a.x,l*a.y,0],u="globe"===this.projection.name,h=!u,d=t.Frustum.fromInvProjectionMatrix(this.invProjMatrix,this.worldSize,n,h),f=u?this._camera.mercatorPosition:this.pointCoordinate(this.getCameraPoint()),p=l*t.mercatorZfromAltitude(1,this.center.lat),m=this._camera.position[2]/t.mercatorZfromAltitude(1,this.center.lat),g=[l*f.x,l*f.y,m*(h?1:p)],y=this.cameraToCenterDistance/e.tileSize*(e.roundZoom?1:.502),v=this.pitch<=60&&this._edgeInsets.top<=this._edgeInsets.bottom&&!this._elevation&&!this.projection.isReprojectedInTileSpace?n:0,_=e.isTerrainDEM&&this._elevation?1e4*this._elevation.exaggeration():this._centerAltitude,b=e.isTerrainDEM?-_:this._elevation?this._elevation.getMinElevationBelowMSL():0,x=this.projection.isReprojectedInTileSpace?Gr(this):1,w=e=>{const n=1/4e4,r=new t.MercatorCoordinate(e.x+n,e.y,e.z),i=new t.MercatorCoordinate(e.x,e.y+n,e.z),o=e.toLngLat(),a=r.toLngLat(),s=i.toLngLat(),l=this.locationCoordinate(o),c=this.locationCoordinate(a),u=this.locationCoordinate(s),h=Math.hypot(c.x-l.x,c.y-l.y),d=Math.hypot(u.x-l.x,u.y-l.y);return Math.sqrt(h*d)*x/n},S=e=>{const n=_,r=b;return{aabb:t.tileAABB(this,l,0,0,0,e,r,n,this.projection),zoom:0,x:0,y:0,minZ:r,maxZ:n,wrap:e,fullyVisible:!1}},E=[];let T=[];const M=n,A=e.reparseOverscaled?r:n,C=t=>t*t,P=C((m-this._centerAltitude)*p),k=t=>{if(!this._elevation||!t.tileID||!o)return;const e=this._elevation.getMinMaxForTile(t.tileID),n=t.aabb;e?(n.min[2]=e.min,n.max[2]=e.max,n.center[2]=(n.min[2]+n.max[2])/2):(t.shouldSplit=I(t),t.shouldSplit||(n.min[2]=n.max[2]=n.center[2]=this._centerAltitude))},I=e=>{if(e.zoom<v)return!0;if(e.zoom===M)return!1;if(null!=e.shouldSplit)return e.shouldSplit;const n=e.aabb.distanceX(g),o=e.aabb.distanceY(g);let a=P,l=1;if(u){a=C(e.aabb.distanceZ(g));const n=Math.pow(2,e.zoom),r=t.latFromMercatorY((e.y+1)/n),i=t.latFromMercatorY(e.y/n),o=Math.min(Math.max(s,r),i),c=t.circumferenceAtLatitude(o)/t.circumferenceAtLatitude(s);if(l=o===s?1/Math.max(1,this._mercatorScaleRatio-.3):Math.min(1,c/this._mercatorScaleRatio),this.zoom<=t.GLOBE_ZOOM_THRESHOLD_MIN&&e.zoom===M-1&&c>=.9)return!0}else if(i&&(a=C(e.aabb.distanceZ(g)*p)),this.projection.isReprojectedInTileSpace&&r<=5){const n=Math.pow(2,e.zoom),r=w(new t.MercatorCoordinate((e.x+.5)/n,(e.y+.5)/n));l=r>.85?1:r}const c=n*n+o*o+a,h=C((1<<M-e.zoom)*y*l*((t,e)=>{if(e*C(.707)<t)return 1;const n=Math.sqrt(e/t);return n/(1.4144271570014144+(Math.pow(1.1,n-1.4144271570014144+1)-1)/(1.1-1)-1)})(Math.max(a,P),c));return c<h};if(this.renderWorldCopies)for(let t=1;t<=3;t++)E.push(S(-t)),E.push(S(t));for(E.push(S(0));E.length>0;){const r=E.pop(),a=r.x,s=r.y;let h=r.fullyVisible;if(!h){const t=r.aabb.intersects(d);if(0===t)continue;h=2===t}if(r.zoom!==M&&I(r))for(let e=0;e<4;e++){const n=(a<<1)+e%2,c=(s<<1)+(e>>1),d={aabb:o?r.aabb.quadrant(e):t.tileAABB(this,l,r.zoom+1,n,c,r.wrap,r.minZ,r.maxZ,this.projection),zoom:r.zoom+1,x:n,y:c,wrap:r.wrap,fullyVisible:h,tileID:void 0,shouldSplit:void 0,minZ:r.minZ,maxZ:r.maxZ};i&&!u&&(d.tileID=new t.OverscaledTileID(r.zoom+1===M?A:r.zoom+1,r.wrap,r.zoom+1,n,c),k(d)),E.push(d)}else{const i=r.zoom===M?A:r.zoom;if(e.minzoom&&e.minzoom>i)continue;const o=c[0]-(.5+a+(r.wrap<<r.zoom))*(1<<n-r.zoom),l=c[1]-.5-s,u=r.tileID?r.tileID:new t.OverscaledTileID(i,r.wrap,r.zoom,a,s);T.push({tileID:u,distanceSq:o*o+l*l})}}if(this.fogCullDistSq){const n=this.fogCullDistSq,r=this.horizonLineFromTop();T=T.filter((i=>{const o=[0,0,0,1],a=[t.EXTENT,t.EXTENT,0,1],s=this.calculateFogTileMatrix(i.tileID.toUnwrapped());t.transformMat4$1(o,o,s),t.transformMat4$1(a,a,s);const l=t.getAABBPointSquareDist(o,a);if(0===l)return!0;let c=!1;const u=this._elevation;if(u&&l>n&&0!==r){const n=this.calculateProjMatrix(i.tileID.toUnwrapped());let o;e.isTerrainDEM||(o=u.getMinMaxForTile(i.tileID)),o||(o={min:b,max:_});const a=t.furthestTileCorner(this.rotation),s=[a[0]*t.EXTENT,a[1]*t.EXTENT,o.max];t.transformMat4(s,s,n),c=(1-s[1])*this.height*.5<r}return l<n||c}))}return T.sort(((t,e)=>t.distanceSq-e.distanceSq)).map((t=>t.tileID))}resize(t,e){this.width=t,this.height=e,this.pixelsToGLUnits=[2/t,-2/e],this._constrain(),this._calcMatrices()}get unmodified(){return this._unmodified}zoomScale(t){return Math.pow(2,t)}scaleZoom(t){return Math.log(t)/Math.LN2}project(e){const n=t.clamp(e.lat,-t.MAX_MERCATOR_LATITUDE,t.MAX_MERCATOR_LATITUDE),r=this.projection.project(e.lng,n);return new t.Point(r.x*this.worldSize,r.y*this.worldSize)}unproject(t){return this.projection.unproject(t.x/this.worldSize,t.y/this.worldSize)}get point(){return this.project(this.center)}get pointMerc(){return this.point._div(this.worldSize)}get pixelsPerMeterRatio(){return this.pixelsPerMeter/t.mercatorZfromAltitude(1,this.center.lat)/this.worldSize}setLocationAtPoint(e,n){let r,i;const o=this.centerPoint;if("globe"===this.projection.name){const t=this.worldSize;r=(n.x-o.x)/t,i=(n.y-o.y)/t}else{const t=this.pointCoordinate(n),e=this.pointCoordinate(o);r=t.x-e.x,i=t.y-e.y}const a=this.locationCoordinate(e);this.setLocation(new t.MercatorCoordinate(a.x-r,a.y-i))}setLocation(t){this.center=this.coordinateLocation(t),this.projection.wrap&&(this.center=this.center.wrap())}locationPoint(t){return this.projection.locationPoint(this,t)}locationPoint3D(t){return this.projection.locationPoint(this,t,!0)}pointLocation(t){return this.coordinateLocation(this.pointCoordinate(t))}pointLocation3D(t){return this.coordinateLocation(this.pointCoordinate3D(t))}locationCoordinate(e,n){const r=n?t.mercatorZfromAltitude(n,e.lat):void 0,i=this.projection.project(e.lng,e.lat);return new t.MercatorCoordinate(i.x,i.y,r)}coordinateLocation(t){return this.projection.unproject(t.x,t.y)}pointRayIntersection(e,n){const r=null!=n?n:this._centerAltitude,i=[e.x,e.y,0,1],o=[e.x,e.y,1,1];t.transformMat4$1(i,i,this.pixelMatrixInverse),t.transformMat4$1(o,o,this.pixelMatrixInverse);const a=o[3];t.scale$1(i,i,1/i[3]),t.scale$1(o,o,1/a);const s=i[2],l=o[2];return{p0:i,p1:o,t:s===l?0:(r-s)/(l-s)}}screenPointToMercatorRay(e){const n=[e.x,e.y,0,1],r=[e.x,e.y,1,1];return t.transformMat4$1(n,n,this.pixelMatrixInverse),t.transformMat4$1(r,r,this.pixelMatrixInverse),t.scale$1(n,n,1/n[3]),t.scale$1(r,r,1/r[3]),n[2]=t.mercatorZfromAltitude(n[2],this._center.lat)*this.worldSize,r[2]=t.mercatorZfromAltitude(r[2],this._center.lat)*this.worldSize,t.scale$1(n,n,1/this.worldSize),t.scale$1(r,r,1/this.worldSize),new t.Ray([n[0],n[1],n[2]],t.normalize([],t.sub([],r,n)))}rayIntersectionCoordinate(e){const{p0:n,p1:r,t:i}=e,o=t.mercatorZfromAltitude(n[2],this._center.lat),a=t.mercatorZfromAltitude(r[2],this._center.lat);return new t.MercatorCoordinate(t.number(n[0],r[0],i)/this.worldSize,t.number(n[1],r[1],i)/this.worldSize,t.number(o,a,i))}pointCoordinate(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this._centerAltitude;return this.projection.pointCoordinate(this,t.x,t.y,e)}pointCoordinate3D(e){if(!this.elevation)return this.pointCoordinate(e);let n=this.projection.pointCoordinate3D(this,e.x,e.y);if(n)return new t.MercatorCoordinate(n[0],n[1],n[2]);let r=0,i=this.horizonLineFromTop();if(e.y>i)return this.pointCoordinate(e);const o=.02*i,a=e.clone();for(let s=0;s<10&&i-r>o;s++){a.y=t.number(r,i,.66);const e=this.projection.pointCoordinate3D(this,a.x,a.y);e?(i=a.y,n=e):r=a.y}return n?new t.MercatorCoordinate(n[0],n[1],n[2]):this.pointCoordinate(e)}isPointAboveHorizon(t){return this.projection.isPointAboveHorizon(this,t)}isPointOnSurface(e){if(e.y<0||e.y>this.height||e.x<0||e.x>this.width)return!1;if(this.elevation||this.zoom>=t.GLOBE_ZOOM_THRESHOLD_MAX)return!this.isPointAboveHorizon(e);const n=this.pointCoordinate(e);return n.y>=0&&n.y<=1}_coordinatePoint(e,n){const r=n&&this.elevation?this.elevation.getAtPointOrZero(e,this._centerAltitude):this._centerAltitude,i=[e.x*this.worldSize,e.y*this.worldSize,r+e.toAltitude(),1];return t.transformMat4$1(i,i,this.pixelMatrix),i[3]>0?new t.Point(i[0]/i[3],i[1]/i[3]):new t.Point(Number.MAX_VALUE,Number.MAX_VALUE)}_getBoundsNonRectangular(){const{top:e,left:n}=this._edgeInsets,r=this.height-this._edgeInsets.bottom,i=this.width-this._edgeInsets.right,o=this.pointLocation3D(new t.Point(n,e)),a=this.pointLocation3D(new t.Point(i,e)),s=this.pointLocation3D(new t.Point(i,r)),l=this.pointLocation3D(new t.Point(n,r));let c=Math.min(o.lng,a.lng,s.lng,l.lng),u=Math.max(o.lng,a.lng,s.lng,l.lng),h=Math.min(o.lat,a.lat,s.lat,l.lat),d=Math.max(o.lat,a.lat,s.lat,l.lat);const f=Math.pow(2,-this.zoom)/16*270,p="globe"===this.projection.name?1:4,m=(e,n,r,i,o)=>{const a=(e+r)/2,s=(n+i)/2,l=new t.Point(a,s),{lng:g,lat:y}=this.pointLocation3D(l),v=Math.max(0,c-g,h-y,g-u,y-d);c=Math.min(c,g),u=Math.max(u,g),h=Math.min(h,y),d=Math.max(d,y),(o<p||v>f)&&(m(e,n,a,s,o+1),m(a,s,r,i,o+1))};if(m(n,e,i,e,1),m(i,e,i,r,1),m(i,r,n,r,1),m(n,r,n,e,1),"globe"===this.projection.name){const[e,n]=t.polesInViewport(this);e?(d=90,u=180,c=-180):n&&(h=-90,u=180,c=-180)}return new t.LngLatBounds(new t.LngLat(c,h),new t.LngLat(u,d))}_getBoundsRectangular(e,n){const{top:r,left:i}=this._edgeInsets,o=this.height-this._edgeInsets.bottom,a=this.width-this._edgeInsets.right,s=new t.Point(i,r),l=new t.Point(a,r),c=new t.Point(a,o),u=new t.Point(i,o);let h=this.pointCoordinate(s,e),d=this.pointCoordinate(l,e);const f=this.pointCoordinate(c,n),p=this.pointCoordinate(u,n),m=(t,e)=>(e.y-t.y)/(e.x-t.x);return h.y>1&&d.y>=0?h=new t.MercatorCoordinate((1-p.y)/m(p,h)+p.x,1):h.y<0&&d.y<=1&&(h=new t.MercatorCoordinate(-p.y/m(p,h)+p.x,0)),d.y>1&&h.y>=0?d=new t.MercatorCoordinate((1-f.y)/m(f,d)+f.x,1):d.y<0&&h.y<=1&&(d=new t.MercatorCoordinate(-f.y/m(f,d)+f.x,0)),(new t.LngLatBounds).extend(this.coordinateLocation(h)).extend(this.coordinateLocation(d)).extend(this.coordinateLocation(p)).extend(this.coordinateLocation(f))}_getBoundsRectangularTerrain(){const t=this.elevation;if(!t.visibleDemTiles.length||t.isUsingMockSource())return this._getBoundsRectangular(0,0);const e=t.visibleDemTiles.reduce(((t,e)=>{if(e.dem){const n=e.dem.tree;t.min=Math.min(t.min,n.minimums[0]),t.max=Math.max(t.max,n.maximums[0])}return t}),{min:Number.MAX_VALUE,max:0});return this._getBoundsRectangular(e.min*t.exaggeration(),e.max*t.exaggeration())}getBounds(){return"mercator"===this.projection.name||"equirectangular"===this.projection.name?this._terrainEnabled()?this._getBoundsRectangularTerrain():this._getBoundsRectangular(0,0):this._getBoundsNonRectangular()}horizonLineFromTop(){let t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];const e=this.height/2/Math.tan(this._fov/2)/Math.tan(Math.max(this._pitch,.1))+this.centerOffset.y,n=this.height/2-e*(1-this._horizonShift);return t?Math.max(0,n):n}getMaxBounds(){return this.maxBounds}setMaxBounds(e){this.maxBounds=e,this.minLat=-t.MAX_MERCATOR_LATITUDE,this.maxLat=t.MAX_MERCATOR_LATITUDE,this.minLng=-180,this.maxLng=180,e&&(this.minLat=e.getSouth(),this.maxLat=e.getNorth(),this.minLng=e.getWest(),this.maxLng=e.getEast(),this.maxLng<this.minLng&&(this.maxLng+=360)),this.worldMinX=t.mercatorXfromLng(this.minLng)*this.tileSize,this.worldMaxX=t.mercatorXfromLng(this.maxLng)*this.tileSize,this.worldMinY=t.mercatorYfromLat(this.maxLat)*this.tileSize,this.worldMaxY=t.mercatorYfromLat(this.minLat)*this.tileSize,this._constrain()}calculatePosMatrix(t,e){return this.projection.createTileMatrix(this,e,t)}calculateDistanceTileData(e){const n=e.key,r=this._distanceTileDataCache;if(r[n])return r[n];const i=e.canonical,o=1/this.height,a=this.cameraWorldSize,s=a/this.zoomScale(i.z),l=(i.x+Math.pow(2,i.z)*e.wrap)*s,c=i.y*s,u=this.point;u.x*=a/this.worldSize,u.y*=a/this.worldSize;const h=this.angle,d=Math.sin(-h),f=-Math.cos(-h);return r[n]={bearing:[d,f],center:[(u.x-l)*o,(u.y-c)*o],scale:s/t.EXTENT*o},r[n]}calculateFogTileMatrix(e){const n=e.key,r=this._fogTileMatrixCache;if(r[n])return r[n];const i=this.projection.createTileMatrix(this,this.cameraWorldSizeForFog,e);return t.multiply(i,this.worldToFogMatrix,i),r[n]=new Float32Array(i),r[n]}calculateProjMatrix(e){let n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const r=e.key,i=n?this._alignedProjMatrixCache:this._projMatrixCache;if(i[r])return i[r];const o=this.calculatePosMatrix(e,this.worldSize);return t.multiply(o,this.projection.isReprojectedInTileSpace?this.mercatorMatrix:n?this.alignedProjMatrix:this.projMatrix,o),i[r]=new Float32Array(o),i[r]}calculatePixelsToTileUnitsMatrix(e){const n=e.tileID.key,r=this._pixelsToTileUnitsCache;if(r[n])return r[n];const i=function(e,n){const{scale:r}=e.tileTransform,i=r*t.EXTENT/(e.tileSize*Math.pow(2,n.zoom-e.tileID.overscaledZ+e.tileID.canonical.z));return o=new Float32Array(4),l=(a=n.inverseAdjustmentMatrix)[1],c=a[2],u=a[3],d=(s=[i,i])[1],o[0]=a[0]*(h=s[0]),o[1]=l*h,o[2]=c*d,o[3]=u*d,o;var o,a,s,l,c,u,h,d}(e,this);return r[n]=i,r[n]}customLayerMatrix(){return this.mercatorMatrix.slice()}globeToMercatorMatrix(){if("globe"===this.projection.name){const e=1/this.worldSize,n=t.fromScaling([],[e,e,e]);return t.multiply(n,n,this.globeMatrix),n}}recenterOnTerrain(){if(!this._elevation||"globe"===this.projection.name)return;const e=this._elevation;this._updateCameraState();const n=t.mercatorZfromAltitude(1,this._center.lat)*this.worldSize,r=this._computeCameraPosition(n),i=this._camera.forward(),o=t.mercatorZfromAltitude(1,this._center.lat);r[2]/=o,i[2]/=o,t.normalize(i,i);const a=e.raycast(r,i,e.exaggeration());if(a){const e=t.scaleAndAdd([],r,i,a),n=new t.MercatorCoordinate(e[0],e[1],t.mercatorZfromAltitude(e[2],t.latFromMercatorY(e[1]))),s=(n.z+t.length([n.x-r[0],n.y-r[1],n.z-r[2]*o]))*this._pixelsPerMercatorPixel;this._seaLevelZoom=this._zoomFromMercatorZ(s),this._centerAltitude=n.toAltitude(),this._center=this.coordinateLocation(n),this._updateZoomFromElevation(),this._constrain(),this._calcMatrices()}}_constrainCamera(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!this._elevation)return;const n=this._elevation,r=t.mercatorZfromAltitude(1,this._center.lat)*this.worldSize,i=this._computeCameraPosition(r),o=n.getAtPointOrZero(new t.MercatorCoordinate(...i)),a=this.pixelsPerMeter/this.worldSize*o,s=this._minimumHeightOverTerrain(),l=i[2]-a;if(l<=s)if(l<0||e){const e=this.locationCoordinate(this._center,this._centerAltitude),n=[i[0],i[1],e.z-i[2]],r=t.length(n);n[2]-=(s-l)/this._pixelsPerMercatorPixel;const o=t.length(n);if(0===o)return;t.scale$2(n,n,r/o*this._pixelsPerMercatorPixel),this._camera.position=[i[0],i[1],e.z*this._pixelsPerMercatorPixel-n[2]],this._updateStateFromCamera()}else this._isCameraConstrained=!0}_constrain(){if(!this.center||!this.width||!this.height||this._constraining)return;this._constraining=!0;const e="globe"===this.projection.name||this.mercatorFromTransition;if(this.projection.isReprojectedInTileSpace||e){const n=this.center;return n.lat=t.clamp(n.lat,this.minLat,this.maxLat),(this.maxBounds||!this.renderWorldCopies&&!e)&&(n.lng=t.clamp(n.lng,this.minLng,this.maxLng)),this.center=n,void(this._constraining=!1)}const n=this._unmodified,{x:r,y:i}=this.point;let o=0,a=r,s=i;const l=this.width/2,c=this.height/2,u=this.worldMinY*this.scale,h=this.worldMaxY*this.scale;if(i-c<u&&(s=u+c),i+c>h&&(s=h-c),h-u<this.height&&(o=Math.max(o,this.height/(h-u)),s=(h+u)/2),this.maxBounds||!this._renderWorldCopies||!this.projection.wrap){const t=this.worldMinX*this.scale,e=this.worldMaxX*this.scale,n=this.worldSize/2-(t+e)/2;a=(r+n+this.worldSize)%this.worldSize-n,a-l<t&&(a=t+l),a+l>e&&(a=e-l),e-t<this.width&&(o=Math.max(o,this.width/(e-t)),a=(e+t)/2)}a===r&&s===i||(this.center=this.unproject(new t.Point(a,s))),o&&(this.zoom+=this.scaleZoom(o)),this._constrainCamera(),this._unmodified=n,this._constraining=!1}_minZoomForBounds(){let t=Math.max(0,this.scaleZoom(this.height/(this.worldMaxY-this.worldMinY)));return this.maxBounds&&(t=Math.max(t,this.scaleZoom(this.width/(this.worldMaxX-this.worldMinX)))),t}_maxCameraBoundsDistance(){return this._mercatorZfromZoom(this._minZoomForBounds())}_calcMatrices(){if(!this.height)return;const e=this.centerOffset,n=this.pixelsPerMeter;"globe"===this.projection.name&&(this._mercatorScaleRatio=t.mercatorZfromAltitude(1,this.center.lat)/t.mercatorZfromAltitude(1,t.GLOBE_SCALE_MATCH_LATITUDE));const r=qr(this.projection,this.zoom,this.width,this.height,1024);this._pixelsPerMercatorPixel=this.projection.pixelSpaceConversion(this.center.lat,this.worldSize,r),this.cameraToCenterDistance=.5/Math.tan(.5*this._fov)*this.height*this._pixelsPerMercatorPixel,this._updateCameraState(),this._farZ=this.projection.farthestPixelDistance(this),this._nearZ=this.height/50;const i="meters"===this.projection.zAxisUnit?n:1,o=this._camera.getWorldToCamera(this.worldSize,i),a=this._camera.getCameraToClipPerspective(this._fov,this.width/this.height,this._nearZ,this._farZ);a[8]=2*-e.x/this.width,a[9]=2*e.y/this.height;let s=t.mul([],a,o);if(this.projection.isReprojectedInTileSpace){const e=this.locationCoordinate(this.center),n=t.identity([]);t.translate(n,n,[e.x*this.worldSize,e.y*this.worldSize,0]),t.multiply(n,n,Wr(this)),t.translate(n,n,[-e.x*this.worldSize,-e.y*this.worldSize,0]),t.multiply(s,s,n),this.inverseAdjustmentMatrix=function(t){const e=Wr(t,!0);return v([],[e[0],e[1],e[4],e[5]])}(this)}else this.inverseAdjustmentMatrix=[1,0,0,1];this.mercatorMatrix=t.scale([],s,[this.worldSize,this.worldSize,this.worldSize/i,1]),this.projMatrix=s,this.invProjMatrix=t.invert(new Float64Array(16),this.projMatrix);const l=t.invert([],a);this.frustumCorners=t.FrustumCorners.fromInvProjectionMatrix(l,this.horizonLineFromTop(),this.height);const c=new Float32Array(16);t.identity(c),t.scale(c,c,[1,-1,1]),t.rotateX(c,c,this._pitch),t.rotateZ(c,c,this.angle);const u=t.perspective(new Float32Array(16),this._fov,this.width/this.height,this._nearZ,this._farZ),h=(Math.PI/2-this._pitch)*(this.height/this._fov)*this._horizonShift;u[8]=2*-e.x/this.width,u[9]=2*(e.y+h)/this.height,this.skyboxMatrix=t.multiply(c,u,c);const d=this.point,f=d.x,p=d.y,m=this.width%2/2,g=this.height%2/2,y=Math.cos(this.angle),_=Math.sin(this.angle),b=f-Math.round(f)+y*m+_*g,x=p-Math.round(p)+y*g+_*m,w=new Float64Array(s);if(t.translate(w,w,[b>.5?b-1:b,x>.5?x-1:x,0]),this.alignedProjMatrix=w,s=t.create(),t.scale(s,s,[this.width/2,-this.height/2,1]),t.translate(s,s,[1,-1,0]),this.labelPlaneMatrix=s,s=t.create(),t.scale(s,s,[1,-1,1]),t.translate(s,s,[-1,-1,0]),t.scale(s,s,[2/this.width,2/this.height,1]),this.glCoordMatrix=s,this.pixelMatrix=t.multiply(new Float64Array(16),this.labelPlaneMatrix,this.projMatrix),this._calcFogMatrices(),this._distanceTileDataCache={},s=t.invert(new Float64Array(16),this.pixelMatrix),!s)throw new Error("failed to invert matrix");if(this.pixelMatrixInverse=s,"globe"===this.projection.name||this.mercatorFromTransition){this.globeMatrix=t.calculateGlobeMatrix(this);const e=[this.globeMatrix[12],this.globeMatrix[13],this.globeMatrix[14]];this.globeCenterInViewSpace=t.transformMat4(e,e,o),this.globeRadius=this.worldSize/2/Math.PI-1}else this.globeMatrix=s;this._projMatrixCache={},this._alignedProjMatrixCache={},this._pixelsToTileUnitsCache={}}_calcFogMatrices(){this._fogTileMatrixCache={};const e=this.cameraWorldSizeForFog,n=this.cameraPixelsPerMeter,r=this._camera.position,i=1/this.height/this._pixelsPerMercatorPixel,o=[e,e,n];t.scale$2(o,o,i),t.scale$2(r,r,-1),t.multiply$2(r,r,o);const a=t.create();t.translate(a,a,r),t.scale(a,a,o),this.mercatorFogMatrix=a,this.worldToFogMatrix=this._camera.getWorldToCameraPosition(e,n,i)}_computeCameraPosition(t){const e=(t=t||this.pixelsPerMeter)/this.pixelsPerMeter,n=this._camera.forward(),r=this.point,i=this._mercatorZfromZoom(this._seaLevelZoom?this._seaLevelZoom:this._zoom)*e-t/this.worldSize*this._centerAltitude;return[r.x/this.worldSize-n[0]*i,r.y/this.worldSize-n[1]*i,t/this.worldSize*this._centerAltitude-n[2]*i]}_updateCameraState(){this.height&&(this._camera.setPitchBearing(this._pitch,this.angle),this._camera.position=this._computeCameraPosition())}_translateCameraConstrained(e){const n=this._maxCameraBoundsDistance()*Math.cos(this._pitch),r=this._camera.position[2],i=e[2];let o=1;this.projection.wrap&&(this.center=this.center.wrap()),i>0&&(o=Math.min((n-r)/i,1)),this._camera.position=t.scaleAndAdd([],this._camera.position,e,o),this._updateStateFromCamera()}_updateStateFromCamera(){const e=this._camera.position,n=this._camera.forward(),{pitch:r,bearing:i}=this._camera.getPitchBearing(),o=t.mercatorZfromAltitude(this._centerAltitude,this.center.lat)*this._pixelsPerMercatorPixel,a=this._mercatorZfromZoom(this._maxZoom)*Math.cos(t.degToRad(this._maxPitch)),s=Math.max((e[2]-o)/Math.cos(r),a),l=this._zoomFromMercatorZ(s);t.scaleAndAdd(e,e,n,s),this._pitch=t.clamp(r,t.degToRad(this.minPitch),t.degToRad(this.maxPitch)),this.angle=t.wrap(i,-Math.PI,Math.PI),this._setZoom(t.clamp(l,this._minZoom,this._maxZoom)),this._updateSeaLevelZoom(),this._center=this.coordinateLocation(new t.MercatorCoordinate(e[0],e[1],e[2])),this._unmodified=!1,this._constrain(),this._calcMatrices()}_worldSizeFromZoom(t){return Math.pow(2,t)*this.tileSize}_mercatorZfromZoom(t){return this.cameraToCenterDistance/this._worldSizeFromZoom(t)}_minimumHeightOverTerrain(){const t=Math.min((null!=this._seaLevelZoom?this._seaLevelZoom:this._zoom)+4,this._maxZoom);return this._mercatorZfromZoom(t)}_zoomFromMercatorZ(t){return this.scaleZoom(this.cameraToCenterDistance/(t*this.tileSize))}zoomFromMercatorZAdjusted(e){let n=0,r=t.GLOBE_ZOOM_THRESHOLD_MAX,i=0,o=1/0;for(;r-n>1e-6&&r>n;){const t=n+.5*(r-n),a=this.tileSize*Math.pow(2,t),s=this.getCameraToCenterDistance(this.projection,t,a),l=this.scaleZoom(s/(e*this.tileSize)),c=Math.abs(t-l);c<o&&(o=c,i=t),t<l?n=t:r=t}return i}_terrainEnabled(){return!(!this._elevation||!this.projection.supportsTerrain&&(t.warnOnce("Terrain is not yet supported with alternate projections. Use mercator or globe to enable terrain."),1))}anyCornerOffEdge(e,n){const r=Math.min(e.x,n.x),i=Math.max(e.x,n.x),o=Math.min(e.y,n.y),a=Math.max(e.y,n.y);if(o<this.horizonLineFromTop(!1))return!0;if("mercator"!==this.projection.name)return!1;const s=[new t.Point(r,o),new t.Point(i,a),new t.Point(r,a),new t.Point(i,o)],l=this.renderWorldCopies?-3:0,c=this.renderWorldCopies?4:1;for(const t of s){const e=this.pointRayIntersection(t);if(e.t<0)return!0;const n=this.rayIntersectionCoordinate(e);if(n.x<l||n.y<0||n.x>c||n.y>1)return!0}return!1}isHorizonVisible(){return this.pitch+t.radToDeg(this.fovAboveCenter)>88||this.anyCornerOffEdge(new t.Point(0,0),new t.Point(this.width,this.height))}zoomDeltaToMovement(e,n){const r=t.length(t.sub([],this._camera.position,e)),i=this._zoomFromMercatorZ(r)+n;return r-this._mercatorZfromZoom(i)}getCameraPoint(){if("globe"===this.projection.name){const e=function(e,n){let[r,i,o]=e;const a=[r,i,o,1];t.transformMat4$1(a,a,n);const s=a[3]=Math.max(a[3],1e-6);return a[0]/=s,a[1]/=s,a[2]/=s,a}([this.globeMatrix[12],this.globeMatrix[13],this.globeMatrix[14]],this.pixelMatrix);return new t.Point(e[0],e[1])}{const e=Math.tan(this._pitch)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new t.Point(0,e))}}getCameraToCenterDistance(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.zoom,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.worldSize;const r=qr(t,e,this.width,this.height,1024),i=t.pixelSpaceConversion(this.center.lat,n,r);return.5/Math.tan(.5*this._fov)*this.height*i}getWorldToCameraMatrix(){const e=this._camera.getWorldToCamera(this.worldSize,"meters"===this.projection.zAxisUnit?this.pixelsPerMeter:1);return"globe"===this.projection.name&&t.multiply(e,e,this.globeMatrix),e}}function Kr(t,e){let n=!1,r=null;const i=()=>{r=null,n&&(t(),r=setTimeout(i,e),n=!1)};return()=>(n=!0,r||i(),r)}class $r{constructor(e){this._hashName=e&&encodeURIComponent(e),t.bindAll(["_getCurrentHash","_onHashChange","_updateHash"],this),this._updateHash=Kr(this._updateHashUnthrottled.bind(this),300)}addTo(e){return this._map=e,t.window.addEventListener("hashchange",this._onHashChange,!1),e.on("moveend",this._updateHash),this}remove(){return this._map?(this._map.off("moveend",this._updateHash),t.window.removeEventListener("hashchange",this._onHashChange,!1),clearTimeout(this._updateHash()),this._map=void 0,this):this}getHashString(){const e=this._map;if(!e)return"";const n=Jr(e);if(this._hashName){const e=this._hashName;let r=!1;const i=t.window.location.hash.slice(1).split("&").map((t=>{const i=t.split("=")[0];return i===e?(r=!0,"".concat(i,"=").concat(n)):t})).filter((t=>t));return r||i.push("".concat(e,"=").concat(n)),"#".concat(i.join("&"))}return"#".concat(n)}_getCurrentHash(){const e=t.window.location.hash.replace("#","");if(this._hashName){let t;return e.split("&").map((t=>t.split("="))).forEach((e=>{e[0]===this._hashName&&(t=e)})),(t&&t[1]||"").split("/")}return e.split("/")}_onHashChange(){const t=this._map;if(!t)return!1;const e=this._getCurrentHash();if(e.length>=3&&!e.some((t=>isNaN(t)))){const n=t.dragRotate.isEnabled()&&t.touchZoomRotate.isEnabled()?+(e[3]||0):t.getBearing();return t.jumpTo({center:[+e[2],+e[1]],zoom:+e[0],bearing:n,pitch:+(e[4]||0)}),!0}return!1}_updateHashUnthrottled(){const e=t.window.location.href.replace(/(#.+)?$/,this.getHashString());t.window.history.replaceState(t.window.history.state,null,e)}}function Jr(t,e){const n=t.getCenter(),r=Math.round(100*t.getZoom())/100,i=Math.ceil((r*Math.LN2+Math.log(512/360/.5))/Math.LN10),o=Math.pow(10,i),a=Math.round(n.lng*o)/o,s=Math.round(n.lat*o)/o,l=t.getBearing(),c=t.getPitch();let u=e?"/".concat(a,"/").concat(s,"/").concat(r):"".concat(r,"/").concat(s,"/").concat(a);return(l||c)&&(u+="/"+Math.round(10*l)/10),c&&(u+="/".concat(Math.round(c))),u}const Qr={linearity:.3,easing:t.bezier(0,0,.3,1)},ti=t.extend({deceleration:2500,maxSpeed:1400},Qr),ei=t.extend({deceleration:20,maxSpeed:1400},Qr),ni=t.extend({deceleration:1e3,maxSpeed:360},Qr),ri=t.extend({deceleration:1e3,maxSpeed:90},Qr);class ii{constructor(t){this._map=t,this.clear()}clear(){this._inertiaBuffer=[]}record(e){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:t.exported.now(),settings:e})}_drainInertiaBuffer(){const e=this._inertiaBuffer,n=t.exported.now();for(;e.length>0&&n-e[0].time>160;)e.shift()}_onMoveEnd(e){if(this._map._prefersReducedMotion())return;if(this._drainInertiaBuffer(),this._inertiaBuffer.length<2)return;const n={zoom:0,bearing:0,pitch:0,pan:new t.Point(0,0),pinchAround:void 0,around:void 0};for(const{settings:t}of this._inertiaBuffer)n.zoom+=t.zoomDelta||0,n.bearing+=t.bearingDelta||0,n.pitch+=t.pitchDelta||0,t.panDelta&&n.pan._add(t.panDelta),t.around&&(n.around=t.around),t.pinchAround&&(n.pinchAround=t.pinchAround);const r=this._inertiaBuffer[this._inertiaBuffer.length-1].time-this._inertiaBuffer[0].time,i={};if(n.pan.mag()){const o=ai(n.pan.mag(),r,t.extend({},ti,e||{}));i.offset=n.pan.mult(o.amount/n.pan.mag()),i.center=this._map.transform.center,oi(i,o)}if(n.zoom){const t=ai(n.zoom,r,ei);i.zoom=this._map.transform.zoom+t.amount,oi(i,t)}if(n.bearing){const e=ai(n.bearing,r,ni);i.bearing=this._map.transform.bearing+t.clamp(e.amount,-179,179),oi(i,e)}if(n.pitch){const t=ai(n.pitch,r,ri);i.pitch=this._map.transform.pitch+t.amount,oi(i,t)}if(i.zoom||i.bearing){const t=void 0===n.pinchAround?n.around:n.pinchAround;i.around=t?this._map.unproject(t):this._map.getCenter()}return this.clear(),i.noMoveStart=!0,i}}function oi(t,e){(!t.duration||t.duration<e.duration)&&(t.duration=e.duration,t.easing=e.easing)}function ai(e,n,r){const{maxSpeed:i,linearity:o,deceleration:a}=r,s=t.clamp(e*o/(n/1e3),-i,i),l=Math.abs(s)/(a*o);return{easing:r.easing,duration:1e3*l,amount:s*(l/2)}}class si extends t.Event{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(e,n,r){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};const o=p(n.getCanvasContainer(),r),a=n.unproject(o);super(e,t.extend({point:o,lngLat:a,originalEvent:r},i)),this._defaultPrevented=!1,this.target=n}}class li extends t.Event{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(e,n,r){const i="touchend"===e?r.changedTouches:r.touches,o=m(n.getCanvasContainer(),i),a=o.map((t=>n.unproject(t))),s=o.reduce(((t,e,n,r)=>t.add(e.div(r.length))),new t.Point(0,0));super(e,{points:o,point:s,lngLats:a,lngLat:n.unproject(s),originalEvent:r}),this._defaultPrevented=!1}}class ci extends t.Event{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(t,e,n){super(t,{originalEvent:n}),this._defaultPrevented=!1}}class ui{constructor(t,e){this._map=t,this._clickTolerance=e.clickTolerance}reset(){this._mousedownPos=void 0}wheel(t){return this._firePreventable(new ci(t.type,this._map,t))}mousedown(t,e){return this._mousedownPos=e,this._firePreventable(new si(t.type,this._map,t))}mouseup(t){this._map.fire(new si(t.type,this._map,t))}preclick(e){const n=t.extend({},e);n.type="preclick",this._map.fire(new si(n.type,this._map,n))}click(t,e){this._mousedownPos&&this._mousedownPos.dist(e)>=this._clickTolerance||(this.preclick(t),this._map.fire(new si(t.type,this._map,t)))}dblclick(t){return this._firePreventable(new si(t.type,this._map,t))}mouseover(t){this._map.fire(new si(t.type,this._map,t))}mouseout(t){this._map.fire(new si(t.type,this._map,t))}touchstart(t){return this._firePreventable(new li(t.type,this._map,t))}touchmove(t){this._map.fire(new li(t.type,this._map,t))}touchend(t){this._map.fire(new li(t.type,this._map,t))}touchcancel(t){this._map.fire(new li(t.type,this._map,t))}_firePreventable(t){if(this._map.fire(t),t.defaultPrevented)return{}}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class hi{constructor(t){this._map=t}reset(){this._delayContextMenu=!1,this._contextMenuEvent=void 0}mousemove(t){this._map.fire(new si(t.type,this._map,t))}mousedown(){this._delayContextMenu=!0}mouseup(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new si("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)}contextmenu(t){this._delayContextMenu?this._contextMenuEvent=t:this._map.fire(new si(t.type,this._map,t)),this._map.listens("contextmenu")&&t.preventDefault()}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class di{constructor(t,e){this._map=t,this._el=t.getCanvasContainer(),this._container=t.getContainer(),this._clickTolerance=e.clickTolerance||1}isEnabled(){return!!this._enabled}isActive(){return!!this._active}enable(){this.isEnabled()||(this._enabled=!0)}disable(){this.isEnabled()&&(this._enabled=!1)}mousedown(t,e){this.isEnabled()&&t.shiftKey&&0===t.button&&(u(),this._startPos=this._lastPos=e,this._active=!0)}mousemoveWindow(t,e){if(!this._active)return;const n=e,r=this._startPos,i=this._lastPos;if(!r||!i||i.equals(n)||!this._box&&n.dist(r)<this._clickTolerance)return;this._lastPos=n,this._box||(this._box=o("div","mapboxgl-boxzoom",this._container),this._container.classList.add("mapboxgl-crosshair"),this._fireEvent("boxzoomstart",t));const a=Math.min(r.x,n.x),s=Math.max(r.x,n.x),l=Math.min(r.y,n.y),c=Math.max(r.y,n.y);this._map._requestDomTask((()=>{this._box&&(this._box.style.transform="translate(".concat(a,"px,").concat(l,"px)"),this._box.style.width=s-a+"px",this._box.style.height=c-l+"px")}))}mouseupWindow(e,n){if(!this._active)return;const r=this._startPos,i=n;if(r&&0===e.button){if(this.reset(),f(),r.x!==i.x||r.y!==i.y)return this._map.fire(new t.Event("boxzoomend",{originalEvent:e})),{cameraAnimation:t=>t.fitScreenCoordinates(r,i,this._map.getBearing(),{linear:!1})};this._fireEvent("boxzoomcancel",e)}}keydown(t){this._active&&27===t.keyCode&&(this.reset(),this._fireEvent("boxzoomcancel",t))}blur(){this.reset()}reset(){this._active=!1,this._container.classList.remove("mapboxgl-crosshair"),this._box&&(this._box.remove(),this._box=null),h(),delete this._startPos,delete this._lastPos}_fireEvent(e,n){return this._map.fire(new t.Event(e,{originalEvent:n}))}}function fi(t,e){const n={};for(let r=0;r<t.length;r++)n[t[r].identifier]=e[r];return n}class pi{constructor(t){this.reset(),this.numTouches=t.numTouches}reset(){this.centroid=void 0,this.startTime=0,this.touches={},this.aborted=!1}touchstart(e,n,r){(this.centroid||r.length>this.numTouches)&&(this.aborted=!0),this.aborted||(0===this.startTime&&(this.startTime=e.timeStamp),r.length===this.numTouches&&(this.centroid=function(e){const n=new t.Point(0,0);for(const t of e)n._add(t);return n.div(e.length)}(n),this.touches=fi(r,n)))}touchmove(t,e,n){if(this.aborted||!this.centroid)return;const r=fi(n,e);for(const i in this.touches){const t=r[i];(!t||t.dist(this.touches[i])>30)&&(this.aborted=!0)}}touchend(t,e,n){if((!this.centroid||t.timeStamp-this.startTime>500)&&(this.aborted=!0),0===n.length){const t=!this.aborted&&this.centroid;if(this.reset(),t)return t}}}class mi{constructor(t){this.singleTap=new pi(t),this.numTaps=t.numTaps,this.reset()}reset(){this.lastTime=1/0,this.lastTap=void 0,this.count=0,this.singleTap.reset()}touchstart(t,e,n){this.singleTap.touchstart(t,e,n)}touchmove(t,e,n){this.singleTap.touchmove(t,e,n)}touchend(t,e,n){const r=this.singleTap.touchend(t,e,n);if(r){const e=t.timeStamp-this.lastTime<500,n=!this.lastTap||this.lastTap.dist(r)<30;if(e&&n||this.reset(),this.count++,this.lastTime=t.timeStamp,this.lastTap=r,this.count===this.numTaps)return this.reset(),r}}}class gi{constructor(){this._zoomIn=new mi({numTouches:1,numTaps:2}),this._zoomOut=new mi({numTouches:2,numTaps:1}),this.reset()}reset(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()}touchstart(t,e,n){this._zoomIn.touchstart(t,e,n),this._zoomOut.touchstart(t,e,n)}touchmove(t,e,n){this._zoomIn.touchmove(t,e,n),this._zoomOut.touchmove(t,e,n)}touchend(t,e,n){const r=this._zoomIn.touchend(t,e,n),i=this._zoomOut.touchend(t,e,n);return r?(this._active=!0,t.preventDefault(),setTimeout((()=>this.reset()),0),{cameraAnimation:e=>e.easeTo({duration:300,zoom:e.getZoom()+1,around:e.unproject(r)},{originalEvent:t})}):i?(this._active=!0,t.preventDefault(),setTimeout((()=>this.reset()),0),{cameraAnimation:e=>e.easeTo({duration:300,zoom:e.getZoom()-1,around:e.unproject(i)},{originalEvent:t})}):void 0}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}const yi={0:1,2:2};class vi{constructor(t){this.reset(),this._clickTolerance=t.clickTolerance||1}blur(){this.reset()}reset(){this._active=!1,this._moved=!1,this._lastPoint=void 0,this._eventButton=void 0}_correctButton(t,e){return!1}_move(t,e){return{}}mousedown(t,e){if(this._lastPoint)return;const n=g(t);this._correctButton(t,n)&&(this._lastPoint=e,this._eventButton=n)}mousemoveWindow(t,e){const n=this._lastPoint;if(n)if(t.preventDefault(),null!=this._eventButton&&function(t,e){const n=yi[e];return void 0===t.buttons||(t.buttons&n)!==n}(t,this._eventButton))this.reset();else if(this._moved||!(e.dist(n)<this._clickTolerance))return this._moved=!0,this._lastPoint=e,this._move(n,e)}mouseupWindow(t){this._lastPoint&&g(t)===this._eventButton&&(this._moved&&f(),this.reset())}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class _i extends vi{mousedown(t,e){super.mousedown(t,e),this._lastPoint&&(this._active=!0)}_correctButton(t,e){return 0===e&&!t.ctrlKey}_move(t,e){return{around:e,panDelta:e.sub(t)}}}class bi extends vi{_correctButton(t,e){return 0===e&&t.ctrlKey||2===e}_move(t,e){const n=.8*(e.x-t.x);if(n)return this._active=!0,{bearingDelta:n}}contextmenu(t){t.preventDefault()}}class xi extends vi{_correctButton(t,e){return 0===e&&t.ctrlKey||2===e}_move(t,e){const n=-.5*(e.y-t.y);if(n)return this._active=!0,{pitchDelta:n}}contextmenu(t){t.preventDefault()}}class wi{constructor(e,n){this._map=e,this._el=e.getCanvasContainer(),this._minTouches=1,this._clickTolerance=n.clickTolerance||1,this.reset(),t.bindAll(["_addTouchPanBlocker","_showTouchPanBlockerAlert"],this)}reset(){this._active=!1,this._touches={},this._sum=new t.Point(0,0)}touchstart(t,e,n){return this._calculateTransform(t,e,n)}touchmove(e,n,r){if(this._active&&!(r.length<this._minTouches)){if(this._map._cooperativeGestures&&!this._map.isMoving()){if(1===r.length&&!t.isFullscreen())return void this._showTouchPanBlockerAlert();"hidden"!==this._alertContainer.style.visibility&&(this._alertContainer.style.visibility="hidden",clearTimeout(this._alertTimer))}return e.cancelable&&e.preventDefault(),this._calculateTransform(e,n,r)}}touchend(t,e,n){this._calculateTransform(t,e,n),this._active&&n.length<this._minTouches&&this.reset()}touchcancel(){this.reset()}_calculateTransform(e,n,r){r.length>0&&(this._active=!0);const i=fi(r,n),o=new t.Point(0,0),a=new t.Point(0,0);let s=0;for(const t in i){const e=i[t],n=this._touches[t];n&&(o._add(e),a._add(e.sub(n)),s++,i[t]=e)}if(this._touches=i,s<this._minTouches||!a.mag())return;const l=a.div(s);return this._sum._add(l),this._sum.mag()<this._clickTolerance?void 0:{around:o.div(s),panDelta:l}}enable(){this._enabled=!0,this._map._cooperativeGestures&&(this._addTouchPanBlocker(),this._el.classList.add("mapboxgl-touch-pan-blocker-override","mapboxgl-scrollable-page"))}disable(){this._enabled=!1,this._map._cooperativeGestures&&(clearTimeout(this._alertTimer),this._alertContainer.remove(),this._el.classList.remove("mapboxgl-touch-pan-blocker-override","mapboxgl-scrollable-page")),this.reset()}isEnabled(){return!!this._enabled}isActive(){return!!this._active}_addTouchPanBlocker(){this._map&&!this._alertContainer&&(this._alertContainer=o("div","mapboxgl-touch-pan-blocker",this._map._container),this._alertContainer.textContent=this._map._getUIString("TouchPanBlocker.Message"),this._alertContainer.style.fontSize="".concat(Math.max(10,Math.min(24,Math.floor(.05*this._el.clientWidth))),"px"))}_showTouchPanBlockerAlert(){this._alertContainer.style.visibility="visible",this._alertContainer.classList.add("mapboxgl-touch-pan-blocker-show"),this._alertContainer.setAttribute("role","alert"),clearTimeout(this._alertTimer),this._alertTimer=setTimeout((()=>{this._alertContainer.classList.remove("mapboxgl-touch-pan-blocker-show"),this._alertContainer.setAttribute("role","null")}),500)}}class Si{constructor(){this.reset()}reset(){this._active=!1,this._firstTwoTouches=void 0}_start(t){}_move(t,e,n){return{}}touchstart(t,e,n){this._firstTwoTouches||n.length<2||(this._firstTwoTouches=[n[0].identifier,n[1].identifier],this._start([e[0],e[1]]))}touchmove(t,e,n){const r=this._firstTwoTouches;if(!r)return;t.preventDefault();const[i,o]=r,a=Ei(n,e,i),s=Ei(n,e,o);if(!a||!s)return;const l=this._aroundCenter?null:a.add(s).div(2);return this._move([a,s],l,t)}touchend(t,e,n){if(!this._firstTwoTouches)return;const[r,i]=this._firstTwoTouches,o=Ei(n,e,r),a=Ei(n,e,i);o&&a||(this._active&&f(),this.reset())}touchcancel(){this.reset()}enable(t){this._enabled=!0,this._aroundCenter=!!t&&"center"===t.around}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}function Ei(t,e,n){for(let r=0;r<t.length;r++)if(t[r].identifier===n)return e[r]}function Ti(t,e){return Math.log(t/e)/Math.LN2}class Mi extends Si{reset(){super.reset(),this._distance=0,this._startDistance=0}_start(t){this._startDistance=this._distance=t[0].dist(t[1])}_move(t,e){const n=this._distance;if(this._distance=t[0].dist(t[1]),this._active||!(Math.abs(Ti(this._distance,this._startDistance))<.1))return this._active=!0,{zoomDelta:Ti(this._distance,n),pinchAround:e}}}function Ai(t,e){return 180*t.angleWith(e)/Math.PI}class Ci extends Si{reset(){super.reset(),this._minDiameter=0,this._startVector=void 0,this._vector=void 0}_start(t){this._startVector=this._vector=t[0].sub(t[1]),this._minDiameter=t[0].dist(t[1])}_move(t,e){const n=this._vector;if(this._vector=t[0].sub(t[1]),n&&(this._active||!this._isBelowThreshold(this._vector)))return this._active=!0,{bearingDelta:Ai(this._vector,n),pinchAround:e}}_isBelowThreshold(t){this._minDiameter=Math.min(this._minDiameter,t.mag());const e=25/(Math.PI*this._minDiameter)*360,n=this._startVector;if(!n)return!1;const r=Ai(t,n);return Math.abs(r)<e}}function Pi(t){return Math.abs(t.y)>Math.abs(t.x)}class ki extends Si{constructor(t){super(),this._map=t}reset(){super.reset(),this._valid=void 0,this._firstMove=void 0,this._lastPoints=void 0}_start(t){this._lastPoints=t,Pi(t[0].sub(t[1]))&&(this._valid=!1)}_move(e,n,r){const i=this._lastPoints;if(!i)return;const o=e[0].sub(i[0]),a=e[1].sub(i[1]);return this._map._cooperativeGestures&&!t.isFullscreen()&&r.touches.length<3||(this._valid=this.gestureBeginsVertically(o,a,r.timeStamp),!this._valid)?void 0:(this._lastPoints=e,this._active=!0,{pitchDelta:(o.y+a.y)/2*-.5})}gestureBeginsVertically(t,e,n){if(void 0!==this._valid)return this._valid;const r=t.mag()>=2,i=e.mag()>=2;if(!r&&!i)return;if(!r||!i)return null==this._firstMove&&(this._firstMove=n),n-this._firstMove<100&&void 0;const o=t.y>0==e.y>0;return Pi(t)&&Pi(e)&&o}}const Ii={panStep:100,bearingStep:15,pitchStep:10};class Oi{constructor(){const t=Ii;this._panStep=t.panStep,this._bearingStep=t.bearingStep,this._pitchStep=t.pitchStep,this._rotationDisabled=!1}blur(){this.reset()}reset(){this._active=!1}keydown(t){if(t.altKey||t.ctrlKey||t.metaKey)return;let e=0,n=0,r=0,i=0,o=0;switch(t.keyCode){case 61:case 107:case 171:case 187:e=1;break;case 189:case 109:case 173:e=-1;break;case 37:t.shiftKey?n=-1:(t.preventDefault(),i=-1);break;case 39:t.shiftKey?n=1:(t.preventDefault(),i=1);break;case 38:t.shiftKey?r=1:(t.preventDefault(),o=-1);break;case 40:t.shiftKey?r=-1:(t.preventDefault(),o=1);break;default:return}return this._rotationDisabled&&(n=0,r=0),{cameraAnimation:a=>{const s=a.getZoom();a.easeTo({duration:300,easeId:"keyboardHandler",easing:Li,zoom:e?Math.round(s)+e*(t.shiftKey?2:1):s,bearing:a.getBearing()+n*this._bearingStep,pitch:a.getPitch()+r*this._pitchStep,offset:[-i*this._panStep,-o*this._panStep],center:a.getCenter()},{originalEvent:t})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}disableRotation(){this._rotationDisabled=!0}enableRotation(){this._rotationDisabled=!1}}function Li(t){return t*(2-t)}const ji=4.000244140625;class zi{constructor(e,n){this._map=e,this._el=e.getCanvasContainer(),this._handler=n,this._delta=0,this._defaultZoomRate=.01,this._wheelZoomRate=.0022222222222222222,t.bindAll(["_onTimeout","_addScrollZoomBlocker","_showBlockerAlert"],this)}setZoomRate(t){this._defaultZoomRate=t}setWheelZoomRate(t){this._wheelZoomRate=t}isEnabled(){return!!this._enabled}isActive(){return this._active||void 0!==this._finishTimeout}isZooming(){return!!this._zooming}enable(t){this.isEnabled()||(this._enabled=!0,this._aroundCenter=!!t&&"center"===t.around,this._map._cooperativeGestures&&this._addScrollZoomBlocker())}disable(){this.isEnabled()&&(this._enabled=!1,this._map._cooperativeGestures&&(clearTimeout(this._alertTimer),this._alertContainer.remove()))}wheel(e){if(!this.isEnabled())return;if(this._map._cooperativeGestures){if(!(e.ctrlKey||e.metaKey||this.isZooming()||t.isFullscreen()))return void this._showBlockerAlert();"hidden"!==this._alertContainer.style.visibility&&(this._alertContainer.style.visibility="hidden",clearTimeout(this._alertTimer))}let n=e.deltaMode===t.window.WheelEvent.DOM_DELTA_LINE?40*e.deltaY:e.deltaY;const r=t.exported.now(),i=r-(this._lastWheelEventTime||0);this._lastWheelEventTime=r,0!==n&&n%ji==0?this._type="wheel":0!==n&&Math.abs(n)<4?this._type="trackpad":i>400?(this._type=null,this._lastValue=n,this._timeout=setTimeout(this._onTimeout,40,e)):this._type||(this._type=Math.abs(i*n)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,n+=this._lastValue)),e.shiftKey&&n&&(n/=4),this._type&&(this._lastWheelEvent=e,this._delta-=n,this._active||this._start(e)),e.preventDefault()}_onTimeout(t){this._type="wheel",this._delta-=this._lastValue,this._active||this._start(t)}_start(t){if(!this._delta)return;this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);const e=p(this._el,t);this._aroundPoint=this._aroundCenter?this._map.transform.centerPoint:e,this._aroundCoord=this._map.transform.pointCoordinate3D(this._aroundPoint),this._targetZoom=void 0,this._frameId||(this._frameId=!0,this._handler._triggerRenderFrame())}renderFrame(){if(!this._frameId)return;if(this._frameId=null,!this.isActive())return;const e=this._map.transform;"wheel"===this._type&&e.projection.wrap&&(e._center.lng>=180||e._center.lng<=-180)&&(this._prevEase=null,this._easing=null,this._lastWheelEvent=null,this._lastWheelEventTime=0);const n=()=>e._terrainEnabled()&&this._aroundCoord?e.computeZoomRelativeTo(this._aroundCoord):e.zoom;if(0!==this._delta){const t="wheel"===this._type&&Math.abs(this._delta)>ji?this._wheelZoomRate:this._defaultZoomRate;let r=2/(1+Math.exp(-Math.abs(this._delta*t)));this._delta<0&&0!==r&&(r=1/r);const i=n(),o=Math.pow(2,i),a="number"==typeof this._targetZoom?e.zoomScale(this._targetZoom):o;this._targetZoom=Math.min(e.maxZoom,Math.max(e.minZoom,e.scaleZoom(a*r))),"wheel"===this._type&&(this._startZoom=i,this._easing=this._smoothOutEasing(200)),this._delta=0}const r="number"==typeof this._targetZoom?this._targetZoom:n(),i=this._startZoom,o=this._easing;let a,s=!1;if("wheel"===this._type&&i&&o){const e=Math.min((t.exported.now()-this._lastWheelEventTime)/200,1),n=o(e);a=t.number(i,r,n),e<1?this._frameId||(this._frameId=!0):s=!0}else a=r,s=!0;return this._active=!0,s&&(this._active=!1,this._finishTimeout=setTimeout((()=>{this._zooming=!1,this._handler._triggerRenderFrame(),delete this._targetZoom,delete this._finishTimeout}),200)),{noInertia:!0,needsRenderFrame:!s,zoomDelta:a-n(),around:this._aroundPoint,aroundCoord:this._aroundCoord,originalEvent:this._lastWheelEvent}}_smoothOutEasing(e){let n=t.ease;if(this._prevEase){const e=this._prevEase,r=(t.exported.now()-e.start)/e.duration,i=e.easing(r+.01)-e.easing(r),o=.27/Math.sqrt(i*i+1e-4)*.01,a=Math.sqrt(.0729-o*o);n=t.bezier(o,a,.25,1)}return this._prevEase={start:t.exported.now(),duration:e,easing:n},n}blur(){this.reset()}reset(){this._active=!1}_addScrollZoomBlocker(){this._map&&!this._alertContainer&&(this._alertContainer=o("div","mapboxgl-scroll-zoom-blocker",this._map._container),this._alertContainer.textContent=/(Mac|iPad)/i.test(t.window.navigator.userAgent)?this._map._getUIString("ScrollZoomBlocker.CmdMessage"):this._map._getUIString("ScrollZoomBlocker.CtrlMessage"),this._alertContainer.style.fontSize="".concat(Math.max(10,Math.min(24,Math.floor(.05*this._el.clientWidth))),"px"))}_showBlockerAlert(){this._alertContainer.style.visibility="visible",this._alertContainer.classList.add("mapboxgl-scroll-zoom-blocker-show"),this._alertContainer.setAttribute("role","alert"),clearTimeout(this._alertTimer),this._alertTimer=setTimeout((()=>{this._alertContainer.classList.remove("mapboxgl-scroll-zoom-blocker-show"),this._alertContainer.setAttribute("role","null")}),200)}}class Ri{constructor(t,e){this._clickZoom=t,this._tapZoom=e}enable(){this._clickZoom.enable(),this._tapZoom.enable()}disable(){this._clickZoom.disable(),this._tapZoom.disable()}isEnabled(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()}isActive(){return this._clickZoom.isActive()||this._tapZoom.isActive()}}class Di{constructor(){this.reset()}reset(){this._active=!1}blur(){this.reset()}dblclick(t,e){return t.preventDefault(),{cameraAnimation:n=>{n.easeTo({duration:300,zoom:n.getZoom()+(t.shiftKey?-1:1),around:n.unproject(e)},{originalEvent:t})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Bi{constructor(){this._tap=new mi({numTouches:1,numTaps:1}),this.reset()}reset(){this._active=!1,this._swipePoint=void 0,this._swipeTouch=0,this._tapTime=0,this._tap.reset()}touchstart(t,e,n){this._swipePoint||(this._tapTime&&t.timeStamp-this._tapTime>500&&this.reset(),this._tapTime?n.length>0&&(this._swipePoint=e[0],this._swipeTouch=n[0].identifier):this._tap.touchstart(t,e,n))}touchmove(t,e,n){if(this._tapTime){if(this._swipePoint){if(n[0].identifier!==this._swipeTouch)return;const r=e[0],i=r.y-this._swipePoint.y;return this._swipePoint=r,t.preventDefault(),this._active=!0,{zoomDelta:i/128}}}else this._tap.touchmove(t,e,n)}touchend(t,e,n){this._tapTime?this._swipePoint&&0===n.length&&this.reset():this._tap.touchend(t,e,n)&&(this._tapTime=t.timeStamp)}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Fi{constructor(t,e,n){this._el=t,this._mousePan=e,this._touchPan=n}enable(t){this._inertiaOptions=t||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("mapboxgl-touch-drag-pan")}disable(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("mapboxgl-touch-drag-pan")}isEnabled(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()}isActive(){return this._mousePan.isActive()||this._touchPan.isActive()}}class Ni{constructor(t,e,n){this._pitchWithRotate=t.pitchWithRotate,this._mouseRotate=e,this._mousePitch=n}enable(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable()}disable(){this._mouseRotate.disable(),this._mousePitch.disable()}isEnabled(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())}isActive(){return this._mouseRotate.isActive()||this._mousePitch.isActive()}}class Ui{constructor(t,e,n,r){this._el=t,this._touchZoom=e,this._touchRotate=n,this._tapDragZoom=r,this._rotationDisabled=!1,this._enabled=!0}enable(t){this._touchZoom.enable(t),this._rotationDisabled||this._touchRotate.enable(t),this._tapDragZoom.enable(),this._el.classList.add("mapboxgl-touch-zoom-rotate")}disable(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("mapboxgl-touch-zoom-rotate")}isEnabled(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()}isActive(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()}disableRotation(){this._rotationDisabled=!0,this._touchRotate.disable()}enableRotation(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()}}const Vi=t=>t.zoom||t.drag||t.pitch||t.rotate;class Wi extends t.Event{}class Gi{constructor(){this.constants=[1,1,.01],this.radius=0}setup(e,n){const r=t.sub([],n,e);this.radius=t.length(r[2]<0?t.div([],r,this.constants):[r[0],r[1],0])}projectRay(e){t.div(e,e,this.constants),t.normalize(e,e),t.mul$1(e,e,this.constants);const n=t.scale$2([],e,this.radius);if(n[2]>0){const e=t.scale$2([],[0,0,1],t.dot(n,[0,0,1])),r=t.scale$2([],t.normalize([],[n[0],n[1],0]),this.radius),i=t.add([],n,t.scale$2([],t.sub([],t.add([],r,e),n),2));n[0]=i[0],n[1]=i[1]}return n}}function qi(t){return t.panDelta&&t.panDelta.mag()||t.zoomDelta||t.bearingDelta||t.pitchDelta}class Hi{constructor(e,n){this._map=e,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new ii(e),this._bearingSnap=n.bearingSnap,this._previousActiveHandlers={},this._trackingEllipsoid=new Gi,this._dragOrigin=null,this._eventsInProgress={},this._addDefaultHandlers(n),t.bindAll(["handleEvent","handleWindowEvent"],this);const r=this._el;this._listeners=[[r,"touchstart",{passive:!0}],[r,"touchmove",{passive:!1}],[r,"touchend",void 0],[r,"touchcancel",void 0],[r,"mousedown",void 0],[r,"mousemove",void 0],[r,"mouseup",void 0],[t.window.document,"mousemove",{capture:!0}],[t.window.document,"mouseup",void 0],[r,"mouseover",void 0],[r,"mouseout",void 0],[r,"dblclick",void 0],[r,"click",void 0],[r,"keydown",{capture:!1}],[r,"keyup",void 0],[r,"wheel",{passive:!1}],[r,"contextmenu",void 0],[t.window,"blur",void 0]];for(const[i,o,a]of this._listeners)i.addEventListener(o,i===t.window.document?this.handleWindowEvent:this.handleEvent,a)}destroy(){for(const[e,n,r]of this._listeners)e.removeEventListener(n,e===t.window.document?this.handleWindowEvent:this.handleEvent,r)}_addDefaultHandlers(t){const e=this._map,n=e.getCanvasContainer();this._add("mapEvent",new ui(e,t));const r=e.boxZoom=new di(e,t);this._add("boxZoom",r);const i=new gi,o=new Di;e.doubleClickZoom=new Ri(o,i),this._add("tapZoom",i),this._add("clickZoom",o);const a=new Bi;this._add("tapDragZoom",a);const s=e.touchPitch=new ki(e);this._add("touchPitch",s);const l=new bi(t),c=new xi(t);e.dragRotate=new Ni(t,l,c),this._add("mouseRotate",l,["mousePitch"]),this._add("mousePitch",c,["mouseRotate"]);const u=new _i(t),h=new wi(e,t);e.dragPan=new Fi(n,u,h),this._add("mousePan",u),this._add("touchPan",h,["touchZoom","touchRotate"]);const d=new Ci,f=new Mi;e.touchZoomRotate=new Ui(n,f,d,a),this._add("touchRotate",d,["touchPan","touchZoom"]),this._add("touchZoom",f,["touchPan","touchRotate"]),this._add("blockableMapEvent",new hi(e));const p=e.scrollZoom=new zi(e,this);this._add("scrollZoom",p,["mousePan"]);const m=e.keyboard=new Oi;this._add("keyboard",m);for(const g of["boxZoom","doubleClickZoom","tapDragZoom","touchPitch","dragRotate","dragPan","touchZoomRotate","scrollZoom","keyboard"])t.interactive&&t[g]&&e[g].enable(t[g])}_add(t,e,n){this._handlers.push({handlerName:t,handler:e,allowed:n}),this._handlersById[t]=e}stop(t){if(!this._updatingCamera){for(const{handler:t}of this._handlers)t.reset();this._inertia.clear(),this._fireEvents({},{},t),this._changes=[]}}isActive(){for(const{handler:t}of this._handlers)if(t.isActive())return!0;return!1}isZooming(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()}isRotating(){return!!this._eventsInProgress.rotate}isMoving(){return!!Vi(this._eventsInProgress)||this.isZooming()}_isDragging(){return!!this._eventsInProgress.drag}_blockedByActive(t,e,n){for(const r in t)if(r!==n&&(!e||e.indexOf(r)<0))return!0;return!1}handleWindowEvent(t){this.handleEvent(t,"".concat(t.type,"Window"))}_getMapTouches(t){const e=[];for(const n of t)this._el.contains(n.target)&&e.push(n);return e}handleEvent(t,e){this._updatingCamera=!0;const n="renderFrame"===t.type,r=n?void 0:t,i={needsRenderFrame:!1},o={},a={},s=t.touches?this._getMapTouches(t.touches):void 0,l=s?m(this._el,s):n?void 0:p(this._el,t);for(const{handlerName:h,handler:d,allowed:f}of this._handlers){if(!d.isEnabled())continue;let n;this._blockedByActive(a,f,h)?d.reset():d[e||t.type]&&(n=d[e||t.type](t,l,s),this.mergeHandlerResult(i,o,n,h,r),n&&n.needsRenderFrame&&this._triggerRenderFrame()),(n||d.isActive())&&(a[h]=d)}const c={};for(const h in this._previousActiveHandlers)a[h]||(c[h]=r);this._previousActiveHandlers=a,(Object.keys(c).length||qi(i))&&(this._changes.push([i,o,c]),this._triggerRenderFrame()),(Object.keys(a).length||qi(i))&&this._map._stop(!0),this._updatingCamera=!1;const{cameraAnimation:u}=i;u&&(this._inertia.clear(),this._fireEvents({},{},!0),this._changes=[],u(this._map))}mergeHandlerResult(e,n,r,i,o){if(!r)return;t.extend(e,r);const a={handlerName:i,originalEvent:r.originalEvent||o};void 0!==r.zoomDelta&&(n.zoom=a),void 0!==r.panDelta&&(n.drag=a),void 0!==r.pitchDelta&&(n.pitch=a),void 0!==r.bearingDelta&&(n.rotate=a)}_applyChanges(){const e={},n={},r={};for(const[i,o,a]of this._changes)i.panDelta&&(e.panDelta=(e.panDelta||new t.Point(0,0))._add(i.panDelta)),i.zoomDelta&&(e.zoomDelta=(e.zoomDelta||0)+i.zoomDelta),i.bearingDelta&&(e.bearingDelta=(e.bearingDelta||0)+i.bearingDelta),i.pitchDelta&&(e.pitchDelta=(e.pitchDelta||0)+i.pitchDelta),void 0!==i.around&&(e.around=i.around),void 0!==i.aroundCoord&&(e.aroundCoord=i.aroundCoord),void 0!==i.pinchAround&&(e.pinchAround=i.pinchAround),i.noInertia&&(e.noInertia=i.noInertia),t.extend(n,o),t.extend(r,a);this._updateMapTransform(e,n,r),this._changes=[]}_updateMapTransform(e,n,r){const i=this._map,o=i.transform,a=t=>[t.x,t.y,t.z];if((t=>{const e=this._eventsInProgress.drag;return e&&!this._handlersById[e.handlerName].isActive()})()&&!qi(e)){const t=o.zoom;o.cameraElevationReference="sea",o.recenterOnTerrain(),o.cameraElevationReference="ground",t!==o.zoom&&this._map._update(!0)}if(o._isCameraConstrained&&i._stop(!0),!qi(e))return void this._fireEvents(n,r,!0);let{panDelta:s,zoomDelta:l,bearingDelta:c,pitchDelta:u,around:h,aroundCoord:d,pinchAround:f}=e;o._isCameraConstrained&&(l>0&&(l=0),o._isCameraConstrained=!1),void 0!==f&&(h=f),(l||(t=>n[t]&&!this._eventsInProgress[t])("drag"))&&h&&(this._dragOrigin=a(o.pointCoordinate3D(h)),this._trackingEllipsoid.setup(o._camera.position,this._dragOrigin)),o.cameraElevationReference="sea",i._stop(!0),h=h||i.transform.centerPoint,c&&(o.bearing+=c),u&&(o.pitch+=u),o._updateCameraState();const p=[0,0,0];if(s)if("mercator"===o.projection.name){const t=this._trackingEllipsoid.projectRay(o.screenPointToMercatorRay(h).dir),e=this._trackingEllipsoid.projectRay(o.screenPointToMercatorRay(h.sub(s)).dir);p[0]=e[0]-t[0],p[1]=e[1]-t[1]}else{const e=o.pointCoordinate(h);if("globe"===o.projection.name){s=s.rotate(-o.angle);const n=o._pixelsPerMercatorPixel/o.worldSize;p[0]=-s.x*t.mercatorScale(t.latFromMercatorY(e.y))*n,p[1]=-s.y*t.mercatorScale(o.center.lat)*n}else{const t=o.pointCoordinate(h.sub(s));e&&t&&(p[0]=t.x-e.x,p[1]=t.y-e.y)}}const m=o.zoom,g=[0,0,0];if(l){const e=a(d||o.pointCoordinate3D(h)),n={dir:t.normalize([],t.sub([],e,o._camera.position))};if(n.dir[2]<0){const r=o.zoomDeltaToMovement(e,l);t.scale$2(g,n.dir,r)}}const y=t.add(p,p,g);o._translateCameraConstrained(y),l&&Math.abs(o.zoom-m)>1e-4&&o.recenterOnTerrain(),o.cameraElevationReference="ground",this._map._update(),e.noInertia||this._inertia.record(e),this._fireEvents(n,r,!0)}_fireEvents(e,n,r){const i=Vi(this._eventsInProgress),o=Vi(e),a={};for(const t in e){const{originalEvent:n}=e[t];this._eventsInProgress[t]||(a["".concat(t,"start")]=n),this._eventsInProgress[t]=e[t]}!i&&o&&this._fireEvent("movestart",o.originalEvent);for(const t in a)this._fireEvent(t,a[t]);o&&this._fireEvent("move",o.originalEvent);for(const t in e){const{originalEvent:n}=e[t];this._fireEvent(t,n)}const s={};let l;for(const t in this._eventsInProgress){const{handlerName:e,originalEvent:r}=this._eventsInProgress[t];this._handlersById[e].isActive()||(delete this._eventsInProgress[t],l=n[e]||r,s["".concat(t,"end")]=l)}for(const t in s)this._fireEvent(t,s[t]);const c=Vi(this._eventsInProgress);if(r&&(i||o)&&!c){this._updatingCamera=!0;const e=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),n=t=>0!==t&&-this._bearingSnap<t&&t<this._bearingSnap;e?(n(e.bearing||this._map.getBearing())&&(e.bearing=0),this._map.easeTo(e,{originalEvent:l})):(this._map.fire(new t.Event("moveend",{originalEvent:l})),n(this._map.getBearing())&&this._map.resetNorth()),this._updatingCamera=!1}}_fireEvent(e,n){this._map.fire(new t.Event(e,n?{originalEvent:n}:{}))}_requestFrame(){return this._map.triggerRepaint(),this._map._renderTaskQueue.add((t=>{this._frameId=void 0,this.handleEvent(new Wi("renderFrame",{timeStamp:t})),this._applyChanges()}))}_triggerRenderFrame(){void 0===this._frameId&&(this._frameId=this._requestFrame())}}const Zi="map.setFreeCameraOptions(...) and map.getFreeCameraOptions() are not yet supported for non-mercator projections.";class Xi extends t.Evented{constructor(e,n){super(),this._moving=!1,this._zooming=!1,this.transform=e,this._bearingSnap=n.bearingSnap,this._respectPrefersReducedMotion=!1!==n.respectPrefersReducedMotion,t.bindAll(["_renderFrameCallback"],this)}getCenter(){return new t.LngLat(this.transform.center.lng,this.transform.center.lat)}setCenter(t,e){return this.jumpTo({center:t},e)}panBy(e,n,r){return e=t.Point.convert(e).mult(-1),this.panTo(this.transform.center,t.extend({offset:e},n),r)}panTo(e,n,r){return this.easeTo(t.extend({center:e},n),r)}getZoom(){return this.transform.zoom}setZoom(t,e){return this.jumpTo({zoom:t},e),this}zoomTo(e,n,r){return this.easeTo(t.extend({zoom:e},n),r)}zoomIn(t,e){return this.zoomTo(this.getZoom()+1,t,e),this}zoomOut(t,e){return this.zoomTo(this.getZoom()-1,t,e),this}getBearing(){return this.transform.bearing}setBearing(t,e){return this.jumpTo({bearing:t},e),this}getPadding(){return this.transform.padding}setPadding(t,e){return this.jumpTo({padding:t},e),this}rotateTo(e,n,r){return this.easeTo(t.extend({bearing:e},n),r)}resetNorth(e,n){return this.rotateTo(0,t.extend({duration:1e3},e),n),this}resetNorthPitch(e,n){return this.easeTo(t.extend({bearing:0,pitch:0,duration:1e3},e),n),this}snapToNorth(t,e){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(t,e):this}getPitch(){return this.transform.pitch}setPitch(t,e){return this.jumpTo({pitch:t},e),this}cameraForBounds(e,n){e=t.LngLatBounds.convert(e);const r=n&&n.bearing||0,i=n&&n.pitch||0,o=e.getNorthWest(),a=e.getSouthEast();return this._cameraForBounds(this.transform,o,a,r,i,n)}_extendCameraOptions(e){const n={top:0,bottom:0,right:0,left:0};if("number"==typeof(e=t.extend({padding:n,offset:[0,0],maxZoom:this.transform.maxZoom},e)).padding){const t=e.padding;e.padding={top:t,bottom:t,right:t,left:t}}return e.padding=t.extend(n,e.padding),e}_minimumAABBFrustumDistance(t,e){const n=e.max[0]-e.min[0],r=e.max[1]-e.min[1];return n/r>t.aspect?n/(2*Math.tan(.5*t.fovX)*t.aspect):r/(2*Math.tan(.5*t.fovY)*t.aspect)}_cameraForBoundsOnGlobe(e,n,r,i,o,a){const s=e.clone(),l=this._extendCameraOptions(a);s.bearing=i,s.pitch=o;const c=t.LngLat.convert(n),u=t.LngLat.convert(r),h=.5*(c.lat+u.lat),d=.5*(c.lng+u.lng),f=t.latLngToECEF(h,d),p=t.normalize([],f),m=t.normalize([],t.cross([],p,[0,1,0])),g=t.cross([],m,p),y=[m[0],m[1],m[2],0,g[0],g[1],g[2],0,p[0],p[1],p[2],0,0,0,0,1],v=[f,t.latLngToECEF(c.lat,c.lng),t.latLngToECEF(u.lat,c.lng),t.latLngToECEF(u.lat,u.lng),t.latLngToECEF(c.lat,u.lng),t.latLngToECEF(h,c.lng),t.latLngToECEF(h,u.lng),t.latLngToECEF(c.lat,d),t.latLngToECEF(u.lat,d)];let _=t.Aabb.fromPoints(v.map((e=>[t.dot(m,e),t.dot(g,e),t.dot(p,e)])));const b=t.transformMat4([],_.center,y);0===t.squaredLength(b)&&t.set(b,0,0,1),t.normalize(b,b),t.scale$2(b,b,t.GLOBE_RADIUS),s.center=t.ecefToLatLng(b);const x=s.getWorldToCameraMatrix(),w=t.invert(new Float64Array(16),x);_=t.Aabb.applyTransform(_,t.multiply([],x,y)),t.transformMat4(b,b,x);const S=.5*(_.max[2]-_.min[2]),E=this._minimumAABBFrustumDistance(s,_),T=t.scale$2([],[0,0,1],S),M=t.add(T,b,T),A=E+(0===s.pitch?0:t.distance(b,M)),C=s.globeCenterInViewSpace,P=t.sub([],b,[C[0],C[1],C[2]]);t.normalize(P,P),t.scale$2(P,P,A);const k=t.add([],b,P);t.transformMat4(k,k,w);const I=t.earthRadius/t.GLOBE_RADIUS,O=t.length(k),L=t.mercatorZfromAltitude(Math.max(O*I-t.earthRadius,Number.EPSILON),0),j=Math.min(s.zoomFromMercatorZAdjusted(L),l.maxZoom);return j>.5*(t.GLOBE_ZOOM_THRESHOLD_MIN+t.GLOBE_ZOOM_THRESHOLD_MAX)?(s.setProjection({name:"mercator"}),s.zoom=j,this._cameraForBounds(s,n,r,i,o,a)):{center:s.center,zoom:j,bearing:i,pitch:o}}queryTerrainElevation(e,n){const r=this.transform.elevation;return r?(n=t.extend({},{exaggerated:!0},n),r.getAtPoint(t.MercatorCoordinate.fromLngLat(e),null,n.exaggerated)):null}_cameraForBounds(e,n,r,i,o,a){if("globe"===e.projection.name)return this._cameraForBoundsOnGlobe(e,n,r,i,o,a);const s=e.clone(),l=this._extendCameraOptions(a),c=s.padding;s.bearing=i,s.pitch=o;const u=t.LngLat.convert(n),h=t.LngLat.convert(r),d=new t.LngLat(u.lng,h.lat),f=new t.LngLat(h.lng,u.lat),p=s.project(u),m=s.project(h),g=this.queryTerrainElevation(u),y=this.queryTerrainElevation(h),v=this.queryTerrainElevation(d),_=this.queryTerrainElevation(f),b=[[p.x,p.y,Math.min(g||0,y||0,v||0,_||0)],[m.x,m.y,Math.max(g||0,y||0,v||0,_||0)]];let x=t.Aabb.fromPoints(b);const w=s.getWorldToCameraMatrix(),S=t.invert(new Float64Array(16),w);x=t.Aabb.applyTransform(x,w);const E=t.sub([],x.max,x.min),T=c.left||0,M=c.right||0,A=c.bottom||0,C=c.top||0,{left:P,right:k,top:I,bottom:O}=l.padding,L=.5*(T+M),j=.5*(C+A),z=Math.min(s.scaleZoom(s.scale*Math.min((s.width-(T+M+P+k))/E[0],(s.height-(A+C+O+I))/E[1])),l.maxZoom),R=s.scale/s.zoomScale(z);x=new t.Aabb([x.min[0]-(P+L)*R,x.min[1]-(O+j)*R,x.min[2]],[x.max[0]+(k+L)*R,x.max[1]+(I+j)*R,x.max[2]]);const D=.5*E[2],B=this._minimumAABBFrustumDistance(s,x),F=[0,0,1,0];t.transformMat4$1(F,F,w),t.normalize$2(F,F);const N=t.scale$2([],F,B+D),U=t.add([],x.center,N),V=("number"==typeof l.offset.x&&"number"==typeof l.offset.y?new t.Point(l.offset.x,l.offset.y):t.Point.convert(l.offset)).rotate(-t.degToRad(i));x.center[0]-=V.x*R,x.center[1]+=V.y*R,t.transformMat4(x.center,x.center,S),t.transformMat4(U,U,S);const W=[x.center[0],x.center[1],U[2]*s.pixelsPerMeter];t.scale$2(W,W,1/s.worldSize);const G=t.lngFromMercatorX(W[0]),q=t.latFromMercatorY(W[1]),H=Math.min(s._zoomFromMercatorZ(W[2]),l.maxZoom),Z=new t.LngLat(G,q);return s.mercatorFromTransition&&H<.5*(t.GLOBE_ZOOM_THRESHOLD_MIN+t.GLOBE_ZOOM_THRESHOLD_MAX)?(s.setProjection({name:"globe"}),s.zoom=H,this._cameraForBounds(s,n,r,i,o,a)):{center:Z,zoom:H,bearing:i,pitch:o}}fitBounds(t,e,n){const r=this.cameraForBounds(t,e);return this._fitInternal(r,e,n)}fitScreenCoordinates(e,n,r,i,o){const a=t.Point.convert(e),s=t.Point.convert(n),l=new t.Point(Math.min(a.x,s.x),Math.min(a.y,s.y)),c=new t.Point(Math.max(a.x,s.x),Math.max(a.y,s.y));if("mercator"===this.transform.projection.name&&this.transform.anyCornerOffEdge(a,s))return this;const u=this.transform.pointLocation3D(l),h=this.transform.pointLocation3D(c),d=this.transform.pointLocation3D(new t.Point(l.x,c.y)),f=this.transform.pointLocation3D(new t.Point(c.x,l.y)),p=[Math.min(u.lng,h.lng,d.lng,f.lng),Math.min(u.lat,h.lat,d.lat,f.lat)],m=[Math.max(u.lng,h.lng,d.lng,f.lng),Math.max(u.lat,h.lat,d.lat,f.lat)],g=i&&i.pitch?i.pitch:this.getPitch(),y=this._cameraForBounds(this.transform,p,m,r,g,i);return this._fitInternal(y,i,o)}_fitInternal(e,n,r){return e?(delete(n=t.extend(e,n)).padding,n.linear?this.easeTo(n,r):this.flyTo(n,r)):this}jumpTo(e,n){this.stop();const r=e.preloadOnly?this.transform.clone():this.transform;let i=!1,o=!1,a=!1;return"zoom"in e&&r.zoom!==+e.zoom&&(i=!0,r.zoom=+e.zoom),void 0!==e.center&&(r.center=t.LngLat.convert(e.center)),"bearing"in e&&r.bearing!==+e.bearing&&(o=!0,r.bearing=+e.bearing),"pitch"in e&&r.pitch!==+e.pitch&&(a=!0,r.pitch=+e.pitch),null==e.padding||r.isPaddingEqual(e.padding)||(r.padding=e.padding),e.preloadOnly?(this._preloadTiles(r),this):(this.fire(new t.Event("movestart",n)).fire(new t.Event("move",n)),i&&this.fire(new t.Event("zoomstart",n)).fire(new t.Event("zoom",n)).fire(new t.Event("zoomend",n)),o&&this.fire(new t.Event("rotatestart",n)).fire(new t.Event("rotate",n)).fire(new t.Event("rotateend",n)),a&&this.fire(new t.Event("pitchstart",n)).fire(new t.Event("pitch",n)).fire(new t.Event("pitchend",n)),this.fire(new t.Event("moveend",n)))}getFreeCameraOptions(){return this.transform.projection.supportsFreeCamera||t.warnOnce(Zi),this.transform.getFreeCameraOptions()}setFreeCameraOptions(e,n){const r=this.transform;if(!r.projection.supportsFreeCamera)return t.warnOnce(Zi),this;this.stop();const i=r.zoom,o=r.pitch,a=r.bearing;r.setFreeCameraOptions(e);const s=i!==r.zoom,l=o!==r.pitch,c=a!==r.bearing;return this.fire(new t.Event("movestart",n)).fire(new t.Event("move",n)),s&&this.fire(new t.Event("zoomstart",n)).fire(new t.Event("zoom",n)).fire(new t.Event("zoomend",n)),c&&this.fire(new t.Event("rotatestart",n)).fire(new t.Event("rotate",n)).fire(new t.Event("rotateend",n)),l&&this.fire(new t.Event("pitchstart",n)).fire(new t.Event("pitch",n)).fire(new t.Event("pitchend",n)),this.fire(new t.Event("moveend",n)),this}easeTo(e,n){this._stop(!1,e.easeId),(!1===(e=t.extend({offset:[0,0],duration:500,easing:t.ease},e)).animate||this._prefersReducedMotion(e))&&(e.duration=0);const r=this.transform,i=this.getZoom(),o=this.getBearing(),a=this.getPitch(),s=this.getPadding(),l="zoom"in e?+e.zoom:i,c="bearing"in e?this._normalizeBearing(e.bearing,o):o,u="pitch"in e?+e.pitch:a,h="padding"in e?e.padding:r.padding,d=t.Point.convert(e.offset);let f,p,m;if("globe"===r.projection.name){const n=t.MercatorCoordinate.fromLngLat(r.center),i=d.rotate(-r.angle);n.x+=i.x/r.worldSize,n.y+=i.y/r.worldSize;const o=n.toLngLat(),a=t.LngLat.convert(e.center||o);this._normalizeCenter(a),f=r.centerPoint.add(i),p=new t.Point(n.x,n.y).mult(r.worldSize),m=new t.Point(t.mercatorXfromLng(a.lng),t.mercatorYfromLat(a.lat)).mult(r.worldSize).sub(p)}else{f=r.centerPoint.add(d);const n=r.pointLocation(f),i=t.LngLat.convert(e.center||n);this._normalizeCenter(i),p=r.project(n),m=r.project(i).sub(p)}const g=r.zoomScale(l-i);let y,v;e.around&&(y=t.LngLat.convert(e.around),v=r.locationPoint(y));const _=this._zooming||l!==i,b=this._rotating||o!==c,x=this._pitching||u!==a,w=!r.isPaddingEqual(h),S=r=>S=>{if(_&&(r.zoom=t.number(i,l,S)),b&&(r.bearing=t.number(o,c,S)),x&&(r.pitch=t.number(a,u,S)),w&&(r.interpolatePadding(s,h,S),f=r.centerPoint.add(d)),y)r.setLocationAtPoint(y,v);else{const t=r.zoomScale(r.zoom-i),e=l>i?Math.min(2,g):Math.max(.5,g),n=Math.pow(e,1-S),o=r.unproject(p.add(m.mult(S*n)).mult(t));r.setLocationAtPoint(r.renderWorldCopies?o.wrap():o,f)}return e.preloadOnly||this._fireMoveEvents(n),r};if(e.preloadOnly){const t=this._emulate(S,e.duration,r);return this._preloadTiles(t),this}const E={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching};return this._zooming=_,this._rotating=b,this._pitching=x,this._padding=w,this._easeId=e.easeId,this._prepareEase(n,e.noMoveStart,E),this._ease(S(r),(t=>{r.recenterOnTerrain(),this._afterEase(n,t)}),e),this}_prepareEase(e,n){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};this._moving=!0,this.transform.cameraElevationReference="sea",n||r.moving||this.fire(new t.Event("movestart",e)),this._zooming&&!r.zooming&&this.fire(new t.Event("zoomstart",e)),this._rotating&&!r.rotating&&this.fire(new t.Event("rotatestart",e)),this._pitching&&!r.pitching&&this.fire(new t.Event("pitchstart",e))}_fireMoveEvents(e){this.fire(new t.Event("move",e)),this._zooming&&this.fire(new t.Event("zoom",e)),this._rotating&&this.fire(new t.Event("rotate",e)),this._pitching&&this.fire(new t.Event("pitch",e))}_afterEase(e,n){if(this._easeId&&n&&this._easeId===n)return;this._easeId=void 0,this.transform.cameraElevationReference="ground";const r=this._zooming,i=this._rotating,o=this._pitching;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._padding=!1,r&&this.fire(new t.Event("zoomend",e)),i&&this.fire(new t.Event("rotateend",e)),o&&this.fire(new t.Event("pitchend",e)),this.fire(new t.Event("moveend",e))}flyTo(e,n){if(this._prefersReducedMotion(e)){const r=t.pick(e,["center","zoom","bearing","pitch","around"]);return this.jumpTo(r,n)}this.stop(),e=t.extend({offset:[0,0],speed:1.2,curve:1.42,easing:t.ease},e);const r=this.transform,i=this.getZoom(),o=this.getBearing(),a=this.getPitch(),s=this.getPadding(),l="zoom"in e?t.clamp(+e.zoom,r.minZoom,r.maxZoom):i,c="bearing"in e?this._normalizeBearing(e.bearing,o):o,u="pitch"in e?+e.pitch:a,h="padding"in e?e.padding:r.padding,d=r.zoomScale(l-i),f=t.Point.convert(e.offset);let p=r.centerPoint.add(f);const m=r.pointLocation(p),g=t.LngLat.convert(e.center||m);this._normalizeCenter(g);const y=r.project(m),v=r.project(g).sub(y);let _=e.curve;const b=Math.max(r.width,r.height),x=b/d,w=v.mag();if("minZoom"in e){const n=t.clamp(Math.min(e.minZoom,i,l),r.minZoom,r.maxZoom),o=b/r.zoomScale(n-i);_=Math.sqrt(o/w*2)}const S=_*_;function E(t){const e=(x*x-b*b+(t?-1:1)*S*S*w*w)/(2*(t?x:b)*S*w);return Math.log(Math.sqrt(e*e+1)-e)}function T(t){return(Math.exp(t)-Math.exp(-t))/2}function M(t){return(Math.exp(t)+Math.exp(-t))/2}const A=E(0);let C=function(t){return M(A)/M(A+_*t)},P=function(t){return b*((M(A)*(T(e=A+_*t)/M(e))-T(A))/S)/w;var e},k=(E(1)-A)/_;if(Math.abs(w)<1e-6||!isFinite(k)){if(Math.abs(b-x)<1e-6)return this.easeTo(e,n);const t=x<b?-1:1;k=Math.abs(Math.log(x/b))/_,P=function(){return 0},C=function(e){return Math.exp(t*_*e)}}e.duration="duration"in e?+e.duration:1e3*k/("screenSpeed"in e?+e.screenSpeed/_:+e.speed),e.maxDuration&&e.duration>e.maxDuration&&(e.duration=0);const I=o!==c,O=u!==a,L=!r.isPaddingEqual(h),j=r=>d=>{const m=d*k,_=1/C(m);r.zoom=1===d?l:i+r.scaleZoom(_),I&&(r.bearing=t.number(o,c,d)),O&&(r.pitch=t.number(a,u,d)),L&&(r.interpolatePadding(s,h,d),p=r.centerPoint.add(f));const b=1===d?g:r.unproject(y.add(v.mult(P(m))).mult(_));return r.setLocationAtPoint(r.renderWorldCopies?b.wrap():b,p),r._updateCameraOnTerrain(),e.preloadOnly||this._fireMoveEvents(n),r};if(e.preloadOnly){const t=this._emulate(j,e.duration,r);return this._preloadTiles(t),this}return this._zooming=!0,this._rotating=I,this._pitching=O,this._padding=L,this._prepareEase(n,!1),this._ease(j(r),(()=>this._afterEase(n)),e),this}isEasing(){return!!this._easeFrameId}stop(){return this._stop()}_stop(t,e){if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),this._easeFrameId=void 0,this._onEaseFrame=void 0),this._onEaseEnd){const t=this._onEaseEnd;this._onEaseEnd=void 0,t.call(this,e)}if(!t){const t=this.handlers;t&&t.stop(!1)}return this}_ease(e,n,r){!1===r.animate||0===r.duration?(e(1),n()):(this._easeStart=t.exported.now(),this._easeOptions=r,this._onEaseFrame=e,this._onEaseEnd=n,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))}_renderFrameCallback(){const e=Math.min((t.exported.now()-this._easeStart)/this._easeOptions.duration,1),n=this._onEaseFrame;n&&n(this._easeOptions.easing(e)),e<1?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()}_normalizeBearing(e,n){e=t.wrap(e,-180,180);const r=Math.abs(e-n);return Math.abs(e-360-n)<r&&(e-=360),Math.abs(e+360-n)<r&&(e+=360),e}_normalizeCenter(t){const e=this.transform;if(!e.renderWorldCopies||e.maxBounds)return;const n=t.lng-e.center.lng;t.lng+=n>180?-360:n<-180?360:0}_prefersReducedMotion(e){return this._respectPrefersReducedMotion&&t.exported.prefersReducedMotion&&!(e&&e.essential)}_emulate(t,e,n){const r=Math.ceil(15*e/1e3),i=[],o=t(n.clone());for(let a=0;a<=r;a++){const t=o(a/r);i.push(t.clone())}return i}}class Yi{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.options=e,t.bindAll(["_toggleAttribution","_updateEditLink","_updateData","_updateCompact"],this)}getDefaultPosition(){return"bottom-right"}onAdd(t){const e=this.options&&this.options.compact;return this._map=t,this._container=o("div","mapboxgl-ctrl mapboxgl-ctrl-attrib"),this._compactButton=o("button","mapboxgl-ctrl-attrib-button",this._container),o("span","mapboxgl-ctrl-icon",this._compactButton).setAttribute("aria-hidden","true"),this._compactButton.type="button",this._compactButton.addEventListener("click",this._toggleAttribution),this._setElementTitle(this._compactButton,"ToggleAttribution"),this._innerContainer=o("div","mapboxgl-ctrl-attrib-inner",this._container),this._innerContainer.setAttribute("role","list"),e&&this._container.classList.add("mapboxgl-compact"),this._updateAttributions(),this._updateEditLink(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("moveend",this._updateEditLink),void 0===e&&(this._map.on("resize",this._updateCompact),this._updateCompact()),this._container}onRemove(){this._container.remove(),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("moveend",this._updateEditLink),this._map.off("resize",this._updateCompact),this._map=void 0,this._attribHTML=void 0}_setElementTitle(t,e){const n=this._map._getUIString("AttributionControl.".concat(e));t.setAttribute("aria-label",n),t.removeAttribute("title"),t.firstElementChild&&t.firstElementChild.setAttribute("title",n)}_toggleAttribution(){this._container.classList.contains("mapboxgl-compact-show")?(this._container.classList.remove("mapboxgl-compact-show"),this._compactButton.setAttribute("aria-expanded","false")):(this._container.classList.add("mapboxgl-compact-show"),this._compactButton.setAttribute("aria-expanded","true"))}_updateEditLink(){let e=this._editLink;e||(e=this._editLink=this._container.querySelector(".mapbox-improve-map"));const n=[{key:"owner",value:this.styleOwner},{key:"id",value:this.styleId},{key:"access_token",value:this._map._requestManager._customAccessToken||t.config.ACCESS_TOKEN}];if(e){const r=n.reduce(((t,e,r)=>(e.value&&(t+="".concat(e.key,"=").concat(e.value).concat(r<n.length-1?"&":"")),t)),"?");e.href="".concat(t.config.FEEDBACK_URL,"/").concat(r,"#").concat(Jr(this._map,!0)),e.rel="noopener nofollow",this._setElementTitle(e,"MapFeedback")}}_updateData(t){!t||"metadata"!==t.sourceDataType&&"visibility"!==t.sourceDataType&&"style"!==t.dataType||(this._updateAttributions(),this._updateEditLink())}_updateAttributions(){if(!this._map.style)return;let t=[];if(this._map.style.stylesheet){const t=this._map.style.stylesheet;this.styleOwner=t.owner,this.styleId=t.id}const e=this._map.style._sourceCaches;for(const r in e){const n=e[r];if(n.used){const e=n.getSource();e.attribution&&t.indexOf(e.attribution)<0&&t.push(e.attribution)}}t.sort(((t,e)=>t.length-e.length)),t=t.filter(((e,n)=>{for(let r=n+1;r<t.length;r++)if(t[r].indexOf(e)>=0)return!1;return!0})),this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?t=[...this.options.customAttribution,...t]:t.unshift(this.options.customAttribution));const n=t.join(" | ");n!==this._attribHTML&&(this._attribHTML=n,t.length?(this._innerContainer.innerHTML=n,this._container.classList.remove("mapboxgl-attrib-empty")):this._container.classList.add("mapboxgl-attrib-empty"),this._editLink=null)}_updateCompact(){this._map.getCanvasContainer().offsetWidth<=640?this._container.classList.add("mapboxgl-compact"):this._container.classList.remove("mapboxgl-compact","mapboxgl-compact-show")}}class Ki{constructor(){t.bindAll(["_updateLogo","_updateCompact"],this)}onAdd(t){this._map=t,this._container=o("div","mapboxgl-ctrl");const e=o("a","mapboxgl-ctrl-logo");return e.target="_blank",e.rel="noopener nofollow",e.href="https://www.mapbox.com/",e.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),e.setAttribute("rel","noopener nofollow"),this._container.appendChild(e),this._container.style.display="none",this._map.on("sourcedata",this._updateLogo),this._updateLogo(),this._map.on("resize",this._updateCompact),this._updateCompact(),this._container}onRemove(){this._container.remove(),this._map.off("sourcedata",this._updateLogo),this._map.off("resize",this._updateCompact)}getDefaultPosition(){return"bottom-left"}_updateLogo(t){t&&"metadata"!==t.sourceDataType||(this._container.style.display=this._logoRequired()?"block":"none")}_logoRequired(){if(!this._map.style)return!0;const t=this._map.style._sourceCaches;if(0===Object.entries(t).length)return!0;for(const e in t){const n=t[e].getSource();if(n.hasOwnProperty("mapbox_logo")&&!n.mapbox_logo)return!1}return!0}_updateCompact(){const t=this._container.children;if(t.length){const e=t[0];this._map.getCanvasContainer().offsetWidth<250?e.classList.add("mapboxgl-compact"):e.classList.remove("mapboxgl-compact")}}}class $i{constructor(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1}add(t){const e=++this._id;return this._queue.push({callback:t,id:e,cancelled:!1}),e}remove(t){const e=this._currentlyRunning,n=e?this._queue.concat(e):this._queue;for(const r of n)if(r.id===t)return void(r.cancelled=!0)}run(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;const e=this._currentlyRunning=this._queue;this._queue=[];for(const n of e)if(!n.cancelled&&(n.callback(t),this._cleared))break;this._cleared=!1,this._currentlyRunning=!1}clear(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]}}function Ji(e,n,r){if(e=new t.LngLat(e.lng,e.lat),n){const i=new t.LngLat(e.lng-360,e.lat),o=new t.LngLat(e.lng+360,e.lat),a=360*Math.ceil(Math.abs(e.lng-r.center.lng)/360),s=r.locationPoint(e).distSqr(n),l=n.x<0||n.y<0||n.x>r.width||n.y>r.height;r.locationPoint(i).distSqr(n)<s&&(l||Math.abs(i.lng-r.center.lng)<a)?e=i:r.locationPoint(o).distSqr(n)<s&&(l||Math.abs(o.lng-r.center.lng)<a)&&(e=o)}for(;Math.abs(e.lng-r.center.lng)>180;){const t=r.locationPoint(e);if(t.x>=0&&t.y>=0&&t.x<=r.width&&t.y<=r.height)break;e.lng>r.center.lng?e.lng-=360:e.lng+=360}return e}const Qi={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};class to extends t.Evented{constructor(e,n){if(super(),(e instanceof t.window.HTMLElement||n)&&(e=t.extend({element:e},n)),t.bindAll(["_update","_onMove","_onUp","_addDragHandler","_onMapClick","_onKeyPress","_clearFadeTimer"],this),this._anchor=e&&e.anchor||"center",this._color=e&&e.color||"#3FB1CE",this._scale=e&&e.scale||1,this._draggable=e&&e.draggable||!1,this._clickTolerance=e&&e.clickTolerance||0,this._isDragging=!1,this._state="inactive",this._rotation=e&&e.rotation||0,this._rotationAlignment=e&&e.rotationAlignment||"auto",this._pitchAlignment=e&&e.pitchAlignment&&e.pitchAlignment||"auto",this._updateMoving=()=>this._update(!0),this._occludedOpacity=e&&e.occludedOpacity||.2,e&&e.element)this._element=e.element,this._offset=t.Point.convert(e&&e.offset||[0,0]);else{this._defaultMarker=!0,this._element=o("div");const n=41,r=27,i=a("svg",{display:"block",height:n*this._scale+"px",width:r*this._scale+"px",viewBox:"0 0 ".concat(r," ").concat(n)},this._element),s=a("radialGradient",{id:"shadowGradient"},a("defs",{},i));a("stop",{offset:"10%","stop-opacity":.4},s),a("stop",{offset:"100%","stop-opacity":.05},s),a("ellipse",{cx:13.5,cy:34.8,rx:10.5,ry:5.25,fill:"url(#shadowGradient)"},i),a("path",{fill:this._color,d:"M27,13.5C27,19.07 20.25,27 14.75,34.5C14.02,35.5 12.98,35.5 12.25,34.5C6.75,27 0,19.22 0,13.5C0,6.04 6.04,0 13.5,0C20.96,0 27,6.04 27,13.5Z"},i),a("path",{opacity:.25,d:"M13.5,0C6.04,0 0,6.04 0,13.5C0,19.22 6.75,27 12.25,34.5C13,35.52 14.02,35.5 14.75,34.5C20.25,27 27,19.07 27,13.5C27,6.04 20.96,0 13.5,0ZM13.5,1C20.42,1 26,6.58 26,13.5C26,15.9 24.5,19.18 22.22,22.74C19.95,26.3 16.71,30.14 13.94,33.91C13.74,34.18 13.61,34.32 13.5,34.44C13.39,34.32 13.26,34.18 13.06,33.91C10.28,30.13 7.41,26.31 5.02,22.77C2.62,19.23 1,15.95 1,13.5C1,6.58 6.58,1 13.5,1Z"},i),a("circle",{fill:"white",cx:13.5,cy:13.5,r:5.5},i),this._offset=t.Point.convert(e&&e.offset||[0,-14])}this._element.hasAttribute("aria-label")||this._element.setAttribute("aria-label","Map marker"),this._element.classList.add("mapboxgl-marker"),this._element.addEventListener("dragstart",(t=>{t.preventDefault()})),this._element.addEventListener("mousedown",(t=>{t.preventDefault()}));const r=this._element.classList;for(const t in Qi)r.remove("mapboxgl-marker-anchor-".concat(t));r.add("mapboxgl-marker-anchor-".concat(this._anchor)),this._popup=null}addTo(t){return t===this._map||(this.remove(),this._map=t,t.getCanvasContainer().appendChild(this._element),t.on("move",this._updateMoving),t.on("moveend",this._update),t.on("remove",this._clearFadeTimer),t._addMarker(this),this.setDraggable(this._draggable),this._update(),t.on("click",this._onMapClick)),this}remove(){const t=this._map;return t&&(t.off("click",this._onMapClick),t.off("move",this._updateMoving),t.off("moveend",this._update),t.off("mousedown",this._addDragHandler),t.off("touchstart",this._addDragHandler),t.off("mouseup",this._onUp),t.off("touchend",this._onUp),t.off("mousemove",this._onMove),t.off("touchmove",this._onMove),t.off("remove",this._clearFadeTimer),t._removeMarker(this),this._map=void 0),this._clearFadeTimer(),this._element.remove(),this._popup&&this._popup.remove(),this}getLngLat(){return this._lngLat}setLngLat(e){return this._lngLat=t.LngLat.convert(e),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(!0),this}getElement(){return this._element}setPopup(t){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeAttribute("role"),this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),t){if(!("offset"in t.options)){const e=38.1,n=13.5,r=Math.sqrt(Math.pow(n,2)/2);t.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-e],"bottom-left":[r,-1*(e-n+r)],"bottom-right":[-r,-1*(e-n+r)],left:[n,-1*(e-n)],right:[-n,-1*(e-n)]}:this._offset}this._popup=t,t._marker=this,this._lngLat&&this._popup.setLngLat(this._lngLat),this._element.setAttribute("role","button"),this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress),this._element.setAttribute("aria-expanded","false")}return this}_onKeyPress(t){const e=t.code,n=t.charCode||t.keyCode;"Space"!==e&&"Enter"!==e&&32!==n&&13!==n||this.togglePopup()}_onMapClick(t){const e=t.originalEvent.target,n=this._element;this._popup&&(e===n||n.contains(e))&&this.togglePopup()}getPopup(){return this._popup}togglePopup(){const t=this._popup;return t?(t.isOpen()?(t.remove(),this._element.setAttribute("aria-expanded","false")):this._map&&(t.addTo(this._map),this._element.setAttribute("aria-expanded","true")),this):this}_behindTerrain(){const t=this._map,e=this._pos;if(!t||!e)return!1;const n=t.unproject(e),r=t.getFreeCameraOptions();if(!r.position)return!1;const i=r.position.toLngLat();return i.distanceTo(n)<.9*i.distanceTo(this._lngLat)}_evaluateOpacity(){const e=this._map;if(!e)return;const n=this._pos;if(!n||n.x<0||n.x>e.transform.width||n.y<0||n.y>e.transform.height)return void this._clearFadeTimer();const r=e.unproject(n);let i;e._showingGlobe()&&t.isLngLatBehindGlobe(e.transform,this._lngLat)?i=0:(i=1-e._queryFogOpacity(r),e.transform._terrainEnabled()&&e.getTerrain()&&this._behindTerrain()&&(i*=this._occludedOpacity)),this._element.style.opacity="".concat(i),this._element.style.pointerEvents=i>0?"auto":"none",this._popup&&this._popup._setOpacity(i),this._fadeTimer=null}_clearFadeTimer(){this._fadeTimer&&(clearTimeout(this._fadeTimer),this._fadeTimer=null)}_updateDOM(){const t=this._pos;if(!t||!this._map)return;const e=this._offset.mult(this._scale);this._element.style.transform="\n            translate(".concat(t.x,"px,").concat(t.y,"px)\n            ").concat(Qi[this._anchor],"\n            ").concat(this._calculateXYTransform()," ").concat(this._calculateZTransform(),"\n            translate(").concat(e.x,"px,").concat(e.y,"px)\n        ")}_calculateXYTransform(){const e=this._pos,n=this._map,r=this.getPitchAlignment();if(!n||!e||"map"!==r)return"";if(!n._showingGlobe()){const t=n.getPitch();return t?"rotateX(".concat(t,"deg)"):""}const i=t.radToDeg(t.globeTiltAtLngLat(n.transform,this._lngLat)),o=e.sub(t.globeCenterToScreenPoint(n.transform)),a=Math.abs(o.x)+Math.abs(o.y);if(0===a)return"";const s=i/a;return"rotateX(".concat(-o.y*s,"deg) rotateY(").concat(o.x*s,"deg)")}_calculateZTransform(){const e=this._pos,n=this._map;if(!n||!e)return"";let r=0;const i=this.getRotationAlignment();if("map"===i)if(n._showingGlobe()){const e=n.project(new t.LngLat(this._lngLat.lng,this._lngLat.lat+.001)),i=n.project(new t.LngLat(this._lngLat.lng,this._lngLat.lat-.001)).sub(e);r=t.radToDeg(Math.atan2(i.y,i.x))-90}else r=-n.getBearing();else if("horizon"===i){const i=t.smoothstep(4,6,n.getZoom()),o=t.globeCenterToScreenPoint(n.transform);o.y+=i*n.transform.height;const a=e.sub(o),s=t.radToDeg(Math.atan2(a.y,a.x));r=(s>90?s-270:s+90)*(1-i)}return r+=this._rotation,r?"rotateZ(".concat(r,"deg)"):""}_update(e){t.window.cancelAnimationFrame(this._updateFrameId);const n=this._map;n&&(n.transform.renderWorldCopies&&(this._lngLat=Ji(this._lngLat,this._pos,n.transform)),this._pos=n.project(this._lngLat),!0===e?this._updateFrameId=t.window.requestAnimationFrame((()=>{this._element&&this._pos&&this._anchor&&(this._pos=this._pos.round(),this._updateDOM())})):this._pos=this._pos.round(),n._requestDomTask((()=>{this._map&&(this._element&&this._pos&&this._anchor&&this._updateDOM(),(n._showingGlobe()||n.getTerrain()||n.getFog())&&!this._fadeTimer&&(this._fadeTimer=setTimeout(this._evaluateOpacity.bind(this),60)))})))}getOffset(){return this._offset}setOffset(e){return this._offset=t.Point.convert(e),this._update(),this}_onMove(e){const n=this._map;if(!n)return;const r=this._pointerdownPos,i=this._positionDelta;if(r&&i){if(!this._isDragging){const t=this._clickTolerance||n._clickTolerance;if(e.point.dist(r)<t)return;this._isDragging=!0}this._pos=e.point.sub(i),this._lngLat=n.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none","pending"===this._state&&(this._state="active",this.fire(new t.Event("dragstart"))),this.fire(new t.Event("drag"))}}_onUp(){this._element.style.pointerEvents="auto",this._positionDelta=null,this._pointerdownPos=null,this._isDragging=!1;const e=this._map;e&&(e.off("mousemove",this._onMove),e.off("touchmove",this._onMove)),"active"===this._state&&this.fire(new t.Event("dragend")),this._state="inactive"}_addDragHandler(t){const e=this._map,n=this._pos;e&&n&&this._element.contains(t.originalEvent.target)&&(t.preventDefault(),this._positionDelta=t.point.sub(n),this._pointerdownPos=t.point,this._state="pending",e.on("mousemove",this._onMove),e.on("touchmove",this._onMove),e.once("mouseup",this._onUp),e.once("touchend",this._onUp))}setDraggable(t){this._draggable=!!t;const e=this._map;return e&&(t?(e.on("mousedown",this._addDragHandler),e.on("touchstart",this._addDragHandler)):(e.off("mousedown",this._addDragHandler),e.off("touchstart",this._addDragHandler))),this}isDraggable(){return this._draggable}setRotation(t){return this._rotation=t||0,this._update(),this}getRotation(){return this._rotation}setRotationAlignment(t){return this._rotationAlignment=t||"auto",this._update(),this}getRotationAlignment(){return"auto"===this._rotationAlignment||"horizon"===this._rotationAlignment&&this._map&&!this._map._showingGlobe()?"viewport":this._rotationAlignment}setPitchAlignment(t){return this._pitchAlignment=t||"auto",this._update(),this}getPitchAlignment(){return"auto"===this._pitchAlignment?this.getRotationAlignment():this._pitchAlignment}setOccludedOpacity(t){return this._occludedOpacity=t||.2,this._update(),this}getOccludedOpacity(){return this._occludedOpacity}}const eo={closeButton:!0,closeOnClick:!0,focusAfterOpen:!0,className:"",maxWidth:"240px"},no=["a[href]","[tabindex]:not([tabindex='-1'])","[contenteditable]:not([contenteditable='false'])","button:not([disabled])","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].join(", ");function ro(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new t.Point(0,0),n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"bottom";if("number"==typeof e){const r=Math.round(Math.sqrt(.5*Math.pow(e,2)));switch(n){case"top":return new t.Point(0,e);case"top-left":return new t.Point(r,r);case"top-right":return new t.Point(-r,r);case"bottom":return new t.Point(0,-e);case"bottom-left":return new t.Point(r,-r);case"bottom-right":return new t.Point(-r,-r);case"left":return new t.Point(e,0);case"right":return new t.Point(-e,0)}return new t.Point(0,0)}return e instanceof t.Point||Array.isArray(e)?t.Point.convert(e):t.Point.convert(e[n]||[0,0])}class io{constructor(t){this.jumpTo(t)}getValue(e){if(e<=this._startTime)return this._start;if(e>=this._endTime)return this._end;const n=t.easeCubicInOut((e-this._startTime)/(this._endTime-this._startTime));return this._start*(1-n)+this._end*n}isEasing(t){return t>=this._startTime&&t<=this._endTime}jumpTo(t){this._startTime=-1/0,this._endTime=-1/0,this._start=t,this._end=t}easeTo(t,e,n){this._start=this.getValue(e),this._end=t,this._startTime=e,this._endTime=e+n}}const oo={"AttributionControl.ToggleAttribution":"Toggle attribution","AttributionControl.MapFeedback":"Map feedback","FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"Mapbox logo","Map.Title":"Map","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","ScrollZoomBlocker.CtrlMessage":"Use ctrl + scroll to zoom the map","ScrollZoomBlocker.CmdMessage":"Use \u2318 + scroll to zoom the map","TouchPanBlocker.Message":"Use two fingers to move the map"},ao={center:[0,0],zoom:0,bearing:0,pitch:0,minZoom:-2,maxZoom:22,minPitch:0,maxPitch:85,interactive:!0,scrollZoom:!0,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,cooperativeGestures:!1,performanceMetricsCollection:!0,bearingSnap:7,clickTolerance:3,pitchWithRotate:!0,hash:!1,attributionControl:!0,failIfMajorPerformanceCaveat:!1,preserveDrawingBuffer:!1,trackResize:!0,optimizeForTerrain:!0,renderWorldCopies:!0,refreshExpiredTiles:!0,minTileCacheSize:null,maxTileCacheSize:null,localIdeographFontFamily:"sans-serif",localFontFamily:null,transformRequest:null,accessToken:null,fadeDuration:300,respectPrefersReducedMotion:!0,crossSourceCollisions:!0},so={showCompass:!0,showZoom:!0,visualizePitch:!1};class lo{constructor(e,n){let r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];this._clickTolerance=10,this.element=n,this.mouseRotate=new bi({clickTolerance:e.dragRotate._mouseRotate._clickTolerance}),this.map=e,r&&(this.mousePitch=new xi({clickTolerance:e.dragRotate._mousePitch._clickTolerance})),t.bindAll(["mousedown","mousemove","mouseup","touchstart","touchmove","touchend","reset"],this),n.addEventListener("mousedown",this.mousedown),n.addEventListener("touchstart",this.touchstart,{passive:!1}),n.addEventListener("touchmove",this.touchmove),n.addEventListener("touchend",this.touchend),n.addEventListener("touchcancel",this.reset)}down(t,e){this.mouseRotate.mousedown(t,e),this.mousePitch&&this.mousePitch.mousedown(t,e),u()}move(t,e){const n=this.map,r=this.mouseRotate.mousemoveWindow(t,e),i=r&&r.bearingDelta;if(i&&n.setBearing(n.getBearing()+i),this.mousePitch){const r=this.mousePitch.mousemoveWindow(t,e),i=r&&r.pitchDelta;i&&n.setPitch(n.getPitch()+i)}}off(){const t=this.element;t.removeEventListener("mousedown",this.mousedown),t.removeEventListener("touchstart",this.touchstart,{passive:!1}),t.removeEventListener("touchmove",this.touchmove),t.removeEventListener("touchend",this.touchend),t.removeEventListener("touchcancel",this.reset),this.offTemp()}offTemp(){h(),t.window.removeEventListener("mousemove",this.mousemove),t.window.removeEventListener("mouseup",this.mouseup)}mousedown(e){this.down(t.extend({},e,{ctrlKey:!0,preventDefault:()=>e.preventDefault()}),p(this.element,e)),t.window.addEventListener("mousemove",this.mousemove),t.window.addEventListener("mouseup",this.mouseup)}mousemove(t){this.move(t,p(this.element,t))}mouseup(t){this.mouseRotate.mouseupWindow(t),this.mousePitch&&this.mousePitch.mouseupWindow(t),this.offTemp()}touchstart(t){1!==t.targetTouches.length?this.reset():(this._startPos=this._lastPos=m(this.element,t.targetTouches)[0],this.down({type:"mousedown",button:0,ctrlKey:!0,preventDefault:()=>t.preventDefault()},this._startPos))}touchmove(t){1!==t.targetTouches.length?this.reset():(this._lastPos=m(this.element,t.targetTouches)[0],this.move({preventDefault:()=>t.preventDefault()},this._lastPos))}touchend(t){0===t.targetTouches.length&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),this.reset()}reset(){this.mouseRotate.reset(),this.mousePitch&&this.mousePitch.reset(),delete this._startPos,delete this._lastPos,this.offTemp()}}const co={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0,showUserHeading:!1},uo={maxWidth:100,unit:"metric"},ho={kilometer:"km",meter:"m",mile:"mi",foot:"ft","nautical-mile":"nm"},fo={version:t.version,supported:n,setRTLTextPlugin:t.setRTLTextPlugin,getRTLTextPluginStatus:t.getRTLTextPluginStatus,Map:class extends Xi{constructor(e){if(t.LivePerformanceUtils.mark(t.PerformanceMarkers.create),null!=(e=t.extend({},ao,e)).minZoom&&null!=e.maxZoom&&e.minZoom>e.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if(null!=e.minPitch&&null!=e.maxPitch&&e.minPitch>e.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if(null!=e.minPitch&&e.minPitch<0)throw new Error("minPitch must be greater than or equal to 0");if(null!=e.maxPitch&&e.maxPitch>85)throw new Error("maxPitch must be less than or equal to 85");if(e.antialias&&t.isSafariWithAntialiasingBug(t.window)&&(e.antialias=!1,t.warnOnce("Antialiasing is disabled for this WebGL context to avoid browser bug: https://github.com/mapbox/mapbox-gl-js/issues/11609")),super(new Yr(e.minZoom,e.maxZoom,e.minPitch,e.maxPitch,e.renderWorldCopies),e),this._interactive=e.interactive,this._minTileCacheSize=e.minTileCacheSize,this._maxTileCacheSize=e.maxTileCacheSize,this._failIfMajorPerformanceCaveat=e.failIfMajorPerformanceCaveat,this._preserveDrawingBuffer=e.preserveDrawingBuffer,this._antialias=e.antialias,this._useWebGL2=e.useWebGL2,this._trackResize=e.trackResize,this._bearingSnap=e.bearingSnap,this._refreshExpiredTiles=e.refreshExpiredTiles,this._fadeDuration=e.fadeDuration,this._isInitialLoad=!0,this._crossSourceCollisions=e.crossSourceCollisions,this._collectResourceTiming=e.collectResourceTiming,this._optimizeForTerrain=e.optimizeForTerrain,this._language=this._parseLanguage(e.language),this._worldview=e.worldview,this._renderTaskQueue=new $i,this._domRenderTaskQueue=new $i,this._controls=[],this._markers=[],this._popups=[],this._mapId=t.uniqueId(),this._locale=t.extend({},oo,e.locale),this._clickTolerance=e.clickTolerance,this._cooperativeGestures=e.cooperativeGestures,this._performanceMetricsCollection=e.performanceMetricsCollection,this._containerWidth=0,this._containerHeight=0,this._averageElevationLastSampledAt=-1/0,this._averageElevationExaggeration=0,this._averageElevation=new io(0),this._interactionRange=[1/0,-1/0],this._visibilityHidden=0,this._useExplicitProjection=!1,this._requestManager=new t.RequestManager(e.transformRequest,e.accessToken,e.testMode),this._silenceAuthErrors=!!e.testMode,"string"==typeof e.container){if(this._container=t.window.document.getElementById(e.container),!this._container)throw new Error("Container '".concat(e.container,"' not found."))}else{if(!(e.container instanceof t.window.HTMLElement))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=e.container}if(this._container.childNodes.length>0&&t.warnOnce("The map container element should be empty, otherwise the map's interactivity will be negatively impacted. If you want to display a message when WebGL is not supported, use the Mapbox GL Supported plugin instead."),e.maxBounds&&this.setMaxBounds(e.maxBounds),t.bindAll(["_onWindowOnline","_onWindowResize","_onVisibilityChange","_onMapScroll","_contextLost","_contextRestored"],this),this._setupContainer(),this._setupPainter(),void 0===this.painter)throw new Error("Failed to initialize WebGL.");this.on("move",(()=>this._update(!1))),this.on("moveend",(()=>this._update(!1))),this.on("zoom",(()=>this._update(!0))),void 0!==t.window&&(t.window.addEventListener("online",this._onWindowOnline,!1),t.window.addEventListener("resize",this._onWindowResize,!1),t.window.addEventListener("orientationchange",this._onWindowResize,!1),t.window.addEventListener("webkitfullscreenchange",this._onWindowResize,!1),t.window.addEventListener("visibilitychange",this._onVisibilityChange,!1)),this.handlers=new Hi(this,e),this._localFontFamily=e.localFontFamily,this._localIdeographFontFamily=e.localIdeographFontFamily,e.style&&this.setStyle(e.style,{localFontFamily:this._localFontFamily,localIdeographFontFamily:this._localIdeographFontFamily}),e.projection&&this.setProjection(e.projection),this._hash=e.hash&&new $r("string"==typeof e.hash&&e.hash||void 0).addTo(this),this._hash&&this._hash._onHashChange()||(this.jumpTo({center:e.center,zoom:e.zoom,bearing:e.bearing,pitch:e.pitch}),e.bounds&&(this.resize(),this.fitBounds(e.bounds,t.extend({},e.fitBoundsOptions,{duration:0})))),this.resize(),e.attributionControl&&this.addControl(new Yi({customAttribution:e.customAttribution})),this._logoControl=new Ki,this.addControl(this._logoControl,e.logoPosition),this.on("style.load",(()=>{this.transform.unmodified&&this.jumpTo(this.style.stylesheet)})),this.on("data",(e=>{this._update("style"===e.dataType),this.fire(new t.Event("".concat(e.dataType,"data"),e))})),this.on("dataloading",(e=>{this.fire(new t.Event("".concat(e.dataType,"dataloading"),e))}))}_getMapId(){return this._mapId}addControl(e,n){if(void 0===n&&(n=e.getDefaultPosition?e.getDefaultPosition():"top-right"),!e||!e.onAdd)return this.fire(new t.ErrorEvent(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));const r=e.onAdd(this);this._controls.push(e);const i=this._controlPositions[n];return-1!==n.indexOf("bottom")?i.insertBefore(r,i.firstChild):i.appendChild(r),this}removeControl(e){if(!e||!e.onRemove)return this.fire(new t.ErrorEvent(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));const n=this._controls.indexOf(e);return n>-1&&this._controls.splice(n,1),e.onRemove(this),this}hasControl(t){return this._controls.indexOf(t)>-1}getContainer(){return this._container}getCanvasContainer(){return this._canvasContainer}getCanvas(){return this._canvas}resize(e){if(this._updateContainerDimensions(),this._containerWidth===this.transform.width&&this._containerHeight===this.transform.height)return this;this._resizeCanvas(this._containerWidth,this._containerHeight),this.transform.resize(this._containerWidth,this._containerHeight),this.painter.resize(Math.ceil(this._containerWidth),Math.ceil(this._containerHeight));const n=!this._moving;return n&&this.fire(new t.Event("movestart",e)).fire(new t.Event("move",e)),this.fire(new t.Event("resize",e)),n&&this.fire(new t.Event("moveend",e)),this}getBounds(){return this.transform.getBounds()}getMaxBounds(){return this.transform.getMaxBounds()||null}setMaxBounds(e){return this.transform.setMaxBounds(t.LngLatBounds.convert(e)),this._update()}setMinZoom(e){if((e=null==e?-2:e)>=-2&&e<=this.transform.maxZoom)return this.transform.minZoom=e,this._update(),this.getZoom()<e?this.setZoom(e):this.fire(new t.Event("zoomstart")).fire(new t.Event("zoom")).fire(new t.Event("zoomend")),this;throw new Error("minZoom must be between -2 and the current maxZoom, inclusive")}getMinZoom(){return this.transform.minZoom}setMaxZoom(e){if((e=null==e?22:e)>=this.transform.minZoom)return this.transform.maxZoom=e,this._update(),this.getZoom()>e?this.setZoom(e):this.fire(new t.Event("zoomstart")).fire(new t.Event("zoom")).fire(new t.Event("zoomend")),this;throw new Error("maxZoom must be greater than the current minZoom")}getMaxZoom(){return this.transform.maxZoom}setMinPitch(e){if((e=null==e?0:e)<0)throw new Error("minPitch must be greater than or equal to 0");if(e>=0&&e<=this.transform.maxPitch)return this.transform.minPitch=e,this._update(),this.getPitch()<e?this.setPitch(e):this.fire(new t.Event("pitchstart")).fire(new t.Event("pitch")).fire(new t.Event("pitchend")),this;throw new Error("minPitch must be between 0 and the current maxPitch, inclusive")}getMinPitch(){return this.transform.minPitch}setMaxPitch(e){if((e=null==e?85:e)>85)throw new Error("maxPitch must be less than or equal to 85");if(e>=this.transform.minPitch)return this.transform.maxPitch=e,this._update(),this.getPitch()>e?this.setPitch(e):this.fire(new t.Event("pitchstart")).fire(new t.Event("pitch")).fire(new t.Event("pitchend")),this;throw new Error("maxPitch must be greater than or equal to minPitch")}getMaxPitch(){return this.transform.maxPitch}getRenderWorldCopies(){return this.transform.renderWorldCopies}setRenderWorldCopies(t){return this.transform.renderWorldCopies=t,this.transform.renderWorldCopies||this._forceMarkerAndPopupUpdate(!0),this._update()}getLanguage(){return this._language}_parseLanguage(e){return"auto"===e?t.window.navigator.language:Array.isArray(e)?0===e.length?void 0:e.map((e=>"auto"===e?t.window.navigator.language:e)):e}setLanguage(t){const e=this._parseLanguage(t);if(!this.style||e===this._language)return this;this._language=e,this.style._reloadSources();for(const n of this._controls)n._setLanguage&&n._setLanguage(this._language);return this}getWorldview(){return this._worldview}setWorldview(t){return this.style&&t!==this._worldview?(this._worldview=t,this.style._reloadSources(),this):this}getProjection(){return this.transform.mercatorFromTransition?{name:"globe",center:[0,0]}:this.transform.getProjection()}_showingGlobe(){return"globe"===this.transform.projection.name}setProjection(t){return this._lazyInitEmptyStyle(),t?"string"==typeof t&&(t={name:t}):t=null,this._useExplicitProjection=!!t,this._prioritizeAndUpdateProjection(t,this.style.stylesheet?this.style.stylesheet.projection:null)}_updateProjectionTransition(){if("globe"!==this.getProjection().name)return;const e=this.transform,n=e.projection.name;let r;"globe"===n&&e.zoom>=t.GLOBE_ZOOM_THRESHOLD_MAX?(e.setMercatorFromTransition(),r=!0):"mercator"===n&&e.zoom<t.GLOBE_ZOOM_THRESHOLD_MAX&&(e.setProjection({name:"globe"}),r=!0),r&&(this.style.applyProjectionUpdate(),this.style._forceSymbolLayerUpdate())}_prioritizeAndUpdateProjection(t,e){return this._updateProjection(t||e||{name:"mercator"})}_updateProjection(e){let n;if(n="globe"===e.name&&this.transform.zoom>=t.GLOBE_ZOOM_THRESHOLD_MAX?this.transform.setMercatorFromTransition():this.transform.setProjection(e),this.style.applyProjectionUpdate(),n){this.painter.clearBackgroundTiles();for(const t in this.style._sourceCaches)this.style._sourceCaches[t].clearTiles();this._update(!0),this._forceMarkerAndPopupUpdate(!0)}return this}project(e){return this.transform.locationPoint3D(t.LngLat.convert(e))}unproject(e){return this.transform.pointLocation3D(t.Point.convert(e))}isMoving(){return this._moving||this.handlers&&this.handlers.isMoving()||!1}isZooming(){return this._zooming||this.handlers&&this.handlers.isZooming()||!1}isRotating(){return this._rotating||this.handlers&&this.handlers.isRotating()||!1}_isDragging(){return this.handlers&&this.handlers._isDragging()||!1}_createDelegatedListener(t,e,n){if("mouseenter"===t||"mouseover"===t){let r=!1;const i=i=>{const o=e.filter((t=>this.getLayer(t))),a=o.length?this.queryRenderedFeatures(i.point,{layers:o}):[];a.length?r||(r=!0,n.call(this,new si(t,this,i.originalEvent,{features:a}))):r=!1},o=()=>{r=!1};return{layers:new Set(e),listener:n,delegates:{mousemove:i,mouseout:o}}}if("mouseleave"===t||"mouseout"===t){let r=!1;const i=i=>{const o=e.filter((t=>this.getLayer(t)));(o.length?this.queryRenderedFeatures(i.point,{layers:o}):[]).length?r=!0:r&&(r=!1,n.call(this,new si(t,this,i.originalEvent)))},o=e=>{r&&(r=!1,n.call(this,new si(t,this,e.originalEvent)))};return{layers:new Set(e),listener:n,delegates:{mousemove:i,mouseout:o}}}{const r=t=>{const r=e.filter((t=>this.getLayer(t))),i=r.length?this.queryRenderedFeatures(t.point,{layers:r}):[];i.length&&(t.features=i,n.call(this,t),delete t.features)};return{layers:new Set(e),listener:n,delegates:{[t]:r}}}}on(t,e,n){if(void 0===n)return super.on(t,e);Array.isArray(e)||(e=[e]);const r=this._createDelegatedListener(t,e,n);this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[t]=this._delegatedListeners[t]||[],this._delegatedListeners[t].push(r);for(const i in r.delegates)this.on(i,r.delegates[i]);return this}once(t,e,n){if(void 0===n)return super.once(t,e);Array.isArray(e)||(e=[e]);const r=this._createDelegatedListener(t,e,n);for(const i in r.delegates)this.once(i,r.delegates[i]);return this}off(t,e,n){if(void 0===n)return super.off(t,e);e=new Set(Array.isArray(e)?e:[e]);const r=(t,e)=>{if(t.size!==e.size)return!1;for(const n of t)if(!e.has(n))return!1;return!0},i=this._delegatedListeners?this._delegatedListeners[t]:void 0;return i&&(t=>{for(let i=0;i<t.length;i++){const o=t[i];if(o.listener===n&&r(o.layers,e)){for(const t in o.delegates)this.off(t,o.delegates[t]);return t.splice(i,1),this}}})(i),this}queryRenderedFeatures(e,n){return this.style?(void 0!==n||void 0===e||e instanceof t.Point||Array.isArray(e)||(n=e,e=void 0),this.style.queryRenderedFeatures(e=e||[[0,0],[this.transform.width,this.transform.height]],n=n||{},this.transform)):[]}querySourceFeatures(t,e){return this.style.querySourceFeatures(t,e)}isPointOnSurface(e){const{name:n}=this.transform.projection;return"globe"!==n&&"mercator"!==n&&t.warnOnce("".concat(n," projection does not support isPointOnSurface, this API may behave unexpectedly.")),this.transform.isPointOnSurface(t.Point.convert(e))}setStyle(e,n){return!1!==(n=t.extend({},{localIdeographFontFamily:this._localIdeographFontFamily,localFontFamily:this._localFontFamily},n)).diff&&n.localIdeographFontFamily===this._localIdeographFontFamily&&n.localFontFamily===this._localFontFamily&&this.style&&e?(this._diffStyle(e,n),this):(this._localIdeographFontFamily=n.localIdeographFontFamily,this._localFontFamily=n.localFontFamily,this._updateStyle(e,n))}_getUIString(t){const e=this._locale[t];if(null==e)throw new Error("Missing UI string '".concat(t,"'"));return e}_updateStyle(t,e){return this.style&&(this.style.setEventedParent(null),this.style._remove(),this.style=void 0),t&&(this.style=new $e(this,e||{}),this.style.setEventedParent(this,{style:this.style}),"string"==typeof t?this.style.loadURL(t):this.style.loadJSON(t)),this._updateTerrain(),this}_lazyInitEmptyStyle(){this.style||(this.style=new $e(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())}_diffStyle(e,n){if("string"==typeof e){const r=this._requestManager.normalizeStyleURL(e),i=this._requestManager.transformRequest(r,t.ResourceType.Style);t.getJSON(i,((e,r)=>{e?this.fire(new t.ErrorEvent(e)):r&&this._updateDiff(r,n)}))}else"object"==typeof e&&this._updateDiff(e,n)}_updateDiff(e,n){try{this.style.setState(e)&&this._update(!0)}catch(r){t.warnOnce("Unable to perform style diff: ".concat(r.message||r.error||r,".  Rebuilding the style from scratch.")),this._updateStyle(e,n)}}getStyle(){if(this.style)return this.style.serialize()}isStyleLoaded(){return this.style?this.style.loaded():(t.warnOnce("There is no style added to the map."),!1)}addSource(t,e){return this._lazyInitEmptyStyle(),this.style.addSource(t,e),this._update(!0)}isSourceLoaded(t){return!!this.style&&this.style._isSourceCacheLoaded(t)}areTilesLoaded(){const t=this.style&&this.style._sourceCaches;for(const e in t){const n=t[e]._tiles;for(const t in n){const e=n[t];if("loaded"!==e.state&&"errored"!==e.state)return!1}}return!0}addSourceType(t,e,n){this._lazyInitEmptyStyle(),this.style.addSourceType(t,e,n)}removeSource(t){return this.style.removeSource(t),this._updateTerrain(),this._update(!0)}getSource(t){return this.style.getSource(t)}addImage(e,n){let{pixelRatio:r=1,sdf:i=!1,stretchX:o,stretchY:a,content:s}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(this._lazyInitEmptyStyle(),n instanceof t.window.HTMLImageElement||t.window.ImageBitmap&&n instanceof t.window.ImageBitmap){const{width:l,height:c,data:u}=t.exported.getImageData(n);this.style.addImage(e,{data:new t.RGBAImage({width:l,height:c},u),pixelRatio:r,stretchX:o,stretchY:a,content:s,sdf:i,version:0})}else if(void 0===n.width||void 0===n.height)this.fire(new t.ErrorEvent(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));else{const{width:l,height:c}=n,u=n;this.style.addImage(e,{data:new t.RGBAImage({width:l,height:c},new Uint8Array(u.data)),pixelRatio:r,stretchX:o,stretchY:a,content:s,sdf:i,version:0,userImage:u}),u.onAdd&&u.onAdd(this,e)}}updateImage(e,n){const r=this.style.getImage(e);if(!r)return void this.fire(new t.ErrorEvent(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));const i=n instanceof t.window.HTMLImageElement||t.window.ImageBitmap&&n instanceof t.window.ImageBitmap?t.exported.getImageData(n):n,{width:o,height:a}=i;void 0!==o&&void 0!==a?o===r.data.width&&a===r.data.height?(r.data.replace(i.data,!(n instanceof t.window.HTMLImageElement||t.window.ImageBitmap&&n instanceof t.window.ImageBitmap)),this.style.updateImage(e,r)):this.fire(new t.ErrorEvent(new Error("The width and height of the updated image (".concat(o,", ").concat(a,")\n                must be that same as the previous version of the image\n                (").concat(r.data.width,", ").concat(r.data.height,")")))):this.fire(new t.ErrorEvent(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")))}hasImage(e){return e?!!this.style.getImage(e):(this.fire(new t.ErrorEvent(new Error("Missing required image id"))),!1)}removeImage(t){this.style.removeImage(t)}loadImage(e,n){t.getImage(this._requestManager.transformRequest(e,t.ResourceType.Image),((e,r)=>{n(e,r instanceof t.window.HTMLImageElement?t.exported.getImageData(r):r)}))}listImages(){return this.style.listImages()}addLayer(t,e){return this._lazyInitEmptyStyle(),this.style.addLayer(t,e),this._update(!0)}moveLayer(t,e){return this.style.moveLayer(t,e),this._update(!0)}removeLayer(t){return this.style.removeLayer(t),this._update(!0)}getLayer(t){return this.style.getLayer(t)}setLayerZoomRange(t,e,n){return this.style.setLayerZoomRange(t,e,n),this._update(!0)}setFilter(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return this.style.setFilter(t,e,n),this._update(!0)}getFilter(t){return this.style.getFilter(t)}setPaintProperty(t,e,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return this.style.setPaintProperty(t,e,n,r),this._update(!0)}getPaintProperty(t,e){return this.style.getPaintProperty(t,e)}setLayoutProperty(t,e,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return this.style.setLayoutProperty(t,e,n,r),this._update(!0)}getLayoutProperty(t,e){return this.style.getLayoutProperty(t,e)}setLight(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this._lazyInitEmptyStyle(),this.style.setLight(t,e),this._update(!0)}getLight(){return this.style.getLight()}setTerrain(t){return this._lazyInitEmptyStyle(),!t&&this.transform.projection.requiresDraping?this.style.setTerrainForDraping():this.style.setTerrain(t),this._averageElevationLastSampledAt=-1/0,this._update(!0)}getTerrain(){return this.style?this.style.getTerrain():null}setFog(t){return this._lazyInitEmptyStyle(),this.style.setFog(t),this._update(!0)}getFog(){return this.style?this.style.getFog():null}_queryFogOpacity(e){return this.style&&this.style.fog?this.style.fog.getOpacityAtLatLng(t.LngLat.convert(e),this.transform):0}setFeatureState(t,e){return this.style.setFeatureState(t,e),this._update()}removeFeatureState(t,e){return this.style.removeFeatureState(t,e),this._update()}getFeatureState(t){return this.style.getFeatureState(t)}_updateContainerDimensions(){if(!this._container)return;const e=this._container.getBoundingClientRect().width||400,n=this._container.getBoundingClientRect().height||300;let r,i,o,a=this._container;for(;a&&(!i||!o);){const e=t.window.getComputedStyle(a).transform;e&&"none"!==e&&(r=e.match(/matrix.*\((.+)\)/)[1].split(", "),r[0]&&"0"!==r[0]&&"1"!==r[0]&&(i=r[0]),r[3]&&"0"!==r[3]&&"1"!==r[3]&&(o=r[3])),a=a.parentElement}this._containerWidth=i?Math.abs(e/i):e,this._containerHeight=o?Math.abs(n/o):n}_detectMissingCSS(){"rgb(250, 128, 114)"!==t.window.getComputedStyle(this._missingCSSCanary).getPropertyValue("background-color")&&t.warnOnce("This page appears to be missing CSS declarations for Mapbox GL JS, which may cause the map to display incorrectly. Please ensure your page includes mapbox-gl.css, as described in https://www.mapbox.com/mapbox-gl-js/api/.")}_setupContainer(){const t=this._container;t.classList.add("mapboxgl-map"),(this._missingCSSCanary=o("div","mapboxgl-canary",t)).style.visibility="hidden",this._detectMissingCSS();const e=this._canvasContainer=o("div","mapboxgl-canvas-container",t);this._interactive&&e.classList.add("mapboxgl-interactive"),this._canvas=o("canvas","mapboxgl-canvas",e),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex","0"),this._canvas.setAttribute("aria-label",this._getUIString("Map.Title")),this._canvas.setAttribute("role","region"),this._updateContainerDimensions(),this._resizeCanvas(this._containerWidth,this._containerHeight);const n=this._controlContainer=o("div","mapboxgl-control-container",t),r=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach((t=>{r[t]=o("div","mapboxgl-ctrl-".concat(t),n)})),this._container.addEventListener("scroll",this._onMapScroll,!1)}_resizeCanvas(e,n){const r=t.exported.devicePixelRatio||1;this._canvas.width=r*Math.ceil(e),this._canvas.height=r*Math.ceil(n),this._canvas.style.width="".concat(e,"px"),this._canvas.style.height="".concat(n,"px")}_addMarker(t){this._markers.push(t)}_removeMarker(t){const e=this._markers.indexOf(t);-1!==e&&this._markers.splice(e,1)}_addPopup(t){this._popups.push(t)}_removePopup(t){const e=this._popups.indexOf(t);-1!==e&&this._popups.splice(e,1)}_setupPainter(){const e=t.extend({},n.webGLContextAttributes,{failIfMajorPerformanceCaveat:this._failIfMajorPerformanceCaveat,preserveDrawingBuffer:this._preserveDrawingBuffer,antialias:this._antialias||!1}),r=this._useWebGL2&&this._canvas.getContext("webgl2",e),i=r||this._canvas.getContext("webgl",e)||this._canvas.getContext("experimental-webgl",e);i?(this._useWebGL2&&!r&&t.warnOnce("Failed to create WebGL 2 context. Using WebGL 1."),t.storeAuthState(i,!0),this.painter=new Rr(i,this.transform,!!r),this.on("data",(t=>{"source"===t.dataType&&this.painter.setTileLoadedFlag(!0)})),t.exported$1.testSupport(i)):this.fire(new t.ErrorEvent(new Error("Failed to initialize WebGL")))}_contextLost(e){e.preventDefault(),this._frame&&(this._frame.cancel(),this._frame=null),this.fire(new t.Event("webglcontextlost",{originalEvent:e}))}_contextRestored(e){this._setupPainter(),this.resize(),this._update(),this.fire(new t.Event("webglcontextrestored",{originalEvent:e}))}_onMapScroll(t){if(t.target===this._container)return this._container.scrollTop=0,this._container.scrollLeft=0,!1}loaded(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()}_update(t){return this.style?(this._styleDirty=this._styleDirty||t,this._sourcesDirty=!0,this.triggerRepaint(),this):this}_requestRenderFrame(t){return this._update(),this._renderTaskQueue.add(t)}_cancelRenderFrame(t){this._renderTaskQueue.remove(t)}_requestDomTask(t){!this.loaded()||this.loaded()&&!this.isMoving()?t():this._domRenderTaskQueue.add(t)}_render(e){let n;const r=this.painter.context.extTimerQuery,i=t.exported.now();if(this.listens("gpu-timing-frame")&&(n=r.createQueryEXT(),r.beginQueryEXT(r.TIME_ELAPSED_EXT,n)),this.painter.context.setDirty(),this.painter.setBaseState(),(this.isMoving()||this.isRotating()||this.isZooming())&&(this._interactionRange[0]=Math.min(this._interactionRange[0],t.window.performance.now()),this._interactionRange[1]=Math.max(this._interactionRange[1],t.window.performance.now())),this._renderTaskQueue.run(e),this._domRenderTaskQueue.run(e),this._removed)return;this._updateProjectionTransition();const o=this._isInitialLoad?0:this._fadeDuration;if(this.style&&this._styleDirty){this._styleDirty=!1;const e=this.transform.zoom,n=this.transform.pitch,r=t.exported.now(),i=new t.EvaluationParameters(e,{now:r,fadeDuration:o,pitch:n,transition:this.style.getTransition()});this.style.update(i)}this.style&&this.style.fog&&this.style.fog.hasTransition()&&(this.style._markersNeedUpdate=!0,this._sourcesDirty=!0);let a=!1;if(this.style&&this._sourcesDirty?(this._sourcesDirty=!1,this.painter._updateFog(this.style),this._updateTerrain(),a=this._updateAverageElevation(i),this.style._updateSources(this.transform),this._forceMarkerAndPopupUpdate()):a=this._updateAverageElevation(i),this._placementDirty=this.style&&this.style._updatePlacement(this.painter.transform,this.showCollisionBoxes,o,this._crossSourceCollisions),this.style&&this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showTerrainWireframe:this.showTerrainWireframe,showOverdrawInspector:this._showOverdrawInspector,showQueryGeometry:!!this._showQueryGeometry,showTileAABBs:this.showTileAABBs,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:o,isInitialLoad:this._isInitialLoad,showPadding:this.showPadding,gpuTiming:!!this.listens("gpu-timing-layer"),gpuTimingDeferredRender:!!this.listens("gpu-timing-deferred-render"),speedIndexTiming:this.speedIndexTiming}),this.fire(new t.Event("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,this.fire(new t.Event("load"))),this.style&&this.style.hasTransitions()&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles(),n){const e=t.exported.now()-i;r.endQueryEXT(r.TIME_ELAPSED_EXT,n),setTimeout((()=>{const o=r.getQueryObjectEXT(n,r.QUERY_RESULT_EXT)/1e6;r.deleteQueryEXT(n),this.fire(new t.Event("gpu-timing-frame",{cpuTime:e,gpuTime:o})),t.window.performance.mark("frame-gpu",{startTime:i,detail:{gpuTime:o}})}),50)}if(this.listens("gpu-timing-layer")){const e=this.painter.collectGpuTimers();setTimeout((()=>{const n=this.painter.queryGpuTimers(e);this.fire(new t.Event("gpu-timing-layer",{layerTimes:n}))}),50)}if(this.listens("gpu-timing-deferred-render")){const e=this.painter.collectDeferredRenderGpuQueries();setTimeout((()=>{const n=this.painter.queryGpuTimeDeferredRender(e);this.fire(new t.Event("gpu-timing-deferred-render",{gpuTime:n}))}),50)}const s=this._sourcesDirty||this._styleDirty||this._placementDirty||a;if(s||this._repaint)this.triggerRepaint();else{const e=!this.isMoving()&&this.loaded();if(e&&(a=this._updateAverageElevation(i,!0)),a)this.triggerRepaint();else if(this._triggerFrame(!1),e&&(this.fire(new t.Event("idle")),this._isInitialLoad=!1,this.speedIndexTiming)){const e=this._calculateSpeedIndex();this.fire(new t.Event("speedindexcompleted",{speedIndex:e})),this.speedIndexTiming=!1}}!this._loaded||this._fullyLoaded||s||(this._fullyLoaded=!0,t.LivePerformanceUtils.mark(t.PerformanceMarkers.fullLoad),this._performanceMetricsCollection&&t.postPerformanceEvent(this._requestManager._customAccessToken,{width:this.painter.width,height:this.painter.height,interactionRange:this._interactionRange,visibilityHidden:this._visibilityHidden,terrainEnabled:!!this.painter.style.getTerrain(),fogEnabled:!!this.painter.style.getFog(),projection:this.getProjection().name,zoom:this.transform.zoom,renderer:this.painter.context.renderer,vendor:this.painter.context.vendor}),this._authenticate())}_forceMarkerAndPopupUpdate(t){for(const e of this._markers)t&&!this.getRenderWorldCopies()&&(e._lngLat=e._lngLat.wrap()),e._update();for(const e of this._popups)!t||this.getRenderWorldCopies()||e._trackPointer||(e._lngLat=e._lngLat.wrap()),e._update()}_updateAverageElevation(t){let e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const n=t=>(this.transform.averageElevation=t,this._update(!1),!0);if(!this.painter.averageElevationNeedsEasing())return 0!==this.transform.averageElevation&&n(0);if((e||t-this._averageElevationLastSampledAt>500)&&!this._averageElevation.isEasing(t)){const e=this.transform.averageElevation;let r=this.transform.sampleAverageElevation(),i=!1;this.transform.elevation&&(i=this.transform.elevation.exaggeration()!==this._averageElevationExaggeration,this._averageElevationExaggeration=this.transform.elevation.exaggeration()),isNaN(r)?r=0:this._averageElevationLastSampledAt=t;const o=Math.abs(e-r);if(o>1){if(this._isInitialLoad||i)return this._averageElevation.jumpTo(r),n(r);this._averageElevation.easeTo(r,t,300)}else if(o>1e-4)return this._averageElevation.jumpTo(r),n(r)}return!!this._averageElevation.isEasing(t)&&n(this._averageElevation.getValue(t))}_authenticate(){t.getMapSessionAPI(this._getMapId(),this._requestManager._skuToken,this._requestManager._customAccessToken,(e=>{if(e&&(e.message===t.AUTH_ERR_MSG||401===e.status)){const e=this.painter.context.gl;t.storeAuthState(e,!1),this._logoControl instanceof Ki&&this._logoControl._updateLogo(),e&&e.clear(e.DEPTH_BUFFER_BIT|e.COLOR_BUFFER_BIT|e.STENCIL_BUFFER_BIT),this._silenceAuthErrors||this.fire(new t.ErrorEvent(new Error("A valid Mapbox access token is required to use Mapbox GL JS. To create an account or a new access token, visit https://account.mapbox.com/")))}})),t.postMapLoadEvent(this._getMapId(),this._requestManager._skuToken,this._requestManager._customAccessToken,(()=>{}))}_updateTerrain(){const t=this._isDragging();this.painter.updateTerrain(this.style,t)}_calculateSpeedIndex(){const t=this.painter.canvasCopy(),e=this.painter.getCanvasCopiesAndTimestamps();e.timeStamps.push(performance.now());const n=this.painter.context.gl,r=n.createFramebuffer();function i(t){n.framebufferTexture2D(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,t,0);const e=new Uint8Array(n.drawingBufferWidth*n.drawingBufferHeight*4);return n.readPixels(0,0,n.drawingBufferWidth,n.drawingBufferHeight,n.RGBA,n.UNSIGNED_BYTE,e),e}return n.bindFramebuffer(n.FRAMEBUFFER,r),this._canvasPixelComparison(i(t),e.canvasCopies.map(i),e.timeStamps)}_canvasPixelComparison(t,e,n){let r=n[1]-n[0];const i=t.length/4;for(let o=0;o<e.length;o++){const a=e[o];let s=0;for(let e=0;e<a.length;e+=4)a[e]===t[e]&&a[e+1]===t[e+1]&&a[e+2]===t[e+2]&&a[e+3]===t[e+3]&&(s+=1);r+=(n[o+2]-n[o+1])*(1-s/i)}return r}remove(){this._hash&&this._hash.remove();for(const t of this._controls)t.onRemove(this);this._controls=[],this._frame&&(this._frame.cancel(),this._frame=null),this._renderTaskQueue.clear(),this._domRenderTaskQueue.clear(),this.style&&this.style.destroy(),this.painter.destroy(),this.handlers&&this.handlers.destroy(),this.handlers=void 0,this.setStyle(null),void 0!==t.window&&(t.window.removeEventListener("resize",this._onWindowResize,!1),t.window.removeEventListener("orientationchange",this._onWindowResize,!1),t.window.removeEventListener("webkitfullscreenchange",this._onWindowResize,!1),t.window.removeEventListener("online",this._onWindowOnline,!1),t.window.removeEventListener("visibilitychange",this._onVisibilityChange,!1));const e=this.painter.context.gl.getExtension("WEBGL_lose_context");e&&e.loseContext(),this._canvas.removeEventListener("webglcontextlost",this._contextLost,!1),this._canvas.removeEventListener("webglcontextrestored",this._contextRestored,!1),this._canvasContainer.remove(),this._controlContainer.remove(),this._missingCSSCanary.remove(),this._canvas=void 0,this._canvasContainer=void 0,this._controlContainer=void 0,this._missingCSSCanary=void 0,this._container.classList.remove("mapboxgl-map"),this._container.removeEventListener("scroll",this._onMapScroll,!1),t.removeAuthState(this.painter.context.gl),this._removed=!0,this.fire(new t.Event("remove"))}triggerRepaint(){this._triggerFrame(!0)}_triggerFrame(e){this._renderNextFrame=this._renderNextFrame||e,this.style&&!this._frame&&(this._frame=t.exported.frame((t=>{const e=!!this._renderNextFrame;this._frame=null,this._renderNextFrame=null,e&&this._render(t)})))}_preloadTiles(e){const n=this.style?Object.values(this.style._sourceCaches):[];return t.asyncAll(n,((t,n)=>t._preloadTiles(e,n)),(()=>{this.triggerRepaint()})),this}_onWindowOnline(){this._update()}_onWindowResize(t){this._trackResize&&this.resize({originalEvent:t})._update()}_onVisibilityChange(){"hidden"===t.window.document.visibilityState&&this._visibilityHidden++}get showTileBoundaries(){return!!this._showTileBoundaries}set showTileBoundaries(t){this._showTileBoundaries!==t&&(this._showTileBoundaries=t,this._update())}get showTerrainWireframe(){return!!this._showTerrainWireframe}set showTerrainWireframe(t){this._showTerrainWireframe!==t&&(this._showTerrainWireframe=t,this._update())}get speedIndexTiming(){return!!this._speedIndexTiming}set speedIndexTiming(t){this._speedIndexTiming!==t&&(this._speedIndexTiming=t,this._update())}get showPadding(){return!!this._showPadding}set showPadding(t){this._showPadding!==t&&(this._showPadding=t,this._update())}get showCollisionBoxes(){return!!this._showCollisionBoxes}set showCollisionBoxes(t){this._showCollisionBoxes!==t&&(this._showCollisionBoxes=t,t?this.style._generateCollisionBoxes():this._update())}get showOverdrawInspector(){return!!this._showOverdrawInspector}set showOverdrawInspector(t){this._showOverdrawInspector!==t&&(this._showOverdrawInspector=t,this._update())}get repaint(){return!!this._repaint}set repaint(t){this._repaint!==t&&(this._repaint=t,this.triggerRepaint())}get vertices(){return!!this._vertices}set vertices(t){this._vertices=t,this._update()}get showTileAABBs(){return!!this._showTileAABBs}set showTileAABBs(t){this._showTileAABBs!==t&&(this._showTileAABBs=t,t&&this._update())}_setCacheLimits(e,n){t.setCacheLimits(e,n)}get version(){return t.version}},NavigationControl:class{constructor(e){this.options=t.extend({},so,e),this._container=o("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._container.addEventListener("contextmenu",(t=>t.preventDefault())),this.options.showZoom&&(t.bindAll(["_setButtonTitle","_updateZoomButtons"],this),this._zoomInButton=this._createButton("mapboxgl-ctrl-zoom-in",(t=>{this._map&&this._map.zoomIn({},{originalEvent:t})})),o("span","mapboxgl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden","true"),this._zoomOutButton=this._createButton("mapboxgl-ctrl-zoom-out",(t=>{this._map&&this._map.zoomOut({},{originalEvent:t})})),o("span","mapboxgl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden","true")),this.options.showCompass&&(t.bindAll(["_rotateCompassArrow"],this),this._compass=this._createButton("mapboxgl-ctrl-compass",(t=>{const e=this._map;e&&(this.options.visualizePitch?e.resetNorthPitch({},{originalEvent:t}):e.resetNorth({},{originalEvent:t}))})),this._compassIcon=o("span","mapboxgl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden","true"))}_updateZoomButtons(){const t=this._map;if(!t)return;const e=t.getZoom(),n=e===t.getMaxZoom(),r=e===t.getMinZoom();this._zoomInButton.disabled=n,this._zoomOutButton.disabled=r,this._zoomInButton.setAttribute("aria-disabled",n.toString()),this._zoomOutButton.setAttribute("aria-disabled",r.toString())}_rotateCompassArrow(){const t=this._map;if(!t)return;const e=this.options.visualizePitch?"scale(".concat(1/Math.pow(Math.cos(t.transform.pitch*(Math.PI/180)),.5),") rotateX(").concat(t.transform.pitch,"deg) rotateZ(").concat(t.transform.angle*(180/Math.PI),"deg)"):"rotate(".concat(t.transform.angle*(180/Math.PI),"deg)");t._requestDomTask((()=>{this._compassIcon&&(this._compassIcon.style.transform=e)}))}onAdd(t){return this._map=t,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),t.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&t.on("pitch",this._rotateCompassArrow),t.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new lo(t,this._compass,this.options.visualizePitch)),this._container}onRemove(){const t=this._map;t&&(this._container.remove(),this.options.showZoom&&t.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&t.off("pitch",this._rotateCompassArrow),t.off("rotate",this._rotateCompassArrow),this._handler&&this._handler.off(),this._handler=void 0),this._map=void 0)}_createButton(t,e){const n=o("button",t,this._container);return n.type="button",n.addEventListener("click",e),n}_setButtonTitle(t,e){if(!this._map)return;const n=this._map._getUIString("NavigationControl.".concat(e));t.setAttribute("aria-label",n),t.firstElementChild&&t.firstElementChild.setAttribute("title",n)}},GeolocateControl:class extends t.Evented{constructor(e){super(),this.options=t.extend({geolocation:t.window.navigator.geolocation},co,e),t.bindAll(["_onSuccess","_onError","_onZoom","_finish","_setupUI","_updateCamera","_updateMarker","_updateMarkerRotation","_onDeviceOrientation"],this),this._updateMarkerRotationThrottled=Kr(this._updateMarkerRotation,20),this._numberOfWatches=0}onAdd(t){return this._map=t,this._container=o("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._checkGeolocationSupport(this._setupUI),this._container}onRemove(){void 0!==this._geolocationWatchID&&(this.options.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),this._container.remove(),this._map.off("zoom",this._onZoom),this._map=void 0,this._numberOfWatches=0,this._noTimeout=!1}_checkGeolocationSupport(e){var n=this;const r=function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:!!n.options.geolocation;n._supportsGeolocation=t,e(t)};void 0!==this._supportsGeolocation?e(this._supportsGeolocation):void 0!==t.window.navigator.permissions?t.window.navigator.permissions.query({name:"geolocation"}).then((t=>r("denied"!==t.state))).catch((()=>r())):r()}_isOutOfMapMaxBounds(t){const e=this._map.getMaxBounds(),n=t.coords;return!!e&&(n.longitude<e.getWest()||n.longitude>e.getEast()||n.latitude<e.getSouth()||n.latitude>e.getNorth())}_setErrorState(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting")}}_onSuccess(e){if(this._map){if(this._isOutOfMapMaxBounds(e))return this._setErrorState(),this.fire(new t.Event("outofmaxbounds",e)),this._updateMarker(),void this._finish();if(this.options.trackUserLocation)switch(this._lastKnownPosition=e,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background")}this.options.showUserLocation&&"OFF"!==this._watchState&&this._updateMarker(e),this.options.trackUserLocation&&"ACTIVE_LOCK"!==this._watchState||this._updateCamera(e),this.options.showUserLocation&&this._dotElement.classList.remove("mapboxgl-user-location-dot-stale"),this.fire(new t.Event("geolocate",e)),this._finish()}}_updateCamera(e){const n=new t.LngLat(e.coords.longitude,e.coords.latitude),r=e.coords.accuracy,i=this._map.getBearing(),o=t.extend({bearing:i},this.options.fitBoundsOptions);this._map.fitBounds(n.toBounds(r),o,{geolocateSource:!0})}_updateMarker(e){if(e){const n=new t.LngLat(e.coords.longitude,e.coords.latitude);this._accuracyCircleMarker.setLngLat(n).addTo(this._map),this._userLocationDotMarker.setLngLat(n).addTo(this._map),this._accuracy=e.coords.accuracy,this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()}_updateCircleRadius(){const e=this._map.transform,n=t.mercatorZfromAltitude(1,e._center.lat)*e.worldSize,r=Math.ceil(2*this._accuracy*n);this._circleElement.style.width="".concat(r,"px"),this._circleElement.style.height="".concat(r,"px")}_onZoom(){this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}_updateMarkerRotation(){this._userLocationDotMarker&&"number"==typeof this._heading?(this._userLocationDotMarker.setRotation(this._heading),this._dotElement.classList.add("mapboxgl-user-location-show-heading")):(this._dotElement.classList.remove("mapboxgl-user-location-show-heading"),this._userLocationDotMarker.setRotation(0))}_onError(e){if(this._map){if(this.options.trackUserLocation)if(1===e.code){this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;const t=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.setAttribute("aria-label",t),this._geolocateButton.firstElementChild&&this._geolocateButton.firstElementChild.setAttribute("title",t),void 0!==this._geolocationWatchID&&this._clearWatch()}else{if(3===e.code&&this._noTimeout)return;this._setErrorState()}"OFF"!==this._watchState&&this.options.showUserLocation&&this._dotElement.classList.add("mapboxgl-user-location-dot-stale"),this.fire(new t.Event("error",e)),this._finish()}}_finish(){this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0}_setupUI(e){if(void 0!==this._map){if(this._container.addEventListener("contextmenu",(t=>t.preventDefault())),this._geolocateButton=o("button","mapboxgl-ctrl-geolocate",this._container),o("span","mapboxgl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden","true"),this._geolocateButton.type="button",!1===e){t.warnOnce("Geolocation support is not available so the GeolocateControl will be disabled.");const e=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.setAttribute("aria-label",e),this._geolocateButton.firstElementChild&&this._geolocateButton.firstElementChild.setAttribute("title",e)}else{const t=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.setAttribute("aria-label",t),this._geolocateButton.firstElementChild&&this._geolocateButton.firstElementChild.setAttribute("title",t)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=o("div","mapboxgl-user-location"),this._dotElement.appendChild(o("div","mapboxgl-user-location-dot")),this._dotElement.appendChild(o("div","mapboxgl-user-location-heading")),this._userLocationDotMarker=new to({element:this._dotElement,rotationAlignment:"map",pitchAlignment:"map"}),this._circleElement=o("div","mapboxgl-user-location-accuracy-circle"),this._accuracyCircleMarker=new to({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onZoom)),this._geolocateButton.addEventListener("click",this.trigger.bind(this)),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",(e=>{e.geolocateSource||"ACTIVE_LOCK"!==this._watchState||e.originalEvent&&"resize"===e.originalEvent.type||(this._watchState="BACKGROUND",this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this.fire(new t.Event("trackuserlocationend")))}))}}_onDeviceOrientation(t){this._userLocationDotMarker&&(t.webkitCompassHeading?this._heading=t.webkitCompassHeading:!0===t.absolute&&(this._heading=-1*t.alpha),this._updateMarkerRotationThrottled())}trigger(){if(!this._setup)return t.warnOnce("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new t.Event("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":this._numberOfWatches--,this._noTimeout=!1,this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this.fire(new t.Event("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new t.Event("trackuserlocationstart"))}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"BACKGROUND":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background");break;case"BACKGROUND_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error")}if("OFF"===this._watchState&&void 0!==this._geolocationWatchID)this._clearWatch();else if(void 0===this._geolocationWatchID){let t;this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),this._numberOfWatches++,this._numberOfWatches>1?(t={maximumAge:6e5,timeout:0},this._noTimeout=!0):(t=this.options.positionOptions,this._noTimeout=!1),this._geolocationWatchID=this.options.geolocation.watchPosition(this._onSuccess,this._onError,t),this.options.showUserHeading&&this._addDeviceOrientationListener()}}else this.options.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0}_addDeviceOrientationListener(){const e=()=>{t.window.addEventListener("ondeviceorientationabsolute"in t.window?"deviceorientationabsolute":"deviceorientation",this._onDeviceOrientation)};void 0!==t.window.DeviceMotionEvent&&"function"==typeof t.window.DeviceMotionEvent.requestPermission?DeviceOrientationEvent.requestPermission().then((t=>{"granted"===t&&e()})).catch(console.error):e()}_clearWatch(){this.options.geolocation.clearWatch(this._geolocationWatchID),t.window.removeEventListener("deviceorientation",this._onDeviceOrientation),t.window.removeEventListener("deviceorientationabsolute",this._onDeviceOrientation),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)}},AttributionControl:Yi,ScaleControl:class{constructor(e){this.options=t.extend({},uo,e),this._isNumberFormatSupported=function(){try{return new Intl.NumberFormat("en",{style:"unit",unitDisplay:"short",unit:"meter"}),!0}catch(t){return!1}}(),t.bindAll(["_update","_setScale","setUnit"],this)}getDefaultPosition(){return"bottom-left"}_update(){const t=this.options.maxWidth||100,e=this._map,n=e._containerHeight/2,r=e._containerWidth/2-t/2,i=e.unproject([r,n]),o=e.unproject([r+t,n]),a=i.distanceTo(o);if("imperial"===this.options.unit){const e=3.2808*a;e>5280?this._setScale(t,e/5280,"mile"):this._setScale(t,e,"foot")}else"nautical"===this.options.unit?this._setScale(t,a/1852,"nautical-mile"):a>=1e3?this._setScale(t,a/1e3,"kilometer"):this._setScale(t,a,"meter")}_setScale(t,e,n){this._map._requestDomTask((()=>{const r=function(t){const e=Math.pow(10,"".concat(Math.floor(t)).length-1);let n=t/e;return n=n>=10?10:n>=5?5:n>=3?3:n>=2?2:n>=1?1:function(t){const e=Math.pow(10,Math.ceil(-Math.log(t)/Math.LN10));return Math.round(t*e)/e}(n),e*n}(e),i=r/e;this._container.innerHTML=this._isNumberFormatSupported&&"nautical-mile"!==n?new Intl.NumberFormat(this._language,{style:"unit",unitDisplay:"short",unit:n}).format(r):"".concat(r,"&nbsp;").concat(ho[n]),this._container.style.width=t*i+"px"}))}onAdd(t){return this._map=t,this._language=t.getLanguage(),this._container=o("div","mapboxgl-ctrl mapboxgl-ctrl-scale",t.getContainer()),this._container.dir="auto",this._map.on("move",this._update),this._update(),this._container}onRemove(){this._container.remove(),this._map.off("move",this._update),this._map=void 0}_setLanguage(t){this._language=t,this._update()}setUnit(t){this.options.unit=t,this._update()}},FullscreenControl:class{constructor(e){this._fullscreen=!1,e&&e.container&&(e.container instanceof t.window.HTMLElement?this._container=e.container:t.warnOnce("Full screen control 'container' must be a DOM element.")),t.bindAll(["_onClickFullscreen","_changeIcon"],this),"onfullscreenchange"in t.window.document?this._fullscreenchange="fullscreenchange":"onwebkitfullscreenchange"in t.window.document&&(this._fullscreenchange="webkitfullscreenchange")}onAdd(e){return this._map=e,this._container||(this._container=this._map.getContainer()),this._controlContainer=o("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._checkFullscreenSupport()?this._setupUI():(this._controlContainer.style.display="none",t.warnOnce("This device does not support fullscreen mode.")),this._controlContainer}onRemove(){this._controlContainer.remove(),this._map=null,t.window.document.removeEventListener(this._fullscreenchange,this._changeIcon)}_checkFullscreenSupport(){return!(!t.window.document.fullscreenEnabled&&!t.window.document.webkitFullscreenEnabled)}_setupUI(){const e=this._fullscreenButton=o("button","mapboxgl-ctrl-fullscreen",this._controlContainer);o("span","mapboxgl-ctrl-icon",e).setAttribute("aria-hidden","true"),e.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),t.window.document.addEventListener(this._fullscreenchange,this._changeIcon)}_updateTitle(){const t=this._getTitle();this._fullscreenButton.setAttribute("aria-label",t),this._fullscreenButton.firstElementChild&&this._fullscreenButton.firstElementChild.setAttribute("title",t)}_getTitle(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")}_isFullscreen(){return this._fullscreen}_changeIcon(){(t.window.document.fullscreenElement||t.window.document.webkitFullscreenElement)===this._container!==this._fullscreen&&(this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("mapboxgl-ctrl-shrink"),this._fullscreenButton.classList.toggle("mapboxgl-ctrl-fullscreen"),this._updateTitle())}_onClickFullscreen(){this._isFullscreen()?t.window.document.exitFullscreen?t.window.document.exitFullscreen():t.window.document.webkitCancelFullScreen&&t.window.document.webkitCancelFullScreen():this._container.requestFullscreen?this._container.requestFullscreen():this._container.webkitRequestFullscreen&&this._container.webkitRequestFullscreen()}},Popup:class extends t.Evented{constructor(e){super(),this.options=t.extend(Object.create(eo),e),t.bindAll(["_update","_onClose","remove","_onMouseEvent"],this),this._classList=new Set(e&&e.className?e.className.trim().split(/\s+/):[])}addTo(e){return this._map&&this.remove(),this._map=e,this.options.closeOnClick&&e.on("preclick",this._onClose),this.options.closeOnMove&&e.on("move",this._onClose),e.on("remove",this.remove),this._update(),e._addPopup(this),this._focusFirstElement(),this._trackPointer?(e.on("mousemove",this._onMouseEvent),e.on("mouseup",this._onMouseEvent),e._canvasContainer.classList.add("mapboxgl-track-pointer")):e.on("move",this._update),this.fire(new t.Event("open")),this}isOpen(){return!!this._map}remove(){this._content&&this._content.remove(),this._container&&(this._container.remove(),this._container=void 0);const e=this._map;return e&&(e.off("move",this._update),e.off("move",this._onClose),e.off("preclick",this._onClose),e.off("click",this._onClose),e.off("remove",this.remove),e.off("mousemove",this._onMouseEvent),e.off("mouseup",this._onMouseEvent),e.off("drag",this._onMouseEvent),e._canvasContainer&&e._canvasContainer.classList.remove("mapboxgl-track-pointer"),e._removePopup(this),this._map=void 0),this.fire(new t.Event("close")),this}getLngLat(){return this._lngLat}setLngLat(e){this._lngLat=t.LngLat.convert(e),this._pos=null,this._trackPointer=!1,this._update();const n=this._map;return n&&(n.on("move",this._update),n.off("mousemove",this._onMouseEvent),n._canvasContainer.classList.remove("mapboxgl-track-pointer")),this}trackPointer(){this._trackPointer=!0,this._pos=null,this._update();const t=this._map;return t&&(t.off("move",this._update),t.on("mousemove",this._onMouseEvent),t.on("drag",this._onMouseEvent),t._canvasContainer.classList.add("mapboxgl-track-pointer")),this}getElement(){return this._container}setText(e){return this.setDOMContent(t.window.document.createTextNode(e))}setHTML(e){const n=t.window.document.createDocumentFragment(),r=t.window.document.createElement("body");let i;for(r.innerHTML=e;i=r.firstChild,i;)n.appendChild(i);return this.setDOMContent(n)}getMaxWidth(){return this._container&&this._container.style.maxWidth}setMaxWidth(t){return this.options.maxWidth=t,this._update(),this}setDOMContent(t){let e=this._content;if(e)for(;e.hasChildNodes();)e.firstChild&&e.removeChild(e.firstChild);else e=this._content=o("div","mapboxgl-popup-content",this._container||void 0);if(e.appendChild(t),this.options.closeButton){const t=this._closeButton=o("button","mapboxgl-popup-close-button",e);t.type="button",t.setAttribute("aria-label","Close popup"),t.setAttribute("aria-hidden","true"),t.innerHTML="&#215;",t.addEventListener("click",this._onClose)}return this._update(),this._focusFirstElement(),this}addClassName(t){return this._classList.add(t),this._updateClassList(),this}removeClassName(t){return this._classList.delete(t),this._updateClassList(),this}setOffset(t){return this.options.offset=t,this._update(),this}toggleClassName(t){let e;return this._classList.delete(t)?e=!1:(this._classList.add(t),e=!0),this._updateClassList(),e}_onMouseEvent(t){this._update(t.point)}_getAnchor(t){if(this.options.anchor)return this.options.anchor;const e=this._map,n=this._container,r=this._pos;if(!e||!n||!r)return"bottom";const i=n.offsetWidth,o=n.offsetHeight,a=r.x<i/2,s=r.x>e.transform.width-i/2;if(r.y+t<o)return a?"top-left":s?"top-right":"top";if(r.y>e.transform.height-o){if(a)return"bottom-left";if(s)return"bottom-right"}return a?"left":s?"right":"bottom"}_updateClassList(){const t=this._container;if(!t)return;const e=[...this._classList];e.push("mapboxgl-popup"),this._anchor&&e.push("mapboxgl-popup-anchor-".concat(this._anchor)),this._trackPointer&&e.push("mapboxgl-popup-track-pointer"),t.className=e.join(" ")}_update(e){const n=this._map,r=this._content;if(!n||!this._lngLat&&!this._trackPointer||!r)return;let i=this._container;if(i||(i=this._container=o("div","mapboxgl-popup",n.getContainer()),this._tip=o("div","mapboxgl-popup-tip",i),i.appendChild(r)),this.options.maxWidth&&i.style.maxWidth!==this.options.maxWidth&&(i.style.maxWidth=this.options.maxWidth),n.transform.renderWorldCopies&&!this._trackPointer&&(this._lngLat=Ji(this._lngLat,this._pos,n.transform)),!this._trackPointer||e){const t=this._pos=this._trackPointer&&e?e:n.project(this._lngLat),r=ro(this.options.offset),i=this._anchor=this._getAnchor(r.y),o=ro(this.options.offset,i),a=t.add(o).round();n._requestDomTask((()=>{this._container&&i&&(this._container.style.transform="".concat(Qi[i]," translate(").concat(a.x,"px,").concat(a.y,"px)"))}))}if(!this._marker&&n._showingGlobe()){const e=t.isLngLatBehindGlobe(n.transform,this._lngLat)?0:1;this._setOpacity(e)}this._updateClassList()}_focusFirstElement(){if(!this.options.focusAfterOpen||!this._container)return;const t=this._container.querySelector(no);t&&t.focus()}_onClose(){this.remove()}_setOpacity(t){this._container&&(this._container.style.opacity="".concat(t)),this._content&&(this._content.style.pointerEvents=t?"auto":"none")}},Marker:to,Style:$e,LngLat:t.LngLat,LngLatBounds:t.LngLatBounds,Point:t.Point,MercatorCoordinate:t.MercatorCoordinate,FreeCameraOptions:Ur,Evented:t.Evented,config:t.config,prewarm:function(){Ft().acquire(Rt)},clearPrewarmedResources:function(){const t=Bt;t&&(t.isPreloaded()&&1===t.numActive()?(t.release(Rt),Bt=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))},get accessToken(){return t.config.ACCESS_TOKEN},set accessToken(e){t.config.ACCESS_TOKEN=e},get baseApiUrl(){return t.config.API_URL},set baseApiUrl(e){t.config.API_URL=e},get workerCount(){return Dt.workerCount},set workerCount(t){Dt.workerCount=t},get maxParallelImageRequests(){return t.config.MAX_PARALLEL_IMAGE_REQUESTS},set maxParallelImageRequests(e){t.config.MAX_PARALLEL_IMAGE_REQUESTS=e},clearStorage(e){t.clearTileCache(e)},workerUrl:"",workerClass:null,setNow:t.exported.setNow,restoreNow:t.exported.restoreNow};return fo})),n}()},1497:(t,e,n)=>{"use strict";var r=n(3218);function i(){}function o(){}o.resetWarningCache=i,t.exports=function(){function t(t,e,n,i,o,a){if(a!==r){var s=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw s.name="Invariant Violation",s}}function e(){return t}t.isRequired=t;var n={array:t,bigint:t,bool:t,func:t,number:t,object:t,string:t,symbol:t,any:t,arrayOf:e,element:t,elementType:t,instanceOf:e,node:t,objectOf:e,oneOf:e,oneOfType:e,shape:e,exact:e,checkPropTypes:o,resetWarningCache:i};return n.PropTypes=n,n}},5173:(t,e,n)=>{t.exports=n(1497)()},3218:t=>{"use strict";t.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},2730:(t,e,n)=>{"use strict";var r=n(5043),i=n(8853);function o(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var a=new Set,s={};function l(t,e){c(t,e),c(t+"Capture",e)}function c(t,e){for(s[t]=e,t=0;t<e.length;t++)a.add(e[t])}var u=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),h=Object.prototype.hasOwnProperty,d=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,f={},p={};function m(t,e,n,r,i,o,a){this.acceptsBooleans=2===e||3===e||4===e,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=o,this.removeEmptyString=a}var g={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(t){g[t]=new m(t,0,!1,t,null,!1,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(t){var e=t[0];g[e]=new m(e,1,!1,t[1],null,!1,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(t){g[t]=new m(t,2,!1,t.toLowerCase(),null,!1,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(t){g[t]=new m(t,2,!1,t,null,!1,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(t){g[t]=new m(t,3,!1,t.toLowerCase(),null,!1,!1)})),["checked","multiple","muted","selected"].forEach((function(t){g[t]=new m(t,3,!0,t,null,!1,!1)})),["capture","download"].forEach((function(t){g[t]=new m(t,4,!1,t,null,!1,!1)})),["cols","rows","size","span"].forEach((function(t){g[t]=new m(t,6,!1,t,null,!1,!1)})),["rowSpan","start"].forEach((function(t){g[t]=new m(t,5,!1,t.toLowerCase(),null,!1,!1)}));var y=/[\-:]([a-z])/g;function v(t){return t[1].toUpperCase()}function _(t,e,n,r){var i=g.hasOwnProperty(e)?g[e]:null;(null!==i?0!==i.type:r||!(2<e.length)||"o"!==e[0]&&"O"!==e[0]||"n"!==e[1]&&"N"!==e[1])&&(function(t,e,n,r){if(null===e||"undefined"===typeof e||function(t,e,n,r){if(null!==n&&0===n.type)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(t=t.toLowerCase().slice(0,5))&&"aria-"!==t);default:return!1}}(t,e,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!e;case 4:return!1===e;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}(e,n,i,r)&&(n=null),r||null===i?function(t){return!!h.call(p,t)||!h.call(f,t)&&(d.test(t)?p[t]=!0:(f[t]=!0,!1))}(e)&&(null===n?t.removeAttribute(e):t.setAttribute(e,""+n)):i.mustUseProperty?t[i.propertyName]=null===n?3!==i.type&&"":n:(e=i.attributeName,r=i.attributeNamespace,null===n?t.removeAttribute(e):(n=3===(i=i.type)||4===i&&!0===n?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(t){var e=t.replace(y,v);g[e]=new m(e,1,!1,t,null,!1,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(t){var e=t.replace(y,v);g[e]=new m(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)})),["xml:base","xml:lang","xml:space"].forEach((function(t){var e=t.replace(y,v);g[e]=new m(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)})),["tabIndex","crossOrigin"].forEach((function(t){g[t]=new m(t,1,!1,t.toLowerCase(),null,!1,!1)})),g.xlinkHref=new m("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach((function(t){g[t]=new m(t,1,!1,t.toLowerCase(),null,!0,!0)}));var b=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,x=Symbol.for("react.element"),w=Symbol.for("react.portal"),S=Symbol.for("react.fragment"),E=Symbol.for("react.strict_mode"),T=Symbol.for("react.profiler"),M=Symbol.for("react.provider"),A=Symbol.for("react.context"),C=Symbol.for("react.forward_ref"),P=Symbol.for("react.suspense"),k=Symbol.for("react.suspense_list"),I=Symbol.for("react.memo"),O=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var L=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var j=Symbol.iterator;function z(t){return null===t||"object"!==typeof t?null:"function"===typeof(t=j&&t[j]||t["@@iterator"])?t:null}var R,D=Object.assign;function B(t){if(void 0===R)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);R=e&&e[1]||""}return"\n"+R+t}var F=!1;function N(t,e){if(!t||F)return"";F=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(e,[])}catch(c){var r=c}Reflect.construct(t,[],e)}else{try{e.call()}catch(c){r=c}t.call(e.prototype)}else{try{throw Error()}catch(c){r=c}t()}}catch(c){if(c&&r&&"string"===typeof c.stack){for(var i=c.stack.split("\n"),o=r.stack.split("\n"),a=i.length-1,s=o.length-1;1<=a&&0<=s&&i[a]!==o[s];)s--;for(;1<=a&&0<=s;a--,s--)if(i[a]!==o[s]){if(1!==a||1!==s)do{if(a--,0>--s||i[a]!==o[s]){var l="\n"+i[a].replace(" at new "," at ");return t.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",t.displayName)),l}}while(1<=a&&0<=s);break}}}finally{F=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?B(t):""}function U(t){switch(t.tag){case 5:return B(t.type);case 16:return B("Lazy");case 13:return B("Suspense");case 19:return B("SuspenseList");case 0:case 2:case 15:return t=N(t.type,!1);case 11:return t=N(t.type.render,!1);case 1:return t=N(t.type,!0);default:return""}}function V(t){if(null==t)return null;if("function"===typeof t)return t.displayName||t.name||null;if("string"===typeof t)return t;switch(t){case S:return"Fragment";case w:return"Portal";case T:return"Profiler";case E:return"StrictMode";case P:return"Suspense";case k:return"SuspenseList"}if("object"===typeof t)switch(t.$$typeof){case A:return(t.displayName||"Context")+".Consumer";case M:return(t._context.displayName||"Context")+".Provider";case C:var e=t.render;return(t=t.displayName)||(t=""!==(t=e.displayName||e.name||"")?"ForwardRef("+t+")":"ForwardRef"),t;case I:return null!==(e=t.displayName||null)?e:V(t.type)||"Memo";case O:e=t._payload,t=t._init;try{return V(t(e))}catch(n){}}return null}function W(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=(t=e.render).displayName||t.name||"",e.displayName||(""!==t?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return V(e);case 8:return e===E?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e}return null}function G(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":case"object":return t;default:return""}}function q(t){var e=t.type;return(t=t.nodeName)&&"input"===t.toLowerCase()&&("checkbox"===e||"radio"===e)}function H(t){t._valueTracker||(t._valueTracker=function(t){var e=q(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var i=n.get,o=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(t){r=""+t,o.call(this,t)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(t){r=""+t},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}(t))}function Z(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=q(t)?t.checked?"true":"false":t.value),(t=r)!==n&&(e.setValue(t),!0)}function X(t){if("undefined"===typeof(t=t||("undefined"!==typeof document?document:void 0)))return null;try{return t.activeElement||t.body}catch(e){return t.body}}function Y(t,e){var n=e.checked;return D({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:t._wrapperState.initialChecked})}function K(t,e){var n=null==e.defaultValue?"":e.defaultValue,r=null!=e.checked?e.checked:e.defaultChecked;n=G(null!=e.value?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===e.type||"radio"===e.type?null!=e.checked:null!=e.value}}function $(t,e){null!=(e=e.checked)&&_(t,"checked",e,!1)}function J(t,e){$(t,e);var n=G(e.value),r=e.type;if(null!=n)"number"===r?(0===n&&""===t.value||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if("submit"===r||"reset"===r)return void t.removeAttribute("value");e.hasOwnProperty("value")?tt(t,e.type,n):e.hasOwnProperty("defaultValue")&&tt(t,e.type,G(e.defaultValue)),null==e.checked&&null!=e.defaultChecked&&(t.defaultChecked=!!e.defaultChecked)}function Q(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!("submit"!==r&&"reset"!==r||void 0!==e.value&&null!==e.value))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}""!==(n=t.name)&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,""!==n&&(t.name=n)}function tt(t,e,n){"number"===e&&X(t.ownerDocument)===t||(null==n?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var et=Array.isArray;function nt(t,e,n,r){if(t=t.options,e){e={};for(var i=0;i<n.length;i++)e["$"+n[i]]=!0;for(n=0;n<t.length;n++)i=e.hasOwnProperty("$"+t[n].value),t[n].selected!==i&&(t[n].selected=i),i&&r&&(t[n].defaultSelected=!0)}else{for(n=""+G(n),e=null,i=0;i<t.length;i++){if(t[i].value===n)return t[i].selected=!0,void(r&&(t[i].defaultSelected=!0));null!==e||t[i].disabled||(e=t[i])}null!==e&&(e.selected=!0)}}function rt(t,e){if(null!=e.dangerouslySetInnerHTML)throw Error(o(91));return D({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function it(t,e){var n=e.value;if(null==n){if(n=e.children,e=e.defaultValue,null!=n){if(null!=e)throw Error(o(92));if(et(n)){if(1<n.length)throw Error(o(93));n=n[0]}e=n}null==e&&(e=""),n=e}t._wrapperState={initialValue:G(n)}}function ot(t,e){var n=G(e.value),r=G(e.defaultValue);null!=n&&((n=""+n)!==t.value&&(t.value=n),null==e.defaultValue&&t.defaultValue!==n&&(t.defaultValue=n)),null!=r&&(t.defaultValue=""+r)}function at(t){var e=t.textContent;e===t._wrapperState.initialValue&&""!==e&&null!==e&&(t.value=e)}function st(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function lt(t,e){return null==t||"http://www.w3.org/1999/xhtml"===t?st(e):"http://www.w3.org/2000/svg"===t&&"foreignObject"===e?"http://www.w3.org/1999/xhtml":t}var ct,ut,ht=(ut=function(t,e){if("http://www.w3.org/2000/svg"!==t.namespaceURI||"innerHTML"in t)t.innerHTML=e;else{for((ct=ct||document.createElement("div")).innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=ct.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(t,e,n,r){MSApp.execUnsafeLocalFunction((function(){return ut(t,e)}))}:ut);function dt(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&3===n.nodeType)return void(n.nodeValue=e)}t.textContent=e}var ft={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},pt=["Webkit","ms","Moz","O"];function mt(t,e,n){return null==e||"boolean"===typeof e||""===e?"":n||"number"!==typeof e||0===e||ft.hasOwnProperty(t)&&ft[t]?(""+e).trim():e+"px"}function gt(t,e){for(var n in t=t.style,e)if(e.hasOwnProperty(n)){var r=0===n.indexOf("--"),i=mt(n,e[n],r);"float"===n&&(n="cssFloat"),r?t.setProperty(n,i):t[n]=i}}Object.keys(ft).forEach((function(t){pt.forEach((function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),ft[e]=ft[t]}))}));var yt=D({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function vt(t,e){if(e){if(yt[t]&&(null!=e.children||null!=e.dangerouslySetInnerHTML))throw Error(o(137,t));if(null!=e.dangerouslySetInnerHTML){if(null!=e.children)throw Error(o(60));if("object"!==typeof e.dangerouslySetInnerHTML||!("__html"in e.dangerouslySetInnerHTML))throw Error(o(61))}if(null!=e.style&&"object"!==typeof e.style)throw Error(o(62))}}function _t(t,e){if(-1===t.indexOf("-"))return"string"===typeof e.is;switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var bt=null;function xt(t){return(t=t.target||t.srcElement||window).correspondingUseElement&&(t=t.correspondingUseElement),3===t.nodeType?t.parentNode:t}var wt=null,St=null,Et=null;function Tt(t){if(t=_i(t)){if("function"!==typeof wt)throw Error(o(280));var e=t.stateNode;e&&(e=xi(e),wt(t.stateNode,t.type,e))}}function Mt(t){St?Et?Et.push(t):Et=[t]:St=t}function At(){if(St){var t=St,e=Et;if(Et=St=null,Tt(t),e)for(t=0;t<e.length;t++)Tt(e[t])}}function Ct(t,e){return t(e)}function Pt(){}var kt=!1;function It(t,e,n){if(kt)return t(e,n);kt=!0;try{return Ct(t,e,n)}finally{kt=!1,(null!==St||null!==Et)&&(Pt(),At())}}function Ot(t,e){var n=t.stateNode;if(null===n)return null;var r=xi(n);if(null===r)return null;n=r[e];t:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(t=t.type)||"input"===t||"select"===t||"textarea"===t)),t=!r;break t;default:t=!1}if(t)return null;if(n&&"function"!==typeof n)throw Error(o(231,e,typeof n));return n}var Lt=!1;if(u)try{var jt={};Object.defineProperty(jt,"passive",{get:function(){Lt=!0}}),window.addEventListener("test",jt,jt),window.removeEventListener("test",jt,jt)}catch(ut){Lt=!1}function zt(t,e,n,r,i,o,a,s,l){var c=Array.prototype.slice.call(arguments,3);try{e.apply(n,c)}catch(u){this.onError(u)}}var Rt=!1,Dt=null,Bt=!1,Ft=null,Nt={onError:function(t){Rt=!0,Dt=t}};function Ut(t,e,n,r,i,o,a,s,l){Rt=!1,Dt=null,zt.apply(Nt,arguments)}function Vt(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do{0!==(4098&(e=t).flags)&&(n=e.return),t=e.return}while(t)}return 3===e.tag?n:null}function Wt(t){if(13===t.tag){var e=t.memoizedState;if(null===e&&(null!==(t=t.alternate)&&(e=t.memoizedState)),null!==e)return e.dehydrated}return null}function Gt(t){if(Vt(t)!==t)throw Error(o(188))}function qt(t){return null!==(t=function(t){var e=t.alternate;if(!e){if(null===(e=Vt(t)))throw Error(o(188));return e!==t?null:t}for(var n=t,r=e;;){var i=n.return;if(null===i)break;var a=i.alternate;if(null===a){if(null!==(r=i.return)){n=r;continue}break}if(i.child===a.child){for(a=i.child;a;){if(a===n)return Gt(i),t;if(a===r)return Gt(i),e;a=a.sibling}throw Error(o(188))}if(n.return!==r.return)n=i,r=a;else{for(var s=!1,l=i.child;l;){if(l===n){s=!0,n=i,r=a;break}if(l===r){s=!0,r=i,n=a;break}l=l.sibling}if(!s){for(l=a.child;l;){if(l===n){s=!0,n=a,r=i;break}if(l===r){s=!0,r=a,n=i;break}l=l.sibling}if(!s)throw Error(o(189))}}if(n.alternate!==r)throw Error(o(190))}if(3!==n.tag)throw Error(o(188));return n.stateNode.current===n?t:e}(t))?Ht(t):null}function Ht(t){if(5===t.tag||6===t.tag)return t;for(t=t.child;null!==t;){var e=Ht(t);if(null!==e)return e;t=t.sibling}return null}var Zt=i.unstable_scheduleCallback,Xt=i.unstable_cancelCallback,Yt=i.unstable_shouldYield,Kt=i.unstable_requestPaint,$t=i.unstable_now,Jt=i.unstable_getCurrentPriorityLevel,Qt=i.unstable_ImmediatePriority,te=i.unstable_UserBlockingPriority,ee=i.unstable_NormalPriority,ne=i.unstable_LowPriority,re=i.unstable_IdlePriority,ie=null,oe=null;var ae=Math.clz32?Math.clz32:function(t){return t>>>=0,0===t?32:31-(se(t)/le|0)|0},se=Math.log,le=Math.LN2;var ce=64,ue=4194304;function he(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&t;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&t;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function de(t,e){var n=t.pendingLanes;if(0===n)return 0;var r=0,i=t.suspendedLanes,o=t.pingedLanes,a=268435455&n;if(0!==a){var s=a&~i;0!==s?r=he(s):0!==(o&=a)&&(r=he(o))}else 0!==(a=n&~i)?r=he(a):0!==o&&(r=he(o));if(0===r)return 0;if(0!==e&&e!==r&&0===(e&i)&&((i=r&-r)>=(o=e&-e)||16===i&&0!==(4194240&o)))return e;if(0!==(4&r)&&(r|=16&n),0!==(e=t.entangledLanes))for(t=t.entanglements,e&=r;0<e;)i=1<<(n=31-ae(e)),r|=t[n],e&=~i;return r}function fe(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;default:return-1}}function pe(t){return 0!==(t=-1073741825&t.pendingLanes)?t:1073741824&t?1073741824:0}function me(){var t=ce;return 0===(4194240&(ce<<=1))&&(ce=64),t}function ge(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function ye(t,e,n){t.pendingLanes|=e,536870912!==e&&(t.suspendedLanes=0,t.pingedLanes=0),(t=t.eventTimes)[e=31-ae(e)]=n}function ve(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-ae(n),i=1<<r;i&e|t[r]&e&&(t[r]|=e),n&=~i}}var _e=0;function be(t){return 1<(t&=-t)?4<t?0!==(268435455&t)?16:536870912:4:1}var xe,we,Se,Ee,Te,Me=!1,Ae=[],Ce=null,Pe=null,ke=null,Ie=new Map,Oe=new Map,Le=[],je="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function ze(t,e){switch(t){case"focusin":case"focusout":Ce=null;break;case"dragenter":case"dragleave":Pe=null;break;case"mouseover":case"mouseout":ke=null;break;case"pointerover":case"pointerout":Ie.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Oe.delete(e.pointerId)}}function Re(t,e,n,r,i,o){return null===t||t.nativeEvent!==o?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:o,targetContainers:[i]},null!==e&&(null!==(e=_i(e))&&we(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,null!==i&&-1===e.indexOf(i)&&e.push(i),t)}function De(t){var e=vi(t.target);if(null!==e){var n=Vt(e);if(null!==n)if(13===(e=n.tag)){if(null!==(e=Wt(n)))return t.blockedOn=e,void Te(t.priority,(function(){Se(n)}))}else if(3===e&&n.stateNode.current.memoizedState.isDehydrated)return void(t.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}t.blockedOn=null}function Be(t){if(null!==t.blockedOn)return!1;for(var e=t.targetContainers;0<e.length;){var n=Ye(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(null!==n)return null!==(e=_i(n))&&we(e),t.blockedOn=n,!1;var r=new(n=t.nativeEvent).constructor(n.type,n);bt=r,n.target.dispatchEvent(r),bt=null,e.shift()}return!0}function Fe(t,e,n){Be(t)&&n.delete(e)}function Ne(){Me=!1,null!==Ce&&Be(Ce)&&(Ce=null),null!==Pe&&Be(Pe)&&(Pe=null),null!==ke&&Be(ke)&&(ke=null),Ie.forEach(Fe),Oe.forEach(Fe)}function Ue(t,e){t.blockedOn===e&&(t.blockedOn=null,Me||(Me=!0,i.unstable_scheduleCallback(i.unstable_NormalPriority,Ne)))}function Ve(t){function e(e){return Ue(e,t)}if(0<Ae.length){Ue(Ae[0],t);for(var n=1;n<Ae.length;n++){var r=Ae[n];r.blockedOn===t&&(r.blockedOn=null)}}for(null!==Ce&&Ue(Ce,t),null!==Pe&&Ue(Pe,t),null!==ke&&Ue(ke,t),Ie.forEach(e),Oe.forEach(e),n=0;n<Le.length;n++)(r=Le[n]).blockedOn===t&&(r.blockedOn=null);for(;0<Le.length&&null===(n=Le[0]).blockedOn;)De(n),null===n.blockedOn&&Le.shift()}var We=b.ReactCurrentBatchConfig,Ge=!0;function qe(t,e,n,r){var i=_e,o=We.transition;We.transition=null;try{_e=1,Ze(t,e,n,r)}finally{_e=i,We.transition=o}}function He(t,e,n,r){var i=_e,o=We.transition;We.transition=null;try{_e=4,Ze(t,e,n,r)}finally{_e=i,We.transition=o}}function Ze(t,e,n,r){if(Ge){var i=Ye(t,e,n,r);if(null===i)Gr(t,e,r,Xe,n),ze(t,r);else if(function(t,e,n,r,i){switch(e){case"focusin":return Ce=Re(Ce,t,e,n,r,i),!0;case"dragenter":return Pe=Re(Pe,t,e,n,r,i),!0;case"mouseover":return ke=Re(ke,t,e,n,r,i),!0;case"pointerover":var o=i.pointerId;return Ie.set(o,Re(Ie.get(o)||null,t,e,n,r,i)),!0;case"gotpointercapture":return o=i.pointerId,Oe.set(o,Re(Oe.get(o)||null,t,e,n,r,i)),!0}return!1}(i,t,e,n,r))r.stopPropagation();else if(ze(t,r),4&e&&-1<je.indexOf(t)){for(;null!==i;){var o=_i(i);if(null!==o&&xe(o),null===(o=Ye(t,e,n,r))&&Gr(t,e,r,Xe,n),o===i)break;i=o}null!==i&&r.stopPropagation()}else Gr(t,e,r,null,n)}}var Xe=null;function Ye(t,e,n,r){if(Xe=null,null!==(t=vi(t=xt(r))))if(null===(e=Vt(t)))t=null;else if(13===(n=e.tag)){if(null!==(t=Wt(e)))return t;t=null}else if(3===n){if(e.stateNode.current.memoizedState.isDehydrated)return 3===e.tag?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Xe=t,null}function Ke(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Jt()){case Qt:return 1;case te:return 4;case ee:case ne:return 16;case re:return 536870912;default:return 16}default:return 16}}var $e=null,Je=null,Qe=null;function tn(){if(Qe)return Qe;var t,e,n=Je,r=n.length,i="value"in $e?$e.value:$e.textContent,o=i.length;for(t=0;t<r&&n[t]===i[t];t++);var a=r-t;for(e=1;e<=a&&n[r-e]===i[o-e];e++);return Qe=i.slice(t,1<e?1-e:void 0)}function en(t){var e=t.keyCode;return"charCode"in t?0===(t=t.charCode)&&13===e&&(t=13):t=e,10===t&&(t=13),32<=t||13===t?t:0}function nn(){return!0}function rn(){return!1}function on(t){function e(e,n,r,i,o){for(var a in this._reactName=e,this._targetInst=r,this.type=n,this.nativeEvent=i,this.target=o,this.currentTarget=null,t)t.hasOwnProperty(a)&&(e=t[a],this[a]=e?e(i):i[a]);return this.isDefaultPrevented=(null!=i.defaultPrevented?i.defaultPrevented:!1===i.returnValue)?nn:rn,this.isPropagationStopped=rn,this}return D(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var t=this.nativeEvent;t&&(t.preventDefault?t.preventDefault():"unknown"!==typeof t.returnValue&&(t.returnValue=!1),this.isDefaultPrevented=nn)},stopPropagation:function(){var t=this.nativeEvent;t&&(t.stopPropagation?t.stopPropagation():"unknown"!==typeof t.cancelBubble&&(t.cancelBubble=!0),this.isPropagationStopped=nn)},persist:function(){},isPersistent:nn}),e}var an,sn,ln,cn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},un=on(cn),hn=D({},cn,{view:0,detail:0}),dn=on(hn),fn=D({},hn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Tn,button:0,buttons:0,relatedTarget:function(t){return void 0===t.relatedTarget?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==ln&&(ln&&"mousemove"===t.type?(an=t.screenX-ln.screenX,sn=t.screenY-ln.screenY):sn=an=0,ln=t),an)},movementY:function(t){return"movementY"in t?t.movementY:sn}}),pn=on(fn),mn=on(D({},fn,{dataTransfer:0})),gn=on(D({},hn,{relatedTarget:0})),yn=on(D({},cn,{animationName:0,elapsedTime:0,pseudoElement:0})),vn=D({},cn,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),_n=on(vn),bn=on(D({},cn,{data:0})),xn={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},wn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Sn={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function En(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):!!(t=Sn[t])&&!!e[t]}function Tn(){return En}var Mn=D({},hn,{key:function(t){if(t.key){var e=xn[t.key]||t.key;if("Unidentified"!==e)return e}return"keypress"===t.type?13===(t=en(t))?"Enter":String.fromCharCode(t):"keydown"===t.type||"keyup"===t.type?wn[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Tn,charCode:function(t){return"keypress"===t.type?en(t):0},keyCode:function(t){return"keydown"===t.type||"keyup"===t.type?t.keyCode:0},which:function(t){return"keypress"===t.type?en(t):"keydown"===t.type||"keyup"===t.type?t.keyCode:0}}),An=on(Mn),Cn=on(D({},fn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),Pn=on(D({},hn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Tn})),kn=on(D({},cn,{propertyName:0,elapsedTime:0,pseudoElement:0})),In=D({},fn,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),On=on(In),Ln=[9,13,27,32],jn=u&&"CompositionEvent"in window,zn=null;u&&"documentMode"in document&&(zn=document.documentMode);var Rn=u&&"TextEvent"in window&&!zn,Dn=u&&(!jn||zn&&8<zn&&11>=zn),Bn=String.fromCharCode(32),Fn=!1;function Nn(t,e){switch(t){case"keyup":return-1!==Ln.indexOf(e.keyCode);case"keydown":return 229!==e.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Un(t){return"object"===typeof(t=t.detail)&&"data"in t?t.data:null}var Vn=!1;var Wn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Gn(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return"input"===e?!!Wn[t.type]:"textarea"===e}function qn(t,e,n,r){Mt(r),0<(e=Hr(e,"onChange")).length&&(n=new un("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var Hn=null,Zn=null;function Xn(t){Br(t,0)}function Yn(t){if(Z(bi(t)))return t}function Kn(t,e){if("change"===t)return e}var $n=!1;if(u){var Jn;if(u){var Qn="oninput"in document;if(!Qn){var tr=document.createElement("div");tr.setAttribute("oninput","return;"),Qn="function"===typeof tr.oninput}Jn=Qn}else Jn=!1;$n=Jn&&(!document.documentMode||9<document.documentMode)}function er(){Hn&&(Hn.detachEvent("onpropertychange",nr),Zn=Hn=null)}function nr(t){if("value"===t.propertyName&&Yn(Zn)){var e=[];qn(e,Zn,t,xt(t)),It(Xn,e)}}function rr(t,e,n){"focusin"===t?(er(),Zn=n,(Hn=e).attachEvent("onpropertychange",nr)):"focusout"===t&&er()}function ir(t){if("selectionchange"===t||"keyup"===t||"keydown"===t)return Yn(Zn)}function or(t,e){if("click"===t)return Yn(e)}function ar(t,e){if("input"===t||"change"===t)return Yn(e)}var sr="function"===typeof Object.is?Object.is:function(t,e){return t===e&&(0!==t||1/t===1/e)||t!==t&&e!==e};function lr(t,e){if(sr(t,e))return!0;if("object"!==typeof t||null===t||"object"!==typeof e||null===e)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!h.call(e,i)||!sr(t[i],e[i]))return!1}return!0}function cr(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function ur(t,e){var n,r=cr(t);for(t=0;r;){if(3===r.nodeType){if(n=t+r.textContent.length,t<=e&&n>=e)return{node:r,offset:e-t};t=n}t:{for(;r;){if(r.nextSibling){r=r.nextSibling;break t}r=r.parentNode}r=void 0}r=cr(r)}}function hr(t,e){return!(!t||!e)&&(t===e||(!t||3!==t.nodeType)&&(e&&3===e.nodeType?hr(t,e.parentNode):"contains"in t?t.contains(e):!!t.compareDocumentPosition&&!!(16&t.compareDocumentPosition(e))))}function dr(){for(var t=window,e=X();e instanceof t.HTMLIFrameElement;){try{var n="string"===typeof e.contentWindow.location.href}catch(r){n=!1}if(!n)break;e=X((t=e.contentWindow).document)}return e}function fr(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&("input"===e&&("text"===t.type||"search"===t.type||"tel"===t.type||"url"===t.type||"password"===t.type)||"textarea"===e||"true"===t.contentEditable)}function pr(t){var e=dr(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&hr(n.ownerDocument.documentElement,n)){if(null!==r&&fr(n))if(e=r.start,void 0===(t=r.end)&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if((t=(e=n.ownerDocument||document)&&e.defaultView||window).getSelection){t=t.getSelection();var i=n.textContent.length,o=Math.min(r.start,i);r=void 0===r.end?o:Math.min(r.end,i),!t.extend&&o>r&&(i=r,r=o,o=i),i=ur(n,o);var a=ur(n,r);i&&a&&(1!==t.rangeCount||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==a.node||t.focusOffset!==a.offset)&&((e=e.createRange()).setStart(i.node,i.offset),t.removeAllRanges(),o>r?(t.addRange(e),t.extend(a.node,a.offset)):(e.setEnd(a.node,a.offset),t.addRange(e)))}for(e=[],t=n;t=t.parentNode;)1===t.nodeType&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for("function"===typeof n.focus&&n.focus(),n=0;n<e.length;n++)(t=e[n]).element.scrollLeft=t.left,t.element.scrollTop=t.top}}var mr=u&&"documentMode"in document&&11>=document.documentMode,gr=null,yr=null,vr=null,_r=!1;function br(t,e,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;_r||null==gr||gr!==X(r)||("selectionStart"in(r=gr)&&fr(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},vr&&lr(vr,r)||(vr=r,0<(r=Hr(yr,"onSelect")).length&&(e=new un("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=gr)))}function xr(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var wr={animationend:xr("Animation","AnimationEnd"),animationiteration:xr("Animation","AnimationIteration"),animationstart:xr("Animation","AnimationStart"),transitionend:xr("Transition","TransitionEnd")},Sr={},Er={};function Tr(t){if(Sr[t])return Sr[t];if(!wr[t])return t;var e,n=wr[t];for(e in n)if(n.hasOwnProperty(e)&&e in Er)return Sr[t]=n[e];return t}u&&(Er=document.createElement("div").style,"AnimationEvent"in window||(delete wr.animationend.animation,delete wr.animationiteration.animation,delete wr.animationstart.animation),"TransitionEvent"in window||delete wr.transitionend.transition);var Mr=Tr("animationend"),Ar=Tr("animationiteration"),Cr=Tr("animationstart"),Pr=Tr("transitionend"),kr=new Map,Ir="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Or(t,e){kr.set(t,e),l(e,[t])}for(var Lr=0;Lr<Ir.length;Lr++){var jr=Ir[Lr];Or(jr.toLowerCase(),"on"+(jr[0].toUpperCase()+jr.slice(1)))}Or(Mr,"onAnimationEnd"),Or(Ar,"onAnimationIteration"),Or(Cr,"onAnimationStart"),Or("dblclick","onDoubleClick"),Or("focusin","onFocus"),Or("focusout","onBlur"),Or(Pr,"onTransitionEnd"),c("onMouseEnter",["mouseout","mouseover"]),c("onMouseLeave",["mouseout","mouseover"]),c("onPointerEnter",["pointerout","pointerover"]),c("onPointerLeave",["pointerout","pointerover"]),l("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),l("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),l("onBeforeInput",["compositionend","keypress","textInput","paste"]),l("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var zr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Rr=new Set("cancel close invalid load scroll toggle".split(" ").concat(zr));function Dr(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,function(t,e,n,r,i,a,s,l,c){if(Ut.apply(this,arguments),Rt){if(!Rt)throw Error(o(198));var u=Dt;Rt=!1,Dt=null,Bt||(Bt=!0,Ft=u)}}(r,e,void 0,t),t.currentTarget=null}function Br(t,e){e=0!==(4&e);for(var n=0;n<t.length;n++){var r=t[n],i=r.event;r=r.listeners;t:{var o=void 0;if(e)for(var a=r.length-1;0<=a;a--){var s=r[a],l=s.instance,c=s.currentTarget;if(s=s.listener,l!==o&&i.isPropagationStopped())break t;Dr(i,s,c),o=l}else for(a=0;a<r.length;a++){if(l=(s=r[a]).instance,c=s.currentTarget,s=s.listener,l!==o&&i.isPropagationStopped())break t;Dr(i,s,c),o=l}}}if(Bt)throw t=Ft,Bt=!1,Ft=null,t}function Fr(t,e){var n=e[mi];void 0===n&&(n=e[mi]=new Set);var r=t+"__bubble";n.has(r)||(Wr(e,t,2,!1),n.add(r))}function Nr(t,e,n){var r=0;e&&(r|=4),Wr(n,t,r,e)}var Ur="_reactListening"+Math.random().toString(36).slice(2);function Vr(t){if(!t[Ur]){t[Ur]=!0,a.forEach((function(e){"selectionchange"!==e&&(Rr.has(e)||Nr(e,!1,t),Nr(e,!0,t))}));var e=9===t.nodeType?t:t.ownerDocument;null===e||e[Ur]||(e[Ur]=!0,Nr("selectionchange",!1,e))}}function Wr(t,e,n,r){switch(Ke(e)){case 1:var i=qe;break;case 4:i=He;break;default:i=Ze}n=i.bind(null,e,n,t),i=void 0,!Lt||"touchstart"!==e&&"touchmove"!==e&&"wheel"!==e||(i=!0),r?void 0!==i?t.addEventListener(e,n,{capture:!0,passive:i}):t.addEventListener(e,n,!0):void 0!==i?t.addEventListener(e,n,{passive:i}):t.addEventListener(e,n,!1)}function Gr(t,e,n,r,i){var o=r;if(0===(1&e)&&0===(2&e)&&null!==r)t:for(;;){if(null===r)return;var a=r.tag;if(3===a||4===a){var s=r.stateNode.containerInfo;if(s===i||8===s.nodeType&&s.parentNode===i)break;if(4===a)for(a=r.return;null!==a;){var l=a.tag;if((3===l||4===l)&&((l=a.stateNode.containerInfo)===i||8===l.nodeType&&l.parentNode===i))return;a=a.return}for(;null!==s;){if(null===(a=vi(s)))return;if(5===(l=a.tag)||6===l){r=o=a;continue t}s=s.parentNode}}r=r.return}It((function(){var r=o,i=xt(n),a=[];t:{var s=kr.get(t);if(void 0!==s){var l=un,c=t;switch(t){case"keypress":if(0===en(n))break t;case"keydown":case"keyup":l=An;break;case"focusin":c="focus",l=gn;break;case"focusout":c="blur",l=gn;break;case"beforeblur":case"afterblur":l=gn;break;case"click":if(2===n.button)break t;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":l=pn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":l=mn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":l=Pn;break;case Mr:case Ar:case Cr:l=yn;break;case Pr:l=kn;break;case"scroll":l=dn;break;case"wheel":l=On;break;case"copy":case"cut":case"paste":l=_n;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":l=Cn}var u=0!==(4&e),h=!u&&"scroll"===t,d=u?null!==s?s+"Capture":null:s;u=[];for(var f,p=r;null!==p;){var m=(f=p).stateNode;if(5===f.tag&&null!==m&&(f=m,null!==d&&(null!=(m=Ot(p,d))&&u.push(qr(p,m,f)))),h)break;p=p.return}0<u.length&&(s=new l(s,c,null,n,i),a.push({event:s,listeners:u}))}}if(0===(7&e)){if(l="mouseout"===t||"pointerout"===t,(!(s="mouseover"===t||"pointerover"===t)||n===bt||!(c=n.relatedTarget||n.fromElement)||!vi(c)&&!c[pi])&&(l||s)&&(s=i.window===i?i:(s=i.ownerDocument)?s.defaultView||s.parentWindow:window,l?(l=r,null!==(c=(c=n.relatedTarget||n.toElement)?vi(c):null)&&(c!==(h=Vt(c))||5!==c.tag&&6!==c.tag)&&(c=null)):(l=null,c=r),l!==c)){if(u=pn,m="onMouseLeave",d="onMouseEnter",p="mouse","pointerout"!==t&&"pointerover"!==t||(u=Cn,m="onPointerLeave",d="onPointerEnter",p="pointer"),h=null==l?s:bi(l),f=null==c?s:bi(c),(s=new u(m,p+"leave",l,n,i)).target=h,s.relatedTarget=f,m=null,vi(i)===r&&((u=new u(d,p+"enter",c,n,i)).target=f,u.relatedTarget=h,m=u),h=m,l&&c)t:{for(d=c,p=0,f=u=l;f;f=Zr(f))p++;for(f=0,m=d;m;m=Zr(m))f++;for(;0<p-f;)u=Zr(u),p--;for(;0<f-p;)d=Zr(d),f--;for(;p--;){if(u===d||null!==d&&u===d.alternate)break t;u=Zr(u),d=Zr(d)}u=null}else u=null;null!==l&&Xr(a,s,l,u,!1),null!==c&&null!==h&&Xr(a,h,c,u,!0)}if("select"===(l=(s=r?bi(r):window).nodeName&&s.nodeName.toLowerCase())||"input"===l&&"file"===s.type)var g=Kn;else if(Gn(s))if($n)g=ar;else{g=ir;var y=rr}else(l=s.nodeName)&&"input"===l.toLowerCase()&&("checkbox"===s.type||"radio"===s.type)&&(g=or);switch(g&&(g=g(t,r))?qn(a,g,n,i):(y&&y(t,s,r),"focusout"===t&&(y=s._wrapperState)&&y.controlled&&"number"===s.type&&tt(s,"number",s.value)),y=r?bi(r):window,t){case"focusin":(Gn(y)||"true"===y.contentEditable)&&(gr=y,yr=r,vr=null);break;case"focusout":vr=yr=gr=null;break;case"mousedown":_r=!0;break;case"contextmenu":case"mouseup":case"dragend":_r=!1,br(a,n,i);break;case"selectionchange":if(mr)break;case"keydown":case"keyup":br(a,n,i)}var v;if(jn)t:{switch(t){case"compositionstart":var _="onCompositionStart";break t;case"compositionend":_="onCompositionEnd";break t;case"compositionupdate":_="onCompositionUpdate";break t}_=void 0}else Vn?Nn(t,n)&&(_="onCompositionEnd"):"keydown"===t&&229===n.keyCode&&(_="onCompositionStart");_&&(Dn&&"ko"!==n.locale&&(Vn||"onCompositionStart"!==_?"onCompositionEnd"===_&&Vn&&(v=tn()):(Je="value"in($e=i)?$e.value:$e.textContent,Vn=!0)),0<(y=Hr(r,_)).length&&(_=new bn(_,t,null,n,i),a.push({event:_,listeners:y}),v?_.data=v:null!==(v=Un(n))&&(_.data=v))),(v=Rn?function(t,e){switch(t){case"compositionend":return Un(e);case"keypress":return 32!==e.which?null:(Fn=!0,Bn);case"textInput":return(t=e.data)===Bn&&Fn?null:t;default:return null}}(t,n):function(t,e){if(Vn)return"compositionend"===t||!jn&&Nn(t,e)?(t=tn(),Qe=Je=$e=null,Vn=!1,t):null;switch(t){case"paste":default:return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return Dn&&"ko"!==e.locale?null:e.data}}(t,n))&&(0<(r=Hr(r,"onBeforeInput")).length&&(i=new bn("onBeforeInput","beforeinput",null,n,i),a.push({event:i,listeners:r}),i.data=v))}Br(a,e)}))}function qr(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Hr(t,e){for(var n=e+"Capture",r=[];null!==t;){var i=t,o=i.stateNode;5===i.tag&&null!==o&&(i=o,null!=(o=Ot(t,n))&&r.unshift(qr(t,o,i)),null!=(o=Ot(t,e))&&r.push(qr(t,o,i))),t=t.return}return r}function Zr(t){if(null===t)return null;do{t=t.return}while(t&&5!==t.tag);return t||null}function Xr(t,e,n,r,i){for(var o=e._reactName,a=[];null!==n&&n!==r;){var s=n,l=s.alternate,c=s.stateNode;if(null!==l&&l===r)break;5===s.tag&&null!==c&&(s=c,i?null!=(l=Ot(n,o))&&a.unshift(qr(n,l,s)):i||null!=(l=Ot(n,o))&&a.push(qr(n,l,s))),n=n.return}0!==a.length&&t.push({event:e,listeners:a})}var Yr=/\r\n?/g,Kr=/\u0000|\uFFFD/g;function $r(t){return("string"===typeof t?t:""+t).replace(Yr,"\n").replace(Kr,"")}function Jr(t,e,n){if(e=$r(e),$r(t)!==e&&n)throw Error(o(425))}function Qr(){}var ti=null,ei=null;function ni(t,e){return"textarea"===t||"noscript"===t||"string"===typeof e.children||"number"===typeof e.children||"object"===typeof e.dangerouslySetInnerHTML&&null!==e.dangerouslySetInnerHTML&&null!=e.dangerouslySetInnerHTML.__html}var ri="function"===typeof setTimeout?setTimeout:void 0,ii="function"===typeof clearTimeout?clearTimeout:void 0,oi="function"===typeof Promise?Promise:void 0,ai="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof oi?function(t){return oi.resolve(null).then(t).catch(si)}:ri;function si(t){setTimeout((function(){throw t}))}function li(t,e){var n=e,r=0;do{var i=n.nextSibling;if(t.removeChild(n),i&&8===i.nodeType)if("/$"===(n=i.data)){if(0===r)return t.removeChild(i),void Ve(e);r--}else"$"!==n&&"$?"!==n&&"$!"!==n||r++;n=i}while(n);Ve(e)}function ci(t){for(;null!=t;t=t.nextSibling){var e=t.nodeType;if(1===e||3===e)break;if(8===e){if("$"===(e=t.data)||"$!"===e||"$?"===e)break;if("/$"===e)return null}}return t}function ui(t){t=t.previousSibling;for(var e=0;t;){if(8===t.nodeType){var n=t.data;if("$"===n||"$!"===n||"$?"===n){if(0===e)return t;e--}else"/$"===n&&e++}t=t.previousSibling}return null}var hi=Math.random().toString(36).slice(2),di="__reactFiber$"+hi,fi="__reactProps$"+hi,pi="__reactContainer$"+hi,mi="__reactEvents$"+hi,gi="__reactListeners$"+hi,yi="__reactHandles$"+hi;function vi(t){var e=t[di];if(e)return e;for(var n=t.parentNode;n;){if(e=n[pi]||n[di]){if(n=e.alternate,null!==e.child||null!==n&&null!==n.child)for(t=ui(t);null!==t;){if(n=t[di])return n;t=ui(t)}return e}n=(t=n).parentNode}return null}function _i(t){return!(t=t[di]||t[pi])||5!==t.tag&&6!==t.tag&&13!==t.tag&&3!==t.tag?null:t}function bi(t){if(5===t.tag||6===t.tag)return t.stateNode;throw Error(o(33))}function xi(t){return t[fi]||null}var wi=[],Si=-1;function Ei(t){return{current:t}}function Ti(t){0>Si||(t.current=wi[Si],wi[Si]=null,Si--)}function Mi(t,e){Si++,wi[Si]=t.current,t.current=e}var Ai={},Ci=Ei(Ai),Pi=Ei(!1),ki=Ai;function Ii(t,e){var n=t.type.contextTypes;if(!n)return Ai;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i,o={};for(i in n)o[i]=e[i];return r&&((t=t.stateNode).__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=o),o}function Oi(t){return null!==(t=t.childContextTypes)&&void 0!==t}function Li(){Ti(Pi),Ti(Ci)}function ji(t,e,n){if(Ci.current!==Ai)throw Error(o(168));Mi(Ci,e),Mi(Pi,n)}function zi(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,"function"!==typeof r.getChildContext)return n;for(var i in r=r.getChildContext())if(!(i in e))throw Error(o(108,W(t)||"Unknown",i));return D({},n,r)}function Ri(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Ai,ki=Ci.current,Mi(Ci,t),Mi(Pi,Pi.current),!0}function Di(t,e,n){var r=t.stateNode;if(!r)throw Error(o(169));n?(t=zi(t,e,ki),r.__reactInternalMemoizedMergedChildContext=t,Ti(Pi),Ti(Ci),Mi(Ci,t)):Ti(Pi),Mi(Pi,n)}var Bi=null,Fi=!1,Ni=!1;function Ui(t){null===Bi?Bi=[t]:Bi.push(t)}function Vi(){if(!Ni&&null!==Bi){Ni=!0;var t=0,e=_e;try{var n=Bi;for(_e=1;t<n.length;t++){var r=n[t];do{r=r(!0)}while(null!==r)}Bi=null,Fi=!1}catch(i){throw null!==Bi&&(Bi=Bi.slice(t+1)),Zt(Qt,Vi),i}finally{_e=e,Ni=!1}}return null}var Wi=[],Gi=0,qi=null,Hi=0,Zi=[],Xi=0,Yi=null,Ki=1,$i="";function Ji(t,e){Wi[Gi++]=Hi,Wi[Gi++]=qi,qi=t,Hi=e}function Qi(t,e,n){Zi[Xi++]=Ki,Zi[Xi++]=$i,Zi[Xi++]=Yi,Yi=t;var r=Ki;t=$i;var i=32-ae(r)-1;r&=~(1<<i),n+=1;var o=32-ae(e)+i;if(30<o){var a=i-i%5;o=(r&(1<<a)-1).toString(32),r>>=a,i-=a,Ki=1<<32-ae(e)+i|n<<i|r,$i=o+t}else Ki=1<<o|n<<i|r,$i=t}function to(t){null!==t.return&&(Ji(t,1),Qi(t,1,0))}function eo(t){for(;t===qi;)qi=Wi[--Gi],Wi[Gi]=null,Hi=Wi[--Gi],Wi[Gi]=null;for(;t===Yi;)Yi=Zi[--Xi],Zi[Xi]=null,$i=Zi[--Xi],Zi[Xi]=null,Ki=Zi[--Xi],Zi[Xi]=null}var no=null,ro=null,io=!1,oo=null;function ao(t,e){var n=Ic(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,null===(e=t.deletions)?(t.deletions=[n],t.flags|=16):e.push(n)}function so(t,e){switch(t.tag){case 5:var n=t.type;return null!==(e=1!==e.nodeType||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e)&&(t.stateNode=e,no=t,ro=ci(e.firstChild),!0);case 6:return null!==(e=""===t.pendingProps||3!==e.nodeType?null:e)&&(t.stateNode=e,no=t,ro=null,!0);case 13:return null!==(e=8!==e.nodeType?null:e)&&(n=null!==Yi?{id:Ki,overflow:$i}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},(n=Ic(18,null,null,0)).stateNode=e,n.return=t,t.child=n,no=t,ro=null,!0);default:return!1}}function lo(t){return 0!==(1&t.mode)&&0===(128&t.flags)}function co(t){if(io){var e=ro;if(e){var n=e;if(!so(t,e)){if(lo(t))throw Error(o(418));e=ci(n.nextSibling);var r=no;e&&so(t,e)?ao(r,n):(t.flags=-4097&t.flags|2,io=!1,no=t)}}else{if(lo(t))throw Error(o(418));t.flags=-4097&t.flags|2,io=!1,no=t}}}function uo(t){for(t=t.return;null!==t&&5!==t.tag&&3!==t.tag&&13!==t.tag;)t=t.return;no=t}function ho(t){if(t!==no)return!1;if(!io)return uo(t),io=!0,!1;var e;if((e=3!==t.tag)&&!(e=5!==t.tag)&&(e="head"!==(e=t.type)&&"body"!==e&&!ni(t.type,t.memoizedProps)),e&&(e=ro)){if(lo(t))throw fo(),Error(o(418));for(;e;)ao(t,e),e=ci(e.nextSibling)}if(uo(t),13===t.tag){if(!(t=null!==(t=t.memoizedState)?t.dehydrated:null))throw Error(o(317));t:{for(t=t.nextSibling,e=0;t;){if(8===t.nodeType){var n=t.data;if("/$"===n){if(0===e){ro=ci(t.nextSibling);break t}e--}else"$"!==n&&"$!"!==n&&"$?"!==n||e++}t=t.nextSibling}ro=null}}else ro=no?ci(t.stateNode.nextSibling):null;return!0}function fo(){for(var t=ro;t;)t=ci(t.nextSibling)}function po(){ro=no=null,io=!1}function mo(t){null===oo?oo=[t]:oo.push(t)}var go=b.ReactCurrentBatchConfig;function yo(t,e,n){if(null!==(t=n.ref)&&"function"!==typeof t&&"object"!==typeof t){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(o(309));var r=n.stateNode}if(!r)throw Error(o(147,t));var i=r,a=""+t;return null!==e&&null!==e.ref&&"function"===typeof e.ref&&e.ref._stringRef===a?e.ref:(e=function(t){var e=i.refs;null===t?delete e[a]:e[a]=t},e._stringRef=a,e)}if("string"!==typeof t)throw Error(o(284));if(!n._owner)throw Error(o(290,t))}return t}function vo(t,e){throw t=Object.prototype.toString.call(e),Error(o(31,"[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function _o(t){return(0,t._init)(t._payload)}function bo(t){function e(e,n){if(t){var r=e.deletions;null===r?(e.deletions=[n],e.flags|=16):r.push(n)}}function n(n,r){if(!t)return null;for(;null!==r;)e(n,r),r=r.sibling;return null}function r(t,e){for(t=new Map;null!==e;)null!==e.key?t.set(e.key,e):t.set(e.index,e),e=e.sibling;return t}function i(t,e){return(t=Lc(t,e)).index=0,t.sibling=null,t}function a(e,n,r){return e.index=r,t?null!==(r=e.alternate)?(r=r.index)<n?(e.flags|=2,n):r:(e.flags|=2,n):(e.flags|=1048576,n)}function s(e){return t&&null===e.alternate&&(e.flags|=2),e}function l(t,e,n,r){return null===e||6!==e.tag?((e=Dc(n,t.mode,r)).return=t,e):((e=i(e,n)).return=t,e)}function c(t,e,n,r){var o=n.type;return o===S?h(t,e,n.props.children,r,n.key):null!==e&&(e.elementType===o||"object"===typeof o&&null!==o&&o.$$typeof===O&&_o(o)===e.type)?((r=i(e,n.props)).ref=yo(t,e,n),r.return=t,r):((r=jc(n.type,n.key,n.props,null,t.mode,r)).ref=yo(t,e,n),r.return=t,r)}function u(t,e,n,r){return null===e||4!==e.tag||e.stateNode.containerInfo!==n.containerInfo||e.stateNode.implementation!==n.implementation?((e=Bc(n,t.mode,r)).return=t,e):((e=i(e,n.children||[])).return=t,e)}function h(t,e,n,r,o){return null===e||7!==e.tag?((e=zc(n,t.mode,r,o)).return=t,e):((e=i(e,n)).return=t,e)}function d(t,e,n){if("string"===typeof e&&""!==e||"number"===typeof e)return(e=Dc(""+e,t.mode,n)).return=t,e;if("object"===typeof e&&null!==e){switch(e.$$typeof){case x:return(n=jc(e.type,e.key,e.props,null,t.mode,n)).ref=yo(t,null,e),n.return=t,n;case w:return(e=Bc(e,t.mode,n)).return=t,e;case O:return d(t,(0,e._init)(e._payload),n)}if(et(e)||z(e))return(e=zc(e,t.mode,n,null)).return=t,e;vo(t,e)}return null}function f(t,e,n,r){var i=null!==e?e.key:null;if("string"===typeof n&&""!==n||"number"===typeof n)return null!==i?null:l(t,e,""+n,r);if("object"===typeof n&&null!==n){switch(n.$$typeof){case x:return n.key===i?c(t,e,n,r):null;case w:return n.key===i?u(t,e,n,r):null;case O:return f(t,e,(i=n._init)(n._payload),r)}if(et(n)||z(n))return null!==i?null:h(t,e,n,r,null);vo(t,n)}return null}function p(t,e,n,r,i){if("string"===typeof r&&""!==r||"number"===typeof r)return l(e,t=t.get(n)||null,""+r,i);if("object"===typeof r&&null!==r){switch(r.$$typeof){case x:return c(e,t=t.get(null===r.key?n:r.key)||null,r,i);case w:return u(e,t=t.get(null===r.key?n:r.key)||null,r,i);case O:return p(t,e,n,(0,r._init)(r._payload),i)}if(et(r)||z(r))return h(e,t=t.get(n)||null,r,i,null);vo(e,r)}return null}function m(i,o,s,l){for(var c=null,u=null,h=o,m=o=0,g=null;null!==h&&m<s.length;m++){h.index>m?(g=h,h=null):g=h.sibling;var y=f(i,h,s[m],l);if(null===y){null===h&&(h=g);break}t&&h&&null===y.alternate&&e(i,h),o=a(y,o,m),null===u?c=y:u.sibling=y,u=y,h=g}if(m===s.length)return n(i,h),io&&Ji(i,m),c;if(null===h){for(;m<s.length;m++)null!==(h=d(i,s[m],l))&&(o=a(h,o,m),null===u?c=h:u.sibling=h,u=h);return io&&Ji(i,m),c}for(h=r(i,h);m<s.length;m++)null!==(g=p(h,i,m,s[m],l))&&(t&&null!==g.alternate&&h.delete(null===g.key?m:g.key),o=a(g,o,m),null===u?c=g:u.sibling=g,u=g);return t&&h.forEach((function(t){return e(i,t)})),io&&Ji(i,m),c}function g(i,s,l,c){var u=z(l);if("function"!==typeof u)throw Error(o(150));if(null==(l=u.call(l)))throw Error(o(151));for(var h=u=null,m=s,g=s=0,y=null,v=l.next();null!==m&&!v.done;g++,v=l.next()){m.index>g?(y=m,m=null):y=m.sibling;var _=f(i,m,v.value,c);if(null===_){null===m&&(m=y);break}t&&m&&null===_.alternate&&e(i,m),s=a(_,s,g),null===h?u=_:h.sibling=_,h=_,m=y}if(v.done)return n(i,m),io&&Ji(i,g),u;if(null===m){for(;!v.done;g++,v=l.next())null!==(v=d(i,v.value,c))&&(s=a(v,s,g),null===h?u=v:h.sibling=v,h=v);return io&&Ji(i,g),u}for(m=r(i,m);!v.done;g++,v=l.next())null!==(v=p(m,i,g,v.value,c))&&(t&&null!==v.alternate&&m.delete(null===v.key?g:v.key),s=a(v,s,g),null===h?u=v:h.sibling=v,h=v);return t&&m.forEach((function(t){return e(i,t)})),io&&Ji(i,g),u}return function t(r,o,a,l){if("object"===typeof a&&null!==a&&a.type===S&&null===a.key&&(a=a.props.children),"object"===typeof a&&null!==a){switch(a.$$typeof){case x:t:{for(var c=a.key,u=o;null!==u;){if(u.key===c){if((c=a.type)===S){if(7===u.tag){n(r,u.sibling),(o=i(u,a.props.children)).return=r,r=o;break t}}else if(u.elementType===c||"object"===typeof c&&null!==c&&c.$$typeof===O&&_o(c)===u.type){n(r,u.sibling),(o=i(u,a.props)).ref=yo(r,u,a),o.return=r,r=o;break t}n(r,u);break}e(r,u),u=u.sibling}a.type===S?((o=zc(a.props.children,r.mode,l,a.key)).return=r,r=o):((l=jc(a.type,a.key,a.props,null,r.mode,l)).ref=yo(r,o,a),l.return=r,r=l)}return s(r);case w:t:{for(u=a.key;null!==o;){if(o.key===u){if(4===o.tag&&o.stateNode.containerInfo===a.containerInfo&&o.stateNode.implementation===a.implementation){n(r,o.sibling),(o=i(o,a.children||[])).return=r,r=o;break t}n(r,o);break}e(r,o),o=o.sibling}(o=Bc(a,r.mode,l)).return=r,r=o}return s(r);case O:return t(r,o,(u=a._init)(a._payload),l)}if(et(a))return m(r,o,a,l);if(z(a))return g(r,o,a,l);vo(r,a)}return"string"===typeof a&&""!==a||"number"===typeof a?(a=""+a,null!==o&&6===o.tag?(n(r,o.sibling),(o=i(o,a)).return=r,r=o):(n(r,o),(o=Dc(a,r.mode,l)).return=r,r=o),s(r)):n(r,o)}}var xo=bo(!0),wo=bo(!1),So=Ei(null),Eo=null,To=null,Mo=null;function Ao(){Mo=To=Eo=null}function Co(t){var e=So.current;Ti(So),t._currentValue=e}function Po(t,e,n){for(;null!==t;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,null!==r&&(r.childLanes|=e)):null!==r&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function ko(t,e){Eo=t,Mo=To=null,null!==(t=t.dependencies)&&null!==t.firstContext&&(0!==(t.lanes&e)&&(_s=!0),t.firstContext=null)}function Io(t){var e=t._currentValue;if(Mo!==t)if(t={context:t,memoizedValue:e,next:null},null===To){if(null===Eo)throw Error(o(308));To=t,Eo.dependencies={lanes:0,firstContext:t}}else To=To.next=t;return e}var Oo=null;function Lo(t){null===Oo?Oo=[t]:Oo.push(t)}function jo(t,e,n,r){var i=e.interleaved;return null===i?(n.next=n,Lo(e)):(n.next=i.next,i.next=n),e.interleaved=n,zo(t,r)}function zo(t,e){t.lanes|=e;var n=t.alternate;for(null!==n&&(n.lanes|=e),n=t,t=t.return;null!==t;)t.childLanes|=e,null!==(n=t.alternate)&&(n.childLanes|=e),n=t,t=t.return;return 3===n.tag?n.stateNode:null}var Ro=!1;function Do(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Bo(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Fo(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function No(t,e,n){var r=t.updateQueue;if(null===r)return null;if(r=r.shared,0!==(2&Cl)){var i=r.pending;return null===i?e.next=e:(e.next=i.next,i.next=e),r.pending=e,zo(t,n)}return null===(i=r.interleaved)?(e.next=e,Lo(r)):(e.next=i.next,i.next=e),r.interleaved=e,zo(t,n)}function Uo(t,e,n){if(null!==(e=e.updateQueue)&&(e=e.shared,0!==(4194240&n))){var r=e.lanes;n|=r&=t.pendingLanes,e.lanes=n,ve(t,n)}}function Vo(t,e){var n=t.updateQueue,r=t.alternate;if(null!==r&&n===(r=r.updateQueue)){var i=null,o=null;if(null!==(n=n.firstBaseUpdate)){do{var a={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===o?i=o=a:o=o.next=a,n=n.next}while(null!==n);null===o?i=o=e:o=o.next=e}else i=o=e;return n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:o,shared:r.shared,effects:r.effects},void(t.updateQueue=n)}null===(t=n.lastBaseUpdate)?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function Wo(t,e,n,r){var i=t.updateQueue;Ro=!1;var o=i.firstBaseUpdate,a=i.lastBaseUpdate,s=i.shared.pending;if(null!==s){i.shared.pending=null;var l=s,c=l.next;l.next=null,null===a?o=c:a.next=c,a=l;var u=t.alternate;null!==u&&((s=(u=u.updateQueue).lastBaseUpdate)!==a&&(null===s?u.firstBaseUpdate=c:s.next=c,u.lastBaseUpdate=l))}if(null!==o){var h=i.baseState;for(a=0,u=c=l=null,s=o;;){var d=s.lane,f=s.eventTime;if((r&d)===d){null!==u&&(u=u.next={eventTime:f,lane:0,tag:s.tag,payload:s.payload,callback:s.callback,next:null});t:{var p=t,m=s;switch(d=e,f=n,m.tag){case 1:if("function"===typeof(p=m.payload)){h=p.call(f,h,d);break t}h=p;break t;case 3:p.flags=-65537&p.flags|128;case 0:if(null===(d="function"===typeof(p=m.payload)?p.call(f,h,d):p)||void 0===d)break t;h=D({},h,d);break t;case 2:Ro=!0}}null!==s.callback&&0!==s.lane&&(t.flags|=64,null===(d=i.effects)?i.effects=[s]:d.push(s))}else f={eventTime:f,lane:d,tag:s.tag,payload:s.payload,callback:s.callback,next:null},null===u?(c=u=f,l=h):u=u.next=f,a|=d;if(null===(s=s.next)){if(null===(s=i.shared.pending))break;s=(d=s).next,d.next=null,i.lastBaseUpdate=d,i.shared.pending=null}}if(null===u&&(l=h),i.baseState=l,i.firstBaseUpdate=c,i.lastBaseUpdate=u,null!==(e=i.shared.interleaved)){i=e;do{a|=i.lane,i=i.next}while(i!==e)}else null===o&&(i.shared.lanes=0);Rl|=a,t.lanes=a,t.memoizedState=h}}function Go(t,e,n){if(t=e.effects,e.effects=null,null!==t)for(e=0;e<t.length;e++){var r=t[e],i=r.callback;if(null!==i){if(r.callback=null,r=n,"function"!==typeof i)throw Error(o(191,i));i.call(r)}}}var qo={},Ho=Ei(qo),Zo=Ei(qo),Xo=Ei(qo);function Yo(t){if(t===qo)throw Error(o(174));return t}function Ko(t,e){switch(Mi(Xo,e),Mi(Zo,t),Mi(Ho,qo),t=e.nodeType){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:lt(null,"");break;default:e=lt(e=(t=8===t?e.parentNode:e).namespaceURI||null,t=t.tagName)}Ti(Ho),Mi(Ho,e)}function $o(){Ti(Ho),Ti(Zo),Ti(Xo)}function Jo(t){Yo(Xo.current);var e=Yo(Ho.current),n=lt(e,t.type);e!==n&&(Mi(Zo,t),Mi(Ho,n))}function Qo(t){Zo.current===t&&(Ti(Ho),Ti(Zo))}var ta=Ei(0);function ea(t){for(var e=t;null!==e;){if(13===e.tag){var n=e.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return e}else if(19===e.tag&&void 0!==e.memoizedProps.revealOrder){if(0!==(128&e.flags))return e}else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break;for(;null===e.sibling;){if(null===e.return||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var na=[];function ra(){for(var t=0;t<na.length;t++)na[t]._workInProgressVersionPrimary=null;na.length=0}var ia=b.ReactCurrentDispatcher,oa=b.ReactCurrentBatchConfig,aa=0,sa=null,la=null,ca=null,ua=!1,ha=!1,da=0,fa=0;function pa(){throw Error(o(321))}function ma(t,e){if(null===e)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!sr(t[n],e[n]))return!1;return!0}function ga(t,e,n,r,i,a){if(aa=a,sa=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,ia.current=null===t||null===t.memoizedState?Qa:ts,t=n(r,i),ha){a=0;do{if(ha=!1,da=0,25<=a)throw Error(o(301));a+=1,ca=la=null,e.updateQueue=null,ia.current=es,t=n(r,i)}while(ha)}if(ia.current=Ja,e=null!==la&&null!==la.next,aa=0,ca=la=sa=null,ua=!1,e)throw Error(o(300));return t}function ya(){var t=0!==da;return da=0,t}function va(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===ca?sa.memoizedState=ca=t:ca=ca.next=t,ca}function _a(){if(null===la){var t=sa.alternate;t=null!==t?t.memoizedState:null}else t=la.next;var e=null===ca?sa.memoizedState:ca.next;if(null!==e)ca=e,la=t;else{if(null===t)throw Error(o(310));t={memoizedState:(la=t).memoizedState,baseState:la.baseState,baseQueue:la.baseQueue,queue:la.queue,next:null},null===ca?sa.memoizedState=ca=t:ca=ca.next=t}return ca}function ba(t,e){return"function"===typeof e?e(t):e}function xa(t){var e=_a(),n=e.queue;if(null===n)throw Error(o(311));n.lastRenderedReducer=t;var r=la,i=r.baseQueue,a=n.pending;if(null!==a){if(null!==i){var s=i.next;i.next=a.next,a.next=s}r.baseQueue=i=a,n.pending=null}if(null!==i){a=i.next,r=r.baseState;var l=s=null,c=null,u=a;do{var h=u.lane;if((aa&h)===h)null!==c&&(c=c.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:t(r,u.action);else{var d={lane:h,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};null===c?(l=c=d,s=r):c=c.next=d,sa.lanes|=h,Rl|=h}u=u.next}while(null!==u&&u!==a);null===c?s=r:c.next=l,sr(r,e.memoizedState)||(_s=!0),e.memoizedState=r,e.baseState=s,e.baseQueue=c,n.lastRenderedState=r}if(null!==(t=n.interleaved)){i=t;do{a=i.lane,sa.lanes|=a,Rl|=a,i=i.next}while(i!==t)}else null===i&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function wa(t){var e=_a(),n=e.queue;if(null===n)throw Error(o(311));n.lastRenderedReducer=t;var r=n.dispatch,i=n.pending,a=e.memoizedState;if(null!==i){n.pending=null;var s=i=i.next;do{a=t(a,s.action),s=s.next}while(s!==i);sr(a,e.memoizedState)||(_s=!0),e.memoizedState=a,null===e.baseQueue&&(e.baseState=a),n.lastRenderedState=a}return[a,r]}function Sa(){}function Ea(t,e){var n=sa,r=_a(),i=e(),a=!sr(r.memoizedState,i);if(a&&(r.memoizedState=i,_s=!0),r=r.queue,Ra(Aa.bind(null,n,r,t),[t]),r.getSnapshot!==e||a||null!==ca&&1&ca.memoizedState.tag){if(n.flags|=2048,Ia(9,Ma.bind(null,n,r,i,e),void 0,null),null===Pl)throw Error(o(349));0!==(30&aa)||Ta(n,e,i)}return i}function Ta(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},null===(e=sa.updateQueue)?(e={lastEffect:null,stores:null},sa.updateQueue=e,e.stores=[t]):null===(n=e.stores)?e.stores=[t]:n.push(t)}function Ma(t,e,n,r){e.value=n,e.getSnapshot=r,Ca(e)&&Pa(t)}function Aa(t,e,n){return n((function(){Ca(e)&&Pa(t)}))}function Ca(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!sr(t,n)}catch(r){return!0}}function Pa(t){var e=zo(t,1);null!==e&&nc(e,t,1,-1)}function ka(t){var e=va();return"function"===typeof t&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:ba,lastRenderedState:t},e.queue=t,t=t.dispatch=Xa.bind(null,sa,t),[e.memoizedState,t]}function Ia(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},null===(e=sa.updateQueue)?(e={lastEffect:null,stores:null},sa.updateQueue=e,e.lastEffect=t.next=t):null===(n=e.lastEffect)?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t),t}function Oa(){return _a().memoizedState}function La(t,e,n,r){var i=va();sa.flags|=t,i.memoizedState=Ia(1|e,n,void 0,void 0===r?null:r)}function ja(t,e,n,r){var i=_a();r=void 0===r?null:r;var o=void 0;if(null!==la){var a=la.memoizedState;if(o=a.destroy,null!==r&&ma(r,a.deps))return void(i.memoizedState=Ia(e,n,o,r))}sa.flags|=t,i.memoizedState=Ia(1|e,n,o,r)}function za(t,e){return La(8390656,8,t,e)}function Ra(t,e){return ja(2048,8,t,e)}function Da(t,e){return ja(4,2,t,e)}function Ba(t,e){return ja(4,4,t,e)}function Fa(t,e){return"function"===typeof e?(t=t(),e(t),function(){e(null)}):null!==e&&void 0!==e?(t=t(),e.current=t,function(){e.current=null}):void 0}function Na(t,e,n){return n=null!==n&&void 0!==n?n.concat([t]):null,ja(4,4,Fa.bind(null,e,t),n)}function Ua(){}function Va(t,e){var n=_a();e=void 0===e?null:e;var r=n.memoizedState;return null!==r&&null!==e&&ma(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function Wa(t,e){var n=_a();e=void 0===e?null:e;var r=n.memoizedState;return null!==r&&null!==e&&ma(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function Ga(t,e,n){return 0===(21&aa)?(t.baseState&&(t.baseState=!1,_s=!0),t.memoizedState=n):(sr(n,e)||(n=me(),sa.lanes|=n,Rl|=n,t.baseState=!0),e)}function qa(t,e){var n=_e;_e=0!==n&&4>n?n:4,t(!0);var r=oa.transition;oa.transition={};try{t(!1),e()}finally{_e=n,oa.transition=r}}function Ha(){return _a().memoizedState}function Za(t,e,n){var r=ec(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},Ya(t))Ka(e,n);else if(null!==(n=jo(t,e,n,r))){nc(n,t,r,tc()),$a(n,e,r)}}function Xa(t,e,n){var r=ec(t),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(Ya(t))Ka(e,i);else{var o=t.alternate;if(0===t.lanes&&(null===o||0===o.lanes)&&null!==(o=e.lastRenderedReducer))try{var a=e.lastRenderedState,s=o(a,n);if(i.hasEagerState=!0,i.eagerState=s,sr(s,a)){var l=e.interleaved;return null===l?(i.next=i,Lo(e)):(i.next=l.next,l.next=i),void(e.interleaved=i)}}catch(c){}null!==(n=jo(t,e,i,r))&&(nc(n,t,r,i=tc()),$a(n,e,r))}}function Ya(t){var e=t.alternate;return t===sa||null!==e&&e===sa}function Ka(t,e){ha=ua=!0;var n=t.pending;null===n?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function $a(t,e,n){if(0!==(4194240&n)){var r=e.lanes;n|=r&=t.pendingLanes,e.lanes=n,ve(t,n)}}var Ja={readContext:Io,useCallback:pa,useContext:pa,useEffect:pa,useImperativeHandle:pa,useInsertionEffect:pa,useLayoutEffect:pa,useMemo:pa,useReducer:pa,useRef:pa,useState:pa,useDebugValue:pa,useDeferredValue:pa,useTransition:pa,useMutableSource:pa,useSyncExternalStore:pa,useId:pa,unstable_isNewReconciler:!1},Qa={readContext:Io,useCallback:function(t,e){return va().memoizedState=[t,void 0===e?null:e],t},useContext:Io,useEffect:za,useImperativeHandle:function(t,e,n){return n=null!==n&&void 0!==n?n.concat([t]):null,La(4194308,4,Fa.bind(null,e,t),n)},useLayoutEffect:function(t,e){return La(4194308,4,t,e)},useInsertionEffect:function(t,e){return La(4,2,t,e)},useMemo:function(t,e){var n=va();return e=void 0===e?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=va();return e=void 0!==n?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=Za.bind(null,sa,t),[r.memoizedState,t]},useRef:function(t){return t={current:t},va().memoizedState=t},useState:ka,useDebugValue:Ua,useDeferredValue:function(t){return va().memoizedState=t},useTransition:function(){var t=ka(!1),e=t[0];return t=qa.bind(null,t[1]),va().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=sa,i=va();if(io){if(void 0===n)throw Error(o(407));n=n()}else{if(n=e(),null===Pl)throw Error(o(349));0!==(30&aa)||Ta(r,e,n)}i.memoizedState=n;var a={value:n,getSnapshot:e};return i.queue=a,za(Aa.bind(null,r,a,t),[t]),r.flags|=2048,Ia(9,Ma.bind(null,r,a,n,e),void 0,null),n},useId:function(){var t=va(),e=Pl.identifierPrefix;if(io){var n=$i;e=":"+e+"R"+(n=(Ki&~(1<<32-ae(Ki)-1)).toString(32)+n),0<(n=da++)&&(e+="H"+n.toString(32)),e+=":"}else e=":"+e+"r"+(n=fa++).toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},ts={readContext:Io,useCallback:Va,useContext:Io,useEffect:Ra,useImperativeHandle:Na,useInsertionEffect:Da,useLayoutEffect:Ba,useMemo:Wa,useReducer:xa,useRef:Oa,useState:function(){return xa(ba)},useDebugValue:Ua,useDeferredValue:function(t){return Ga(_a(),la.memoizedState,t)},useTransition:function(){return[xa(ba)[0],_a().memoizedState]},useMutableSource:Sa,useSyncExternalStore:Ea,useId:Ha,unstable_isNewReconciler:!1},es={readContext:Io,useCallback:Va,useContext:Io,useEffect:Ra,useImperativeHandle:Na,useInsertionEffect:Da,useLayoutEffect:Ba,useMemo:Wa,useReducer:wa,useRef:Oa,useState:function(){return wa(ba)},useDebugValue:Ua,useDeferredValue:function(t){var e=_a();return null===la?e.memoizedState=t:Ga(e,la.memoizedState,t)},useTransition:function(){return[wa(ba)[0],_a().memoizedState]},useMutableSource:Sa,useSyncExternalStore:Ea,useId:Ha,unstable_isNewReconciler:!1};function ns(t,e){if(t&&t.defaultProps){for(var n in e=D({},e),t=t.defaultProps)void 0===e[n]&&(e[n]=t[n]);return e}return e}function rs(t,e,n,r){n=null===(n=n(r,e=t.memoizedState))||void 0===n?e:D({},e,n),t.memoizedState=n,0===t.lanes&&(t.updateQueue.baseState=n)}var is={isMounted:function(t){return!!(t=t._reactInternals)&&Vt(t)===t},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=tc(),i=ec(t),o=Fo(r,i);o.payload=e,void 0!==n&&null!==n&&(o.callback=n),null!==(e=No(t,o,i))&&(nc(e,t,i,r),Uo(e,t,i))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=tc(),i=ec(t),o=Fo(r,i);o.tag=1,o.payload=e,void 0!==n&&null!==n&&(o.callback=n),null!==(e=No(t,o,i))&&(nc(e,t,i,r),Uo(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=tc(),r=ec(t),i=Fo(n,r);i.tag=2,void 0!==e&&null!==e&&(i.callback=e),null!==(e=No(t,i,r))&&(nc(e,t,r,n),Uo(e,t,r))}};function os(t,e,n,r,i,o,a){return"function"===typeof(t=t.stateNode).shouldComponentUpdate?t.shouldComponentUpdate(r,o,a):!e.prototype||!e.prototype.isPureReactComponent||(!lr(n,r)||!lr(i,o))}function as(t,e,n){var r=!1,i=Ai,o=e.contextType;return"object"===typeof o&&null!==o?o=Io(o):(i=Oi(e)?ki:Ci.current,o=(r=null!==(r=e.contextTypes)&&void 0!==r)?Ii(t,i):Ai),e=new e(n,o),t.memoizedState=null!==e.state&&void 0!==e.state?e.state:null,e.updater=is,t.stateNode=e,e._reactInternals=t,r&&((t=t.stateNode).__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=o),e}function ss(t,e,n,r){t=e.state,"function"===typeof e.componentWillReceiveProps&&e.componentWillReceiveProps(n,r),"function"===typeof e.UNSAFE_componentWillReceiveProps&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&is.enqueueReplaceState(e,e.state,null)}function ls(t,e,n,r){var i=t.stateNode;i.props=n,i.state=t.memoizedState,i.refs={},Do(t);var o=e.contextType;"object"===typeof o&&null!==o?i.context=Io(o):(o=Oi(e)?ki:Ci.current,i.context=Ii(t,o)),i.state=t.memoizedState,"function"===typeof(o=e.getDerivedStateFromProps)&&(rs(t,e,o,n),i.state=t.memoizedState),"function"===typeof e.getDerivedStateFromProps||"function"===typeof i.getSnapshotBeforeUpdate||"function"!==typeof i.UNSAFE_componentWillMount&&"function"!==typeof i.componentWillMount||(e=i.state,"function"===typeof i.componentWillMount&&i.componentWillMount(),"function"===typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount(),e!==i.state&&is.enqueueReplaceState(i,i.state,null),Wo(t,n,i,r),i.state=t.memoizedState),"function"===typeof i.componentDidMount&&(t.flags|=4194308)}function cs(t,e){try{var n="",r=e;do{n+=U(r),r=r.return}while(r);var i=n}catch(o){i="\nError generating stack: "+o.message+"\n"+o.stack}return{value:t,source:e,stack:i,digest:null}}function us(t,e,n){return{value:t,source:null,stack:null!=n?n:null,digest:null!=e?e:null}}function hs(t,e){try{console.error(e.value)}catch(n){setTimeout((function(){throw n}))}}var ds="function"===typeof WeakMap?WeakMap:Map;function fs(t,e,n){(n=Fo(-1,n)).tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){Gl||(Gl=!0,ql=r),hs(0,e)},n}function ps(t,e,n){(n=Fo(-1,n)).tag=3;var r=t.type.getDerivedStateFromError;if("function"===typeof r){var i=e.value;n.payload=function(){return r(i)},n.callback=function(){hs(0,e)}}var o=t.stateNode;return null!==o&&"function"===typeof o.componentDidCatch&&(n.callback=function(){hs(0,e),"function"!==typeof r&&(null===Hl?Hl=new Set([this]):Hl.add(this));var t=e.stack;this.componentDidCatch(e.value,{componentStack:null!==t?t:""})}),n}function ms(t,e,n){var r=t.pingCache;if(null===r){r=t.pingCache=new ds;var i=new Set;r.set(e,i)}else void 0===(i=r.get(e))&&(i=new Set,r.set(e,i));i.has(n)||(i.add(n),t=Tc.bind(null,t,e,n),e.then(t,t))}function gs(t){do{var e;if((e=13===t.tag)&&(e=null===(e=t.memoizedState)||null!==e.dehydrated),e)return t;t=t.return}while(null!==t);return null}function ys(t,e,n,r,i){return 0===(1&t.mode)?(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,1===n.tag&&(null===n.alternate?n.tag=17:((e=Fo(-1,1)).tag=2,No(n,e,1))),n.lanes|=1),t):(t.flags|=65536,t.lanes=i,t)}var vs=b.ReactCurrentOwner,_s=!1;function bs(t,e,n,r){e.child=null===t?wo(e,null,n,r):xo(e,t.child,n,r)}function xs(t,e,n,r,i){n=n.render;var o=e.ref;return ko(e,i),r=ga(t,e,n,r,o,i),n=ya(),null===t||_s?(io&&n&&to(e),e.flags|=1,bs(t,e,r,i),e.child):(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Gs(t,e,i))}function ws(t,e,n,r,i){if(null===t){var o=n.type;return"function"!==typeof o||Oc(o)||void 0!==o.defaultProps||null!==n.compare||void 0!==n.defaultProps?((t=jc(n.type,null,r,e,e.mode,i)).ref=e.ref,t.return=e,e.child=t):(e.tag=15,e.type=o,Ss(t,e,o,r,i))}if(o=t.child,0===(t.lanes&i)){var a=o.memoizedProps;if((n=null!==(n=n.compare)?n:lr)(a,r)&&t.ref===e.ref)return Gs(t,e,i)}return e.flags|=1,(t=Lc(o,r)).ref=e.ref,t.return=e,e.child=t}function Ss(t,e,n,r,i){if(null!==t){var o=t.memoizedProps;if(lr(o,r)&&t.ref===e.ref){if(_s=!1,e.pendingProps=r=o,0===(t.lanes&i))return e.lanes=t.lanes,Gs(t,e,i);0!==(131072&t.flags)&&(_s=!0)}}return Ms(t,e,n,r,i)}function Es(t,e,n){var r=e.pendingProps,i=r.children,o=null!==t?t.memoizedState:null;if("hidden"===r.mode)if(0===(1&e.mode))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Mi(Ll,Ol),Ol|=n;else{if(0===(1073741824&n))return t=null!==o?o.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Mi(Ll,Ol),Ol|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=null!==o?o.baseLanes:n,Mi(Ll,Ol),Ol|=r}else null!==o?(r=o.baseLanes|n,e.memoizedState=null):r=n,Mi(Ll,Ol),Ol|=r;return bs(t,e,i,n),e.child}function Ts(t,e){var n=e.ref;(null===t&&null!==n||null!==t&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function Ms(t,e,n,r,i){var o=Oi(n)?ki:Ci.current;return o=Ii(e,o),ko(e,i),n=ga(t,e,n,r,o,i),r=ya(),null===t||_s?(io&&r&&to(e),e.flags|=1,bs(t,e,n,i),e.child):(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Gs(t,e,i))}function As(t,e,n,r,i){if(Oi(n)){var o=!0;Ri(e)}else o=!1;if(ko(e,i),null===e.stateNode)Ws(t,e),as(e,n,r),ls(e,n,r,i),r=!0;else if(null===t){var a=e.stateNode,s=e.memoizedProps;a.props=s;var l=a.context,c=n.contextType;"object"===typeof c&&null!==c?c=Io(c):c=Ii(e,c=Oi(n)?ki:Ci.current);var u=n.getDerivedStateFromProps,h="function"===typeof u||"function"===typeof a.getSnapshotBeforeUpdate;h||"function"!==typeof a.UNSAFE_componentWillReceiveProps&&"function"!==typeof a.componentWillReceiveProps||(s!==r||l!==c)&&ss(e,a,r,c),Ro=!1;var d=e.memoizedState;a.state=d,Wo(e,r,a,i),l=e.memoizedState,s!==r||d!==l||Pi.current||Ro?("function"===typeof u&&(rs(e,n,u,r),l=e.memoizedState),(s=Ro||os(e,n,s,r,d,l,c))?(h||"function"!==typeof a.UNSAFE_componentWillMount&&"function"!==typeof a.componentWillMount||("function"===typeof a.componentWillMount&&a.componentWillMount(),"function"===typeof a.UNSAFE_componentWillMount&&a.UNSAFE_componentWillMount()),"function"===typeof a.componentDidMount&&(e.flags|=4194308)):("function"===typeof a.componentDidMount&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=l),a.props=r,a.state=l,a.context=c,r=s):("function"===typeof a.componentDidMount&&(e.flags|=4194308),r=!1)}else{a=e.stateNode,Bo(t,e),s=e.memoizedProps,c=e.type===e.elementType?s:ns(e.type,s),a.props=c,h=e.pendingProps,d=a.context,"object"===typeof(l=n.contextType)&&null!==l?l=Io(l):l=Ii(e,l=Oi(n)?ki:Ci.current);var f=n.getDerivedStateFromProps;(u="function"===typeof f||"function"===typeof a.getSnapshotBeforeUpdate)||"function"!==typeof a.UNSAFE_componentWillReceiveProps&&"function"!==typeof a.componentWillReceiveProps||(s!==h||d!==l)&&ss(e,a,r,l),Ro=!1,d=e.memoizedState,a.state=d,Wo(e,r,a,i);var p=e.memoizedState;s!==h||d!==p||Pi.current||Ro?("function"===typeof f&&(rs(e,n,f,r),p=e.memoizedState),(c=Ro||os(e,n,c,r,d,p,l)||!1)?(u||"function"!==typeof a.UNSAFE_componentWillUpdate&&"function"!==typeof a.componentWillUpdate||("function"===typeof a.componentWillUpdate&&a.componentWillUpdate(r,p,l),"function"===typeof a.UNSAFE_componentWillUpdate&&a.UNSAFE_componentWillUpdate(r,p,l)),"function"===typeof a.componentDidUpdate&&(e.flags|=4),"function"===typeof a.getSnapshotBeforeUpdate&&(e.flags|=1024)):("function"!==typeof a.componentDidUpdate||s===t.memoizedProps&&d===t.memoizedState||(e.flags|=4),"function"!==typeof a.getSnapshotBeforeUpdate||s===t.memoizedProps&&d===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=p),a.props=r,a.state=p,a.context=l,r=c):("function"!==typeof a.componentDidUpdate||s===t.memoizedProps&&d===t.memoizedState||(e.flags|=4),"function"!==typeof a.getSnapshotBeforeUpdate||s===t.memoizedProps&&d===t.memoizedState||(e.flags|=1024),r=!1)}return Cs(t,e,n,r,o,i)}function Cs(t,e,n,r,i,o){Ts(t,e);var a=0!==(128&e.flags);if(!r&&!a)return i&&Di(e,n,!1),Gs(t,e,o);r=e.stateNode,vs.current=e;var s=a&&"function"!==typeof n.getDerivedStateFromError?null:r.render();return e.flags|=1,null!==t&&a?(e.child=xo(e,t.child,null,o),e.child=xo(e,null,s,o)):bs(t,e,s,o),e.memoizedState=r.state,i&&Di(e,n,!0),e.child}function Ps(t){var e=t.stateNode;e.pendingContext?ji(0,e.pendingContext,e.pendingContext!==e.context):e.context&&ji(0,e.context,!1),Ko(t,e.containerInfo)}function ks(t,e,n,r,i){return po(),mo(i),e.flags|=256,bs(t,e,n,r),e.child}var Is,Os,Ls,js,zs={dehydrated:null,treeContext:null,retryLane:0};function Rs(t){return{baseLanes:t,cachePool:null,transitions:null}}function Ds(t,e,n){var r,i=e.pendingProps,a=ta.current,s=!1,l=0!==(128&e.flags);if((r=l)||(r=(null===t||null!==t.memoizedState)&&0!==(2&a)),r?(s=!0,e.flags&=-129):null!==t&&null===t.memoizedState||(a|=1),Mi(ta,1&a),null===t)return co(e),null!==(t=e.memoizedState)&&null!==(t=t.dehydrated)?(0===(1&e.mode)?e.lanes=1:"$!"===t.data?e.lanes=8:e.lanes=1073741824,null):(l=i.children,t=i.fallback,s?(i=e.mode,s=e.child,l={mode:"hidden",children:l},0===(1&i)&&null!==s?(s.childLanes=0,s.pendingProps=l):s=Rc(l,i,0,null),t=zc(t,i,n,null),s.return=e,t.return=e,s.sibling=t,e.child=s,e.child.memoizedState=Rs(n),e.memoizedState=zs,t):Bs(e,l));if(null!==(a=t.memoizedState)&&null!==(r=a.dehydrated))return function(t,e,n,r,i,a,s){if(n)return 256&e.flags?(e.flags&=-257,Fs(t,e,s,r=us(Error(o(422))))):null!==e.memoizedState?(e.child=t.child,e.flags|=128,null):(a=r.fallback,i=e.mode,r=Rc({mode:"visible",children:r.children},i,0,null),(a=zc(a,i,s,null)).flags|=2,r.return=e,a.return=e,r.sibling=a,e.child=r,0!==(1&e.mode)&&xo(e,t.child,null,s),e.child.memoizedState=Rs(s),e.memoizedState=zs,a);if(0===(1&e.mode))return Fs(t,e,s,null);if("$!"===i.data){if(r=i.nextSibling&&i.nextSibling.dataset)var l=r.dgst;return r=l,Fs(t,e,s,r=us(a=Error(o(419)),r,void 0))}if(l=0!==(s&t.childLanes),_s||l){if(null!==(r=Pl)){switch(s&-s){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}0!==(i=0!==(i&(r.suspendedLanes|s))?0:i)&&i!==a.retryLane&&(a.retryLane=i,zo(t,i),nc(r,t,i,-1))}return mc(),Fs(t,e,s,r=us(Error(o(421))))}return"$?"===i.data?(e.flags|=128,e.child=t.child,e=Ac.bind(null,t),i._reactRetry=e,null):(t=a.treeContext,ro=ci(i.nextSibling),no=e,io=!0,oo=null,null!==t&&(Zi[Xi++]=Ki,Zi[Xi++]=$i,Zi[Xi++]=Yi,Ki=t.id,$i=t.overflow,Yi=e),e=Bs(e,r.children),e.flags|=4096,e)}(t,e,l,i,r,a,n);if(s){s=i.fallback,l=e.mode,r=(a=t.child).sibling;var c={mode:"hidden",children:i.children};return 0===(1&l)&&e.child!==a?((i=e.child).childLanes=0,i.pendingProps=c,e.deletions=null):(i=Lc(a,c)).subtreeFlags=14680064&a.subtreeFlags,null!==r?s=Lc(r,s):(s=zc(s,l,n,null)).flags|=2,s.return=e,i.return=e,i.sibling=s,e.child=i,i=s,s=e.child,l=null===(l=t.child.memoizedState)?Rs(n):{baseLanes:l.baseLanes|n,cachePool:null,transitions:l.transitions},s.memoizedState=l,s.childLanes=t.childLanes&~n,e.memoizedState=zs,i}return t=(s=t.child).sibling,i=Lc(s,{mode:"visible",children:i.children}),0===(1&e.mode)&&(i.lanes=n),i.return=e,i.sibling=null,null!==t&&(null===(n=e.deletions)?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=i,e.memoizedState=null,i}function Bs(t,e){return(e=Rc({mode:"visible",children:e},t.mode,0,null)).return=t,t.child=e}function Fs(t,e,n,r){return null!==r&&mo(r),xo(e,t.child,null,n),(t=Bs(e,e.pendingProps.children)).flags|=2,e.memoizedState=null,t}function Ns(t,e,n){t.lanes|=e;var r=t.alternate;null!==r&&(r.lanes|=e),Po(t.return,e,n)}function Us(t,e,n,r,i){var o=t.memoizedState;null===o?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(o.isBackwards=e,o.rendering=null,o.renderingStartTime=0,o.last=r,o.tail=n,o.tailMode=i)}function Vs(t,e,n){var r=e.pendingProps,i=r.revealOrder,o=r.tail;if(bs(t,e,r.children,n),0!==(2&(r=ta.current)))r=1&r|2,e.flags|=128;else{if(null!==t&&0!==(128&t.flags))t:for(t=e.child;null!==t;){if(13===t.tag)null!==t.memoizedState&&Ns(t,n,e);else if(19===t.tag)Ns(t,n,e);else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break t;for(;null===t.sibling;){if(null===t.return||t.return===e)break t;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(Mi(ta,r),0===(1&e.mode))e.memoizedState=null;else switch(i){case"forwards":for(n=e.child,i=null;null!==n;)null!==(t=n.alternate)&&null===ea(t)&&(i=n),n=n.sibling;null===(n=i)?(i=e.child,e.child=null):(i=n.sibling,n.sibling=null),Us(e,!1,i,n,o);break;case"backwards":for(n=null,i=e.child,e.child=null;null!==i;){if(null!==(t=i.alternate)&&null===ea(t)){e.child=i;break}t=i.sibling,i.sibling=n,n=i,i=t}Us(e,!0,n,null,o);break;case"together":Us(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Ws(t,e){0===(1&e.mode)&&null!==t&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Gs(t,e,n){if(null!==t&&(e.dependencies=t.dependencies),Rl|=e.lanes,0===(n&e.childLanes))return null;if(null!==t&&e.child!==t.child)throw Error(o(153));if(null!==e.child){for(n=Lc(t=e.child,t.pendingProps),e.child=n,n.return=e;null!==t.sibling;)t=t.sibling,(n=n.sibling=Lc(t,t.pendingProps)).return=e;n.sibling=null}return e.child}function qs(t,e){if(!io)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;null!==e;)null!==e.alternate&&(n=e),e=e.sibling;null===n?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?e||null===t.tail?t.tail=null:t.tail.sibling=null:r.sibling=null}}function Hs(t){var e=null!==t.alternate&&t.alternate.child===t.child,n=0,r=0;if(e)for(var i=t.child;null!==i;)n|=i.lanes|i.childLanes,r|=14680064&i.subtreeFlags,r|=14680064&i.flags,i.return=t,i=i.sibling;else for(i=t.child;null!==i;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function Zs(t,e,n){var r=e.pendingProps;switch(eo(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Hs(e),null;case 1:case 17:return Oi(e.type)&&Li(),Hs(e),null;case 3:return r=e.stateNode,$o(),Ti(Pi),Ti(Ci),ra(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),null!==t&&null!==t.child||(ho(e)?e.flags|=4:null===t||t.memoizedState.isDehydrated&&0===(256&e.flags)||(e.flags|=1024,null!==oo&&(ac(oo),oo=null))),Os(t,e),Hs(e),null;case 5:Qo(e);var i=Yo(Xo.current);if(n=e.type,null!==t&&null!=e.stateNode)Ls(t,e,n,r,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(null===e.stateNode)throw Error(o(166));return Hs(e),null}if(t=Yo(Ho.current),ho(e)){r=e.stateNode,n=e.type;var a=e.memoizedProps;switch(r[di]=e,r[fi]=a,t=0!==(1&e.mode),n){case"dialog":Fr("cancel",r),Fr("close",r);break;case"iframe":case"object":case"embed":Fr("load",r);break;case"video":case"audio":for(i=0;i<zr.length;i++)Fr(zr[i],r);break;case"source":Fr("error",r);break;case"img":case"image":case"link":Fr("error",r),Fr("load",r);break;case"details":Fr("toggle",r);break;case"input":K(r,a),Fr("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!a.multiple},Fr("invalid",r);break;case"textarea":it(r,a),Fr("invalid",r)}for(var l in vt(n,a),i=null,a)if(a.hasOwnProperty(l)){var c=a[l];"children"===l?"string"===typeof c?r.textContent!==c&&(!0!==a.suppressHydrationWarning&&Jr(r.textContent,c,t),i=["children",c]):"number"===typeof c&&r.textContent!==""+c&&(!0!==a.suppressHydrationWarning&&Jr(r.textContent,c,t),i=["children",""+c]):s.hasOwnProperty(l)&&null!=c&&"onScroll"===l&&Fr("scroll",r)}switch(n){case"input":H(r),Q(r,a,!0);break;case"textarea":H(r),at(r);break;case"select":case"option":break;default:"function"===typeof a.onClick&&(r.onclick=Qr)}r=i,e.updateQueue=r,null!==r&&(e.flags|=4)}else{l=9===i.nodeType?i:i.ownerDocument,"http://www.w3.org/1999/xhtml"===t&&(t=st(n)),"http://www.w3.org/1999/xhtml"===t?"script"===n?((t=l.createElement("div")).innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):"string"===typeof r.is?t=l.createElement(n,{is:r.is}):(t=l.createElement(n),"select"===n&&(l=t,r.multiple?l.multiple=!0:r.size&&(l.size=r.size))):t=l.createElementNS(t,n),t[di]=e,t[fi]=r,Is(t,e,!1,!1),e.stateNode=t;t:{switch(l=_t(n,r),n){case"dialog":Fr("cancel",t),Fr("close",t),i=r;break;case"iframe":case"object":case"embed":Fr("load",t),i=r;break;case"video":case"audio":for(i=0;i<zr.length;i++)Fr(zr[i],t);i=r;break;case"source":Fr("error",t),i=r;break;case"img":case"image":case"link":Fr("error",t),Fr("load",t),i=r;break;case"details":Fr("toggle",t),i=r;break;case"input":K(t,r),i=Y(t,r),Fr("invalid",t);break;case"option":default:i=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},i=D({},r,{value:void 0}),Fr("invalid",t);break;case"textarea":it(t,r),i=rt(t,r),Fr("invalid",t)}for(a in vt(n,i),c=i)if(c.hasOwnProperty(a)){var u=c[a];"style"===a?gt(t,u):"dangerouslySetInnerHTML"===a?null!=(u=u?u.__html:void 0)&&ht(t,u):"children"===a?"string"===typeof u?("textarea"!==n||""!==u)&&dt(t,u):"number"===typeof u&&dt(t,""+u):"suppressContentEditableWarning"!==a&&"suppressHydrationWarning"!==a&&"autoFocus"!==a&&(s.hasOwnProperty(a)?null!=u&&"onScroll"===a&&Fr("scroll",t):null!=u&&_(t,a,u,l))}switch(n){case"input":H(t),Q(t,r,!1);break;case"textarea":H(t),at(t);break;case"option":null!=r.value&&t.setAttribute("value",""+G(r.value));break;case"select":t.multiple=!!r.multiple,null!=(a=r.value)?nt(t,!!r.multiple,a,!1):null!=r.defaultValue&&nt(t,!!r.multiple,r.defaultValue,!0);break;default:"function"===typeof i.onClick&&(t.onclick=Qr)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break t;case"img":r=!0;break t;default:r=!1}}r&&(e.flags|=4)}null!==e.ref&&(e.flags|=512,e.flags|=2097152)}return Hs(e),null;case 6:if(t&&null!=e.stateNode)js(t,e,t.memoizedProps,r);else{if("string"!==typeof r&&null===e.stateNode)throw Error(o(166));if(n=Yo(Xo.current),Yo(Ho.current),ho(e)){if(r=e.stateNode,n=e.memoizedProps,r[di]=e,(a=r.nodeValue!==n)&&null!==(t=no))switch(t.tag){case 3:Jr(r.nodeValue,n,0!==(1&t.mode));break;case 5:!0!==t.memoizedProps.suppressHydrationWarning&&Jr(r.nodeValue,n,0!==(1&t.mode))}a&&(e.flags|=4)}else(r=(9===n.nodeType?n:n.ownerDocument).createTextNode(r))[di]=e,e.stateNode=r}return Hs(e),null;case 13:if(Ti(ta),r=e.memoizedState,null===t||null!==t.memoizedState&&null!==t.memoizedState.dehydrated){if(io&&null!==ro&&0!==(1&e.mode)&&0===(128&e.flags))fo(),po(),e.flags|=98560,a=!1;else if(a=ho(e),null!==r&&null!==r.dehydrated){if(null===t){if(!a)throw Error(o(318));if(!(a=null!==(a=e.memoizedState)?a.dehydrated:null))throw Error(o(317));a[di]=e}else po(),0===(128&e.flags)&&(e.memoizedState=null),e.flags|=4;Hs(e),a=!1}else null!==oo&&(ac(oo),oo=null),a=!0;if(!a)return 65536&e.flags?e:null}return 0!==(128&e.flags)?(e.lanes=n,e):((r=null!==r)!==(null!==t&&null!==t.memoizedState)&&r&&(e.child.flags|=8192,0!==(1&e.mode)&&(null===t||0!==(1&ta.current)?0===jl&&(jl=3):mc())),null!==e.updateQueue&&(e.flags|=4),Hs(e),null);case 4:return $o(),Os(t,e),null===t&&Vr(e.stateNode.containerInfo),Hs(e),null;case 10:return Co(e.type._context),Hs(e),null;case 19:if(Ti(ta),null===(a=e.memoizedState))return Hs(e),null;if(r=0!==(128&e.flags),null===(l=a.rendering))if(r)qs(a,!1);else{if(0!==jl||null!==t&&0!==(128&t.flags))for(t=e.child;null!==t;){if(null!==(l=ea(t))){for(e.flags|=128,qs(a,!1),null!==(r=l.updateQueue)&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;null!==n;)t=r,(a=n).flags&=14680066,null===(l=a.alternate)?(a.childLanes=0,a.lanes=t,a.child=null,a.subtreeFlags=0,a.memoizedProps=null,a.memoizedState=null,a.updateQueue=null,a.dependencies=null,a.stateNode=null):(a.childLanes=l.childLanes,a.lanes=l.lanes,a.child=l.child,a.subtreeFlags=0,a.deletions=null,a.memoizedProps=l.memoizedProps,a.memoizedState=l.memoizedState,a.updateQueue=l.updateQueue,a.type=l.type,t=l.dependencies,a.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return Mi(ta,1&ta.current|2),e.child}t=t.sibling}null!==a.tail&&$t()>Vl&&(e.flags|=128,r=!0,qs(a,!1),e.lanes=4194304)}else{if(!r)if(null!==(t=ea(l))){if(e.flags|=128,r=!0,null!==(n=t.updateQueue)&&(e.updateQueue=n,e.flags|=4),qs(a,!0),null===a.tail&&"hidden"===a.tailMode&&!l.alternate&&!io)return Hs(e),null}else 2*$t()-a.renderingStartTime>Vl&&1073741824!==n&&(e.flags|=128,r=!0,qs(a,!1),e.lanes=4194304);a.isBackwards?(l.sibling=e.child,e.child=l):(null!==(n=a.last)?n.sibling=l:e.child=l,a.last=l)}return null!==a.tail?(e=a.tail,a.rendering=e,a.tail=e.sibling,a.renderingStartTime=$t(),e.sibling=null,n=ta.current,Mi(ta,r?1&n|2:1&n),e):(Hs(e),null);case 22:case 23:return hc(),r=null!==e.memoizedState,null!==t&&null!==t.memoizedState!==r&&(e.flags|=8192),r&&0!==(1&e.mode)?0!==(1073741824&Ol)&&(Hs(e),6&e.subtreeFlags&&(e.flags|=8192)):Hs(e),null;case 24:case 25:return null}throw Error(o(156,e.tag))}function Xs(t,e){switch(eo(e),e.tag){case 1:return Oi(e.type)&&Li(),65536&(t=e.flags)?(e.flags=-65537&t|128,e):null;case 3:return $o(),Ti(Pi),Ti(Ci),ra(),0!==(65536&(t=e.flags))&&0===(128&t)?(e.flags=-65537&t|128,e):null;case 5:return Qo(e),null;case 13:if(Ti(ta),null!==(t=e.memoizedState)&&null!==t.dehydrated){if(null===e.alternate)throw Error(o(340));po()}return 65536&(t=e.flags)?(e.flags=-65537&t|128,e):null;case 19:return Ti(ta),null;case 4:return $o(),null;case 10:return Co(e.type._context),null;case 22:case 23:return hc(),null;default:return null}}Is=function(t,e){for(var n=e.child;null!==n;){if(5===n.tag||6===n.tag)t.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===e)break;for(;null===n.sibling;){if(null===n.return||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},Os=function(){},Ls=function(t,e,n,r){var i=t.memoizedProps;if(i!==r){t=e.stateNode,Yo(Ho.current);var o,a=null;switch(n){case"input":i=Y(t,i),r=Y(t,r),a=[];break;case"select":i=D({},i,{value:void 0}),r=D({},r,{value:void 0}),a=[];break;case"textarea":i=rt(t,i),r=rt(t,r),a=[];break;default:"function"!==typeof i.onClick&&"function"===typeof r.onClick&&(t.onclick=Qr)}for(u in vt(n,r),n=null,i)if(!r.hasOwnProperty(u)&&i.hasOwnProperty(u)&&null!=i[u])if("style"===u){var l=i[u];for(o in l)l.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else"dangerouslySetInnerHTML"!==u&&"children"!==u&&"suppressContentEditableWarning"!==u&&"suppressHydrationWarning"!==u&&"autoFocus"!==u&&(s.hasOwnProperty(u)?a||(a=[]):(a=a||[]).push(u,null));for(u in r){var c=r[u];if(l=null!=i?i[u]:void 0,r.hasOwnProperty(u)&&c!==l&&(null!=c||null!=l))if("style"===u)if(l){for(o in l)!l.hasOwnProperty(o)||c&&c.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in c)c.hasOwnProperty(o)&&l[o]!==c[o]&&(n||(n={}),n[o]=c[o])}else n||(a||(a=[]),a.push(u,n)),n=c;else"dangerouslySetInnerHTML"===u?(c=c?c.__html:void 0,l=l?l.__html:void 0,null!=c&&l!==c&&(a=a||[]).push(u,c)):"children"===u?"string"!==typeof c&&"number"!==typeof c||(a=a||[]).push(u,""+c):"suppressContentEditableWarning"!==u&&"suppressHydrationWarning"!==u&&(s.hasOwnProperty(u)?(null!=c&&"onScroll"===u&&Fr("scroll",t),a||l===c||(a=[])):(a=a||[]).push(u,c))}n&&(a=a||[]).push("style",n);var u=a;(e.updateQueue=u)&&(e.flags|=4)}},js=function(t,e,n,r){n!==r&&(e.flags|=4)};var Ys=!1,Ks=!1,$s="function"===typeof WeakSet?WeakSet:Set,Js=null;function Qs(t,e){var n=t.ref;if(null!==n)if("function"===typeof n)try{n(null)}catch(r){Ec(t,e,r)}else n.current=null}function tl(t,e,n){try{n()}catch(r){Ec(t,e,r)}}var el=!1;function nl(t,e,n){var r=e.updateQueue;if(null!==(r=null!==r?r.lastEffect:null)){var i=r=r.next;do{if((i.tag&t)===t){var o=i.destroy;i.destroy=void 0,void 0!==o&&tl(e,n,o)}i=i.next}while(i!==r)}}function rl(t,e){if(null!==(e=null!==(e=e.updateQueue)?e.lastEffect:null)){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function il(t){var e=t.ref;if(null!==e){var n=t.stateNode;t.tag,t=n,"function"===typeof e?e(t):e.current=t}}function ol(t){var e=t.alternate;null!==e&&(t.alternate=null,ol(e)),t.child=null,t.deletions=null,t.sibling=null,5===t.tag&&(null!==(e=t.stateNode)&&(delete e[di],delete e[fi],delete e[mi],delete e[gi],delete e[yi])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function al(t){return 5===t.tag||3===t.tag||4===t.tag}function sl(t){t:for(;;){for(;null===t.sibling;){if(null===t.return||al(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;5!==t.tag&&6!==t.tag&&18!==t.tag;){if(2&t.flags)continue t;if(null===t.child||4===t.tag)continue t;t.child.return=t,t=t.child}if(!(2&t.flags))return t.stateNode}}function ll(t,e,n){var r=t.tag;if(5===r||6===r)t=t.stateNode,e?8===n.nodeType?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(8===n.nodeType?(e=n.parentNode).insertBefore(t,n):(e=n).appendChild(t),null!==(n=n._reactRootContainer)&&void 0!==n||null!==e.onclick||(e.onclick=Qr));else if(4!==r&&null!==(t=t.child))for(ll(t,e,n),t=t.sibling;null!==t;)ll(t,e,n),t=t.sibling}function cl(t,e,n){var r=t.tag;if(5===r||6===r)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(4!==r&&null!==(t=t.child))for(cl(t,e,n),t=t.sibling;null!==t;)cl(t,e,n),t=t.sibling}var ul=null,hl=!1;function dl(t,e,n){for(n=n.child;null!==n;)fl(t,e,n),n=n.sibling}function fl(t,e,n){if(oe&&"function"===typeof oe.onCommitFiberUnmount)try{oe.onCommitFiberUnmount(ie,n)}catch(s){}switch(n.tag){case 5:Ks||Qs(n,e);case 6:var r=ul,i=hl;ul=null,dl(t,e,n),hl=i,null!==(ul=r)&&(hl?(t=ul,n=n.stateNode,8===t.nodeType?t.parentNode.removeChild(n):t.removeChild(n)):ul.removeChild(n.stateNode));break;case 18:null!==ul&&(hl?(t=ul,n=n.stateNode,8===t.nodeType?li(t.parentNode,n):1===t.nodeType&&li(t,n),Ve(t)):li(ul,n.stateNode));break;case 4:r=ul,i=hl,ul=n.stateNode.containerInfo,hl=!0,dl(t,e,n),ul=r,hl=i;break;case 0:case 11:case 14:case 15:if(!Ks&&(null!==(r=n.updateQueue)&&null!==(r=r.lastEffect))){i=r=r.next;do{var o=i,a=o.destroy;o=o.tag,void 0!==a&&(0!==(2&o)||0!==(4&o))&&tl(n,e,a),i=i.next}while(i!==r)}dl(t,e,n);break;case 1:if(!Ks&&(Qs(n,e),"function"===typeof(r=n.stateNode).componentWillUnmount))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(s){Ec(n,e,s)}dl(t,e,n);break;case 21:dl(t,e,n);break;case 22:1&n.mode?(Ks=(r=Ks)||null!==n.memoizedState,dl(t,e,n),Ks=r):dl(t,e,n);break;default:dl(t,e,n)}}function pl(t){var e=t.updateQueue;if(null!==e){t.updateQueue=null;var n=t.stateNode;null===n&&(n=t.stateNode=new $s),e.forEach((function(e){var r=Cc.bind(null,t,e);n.has(e)||(n.add(e),e.then(r,r))}))}}function ml(t,e){var n=e.deletions;if(null!==n)for(var r=0;r<n.length;r++){var i=n[r];try{var a=t,s=e,l=s;t:for(;null!==l;){switch(l.tag){case 5:ul=l.stateNode,hl=!1;break t;case 3:case 4:ul=l.stateNode.containerInfo,hl=!0;break t}l=l.return}if(null===ul)throw Error(o(160));fl(a,s,i),ul=null,hl=!1;var c=i.alternate;null!==c&&(c.return=null),i.return=null}catch(u){Ec(i,e,u)}}if(12854&e.subtreeFlags)for(e=e.child;null!==e;)gl(e,t),e=e.sibling}function gl(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(ml(e,t),yl(t),4&r){try{nl(3,t,t.return),rl(3,t)}catch(g){Ec(t,t.return,g)}try{nl(5,t,t.return)}catch(g){Ec(t,t.return,g)}}break;case 1:ml(e,t),yl(t),512&r&&null!==n&&Qs(n,n.return);break;case 5:if(ml(e,t),yl(t),512&r&&null!==n&&Qs(n,n.return),32&t.flags){var i=t.stateNode;try{dt(i,"")}catch(g){Ec(t,t.return,g)}}if(4&r&&null!=(i=t.stateNode)){var a=t.memoizedProps,s=null!==n?n.memoizedProps:a,l=t.type,c=t.updateQueue;if(t.updateQueue=null,null!==c)try{"input"===l&&"radio"===a.type&&null!=a.name&&$(i,a),_t(l,s);var u=_t(l,a);for(s=0;s<c.length;s+=2){var h=c[s],d=c[s+1];"style"===h?gt(i,d):"dangerouslySetInnerHTML"===h?ht(i,d):"children"===h?dt(i,d):_(i,h,d,u)}switch(l){case"input":J(i,a);break;case"textarea":ot(i,a);break;case"select":var f=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!a.multiple;var p=a.value;null!=p?nt(i,!!a.multiple,p,!1):f!==!!a.multiple&&(null!=a.defaultValue?nt(i,!!a.multiple,a.defaultValue,!0):nt(i,!!a.multiple,a.multiple?[]:"",!1))}i[fi]=a}catch(g){Ec(t,t.return,g)}}break;case 6:if(ml(e,t),yl(t),4&r){if(null===t.stateNode)throw Error(o(162));i=t.stateNode,a=t.memoizedProps;try{i.nodeValue=a}catch(g){Ec(t,t.return,g)}}break;case 3:if(ml(e,t),yl(t),4&r&&null!==n&&n.memoizedState.isDehydrated)try{Ve(e.containerInfo)}catch(g){Ec(t,t.return,g)}break;case 4:default:ml(e,t),yl(t);break;case 13:ml(e,t),yl(t),8192&(i=t.child).flags&&(a=null!==i.memoizedState,i.stateNode.isHidden=a,!a||null!==i.alternate&&null!==i.alternate.memoizedState||(Ul=$t())),4&r&&pl(t);break;case 22:if(h=null!==n&&null!==n.memoizedState,1&t.mode?(Ks=(u=Ks)||h,ml(e,t),Ks=u):ml(e,t),yl(t),8192&r){if(u=null!==t.memoizedState,(t.stateNode.isHidden=u)&&!h&&0!==(1&t.mode))for(Js=t,h=t.child;null!==h;){for(d=Js=h;null!==Js;){switch(p=(f=Js).child,f.tag){case 0:case 11:case 14:case 15:nl(4,f,f.return);break;case 1:Qs(f,f.return);var m=f.stateNode;if("function"===typeof m.componentWillUnmount){r=f,n=f.return;try{e=r,m.props=e.memoizedProps,m.state=e.memoizedState,m.componentWillUnmount()}catch(g){Ec(r,n,g)}}break;case 5:Qs(f,f.return);break;case 22:if(null!==f.memoizedState){xl(d);continue}}null!==p?(p.return=f,Js=p):xl(d)}h=h.sibling}t:for(h=null,d=t;;){if(5===d.tag){if(null===h){h=d;try{i=d.stateNode,u?"function"===typeof(a=i.style).setProperty?a.setProperty("display","none","important"):a.display="none":(l=d.stateNode,s=void 0!==(c=d.memoizedProps.style)&&null!==c&&c.hasOwnProperty("display")?c.display:null,l.style.display=mt("display",s))}catch(g){Ec(t,t.return,g)}}}else if(6===d.tag){if(null===h)try{d.stateNode.nodeValue=u?"":d.memoizedProps}catch(g){Ec(t,t.return,g)}}else if((22!==d.tag&&23!==d.tag||null===d.memoizedState||d===t)&&null!==d.child){d.child.return=d,d=d.child;continue}if(d===t)break t;for(;null===d.sibling;){if(null===d.return||d.return===t)break t;h===d&&(h=null),d=d.return}h===d&&(h=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:ml(e,t),yl(t),4&r&&pl(t);case 21:}}function yl(t){var e=t.flags;if(2&e){try{t:{for(var n=t.return;null!==n;){if(al(n)){var r=n;break t}n=n.return}throw Error(o(160))}switch(r.tag){case 5:var i=r.stateNode;32&r.flags&&(dt(i,""),r.flags&=-33),cl(t,sl(t),i);break;case 3:case 4:var a=r.stateNode.containerInfo;ll(t,sl(t),a);break;default:throw Error(o(161))}}catch(s){Ec(t,t.return,s)}t.flags&=-3}4096&e&&(t.flags&=-4097)}function vl(t,e,n){Js=t,_l(t,e,n)}function _l(t,e,n){for(var r=0!==(1&t.mode);null!==Js;){var i=Js,o=i.child;if(22===i.tag&&r){var a=null!==i.memoizedState||Ys;if(!a){var s=i.alternate,l=null!==s&&null!==s.memoizedState||Ks;s=Ys;var c=Ks;if(Ys=a,(Ks=l)&&!c)for(Js=i;null!==Js;)l=(a=Js).child,22===a.tag&&null!==a.memoizedState?wl(i):null!==l?(l.return=a,Js=l):wl(i);for(;null!==o;)Js=o,_l(o,e,n),o=o.sibling;Js=i,Ys=s,Ks=c}bl(t)}else 0!==(8772&i.subtreeFlags)&&null!==o?(o.return=i,Js=o):bl(t)}}function bl(t){for(;null!==Js;){var e=Js;if(0!==(8772&e.flags)){var n=e.alternate;try{if(0!==(8772&e.flags))switch(e.tag){case 0:case 11:case 15:Ks||rl(5,e);break;case 1:var r=e.stateNode;if(4&e.flags&&!Ks)if(null===n)r.componentDidMount();else{var i=e.elementType===e.type?n.memoizedProps:ns(e.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var a=e.updateQueue;null!==a&&Go(e,a,r);break;case 3:var s=e.updateQueue;if(null!==s){if(n=null,null!==e.child)switch(e.child.tag){case 5:case 1:n=e.child.stateNode}Go(e,s,n)}break;case 5:var l=e.stateNode;if(null===n&&4&e.flags){n=l;var c=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(null===e.memoizedState){var u=e.alternate;if(null!==u){var h=u.memoizedState;if(null!==h){var d=h.dehydrated;null!==d&&Ve(d)}}}break;default:throw Error(o(163))}Ks||512&e.flags&&il(e)}catch(f){Ec(e,e.return,f)}}if(e===t){Js=null;break}if(null!==(n=e.sibling)){n.return=e.return,Js=n;break}Js=e.return}}function xl(t){for(;null!==Js;){var e=Js;if(e===t){Js=null;break}var n=e.sibling;if(null!==n){n.return=e.return,Js=n;break}Js=e.return}}function wl(t){for(;null!==Js;){var e=Js;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{rl(4,e)}catch(l){Ec(e,n,l)}break;case 1:var r=e.stateNode;if("function"===typeof r.componentDidMount){var i=e.return;try{r.componentDidMount()}catch(l){Ec(e,i,l)}}var o=e.return;try{il(e)}catch(l){Ec(e,o,l)}break;case 5:var a=e.return;try{il(e)}catch(l){Ec(e,a,l)}}}catch(l){Ec(e,e.return,l)}if(e===t){Js=null;break}var s=e.sibling;if(null!==s){s.return=e.return,Js=s;break}Js=e.return}}var Sl,El=Math.ceil,Tl=b.ReactCurrentDispatcher,Ml=b.ReactCurrentOwner,Al=b.ReactCurrentBatchConfig,Cl=0,Pl=null,kl=null,Il=0,Ol=0,Ll=Ei(0),jl=0,zl=null,Rl=0,Dl=0,Bl=0,Fl=null,Nl=null,Ul=0,Vl=1/0,Wl=null,Gl=!1,ql=null,Hl=null,Zl=!1,Xl=null,Yl=0,Kl=0,$l=null,Jl=-1,Ql=0;function tc(){return 0!==(6&Cl)?$t():-1!==Jl?Jl:Jl=$t()}function ec(t){return 0===(1&t.mode)?1:0!==(2&Cl)&&0!==Il?Il&-Il:null!==go.transition?(0===Ql&&(Ql=me()),Ql):0!==(t=_e)?t:t=void 0===(t=window.event)?16:Ke(t.type)}function nc(t,e,n,r){if(50<Kl)throw Kl=0,$l=null,Error(o(185));ye(t,n,r),0!==(2&Cl)&&t===Pl||(t===Pl&&(0===(2&Cl)&&(Dl|=n),4===jl&&sc(t,Il)),rc(t,r),1===n&&0===Cl&&0===(1&e.mode)&&(Vl=$t()+500,Fi&&Vi()))}function rc(t,e){var n=t.callbackNode;!function(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,i=t.expirationTimes,o=t.pendingLanes;0<o;){var a=31-ae(o),s=1<<a,l=i[a];-1===l?0!==(s&n)&&0===(s&r)||(i[a]=fe(s,e)):l<=e&&(t.expiredLanes|=s),o&=~s}}(t,e);var r=de(t,t===Pl?Il:0);if(0===r)null!==n&&Xt(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(null!=n&&Xt(n),1===e)0===t.tag?function(t){Fi=!0,Ui(t)}(lc.bind(null,t)):Ui(lc.bind(null,t)),ai((function(){0===(6&Cl)&&Vi()})),n=null;else{switch(be(r)){case 1:n=Qt;break;case 4:n=te;break;case 16:default:n=ee;break;case 536870912:n=re}n=Pc(n,ic.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function ic(t,e){if(Jl=-1,Ql=0,0!==(6&Cl))throw Error(o(327));var n=t.callbackNode;if(wc()&&t.callbackNode!==n)return null;var r=de(t,t===Pl?Il:0);if(0===r)return null;if(0!==(30&r)||0!==(r&t.expiredLanes)||e)e=gc(t,r);else{e=r;var i=Cl;Cl|=2;var a=pc();for(Pl===t&&Il===e||(Wl=null,Vl=$t()+500,dc(t,e));;)try{vc();break}catch(l){fc(t,l)}Ao(),Tl.current=a,Cl=i,null!==kl?e=0:(Pl=null,Il=0,e=jl)}if(0!==e){if(2===e&&(0!==(i=pe(t))&&(r=i,e=oc(t,i))),1===e)throw n=zl,dc(t,0),sc(t,r),rc(t,$t()),n;if(6===e)sc(t,r);else{if(i=t.current.alternate,0===(30&r)&&!function(t){for(var e=t;;){if(16384&e.flags){var n=e.updateQueue;if(null!==n&&null!==(n=n.stores))for(var r=0;r<n.length;r++){var i=n[r],o=i.getSnapshot;i=i.value;try{if(!sr(o(),i))return!1}catch(s){return!1}}}if(n=e.child,16384&e.subtreeFlags&&null!==n)n.return=e,e=n;else{if(e===t)break;for(;null===e.sibling;){if(null===e.return||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}(i)&&(2===(e=gc(t,r))&&(0!==(a=pe(t))&&(r=a,e=oc(t,a))),1===e))throw n=zl,dc(t,0),sc(t,r),rc(t,$t()),n;switch(t.finishedWork=i,t.finishedLanes=r,e){case 0:case 1:throw Error(o(345));case 2:case 5:xc(t,Nl,Wl);break;case 3:if(sc(t,r),(130023424&r)===r&&10<(e=Ul+500-$t())){if(0!==de(t,0))break;if(((i=t.suspendedLanes)&r)!==r){tc(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=ri(xc.bind(null,t,Nl,Wl),e);break}xc(t,Nl,Wl);break;case 4:if(sc(t,r),(4194240&r)===r)break;for(e=t.eventTimes,i=-1;0<r;){var s=31-ae(r);a=1<<s,(s=e[s])>i&&(i=s),r&=~a}if(r=i,10<(r=(120>(r=$t()-r)?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*El(r/1960))-r)){t.timeoutHandle=ri(xc.bind(null,t,Nl,Wl),r);break}xc(t,Nl,Wl);break;default:throw Error(o(329))}}}return rc(t,$t()),t.callbackNode===n?ic.bind(null,t):null}function oc(t,e){var n=Fl;return t.current.memoizedState.isDehydrated&&(dc(t,e).flags|=256),2!==(t=gc(t,e))&&(e=Nl,Nl=n,null!==e&&ac(e)),t}function ac(t){null===Nl?Nl=t:Nl.push.apply(Nl,t)}function sc(t,e){for(e&=~Bl,e&=~Dl,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-ae(e),r=1<<n;t[n]=-1,e&=~r}}function lc(t){if(0!==(6&Cl))throw Error(o(327));wc();var e=de(t,0);if(0===(1&e))return rc(t,$t()),null;var n=gc(t,e);if(0!==t.tag&&2===n){var r=pe(t);0!==r&&(e=r,n=oc(t,r))}if(1===n)throw n=zl,dc(t,0),sc(t,e),rc(t,$t()),n;if(6===n)throw Error(o(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,xc(t,Nl,Wl),rc(t,$t()),null}function cc(t,e){var n=Cl;Cl|=1;try{return t(e)}finally{0===(Cl=n)&&(Vl=$t()+500,Fi&&Vi())}}function uc(t){null!==Xl&&0===Xl.tag&&0===(6&Cl)&&wc();var e=Cl;Cl|=1;var n=Al.transition,r=_e;try{if(Al.transition=null,_e=1,t)return t()}finally{_e=r,Al.transition=n,0===(6&(Cl=e))&&Vi()}}function hc(){Ol=Ll.current,Ti(Ll)}function dc(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(-1!==n&&(t.timeoutHandle=-1,ii(n)),null!==kl)for(n=kl.return;null!==n;){var r=n;switch(eo(r),r.tag){case 1:null!==(r=r.type.childContextTypes)&&void 0!==r&&Li();break;case 3:$o(),Ti(Pi),Ti(Ci),ra();break;case 5:Qo(r);break;case 4:$o();break;case 13:case 19:Ti(ta);break;case 10:Co(r.type._context);break;case 22:case 23:hc()}n=n.return}if(Pl=t,kl=t=Lc(t.current,null),Il=Ol=e,jl=0,zl=null,Bl=Dl=Rl=0,Nl=Fl=null,null!==Oo){for(e=0;e<Oo.length;e++)if(null!==(r=(n=Oo[e]).interleaved)){n.interleaved=null;var i=r.next,o=n.pending;if(null!==o){var a=o.next;o.next=i,r.next=a}n.pending=r}Oo=null}return t}function fc(t,e){for(;;){var n=kl;try{if(Ao(),ia.current=Ja,ua){for(var r=sa.memoizedState;null!==r;){var i=r.queue;null!==i&&(i.pending=null),r=r.next}ua=!1}if(aa=0,ca=la=sa=null,ha=!1,da=0,Ml.current=null,null===n||null===n.return){jl=1,zl=e,kl=null;break}t:{var a=t,s=n.return,l=n,c=e;if(e=Il,l.flags|=32768,null!==c&&"object"===typeof c&&"function"===typeof c.then){var u=c,h=l,d=h.tag;if(0===(1&h.mode)&&(0===d||11===d||15===d)){var f=h.alternate;f?(h.updateQueue=f.updateQueue,h.memoizedState=f.memoizedState,h.lanes=f.lanes):(h.updateQueue=null,h.memoizedState=null)}var p=gs(s);if(null!==p){p.flags&=-257,ys(p,s,l,0,e),1&p.mode&&ms(a,u,e),c=u;var m=(e=p).updateQueue;if(null===m){var g=new Set;g.add(c),e.updateQueue=g}else m.add(c);break t}if(0===(1&e)){ms(a,u,e),mc();break t}c=Error(o(426))}else if(io&&1&l.mode){var y=gs(s);if(null!==y){0===(65536&y.flags)&&(y.flags|=256),ys(y,s,l,0,e),mo(cs(c,l));break t}}a=c=cs(c,l),4!==jl&&(jl=2),null===Fl?Fl=[a]:Fl.push(a),a=s;do{switch(a.tag){case 3:a.flags|=65536,e&=-e,a.lanes|=e,Vo(a,fs(0,c,e));break t;case 1:l=c;var v=a.type,_=a.stateNode;if(0===(128&a.flags)&&("function"===typeof v.getDerivedStateFromError||null!==_&&"function"===typeof _.componentDidCatch&&(null===Hl||!Hl.has(_)))){a.flags|=65536,e&=-e,a.lanes|=e,Vo(a,ps(a,l,e));break t}}a=a.return}while(null!==a)}bc(n)}catch(b){e=b,kl===n&&null!==n&&(kl=n=n.return);continue}break}}function pc(){var t=Tl.current;return Tl.current=Ja,null===t?Ja:t}function mc(){0!==jl&&3!==jl&&2!==jl||(jl=4),null===Pl||0===(268435455&Rl)&&0===(268435455&Dl)||sc(Pl,Il)}function gc(t,e){var n=Cl;Cl|=2;var r=pc();for(Pl===t&&Il===e||(Wl=null,dc(t,e));;)try{yc();break}catch(i){fc(t,i)}if(Ao(),Cl=n,Tl.current=r,null!==kl)throw Error(o(261));return Pl=null,Il=0,jl}function yc(){for(;null!==kl;)_c(kl)}function vc(){for(;null!==kl&&!Yt();)_c(kl)}function _c(t){var e=Sl(t.alternate,t,Ol);t.memoizedProps=t.pendingProps,null===e?bc(t):kl=e,Ml.current=null}function bc(t){var e=t;do{var n=e.alternate;if(t=e.return,0===(32768&e.flags)){if(null!==(n=Zs(n,e,Ol)))return void(kl=n)}else{if(null!==(n=Xs(n,e)))return n.flags&=32767,void(kl=n);if(null===t)return jl=6,void(kl=null);t.flags|=32768,t.subtreeFlags=0,t.deletions=null}if(null!==(e=e.sibling))return void(kl=e);kl=e=t}while(null!==e);0===jl&&(jl=5)}function xc(t,e,n){var r=_e,i=Al.transition;try{Al.transition=null,_e=1,function(t,e,n,r){do{wc()}while(null!==Xl);if(0!==(6&Cl))throw Error(o(327));n=t.finishedWork;var i=t.finishedLanes;if(null===n)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(o(177));t.callbackNode=null,t.callbackPriority=0;var a=n.lanes|n.childLanes;if(function(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var i=31-ae(n),o=1<<i;e[i]=0,r[i]=-1,t[i]=-1,n&=~o}}(t,a),t===Pl&&(kl=Pl=null,Il=0),0===(2064&n.subtreeFlags)&&0===(2064&n.flags)||Zl||(Zl=!0,Pc(ee,(function(){return wc(),null}))),a=0!==(15990&n.flags),0!==(15990&n.subtreeFlags)||a){a=Al.transition,Al.transition=null;var s=_e;_e=1;var l=Cl;Cl|=4,Ml.current=null,function(t,e){if(ti=Ge,fr(t=dr())){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else t:{var r=(n=(n=t.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(r&&0!==r.rangeCount){n=r.anchorNode;var i=r.anchorOffset,a=r.focusNode;r=r.focusOffset;try{n.nodeType,a.nodeType}catch(x){n=null;break t}var s=0,l=-1,c=-1,u=0,h=0,d=t,f=null;e:for(;;){for(var p;d!==n||0!==i&&3!==d.nodeType||(l=s+i),d!==a||0!==r&&3!==d.nodeType||(c=s+r),3===d.nodeType&&(s+=d.nodeValue.length),null!==(p=d.firstChild);)f=d,d=p;for(;;){if(d===t)break e;if(f===n&&++u===i&&(l=s),f===a&&++h===r&&(c=s),null!==(p=d.nextSibling))break;f=(d=f).parentNode}d=p}n=-1===l||-1===c?null:{start:l,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(ei={focusedElem:t,selectionRange:n},Ge=!1,Js=e;null!==Js;)if(t=(e=Js).child,0!==(1028&e.subtreeFlags)&&null!==t)t.return=e,Js=t;else for(;null!==Js;){e=Js;try{var m=e.alternate;if(0!==(1024&e.flags))switch(e.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==m){var g=m.memoizedProps,y=m.memoizedState,v=e.stateNode,_=v.getSnapshotBeforeUpdate(e.elementType===e.type?g:ns(e.type,g),y);v.__reactInternalSnapshotBeforeUpdate=_}break;case 3:var b=e.stateNode.containerInfo;1===b.nodeType?b.textContent="":9===b.nodeType&&b.documentElement&&b.removeChild(b.documentElement);break;default:throw Error(o(163))}}catch(x){Ec(e,e.return,x)}if(null!==(t=e.sibling)){t.return=e.return,Js=t;break}Js=e.return}m=el,el=!1}(t,n),gl(n,t),pr(ei),Ge=!!ti,ei=ti=null,t.current=n,vl(n,t,i),Kt(),Cl=l,_e=s,Al.transition=a}else t.current=n;if(Zl&&(Zl=!1,Xl=t,Yl=i),a=t.pendingLanes,0===a&&(Hl=null),function(t){if(oe&&"function"===typeof oe.onCommitFiberRoot)try{oe.onCommitFiberRoot(ie,t,void 0,128===(128&t.current.flags))}catch(e){}}(n.stateNode),rc(t,$t()),null!==e)for(r=t.onRecoverableError,n=0;n<e.length;n++)i=e[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(Gl)throw Gl=!1,t=ql,ql=null,t;0!==(1&Yl)&&0!==t.tag&&wc(),a=t.pendingLanes,0!==(1&a)?t===$l?Kl++:(Kl=0,$l=t):Kl=0,Vi()}(t,e,n,r)}finally{Al.transition=i,_e=r}return null}function wc(){if(null!==Xl){var t=be(Yl),e=Al.transition,n=_e;try{if(Al.transition=null,_e=16>t?16:t,null===Xl)var r=!1;else{if(t=Xl,Xl=null,Yl=0,0!==(6&Cl))throw Error(o(331));var i=Cl;for(Cl|=4,Js=t.current;null!==Js;){var a=Js,s=a.child;if(0!==(16&Js.flags)){var l=a.deletions;if(null!==l){for(var c=0;c<l.length;c++){var u=l[c];for(Js=u;null!==Js;){var h=Js;switch(h.tag){case 0:case 11:case 15:nl(8,h,a)}var d=h.child;if(null!==d)d.return=h,Js=d;else for(;null!==Js;){var f=(h=Js).sibling,p=h.return;if(ol(h),h===u){Js=null;break}if(null!==f){f.return=p,Js=f;break}Js=p}}}var m=a.alternate;if(null!==m){var g=m.child;if(null!==g){m.child=null;do{var y=g.sibling;g.sibling=null,g=y}while(null!==g)}}Js=a}}if(0!==(2064&a.subtreeFlags)&&null!==s)s.return=a,Js=s;else t:for(;null!==Js;){if(0!==(2048&(a=Js).flags))switch(a.tag){case 0:case 11:case 15:nl(9,a,a.return)}var v=a.sibling;if(null!==v){v.return=a.return,Js=v;break t}Js=a.return}}var _=t.current;for(Js=_;null!==Js;){var b=(s=Js).child;if(0!==(2064&s.subtreeFlags)&&null!==b)b.return=s,Js=b;else t:for(s=_;null!==Js;){if(0!==(2048&(l=Js).flags))try{switch(l.tag){case 0:case 11:case 15:rl(9,l)}}catch(w){Ec(l,l.return,w)}if(l===s){Js=null;break t}var x=l.sibling;if(null!==x){x.return=l.return,Js=x;break t}Js=l.return}}if(Cl=i,Vi(),oe&&"function"===typeof oe.onPostCommitFiberRoot)try{oe.onPostCommitFiberRoot(ie,t)}catch(w){}r=!0}return r}finally{_e=n,Al.transition=e}}return!1}function Sc(t,e,n){t=No(t,e=fs(0,e=cs(n,e),1),1),e=tc(),null!==t&&(ye(t,1,e),rc(t,e))}function Ec(t,e,n){if(3===t.tag)Sc(t,t,n);else for(;null!==e;){if(3===e.tag){Sc(e,t,n);break}if(1===e.tag){var r=e.stateNode;if("function"===typeof e.type.getDerivedStateFromError||"function"===typeof r.componentDidCatch&&(null===Hl||!Hl.has(r))){e=No(e,t=ps(e,t=cs(n,t),1),1),t=tc(),null!==e&&(ye(e,1,t),rc(e,t));break}}e=e.return}}function Tc(t,e,n){var r=t.pingCache;null!==r&&r.delete(e),e=tc(),t.pingedLanes|=t.suspendedLanes&n,Pl===t&&(Il&n)===n&&(4===jl||3===jl&&(130023424&Il)===Il&&500>$t()-Ul?dc(t,0):Bl|=n),rc(t,e)}function Mc(t,e){0===e&&(0===(1&t.mode)?e=1:(e=ue,0===(130023424&(ue<<=1))&&(ue=4194304)));var n=tc();null!==(t=zo(t,e))&&(ye(t,e,n),rc(t,n))}function Ac(t){var e=t.memoizedState,n=0;null!==e&&(n=e.retryLane),Mc(t,n)}function Cc(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,i=t.memoizedState;null!==i&&(n=i.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(o(314))}null!==r&&r.delete(e),Mc(t,n)}function Pc(t,e){return Zt(t,e)}function kc(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ic(t,e,n,r){return new kc(t,e,n,r)}function Oc(t){return!(!(t=t.prototype)||!t.isReactComponent)}function Lc(t,e){var n=t.alternate;return null===n?((n=Ic(t.tag,e,t.key,t.mode)).elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=14680064&t.flags,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function jc(t,e,n,r,i,a){var s=2;if(r=t,"function"===typeof t)Oc(t)&&(s=1);else if("string"===typeof t)s=5;else t:switch(t){case S:return zc(n.children,i,a,e);case E:s=8,i|=8;break;case T:return(t=Ic(12,n,e,2|i)).elementType=T,t.lanes=a,t;case P:return(t=Ic(13,n,e,i)).elementType=P,t.lanes=a,t;case k:return(t=Ic(19,n,e,i)).elementType=k,t.lanes=a,t;case L:return Rc(n,i,a,e);default:if("object"===typeof t&&null!==t)switch(t.$$typeof){case M:s=10;break t;case A:s=9;break t;case C:s=11;break t;case I:s=14;break t;case O:s=16,r=null;break t}throw Error(o(130,null==t?t:typeof t,""))}return(e=Ic(s,n,e,i)).elementType=t,e.type=r,e.lanes=a,e}function zc(t,e,n,r){return(t=Ic(7,t,r,e)).lanes=n,t}function Rc(t,e,n,r){return(t=Ic(22,t,r,e)).elementType=L,t.lanes=n,t.stateNode={isHidden:!1},t}function Dc(t,e,n){return(t=Ic(6,t,null,e)).lanes=n,t}function Bc(t,e,n){return(e=Ic(4,null!==t.children?t.children:[],t.key,e)).lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function Fc(t,e,n,r,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=ge(0),this.expirationTimes=ge(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ge(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function Nc(t,e,n,r,i,o,a,s,l){return t=new Fc(t,e,n,s,l),1===e?(e=1,!0===o&&(e|=8)):e=0,o=Ic(3,null,null,e),t.current=o,o.stateNode=t,o.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Do(o),t}function Uc(t){if(!t)return Ai;t:{if(Vt(t=t._reactInternals)!==t||1!==t.tag)throw Error(o(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break t;case 1:if(Oi(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break t}}e=e.return}while(null!==e);throw Error(o(171))}if(1===t.tag){var n=t.type;if(Oi(n))return zi(t,n,e)}return e}function Vc(t,e,n,r,i,o,a,s,l){return(t=Nc(n,r,!0,t,0,o,0,s,l)).context=Uc(null),n=t.current,(o=Fo(r=tc(),i=ec(n))).callback=void 0!==e&&null!==e?e:null,No(n,o,i),t.current.lanes=i,ye(t,i,r),rc(t,r),t}function Wc(t,e,n,r){var i=e.current,o=tc(),a=ec(i);return n=Uc(n),null===e.context?e.context=n:e.pendingContext=n,(e=Fo(o,a)).payload={element:t},null!==(r=void 0===r?null:r)&&(e.callback=r),null!==(t=No(i,e,a))&&(nc(t,i,a,o),Uo(t,i,a)),a}function Gc(t){return(t=t.current).child?(t.child.tag,t.child.stateNode):null}function qc(t,e){if(null!==(t=t.memoizedState)&&null!==t.dehydrated){var n=t.retryLane;t.retryLane=0!==n&&n<e?n:e}}function Hc(t,e){qc(t,e),(t=t.alternate)&&qc(t,e)}Sl=function(t,e,n){if(null!==t)if(t.memoizedProps!==e.pendingProps||Pi.current)_s=!0;else{if(0===(t.lanes&n)&&0===(128&e.flags))return _s=!1,function(t,e,n){switch(e.tag){case 3:Ps(e),po();break;case 5:Jo(e);break;case 1:Oi(e.type)&&Ri(e);break;case 4:Ko(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,i=e.memoizedProps.value;Mi(So,r._currentValue),r._currentValue=i;break;case 13:if(null!==(r=e.memoizedState))return null!==r.dehydrated?(Mi(ta,1&ta.current),e.flags|=128,null):0!==(n&e.child.childLanes)?Ds(t,e,n):(Mi(ta,1&ta.current),null!==(t=Gs(t,e,n))?t.sibling:null);Mi(ta,1&ta.current);break;case 19:if(r=0!==(n&e.childLanes),0!==(128&t.flags)){if(r)return Vs(t,e,n);e.flags|=128}if(null!==(i=e.memoizedState)&&(i.rendering=null,i.tail=null,i.lastEffect=null),Mi(ta,ta.current),r)break;return null;case 22:case 23:return e.lanes=0,Es(t,e,n)}return Gs(t,e,n)}(t,e,n);_s=0!==(131072&t.flags)}else _s=!1,io&&0!==(1048576&e.flags)&&Qi(e,Hi,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;Ws(t,e),t=e.pendingProps;var i=Ii(e,Ci.current);ko(e,n),i=ga(null,e,r,t,i,n);var a=ya();return e.flags|=1,"object"===typeof i&&null!==i&&"function"===typeof i.render&&void 0===i.$$typeof?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Oi(r)?(a=!0,Ri(e)):a=!1,e.memoizedState=null!==i.state&&void 0!==i.state?i.state:null,Do(e),i.updater=is,e.stateNode=i,i._reactInternals=e,ls(e,r,t,n),e=Cs(null,e,r,!0,a,n)):(e.tag=0,io&&a&&to(e),bs(null,e,i,n),e=e.child),e;case 16:r=e.elementType;t:{switch(Ws(t,e),t=e.pendingProps,r=(i=r._init)(r._payload),e.type=r,i=e.tag=function(t){if("function"===typeof t)return Oc(t)?1:0;if(void 0!==t&&null!==t){if((t=t.$$typeof)===C)return 11;if(t===I)return 14}return 2}(r),t=ns(r,t),i){case 0:e=Ms(null,e,r,t,n);break t;case 1:e=As(null,e,r,t,n);break t;case 11:e=xs(null,e,r,t,n);break t;case 14:e=ws(null,e,r,ns(r.type,t),n);break t}throw Error(o(306,r,""))}return e;case 0:return r=e.type,i=e.pendingProps,Ms(t,e,r,i=e.elementType===r?i:ns(r,i),n);case 1:return r=e.type,i=e.pendingProps,As(t,e,r,i=e.elementType===r?i:ns(r,i),n);case 3:t:{if(Ps(e),null===t)throw Error(o(387));r=e.pendingProps,i=(a=e.memoizedState).element,Bo(t,e),Wo(e,r,null,n);var s=e.memoizedState;if(r=s.element,a.isDehydrated){if(a={element:r,isDehydrated:!1,cache:s.cache,pendingSuspenseBoundaries:s.pendingSuspenseBoundaries,transitions:s.transitions},e.updateQueue.baseState=a,e.memoizedState=a,256&e.flags){e=ks(t,e,r,n,i=cs(Error(o(423)),e));break t}if(r!==i){e=ks(t,e,r,n,i=cs(Error(o(424)),e));break t}for(ro=ci(e.stateNode.containerInfo.firstChild),no=e,io=!0,oo=null,n=wo(e,null,r,n),e.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(po(),r===i){e=Gs(t,e,n);break t}bs(t,e,r,n)}e=e.child}return e;case 5:return Jo(e),null===t&&co(e),r=e.type,i=e.pendingProps,a=null!==t?t.memoizedProps:null,s=i.children,ni(r,i)?s=null:null!==a&&ni(r,a)&&(e.flags|=32),Ts(t,e),bs(t,e,s,n),e.child;case 6:return null===t&&co(e),null;case 13:return Ds(t,e,n);case 4:return Ko(e,e.stateNode.containerInfo),r=e.pendingProps,null===t?e.child=xo(e,null,r,n):bs(t,e,r,n),e.child;case 11:return r=e.type,i=e.pendingProps,xs(t,e,r,i=e.elementType===r?i:ns(r,i),n);case 7:return bs(t,e,e.pendingProps,n),e.child;case 8:case 12:return bs(t,e,e.pendingProps.children,n),e.child;case 10:t:{if(r=e.type._context,i=e.pendingProps,a=e.memoizedProps,s=i.value,Mi(So,r._currentValue),r._currentValue=s,null!==a)if(sr(a.value,s)){if(a.children===i.children&&!Pi.current){e=Gs(t,e,n);break t}}else for(null!==(a=e.child)&&(a.return=e);null!==a;){var l=a.dependencies;if(null!==l){s=a.child;for(var c=l.firstContext;null!==c;){if(c.context===r){if(1===a.tag){(c=Fo(-1,n&-n)).tag=2;var u=a.updateQueue;if(null!==u){var h=(u=u.shared).pending;null===h?c.next=c:(c.next=h.next,h.next=c),u.pending=c}}a.lanes|=n,null!==(c=a.alternate)&&(c.lanes|=n),Po(a.return,n,e),l.lanes|=n;break}c=c.next}}else if(10===a.tag)s=a.type===e.type?null:a.child;else if(18===a.tag){if(null===(s=a.return))throw Error(o(341));s.lanes|=n,null!==(l=s.alternate)&&(l.lanes|=n),Po(s,n,e),s=a.sibling}else s=a.child;if(null!==s)s.return=a;else for(s=a;null!==s;){if(s===e){s=null;break}if(null!==(a=s.sibling)){a.return=s.return,s=a;break}s=s.return}a=s}bs(t,e,i.children,n),e=e.child}return e;case 9:return i=e.type,r=e.pendingProps.children,ko(e,n),r=r(i=Io(i)),e.flags|=1,bs(t,e,r,n),e.child;case 14:return i=ns(r=e.type,e.pendingProps),ws(t,e,r,i=ns(r.type,i),n);case 15:return Ss(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:ns(r,i),Ws(t,e),e.tag=1,Oi(r)?(t=!0,Ri(e)):t=!1,ko(e,n),as(e,r,i),ls(e,r,i,n),Cs(null,e,r,!0,t,n);case 19:return Vs(t,e,n);case 22:return Es(t,e,n)}throw Error(o(156,e.tag))};var Zc="function"===typeof reportError?reportError:function(t){console.error(t)};function Xc(t){this._internalRoot=t}function Yc(t){this._internalRoot=t}function Kc(t){return!(!t||1!==t.nodeType&&9!==t.nodeType&&11!==t.nodeType)}function $c(t){return!(!t||1!==t.nodeType&&9!==t.nodeType&&11!==t.nodeType&&(8!==t.nodeType||" react-mount-point-unstable "!==t.nodeValue))}function Jc(){}function Qc(t,e,n,r,i){var o=n._reactRootContainer;if(o){var a=o;if("function"===typeof i){var s=i;i=function(){var t=Gc(a);s.call(t)}}Wc(e,a,t,i)}else a=function(t,e,n,r,i){if(i){if("function"===typeof r){var o=r;r=function(){var t=Gc(a);o.call(t)}}var a=Vc(e,r,t,0,null,!1,0,"",Jc);return t._reactRootContainer=a,t[pi]=a.current,Vr(8===t.nodeType?t.parentNode:t),uc(),a}for(;i=t.lastChild;)t.removeChild(i);if("function"===typeof r){var s=r;r=function(){var t=Gc(l);s.call(t)}}var l=Nc(t,0,!1,null,0,!1,0,"",Jc);return t._reactRootContainer=l,t[pi]=l.current,Vr(8===t.nodeType?t.parentNode:t),uc((function(){Wc(e,l,n,r)})),l}(n,e,t,i,r);return Gc(a)}Yc.prototype.render=Xc.prototype.render=function(t){var e=this._internalRoot;if(null===e)throw Error(o(409));Wc(t,e,null,null)},Yc.prototype.unmount=Xc.prototype.unmount=function(){var t=this._internalRoot;if(null!==t){this._internalRoot=null;var e=t.containerInfo;uc((function(){Wc(null,t,null,null)})),e[pi]=null}},Yc.prototype.unstable_scheduleHydration=function(t){if(t){var e=Ee();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Le.length&&0!==e&&e<Le[n].priority;n++);Le.splice(n,0,t),0===n&&De(t)}},xe=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=he(e.pendingLanes);0!==n&&(ve(e,1|n),rc(e,$t()),0===(6&Cl)&&(Vl=$t()+500,Vi()))}break;case 13:uc((function(){var e=zo(t,1);if(null!==e){var n=tc();nc(e,t,1,n)}})),Hc(t,1)}},we=function(t){if(13===t.tag){var e=zo(t,134217728);if(null!==e)nc(e,t,134217728,tc());Hc(t,134217728)}},Se=function(t){if(13===t.tag){var e=ec(t),n=zo(t,e);if(null!==n)nc(n,t,e,tc());Hc(t,e)}},Ee=function(){return _e},Te=function(t,e){var n=_e;try{return _e=t,e()}finally{_e=n}},wt=function(t,e,n){switch(e){case"input":if(J(t,n),e=n.name,"radio"===n.type&&null!=e){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var i=xi(r);if(!i)throw Error(o(90));Z(r),J(r,i)}}}break;case"textarea":ot(t,n);break;case"select":null!=(e=n.value)&&nt(t,!!n.multiple,e,!1)}},Ct=cc,Pt=uc;var tu={usingClientEntryPoint:!1,Events:[_i,bi,xi,Mt,At,cc]},eu={findFiberByHostInstance:vi,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},nu={bundleType:eu.bundleType,version:eu.version,rendererPackageName:eu.rendererPackageName,rendererConfig:eu.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:b.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return null===(t=qt(t))?null:t.stateNode},findFiberByHostInstance:eu.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var ru=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ru.isDisabled&&ru.supportsFiber)try{ie=ru.inject(nu),oe=ru}catch(ut){}}e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=tu,e.createPortal=function(t,e){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!Kc(e))throw Error(o(200));return function(t,e,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:w,key:null==r?null:""+r,children:t,containerInfo:e,implementation:n}}(t,e,null,n)},e.createRoot=function(t,e){if(!Kc(t))throw Error(o(299));var n=!1,r="",i=Zc;return null!==e&&void 0!==e&&(!0===e.unstable_strictMode&&(n=!0),void 0!==e.identifierPrefix&&(r=e.identifierPrefix),void 0!==e.onRecoverableError&&(i=e.onRecoverableError)),e=Nc(t,1,!1,null,0,n,0,r,i),t[pi]=e.current,Vr(8===t.nodeType?t.parentNode:t),new Xc(e)},e.findDOMNode=function(t){if(null==t)return null;if(1===t.nodeType)return t;var e=t._reactInternals;if(void 0===e){if("function"===typeof t.render)throw Error(o(188));throw t=Object.keys(t).join(","),Error(o(268,t))}return t=null===(t=qt(e))?null:t.stateNode},e.flushSync=function(t){return uc(t)},e.hydrate=function(t,e,n){if(!$c(e))throw Error(o(200));return Qc(null,t,e,!0,n)},e.hydrateRoot=function(t,e,n){if(!Kc(t))throw Error(o(405));var r=null!=n&&n.hydratedSources||null,i=!1,a="",s=Zc;if(null!==n&&void 0!==n&&(!0===n.unstable_strictMode&&(i=!0),void 0!==n.identifierPrefix&&(a=n.identifierPrefix),void 0!==n.onRecoverableError&&(s=n.onRecoverableError)),e=Vc(e,null,t,1,null!=n?n:null,i,0,a,s),t[pi]=e.current,Vr(t),r)for(t=0;t<r.length;t++)i=(i=(n=r[t])._getVersion)(n._source),null==e.mutableSourceEagerHydrationData?e.mutableSourceEagerHydrationData=[n,i]:e.mutableSourceEagerHydrationData.push(n,i);return new Yc(e)},e.render=function(t,e,n){if(!$c(e))throw Error(o(200));return Qc(null,t,e,!1,n)},e.unmountComponentAtNode=function(t){if(!$c(t))throw Error(o(40));return!!t._reactRootContainer&&(uc((function(){Qc(null,null,t,!1,(function(){t._reactRootContainer=null,t[pi]=null}))})),!0)},e.unstable_batchedUpdates=cc,e.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!$c(n))throw Error(o(200));if(null==t||void 0===t._reactInternals)throw Error(o(38));return Qc(t,e,n,!1,r)},e.version="18.3.1-next-f1338f8080-20240426"},4391:(t,e,n)=>{"use strict";var r=n(7950);e.createRoot=r.createRoot,e.hydrateRoot=r.hydrateRoot},7950:(t,e,n)=>{"use strict";!function t(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}(),t.exports=n(2730)},6366:t=>{var e="undefined"!==typeof Element,n="function"===typeof Map,r="function"===typeof Set,i="function"===typeof ArrayBuffer&&!!ArrayBuffer.isView;function o(t,a){if(t===a)return!0;if(t&&a&&"object"==typeof t&&"object"==typeof a){if(t.constructor!==a.constructor)return!1;var s,l,c,u;if(Array.isArray(t)){if((s=t.length)!=a.length)return!1;for(l=s;0!==l--;)if(!o(t[l],a[l]))return!1;return!0}if(n&&t instanceof Map&&a instanceof Map){if(t.size!==a.size)return!1;for(u=t.entries();!(l=u.next()).done;)if(!a.has(l.value[0]))return!1;for(u=t.entries();!(l=u.next()).done;)if(!o(l.value[1],a.get(l.value[0])))return!1;return!0}if(r&&t instanceof Set&&a instanceof Set){if(t.size!==a.size)return!1;for(u=t.entries();!(l=u.next()).done;)if(!a.has(l.value[0]))return!1;return!0}if(i&&ArrayBuffer.isView(t)&&ArrayBuffer.isView(a)){if((s=t.length)!=a.length)return!1;for(l=s;0!==l--;)if(t[l]!==a[l])return!1;return!0}if(t.constructor===RegExp)return t.source===a.source&&t.flags===a.flags;if(t.valueOf!==Object.prototype.valueOf&&"function"===typeof t.valueOf&&"function"===typeof a.valueOf)return t.valueOf()===a.valueOf();if(t.toString!==Object.prototype.toString&&"function"===typeof t.toString&&"function"===typeof a.toString)return t.toString()===a.toString();if((s=(c=Object.keys(t)).length)!==Object.keys(a).length)return!1;for(l=s;0!==l--;)if(!Object.prototype.hasOwnProperty.call(a,c[l]))return!1;if(e&&t instanceof Element)return!1;for(l=s;0!==l--;)if(("_owner"!==c[l]&&"__v"!==c[l]&&"__o"!==c[l]||!t.$$typeof)&&!o(t[c[l]],a[c[l]]))return!1;return!0}return t!==t&&a!==a}t.exports=function(t,e){try{return o(t,e)}catch(n){if((n.message||"").match(/stack|recursion/i))return console.warn("react-fast-compare cannot handle circular refs"),!1;throw n}}},5082:(t,e)=>{"use strict";var n="function"===typeof Symbol&&Symbol.for,r=n?Symbol.for("react.element"):60103,i=n?Symbol.for("react.portal"):60106,o=n?Symbol.for("react.fragment"):60107,a=n?Symbol.for("react.strict_mode"):60108,s=n?Symbol.for("react.profiler"):60114,l=n?Symbol.for("react.provider"):60109,c=n?Symbol.for("react.context"):60110,u=n?Symbol.for("react.async_mode"):60111,h=n?Symbol.for("react.concurrent_mode"):60111,d=n?Symbol.for("react.forward_ref"):60112,f=n?Symbol.for("react.suspense"):60113,p=n?Symbol.for("react.suspense_list"):60120,m=n?Symbol.for("react.memo"):60115,g=n?Symbol.for("react.lazy"):60116,y=n?Symbol.for("react.block"):60121,v=n?Symbol.for("react.fundamental"):60117,_=n?Symbol.for("react.responder"):60118,b=n?Symbol.for("react.scope"):60119;function x(t){if("object"===typeof t&&null!==t){var e=t.$$typeof;switch(e){case r:switch(t=t.type){case u:case h:case o:case s:case a:case f:return t;default:switch(t=t&&t.$$typeof){case c:case d:case g:case m:case l:return t;default:return e}}case i:return e}}}function w(t){return x(t)===h}e.AsyncMode=u,e.ConcurrentMode=h,e.ContextConsumer=c,e.ContextProvider=l,e.Element=r,e.ForwardRef=d,e.Fragment=o,e.Lazy=g,e.Memo=m,e.Portal=i,e.Profiler=s,e.StrictMode=a,e.Suspense=f,e.isAsyncMode=function(t){return w(t)||x(t)===u},e.isConcurrentMode=w,e.isContextConsumer=function(t){return x(t)===c},e.isContextProvider=function(t){return x(t)===l},e.isElement=function(t){return"object"===typeof t&&null!==t&&t.$$typeof===r},e.isForwardRef=function(t){return x(t)===d},e.isFragment=function(t){return x(t)===o},e.isLazy=function(t){return x(t)===g},e.isMemo=function(t){return x(t)===m},e.isPortal=function(t){return x(t)===i},e.isProfiler=function(t){return x(t)===s},e.isStrictMode=function(t){return x(t)===a},e.isSuspense=function(t){return x(t)===f},e.isValidElementType=function(t){return"string"===typeof t||"function"===typeof t||t===o||t===h||t===s||t===a||t===f||t===p||"object"===typeof t&&null!==t&&(t.$$typeof===g||t.$$typeof===m||t.$$typeof===l||t.$$typeof===c||t.$$typeof===d||t.$$typeof===v||t.$$typeof===_||t.$$typeof===b||t.$$typeof===y)},e.typeOf=x},2086:(t,e,n)=>{"use strict";t.exports=n(5082)},1153:(t,e,n)=>{"use strict";var r=n(5043),i=Symbol.for("react.element"),o=Symbol.for("react.fragment"),a=Object.prototype.hasOwnProperty,s=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function c(t,e,n){var r,o={},c=null,u=null;for(r in void 0!==n&&(c=""+n),void 0!==e.key&&(c=""+e.key),void 0!==e.ref&&(u=e.ref),e)a.call(e,r)&&!l.hasOwnProperty(r)&&(o[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps)void 0===o[r]&&(o[r]=e[r]);return{$$typeof:i,type:t,key:c,ref:u,props:o,_owner:s.current}}e.Fragment=o,e.jsx=c,e.jsxs=c},4202:(t,e)=>{"use strict";var n=Symbol.for("react.element"),r=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),o=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),s=Symbol.for("react.provider"),l=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),h=Symbol.for("react.memo"),d=Symbol.for("react.lazy"),f=Symbol.iterator;var p={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},m=Object.assign,g={};function y(t,e,n){this.props=t,this.context=e,this.refs=g,this.updater=n||p}function v(){}function _(t,e,n){this.props=t,this.context=e,this.refs=g,this.updater=n||p}y.prototype.isReactComponent={},y.prototype.setState=function(t,e){if("object"!==typeof t&&"function"!==typeof t&&null!=t)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")},y.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")},v.prototype=y.prototype;var b=_.prototype=new v;b.constructor=_,m(b,y.prototype),b.isPureReactComponent=!0;var x=Array.isArray,w=Object.prototype.hasOwnProperty,S={current:null},E={key:!0,ref:!0,__self:!0,__source:!0};function T(t,e,r){var i,o={},a=null,s=null;if(null!=e)for(i in void 0!==e.ref&&(s=e.ref),void 0!==e.key&&(a=""+e.key),e)w.call(e,i)&&!E.hasOwnProperty(i)&&(o[i]=e[i]);var l=arguments.length-2;if(1===l)o.children=r;else if(1<l){for(var c=Array(l),u=0;u<l;u++)c[u]=arguments[u+2];o.children=c}if(t&&t.defaultProps)for(i in l=t.defaultProps)void 0===o[i]&&(o[i]=l[i]);return{$$typeof:n,type:t,key:a,ref:s,props:o,_owner:S.current}}function M(t){return"object"===typeof t&&null!==t&&t.$$typeof===n}var A=/\/+/g;function C(t,e){return"object"===typeof t&&null!==t&&null!=t.key?function(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,(function(t){return e[t]}))}(""+t.key):e.toString(36)}function P(t,e,i,o,a){var s=typeof t;"undefined"!==s&&"boolean"!==s||(t=null);var l=!1;if(null===t)l=!0;else switch(s){case"string":case"number":l=!0;break;case"object":switch(t.$$typeof){case n:case r:l=!0}}if(l)return a=a(l=t),t=""===o?"."+C(l,0):o,x(a)?(i="",null!=t&&(i=t.replace(A,"$&/")+"/"),P(a,e,i,"",(function(t){return t}))):null!=a&&(M(a)&&(a=function(t,e){return{$$typeof:n,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}(a,i+(!a.key||l&&l.key===a.key?"":(""+a.key).replace(A,"$&/")+"/")+t)),e.push(a)),1;if(l=0,o=""===o?".":o+":",x(t))for(var c=0;c<t.length;c++){var u=o+C(s=t[c],c);l+=P(s,e,i,u,a)}else if(u=function(t){return null===t||"object"!==typeof t?null:"function"===typeof(t=f&&t[f]||t["@@iterator"])?t:null}(t),"function"===typeof u)for(t=u.call(t),c=0;!(s=t.next()).done;)l+=P(s=s.value,e,i,u=o+C(s,c++),a);else if("object"===s)throw e=String(t),Error("Objects are not valid as a React child (found: "+("[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return l}function k(t,e,n){if(null==t)return t;var r=[],i=0;return P(t,r,"","",(function(t){return e.call(n,t,i++)})),r}function I(t){if(-1===t._status){var e=t._result;(e=e()).then((function(e){0!==t._status&&-1!==t._status||(t._status=1,t._result=e)}),(function(e){0!==t._status&&-1!==t._status||(t._status=2,t._result=e)})),-1===t._status&&(t._status=0,t._result=e)}if(1===t._status)return t._result.default;throw t._result}var O={current:null},L={transition:null},j={ReactCurrentDispatcher:O,ReactCurrentBatchConfig:L,ReactCurrentOwner:S};function z(){throw Error("act(...) is not supported in production builds of React.")}e.Children={map:k,forEach:function(t,e,n){k(t,(function(){e.apply(this,arguments)}),n)},count:function(t){var e=0;return k(t,(function(){e++})),e},toArray:function(t){return k(t,(function(t){return t}))||[]},only:function(t){if(!M(t))throw Error("React.Children.only expected to receive a single React element child.");return t}},e.Component=y,e.Fragment=i,e.Profiler=a,e.PureComponent=_,e.StrictMode=o,e.Suspense=u,e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=j,e.act=z,e.cloneElement=function(t,e,r){if(null===t||void 0===t)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var i=m({},t.props),o=t.key,a=t.ref,s=t._owner;if(null!=e){if(void 0!==e.ref&&(a=e.ref,s=S.current),void 0!==e.key&&(o=""+e.key),t.type&&t.type.defaultProps)var l=t.type.defaultProps;for(c in e)w.call(e,c)&&!E.hasOwnProperty(c)&&(i[c]=void 0===e[c]&&void 0!==l?l[c]:e[c])}var c=arguments.length-2;if(1===c)i.children=r;else if(1<c){l=Array(c);for(var u=0;u<c;u++)l[u]=arguments[u+2];i.children=l}return{$$typeof:n,type:t.type,key:o,ref:a,props:i,_owner:s}},e.createContext=function(t){return(t={$$typeof:l,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:s,_context:t},t.Consumer=t},e.createElement=T,e.createFactory=function(t){var e=T.bind(null,t);return e.type=t,e},e.createRef=function(){return{current:null}},e.forwardRef=function(t){return{$$typeof:c,render:t}},e.isValidElement=M,e.lazy=function(t){return{$$typeof:d,_payload:{_status:-1,_result:t},_init:I}},e.memo=function(t,e){return{$$typeof:h,type:t,compare:void 0===e?null:e}},e.startTransition=function(t){var e=L.transition;L.transition={};try{t()}finally{L.transition=e}},e.unstable_act=z,e.useCallback=function(t,e){return O.current.useCallback(t,e)},e.useContext=function(t){return O.current.useContext(t)},e.useDebugValue=function(){},e.useDeferredValue=function(t){return O.current.useDeferredValue(t)},e.useEffect=function(t,e){return O.current.useEffect(t,e)},e.useId=function(){return O.current.useId()},e.useImperativeHandle=function(t,e,n){return O.current.useImperativeHandle(t,e,n)},e.useInsertionEffect=function(t,e){return O.current.useInsertionEffect(t,e)},e.useLayoutEffect=function(t,e){return O.current.useLayoutEffect(t,e)},e.useMemo=function(t,e){return O.current.useMemo(t,e)},e.useReducer=function(t,e,n){return O.current.useReducer(t,e,n)},e.useRef=function(t){return O.current.useRef(t)},e.useState=function(t){return O.current.useState(t)},e.useSyncExternalStore=function(t,e,n){return O.current.useSyncExternalStore(t,e,n)},e.useTransition=function(){return O.current.useTransition()},e.version="18.3.1"},5043:(t,e,n)=>{"use strict";t.exports=n(4202)},579:(t,e,n)=>{"use strict";t.exports=n(1153)},7234:(t,e)=>{"use strict";function n(t,e){var n=t.length;t.push(e);t:for(;0<n;){var r=n-1>>>1,i=t[r];if(!(0<o(i,e)))break t;t[r]=e,t[n]=i,n=r}}function r(t){return 0===t.length?null:t[0]}function i(t){if(0===t.length)return null;var e=t[0],n=t.pop();if(n!==e){t[0]=n;t:for(var r=0,i=t.length,a=i>>>1;r<a;){var s=2*(r+1)-1,l=t[s],c=s+1,u=t[c];if(0>o(l,n))c<i&&0>o(u,l)?(t[r]=u,t[c]=n,r=c):(t[r]=l,t[s]=n,r=s);else{if(!(c<i&&0>o(u,n)))break t;t[r]=u,t[c]=n,r=c}}}return e}function o(t,e){var n=t.sortIndex-e.sortIndex;return 0!==n?n:t.id-e.id}if("object"===typeof performance&&"function"===typeof performance.now){var a=performance;e.unstable_now=function(){return a.now()}}else{var s=Date,l=s.now();e.unstable_now=function(){return s.now()-l}}var c=[],u=[],h=1,d=null,f=3,p=!1,m=!1,g=!1,y="function"===typeof setTimeout?setTimeout:null,v="function"===typeof clearTimeout?clearTimeout:null,_="undefined"!==typeof setImmediate?setImmediate:null;function b(t){for(var e=r(u);null!==e;){if(null===e.callback)i(u);else{if(!(e.startTime<=t))break;i(u),e.sortIndex=e.expirationTime,n(c,e)}e=r(u)}}function x(t){if(g=!1,b(t),!m)if(null!==r(c))m=!0,L(w);else{var e=r(u);null!==e&&j(x,e.startTime-t)}}function w(t,n){m=!1,g&&(g=!1,v(M),M=-1),p=!0;var o=f;try{for(b(n),d=r(c);null!==d&&(!(d.expirationTime>n)||t&&!P());){var a=d.callback;if("function"===typeof a){d.callback=null,f=d.priorityLevel;var s=a(d.expirationTime<=n);n=e.unstable_now(),"function"===typeof s?d.callback=s:d===r(c)&&i(c),b(n)}else i(c);d=r(c)}if(null!==d)var l=!0;else{var h=r(u);null!==h&&j(x,h.startTime-n),l=!1}return l}finally{d=null,f=o,p=!1}}"undefined"!==typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var S,E=!1,T=null,M=-1,A=5,C=-1;function P(){return!(e.unstable_now()-C<A)}function k(){if(null!==T){var t=e.unstable_now();C=t;var n=!0;try{n=T(!0,t)}finally{n?S():(E=!1,T=null)}}else E=!1}if("function"===typeof _)S=function(){_(k)};else if("undefined"!==typeof MessageChannel){var I=new MessageChannel,O=I.port2;I.port1.onmessage=k,S=function(){O.postMessage(null)}}else S=function(){y(k,0)};function L(t){T=t,E||(E=!0,S())}function j(t,n){M=y((function(){t(e.unstable_now())}),n)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(t){t.callback=null},e.unstable_continueExecution=function(){m||p||(m=!0,L(w))},e.unstable_forceFrameRate=function(t){0>t||125<t?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):A=0<t?Math.floor(1e3/t):5},e.unstable_getCurrentPriorityLevel=function(){return f},e.unstable_getFirstCallbackNode=function(){return r(c)},e.unstable_next=function(t){switch(f){case 1:case 2:case 3:var e=3;break;default:e=f}var n=f;f=e;try{return t()}finally{f=n}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(t,e){switch(t){case 1:case 2:case 3:case 4:case 5:break;default:t=3}var n=f;f=t;try{return e()}finally{f=n}},e.unstable_scheduleCallback=function(t,i,o){var a=e.unstable_now();switch("object"===typeof o&&null!==o?o="number"===typeof(o=o.delay)&&0<o?a+o:a:o=a,t){case 1:var s=-1;break;case 2:s=250;break;case 5:s=1073741823;break;case 4:s=1e4;break;default:s=5e3}return t={id:h++,callback:i,priorityLevel:t,startTime:o,expirationTime:s=o+s,sortIndex:-1},o>a?(t.sortIndex=o,n(u,t),null===r(c)&&t===r(u)&&(g?(v(M),M=-1):g=!0,j(x,o-a))):(t.sortIndex=s,n(c,t),m||p||(m=!0,L(w))),t},e.unstable_shouldYield=P,e.unstable_wrapCallback=function(t){var e=f;return function(){var n=f;f=e;try{return t.apply(this,arguments)}finally{f=n}}}},8853:(t,e,n)=>{"use strict";t.exports=n(7234)},6881:(t,e,n)=>{"use strict";function r(){return new Worker(n.p+"static/js/mapbox-gl-csp-worker.1a9f63fa.worker.js")}n.d(e,{A:()=>r})}},e={};function n(r){var i=e[r];if(void 0!==i)return i.exports;var o=e[r]={id:r,loaded:!1,exports:{}};return t[r].call(o.exports,o,o.exports,n),o.loaded=!0,o.exports}n.m=t,n.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return n.d(e,{a:e}),e},(()=>{var t,e=Object.getPrototypeOf?t=>Object.getPrototypeOf(t):t=>t.__proto__;n.t=function(r,i){if(1&i&&(r=this(r)),8&i)return r;if("object"===typeof r&&r){if(4&i&&r.__esModule)return r;if(16&i&&"function"===typeof r.then)return r}var o=Object.create(null);n.r(o);var a={};t=t||[null,e({}),e([]),e(e)];for(var s=2&i&&r;"object"==typeof s&&!~t.indexOf(s);s=e(s))Object.getOwnPropertyNames(s).forEach((t=>a[t]=()=>r[t]));return a.default=()=>r,n.d(o,a),o}})(),n.d=(t,e)=>{for(var r in e)n.o(e,r)&&!n.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:e[r]})},n.f={},n.e=t=>Promise.all(Object.keys(n.f).reduce(((e,r)=>(n.f[r](t,e),e)),[])),n.u=t=>"static/js/"+t+".cdeb9be0.chunk.js",n.miniCssF=t=>{},n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}(),n.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),(()=>{var t={},e="sium-web:";n.l=(r,i,o,a)=>{if(t[r])t[r].push(i);else{var s,l;if(void 0!==o)for(var c=document.getElementsByTagName("script"),u=0;u<c.length;u++){var h=c[u];if(h.getAttribute("src")==r||h.getAttribute("data-webpack")==e+o){s=h;break}}s||(l=!0,(s=document.createElement("script")).charset="utf-8",s.timeout=120,n.nc&&s.setAttribute("nonce",n.nc),s.setAttribute("data-webpack",e+o),s.src=r),t[r]=[i];var d=(e,n)=>{s.onerror=s.onload=null,clearTimeout(f);var i=t[r];if(delete t[r],s.parentNode&&s.parentNode.removeChild(s),i&&i.forEach((t=>t(n))),e)return e(n)},f=setTimeout(d.bind(null,void 0,{type:"timeout",target:s}),12e4);s.onerror=d.bind(null,s.onerror),s.onload=d.bind(null,s.onload),l&&document.head.appendChild(s)}}})(),n.r=t=>{"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.nmd=t=>(t.paths=[],t.children||(t.children=[]),t),n.p="/",(()=>{var t={792:0};n.f.j=(e,r)=>{var i=n.o(t,e)?t[e]:void 0;if(0!==i)if(i)r.push(i[2]);else{var o=new Promise(((n,r)=>i=t[e]=[n,r]));r.push(i[2]=o);var a=n.p+n.u(e),s=new Error;n.l(a,(r=>{if(n.o(t,e)&&(0!==(i=t[e])&&(t[e]=void 0),i)){var o=r&&("load"===r.type?"missing":r.type),a=r&&r.target&&r.target.src;s.message="Loading chunk "+e+" failed.\n("+o+": "+a+")",s.name="ChunkLoadError",s.type=o,s.request=a,i[1](s)}}),"chunk-"+e,e)}};var e=(e,r)=>{var i,o,a=r[0],s=r[1],l=r[2],c=0;if(a.some((e=>0!==t[e]))){for(i in s)n.o(s,i)&&(n.m[i]=s[i]);if(l)l(n)}for(e&&e(r);c<a.length;c++)o=a[c],n.o(t,o)&&t[o]&&t[o][0](),t[o]=0},r=self.webpackChunksium_web=self.webpackChunksium_web||[];r.forEach(e.bind(null,0)),r.push=e.bind(null,r.push.bind(r))})(),n.nc=void 0,(()=>{"use strict";var t={};n.r(t),n.d(t,{scaleBand:()=>Iv,scaleDiverging:()=>pw,scaleDivergingLog:()=>mw,scaleDivergingPow:()=>yw,scaleDivergingSqrt:()=>vw,scaleDivergingSymlog:()=>gw,scaleIdentity:()=>l_,scaleImplicit:()=>Pv,scaleLinear:()=>s_,scaleLog:()=>y_,scaleOrdinal:()=>kv,scalePoint:()=>Lv,scalePow:()=>M_,scaleQuantile:()=>B_,scaleQuantize:()=>F_,scaleRadial:()=>P_,scaleSequential:()=>sw,scaleSequentialLog:()=>lw,scaleSequentialPow:()=>uw,scaleSequentialQuantile:()=>dw,scaleSequentialSqrt:()=>hw,scaleSequentialSymlog:()=>cw,scaleSqrt:()=>A_,scaleSymlog:()=>x_,scaleThreshold:()=>N_,scaleTime:()=>rw,scaleUtc:()=>iw,tickFormat:()=>o_});var e,r=n(5043),i=n.t(r,2),o=n(4391),a=n(7950),s=n.t(a,2);function l(){return l=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},l.apply(this,arguments)}!function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"}(e||(e={}));const c="popstate";function u(t,e){if(!1===t||null===t||"undefined"===typeof t)throw new Error(e)}function h(t,e){if(!t){"undefined"!==typeof console&&console.warn(e);try{throw new Error(e)}catch(n){}}}function d(t,e){return{usr:t.state,key:t.key,idx:e}}function f(t,e,n,r){return void 0===n&&(n=null),l({pathname:"string"===typeof t?t:t.pathname,search:"",hash:""},"string"===typeof e?m(e):e,{state:n,key:e&&e.key||r||Math.random().toString(36).substr(2,8)})}function p(t){let{pathname:e="/",search:n="",hash:r=""}=t;return n&&"?"!==n&&(e+="?"===n.charAt(0)?n:"?"+n),r&&"#"!==r&&(e+="#"===r.charAt(0)?r:"#"+r),e}function m(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substr(r),t=t.substr(0,r)),t&&(e.pathname=t)}return e}function g(t,n,r,i){void 0===i&&(i={});let{window:o=document.defaultView,v5Compat:a=!1}=i,s=o.history,h=e.Pop,m=null,g=y();function y(){return(s.state||{idx:null}).idx}function v(){h=e.Pop;let t=y(),n=null==t?null:t-g;g=t,m&&m({action:h,location:b.location,delta:n})}function _(t){let e="null"!==o.location.origin?o.location.origin:o.location.href,n="string"===typeof t?t:p(t);return n=n.replace(/ $/,"%20"),u(e,"No window.location.(origin|href) available to create URL for href: "+n),new URL(n,e)}null==g&&(g=0,s.replaceState(l({},s.state,{idx:g}),""));let b={get action(){return h},get location(){return t(o,s)},listen(t){if(m)throw new Error("A history only accepts one active listener");return o.addEventListener(c,v),m=t,()=>{o.removeEventListener(c,v),m=null}},createHref:t=>n(o,t),createURL:_,encodeLocation(t){let e=_(t);return{pathname:e.pathname,search:e.search,hash:e.hash}},push:function(t,n){h=e.Push;let i=f(b.location,t,n);r&&r(i,t),g=y()+1;let l=d(i,g),c=b.createHref(i);try{s.pushState(l,"",c)}catch(u){if(u instanceof DOMException&&"DataCloneError"===u.name)throw u;o.location.assign(c)}a&&m&&m({action:h,location:b.location,delta:1})},replace:function(t,n){h=e.Replace;let i=f(b.location,t,n);r&&r(i,t),g=y();let o=d(i,g),l=b.createHref(i);s.replaceState(o,"",l),a&&m&&m({action:h,location:b.location,delta:0})},go:t=>s.go(t)};return b}var y;!function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"}(y||(y={}));new Set(["lazy","caseSensitive","path","id","index","children"]);function v(t,e,n){return void 0===n&&(n="/"),b(t,e,n,!1)}function b(t,e,n,r){let i=j(("string"===typeof e?m(e):e).pathname||"/",n);if(null==i)return null;let o=x(t);!function(t){t.sort(((t,e)=>t.score!==e.score?e.score-t.score:function(t,e){let n=t.length===e.length&&t.slice(0,-1).every(((t,n)=>t===e[n]));return n?t[t.length-1]-e[e.length-1]:0}(t.routesMeta.map((t=>t.childrenIndex)),e.routesMeta.map((t=>t.childrenIndex)))))}(o);let a=null;for(let s=0;null==a&&s<o.length;++s){let t=L(i);a=I(o[s],t,r)}return a}function x(t,e,n,r){void 0===e&&(e=[]),void 0===n&&(n=[]),void 0===r&&(r="");let i=(t,i,o)=>{let a={relativePath:void 0===o?t.path||"":o,caseSensitive:!0===t.caseSensitive,childrenIndex:i,route:t};a.relativePath.startsWith("/")&&(u(a.relativePath.startsWith(r),'Absolute route path "'+a.relativePath+'" nested under path "'+r+'" is not valid. An absolute child route path must start with the combined path of all its parent routes.'),a.relativePath=a.relativePath.slice(r.length));let s=F([r,a.relativePath]),l=n.concat(a);t.children&&t.children.length>0&&(u(!0!==t.index,'Index routes must not have child routes. Please remove all child routes from route path "'+s+'".'),x(t.children,e,l,s)),(null!=t.path||t.index)&&e.push({path:s,score:k(s,t.index),routesMeta:l})};return t.forEach(((t,e)=>{var n;if(""!==t.path&&null!=(n=t.path)&&n.includes("?"))for(let r of w(t.path))i(t,e,r);else i(t,e)})),e}function w(t){let e=t.split("/");if(0===e.length)return[];let[n,...r]=e,i=n.endsWith("?"),o=n.replace(/\?$/,"");if(0===r.length)return i?[o,""]:[o];let a=w(r.join("/")),s=[];return s.push(...a.map((t=>""===t?o:[o,t].join("/")))),i&&s.push(...a),s.map((e=>t.startsWith("/")&&""===e?"/":e))}const S=/^:[\w-]+$/,E=3,T=2,M=1,A=10,C=-2,P=t=>"*"===t;function k(t,e){let n=t.split("/"),r=n.length;return n.some(P)&&(r+=C),e&&(r+=T),n.filter((t=>!P(t))).reduce(((t,e)=>t+(S.test(e)?E:""===e?M:A)),r)}function I(t,e,n){void 0===n&&(n=!1);let{routesMeta:r}=t,i={},o="/",a=[];for(let s=0;s<r.length;++s){let t=r[s],l=s===r.length-1,c="/"===o?e:e.slice(o.length)||"/",u=O({path:t.relativePath,caseSensitive:t.caseSensitive,end:l},c),h=t.route;if(!u&&l&&n&&!r[r.length-1].route.index&&(u=O({path:t.relativePath,caseSensitive:t.caseSensitive,end:!1},c)),!u)return null;Object.assign(i,u.params),a.push({params:i,pathname:F([o,u.pathname]),pathnameBase:N(F([o,u.pathnameBase])),route:h}),"/"!==u.pathnameBase&&(o=F([o,u.pathnameBase]))}return a}function O(t,e){"string"===typeof t&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=function(t,e,n){void 0===e&&(e=!1);void 0===n&&(n=!0);h("*"===t||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were "'+t.replace(/\*$/,"/*")+'" because the `*` character must always follow a `/` in the pattern. To get rid of this warning, please change the route path to "'+t.replace(/\*$/,"/*")+'".');let r=[],i="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,((t,e,n)=>(r.push({paramName:e,isOptional:null!=n}),n?"/?([^\\/]+)?":"/([^\\/]+)")));t.endsWith("*")?(r.push({paramName:"*"}),i+="*"===t||"/*"===t?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":""!==t&&"/"!==t&&(i+="(?:(?=\\/|$))");let o=new RegExp(i,e?void 0:"i");return[o,r]}(t.path,t.caseSensitive,t.end),i=e.match(n);if(!i)return null;let o=i[0],a=o.replace(/(.)\/+$/,"$1"),s=i.slice(1),l=r.reduce(((t,e,n)=>{let{paramName:r,isOptional:i}=e;if("*"===r){let t=s[n]||"";a=o.slice(0,o.length-t.length).replace(/(.)\/+$/,"$1")}const l=s[n];return t[r]=i&&!l?void 0:(l||"").replace(/%2F/g,"/"),t}),{});return{params:l,pathname:o,pathnameBase:a,pattern:t}}function L(t){try{return t.split("/").map((t=>decodeURIComponent(t).replace(/\//g,"%2F"))).join("/")}catch(e){return h(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent encoding ('+e+")."),t}}function j(t,e){if("/"===e)return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&"/"!==r?null:t.slice(n)||"/"}function z(t,e,n,r){return"Cannot include a '"+t+"' character in a manually specified `to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the `to."+n+'` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.'}function R(t){return t.filter(((t,e)=>0===e||t.route.path&&t.route.path.length>0))}function D(t,e){let n=R(t);return e?n.map(((e,n)=>n===t.length-1?e.pathname:e.pathnameBase)):n.map((t=>t.pathnameBase))}function B(t,e,n,r){let i;void 0===r&&(r=!1),"string"===typeof t?i=m(t):(i=l({},t),u(!i.pathname||!i.pathname.includes("?"),z("?","pathname","search",i)),u(!i.pathname||!i.pathname.includes("#"),z("#","pathname","hash",i)),u(!i.search||!i.search.includes("#"),z("#","search","hash",i)));let o,a=""===t||""===i.pathname,s=a?"/":i.pathname;if(null==s)o=n;else{let t=e.length-1;if(!r&&s.startsWith("..")){let e=s.split("/");for(;".."===e[0];)e.shift(),t-=1;i.pathname=e.join("/")}o=t>=0?e[t]:"/"}let c=function(t,e){void 0===e&&(e="/");let{pathname:n,search:r="",hash:i=""}="string"===typeof t?m(t):t,o=n?n.startsWith("/")?n:function(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach((t=>{".."===t?n.length>1&&n.pop():"."!==t&&n.push(t)})),n.length>1?n.join("/"):"/"}(n,e):e;return{pathname:o,search:U(r),hash:V(i)}}(i,o),h=s&&"/"!==s&&s.endsWith("/"),d=(a||"."===s)&&n.endsWith("/");return c.pathname.endsWith("/")||!h&&!d||(c.pathname+="/"),c}const F=t=>t.join("/").replace(/\/\/+/g,"/"),N=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),U=t=>t&&"?"!==t?t.startsWith("?")?t:"?"+t:"",V=t=>t&&"#"!==t?t.startsWith("#")?t:"#"+t:"";Error;function W(t){return null!=t&&"number"===typeof t.status&&"string"===typeof t.statusText&&"boolean"===typeof t.internal&&"data"in t}const G=["post","put","patch","delete"],q=(new Set(G),["get",...G]);new Set(q),new Set([301,302,303,307,308]),new Set([307,308]);Symbol("deferred");function H(){return H=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},H.apply(this,arguments)}const Z=r.createContext(null);const X=r.createContext(null);const Y=r.createContext(null);const K=r.createContext(null);const $=r.createContext({outlet:null,matches:[],isDataRoute:!1});const J=r.createContext(null);function Q(){return null!=r.useContext(K)}function tt(){return Q()||u(!1),r.useContext(K).location}function et(t){r.useContext(Y).static||r.useLayoutEffect(t)}function nt(){let{isDataRoute:t}=r.useContext($);return t?function(){let{router:t}=dt(ut.UseNavigateStable),e=pt(ht.UseNavigateStable),n=r.useRef(!1);et((()=>{n.current=!0}));let i=r.useCallback((function(r,i){void 0===i&&(i={}),n.current&&("number"===typeof r?t.navigate(r):t.navigate(r,H({fromRouteId:e},i)))}),[t,e]);return i}():function(){Q()||u(!1);let t=r.useContext(Z),{basename:e,future:n,navigator:i}=r.useContext(Y),{matches:o}=r.useContext($),{pathname:a}=tt(),s=JSON.stringify(D(o,n.v7_relativeSplatPath)),l=r.useRef(!1);et((()=>{l.current=!0}));let c=r.useCallback((function(n,r){if(void 0===r&&(r={}),!l.current)return;if("number"===typeof n)return void i.go(n);let o=B(n,JSON.parse(s),a,"path"===r.relative);null==t&&"/"!==e&&(o.pathname="/"===o.pathname?e:F([e,o.pathname])),(r.replace?i.replace:i.push)(o,r.state,r)}),[e,i,s,a,t]);return c}()}function rt(t,e){let{relative:n}=void 0===e?{}:e,{future:i}=r.useContext(Y),{matches:o}=r.useContext($),{pathname:a}=tt(),s=JSON.stringify(D(o,i.v7_relativeSplatPath));return r.useMemo((()=>B(t,JSON.parse(s),a,"path"===n)),[t,s,a,n])}function it(t,n,i,o){Q()||u(!1);let{navigator:a}=r.useContext(Y),{matches:s}=r.useContext($),l=s[s.length-1],c=l?l.params:{},h=(l&&l.pathname,l?l.pathnameBase:"/");l&&l.route;let d,f=tt();if(n){var p;let t="string"===typeof n?m(n):n;"/"===h||(null==(p=t.pathname)?void 0:p.startsWith(h))||u(!1),d=t}else d=f;let g=d.pathname||"/",y=g;if("/"!==h){let t=h.replace(/^\//,"").split("/");y="/"+g.replace(/^\//,"").split("/").slice(t.length).join("/")}let _=v(t,{pathname:y});let b=ct(_&&_.map((t=>Object.assign({},t,{params:Object.assign({},c,t.params),pathname:F([h,a.encodeLocation?a.encodeLocation(t.pathname).pathname:t.pathname]),pathnameBase:"/"===t.pathnameBase?h:F([h,a.encodeLocation?a.encodeLocation(t.pathnameBase).pathname:t.pathnameBase])}))),s,i,o);return n&&b?r.createElement(K.Provider,{value:{location:H({pathname:"/",search:"",hash:"",state:null,key:"default"},d),navigationType:e.Pop}},b):b}function ot(){let t=function(){var t;let e=r.useContext(J),n=ft(ht.UseRouteError),i=pt(ht.UseRouteError);if(void 0!==e)return e;return null==(t=n.errors)?void 0:t[i]}(),e=W(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,i="rgba(200,200,200, 0.5)",o={padding:"0.5rem",backgroundColor:i};return r.createElement(r.Fragment,null,r.createElement("h2",null,"Unexpected Application Error!"),r.createElement("h3",{style:{fontStyle:"italic"}},e),n?r.createElement("pre",{style:o},n):null,null)}const at=r.createElement(ot,null);class st extends r.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,e){return e.location!==t.location||"idle"!==e.revalidation&&"idle"===t.revalidation?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:void 0!==t.error?t.error:e.error,location:e.location,revalidation:t.revalidation||e.revalidation}}componentDidCatch(t,e){console.error("React Router caught the following error during render",t,e)}render(){return void 0!==this.state.error?r.createElement($.Provider,{value:this.props.routeContext},r.createElement(J.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function lt(t){let{routeContext:e,match:n,children:i}=t,o=r.useContext(Z);return o&&o.static&&o.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(o.staticContext._deepestRenderedBoundaryId=n.route.id),r.createElement($.Provider,{value:e},i)}function ct(t,e,n,i){var o;if(void 0===e&&(e=[]),void 0===n&&(n=null),void 0===i&&(i=null),null==t){var a;if(null==(a=n)||!a.errors)return null;t=n.matches}let s=t,l=null==(o=n)?void 0:o.errors;if(null!=l){let t=s.findIndex((t=>t.route.id&&void 0!==(null==l?void 0:l[t.route.id])));t>=0||u(!1),s=s.slice(0,Math.min(s.length,t+1))}let c=!1,h=-1;if(n&&i&&i.v7_partialHydration)for(let r=0;r<s.length;r++){let t=s[r];if((t.route.HydrateFallback||t.route.hydrateFallbackElement)&&(h=r),t.route.id){let{loaderData:e,errors:r}=n,i=t.route.loader&&void 0===e[t.route.id]&&(!r||void 0===r[t.route.id]);if(t.route.lazy||i){c=!0,s=h>=0?s.slice(0,h+1):[s[0]];break}}}return s.reduceRight(((t,i,o)=>{let a,u=!1,d=null,f=null;var p;n&&(a=l&&i.route.id?l[i.route.id]:void 0,d=i.route.errorElement||at,c&&(h<0&&0===o?(p="route-fallback",!1||mt[p]||(mt[p]=!0),u=!0,f=null):h===o&&(u=!0,f=i.route.hydrateFallbackElement||null)));let m=e.concat(s.slice(0,o+1)),g=()=>{let e;return e=a?d:u?f:i.route.Component?r.createElement(i.route.Component,null):i.route.element?i.route.element:t,r.createElement(lt,{match:i,routeContext:{outlet:t,matches:m,isDataRoute:null!=n},children:e})};return n&&(i.route.ErrorBoundary||i.route.errorElement||0===o)?r.createElement(st,{location:n.location,revalidation:n.revalidation,component:d,error:a,children:g(),routeContext:{outlet:null,matches:m,isDataRoute:!0}}):g()}),null)}var ut=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(ut||{}),ht=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(ht||{});function dt(t){let e=r.useContext(Z);return e||u(!1),e}function ft(t){let e=r.useContext(X);return e||u(!1),e}function pt(t){let e=function(t){let e=r.useContext($);return e||u(!1),e}(),n=e.matches[e.matches.length-1];return n.route.id||u(!1),n.route.id}const mt={};i.startTransition;function gt(t){u(!1)}function yt(t){let{basename:n="/",children:i=null,location:o,navigationType:a=e.Pop,navigator:s,static:l=!1,future:c}=t;Q()&&u(!1);let h=n.replace(/^\/*/,"/"),d=r.useMemo((()=>({basename:h,navigator:s,static:l,future:H({v7_relativeSplatPath:!1},c)})),[h,c,s,l]);"string"===typeof o&&(o=m(o));let{pathname:f="/",search:p="",hash:g="",state:y=null,key:v="default"}=o,_=r.useMemo((()=>{let t=j(f,h);return null==t?null:{location:{pathname:t,search:p,hash:g,state:y,key:v},navigationType:a}}),[h,f,p,g,y,v,a]);return null==_?null:r.createElement(Y.Provider,{value:d},r.createElement(K.Provider,{children:i,value:_}))}function vt(t){let{children:e,location:n}=t;return it(_t(e),n)}new Promise((()=>{}));r.Component;function _t(t,e){void 0===e&&(e=[]);let n=[];return r.Children.forEach(t,((t,i)=>{if(!r.isValidElement(t))return;let o=[...e,i];if(t.type===r.Fragment)return void n.push.apply(n,_t(t.props.children,o));t.type!==gt&&u(!1),t.props.index&&t.props.children&&u(!1);let a={id:t.props.id||o.join("-"),caseSensitive:t.props.caseSensitive,element:t.props.element,Component:t.props.Component,index:t.props.index,path:t.props.path,loader:t.props.loader,action:t.props.action,errorElement:t.props.errorElement,ErrorBoundary:t.props.ErrorBoundary,hasErrorBoundary:null!=t.props.ErrorBoundary||null!=t.props.errorElement,shouldRevalidate:t.props.shouldRevalidate,handle:t.props.handle,lazy:t.props.lazy};t.props.children&&(a.children=_t(t.props.children,o)),n.push(a)})),n}function bt(){return bt=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},bt.apply(this,arguments)}function xt(t,e){if(null==t)return{};var n,r,i={},o=Object.keys(t);for(r=0;r<o.length;r++)n=o[r],e.indexOf(n)>=0||(i[n]=t[n]);return i}new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);const wt=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","unstable_viewTransition"];try{window.__reactRouterVersion="6"}catch(pbt){}new Map;const St=i.startTransition;s.flushSync,i.useId;function Et(t){let{basename:e,children:n,future:i,window:o}=t,a=r.useRef();null==a.current&&(a.current=function(t){return void 0===t&&(t={}),g((function(t,e){let{pathname:n,search:r,hash:i}=t.location;return f("",{pathname:n,search:r,hash:i},e.state&&e.state.usr||null,e.state&&e.state.key||"default")}),(function(t,e){return"string"===typeof e?e:p(e)}),null,t)}({window:o,v5Compat:!0}));let s=a.current,[l,c]=r.useState({action:s.action,location:s.location}),{v7_startTransition:u}=i||{},h=r.useCallback((t=>{u&&St?St((()=>c(t))):c(t)}),[c,u]);return r.useLayoutEffect((()=>s.listen(h)),[s,h]),r.createElement(yt,{basename:e,children:n,location:l.location,navigationType:l.action,navigator:s,future:i})}const Tt="undefined"!==typeof window&&"undefined"!==typeof window.document&&"undefined"!==typeof window.document.createElement,Mt=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,At=r.forwardRef((function(t,e){let n,{onClick:i,relative:o,reloadDocument:a,replace:s,state:l,target:c,to:h,preventScrollReset:d,unstable_viewTransition:f}=t,m=xt(t,wt),{basename:g}=r.useContext(Y),y=!1;if("string"===typeof h&&Mt.test(h)&&(n=h,Tt))try{let t=new URL(window.location.href),e=h.startsWith("//")?new URL(t.protocol+h):new URL(h),n=j(e.pathname,g);e.origin===t.origin&&null!=n?h=n+e.search+e.hash:y=!0}catch(pbt){}let v=function(t,e){let{relative:n}=void 0===e?{}:e;Q()||u(!1);let{basename:i,navigator:o}=r.useContext(Y),{hash:a,pathname:s,search:l}=rt(t,{relative:n}),c=s;return"/"!==i&&(c="/"===s?i:F([i,s])),o.createHref({pathname:c,search:l,hash:a})}(h,{relative:o}),_=function(t,e){let{target:n,replace:i,state:o,preventScrollReset:a,relative:s,unstable_viewTransition:l}=void 0===e?{}:e,c=nt(),u=tt(),h=rt(t,{relative:s});return r.useCallback((e=>{if(function(t,e){return 0===t.button&&(!e||"_self"===e)&&!function(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}(t)}(e,n)){e.preventDefault();let n=void 0!==i?i:p(u)===p(h);c(t,{replace:n,state:o,preventScrollReset:a,relative:s,unstable_viewTransition:l})}}),[u,c,h,i,o,n,t,a,s,l])}(h,{replace:s,state:l,target:c,preventScrollReset:d,relative:o,unstable_viewTransition:f});return r.createElement("a",bt({},m,{href:n||v,onClick:y||a?i:function(t){i&&i(t),t.defaultPrevented||_(t)},ref:e,target:c}))}));var Ct,Pt;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(Ct||(Ct={})),function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"}(Pt||(Pt={}));var kt=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return e.filter(Boolean).join(" ")};function It(t){const e=typeof t;return null!=t&&("object"===e||"function"===e)&&!Array.isArray(t)}var Ot=t=>{const{condition:e,message:n}=t};function Lt(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];return jt(t)?t(...n):t}var jt=t=>"function"===typeof t,zt=t=>t?"":void 0,Rt=t=>!!t||void 0;function Dt(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return function(t){e.some((e=>(null==e||e(t),null==t?void 0:t.defaultPrevented)))}}function Bt(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return function(t){e.forEach((e=>{null==e||e(t)}))}}var Ft=n(9611),Nt=t=>"string"===typeof t?t.replace(/!(important)?$/,"").trim():t,Ut=(t,e)=>n=>{const r=String(e),i=(t=>/!(important)?$/.test(t))(r),o=Nt(r),a=t?"".concat(t,".").concat(o):o;let s=It(n.__cssMap)&&a in n.__cssMap?n.__cssMap[a].varRef:e;return s=Nt(s),i?"".concat(s," !important"):s};function Vt(t){const{scale:e,transform:n,compose:r}=t;return(t,i)=>{var o;const a=Ut(e,t)(i);let s=null!=(o=null==n?void 0:n(a,i))?o:a;return r&&(s=r(s,i)),s}}var Wt=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return t=>e.reduce(((t,e)=>e(t)),t)};function Gt(t,e){return n=>{const r={property:n,scale:t};return r.transform=Vt({scale:t,transform:e}),r}}var qt=t=>{let{rtl:e,ltr:n}=t;return t=>"rtl"===t.direction?e:n};var Ht=["rotate(var(--chakra-rotate, 0))","scaleX(var(--chakra-scale-x, 1))","scaleY(var(--chakra-scale-y, 1))","skewX(var(--chakra-skew-x, 0))","skewY(var(--chakra-skew-y, 0))"];var Zt={"--chakra-blur":"var(--chakra-empty,/*!*/ /*!*/)","--chakra-brightness":"var(--chakra-empty,/*!*/ /*!*/)","--chakra-contrast":"var(--chakra-empty,/*!*/ /*!*/)","--chakra-grayscale":"var(--chakra-empty,/*!*/ /*!*/)","--chakra-hue-rotate":"var(--chakra-empty,/*!*/ /*!*/)","--chakra-invert":"var(--chakra-empty,/*!*/ /*!*/)","--chakra-saturate":"var(--chakra-empty,/*!*/ /*!*/)","--chakra-sepia":"var(--chakra-empty,/*!*/ /*!*/)","--chakra-drop-shadow":"var(--chakra-empty,/*!*/ /*!*/)",filter:["var(--chakra-blur)","var(--chakra-brightness)","var(--chakra-contrast)","var(--chakra-grayscale)","var(--chakra-hue-rotate)","var(--chakra-invert)","var(--chakra-saturate)","var(--chakra-sepia)","var(--chakra-drop-shadow)"].join(" ")},Xt={backdropFilter:["var(--chakra-backdrop-blur)","var(--chakra-backdrop-brightness)","var(--chakra-backdrop-contrast)","var(--chakra-backdrop-grayscale)","var(--chakra-backdrop-hue-rotate)","var(--chakra-backdrop-invert)","var(--chakra-backdrop-opacity)","var(--chakra-backdrop-saturate)","var(--chakra-backdrop-sepia)"].join(" "),"--chakra-backdrop-blur":"var(--chakra-empty,/*!*/ /*!*/)","--chakra-backdrop-brightness":"var(--chakra-empty,/*!*/ /*!*/)","--chakra-backdrop-contrast":"var(--chakra-empty,/*!*/ /*!*/)","--chakra-backdrop-grayscale":"var(--chakra-empty,/*!*/ /*!*/)","--chakra-backdrop-hue-rotate":"var(--chakra-empty,/*!*/ /*!*/)","--chakra-backdrop-invert":"var(--chakra-empty,/*!*/ /*!*/)","--chakra-backdrop-opacity":"var(--chakra-empty,/*!*/ /*!*/)","--chakra-backdrop-saturate":"var(--chakra-empty,/*!*/ /*!*/)","--chakra-backdrop-sepia":"var(--chakra-empty,/*!*/ /*!*/)"};var Yt={"row-reverse":{space:"--chakra-space-x-reverse",divide:"--chakra-divide-x-reverse"},"column-reverse":{space:"--chakra-space-y-reverse",divide:"--chakra-divide-y-reverse"}},Kt={"to-t":"to top","to-tr":"to top right","to-r":"to right","to-br":"to bottom right","to-b":"to bottom","to-bl":"to bottom left","to-l":"to left","to-tl":"to top left"},$t=new Set(Object.values(Kt)),Jt=new Set(["none","-moz-initial","inherit","initial","revert","unset"]),Qt=t=>t.trim();var te=t=>"string"===typeof t&&t.includes("(")&&t.includes(")");var ee=t=>e=>"".concat(t,"(").concat(e,")"),ne={filter:t=>"auto"!==t?t:Zt,backdropFilter:t=>"auto"!==t?t:Xt,ring:t=>function(t){return{"--chakra-ring-offset-shadow":"var(--chakra-ring-inset) 0 0 0 var(--chakra-ring-offset-width) var(--chakra-ring-offset-color)","--chakra-ring-shadow":"var(--chakra-ring-inset) 0 0 0 calc(var(--chakra-ring-width) + var(--chakra-ring-offset-width)) var(--chakra-ring-color)","--chakra-ring-width":t,boxShadow:["var(--chakra-ring-offset-shadow)","var(--chakra-ring-shadow)","var(--chakra-shadow, 0 0 #0000)"].join(", ")}}(ne.px(t)),bgClip:t=>"text"===t?{color:"transparent",backgroundClip:"text"}:{backgroundClip:t},transform:t=>"auto"===t?["translateX(var(--chakra-translate-x, 0))","translateY(var(--chakra-translate-y, 0))",...Ht].join(" "):"auto-gpu"===t?["translate3d(var(--chakra-translate-x, 0), var(--chakra-translate-y, 0), 0)",...Ht].join(" "):t,vh:t=>"$100vh"===t?"var(--chakra-vh)":t,px(t){if(null==t)return t;const{unitless:e}=(t=>{const e=parseFloat(t.toString()),n=t.toString().replace(String(e),"");return{unitless:!n,value:e,unit:n}})(t);return e||"number"===typeof t?"".concat(t,"px"):t},fraction:t=>"number"!==typeof t||t>1?t:"".concat(100*t,"%"),float:(t,e)=>"rtl"===e.direction?{left:"right",right:"left"}[t]:t,degree(t){if(function(t){return/^var\(--.+\)$/.test(t)}(t)||null==t)return t;const e="string"===typeof t&&!t.endsWith("deg");return"number"===typeof t||e?"".concat(t,"deg"):t},gradient:(t,e)=>function(t,e){if(null==t||Jt.has(t))return t;if(!te(t)&&!Jt.has(t))return"url('".concat(t,"')");const n=/(^[a-z-A-Z]+)\((.*)\)/g.exec(t),r=null==n?void 0:n[1],i=null==n?void 0:n[2];if(!r||!i)return t;const o=r.includes("-gradient")?r:"".concat(r,"-gradient"),[a,...s]=i.split(",").map(Qt).filter(Boolean);if(0===(null==s?void 0:s.length))return t;const l=a in Kt?Kt[a]:a;s.unshift(l);const c=s.map((t=>{if($t.has(t))return t;const n=t.indexOf(" "),[r,i]=-1!==n?[t.substr(0,n),t.substr(n+1)]:[t],o=te(i)?i:i&&i.split(" "),a="colors.".concat(r),s=a in e.__cssMap?e.__cssMap[a].varRef:r;return o?[s,...Array.isArray(o)?o:[o]].join(" "):s}));return"".concat(o,"(").concat(c.join(", "),")")}(t,null!=e?e:{}),blur:ee("blur"),opacity:ee("opacity"),brightness:ee("brightness"),contrast:ee("contrast"),dropShadow:ee("drop-shadow"),grayscale:ee("grayscale"),hueRotate:t=>ee("hue-rotate")(ne.degree(t)),invert:ee("invert"),saturate:ee("saturate"),sepia:ee("sepia"),bgImage(t){if(null==t)return t;return te(t)||Jt.has(t)?t:"url(".concat(t,")")},outline(t){const e="0"===String(t)||"none"===String(t);return null!==t&&e?{outline:"2px solid transparent",outlineOffset:"2px"}:{outline:t}},flexDirection(t){var e;const{space:n,divide:r}=null!=(e=Yt[t])?e:{},i={flexDirection:t};return n&&(i[n]=1),r&&(i[r]=1),i}},re={borderWidths:Gt("borderWidths"),borderStyles:Gt("borderStyles"),colors:Gt("colors"),borders:Gt("borders"),gradients:Gt("gradients",ne.gradient),radii:Gt("radii",ne.px),space:Gt("space",Wt(ne.vh,ne.px)),spaceT:Gt("space",Wt(ne.vh,ne.px)),degreeT:t=>({property:t,transform:ne.degree}),prop:(t,e,n)=>({property:t,scale:e,...e&&{transform:Vt({scale:e,transform:n})}}),propT:(t,e)=>({property:t,transform:e}),sizes:Gt("sizes",Wt(ne.vh,ne.px)),sizesT:Gt("sizes",Wt(ne.vh,ne.fraction)),shadows:Gt("shadows"),logical:function(t){const{property:e,scale:n,transform:r}=t;return{scale:n,property:qt(e),transform:n?Vt({scale:n,compose:r}):r}},blur:Gt("blur",ne.blur)},ie={background:re.colors("background"),backgroundColor:re.colors("backgroundColor"),backgroundImage:re.gradients("backgroundImage"),backgroundSize:!0,backgroundPosition:!0,backgroundRepeat:!0,backgroundAttachment:!0,backgroundClip:{transform:ne.bgClip},bgSize:re.prop("backgroundSize"),bgPosition:re.prop("backgroundPosition"),bg:re.colors("background"),bgColor:re.colors("backgroundColor"),bgPos:re.prop("backgroundPosition"),bgRepeat:re.prop("backgroundRepeat"),bgAttachment:re.prop("backgroundAttachment"),bgGradient:re.gradients("backgroundImage"),bgClip:{transform:ne.bgClip}};Object.assign(ie,{bgImage:ie.backgroundImage,bgImg:ie.backgroundImage});var oe={border:re.borders("border"),borderWidth:re.borderWidths("borderWidth"),borderStyle:re.borderStyles("borderStyle"),borderColor:re.colors("borderColor"),borderRadius:re.radii("borderRadius"),borderTop:re.borders("borderTop"),borderBlockStart:re.borders("borderBlockStart"),borderTopLeftRadius:re.radii("borderTopLeftRadius"),borderStartStartRadius:re.logical({scale:"radii",property:{ltr:"borderTopLeftRadius",rtl:"borderTopRightRadius"}}),borderEndStartRadius:re.logical({scale:"radii",property:{ltr:"borderBottomLeftRadius",rtl:"borderBottomRightRadius"}}),borderTopRightRadius:re.radii("borderTopRightRadius"),borderStartEndRadius:re.logical({scale:"radii",property:{ltr:"borderTopRightRadius",rtl:"borderTopLeftRadius"}}),borderEndEndRadius:re.logical({scale:"radii",property:{ltr:"borderBottomRightRadius",rtl:"borderBottomLeftRadius"}}),borderRight:re.borders("borderRight"),borderInlineEnd:re.borders("borderInlineEnd"),borderBottom:re.borders("borderBottom"),borderBlockEnd:re.borders("borderBlockEnd"),borderBottomLeftRadius:re.radii("borderBottomLeftRadius"),borderBottomRightRadius:re.radii("borderBottomRightRadius"),borderLeft:re.borders("borderLeft"),borderInlineStart:{property:"borderInlineStart",scale:"borders"},borderInlineStartRadius:re.logical({scale:"radii",property:{ltr:["borderTopLeftRadius","borderBottomLeftRadius"],rtl:["borderTopRightRadius","borderBottomRightRadius"]}}),borderInlineEndRadius:re.logical({scale:"radii",property:{ltr:["borderTopRightRadius","borderBottomRightRadius"],rtl:["borderTopLeftRadius","borderBottomLeftRadius"]}}),borderX:re.borders(["borderLeft","borderRight"]),borderInline:re.borders("borderInline"),borderY:re.borders(["borderTop","borderBottom"]),borderBlock:re.borders("borderBlock"),borderTopWidth:re.borderWidths("borderTopWidth"),borderBlockStartWidth:re.borderWidths("borderBlockStartWidth"),borderTopColor:re.colors("borderTopColor"),borderBlockStartColor:re.colors("borderBlockStartColor"),borderTopStyle:re.borderStyles("borderTopStyle"),borderBlockStartStyle:re.borderStyles("borderBlockStartStyle"),borderBottomWidth:re.borderWidths("borderBottomWidth"),borderBlockEndWidth:re.borderWidths("borderBlockEndWidth"),borderBottomColor:re.colors("borderBottomColor"),borderBlockEndColor:re.colors("borderBlockEndColor"),borderBottomStyle:re.borderStyles("borderBottomStyle"),borderBlockEndStyle:re.borderStyles("borderBlockEndStyle"),borderLeftWidth:re.borderWidths("borderLeftWidth"),borderInlineStartWidth:re.borderWidths("borderInlineStartWidth"),borderLeftColor:re.colors("borderLeftColor"),borderInlineStartColor:re.colors("borderInlineStartColor"),borderLeftStyle:re.borderStyles("borderLeftStyle"),borderInlineStartStyle:re.borderStyles("borderInlineStartStyle"),borderRightWidth:re.borderWidths("borderRightWidth"),borderInlineEndWidth:re.borderWidths("borderInlineEndWidth"),borderRightColor:re.colors("borderRightColor"),borderInlineEndColor:re.colors("borderInlineEndColor"),borderRightStyle:re.borderStyles("borderRightStyle"),borderInlineEndStyle:re.borderStyles("borderInlineEndStyle"),borderTopRadius:re.radii(["borderTopLeftRadius","borderTopRightRadius"]),borderBottomRadius:re.radii(["borderBottomLeftRadius","borderBottomRightRadius"]),borderLeftRadius:re.radii(["borderTopLeftRadius","borderBottomLeftRadius"]),borderRightRadius:re.radii(["borderTopRightRadius","borderBottomRightRadius"])};Object.assign(oe,{rounded:oe.borderRadius,roundedTop:oe.borderTopRadius,roundedTopLeft:oe.borderTopLeftRadius,roundedTopRight:oe.borderTopRightRadius,roundedTopStart:oe.borderStartStartRadius,roundedTopEnd:oe.borderStartEndRadius,roundedBottom:oe.borderBottomRadius,roundedBottomLeft:oe.borderBottomLeftRadius,roundedBottomRight:oe.borderBottomRightRadius,roundedBottomStart:oe.borderEndStartRadius,roundedBottomEnd:oe.borderEndEndRadius,roundedLeft:oe.borderLeftRadius,roundedRight:oe.borderRightRadius,roundedStart:oe.borderInlineStartRadius,roundedEnd:oe.borderInlineEndRadius,borderStart:oe.borderInlineStart,borderEnd:oe.borderInlineEnd,borderTopStartRadius:oe.borderStartStartRadius,borderTopEndRadius:oe.borderStartEndRadius,borderBottomStartRadius:oe.borderEndStartRadius,borderBottomEndRadius:oe.borderEndEndRadius,borderStartRadius:oe.borderInlineStartRadius,borderEndRadius:oe.borderInlineEndRadius,borderStartWidth:oe.borderInlineStartWidth,borderEndWidth:oe.borderInlineEndWidth,borderStartColor:oe.borderInlineStartColor,borderEndColor:oe.borderInlineEndColor,borderStartStyle:oe.borderInlineStartStyle,borderEndStyle:oe.borderInlineEndStyle});var ae={color:re.colors("color"),textColor:re.colors("color"),fill:re.colors("fill"),stroke:re.colors("stroke")},se={boxShadow:re.shadows("boxShadow"),mixBlendMode:!0,blendMode:re.prop("mixBlendMode"),backgroundBlendMode:!0,bgBlendMode:re.prop("backgroundBlendMode"),opacity:!0};Object.assign(se,{shadow:se.boxShadow});var le={filter:{transform:ne.filter},blur:re.blur("--chakra-blur"),brightness:re.propT("--chakra-brightness",ne.brightness),contrast:re.propT("--chakra-contrast",ne.contrast),hueRotate:re.propT("--chakra-hue-rotate",ne.hueRotate),invert:re.propT("--chakra-invert",ne.invert),saturate:re.propT("--chakra-saturate",ne.saturate),dropShadow:re.propT("--chakra-drop-shadow",ne.dropShadow),backdropFilter:{transform:ne.backdropFilter},backdropBlur:re.blur("--chakra-backdrop-blur"),backdropBrightness:re.propT("--chakra-backdrop-brightness",ne.brightness),backdropContrast:re.propT("--chakra-backdrop-contrast",ne.contrast),backdropHueRotate:re.propT("--chakra-backdrop-hue-rotate",ne.hueRotate),backdropInvert:re.propT("--chakra-backdrop-invert",ne.invert),backdropSaturate:re.propT("--chakra-backdrop-saturate",ne.saturate)},ce={alignItems:!0,alignContent:!0,justifyItems:!0,justifyContent:!0,flexWrap:!0,flexDirection:{transform:ne.flexDirection},flex:!0,flexFlow:!0,flexGrow:!0,flexShrink:!0,flexBasis:re.sizes("flexBasis"),justifySelf:!0,alignSelf:!0,order:!0,placeItems:!0,placeContent:!0,placeSelf:!0,gap:re.space("gap"),rowGap:re.space("rowGap"),columnGap:re.space("columnGap")};Object.assign(ce,{flexDir:ce.flexDirection});var ue={gridGap:re.space("gridGap"),gridColumnGap:re.space("gridColumnGap"),gridRowGap:re.space("gridRowGap"),gridColumn:!0,gridRow:!0,gridAutoFlow:!0,gridAutoColumns:!0,gridColumnStart:!0,gridColumnEnd:!0,gridRowStart:!0,gridRowEnd:!0,gridAutoRows:!0,gridTemplate:!0,gridTemplateColumns:!0,gridTemplateRows:!0,gridTemplateAreas:!0,gridArea:!0},he={appearance:!0,cursor:!0,resize:!0,userSelect:!0,pointerEvents:!0,outline:{transform:ne.outline},outlineOffset:!0,outlineColor:re.colors("outlineColor")},de={width:re.sizesT("width"),inlineSize:re.sizesT("inlineSize"),height:re.sizes("height"),blockSize:re.sizes("blockSize"),boxSize:re.sizes(["width","height"]),minWidth:re.sizes("minWidth"),minInlineSize:re.sizes("minInlineSize"),minHeight:re.sizes("minHeight"),minBlockSize:re.sizes("minBlockSize"),maxWidth:re.sizes("maxWidth"),maxInlineSize:re.sizes("maxInlineSize"),maxHeight:re.sizes("maxHeight"),maxBlockSize:re.sizes("maxBlockSize"),overflow:!0,overflowX:!0,overflowY:!0,overscrollBehavior:!0,overscrollBehaviorX:!0,overscrollBehaviorY:!0,display:!0,aspectRatio:!0,hideFrom:{scale:"breakpoints",transform:(t,e)=>{var n,r,i;const o=null!=(i=null==(r=null==(n=e.__breakpoints)?void 0:n.get(t))?void 0:r.minW)?i:t,a="@media screen and (min-width: ".concat(o,")");return{[a]:{display:"none"}}}},hideBelow:{scale:"breakpoints",transform:(t,e)=>{var n,r,i;const o=null!=(i=null==(r=null==(n=e.__breakpoints)?void 0:n.get(t))?void 0:r._minW)?i:t,a="@media screen and (max-width: ".concat(o,")");return{[a]:{display:"none"}}}},verticalAlign:!0,boxSizing:!0,boxDecorationBreak:!0,float:re.propT("float",ne.float),objectFit:!0,objectPosition:!0,visibility:!0,isolation:!0};Object.assign(de,{w:de.width,h:de.height,minW:de.minWidth,maxW:de.maxWidth,minH:de.minHeight,maxH:de.maxHeight,overscroll:de.overscrollBehavior,overscrollX:de.overscrollBehaviorX,overscrollY:de.overscrollBehaviorY});var fe={listStyleType:!0,listStylePosition:!0,listStylePos:re.prop("listStylePosition"),listStyleImage:!0,listStyleImg:re.prop("listStyleImage")};var pe=(t=>{const e=new WeakMap;return(n,r,i,o)=>{if("undefined"===typeof n)return t(n,r,i);e.has(n)||e.set(n,new Map);const a=e.get(n);if(a.has(r))return a.get(r);const s=t(n,r,i,o);return a.set(r,s),s}})((function(t,e,n,r){const i="string"===typeof e?e.split("."):[e];for(r=0;r<i.length&&t;r+=1)t=t[i[r]];return void 0===t?n:t})),me={border:"0px",clip:"rect(0, 0, 0, 0)",width:"1px",height:"1px",margin:"-1px",padding:"0px",overflow:"hidden",whiteSpace:"nowrap",position:"absolute"},ge={position:"static",width:"auto",height:"auto",clip:"auto",padding:"0",margin:"0",overflow:"visible",whiteSpace:"normal"},ye=(t,e,n)=>{const r={},i=pe(t,e,{});for(const o in i){o in n&&null!=n[o]||(r[o]=i[o])}return r},ve={srOnly:{transform:t=>!0===t?me:"focusable"===t?ge:{}},layerStyle:{processResult:!0,transform:(t,e,n)=>ye(e,"layerStyles.".concat(t),n)},textStyle:{processResult:!0,transform:(t,e,n)=>ye(e,"textStyles.".concat(t),n)},apply:{processResult:!0,transform:(t,e,n)=>ye(e,t,n)}},_e={position:!0,pos:re.prop("position"),zIndex:re.prop("zIndex","zIndices"),inset:re.spaceT("inset"),insetX:re.spaceT(["left","right"]),insetInline:re.spaceT("insetInline"),insetY:re.spaceT(["top","bottom"]),insetBlock:re.spaceT("insetBlock"),top:re.spaceT("top"),insetBlockStart:re.spaceT("insetBlockStart"),bottom:re.spaceT("bottom"),insetBlockEnd:re.spaceT("insetBlockEnd"),left:re.spaceT("left"),insetInlineStart:re.logical({scale:"space",property:{ltr:"left",rtl:"right"}}),right:re.spaceT("right"),insetInlineEnd:re.logical({scale:"space",property:{ltr:"right",rtl:"left"}})};Object.assign(_e,{insetStart:_e.insetInlineStart,insetEnd:_e.insetInlineEnd});var be={ring:{transform:ne.ring},ringColor:re.colors("--chakra-ring-color"),ringOffset:re.prop("--chakra-ring-offset-width"),ringOffsetColor:re.colors("--chakra-ring-offset-color"),ringInset:re.prop("--chakra-ring-inset")},xe={margin:re.spaceT("margin"),marginTop:re.spaceT("marginTop"),marginBlockStart:re.spaceT("marginBlockStart"),marginRight:re.spaceT("marginRight"),marginInlineEnd:re.spaceT("marginInlineEnd"),marginBottom:re.spaceT("marginBottom"),marginBlockEnd:re.spaceT("marginBlockEnd"),marginLeft:re.spaceT("marginLeft"),marginInlineStart:re.spaceT("marginInlineStart"),marginX:re.spaceT(["marginInlineStart","marginInlineEnd"]),marginInline:re.spaceT("marginInline"),marginY:re.spaceT(["marginTop","marginBottom"]),marginBlock:re.spaceT("marginBlock"),padding:re.space("padding"),paddingTop:re.space("paddingTop"),paddingBlockStart:re.space("paddingBlockStart"),paddingRight:re.space("paddingRight"),paddingBottom:re.space("paddingBottom"),paddingBlockEnd:re.space("paddingBlockEnd"),paddingLeft:re.space("paddingLeft"),paddingInlineStart:re.space("paddingInlineStart"),paddingInlineEnd:re.space("paddingInlineEnd"),paddingX:re.space(["paddingInlineStart","paddingInlineEnd"]),paddingInline:re.space("paddingInline"),paddingY:re.space(["paddingTop","paddingBottom"]),paddingBlock:re.space("paddingBlock")};Object.assign(xe,{m:xe.margin,mt:xe.marginTop,mr:xe.marginRight,me:xe.marginInlineEnd,marginEnd:xe.marginInlineEnd,mb:xe.marginBottom,ml:xe.marginLeft,ms:xe.marginInlineStart,marginStart:xe.marginInlineStart,mx:xe.marginX,my:xe.marginY,p:xe.padding,pt:xe.paddingTop,py:xe.paddingY,px:xe.paddingX,pb:xe.paddingBottom,pl:xe.paddingLeft,ps:xe.paddingInlineStart,paddingStart:xe.paddingInlineStart,pr:xe.paddingRight,pe:xe.paddingInlineEnd,paddingEnd:xe.paddingInlineEnd});var we={textDecorationColor:re.colors("textDecorationColor"),textDecoration:!0,textDecor:{property:"textDecoration"},textDecorationLine:!0,textDecorationStyle:!0,textDecorationThickness:!0,textUnderlineOffset:!0,textShadow:re.shadows("textShadow")},Se={clipPath:!0,transform:re.propT("transform",ne.transform),transformOrigin:!0,translateX:re.spaceT("--chakra-translate-x"),translateY:re.spaceT("--chakra-translate-y"),skewX:re.degreeT("--chakra-skew-x"),skewY:re.degreeT("--chakra-skew-y"),scaleX:re.prop("--chakra-scale-x"),scaleY:re.prop("--chakra-scale-y"),scale:re.prop(["--chakra-scale-x","--chakra-scale-y"]),rotate:re.degreeT("--chakra-rotate")},Ee={transition:!0,transitionDelay:!0,animation:!0,willChange:!0,transitionDuration:re.prop("transitionDuration","transition.duration"),transitionProperty:re.prop("transitionProperty","transition.property"),transitionTimingFunction:re.prop("transitionTimingFunction","transition.easing")},Te={fontFamily:re.prop("fontFamily","fonts"),fontSize:re.prop("fontSize","fontSizes",ne.px),fontWeight:re.prop("fontWeight","fontWeights"),lineHeight:re.prop("lineHeight","lineHeights"),letterSpacing:re.prop("letterSpacing","letterSpacings"),textAlign:!0,fontStyle:!0,textIndent:!0,wordBreak:!0,overflowWrap:!0,textOverflow:!0,textTransform:!0,whiteSpace:!0,isTruncated:{transform(t){if(!0===t)return{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"}}},noOfLines:{static:{overflow:"hidden",textOverflow:"ellipsis",display:"-webkit-box",WebkitBoxOrient:"vertical",WebkitLineClamp:"var(--chakra-line-clamp)"},property:"--chakra-line-clamp"}},Me={scrollBehavior:!0,scrollSnapAlign:!0,scrollSnapStop:!0,scrollSnapType:!0,scrollMargin:re.spaceT("scrollMargin"),scrollMarginTop:re.spaceT("scrollMarginTop"),scrollMarginBottom:re.spaceT("scrollMarginBottom"),scrollMarginLeft:re.spaceT("scrollMarginLeft"),scrollMarginRight:re.spaceT("scrollMarginRight"),scrollMarginX:re.spaceT(["scrollMarginLeft","scrollMarginRight"]),scrollMarginY:re.spaceT(["scrollMarginTop","scrollMarginBottom"]),scrollPadding:re.spaceT("scrollPadding"),scrollPaddingTop:re.spaceT("scrollPaddingTop"),scrollPaddingBottom:re.spaceT("scrollPaddingBottom"),scrollPaddingLeft:re.spaceT("scrollPaddingLeft"),scrollPaddingRight:re.spaceT("scrollPaddingRight"),scrollPaddingX:re.spaceT(["scrollPaddingLeft","scrollPaddingRight"]),scrollPaddingY:re.spaceT(["scrollPaddingTop","scrollPaddingBottom"])};function Ae(t){return It(t)&&t.reference?t.reference:String(t)}var Ce=function(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];return n.map(Ae).join(" ".concat(t," ")).replace(/calc/g,"")},Pe=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return"calc(".concat(Ce("+",...e),")")},ke=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return"calc(".concat(Ce("-",...e),")")},Ie=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return"calc(".concat(Ce("*",...e),")")},Oe=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return"calc(".concat(Ce("/",...e),")")},Le=t=>{const e=Ae(t);return null==e||Number.isNaN(parseFloat(e))?Ie(e,-1):String(e).startsWith("-")?String(e).slice(1):"-".concat(e)},je=Object.assign((t=>({add:function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return je(Pe(t,...n))},subtract:function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return je(ke(t,...n))},multiply:function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return je(Ie(t,...n))},divide:function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return je(Oe(t,...n))},negate:()=>je(Le(t)),toString:()=>t.toString()})),{add:Pe,subtract:ke,multiply:Ie,divide:Oe,negate:Le});function ze(t){const e=function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"-";return t.replace(/\s+/g,e)}(t.toString());return function(t){return t.replace(/[!-,/:-@[-^`{-~]/g,"\\$&")}(function(t){if(t.includes("\\."))return t;const e=!Number.isInteger(parseFloat(t.toString()));return e?t.replace(".","\\."):t}(e))}function Re(t,e){return"var(".concat(t).concat(e?", ".concat(e):"",")")}function De(t){return ze("--".concat(function(t){return[arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",t].filter(Boolean).join("-")}(t,arguments.length>1&&void 0!==arguments[1]?arguments[1]:"")))}function Be(t,e,n){const r=De(t,n);return{variable:r,reference:Re(r,e)}}function Fe(t){const e=null==t?0:t.length;return e?t[e-1]:void 0}function Ne(t){if(null==t)return t;const{unitless:e}=function(t){const e=parseFloat(t.toString()),n=t.toString().replace(String(e),"");return{unitless:!n,value:e,unit:n}}(t);return e||"number"===typeof t?"".concat(t,"px"):t}var Ue=(t,e)=>parseInt(t[1],10)>parseInt(e[1],10)?1:-1,Ve=t=>Object.fromEntries(Object.entries(t).sort(Ue));function We(t){const e=Ve(t);return Object.assign(Object.values(e),e)}function Ge(t){var e;if(!t)return t;t=null!=(e=Ne(t))?e:t;return"number"===typeof t?"".concat(t+-.02):t.replace(/(\d+\.?\d*)/u,(t=>"".concat(parseFloat(t)+-.02)))}function qe(t,e){const n=["@media screen"];return t&&n.push("and","(min-width: ".concat(Ne(t),")")),e&&n.push("and","(max-width: ".concat(Ne(e),")")),n.join(" ")}function He(t){var e;if(!t)return null;t.base=null!=(e=t.base)?e:"0px";const n=We(t),r=Object.entries(t).sort(Ue).map(((t,e,n)=>{let[r,i]=t;var o;let[,a]=null!=(o=n[e+1])?o:[];return a=parseFloat(a)>0?Ge(a):void 0,{_minW:Ge(i),breakpoint:r,minW:i,maxW:a,maxWQuery:qe(null,a),minWQuery:qe(i),minMaxQuery:qe(i,a)}})),i=function(t){const e=Object.keys(Ve(t));return new Set(e)}(t),o=Array.from(i.values());return{keys:i,normalized:n,isResponsive(t){const e=Object.keys(t);return e.length>0&&e.every((t=>i.has(t)))},asObject:Ve(t),asArray:We(t),details:r,get:t=>r.find((e=>e.breakpoint===t)),media:[null,...n.map((t=>qe(t))).slice(1)],toArrayValue(t){if(!It(t))throw new Error("toArrayValue: value must be an object");const e=o.map((e=>{var n;return null!=(n=t[e])?n:null}));for(;null===Fe(e);)e.pop();return e},toObjectValue(t){if(!Array.isArray(t))throw new Error("toObjectValue: value must be an array");return t.reduce(((t,e,n)=>{const r=o[n];return null!=r&&null!=e&&(t[r]=e),t}),{})}}}var Ze=(t,e)=>"".concat(t,":hover ").concat(e,", ").concat(t,"[data-hover] ").concat(e),Xe=(t,e)=>"".concat(t,":focus ").concat(e,", ").concat(t,"[data-focus] ").concat(e),Ye=(t,e)=>"".concat(t,":focus-visible ").concat(e),Ke=(t,e)=>"".concat(t,":focus-within ").concat(e),$e=(t,e)=>"".concat(t,":active ").concat(e,", ").concat(t,"[data-active] ").concat(e),Je=(t,e)=>"".concat(t,":disabled ").concat(e,", ").concat(t,"[data-disabled] ").concat(e),Qe=(t,e)=>"".concat(t,":invalid ").concat(e,", ").concat(t,"[data-invalid] ").concat(e),tn=(t,e)=>"".concat(t,":checked ").concat(e,", ").concat(t,"[data-checked] ").concat(e),en=(t,e)=>"".concat(t,":placeholder-shown ").concat(e),nn=t=>on((e=>t(e,"&")),"[role=group]","[data-group]",".group"),rn=t=>on((e=>t(e,"~ &")),"[data-peer]",".peer"),on=function(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];return n.map(t).join(", ")},an={_hover:"&:hover, &[data-hover]",_active:"&:active, &[data-active]",_focus:"&:focus, &[data-focus]",_highlighted:"&[data-highlighted]",_focusWithin:"&:focus-within",_focusVisible:"&:focus-visible, &[data-focus-visible]",_disabled:"&:disabled, &[disabled], &[aria-disabled=true], &[data-disabled]",_readOnly:"&[aria-readonly=true], &[readonly], &[data-readonly]",_before:"&::before",_after:"&::after",_empty:"&:empty",_expanded:"&[aria-expanded=true], &[data-expanded]",_checked:"&[aria-checked=true], &[data-checked]",_grabbed:"&[aria-grabbed=true], &[data-grabbed]",_pressed:"&[aria-pressed=true], &[data-pressed]",_invalid:"&[aria-invalid=true], &[data-invalid]",_valid:"&[data-valid], &[data-state=valid]",_loading:"&[data-loading], &[aria-busy=true]",_selected:"&[aria-selected=true], &[data-selected]",_hidden:"&[hidden], &[data-hidden]",_autofill:"&:-webkit-autofill",_even:"&:nth-of-type(even)",_odd:"&:nth-of-type(odd)",_first:"&:first-of-type",_firstLetter:"&::first-letter",_last:"&:last-of-type",_notFirst:"&:not(:first-of-type)",_notLast:"&:not(:last-of-type)",_visited:"&:visited",_activeLink:"&[aria-current=page]",_activeStep:"&[aria-current=step]",_indeterminate:"&:indeterminate, &[aria-checked=mixed], &[data-indeterminate]",_groupHover:nn(Ze),_peerHover:rn(Ze),_groupFocus:nn(Xe),_peerFocus:rn(Xe),_groupFocusVisible:nn(Ye),_peerFocusVisible:rn(Ye),_groupActive:nn($e),_peerActive:rn($e),_groupDisabled:nn(Je),_peerDisabled:rn(Je),_groupInvalid:nn(Qe),_peerInvalid:rn(Qe),_groupChecked:nn(tn),_peerChecked:rn(tn),_groupFocusWithin:nn(Ke),_peerFocusWithin:rn(Ke),_peerPlaceholderShown:rn(en),_placeholder:"&::placeholder",_placeholderShown:"&:placeholder-shown",_fullScreen:"&:fullscreen",_selection:"&::selection",_rtl:"[dir=rtl] &, &[dir=rtl]",_ltr:"[dir=ltr] &, &[dir=ltr]",_mediaDark:"@media (prefers-color-scheme: dark)",_mediaReduceMotion:"@media (prefers-reduced-motion: reduce)",_dark:".chakra-ui-dark &:not([data-theme]),[data-theme=dark] &:not([data-theme]),&[data-theme=dark]",_light:".chakra-ui-light &:not([data-theme]),[data-theme=light] &:not([data-theme]),&[data-theme=light]",_horizontal:"&[data-orientation=horizontal]",_vertical:"&[data-orientation=vertical]"},sn=Object.keys(an);function ln(t,e){return Be(String(t).replace(/\./g,"-"),void 0,e)}function cn(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const{stop:r,getKey:i}=n;return function t(n){let o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];var a;if(function(t){return"object"===typeof t&&null!=t&&!Array.isArray(t)}(n)||Array.isArray(n)){const s={};for(const[l,c]of Object.entries(n)){const u=null!=(a=null==i?void 0:i(l))?a:l,h=[...o,u];if(null==r?void 0:r(n,h))return e(n,o);s[u]=t(c,h)}return s}return e(n,o)}(t)}var un=["colors","borders","borderWidths","borderStyles","fonts","fontSizes","fontWeights","gradients","letterSpacings","lineHeights","radii","space","shadows","sizes","zIndices","transition","blur","breakpoints"];var hn=t=>sn.includes(t)||"default"===t;function dn(t){var e;const n=function(t){const{__cssMap:e,__cssVars:n,__breakpoints:r,...i}=t;return i}(t),r=function(t){return function(t,e){const n={};for(const r of e)r in t&&(n[r]=t[r]);return n}(t,un)}(n),i=function(t){return t.semanticTokens}(n),o=function(t){let{tokens:e,semanticTokens:n}=t;const r={};return cn(e,((t,e)=>{null!=t&&(r[e.join(".")]={isSemantic:!1,value:t})})),cn(n,((t,e)=>{null!=t&&(r[e.join(".")]={isSemantic:!0,value:t})}),{stop:t=>Object.keys(t).every(hn)}),r}({tokens:r,semanticTokens:i}),a=null==(e=n.config)?void 0:e.cssVarPrefix,{cssMap:s,cssVars:l}=function(t,e){let n={};const r={};for(const[i,o]of Object.entries(t)){const{isSemantic:a,value:s}=o,{variable:l,reference:c}=ln(i,null==e?void 0:e.cssVarPrefix);if(!a){if(i.startsWith("space")){const t=i.split("."),[e,...n]=t,o="".concat(e,".-").concat(n.join(".")),a=je.negate(s),u=je.negate(c);r[o]={value:a,var:l,varRef:u}}n[l]=s,r[i]={value:s,var:l,varRef:c};continue}const u=n=>{const r=[String(i).split(".")[0],n].join(".");if(!t[r])return n;const{reference:o}=ln(r,null==e?void 0:e.cssVarPrefix);return o},h=It(s)?s:{default:s};n=Ft(n,Object.entries(h).reduce(((t,e)=>{let[n,r]=e;var i,o;if(!r)return t;const a=u("".concat(r));return"default"===n?(t[l]=a,t):(t[null!=(o=null==(i=an)?void 0:i[n])?o:n]={[l]:a},t)}),{})),r[i]={value:c,var:l,varRef:c}}return{cssVars:n,cssMap:r}}(o,{cssVarPrefix:a});return Object.assign(n,{__cssVars:{"--chakra-ring-inset":"var(--chakra-empty,/*!*/ /*!*/)","--chakra-ring-offset-width":"0px","--chakra-ring-offset-color":"#fff","--chakra-ring-color":"rgba(66, 153, 225, 0.6)","--chakra-ring-offset-shadow":"0 0 #0000","--chakra-ring-shadow":"0 0 #0000","--chakra-space-x-reverse":"0","--chakra-space-y-reverse":"0",...l},__cssMap:s,__breakpoints:He(n.breakpoints)}),n}var fn=Ft({},ie,oe,ae,ce,de,le,be,he,ue,ve,_e,se,xe,Me,Te,we,Se,fe,Ee),pn=Object.assign({},xe,de,ce,ue,_e),mn=Object.keys(pn),gn=[...Object.keys(fn),...sn],yn={...fn,...an},vn=t=>t in yn;var _n=(t,e)=>t.startsWith("--")&&"string"===typeof e&&!function(t){return/^var\(--.+\)$/.test(t)}(e),bn=(t,e)=>{var n,r;if(null==e)return e;const i=e=>{var n,r;return null==(r=null==(n=t.__cssMap)?void 0:n[e])?void 0:r.varRef},o=t=>{var e;return null!=(e=i(t))?e:t},[a,s]=function(t){const e=[];let n="",r=!1;for(let i=0;i<t.length;i++){const o=t[i];"("===o?(r=!0,n+=o):")"===o?(r=!1,n+=o):","!==o||r?n+=o:(e.push(n),n="")}return n=n.trim(),n&&e.push(n),e}(e);return e=null!=(r=null!=(n=i(a))?n:o(s))?r:o(e)};function xn(t){const{configs:e={},pseudos:n={},theme:r}=t,i=function(t){let o=arguments.length>1&&void 0!==arguments[1]&&arguments[1];var a,s,l;const c=Lt(t,r),u=(t=>e=>{if(!e.__breakpoints)return t;const{isResponsive:n,toArrayValue:r,media:i}=e.__breakpoints,o={};for(const a in t){let s=Lt(t[a],e);if(null==s)continue;if(s=It(s)&&n(s)?r(s):s,!Array.isArray(s)){o[a]=s;continue}const l=s.slice(0,i.length).length;for(let t=0;t<l;t+=1){const e=null==i?void 0:i[t];e?(o[e]=o[e]||{},null!=s[t]&&(o[e][a]=s[t])):o[a]=s[t]}}return o})(c)(r);let h={};for(let d in u){let t=Lt(u[d],r);d in n&&(d=n[d]),_n(d,t)&&(t=bn(r,t));let f=e[d];if(!0===f&&(f={property:d}),It(t)){h[d]=null!=(a=h[d])?a:{},h[d]=Ft({},h[d],i(t,!0));continue}let p=null!=(l=null==(s=null==f?void 0:f.transform)?void 0:s.call(f,t,r,c))?l:t;p=(null==f?void 0:f.processResult)?i(p,!0):p;const m=Lt(null==f?void 0:f.property,r);if(!o&&(null==f?void 0:f.static)){const t=Lt(f.static,r);h=Ft({},h,t)}if(m&&Array.isArray(m))for(const e of m)h[e]=p;else m?"&"===m&&It(p)?h=Ft({},h,p):h[m]=p:It(p)?h=Ft({},h,p):h[d]=p}return h};return i}var wn=t=>e=>xn({theme:e,pseudos:an,configs:fn})(t);function Sn(t){return{definePartsStyle:t=>t,defineMultiStyleConfig:e=>({parts:t,...e})}}function En(t,e){for(let n=e+1;n<t.length;n++)if(null!=t[n])return n;return-1}function Tn(t){const e=t.__breakpoints;return function(t,n,r,i){var o,a;if(!e)return;const s={},l=function(t,e){return Array.isArray(t)?t:It(t)?e(t):null!=t?[t]:void 0}(r,e.toArrayValue);if(!l)return s;const c=l.length,u=1===c,h=!!t.parts;for(let d=0;d<c;d++){const r=e.details[d],c=e.details[En(l,d)],f=qe(r.minW,null==c?void 0:c._minW),p=Lt(null==(o=t[n])?void 0:o[l[d]],i);p&&(h?null==(a=t.parts)||a.forEach((t=>{Ft(s,{[t]:u?p[t]:{[f]:p[t]}})})):h?s[f]=p:u?Ft(s,p):s[f]=p)}return s}}function Mn(t){return function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];const n=Object.assign({},t);for(const r of e)r in n&&delete n[r];return n}(t,["styleConfig","size","variant","colorScheme"])}var An=new Set([...gn,"textStyle","layerStyle","apply","noOfLines","focusBorderColor","errorBorderColor","as","__css","css","sx"]),Cn=new Set(["htmlWidth","htmlHeight","htmlSize","htmlTranslate"]);function Pn(t){return Cn.has(t)||!An.has(t)}var kn=(0,r.createContext)({});function In(){const t=(0,r.useContext)(kn);if(void 0===t)throw new Error("useColorMode must be used within a ColorModeProvider");return t}kn.displayName="ColorModeContext";var On=(t=>{const e=new WeakMap;return(n,r,i,o)=>{if("undefined"===typeof n)return t(n,r,i);e.has(n)||e.set(n,new Map);const a=e.get(n);if(a.has(r))return a.get(r);const s=t(n,r,i,o);return a.set(r,s),s}})((function(t,e,n,r){const i="string"===typeof e?e.split("."):[e];for(r=0;r<i.length&&t;r+=1)t=t[i[r]];return void 0===t?n:t}));function Ln(t,e){const n={};return Object.keys(t).forEach((r=>{const i=t[r];e(i,r,t)&&(n[r]=i)})),n}var jn=t=>Ln(t,(t=>null!==t&&void 0!==t));function zn(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];return function(t){return"function"===typeof t}(t)?t(...n):t}function Rn(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return function(t){e.some((e=>(null==e||e(t),null==t?void 0:t.defaultPrevented)))}}function Dn(){return Dn=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Dn.apply(null,arguments)}function Bn(t){var e=Object.create(null);return function(n){return void 0===e[n]&&(e[n]=t(n)),e[n]}}var Fn=/^((children|dangerouslySetInnerHTML|key|ref|autoFocus|defaultValue|defaultChecked|innerHTML|suppressContentEditableWarning|suppressHydrationWarning|valueLink|abbr|accept|acceptCharset|accessKey|action|allow|allowUserMedia|allowPaymentRequest|allowFullScreen|allowTransparency|alt|async|autoComplete|autoPlay|capture|cellPadding|cellSpacing|challenge|charSet|checked|cite|classID|className|cols|colSpan|content|contentEditable|contextMenu|controls|controlsList|coords|crossOrigin|data|dateTime|decoding|default|defer|dir|disabled|disablePictureInPicture|disableRemotePlayback|download|draggable|encType|enterKeyHint|form|formAction|formEncType|formMethod|formNoValidate|formTarget|frameBorder|headers|height|hidden|high|href|hrefLang|htmlFor|httpEquiv|id|inputMode|integrity|is|keyParams|keyType|kind|label|lang|list|loading|loop|low|marginHeight|marginWidth|max|maxLength|media|mediaGroup|method|min|minLength|multiple|muted|name|nonce|noValidate|open|optimum|pattern|placeholder|playsInline|poster|preload|profile|radioGroup|readOnly|referrerPolicy|rel|required|reversed|role|rows|rowSpan|sandbox|scope|scoped|scrolling|seamless|selected|shape|size|sizes|slot|span|spellCheck|src|srcDoc|srcLang|srcSet|start|step|style|summary|tabIndex|target|title|translate|type|useMap|value|width|wmode|wrap|about|datatype|inlist|prefix|property|resource|typeof|vocab|autoCapitalize|autoCorrect|autoSave|color|incremental|fallback|inert|itemProp|itemScope|itemType|itemID|itemRef|on|option|results|security|unselectable|accentHeight|accumulate|additive|alignmentBaseline|allowReorder|alphabetic|amplitude|arabicForm|ascent|attributeName|attributeType|autoReverse|azimuth|baseFrequency|baselineShift|baseProfile|bbox|begin|bias|by|calcMode|capHeight|clip|clipPathUnits|clipPath|clipRule|colorInterpolation|colorInterpolationFilters|colorProfile|colorRendering|contentScriptType|contentStyleType|cursor|cx|cy|d|decelerate|descent|diffuseConstant|direction|display|divisor|dominantBaseline|dur|dx|dy|edgeMode|elevation|enableBackground|end|exponent|externalResourcesRequired|fill|fillOpacity|fillRule|filter|filterRes|filterUnits|floodColor|floodOpacity|focusable|fontFamily|fontSize|fontSizeAdjust|fontStretch|fontStyle|fontVariant|fontWeight|format|from|fr|fx|fy|g1|g2|glyphName|glyphOrientationHorizontal|glyphOrientationVertical|glyphRef|gradientTransform|gradientUnits|hanging|horizAdvX|horizOriginX|ideographic|imageRendering|in|in2|intercept|k|k1|k2|k3|k4|kernelMatrix|kernelUnitLength|kerning|keyPoints|keySplines|keyTimes|lengthAdjust|letterSpacing|lightingColor|limitingConeAngle|local|markerEnd|markerMid|markerStart|markerHeight|markerUnits|markerWidth|mask|maskContentUnits|maskUnits|mathematical|mode|numOctaves|offset|opacity|operator|order|orient|orientation|origin|overflow|overlinePosition|overlineThickness|panose1|paintOrder|pathLength|patternContentUnits|patternTransform|patternUnits|pointerEvents|points|pointsAtX|pointsAtY|pointsAtZ|preserveAlpha|preserveAspectRatio|primitiveUnits|r|radius|refX|refY|renderingIntent|repeatCount|repeatDur|requiredExtensions|requiredFeatures|restart|result|rotate|rx|ry|scale|seed|shapeRendering|slope|spacing|specularConstant|specularExponent|speed|spreadMethod|startOffset|stdDeviation|stemh|stemv|stitchTiles|stopColor|stopOpacity|strikethroughPosition|strikethroughThickness|string|stroke|strokeDasharray|strokeDashoffset|strokeLinecap|strokeLinejoin|strokeMiterlimit|strokeOpacity|strokeWidth|surfaceScale|systemLanguage|tableValues|targetX|targetY|textAnchor|textDecoration|textRendering|textLength|to|transform|u1|u2|underlinePosition|underlineThickness|unicode|unicodeBidi|unicodeRange|unitsPerEm|vAlphabetic|vHanging|vIdeographic|vMathematical|values|vectorEffect|version|vertAdvY|vertOriginX|vertOriginY|viewBox|viewTarget|visibility|widths|wordSpacing|writingMode|x|xHeight|x1|x2|xChannelSelector|xlinkActuate|xlinkArcrole|xlinkHref|xlinkRole|xlinkShow|xlinkTitle|xlinkType|xmlBase|xmlns|xmlnsXlink|xmlLang|xmlSpace|y|y1|y2|yChannelSelector|z|zoomAndPan|for|class|autofocus)|(([Dd][Aa][Tt][Aa]|[Aa][Rr][Ii][Aa]|x)-.*))$/,Nn=Bn((function(t){return Fn.test(t)||111===t.charCodeAt(0)&&110===t.charCodeAt(1)&&t.charCodeAt(2)<91}));var Un=function(){function t(t){var e=this;this._insertTag=function(t){var n;n=0===e.tags.length?e.insertionPoint?e.insertionPoint.nextSibling:e.prepend?e.container.firstChild:e.before:e.tags[e.tags.length-1].nextSibling,e.container.insertBefore(t,n),e.tags.push(t)},this.isSpeedy=void 0===t.speedy||t.speedy,this.tags=[],this.ctr=0,this.nonce=t.nonce,this.key=t.key,this.container=t.container,this.prepend=t.prepend,this.insertionPoint=t.insertionPoint,this.before=null}var e=t.prototype;return e.hydrate=function(t){t.forEach(this._insertTag)},e.insert=function(t){this.ctr%(this.isSpeedy?65e3:1)===0&&this._insertTag(function(t){var e=document.createElement("style");return e.setAttribute("data-emotion",t.key),void 0!==t.nonce&&e.setAttribute("nonce",t.nonce),e.appendChild(document.createTextNode("")),e.setAttribute("data-s",""),e}(this));var e=this.tags[this.tags.length-1];if(this.isSpeedy){var n=function(t){if(t.sheet)return t.sheet;for(var e=0;e<document.styleSheets.length;e++)if(document.styleSheets[e].ownerNode===t)return document.styleSheets[e]}(e);try{n.insertRule(t,n.cssRules.length)}catch(pbt){0}}else e.appendChild(document.createTextNode(t));this.ctr++},e.flush=function(){this.tags.forEach((function(t){return t.parentNode&&t.parentNode.removeChild(t)})),this.tags=[],this.ctr=0},t}(),Vn=Math.abs,Wn=String.fromCharCode,Gn=Object.assign;function qn(t){return t.trim()}function Hn(t,e,n){return t.replace(e,n)}function Zn(t,e){return t.indexOf(e)}function Xn(t,e){return 0|t.charCodeAt(e)}function Yn(t,e,n){return t.slice(e,n)}function Kn(t){return t.length}function $n(t){return t.length}function Jn(t,e){return e.push(t),t}var Qn=1,tr=1,er=0,nr=0,rr=0,ir="";function or(t,e,n,r,i,o,a){return{value:t,root:e,parent:n,type:r,props:i,children:o,line:Qn,column:tr,length:a,return:""}}function ar(t,e){return Gn(or("",null,null,"",null,null,0),t,{length:-t.length},e)}function sr(){return rr=nr>0?Xn(ir,--nr):0,tr--,10===rr&&(tr=1,Qn--),rr}function lr(){return rr=nr<er?Xn(ir,nr++):0,tr++,10===rr&&(tr=1,Qn++),rr}function cr(){return Xn(ir,nr)}function ur(){return nr}function hr(t,e){return Yn(ir,t,e)}function dr(t){switch(t){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function fr(t){return Qn=tr=1,er=Kn(ir=t),nr=0,[]}function pr(t){return ir="",t}function mr(t){return qn(hr(nr-1,vr(91===t?t+2:40===t?t+1:t)))}function gr(t){for(;(rr=cr())&&rr<33;)lr();return dr(t)>2||dr(rr)>3?"":" "}function yr(t,e){for(;--e&&lr()&&!(rr<48||rr>102||rr>57&&rr<65||rr>70&&rr<97););return hr(t,ur()+(e<6&&32==cr()&&32==lr()))}function vr(t){for(;lr();)switch(rr){case t:return nr;case 34:case 39:34!==t&&39!==t&&vr(rr);break;case 40:41===t&&vr(t);break;case 92:lr()}return nr}function _r(t,e){for(;lr()&&t+rr!==57&&(t+rr!==84||47!==cr()););return"/*"+hr(e,nr-1)+"*"+Wn(47===t?t:lr())}function br(t){for(;!dr(cr());)lr();return hr(t,nr)}var xr="-ms-",wr="-moz-",Sr="-webkit-",Er="comm",Tr="rule",Mr="decl",Ar="@keyframes";function Cr(t,e){for(var n="",r=$n(t),i=0;i<r;i++)n+=e(t[i],i,t,e)||"";return n}function Pr(t,e,n,r){switch(t.type){case"@layer":if(t.children.length)break;case"@import":case Mr:return t.return=t.return||t.value;case Er:return"";case Ar:return t.return=t.value+"{"+Cr(t.children,r)+"}";case Tr:t.value=t.props.join(",")}return Kn(n=Cr(t.children,r))?t.return=t.value+"{"+n+"}":""}function kr(t){return pr(Ir("",null,null,null,[""],t=fr(t),0,[0],t))}function Ir(t,e,n,r,i,o,a,s,l){for(var c=0,u=0,h=a,d=0,f=0,p=0,m=1,g=1,y=1,v=0,_="",b=i,x=o,w=r,S=_;g;)switch(p=v,v=lr()){case 40:if(108!=p&&58==Xn(S,h-1)){-1!=Zn(S+=Hn(mr(v),"&","&\f"),"&\f")&&(y=-1);break}case 34:case 39:case 91:S+=mr(v);break;case 9:case 10:case 13:case 32:S+=gr(p);break;case 92:S+=yr(ur()-1,7);continue;case 47:switch(cr()){case 42:case 47:Jn(Lr(_r(lr(),ur()),e,n),l);break;default:S+="/"}break;case 123*m:s[c++]=Kn(S)*y;case 125*m:case 59:case 0:switch(v){case 0:case 125:g=0;case 59+u:-1==y&&(S=Hn(S,/\f/g,"")),f>0&&Kn(S)-h&&Jn(f>32?jr(S+";",r,n,h-1):jr(Hn(S," ","")+";",r,n,h-2),l);break;case 59:S+=";";default:if(Jn(w=Or(S,e,n,c,u,i,s,_,b=[],x=[],h),o),123===v)if(0===u)Ir(S,e,w,w,b,o,h,s,x);else switch(99===d&&110===Xn(S,3)?100:d){case 100:case 108:case 109:case 115:Ir(t,w,w,r&&Jn(Or(t,w,w,0,0,i,s,_,i,b=[],h),x),i,x,h,s,r?b:x);break;default:Ir(S,w,w,w,[""],x,0,s,x)}}c=u=f=0,m=y=1,_=S="",h=a;break;case 58:h=1+Kn(S),f=p;default:if(m<1)if(123==v)--m;else if(125==v&&0==m++&&125==sr())continue;switch(S+=Wn(v),v*m){case 38:y=u>0?1:(S+="\f",-1);break;case 44:s[c++]=(Kn(S)-1)*y,y=1;break;case 64:45===cr()&&(S+=mr(lr())),d=cr(),u=h=Kn(_=S+=br(ur())),v++;break;case 45:45===p&&2==Kn(S)&&(m=0)}}return o}function Or(t,e,n,r,i,o,a,s,l,c,u){for(var h=i-1,d=0===i?o:[""],f=$n(d),p=0,m=0,g=0;p<r;++p)for(var y=0,v=Yn(t,h+1,h=Vn(m=a[p])),_=t;y<f;++y)(_=qn(m>0?d[y]+" "+v:Hn(v,/&\f/g,d[y])))&&(l[g++]=_);return or(t,e,n,0===i?Tr:s,l,c,u)}function Lr(t,e,n){return or(t,e,n,Er,Wn(rr),Yn(t,2,-2),0)}function jr(t,e,n,r){return or(t,e,n,Mr,Yn(t,0,r),Yn(t,r+1,-1),r)}var zr=function(t,e,n){for(var r=0,i=0;r=i,i=cr(),38===r&&12===i&&(e[n]=1),!dr(i);)lr();return hr(t,nr)},Rr=function(t,e){return pr(function(t,e){var n=-1,r=44;do{switch(dr(r)){case 0:38===r&&12===cr()&&(e[n]=1),t[n]+=zr(nr-1,e,n);break;case 2:t[n]+=mr(r);break;case 4:if(44===r){t[++n]=58===cr()?"&\f":"",e[n]=t[n].length;break}default:t[n]+=Wn(r)}}while(r=lr());return t}(fr(t),e))},Dr=new WeakMap,Br=function(t){if("rule"===t.type&&t.parent&&!(t.length<1)){for(var e=t.value,n=t.parent,r=t.column===n.column&&t.line===n.line;"rule"!==n.type;)if(!(n=n.parent))return;if((1!==t.props.length||58===e.charCodeAt(0)||Dr.get(n))&&!r){Dr.set(t,!0);for(var i=[],o=Rr(e,i),a=n.props,s=0,l=0;s<o.length;s++)for(var c=0;c<a.length;c++,l++)t.props[l]=i[s]?o[s].replace(/&\f/g,a[c]):a[c]+" "+o[s]}}},Fr=function(t){if("decl"===t.type){var e=t.value;108===e.charCodeAt(0)&&98===e.charCodeAt(2)&&(t.return="",t.value="")}};function Nr(t,e){switch(function(t,e){return 45^Xn(t,0)?(((e<<2^Xn(t,0))<<2^Xn(t,1))<<2^Xn(t,2))<<2^Xn(t,3):0}(t,e)){case 5103:return Sr+"print-"+t+t;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return Sr+t+t;case 5349:case 4246:case 4810:case 6968:case 2756:return Sr+t+wr+t+xr+t+t;case 6828:case 4268:return Sr+t+xr+t+t;case 6165:return Sr+t+xr+"flex-"+t+t;case 5187:return Sr+t+Hn(t,/(\w+).+(:[^]+)/,Sr+"box-$1$2"+xr+"flex-$1$2")+t;case 5443:return Sr+t+xr+"flex-item-"+Hn(t,/flex-|-self/,"")+t;case 4675:return Sr+t+xr+"flex-line-pack"+Hn(t,/align-content|flex-|-self/,"")+t;case 5548:return Sr+t+xr+Hn(t,"shrink","negative")+t;case 5292:return Sr+t+xr+Hn(t,"basis","preferred-size")+t;case 6060:return Sr+"box-"+Hn(t,"-grow","")+Sr+t+xr+Hn(t,"grow","positive")+t;case 4554:return Sr+Hn(t,/([^-])(transform)/g,"$1"+Sr+"$2")+t;case 6187:return Hn(Hn(Hn(t,/(zoom-|grab)/,Sr+"$1"),/(image-set)/,Sr+"$1"),t,"")+t;case 5495:case 3959:return Hn(t,/(image-set\([^]*)/,Sr+"$1$`$1");case 4968:return Hn(Hn(t,/(.+:)(flex-)?(.*)/,Sr+"box-pack:$3"+xr+"flex-pack:$3"),/s.+-b[^;]+/,"justify")+Sr+t+t;case 4095:case 3583:case 4068:case 2532:return Hn(t,/(.+)-inline(.+)/,Sr+"$1$2")+t;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(Kn(t)-1-e>6)switch(Xn(t,e+1)){case 109:if(45!==Xn(t,e+4))break;case 102:return Hn(t,/(.+:)(.+)-([^]+)/,"$1"+Sr+"$2-$3$1"+wr+(108==Xn(t,e+3)?"$3":"$2-$3"))+t;case 115:return~Zn(t,"stretch")?Nr(Hn(t,"stretch","fill-available"),e)+t:t}break;case 4949:if(115!==Xn(t,e+1))break;case 6444:switch(Xn(t,Kn(t)-3-(~Zn(t,"!important")&&10))){case 107:return Hn(t,":",":"+Sr)+t;case 101:return Hn(t,/(.+:)([^;!]+)(;|!.+)?/,"$1"+Sr+(45===Xn(t,14)?"inline-":"")+"box$3$1"+Sr+"$2$3$1"+xr+"$2box$3")+t}break;case 5936:switch(Xn(t,e+11)){case 114:return Sr+t+xr+Hn(t,/[svh]\w+-[tblr]{2}/,"tb")+t;case 108:return Sr+t+xr+Hn(t,/[svh]\w+-[tblr]{2}/,"tb-rl")+t;case 45:return Sr+t+xr+Hn(t,/[svh]\w+-[tblr]{2}/,"lr")+t}return Sr+t+xr+t+t}return t}var Ur=[function(t,e,n,r){if(t.length>-1&&!t.return)switch(t.type){case Mr:t.return=Nr(t.value,t.length);break;case Ar:return Cr([ar(t,{value:Hn(t.value,"@","@"+Sr)})],r);case Tr:if(t.length)return function(t,e){return t.map(e).join("")}(t.props,(function(e){switch(function(t,e){return(t=e.exec(t))?t[0]:t}(e,/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":return Cr([ar(t,{props:[Hn(e,/:(read-\w+)/,":-moz-$1")]})],r);case"::placeholder":return Cr([ar(t,{props:[Hn(e,/:(plac\w+)/,":"+Sr+"input-$1")]}),ar(t,{props:[Hn(e,/:(plac\w+)/,":-moz-$1")]}),ar(t,{props:[Hn(e,/:(plac\w+)/,xr+"input-$1")]})],r)}return""}))}}],Vr=function(t){var e=t.key;if("css"===e){var n=document.querySelectorAll("style[data-emotion]:not([data-s])");Array.prototype.forEach.call(n,(function(t){-1!==t.getAttribute("data-emotion").indexOf(" ")&&(document.head.appendChild(t),t.setAttribute("data-s",""))}))}var r=t.stylisPlugins||Ur;var i,o,a={},s=[];i=t.container||document.head,Array.prototype.forEach.call(document.querySelectorAll('style[data-emotion^="'+e+' "]'),(function(t){for(var e=t.getAttribute("data-emotion").split(" "),n=1;n<e.length;n++)a[e[n]]=!0;s.push(t)}));var l,c,u=[Pr,(c=function(t){l.insert(t)},function(t){t.root||(t=t.return)&&c(t)})],h=function(t){var e=$n(t);return function(n,r,i,o){for(var a="",s=0;s<e;s++)a+=t[s](n,r,i,o)||"";return a}}([Br,Fr].concat(r,u));o=function(t,e,n,r){l=n,function(t){Cr(kr(t),h)}(t?t+"{"+e.styles+"}":e.styles),r&&(d.inserted[e.name]=!0)};var d={key:e,sheet:new Un({key:e,container:i,nonce:t.nonce,speedy:t.speedy,prepend:t.prepend,insertionPoint:t.insertionPoint}),nonce:t.nonce,inserted:a,registered:{},insert:o};return d.sheet.hydrate(s),d},Wr=function(t){var e=new WeakMap;return function(n){if(e.has(n))return e.get(n);var r=t(n);return e.set(n,r),r}};var Gr={animationIterationCount:1,aspectRatio:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},qr=/[A-Z]|^ms/g,Hr=/_EMO_([^_]+?)_([^]*?)_EMO_/g,Zr=function(t){return 45===t.charCodeAt(1)},Xr=function(t){return null!=t&&"boolean"!==typeof t},Yr=Bn((function(t){return Zr(t)?t:t.replace(qr,"-$&").toLowerCase()})),Kr=function(t,e){switch(t){case"animation":case"animationName":if("string"===typeof e)return e.replace(Hr,(function(t,e,n){return Jr={name:e,styles:n,next:Jr},e}))}return 1===Gr[t]||Zr(t)||"number"!==typeof e||0===e?e:e+"px"};function $r(t,e,n){if(null==n)return"";if(void 0!==n.__emotion_styles)return n;switch(typeof n){case"boolean":return"";case"object":if(1===n.anim)return Jr={name:n.name,styles:n.styles,next:Jr},n.name;if(void 0!==n.styles){var r=n.next;if(void 0!==r)for(;void 0!==r;)Jr={name:r.name,styles:r.styles,next:Jr},r=r.next;return n.styles+";"}return function(t,e,n){var r="";if(Array.isArray(n))for(var i=0;i<n.length;i++)r+=$r(t,e,n[i])+";";else for(var o in n){var a=n[o];if("object"!==typeof a)null!=e&&void 0!==e[a]?r+=o+"{"+e[a]+"}":Xr(a)&&(r+=Yr(o)+":"+Kr(o,a)+";");else if(!Array.isArray(a)||"string"!==typeof a[0]||null!=e&&void 0!==e[a[0]]){var s=$r(t,e,a);switch(o){case"animation":case"animationName":r+=Yr(o)+":"+s+";";break;default:r+=o+"{"+s+"}"}}else for(var l=0;l<a.length;l++)Xr(a[l])&&(r+=Yr(o)+":"+Kr(o,a[l])+";")}return r}(t,e,n);case"function":if(void 0!==t){var i=Jr,o=n(t);return Jr=i,$r(t,e,o)}}if(null==e)return n;var a=e[n];return void 0!==a?a:n}var Jr,Qr=/label:\s*([^\s;\n{]+)\s*(;|$)/g;var ti=function(t,e,n){if(1===t.length&&"object"===typeof t[0]&&null!==t[0]&&void 0!==t[0].styles)return t[0];var r=!0,i="";Jr=void 0;var o=t[0];null==o||void 0===o.raw?(r=!1,i+=$r(n,e,o)):i+=o[0];for(var a=1;a<t.length;a++)i+=$r(n,e,t[a]),r&&(i+=o[a]);Qr.lastIndex=0;for(var s,l="";null!==(s=Qr.exec(i));)l+="-"+s[1];var c=function(t){for(var e,n=0,r=0,i=t.length;i>=4;++r,i-=4)e=1540483477*(65535&(e=255&t.charCodeAt(r)|(255&t.charCodeAt(++r))<<8|(255&t.charCodeAt(++r))<<16|(255&t.charCodeAt(++r))<<24))+(59797*(e>>>16)<<16),n=1540483477*(65535&(e^=e>>>24))+(59797*(e>>>16)<<16)^1540483477*(65535&n)+(59797*(n>>>16)<<16);switch(i){case 3:n^=(255&t.charCodeAt(r+2))<<16;case 2:n^=(255&t.charCodeAt(r+1))<<8;case 1:n=1540483477*(65535&(n^=255&t.charCodeAt(r)))+(59797*(n>>>16)<<16)}return(((n=1540483477*(65535&(n^=n>>>13))+(59797*(n>>>16)<<16))^n>>>15)>>>0).toString(36)}(i)+l;return{name:c,styles:i,next:Jr}},ei=!!i.useInsertionEffect&&i.useInsertionEffect,ni=ei||function(t){return t()},ri=ei||r.useLayoutEffect,ii=r.createContext("undefined"!==typeof HTMLElement?Vr({key:"css"}):null);ii.Provider;var oi=function(t){return(0,r.forwardRef)((function(e,n){var i=(0,r.useContext)(ii);return t(e,i,n)}))};var ai=r.createContext({});var si=Wr((function(t){return Wr((function(e){return function(t,e){return"function"===typeof e?e(t):Dn({},t,e)}(t,e)}))})),li=function(t){var e=r.useContext(ai);return t.theme!==e&&(e=si(e)(t.theme)),r.createElement(ai.Provider,{value:e},t.children)};var ci,ui=function(t,e,n){var r=t.key+"-"+e.name;!1===n&&void 0===t.registered[r]&&(t.registered[r]=e.styles)},hi=function(t,e,n){ui(t,e,n);var r=t.key+"-"+e.name;if(void 0===t.inserted[e.name]){var i=e;do{t.insert(e===i?"."+r:"",i,t.sheet,!0),i=i.next}while(void 0!==i)}},di=Nn,fi=function(t){return"theme"!==t},pi=function(t){return"string"===typeof t&&t.charCodeAt(0)>96?di:fi},mi=function(t,e,n){var r;if(e){var i=e.shouldForwardProp;r=t.__emotion_forwardProp&&i?function(e){return t.__emotion_forwardProp(e)&&i(e)}:i}return"function"!==typeof r&&n&&(r=t.__emotion_forwardProp),r},gi=function(t){var e=t.cache,n=t.serialized,r=t.isStringTag;return ui(e,n,r),ni((function(){return hi(e,n,r)})),null},yi=function t(e,n){var i,o,a=e.__emotion_real===e,s=a&&e.__emotion_base||e;void 0!==n&&(i=n.label,o=n.target);var l=mi(e,n,a),c=l||pi(s),u=!c("as");return function(){var h=arguments,d=a&&void 0!==e.__emotion_styles?e.__emotion_styles.slice(0):[];if(void 0!==i&&d.push("label:"+i+";"),null==h[0]||void 0===h[0].raw)d.push.apply(d,h);else{0,d.push(h[0][0]);for(var f=h.length,p=1;p<f;p++)d.push(h[p],h[0][p])}var m=oi((function(t,e,n){var i=u&&t.as||s,a="",h=[],f=t;if(null==t.theme){for(var p in f={},t)f[p]=t[p];f.theme=r.useContext(ai)}"string"===typeof t.className?a=function(t,e,n){var r="";return n.split(" ").forEach((function(n){void 0!==t[n]?e.push(t[n]+";"):r+=n+" "})),r}(e.registered,h,t.className):null!=t.className&&(a=t.className+" ");var m=ti(d.concat(h),e.registered,f);a+=e.key+"-"+m.name,void 0!==o&&(a+=" "+o);var g=u&&void 0===l?pi(i):c,y={};for(var v in t)u&&"as"===v||g(v)&&(y[v]=t[v]);return y.className=a,y.ref=n,r.createElement(r.Fragment,null,r.createElement(gi,{cache:e,serialized:m,isStringTag:"string"===typeof i}),r.createElement(i,y))}));return m.displayName=void 0!==i?i:"Styled("+("string"===typeof s?s:s.displayName||s.name||"Component")+")",m.defaultProps=e.defaultProps,m.__emotion_real=m,m.__emotion_base=s,m.__emotion_styles=d,m.__emotion_forwardProp=l,Object.defineProperty(m,"toString",{value:function(){return"."+o}}),m.withComponent=function(e,r){return t(e,Dn({},n,r,{shouldForwardProp:mi(m,r,!0)})).apply(void 0,d)},m}}.bind();["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","marquee","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"].forEach((function(t){yi[t]=yi(t)}));var vi=null!=(ci=yi.default)?ci:yi,_i=t=>{let{baseStyle:e}=t;return t=>{const{theme:n,css:r,__css:i,sx:o,...a}=t,s=Ln(a,((t,e)=>vn(e))),l=function(t){if(null==t)throw new TypeError("Cannot convert undefined or null to object");const e={...t};for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];for(const o of r)if(null!=o)for(const t in o)Object.prototype.hasOwnProperty.call(o,t)&&(t in e&&delete e[t],e[t]=o[t]);return e}({},i,zn(e,t),jn(s),o),c=wn(l)(t.theme);return r?[c,r]:c}};function bi(t,e){const{baseStyle:n,...i}=null!=e?e:{};i.shouldForwardProp||(i.shouldForwardProp=Pn);const o=_i({baseStyle:n}),a=vi(t,i)(o);return r.forwardRef((function(t,e){const{colorMode:n,forced:i}=In();return r.createElement(a,{ref:e,"data-theme":i?n:void 0,...t})}))}var xi=function(){const t=new Map;return new Proxy(bi,{apply:(t,e,n)=>bi(...n),get:(e,n)=>(t.has(n)||t.set(n,bi(n)),t.get(n))})}();function wi(t){return(0,r.forwardRef)(t)}var Si=n(579),Ei=xi("div");Ei.displayName="Box";var Ti=wi((function(t,e){const{size:n,centerContent:r=!0,...i}=t,o=r?{display:"flex",alignItems:"center",justifyContent:"center"}:{};return(0,Si.jsx)(Ei,{ref:e,boxSize:n,__css:{...o,flexShrink:0,flexGrow:0},...i})}));Ti.displayName="Square";var Mi=wi((function(t,e){const{size:n,...r}=t;return(0,Si.jsx)(Ti,{size:n,ref:e,borderRadius:"9999px",...r})}));Mi.displayName="Circle";var Ai=Boolean(null==globalThis?void 0:globalThis.document)?r.useLayoutEffect:r.useEffect,Ci=(0,r.createContext)({getDocument:()=>document,getWindow:()=>window});function Pi(t){const{children:e,environment:n,disabled:i}=t,o=(0,r.useRef)(null),a=(0,r.useMemo)((()=>n||{getDocument:()=>{var t,e;return null!=(e=null==(t=o.current)?void 0:t.ownerDocument)?e:document},getWindow:()=>{var t,e;return null!=(e=null==(t=o.current)?void 0:t.ownerDocument.defaultView)?e:window}}),[n]),s=!i||!n;return(0,Si.jsxs)(Ci.Provider,{value:a,children:[e,s&&(0,Si.jsx)("span",{id:"__chakra_env",hidden:!0,ref:o})]})}function ki(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{ssr:n=!0,fallback:i}=e,{getWindow:o}=function(){let{defer:t}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const[,e]=(0,r.useReducer)((t=>t+1),0);return Ai((()=>{t&&e()}),[t]),(0,r.useContext)(Ci)}(),a=Array.isArray(t)?t:[t];let s=Array.isArray(i)?i:[i];s=s.filter((t=>null!=t));const[l,c]=(0,r.useState)((()=>a.map(((t,e)=>({media:t,matches:n?!!s[e]:o().matchMedia(t).matches})))));return(0,r.useEffect)((()=>{const t=o();c(a.map((e=>({media:e,matches:t.matchMedia(e).matches}))));const e=a.map((e=>t.matchMedia(e))),n=t=>{c((e=>e.slice().map((e=>e.media===t.media?{...e,matches:t.matches}:e))))};return e.forEach((t=>{"function"===typeof t.addListener?t.addListener(n):t.addEventListener("change",n)})),()=>{e.forEach((t=>{"function"===typeof t.removeListener?t.removeListener(n):t.removeEventListener("change",n)}))}}),[o]),l.map((t=>t.matches))}function Ii(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{name:e,strict:n=!0,hookName:i="useContext",providerName:o="Provider",errorMessage:a,defaultValue:s}=t,l=(0,r.createContext)(s);return l.displayName=e,[l.Provider,function t(){var e;const s=(0,r.useContext)(l);if(!s&&n){const n=new Error(null!=a?a:(c=o,"".concat(i," returned `undefined`. Seems you forgot to wrap component within ").concat(c)));throw n.name="ContextError",null==(e=Error.captureStackTrace)||e.call(Error,n,t),n}var c;return s},l]}Ci.displayName="EnvironmentContext",Pi.displayName="EnvironmentProvider";var[Oi,Li]=Ii({strict:!1,name:"ButtonGroupContext"});function ji(t){const{children:e,className:n,...i}=t,o=(0,r.isValidElement)(e)?(0,r.cloneElement)(e,{"aria-hidden":!0,focusable:!1}):e,a=kt("chakra-button__icon",n);return(0,Si.jsx)(xi.span,{display:"inline-flex",alignSelf:"center",flexShrink:0,...i,className:a,children:o})}ji.displayName="ButtonIcon";n(219);var zi=oi((function(t,e){var n=t.styles,i=ti([n],void 0,r.useContext(ai)),o=r.useRef();return ri((function(){var t=e.key+"-global",n=new e.sheet.constructor({key:t,nonce:e.sheet.nonce,container:e.sheet.container,speedy:e.sheet.isSpeedy}),r=!1,a=document.querySelector('style[data-emotion="'+t+" "+i.name+'"]');return e.sheet.tags.length&&(n.before=e.sheet.tags[0]),null!==a&&(r=!0,a.setAttribute("data-emotion",t),n.hydrate([a])),o.current=[n,r],function(){n.flush()}}),[e]),ri((function(){var t=o.current,n=t[0];if(t[1])t[1]=!1;else{if(void 0!==i.next&&hi(e,i.next,!0),n.tags.length){var r=n.tags[n.tags.length-1].nextElementSibling;n.before=r,n.flush()}e.insert("",i,n,!1)}}),[e,i.name]),null}));function Ri(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return ti(e)}var Di=function(){var t=Ri.apply(void 0,arguments),e="animation-"+t.name;return{name:e,styles:"@keyframes "+e+"{"+t.styles+"}",anim:1,toString:function(){return"_EMO_"+this.name+"_"+this.styles+"_EMO_"}}};function Bi(){const t=(0,r.useContext)(ai);if(!t)throw Error("useTheme: `theme` is undefined. Seems you forgot to wrap your app in `<ChakraProvider />` or `<ThemeProvider />`");return t}function Fi(t,e,n){const r=Bi();return Ni(t,e,n)(r)}function Ni(t,e,n){const r=Array.isArray(e)?e:[e],i=Array.isArray(n)?n:[n];return n=>{const o=i.filter(Boolean),a=r.map(((e,r)=>{var i,a;if("breakpoints"===t)return function(t,e,n){var r,i;if(null==e)return e;const o=e=>{var n,r;return null==(r=null==(n=t.__breakpoints)?void 0:n.asArray)?void 0:r[e]};return null!=(i=null!=(r=o(e))?r:o(n))?i:n}(n,e,null!=(i=o[r])?i:e);const s="".concat(t,".").concat(e);return function(t,e,n){var r,i;if(null==e)return e;const o=e=>{var n,r;return null==(r=null==(n=t.__cssMap)?void 0:n[e])?void 0:r.value};return null!=(i=null!=(r=o(e))?r:o(n))?i:n}(n,s,null!=(a=o[r])?a:e)}));return Array.isArray(e)?a:a[0]}}var Ui=n(6366);function Vi(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};var n;const{styleConfig:i,...o}=e,{theme:a,colorMode:s}={...In(),theme:Bi()},l=t?On(a,"components.".concat(t)):void 0,c=i||l,u=Ft({theme:a,colorMode:s},null!=(n=null==c?void 0:c.defaultProps)?n:{},jn(function(t,e){const n={};return Object.keys(t).forEach((r=>{e.includes(r)||(n[r]=t[r])})),n}(o,["children"]))),h=(0,r.useRef)({});if(c){const t=function(t){return e=>{var n;const{variant:r,size:i,theme:o}=e,a=Tn(o);return Ft({},Lt(null!=(n=t.baseStyle)?n:{},e),a(t,"sizes",i,e),a(t,"variants",r,e))}}(c),e=t(u);Ui(h.current,e)||(h.current=e)}return h.current}function Wi(t){return Vi(t,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{})}function Gi(t){return Vi(t,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{})}var qi=Di({"0%":{transform:"rotate(0deg)"},"100%":{transform:"rotate(360deg)"}}),Hi=wi(((t,e)=>{const n=Wi("Spinner",t),{label:r="Loading...",thickness:i="2px",speed:o="0.45s",emptyColor:a="transparent",className:s,...l}=Mn(t),c=kt("chakra-spinner",s),u={display:"inline-block",borderColor:"currentColor",borderStyle:"solid",borderRadius:"99999px",borderWidth:i,borderBottomColor:a,borderLeftColor:a,animation:"".concat(qi," ").concat(o," linear infinite"),...n};return(0,Si.jsx)(xi.div,{ref:e,__css:u,className:c,...l,children:r&&(0,Si.jsx)(xi.span,{srOnly:!0,children:r})})}));function Zi(t){const{label:e,placement:n,spacing:i="0.5rem",children:o=(0,Si.jsx)(Hi,{color:"currentColor",width:"1em",height:"1em"}),className:a,__css:s,...l}=t,c=kt("chakra-button__spinner",a),u="start"===n?"marginEnd":"marginStart",h=(0,r.useMemo)((()=>({display:"flex",alignItems:"center",position:e?"relative":"absolute",[u]:e?i:0,fontSize:"1em",lineHeight:"normal",...s})),[s,e,u,i]);return(0,Si.jsx)(xi.div,{className:c,...l,__css:h,children:o})}function Xi(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return t=>{e.forEach((e=>{!function(t,e){if(null!=t)if("function"!==typeof t)try{t.current=e}catch(n){throw new Error("Cannot assign value '".concat(e,"' to ref '").concat(t,"'"))}else t(e)}(e,t)}))}}function Yi(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return(0,r.useMemo)((()=>Xi(...e)),e)}Hi.displayName="Spinner",Zi.displayName="ButtonSpinner";var Ki=wi(((t,e)=>{const n=Li(),i=Wi("Button",{...n,...t}),{isDisabled:o=(null==n?void 0:n.isDisabled),isLoading:a,isActive:s,children:l,leftIcon:c,rightIcon:u,loadingText:h,iconSpacing:d="0.5rem",type:f,spinner:p,spinnerPlacement:m="start",className:g,as:y,...v}=Mn(t),_=(0,r.useMemo)((()=>{const t={...null==i?void 0:i._focus,zIndex:1};return{display:"inline-flex",appearance:"none",alignItems:"center",justifyContent:"center",userSelect:"none",position:"relative",whiteSpace:"nowrap",verticalAlign:"middle",outline:"none",...i,...!!n&&{_focus:t}}}),[i,n]),{ref:b,type:x}=function(t){const[e,n]=(0,r.useState)(!t);return{ref:(0,r.useCallback)((t=>{t&&n("BUTTON"===t.tagName)}),[]),type:e?"button":void 0}}(y),w={rightIcon:u,leftIcon:c,iconSpacing:d,children:l};return(0,Si.jsxs)(xi.button,{ref:Yi(e,b),as:y,type:null!=f?f:x,"data-active":zt(s),"data-loading":zt(a),__css:_,className:kt("chakra-button",g),...v,disabled:o||a,children:[a&&"start"===m&&(0,Si.jsx)(Zi,{className:"chakra-button__spinner--start",label:h,placement:"start",spacing:d,children:p}),a?h||(0,Si.jsx)(xi.span,{opacity:0,children:(0,Si.jsx)($i,{...w})}):(0,Si.jsx)($i,{...w}),a&&"end"===m&&(0,Si.jsx)(Zi,{className:"chakra-button__spinner--end",label:h,placement:"end",spacing:d,children:p})]})}));function $i(t){const{leftIcon:e,rightIcon:n,children:r,iconSpacing:i}=t;return(0,Si.jsxs)(Si.Fragment,{children:[e&&(0,Si.jsx)(ji,{marginEnd:i,children:e}),r,n&&(0,Si.jsx)(ji,{marginStart:i,children:n})]})}Ki.displayName="Button";var Ji={path:(0,Si.jsxs)("g",{stroke:"currentColor",strokeWidth:"1.5",children:[(0,Si.jsx)("path",{strokeLinecap:"round",fill:"none",d:"M9,9a3,3,0,1,1,4,2.829,1.5,1.5,0,0,0-1,1.415V14.25"}),(0,Si.jsx)("path",{fill:"currentColor",strokeLinecap:"round",d:"M12,17.25a.375.375,0,1,0,.375.375A.375.375,0,0,0,12,17.25h0"}),(0,Si.jsx)("circle",{fill:"none",strokeMiterlimit:"10",cx:"12",cy:"12",r:"11.25"})]}),viewBox:"0 0 24 24"},Qi=wi(((t,e)=>{const{as:n,viewBox:r,color:i="currentColor",focusable:o=!1,children:a,className:s,__css:l,...c}=t,u={ref:e,focusable:o,className:kt("chakra-icon",s),__css:{w:"1em",h:"1em",display:"inline-block",lineHeight:"1em",flexShrink:0,color:i,...l,...Wi("Icon",t)}},h=null!=r?r:Ji.viewBox;if(n&&"string"!==typeof n)return(0,Si.jsx)(xi.svg,{as:n,...u,...c});const d=null!=a?a:Ji.path;return(0,Si.jsx)(xi.svg,{verticalAlign:"middle",viewBox:h,...u,...c,children:d})}));Qi.displayName="Icon";var to={exit:{scale:.85,opacity:0,transition:{opacity:{duration:.15,easings:"easeInOut"},scale:{duration:.2,easings:"easeInOut"}}},enter:{scale:1,opacity:1,transition:{opacity:{easings:"easeOut",duration:.2},scale:{duration:.2,ease:[.175,.885,.4,1.1]}}}};function eo(t){return null!=t&&"object"==typeof t&&"nodeType"in t&&t.nodeType===Node.ELEMENT_NODE}function no(t){var e;if(!eo(t))return!1;return t instanceof(null!=(e=t.ownerDocument.defaultView)?e:window).HTMLElement}function ro(t){return eo(t)?t.ownerDocument:document}function io(t){return["html","body","#document"].includes(t.localName)?t.ownerDocument.body:no(t)&&function(t){const e=t.ownerDocument.defaultView||window,{overflow:n,overflowX:r,overflowY:i}=e.getComputedStyle(t);return/auto|scroll|overlay|hidden/.test(n+i+r)}(t)?t:io(function(t){return"html"===t.localName?t:t.assignedSlot||t.parentElement||t.ownerDocument.documentElement}(t))}var oo=(t,e)=>({var:t,varRef:e?"var(".concat(t,", ").concat(e,")"):"var(".concat(t,")")}),ao={arrowShadowColor:oo("--popper-arrow-shadow-color"),arrowSize:oo("--popper-arrow-size","8px"),arrowSizeHalf:oo("--popper-arrow-size-half"),arrowBg:oo("--popper-arrow-bg"),transformOrigin:oo("--popper-transform-origin"),arrowOffset:oo("--popper-arrow-offset")};var so={top:"bottom center","top-start":"bottom left","top-end":"bottom right",bottom:"top center","bottom-start":"top left","bottom-end":"top right",left:"right center","left-start":"right top","left-end":"right bottom",right:"left center","right-start":"left top","right-end":"left bottom"},lo={scroll:!0,resize:!0};function co(t){let e;return e="object"===typeof t?{enabled:!0,options:{...lo,...t}}:{enabled:t,options:lo},e}var uo={name:"matchWidth",enabled:!0,phase:"beforeWrite",requires:["computeStyles"],fn:t=>{let{state:e}=t;e.styles.popper.width="".concat(e.rects.reference.width,"px")},effect:t=>{let{state:e}=t;return()=>{const t=e.elements.reference;e.elements.popper.style.width="".concat(t.offsetWidth,"px")}}},ho={name:"transformOrigin",enabled:!0,phase:"write",fn:t=>{let{state:e}=t;fo(e)},effect:t=>{let{state:e}=t;return()=>{fo(e)}}},fo=t=>{var e;t.elements.popper.style.setProperty(ao.transformOrigin.var,(e=t.placement,so[e]))},po={name:"positionArrow",enabled:!0,phase:"afterWrite",fn:t=>{let{state:e}=t;mo(e)}},mo=t=>{var e;if(!t.placement)return;const n=go(t.placement);if((null==(e=t.elements)?void 0:e.arrow)&&n){Object.assign(t.elements.arrow.style,{[n.property]:n.value,width:ao.arrowSize.varRef,height:ao.arrowSize.varRef,zIndex:-1});const e={[ao.arrowSizeHalf.var]:"calc(".concat(ao.arrowSize.varRef," / 2 - 1px)"),[ao.arrowOffset.var]:"calc(".concat(ao.arrowSizeHalf.varRef," * -1)")};for(const n in e)t.elements.arrow.style.setProperty(n,e[n])}},go=t=>t.startsWith("top")?{property:"bottom",value:ao.arrowOffset.varRef}:t.startsWith("bottom")?{property:"top",value:ao.arrowOffset.varRef}:t.startsWith("left")?{property:"right",value:ao.arrowOffset.varRef}:t.startsWith("right")?{property:"left",value:ao.arrowOffset.varRef}:void 0,yo={name:"innerArrow",enabled:!0,phase:"main",requires:["arrow"],fn:t=>{let{state:e}=t;vo(e)},effect:t=>{let{state:e}=t;return()=>{vo(e)}}},vo=t=>{if(!t.elements.arrow)return;const e=t.elements.arrow.querySelector("[data-popper-arrow-inner]");if(!e)return;const n=(r=t.placement).includes("top")?"1px 1px 0px 0 var(--popper-arrow-shadow-color)":r.includes("bottom")?"-1px -1px 0px 0 var(--popper-arrow-shadow-color)":r.includes("right")?"-1px 1px 0px 0 var(--popper-arrow-shadow-color)":r.includes("left")?"1px -1px 0px 0 var(--popper-arrow-shadow-color)":void 0;var r;n&&e.style.setProperty("--popper-arrow-default-shadow",n),Object.assign(e.style,{transform:"rotate(45deg)",background:ao.arrowBg.varRef,top:0,left:0,width:"100%",height:"100%",position:"absolute",zIndex:"inherit",boxShadow:"var(--popper-arrow-shadow, var(--popper-arrow-default-shadow))"})},_o={"start-start":{ltr:"left-start",rtl:"right-start"},"start-end":{ltr:"left-end",rtl:"right-end"},"end-start":{ltr:"right-start",rtl:"left-start"},"end-end":{ltr:"right-end",rtl:"left-end"},start:{ltr:"left",rtl:"right"},end:{ltr:"right",rtl:"left"}},bo={"auto-start":"auto-end","auto-end":"auto-start","top-start":"top-end","top-end":"top-start","bottom-start":"bottom-end","bottom-end":"bottom-start"};function xo(t){if(null==t)return window;if("[object Window]"!==t.toString()){var e=t.ownerDocument;return e&&e.defaultView||window}return t}function wo(t){return t instanceof xo(t).Element||t instanceof Element}function So(t){return t instanceof xo(t).HTMLElement||t instanceof HTMLElement}function Eo(t){return"undefined"!==typeof ShadowRoot&&(t instanceof xo(t).ShadowRoot||t instanceof ShadowRoot)}var To=Math.max,Mo=Math.min,Ao=Math.round;function Co(){var t=navigator.userAgentData;return null!=t&&t.brands&&Array.isArray(t.brands)?t.brands.map((function(t){return t.brand+"/"+t.version})).join(" "):navigator.userAgent}function Po(){return!/^((?!chrome|android).)*safari/i.test(Co())}function ko(t,e,n){void 0===e&&(e=!1),void 0===n&&(n=!1);var r=t.getBoundingClientRect(),i=1,o=1;e&&So(t)&&(i=t.offsetWidth>0&&Ao(r.width)/t.offsetWidth||1,o=t.offsetHeight>0&&Ao(r.height)/t.offsetHeight||1);var a=(wo(t)?xo(t):window).visualViewport,s=!Po()&&n,l=(r.left+(s&&a?a.offsetLeft:0))/i,c=(r.top+(s&&a?a.offsetTop:0))/o,u=r.width/i,h=r.height/o;return{width:u,height:h,top:c,right:l+u,bottom:c+h,left:l,x:l,y:c}}function Io(t){var e=xo(t);return{scrollLeft:e.pageXOffset,scrollTop:e.pageYOffset}}function Oo(t){return t?(t.nodeName||"").toLowerCase():null}function Lo(t){return((wo(t)?t.ownerDocument:t.document)||window.document).documentElement}function jo(t){return ko(Lo(t)).left+Io(t).scrollLeft}function zo(t){return xo(t).getComputedStyle(t)}function Ro(t){var e=zo(t),n=e.overflow,r=e.overflowX,i=e.overflowY;return/auto|scroll|overlay|hidden/.test(n+i+r)}function Do(t,e,n){void 0===n&&(n=!1);var r=So(e),i=So(e)&&function(t){var e=t.getBoundingClientRect(),n=Ao(e.width)/t.offsetWidth||1,r=Ao(e.height)/t.offsetHeight||1;return 1!==n||1!==r}(e),o=Lo(e),a=ko(t,i,n),s={scrollLeft:0,scrollTop:0},l={x:0,y:0};return(r||!r&&!n)&&(("body"!==Oo(e)||Ro(o))&&(s=function(t){return t!==xo(t)&&So(t)?{scrollLeft:(e=t).scrollLeft,scrollTop:e.scrollTop}:Io(t);var e}(e)),So(e)?((l=ko(e,!0)).x+=e.clientLeft,l.y+=e.clientTop):o&&(l.x=jo(o))),{x:a.left+s.scrollLeft-l.x,y:a.top+s.scrollTop-l.y,width:a.width,height:a.height}}function Bo(t){var e=ko(t),n=t.offsetWidth,r=t.offsetHeight;return Math.abs(e.width-n)<=1&&(n=e.width),Math.abs(e.height-r)<=1&&(r=e.height),{x:t.offsetLeft,y:t.offsetTop,width:n,height:r}}function Fo(t){return"html"===Oo(t)?t:t.assignedSlot||t.parentNode||(Eo(t)?t.host:null)||Lo(t)}function No(t){return["html","body","#document"].indexOf(Oo(t))>=0?t.ownerDocument.body:So(t)&&Ro(t)?t:No(Fo(t))}function Uo(t,e){var n;void 0===e&&(e=[]);var r=No(t),i=r===(null==(n=t.ownerDocument)?void 0:n.body),o=xo(r),a=i?[o].concat(o.visualViewport||[],Ro(r)?r:[]):r,s=e.concat(a);return i?s:s.concat(Uo(Fo(a)))}function Vo(t){return["table","td","th"].indexOf(Oo(t))>=0}function Wo(t){return So(t)&&"fixed"!==zo(t).position?t.offsetParent:null}function Go(t){for(var e=xo(t),n=Wo(t);n&&Vo(n)&&"static"===zo(n).position;)n=Wo(n);return n&&("html"===Oo(n)||"body"===Oo(n)&&"static"===zo(n).position)?e:n||function(t){var e=/firefox/i.test(Co());if(/Trident/i.test(Co())&&So(t)&&"fixed"===zo(t).position)return null;var n=Fo(t);for(Eo(n)&&(n=n.host);So(n)&&["html","body"].indexOf(Oo(n))<0;){var r=zo(n);if("none"!==r.transform||"none"!==r.perspective||"paint"===r.contain||-1!==["transform","perspective"].indexOf(r.willChange)||e&&"filter"===r.willChange||e&&r.filter&&"none"!==r.filter)return n;n=n.parentNode}return null}(t)||e}var qo="top",Ho="bottom",Zo="right",Xo="left",Yo="auto",Ko=[qo,Ho,Zo,Xo],$o="start",Jo="end",Qo="clippingParents",ta="viewport",ea="popper",na="reference",ra=Ko.reduce((function(t,e){return t.concat([e+"-"+$o,e+"-"+Jo])}),[]),ia=[].concat(Ko,[Yo]).reduce((function(t,e){return t.concat([e,e+"-"+$o,e+"-"+Jo])}),[]),oa=["beforeRead","read","afterRead","beforeMain","main","afterMain","beforeWrite","write","afterWrite"];function aa(t){var e=new Map,n=new Set,r=[];function i(t){n.add(t.name),[].concat(t.requires||[],t.requiresIfExists||[]).forEach((function(t){if(!n.has(t)){var r=e.get(t);r&&i(r)}})),r.push(t)}return t.forEach((function(t){e.set(t.name,t)})),t.forEach((function(t){n.has(t.name)||i(t)})),r}function sa(t){var e;return function(){return e||(e=new Promise((function(n){Promise.resolve().then((function(){e=void 0,n(t())}))}))),e}}var la={placement:"bottom",modifiers:[],strategy:"absolute"};function ca(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return!e.some((function(t){return!(t&&"function"===typeof t.getBoundingClientRect)}))}function ua(t){void 0===t&&(t={});var e=t,n=e.defaultModifiers,r=void 0===n?[]:n,i=e.defaultOptions,o=void 0===i?la:i;return function(t,e,n){void 0===n&&(n=o);var i={placement:"bottom",orderedModifiers:[],options:Object.assign({},la,o),modifiersData:{},elements:{reference:t,popper:e},attributes:{},styles:{}},a=[],s=!1,l={state:i,setOptions:function(n){var s="function"===typeof n?n(i.options):n;c(),i.options=Object.assign({},o,i.options,s),i.scrollParents={reference:wo(t)?Uo(t):t.contextElement?Uo(t.contextElement):[],popper:Uo(e)};var u=function(t){var e=aa(t);return oa.reduce((function(t,n){return t.concat(e.filter((function(t){return t.phase===n})))}),[])}(function(t){var e=t.reduce((function(t,e){var n=t[e.name];return t[e.name]=n?Object.assign({},n,e,{options:Object.assign({},n.options,e.options),data:Object.assign({},n.data,e.data)}):e,t}),{});return Object.keys(e).map((function(t){return e[t]}))}([].concat(r,i.options.modifiers)));return i.orderedModifiers=u.filter((function(t){return t.enabled})),i.orderedModifiers.forEach((function(t){var e=t.name,n=t.options,r=void 0===n?{}:n,o=t.effect;if("function"===typeof o){var s=o({state:i,name:e,instance:l,options:r}),c=function(){};a.push(s||c)}})),l.update()},forceUpdate:function(){if(!s){var t=i.elements,e=t.reference,n=t.popper;if(ca(e,n)){i.rects={reference:Do(e,Go(n),"fixed"===i.options.strategy),popper:Bo(n)},i.reset=!1,i.placement=i.options.placement,i.orderedModifiers.forEach((function(t){return i.modifiersData[t.name]=Object.assign({},t.data)}));for(var r=0;r<i.orderedModifiers.length;r++)if(!0!==i.reset){var o=i.orderedModifiers[r],a=o.fn,c=o.options,u=void 0===c?{}:c,h=o.name;"function"===typeof a&&(i=a({state:i,options:u,name:h,instance:l})||i)}else i.reset=!1,r=-1}}},update:sa((function(){return new Promise((function(t){l.forceUpdate(),t(i)}))})),destroy:function(){c(),s=!0}};if(!ca(t,e))return l;function c(){a.forEach((function(t){return t()})),a=[]}return l.setOptions(n).then((function(t){!s&&n.onFirstUpdate&&n.onFirstUpdate(t)})),l}}var ha={passive:!0};const da={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:function(t){var e=t.state,n=t.instance,r=t.options,i=r.scroll,o=void 0===i||i,a=r.resize,s=void 0===a||a,l=xo(e.elements.popper),c=[].concat(e.scrollParents.reference,e.scrollParents.popper);return o&&c.forEach((function(t){t.addEventListener("scroll",n.update,ha)})),s&&l.addEventListener("resize",n.update,ha),function(){o&&c.forEach((function(t){t.removeEventListener("scroll",n.update,ha)})),s&&l.removeEventListener("resize",n.update,ha)}},data:{}};function fa(t){return t.split("-")[0]}function pa(t){return t.split("-")[1]}function ma(t){return["top","bottom"].indexOf(t)>=0?"x":"y"}function ga(t){var e,n=t.reference,r=t.element,i=t.placement,o=i?fa(i):null,a=i?pa(i):null,s=n.x+n.width/2-r.width/2,l=n.y+n.height/2-r.height/2;switch(o){case qo:e={x:s,y:n.y-r.height};break;case Ho:e={x:s,y:n.y+n.height};break;case Zo:e={x:n.x+n.width,y:l};break;case Xo:e={x:n.x-r.width,y:l};break;default:e={x:n.x,y:n.y}}var c=o?ma(o):null;if(null!=c){var u="y"===c?"height":"width";switch(a){case $o:e[c]=e[c]-(n[u]/2-r[u]/2);break;case Jo:e[c]=e[c]+(n[u]/2-r[u]/2)}}return e}const ya={name:"popperOffsets",enabled:!0,phase:"read",fn:function(t){var e=t.state,n=t.name;e.modifiersData[n]=ga({reference:e.rects.reference,element:e.rects.popper,strategy:"absolute",placement:e.placement})},data:{}};var va={top:"auto",right:"auto",bottom:"auto",left:"auto"};function _a(t){var e,n=t.popper,r=t.popperRect,i=t.placement,o=t.variation,a=t.offsets,s=t.position,l=t.gpuAcceleration,c=t.adaptive,u=t.roundOffsets,h=t.isFixed,d=a.x,f=void 0===d?0:d,p=a.y,m=void 0===p?0:p,g="function"===typeof u?u({x:f,y:m}):{x:f,y:m};f=g.x,m=g.y;var y=a.hasOwnProperty("x"),v=a.hasOwnProperty("y"),_=Xo,b=qo,x=window;if(c){var w=Go(n),S="clientHeight",E="clientWidth";if(w===xo(n)&&"static"!==zo(w=Lo(n)).position&&"absolute"===s&&(S="scrollHeight",E="scrollWidth"),i===qo||(i===Xo||i===Zo)&&o===Jo)b=Ho,m-=(h&&w===x&&x.visualViewport?x.visualViewport.height:w[S])-r.height,m*=l?1:-1;if(i===Xo||(i===qo||i===Ho)&&o===Jo)_=Zo,f-=(h&&w===x&&x.visualViewport?x.visualViewport.width:w[E])-r.width,f*=l?1:-1}var T,M=Object.assign({position:s},c&&va),A=!0===u?function(t,e){var n=t.x,r=t.y,i=e.devicePixelRatio||1;return{x:Ao(n*i)/i||0,y:Ao(r*i)/i||0}}({x:f,y:m},xo(n)):{x:f,y:m};return f=A.x,m=A.y,l?Object.assign({},M,((T={})[b]=v?"0":"",T[_]=y?"0":"",T.transform=(x.devicePixelRatio||1)<=1?"translate("+f+"px, "+m+"px)":"translate3d("+f+"px, "+m+"px, 0)",T)):Object.assign({},M,((e={})[b]=v?m+"px":"",e[_]=y?f+"px":"",e.transform="",e))}const ba={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:function(t){var e=t.state,n=t.options,r=n.gpuAcceleration,i=void 0===r||r,o=n.adaptive,a=void 0===o||o,s=n.roundOffsets,l=void 0===s||s,c={placement:fa(e.placement),variation:pa(e.placement),popper:e.elements.popper,popperRect:e.rects.popper,gpuAcceleration:i,isFixed:"fixed"===e.options.strategy};null!=e.modifiersData.popperOffsets&&(e.styles.popper=Object.assign({},e.styles.popper,_a(Object.assign({},c,{offsets:e.modifiersData.popperOffsets,position:e.options.strategy,adaptive:a,roundOffsets:l})))),null!=e.modifiersData.arrow&&(e.styles.arrow=Object.assign({},e.styles.arrow,_a(Object.assign({},c,{offsets:e.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:l})))),e.attributes.popper=Object.assign({},e.attributes.popper,{"data-popper-placement":e.placement})},data:{}};const xa={name:"applyStyles",enabled:!0,phase:"write",fn:function(t){var e=t.state;Object.keys(e.elements).forEach((function(t){var n=e.styles[t]||{},r=e.attributes[t]||{},i=e.elements[t];So(i)&&Oo(i)&&(Object.assign(i.style,n),Object.keys(r).forEach((function(t){var e=r[t];!1===e?i.removeAttribute(t):i.setAttribute(t,!0===e?"":e)})))}))},effect:function(t){var e=t.state,n={popper:{position:e.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(e.elements.popper.style,n.popper),e.styles=n,e.elements.arrow&&Object.assign(e.elements.arrow.style,n.arrow),function(){Object.keys(e.elements).forEach((function(t){var r=e.elements[t],i=e.attributes[t]||{},o=Object.keys(e.styles.hasOwnProperty(t)?e.styles[t]:n[t]).reduce((function(t,e){return t[e]="",t}),{});So(r)&&Oo(r)&&(Object.assign(r.style,o),Object.keys(i).forEach((function(t){r.removeAttribute(t)})))}))}},requires:["computeStyles"]};const wa={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:function(t){var e=t.state,n=t.options,r=t.name,i=n.offset,o=void 0===i?[0,0]:i,a=ia.reduce((function(t,n){return t[n]=function(t,e,n){var r=fa(t),i=[Xo,qo].indexOf(r)>=0?-1:1,o="function"===typeof n?n(Object.assign({},e,{placement:t})):n,a=o[0],s=o[1];return a=a||0,s=(s||0)*i,[Xo,Zo].indexOf(r)>=0?{x:s,y:a}:{x:a,y:s}}(n,e.rects,o),t}),{}),s=a[e.placement],l=s.x,c=s.y;null!=e.modifiersData.popperOffsets&&(e.modifiersData.popperOffsets.x+=l,e.modifiersData.popperOffsets.y+=c),e.modifiersData[r]=a}};var Sa={left:"right",right:"left",bottom:"top",top:"bottom"};function Ea(t){return t.replace(/left|right|bottom|top/g,(function(t){return Sa[t]}))}var Ta={start:"end",end:"start"};function Ma(t){return t.replace(/start|end/g,(function(t){return Ta[t]}))}function Aa(t,e){var n=e.getRootNode&&e.getRootNode();if(t.contains(e))return!0;if(n&&Eo(n)){var r=e;do{if(r&&t.isSameNode(r))return!0;r=r.parentNode||r.host}while(r)}return!1}function Ca(t){return Object.assign({},t,{left:t.x,top:t.y,right:t.x+t.width,bottom:t.y+t.height})}function Pa(t,e,n){return e===ta?Ca(function(t,e){var n=xo(t),r=Lo(t),i=n.visualViewport,o=r.clientWidth,a=r.clientHeight,s=0,l=0;if(i){o=i.width,a=i.height;var c=Po();(c||!c&&"fixed"===e)&&(s=i.offsetLeft,l=i.offsetTop)}return{width:o,height:a,x:s+jo(t),y:l}}(t,n)):wo(e)?function(t,e){var n=ko(t,!1,"fixed"===e);return n.top=n.top+t.clientTop,n.left=n.left+t.clientLeft,n.bottom=n.top+t.clientHeight,n.right=n.left+t.clientWidth,n.width=t.clientWidth,n.height=t.clientHeight,n.x=n.left,n.y=n.top,n}(e,n):Ca(function(t){var e,n=Lo(t),r=Io(t),i=null==(e=t.ownerDocument)?void 0:e.body,o=To(n.scrollWidth,n.clientWidth,i?i.scrollWidth:0,i?i.clientWidth:0),a=To(n.scrollHeight,n.clientHeight,i?i.scrollHeight:0,i?i.clientHeight:0),s=-r.scrollLeft+jo(t),l=-r.scrollTop;return"rtl"===zo(i||n).direction&&(s+=To(n.clientWidth,i?i.clientWidth:0)-o),{width:o,height:a,x:s,y:l}}(Lo(t)))}function ka(t,e,n,r){var i="clippingParents"===e?function(t){var e=Uo(Fo(t)),n=["absolute","fixed"].indexOf(zo(t).position)>=0&&So(t)?Go(t):t;return wo(n)?e.filter((function(t){return wo(t)&&Aa(t,n)&&"body"!==Oo(t)})):[]}(t):[].concat(e),o=[].concat(i,[n]),a=o[0],s=o.reduce((function(e,n){var i=Pa(t,n,r);return e.top=To(i.top,e.top),e.right=Mo(i.right,e.right),e.bottom=Mo(i.bottom,e.bottom),e.left=To(i.left,e.left),e}),Pa(t,a,r));return s.width=s.right-s.left,s.height=s.bottom-s.top,s.x=s.left,s.y=s.top,s}function Ia(t){return Object.assign({},{top:0,right:0,bottom:0,left:0},t)}function Oa(t,e){return e.reduce((function(e,n){return e[n]=t,e}),{})}function La(t,e){void 0===e&&(e={});var n=e,r=n.placement,i=void 0===r?t.placement:r,o=n.strategy,a=void 0===o?t.strategy:o,s=n.boundary,l=void 0===s?Qo:s,c=n.rootBoundary,u=void 0===c?ta:c,h=n.elementContext,d=void 0===h?ea:h,f=n.altBoundary,p=void 0!==f&&f,m=n.padding,g=void 0===m?0:m,y=Ia("number"!==typeof g?g:Oa(g,Ko)),v=d===ea?na:ea,_=t.rects.popper,b=t.elements[p?v:d],x=ka(wo(b)?b:b.contextElement||Lo(t.elements.popper),l,u,a),w=ko(t.elements.reference),S=ga({reference:w,element:_,strategy:"absolute",placement:i}),E=Ca(Object.assign({},_,S)),T=d===ea?E:w,M={top:x.top-T.top+y.top,bottom:T.bottom-x.bottom+y.bottom,left:x.left-T.left+y.left,right:T.right-x.right+y.right},A=t.modifiersData.offset;if(d===ea&&A){var C=A[i];Object.keys(M).forEach((function(t){var e=[Zo,Ho].indexOf(t)>=0?1:-1,n=[qo,Ho].indexOf(t)>=0?"y":"x";M[t]+=C[n]*e}))}return M}const ja={name:"flip",enabled:!0,phase:"main",fn:function(t){var e=t.state,n=t.options,r=t.name;if(!e.modifiersData[r]._skip){for(var i=n.mainAxis,o=void 0===i||i,a=n.altAxis,s=void 0===a||a,l=n.fallbackPlacements,c=n.padding,u=n.boundary,h=n.rootBoundary,d=n.altBoundary,f=n.flipVariations,p=void 0===f||f,m=n.allowedAutoPlacements,g=e.options.placement,y=fa(g),v=l||(y===g||!p?[Ea(g)]:function(t){if(fa(t)===Yo)return[];var e=Ea(t);return[Ma(t),e,Ma(e)]}(g)),_=[g].concat(v).reduce((function(t,n){return t.concat(fa(n)===Yo?function(t,e){void 0===e&&(e={});var n=e,r=n.placement,i=n.boundary,o=n.rootBoundary,a=n.padding,s=n.flipVariations,l=n.allowedAutoPlacements,c=void 0===l?ia:l,u=pa(r),h=u?s?ra:ra.filter((function(t){return pa(t)===u})):Ko,d=h.filter((function(t){return c.indexOf(t)>=0}));0===d.length&&(d=h);var f=d.reduce((function(e,n){return e[n]=La(t,{placement:n,boundary:i,rootBoundary:o,padding:a})[fa(n)],e}),{});return Object.keys(f).sort((function(t,e){return f[t]-f[e]}))}(e,{placement:n,boundary:u,rootBoundary:h,padding:c,flipVariations:p,allowedAutoPlacements:m}):n)}),[]),b=e.rects.reference,x=e.rects.popper,w=new Map,S=!0,E=_[0],T=0;T<_.length;T++){var M=_[T],A=fa(M),C=pa(M)===$o,P=[qo,Ho].indexOf(A)>=0,k=P?"width":"height",I=La(e,{placement:M,boundary:u,rootBoundary:h,altBoundary:d,padding:c}),O=P?C?Zo:Xo:C?Ho:qo;b[k]>x[k]&&(O=Ea(O));var L=Ea(O),j=[];if(o&&j.push(I[A]<=0),s&&j.push(I[O]<=0,I[L]<=0),j.every((function(t){return t}))){E=M,S=!1;break}w.set(M,j)}if(S)for(var z=function(t){var e=_.find((function(e){var n=w.get(e);if(n)return n.slice(0,t).every((function(t){return t}))}));if(e)return E=e,"break"},R=p?3:1;R>0;R--){if("break"===z(R))break}e.placement!==E&&(e.modifiersData[r]._skip=!0,e.placement=E,e.reset=!0)}},requiresIfExists:["offset"],data:{_skip:!1}};function za(t,e,n){return To(t,Mo(e,n))}const Ra={name:"preventOverflow",enabled:!0,phase:"main",fn:function(t){var e=t.state,n=t.options,r=t.name,i=n.mainAxis,o=void 0===i||i,a=n.altAxis,s=void 0!==a&&a,l=n.boundary,c=n.rootBoundary,u=n.altBoundary,h=n.padding,d=n.tether,f=void 0===d||d,p=n.tetherOffset,m=void 0===p?0:p,g=La(e,{boundary:l,rootBoundary:c,padding:h,altBoundary:u}),y=fa(e.placement),v=pa(e.placement),_=!v,b=ma(y),x="x"===b?"y":"x",w=e.modifiersData.popperOffsets,S=e.rects.reference,E=e.rects.popper,T="function"===typeof m?m(Object.assign({},e.rects,{placement:e.placement})):m,M="number"===typeof T?{mainAxis:T,altAxis:T}:Object.assign({mainAxis:0,altAxis:0},T),A=e.modifiersData.offset?e.modifiersData.offset[e.placement]:null,C={x:0,y:0};if(w){if(o){var P,k="y"===b?qo:Xo,I="y"===b?Ho:Zo,O="y"===b?"height":"width",L=w[b],j=L+g[k],z=L-g[I],R=f?-E[O]/2:0,D=v===$o?S[O]:E[O],B=v===$o?-E[O]:-S[O],F=e.elements.arrow,N=f&&F?Bo(F):{width:0,height:0},U=e.modifiersData["arrow#persistent"]?e.modifiersData["arrow#persistent"].padding:{top:0,right:0,bottom:0,left:0},V=U[k],W=U[I],G=za(0,S[O],N[O]),q=_?S[O]/2-R-G-V-M.mainAxis:D-G-V-M.mainAxis,H=_?-S[O]/2+R+G+W+M.mainAxis:B+G+W+M.mainAxis,Z=e.elements.arrow&&Go(e.elements.arrow),X=Z?"y"===b?Z.clientTop||0:Z.clientLeft||0:0,Y=null!=(P=null==A?void 0:A[b])?P:0,K=L+H-Y,$=za(f?Mo(j,L+q-Y-X):j,L,f?To(z,K):z);w[b]=$,C[b]=$-L}if(s){var J,Q="x"===b?qo:Xo,tt="x"===b?Ho:Zo,et=w[x],nt="y"===x?"height":"width",rt=et+g[Q],it=et-g[tt],ot=-1!==[qo,Xo].indexOf(y),at=null!=(J=null==A?void 0:A[x])?J:0,st=ot?rt:et-S[nt]-E[nt]-at+M.altAxis,lt=ot?et+S[nt]+E[nt]-at-M.altAxis:it,ct=f&&ot?function(t,e,n){var r=za(t,e,n);return r>n?n:r}(st,et,lt):za(f?st:rt,et,f?lt:it);w[x]=ct,C[x]=ct-et}e.modifiersData[r]=C}},requiresIfExists:["offset"]};const Da={name:"arrow",enabled:!0,phase:"main",fn:function(t){var e,n=t.state,r=t.name,i=t.options,o=n.elements.arrow,a=n.modifiersData.popperOffsets,s=fa(n.placement),l=ma(s),c=[Xo,Zo].indexOf(s)>=0?"height":"width";if(o&&a){var u=function(t,e){return Ia("number"!==typeof(t="function"===typeof t?t(Object.assign({},e.rects,{placement:e.placement})):t)?t:Oa(t,Ko))}(i.padding,n),h=Bo(o),d="y"===l?qo:Xo,f="y"===l?Ho:Zo,p=n.rects.reference[c]+n.rects.reference[l]-a[l]-n.rects.popper[c],m=a[l]-n.rects.reference[l],g=Go(o),y=g?"y"===l?g.clientHeight||0:g.clientWidth||0:0,v=p/2-m/2,_=u[d],b=y-h[c]-u[f],x=y/2-h[c]/2+v,w=za(_,x,b),S=l;n.modifiersData[r]=((e={})[S]=w,e.centerOffset=w-x,e)}},effect:function(t){var e=t.state,n=t.options.element,r=void 0===n?"[data-popper-arrow]":n;null!=r&&("string"!==typeof r||(r=e.elements.popper.querySelector(r)))&&Aa(e.elements.popper,r)&&(e.elements.arrow=r)},requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function Ba(t,e,n){return void 0===n&&(n={x:0,y:0}),{top:t.top-e.height-n.y,right:t.right-e.width+n.x,bottom:t.bottom-e.height+n.y,left:t.left-e.width-n.x}}function Fa(t){return[qo,Zo,Ho,Xo].some((function(e){return t[e]>=0}))}const Na={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:function(t){var e=t.state,n=t.name,r=e.rects.reference,i=e.rects.popper,o=e.modifiersData.preventOverflow,a=La(e,{elementContext:"reference"}),s=La(e,{altBoundary:!0}),l=Ba(a,r),c=Ba(s,i,o),u=Fa(l),h=Fa(c);e.modifiersData[n]={referenceClippingOffsets:l,popperEscapeOffsets:c,isReferenceHidden:u,hasPopperEscaped:h},e.attributes.popper=Object.assign({},e.attributes.popper,{"data-popper-reference-hidden":u,"data-popper-escaped":h})}};var Ua=ua({defaultModifiers:[da,ya,ba,xa,wa,ja,Ra,Da,Na]});function Va(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{enabled:e=!0,modifiers:n,placement:i="bottom",strategy:o="absolute",arrowPadding:a=8,eventListeners:s=!0,offset:l,gutter:c=8,flip:u=!0,boundary:h="clippingParents",preventOverflow:d=!0,matchWidth:f,direction:p="ltr"}=t,m=(0,r.useRef)(null),g=(0,r.useRef)(null),y=(0,r.useRef)(null),v=function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"ltr";var n,r;const i=(null==(n=_o[t])?void 0:n[e])||t;return"ltr"===e?i:null!=(r=bo[t])?r:i}(i,p),_=(0,r.useRef)((()=>{})),b=(0,r.useCallback)((()=>{var t;e&&m.current&&g.current&&(null==(t=_.current)||t.call(_),y.current=Ua(m.current,g.current,{placement:v,modifiers:[yo,po,ho,{...uo,enabled:!!f},{name:"eventListeners",...co(s)},{name:"arrow",options:{padding:a}},{name:"offset",options:{offset:null!=l?l:[0,c]}},{name:"flip",enabled:!!u,options:{padding:8}},{name:"preventOverflow",enabled:!!d,options:{boundary:h}},...null!=n?n:[]],strategy:o}),y.current.forceUpdate(),_.current=y.current.destroy)}),[v,e,n,f,s,a,l,c,u,d,h,o]);(0,r.useEffect)((()=>()=>{var t;m.current||g.current||(null==(t=y.current)||t.destroy(),y.current=null)}),[]);const x=(0,r.useCallback)((t=>{m.current=t,b()}),[b]),w=(0,r.useCallback)((function(){return{...arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},ref:Xi(x,arguments.length>1&&void 0!==arguments[1]?arguments[1]:null)}}),[x]),S=(0,r.useCallback)((t=>{g.current=t,b()}),[b]),E=(0,r.useCallback)((function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return{...t,ref:Xi(S,e),style:{...t.style,position:o,minWidth:f?void 0:"max-content",inset:"0 auto auto 0"}}}),[o,S,f]),T=(0,r.useCallback)((function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;const{size:n,shadowColor:r,bg:i,style:o,...a}=t;return{...a,ref:e,"data-popper-arrow":"",style:Wa(t)}}),[]),M=(0,r.useCallback)((function(){return{...arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},ref:arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,"data-popper-arrow-inner":""}}),[]);return{update(){var t;null==(t=y.current)||t.update()},forceUpdate(){var t;null==(t=y.current)||t.forceUpdate()},transformOrigin:ao.transformOrigin.varRef,referenceRef:x,popperRef:S,getPopperProps:E,getArrowProps:T,getArrowInnerProps:M,getReferenceProps:w}}function Wa(t){const{size:e,shadowColor:n,bg:r,style:i}=t,o={...i,position:"absolute"};return e&&(o["--popper-arrow-size"]=e),n&&(o["--popper-arrow-shadow-color"]=n),r&&(o["--popper-arrow-bg"]=r),o}function Ga(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];const n=(0,r.useRef)(t);return(0,r.useEffect)((()=>{n.current=t})),(0,r.useCallback)((function(){for(var t,e=arguments.length,r=new Array(e),i=0;i<e;i++)r[i]=arguments[i];return null==(t=n.current)?void 0:t.call(n,...r)}),e)}function qa(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{onClose:e,onOpen:n,isOpen:i,id:o}=t,a=Ga(n),s=Ga(e),[l,c]=(0,r.useState)(t.defaultIsOpen||!1),u=void 0!==i?i:l,h=void 0!==i,d=(0,r.useId)(),f=null!=o?o:"disclosure-".concat(d),p=(0,r.useCallback)((()=>{h||c(!1),null==s||s()}),[h,s]),m=(0,r.useCallback)((()=>{h||c(!0),null==a||a()}),[h,a]),g=(0,r.useCallback)((()=>{u?p():m()}),[u,m,p]);return{isOpen:u,onOpen:m,onClose:p,onToggle:g,isControlled:h,getButtonProps:function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{...t,"aria-expanded":u,"aria-controls":f,onClick(e){var n;null==(n=t.onClick)||n.call(t,e),g()}}},getDisclosureProps:function(){return{...arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},hidden:!u,id:f}}}}function Ha(t,e,n,i){const o=Ga(n);return(0,r.useEffect)((()=>{const r="function"===typeof t?t():null!=t?t:document;if(n&&r)return r.addEventListener(e,o,i),()=>{r.removeEventListener(e,o,i)}}),[e,t,i,o,n]),()=>{const n="function"===typeof t?t():null!=t?t:document;null==n||n.removeEventListener(e,o,i)}}var Za=t=>{var e;return(null==(e=t.current)?void 0:e.ownerDocument)||document},Xa=t=>{var e,n;return(null==(n=null==(e=t.current)?void 0:e.ownerDocument)?void 0:n.defaultView)||window};function Ya(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{openDelay:e=0,closeDelay:n=0,closeOnClick:i=!0,closeOnMouseDown:o,closeOnScroll:a,closeOnPointerDown:s=o,closeOnEsc:l=!0,onOpen:c,onClose:u,placement:h,id:d,isOpen:f,defaultIsOpen:p,arrowSize:m=10,arrowShadowColor:g,arrowPadding:y,modifiers:v,isDisabled:_,gutter:b,offset:x,direction:w,...S}=t,{isOpen:E,onOpen:T,onClose:M}=qa({isOpen:f,defaultIsOpen:p,onOpen:c,onClose:u}),{referenceRef:A,getPopperProps:C,getArrowInnerProps:P,getArrowProps:k}=Va({enabled:E,placement:h,arrowPadding:y,modifiers:v,gutter:b,offset:x,direction:w}),I=(0,r.useId)(),O="tooltip-".concat(null!=d?d:I),L=(0,r.useRef)(null),j=(0,r.useRef)(),z=(0,r.useCallback)((()=>{j.current&&(clearTimeout(j.current),j.current=void 0)}),[]),R=(0,r.useRef)(),D=(0,r.useCallback)((()=>{R.current&&(clearTimeout(R.current),R.current=void 0)}),[]),B=(0,r.useCallback)((()=>{D(),M()}),[M,D]),F=function(t,e){return(0,r.useEffect)((()=>{const n=Za(t);return n.addEventListener(Ka,e),()=>n.removeEventListener(Ka,e)}),[e,t]),()=>{const e=Za(t),n=Xa(t);e.dispatchEvent(new n.CustomEvent(Ka))}}(L,B),N=(0,r.useCallback)((()=>{if(!_&&!j.current){E&&F();const t=Xa(L);j.current=t.setTimeout(T,e)}}),[F,_,E,T,e]),U=(0,r.useCallback)((()=>{z();const t=Xa(L);R.current=t.setTimeout(B,n)}),[n,B,z]),V=(0,r.useCallback)((()=>{E&&i&&U()}),[i,U,E]),W=(0,r.useCallback)((()=>{E&&s&&U()}),[s,U,E]),G=(0,r.useCallback)((t=>{E&&"Escape"===t.key&&U()}),[E,U]);Ha((()=>Za(L)),"keydown",l?G:void 0),Ha((()=>{if(!a)return null;const t=L.current;if(!t)return null;const e=io(t);return"body"===e.localName?Xa(L):e}),"scroll",(()=>{E&&a&&B()}),{passive:!0,capture:!0}),(0,r.useEffect)((()=>{_&&(z(),E&&M())}),[_,E,M,z]),(0,r.useEffect)((()=>()=>{z(),D()}),[z,D]),Ha((()=>L.current),"pointerleave",U);const q=(0,r.useCallback)((function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return{...t,ref:Xi(L,e,A),onPointerEnter:Dt(t.onPointerEnter,(t=>{"touch"!==t.pointerType&&N()})),onClick:Dt(t.onClick,V),onPointerDown:Dt(t.onPointerDown,W),onFocus:Dt(t.onFocus,N),onBlur:Dt(t.onBlur,U),"aria-describedby":E?O:void 0}}),[N,U,W,E,O,V,A]),H=(0,r.useCallback)((function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return C({...t,style:{...t.style,[ao.arrowSize.var]:m?"".concat(m,"px"):void 0,[ao.arrowShadowColor.var]:g}},e)}),[C,m,g]),Z=(0,r.useCallback)((function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;const n={...t.style,position:"relative",transformOrigin:ao.transformOrigin.varRef};return{ref:e,...S,...t,id:O,role:"tooltip",style:n}}),[S,O]);return{isOpen:E,show:N,hide:U,getTriggerProps:q,getTooltipProps:Z,getTooltipPositionerProps:H,getArrowProps:k,getArrowInnerProps:P}}var Ka="chakra-ui:close-tooltip";var[$a,Ja]=Ii({strict:!1,name:"PortalManagerContext"});function Qa(t){const{children:e,zIndex:n}=t;return(0,Si.jsx)($a,{value:{zIndex:n},children:e})}Qa.displayName="PortalManager";var[ts,es]=Ii({strict:!1,name:"PortalContext"}),ns="chakra-portal",rs=t=>(0,Si.jsx)("div",{className:"chakra-portal-zIndex",style:{position:"absolute",zIndex:t.zIndex,top:0,left:0,right:0},children:t.children}),is=t=>{const{appendToParentPortal:e,children:n}=t,[i,o]=(0,r.useState)(null),s=(0,r.useRef)(null),[,l]=(0,r.useState)({});(0,r.useEffect)((()=>l({})),[]);const c=es(),u=Ja();Ai((()=>{if(!i)return;const t=i.ownerDocument,n=e&&null!=c?c:t.body;if(!n)return;s.current=t.createElement("div"),s.current.className=ns,n.appendChild(s.current),l({});const r=s.current;return()=>{n.contains(r)&&n.removeChild(r)}}),[i]);const h=(null==u?void 0:u.zIndex)?(0,Si.jsx)(rs,{zIndex:null==u?void 0:u.zIndex,children:n}):n;return s.current?(0,a.createPortal)((0,Si.jsx)(ts,{value:s.current,children:h}),s.current):(0,Si.jsx)("span",{ref:t=>{t&&o(t)}})},os=t=>{const{children:e,containerRef:n,appendToParentPortal:i}=t,o=n.current,s=null!=o?o:"undefined"!==typeof window?document.body:void 0,l=(0,r.useMemo)((()=>{const t=null==o?void 0:o.ownerDocument.createElement("div");return t&&(t.className=ns),t}),[o]),[,c]=(0,r.useState)({});return Ai((()=>c({})),[]),Ai((()=>{if(l&&s)return s.appendChild(l),()=>{s.removeChild(l)}}),[l,s]),s&&l?(0,a.createPortal)((0,Si.jsx)(ts,{value:i?l:null,children:e}),l):null};function as(t){const e={appendToParentPortal:!0,...t},{containerRef:n,...r}=e;return n?(0,Si.jsx)(os,{containerRef:n,...r}):(0,Si.jsx)(is,{...r})}as.className=ns,as.selector=".chakra-portal",as.displayName="Portal";const ss=(0,r.createContext)({transformPagePoint:t=>t,isStatic:!1,reducedMotion:"never"}),ls=(0,r.createContext)({}),cs=(0,r.createContext)(null),us="undefined"!==typeof document,hs=us?r.useLayoutEffect:r.useEffect,ds=(0,r.createContext)({strict:!1}),fs=t=>t.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),ps="data-"+fs("framerAppearId");function ms(t){return t&&"object"===typeof t&&Object.prototype.hasOwnProperty.call(t,"current")}function gs(t){return"string"===typeof t||Array.isArray(t)}function ys(t){return null!==t&&"object"===typeof t&&"function"===typeof t.start}const vs=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],_s=["initial",...vs];function bs(t){return ys(t.animate)||_s.some((e=>gs(t[e])))}function xs(t){return Boolean(bs(t)||t.variants)}function ws(t){const{initial:e,animate:n}=function(t,e){if(bs(t)){const{initial:e,animate:n}=t;return{initial:!1===e||gs(e)?e:void 0,animate:gs(n)?n:void 0}}return!1!==t.inherit?e:{}}(t,(0,r.useContext)(ls));return(0,r.useMemo)((()=>({initial:e,animate:n})),[Ss(e),Ss(n)])}function Ss(t){return Array.isArray(t)?t.join(" "):t}const Es={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},Ts={};for(const n in Es)Ts[n]={isEnabled:t=>Es[n].some((e=>!!t[e]))};const Ms=(0,r.createContext)({}),As=(0,r.createContext)({}),Cs=Symbol.for("motionComponentSymbol");function Ps(t){let{preloadedFeatures:e,createVisualElement:n,useRender:i,useVisualState:o,Component:a}=t;e&&function(t){for(const e in t)Ts[e]={...Ts[e],...t[e]}}(e);const s=(0,r.forwardRef)((function(t,s){let l;const c={...(0,r.useContext)(ss),...t,layoutId:ks(t)},{isStatic:u}=c,h=ws(t),d=o(t,u);if(!u&&us){h.visualElement=function(t,e,n,i){const{visualElement:o}=(0,r.useContext)(ls),a=(0,r.useContext)(ds),s=(0,r.useContext)(cs),l=(0,r.useContext)(ss).reducedMotion,c=(0,r.useRef)();i=i||a.renderer,!c.current&&i&&(c.current=i(t,{visualState:e,parent:o,props:n,presenceContext:s,blockInitialAnimation:!!s&&!1===s.initial,reducedMotionConfig:l}));const u=c.current;(0,r.useInsertionEffect)((()=>{u&&u.update(n,s)}));const h=(0,r.useRef)(Boolean(n[ps]&&!window.HandoffComplete));return hs((()=>{u&&(u.render(),h.current&&u.animationState&&u.animationState.animateChanges())})),(0,r.useEffect)((()=>{u&&(u.updateFeatures(),!h.current&&u.animationState&&u.animationState.animateChanges(),h.current&&(h.current=!1,window.HandoffComplete=!0))})),u}(a,d,c,n);const t=(0,r.useContext)(As),i=(0,r.useContext)(ds).strict;h.visualElement&&(l=h.visualElement.loadFeatures(c,i,e,t))}return r.createElement(ls.Provider,{value:h},l&&h.visualElement?r.createElement(l,{visualElement:h.visualElement,...c}):null,i(a,t,function(t,e,n){return(0,r.useCallback)((r=>{r&&t.mount&&t.mount(r),e&&(r?e.mount(r):e.unmount()),n&&("function"===typeof n?n(r):ms(n)&&(n.current=r))}),[e])}(d,h.visualElement,s),d,u,h.visualElement))}));return s[Cs]=a,s}function ks(t){let{layoutId:e}=t;const n=(0,r.useContext)(Ms).id;return n&&void 0!==e?n+"-"+e:e}function Is(t){function e(e){return Ps(t(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}))}if("undefined"===typeof Proxy)return e;const n=new Map;return new Proxy(e,{get:(t,r)=>(n.has(r)||n.set(r,e(r)),n.get(r))})}const Os=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function Ls(t){return"string"===typeof t&&!t.includes("-")&&!!(Os.indexOf(t)>-1||/[A-Z]/.test(t))}const js={};const zs=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],Rs=new Set(zs);function Ds(t,e){let{layout:n,layoutId:r}=e;return Rs.has(t)||t.startsWith("origin")||(n||void 0!==r)&&(!!js[t]||"opacity"===t)}const Bs=t=>Boolean(t&&t.getVelocity),Fs={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},Ns=zs.length;const Us=t=>e=>"string"===typeof e&&e.startsWith(t),Vs=Us("--"),Ws=Us("var(--"),Gs=(t,e)=>e&&"number"===typeof t?e.transform(t):t,qs=(t,e,n)=>Math.min(Math.max(n,t),e),Hs={test:t=>"number"===typeof t,parse:parseFloat,transform:t=>t},Zs={...Hs,transform:t=>qs(0,1,t)},Xs={...Hs,default:1},Ys=t=>Math.round(1e5*t)/1e5,Ks=/(-)?([\d]*\.?[\d])+/g,$s=/(#[0-9a-f]{3,8}|(rgb|hsl)a?\((-?[\d\.]+%?[,\s]+){2}(-?[\d\.]+%?)\s*[\,\/]?\s*[\d\.]*%?\))/gi,Js=/^(#[0-9a-f]{3,8}|(rgb|hsl)a?\((-?[\d\.]+%?[,\s]+){2}(-?[\d\.]+%?)\s*[\,\/]?\s*[\d\.]*%?\))$/i;function Qs(t){return"string"===typeof t}const tl=t=>({test:e=>Qs(e)&&e.endsWith(t)&&1===e.split(" ").length,parse:parseFloat,transform:e=>"".concat(e).concat(t)}),el=tl("deg"),nl=tl("%"),rl=tl("px"),il=tl("vh"),ol=tl("vw"),al={...nl,parse:t=>nl.parse(t)/100,transform:t=>nl.transform(100*t)},sl={...Hs,transform:Math.round},ll={borderWidth:rl,borderTopWidth:rl,borderRightWidth:rl,borderBottomWidth:rl,borderLeftWidth:rl,borderRadius:rl,radius:rl,borderTopLeftRadius:rl,borderTopRightRadius:rl,borderBottomRightRadius:rl,borderBottomLeftRadius:rl,width:rl,maxWidth:rl,height:rl,maxHeight:rl,size:rl,top:rl,right:rl,bottom:rl,left:rl,padding:rl,paddingTop:rl,paddingRight:rl,paddingBottom:rl,paddingLeft:rl,margin:rl,marginTop:rl,marginRight:rl,marginBottom:rl,marginLeft:rl,rotate:el,rotateX:el,rotateY:el,rotateZ:el,scale:Xs,scaleX:Xs,scaleY:Xs,scaleZ:Xs,skew:el,skewX:el,skewY:el,distance:rl,translateX:rl,translateY:rl,translateZ:rl,x:rl,y:rl,z:rl,perspective:rl,transformPerspective:rl,opacity:Zs,originX:al,originY:al,originZ:rl,zIndex:sl,fillOpacity:Zs,strokeOpacity:Zs,numOctaves:sl};function cl(t,e,n,r){const{style:i,vars:o,transform:a,transformOrigin:s}=t;let l=!1,c=!1,u=!0;for(const h in e){const t=e[h];if(Vs(h)){o[h]=t;continue}const n=ll[h],r=Gs(t,n);if(Rs.has(h)){if(l=!0,a[h]=r,!u)continue;t!==(n.default||0)&&(u=!1)}else h.startsWith("origin")?(c=!0,s[h]=r):i[h]=r}if(e.transform||(l||r?i.transform=function(t,e,n,r){let{enableHardwareAcceleration:i=!0,allowTransformNone:o=!0}=e,a="";for(let s=0;s<Ns;s++){const e=zs[s];if(void 0!==t[e]){const n=Fs[e]||e;a+="".concat(n,"(").concat(t[e],") ")}}return i&&!t.z&&(a+="translateZ(0)"),a=a.trim(),r?a=r(t,n?"":a):o&&n&&(a="none"),a}(t.transform,n,u,r):i.transform&&(i.transform="none")),c){const{originX:t="50%",originY:e="50%",originZ:n=0}=s;i.transformOrigin="".concat(t," ").concat(e," ").concat(n)}}const ul=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function hl(t,e,n){for(const r in e)Bs(e[r])||Ds(r,n)||(t[r]=e[r])}function dl(t,e,n){const i={};return hl(i,t.style||{},t),Object.assign(i,function(t,e,n){let{transformTemplate:i}=t;return(0,r.useMemo)((()=>{const t=ul();return cl(t,e,{enableHardwareAcceleration:!n},i),Object.assign({},t.vars,t.style)}),[e])}(t,e,n)),t.transformValues?t.transformValues(i):i}function fl(t,e,n){const r={},i=dl(t,e,n);return t.drag&&!1!==t.dragListener&&(r.draggable=!1,i.userSelect=i.WebkitUserSelect=i.WebkitTouchCallout="none",i.touchAction=!0===t.drag?"none":"pan-".concat("x"===t.drag?"y":"x")),void 0===t.tabIndex&&(t.onTap||t.onTapStart||t.whileTap)&&(r.tabIndex=0),r.style=i,r}const pl=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","transformValues","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function ml(t){return t.startsWith("while")||t.startsWith("drag")&&"draggable"!==t||t.startsWith("layout")||t.startsWith("onTap")||t.startsWith("onPan")||t.startsWith("onLayout")||pl.has(t)}let gl=t=>!ml(t);try{(yl=require("@emotion/is-prop-valid").default)&&(gl=t=>t.startsWith("on")?!ml(t):yl(t))}catch(ci){}var yl;function vl(t,e,n){return"string"===typeof t?t:rl.transform(e+n*t)}const _l={offset:"stroke-dashoffset",array:"stroke-dasharray"},bl={offset:"strokeDashoffset",array:"strokeDasharray"};function xl(t,e,n,r,i){let{attrX:o,attrY:a,attrScale:s,originX:l,originY:c,pathLength:u,pathSpacing:h=1,pathOffset:d=0,...f}=e;if(cl(t,f,n,i),r)return void(t.style.viewBox&&(t.attrs.viewBox=t.style.viewBox));t.attrs=t.style,t.style={};const{attrs:p,style:m,dimensions:g}=t;p.transform&&(g&&(m.transform=p.transform),delete p.transform),g&&(void 0!==l||void 0!==c||m.transform)&&(m.transformOrigin=function(t,e,n){const r=vl(e,t.x,t.width),i=vl(n,t.y,t.height);return"".concat(r," ").concat(i)}(g,void 0!==l?l:.5,void 0!==c?c:.5)),void 0!==o&&(p.x=o),void 0!==a&&(p.y=a),void 0!==s&&(p.scale=s),void 0!==u&&function(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,i=!(arguments.length>4&&void 0!==arguments[4])||arguments[4];t.pathLength=1;const o=i?_l:bl;t[o.offset]=rl.transform(-r);const a=rl.transform(e),s=rl.transform(n);t[o.array]="".concat(a," ").concat(s)}(p,u,h,d,!1)}const wl=()=>({...ul(),attrs:{}}),Sl=t=>"string"===typeof t&&"svg"===t.toLowerCase();function El(t,e,n,i){const o=(0,r.useMemo)((()=>{const n=wl();return xl(n,e,{enableHardwareAcceleration:!1},Sl(i),t.transformTemplate),{...n.attrs,style:{...n.style}}}),[e]);if(t.style){const e={};hl(e,t.style,t),o.style={...e,...o.style}}return o}function Tl(){let t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return(e,n,i,o,a)=>{let{latestValues:s}=o;const l=(Ls(e)?El:fl)(n,s,a,e),c=function(t,e,n){const r={};for(const i in t)"values"===i&&"object"===typeof t.values||(gl(i)||!0===n&&ml(i)||!e&&!ml(i)||t.draggable&&i.startsWith("onDrag"))&&(r[i]=t[i]);return r}(n,"string"===typeof e,t),u={...c,...l,ref:i},{children:h}=n,d=(0,r.useMemo)((()=>Bs(h)?h.get():h),[h]);return(0,r.createElement)(e,{...u,children:d})}}function Ml(t,e,n,r){let{style:i,vars:o}=e;Object.assign(t.style,i,r&&r.getProjectionStyles(n));for(const a in o)t.style.setProperty(a,o[a])}const Al=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function Cl(t,e,n,r){Ml(t,e,void 0,r);for(const i in e.attrs)t.setAttribute(Al.has(i)?i:fs(i),e.attrs[i])}function Pl(t,e){const{style:n}=t,r={};for(const i in n)(Bs(n[i])||e.style&&Bs(e.style[i])||Ds(i,t))&&(r[i]=n[i]);return r}function kl(t,e){const n=Pl(t,e);for(const r in t)if(Bs(t[r])||Bs(e[r])){n[-1!==zs.indexOf(r)?"attr"+r.charAt(0).toUpperCase()+r.substring(1):r]=t[r]}return n}function Il(t,e,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};return"function"===typeof e&&(e=e(void 0!==n?n:t.custom,r,i)),"string"===typeof e&&(e=t.variants&&t.variants[e]),"function"===typeof e&&(e=e(void 0!==n?n:t.custom,r,i)),e}function Ol(t){const e=(0,r.useRef)(null);return null===e.current&&(e.current=t()),e.current}const Ll=t=>Array.isArray(t),jl=t=>Boolean(t&&"object"===typeof t&&t.mix&&t.toValue),zl=t=>Ll(t)?t[t.length-1]||0:t;function Rl(t){const e=Bs(t)?t.get():t;return jl(e)?e.toValue():e}const Dl=t=>(e,n)=>{const i=(0,r.useContext)(ls),o=(0,r.useContext)(cs),a=()=>function(t,e,n,r){let{scrapeMotionValuesFromProps:i,createRenderState:o,onMount:a}=t;const s={latestValues:Bl(e,n,r,i),renderState:o()};return a&&(s.mount=t=>a(e,t,s)),s}(t,e,i,o);return n?a():Ol(a)};function Bl(t,e,n,r){const i={},o=r(t,{});for(const d in o)i[d]=Rl(o[d]);let{initial:a,animate:s}=t;const l=bs(t),c=xs(t);e&&c&&!l&&!1!==t.inherit&&(void 0===a&&(a=e.initial),void 0===s&&(s=e.animate));let u=!!n&&!1===n.initial;u=u||!1===a;const h=u?s:a;if(h&&"boolean"!==typeof h&&!ys(h)){(Array.isArray(h)?h:[h]).forEach((e=>{const n=Il(t,e);if(!n)return;const{transitionEnd:r,transition:o,...a}=n;for(const t in a){let e=a[t];if(Array.isArray(e)){e=e[u?e.length-1:0]}null!==e&&(i[t]=e)}for(const t in r)i[t]=r[t]}))}return i}const Fl=t=>t;class Nl{constructor(){this.order=[],this.scheduled=new Set}add(t){if(!this.scheduled.has(t))return this.scheduled.add(t),this.order.push(t),!0}remove(t){const e=this.order.indexOf(t);-1!==e&&(this.order.splice(e,1),this.scheduled.delete(t))}clear(){this.order.length=0,this.scheduled.clear()}}const Ul=["prepare","read","update","preRender","render","postRender"];const{schedule:Vl,cancel:Wl,state:Gl,steps:ql}=function(t,e){let n=!1,r=!0;const i={delta:0,timestamp:0,isProcessing:!1},o=Ul.reduce(((t,e)=>(t[e]=function(t){let e=new Nl,n=new Nl,r=0,i=!1,o=!1;const a=new WeakSet,s={schedule:function(t){const o=arguments.length>2&&void 0!==arguments[2]&&arguments[2]&&i,s=o?e:n;return arguments.length>1&&void 0!==arguments[1]&&arguments[1]&&a.add(t),s.add(t)&&o&&i&&(r=e.order.length),t},cancel:t=>{n.remove(t),a.delete(t)},process:l=>{if(i)o=!0;else{if(i=!0,[e,n]=[n,e],n.clear(),r=e.order.length,r)for(let n=0;n<r;n++){const r=e.order[n];r(l),a.has(r)&&(s.schedule(r),t())}i=!1,o&&(o=!1,s.process(l))}}};return s}((()=>n=!0)),t)),{}),a=t=>o[t].process(i),s=()=>{const o=performance.now();n=!1,i.delta=r?1e3/60:Math.max(Math.min(o-i.timestamp,40),1),i.timestamp=o,i.isProcessing=!0,Ul.forEach(a),i.isProcessing=!1,n&&e&&(r=!1,t(s))},l=Ul.reduce(((e,a)=>{const l=o[a];return e[a]=function(e){let o=arguments.length>1&&void 0!==arguments[1]&&arguments[1],a=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return n||(n=!0,r=!0,i.isProcessing||t(s)),l.schedule(e,o,a)},e}),{});return{schedule:l,cancel:t=>Ul.forEach((e=>o[e].cancel(t))),state:i,steps:o}}("undefined"!==typeof requestAnimationFrame?requestAnimationFrame:Fl,!0),Hl={useVisualState:Dl({scrapeMotionValuesFromProps:kl,createRenderState:wl,onMount:(t,e,n)=>{let{renderState:r,latestValues:i}=n;Vl.read((()=>{try{r.dimensions="function"===typeof e.getBBox?e.getBBox():e.getBoundingClientRect()}catch(pbt){r.dimensions={x:0,y:0,width:0,height:0}}})),Vl.render((()=>{xl(r,i,{enableHardwareAcceleration:!1},Sl(e.tagName),t.transformTemplate),Cl(e,r)}))}})},Zl={useVisualState:Dl({scrapeMotionValuesFromProps:Pl,createRenderState:ul})};function Xl(t,e,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{passive:!0};return t.addEventListener(e,n,r),()=>t.removeEventListener(e,n)}const Yl=t=>"mouse"===t.pointerType?"number"!==typeof t.button||t.button<=0:!1!==t.isPrimary;function Kl(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"page";return{point:{x:t[e+"X"],y:t[e+"Y"]}}}const $l=t=>e=>Yl(e)&&t(e,Kl(e));function Jl(t,e,n,r){return Xl(t,e,$l(n),r)}const Ql=(t,e)=>n=>e(t(n)),tc=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return e.reduce(Ql)};function ec(t){let e=null;return()=>{const n=()=>{e=null};return null===e&&(e=t,n)}}const nc=ec("dragHorizontal"),rc=ec("dragVertical");function ic(t){let e=!1;if("y"===t)e=rc();else if("x"===t)e=nc();else{const t=nc(),n=rc();t&&n?e=()=>{t(),n()}:(t&&t(),n&&n())}return e}function oc(){const t=ic(!0);return!t||(t(),!1)}class ac{constructor(t){this.isMounted=!1,this.node=t}update(){}}function sc(t,e){const n="pointer"+(e?"enter":"leave"),r="onHover"+(e?"Start":"End");return Jl(t.current,n,((n,i)=>{if("touch"===n.pointerType||oc())return;const o=t.getProps();t.animationState&&o.whileHover&&t.animationState.setActive("whileHover",e),o[r]&&Vl.update((()=>o[r](n,i)))}),{passive:!t.getProps()[r]})}const lc=(t,e)=>!!e&&(t===e||lc(t,e.parentElement));function cc(t,e){if(!e)return;const n=new PointerEvent("pointer"+t);e(n,Kl(n))}const uc=new WeakMap,hc=new WeakMap,dc=t=>{const e=uc.get(t.target);e&&e(t)},fc=t=>{t.forEach(dc)};function pc(t,e,n){const r=function(t){let{root:e,...n}=t;const r=e||document;hc.has(r)||hc.set(r,{});const i=hc.get(r),o=JSON.stringify(n);return i[o]||(i[o]=new IntersectionObserver(fc,{root:e,...n})),i[o]}(e);return uc.set(t,n),r.observe(t),()=>{uc.delete(t),r.unobserve(t)}}const mc={some:0,all:1};const gc={inView:{Feature:class extends ac{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:t={}}=this.node.getProps(),{root:e,margin:n,amount:r="some",once:i}=t,o={root:e?e.current:void 0,rootMargin:n,threshold:"number"===typeof r?r:mc[r]};return pc(this.node.current,o,(t=>{const{isIntersecting:e}=t;if(this.isInView===e)return;if(this.isInView=e,i&&!e&&this.hasEnteredView)return;e&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",e);const{onViewportEnter:n,onViewportLeave:r}=this.node.getProps(),o=e?n:r;o&&o(t)}))}mount(){this.startObserver()}update(){if("undefined"===typeof IntersectionObserver)return;const{props:t,prevProps:e}=this.node,n=["amount","margin","root"].some(function(t){let{viewport:e={}}=t,{viewport:n={}}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return t=>e[t]!==n[t]}(t,e));n&&this.startObserver()}unmount(){}}},tap:{Feature:class extends ac{constructor(){super(...arguments),this.removeStartListeners=Fl,this.removeEndListeners=Fl,this.removeAccessibleListeners=Fl,this.startPointerPress=(t,e)=>{if(this.isPressing)return;this.removeEndListeners();const n=this.node.getProps(),r=Jl(window,"pointerup",((t,e)=>{if(!this.checkPressEnd())return;const{onTap:n,onTapCancel:r,globalTapTarget:i}=this.node.getProps();Vl.update((()=>{i||lc(this.node.current,t.target)?n&&n(t,e):r&&r(t,e)}))}),{passive:!(n.onTap||n.onPointerUp)}),i=Jl(window,"pointercancel",((t,e)=>this.cancelPress(t,e)),{passive:!(n.onTapCancel||n.onPointerCancel)});this.removeEndListeners=tc(r,i),this.startPress(t,e)},this.startAccessiblePress=()=>{const t=Xl(this.node.current,"keydown",(t=>{if("Enter"!==t.key||this.isPressing)return;this.removeEndListeners(),this.removeEndListeners=Xl(this.node.current,"keyup",(t=>{"Enter"===t.key&&this.checkPressEnd()&&cc("up",((t,e)=>{const{onTap:n}=this.node.getProps();n&&Vl.update((()=>n(t,e)))}))})),cc("down",((t,e)=>{this.startPress(t,e)}))})),e=Xl(this.node.current,"blur",(()=>{this.isPressing&&cc("cancel",((t,e)=>this.cancelPress(t,e)))}));this.removeAccessibleListeners=tc(t,e)}}startPress(t,e){this.isPressing=!0;const{onTapStart:n,whileTap:r}=this.node.getProps();r&&this.node.animationState&&this.node.animationState.setActive("whileTap",!0),n&&Vl.update((()=>n(t,e)))}checkPressEnd(){this.removeEndListeners(),this.isPressing=!1;return this.node.getProps().whileTap&&this.node.animationState&&this.node.animationState.setActive("whileTap",!1),!oc()}cancelPress(t,e){if(!this.checkPressEnd())return;const{onTapCancel:n}=this.node.getProps();n&&Vl.update((()=>n(t,e)))}mount(){const t=this.node.getProps(),e=Jl(t.globalTapTarget?window:this.node.current,"pointerdown",this.startPointerPress,{passive:!(t.onTapStart||t.onPointerStart)}),n=Xl(this.node.current,"focus",this.startAccessiblePress);this.removeStartListeners=tc(e,n)}unmount(){this.removeStartListeners(),this.removeEndListeners(),this.removeAccessibleListeners()}}},focus:{Feature:class extends ac{constructor(){super(...arguments),this.isActive=!1}onFocus(){let t=!1;try{t=this.node.current.matches(":focus-visible")}catch(pbt){t=!0}t&&this.node.animationState&&(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){this.isActive&&this.node.animationState&&(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=tc(Xl(this.node.current,"focus",(()=>this.onFocus())),Xl(this.node.current,"blur",(()=>this.onBlur())))}unmount(){}}},hover:{Feature:class extends ac{mount(){this.unmount=tc(sc(this.node,!0),sc(this.node,!1))}unmount(){}}}};function yc(t,e){if(!Array.isArray(e))return!1;const n=e.length;if(n!==t.length)return!1;for(let r=0;r<n;r++)if(e[r]!==t[r])return!1;return!0}function vc(t,e,n){const r=t.getProps();return Il(r,e,void 0!==n?n:r.custom,function(t){const e={};return t.values.forEach(((t,n)=>e[n]=t.get())),e}(t),function(t){const e={};return t.values.forEach(((t,n)=>e[n]=t.getVelocity())),e}(t))}let _c=Fl,bc=Fl;const xc=t=>1e3*t,wc=t=>t/1e3,Sc=!1,Ec=t=>Array.isArray(t)&&"number"===typeof t[0];function Tc(t){return Boolean(!t||"string"===typeof t&&Ac[t]||Ec(t)||Array.isArray(t)&&t.every(Tc))}const Mc=t=>{let[e,n,r,i]=t;return"cubic-bezier(".concat(e,", ").concat(n,", ").concat(r,", ").concat(i,")")},Ac={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:Mc([0,.65,.55,1]),circOut:Mc([.55,0,1,.45]),backIn:Mc([.31,.01,.66,-.59]),backOut:Mc([.33,1.53,.69,.99])};function Cc(t){if(t)return Ec(t)?Mc(t):Array.isArray(t)?t.map(Cc):Ac[t]}const Pc=(t,e,n)=>(((1-3*n+3*e)*t+(3*n-6*e))*t+3*e)*t,kc=1e-7,Ic=12;function Oc(t,e,n,r){if(t===e&&n===r)return Fl;const i=e=>function(t,e,n,r,i){let o,a,s=0;do{a=e+(n-e)/2,o=Pc(a,r,i)-t,o>0?n=a:e=a}while(Math.abs(o)>kc&&++s<Ic);return a}(e,0,1,t,n);return t=>0===t||1===t?t:Pc(i(t),e,r)}const Lc=Oc(.42,0,1,1),jc=Oc(0,0,.58,1),zc=Oc(.42,0,.58,1),Rc=t=>Array.isArray(t)&&"number"!==typeof t[0],Dc=t=>e=>e<=.5?t(2*e)/2:(2-t(2*(1-e)))/2,Bc=t=>e=>1-t(1-e),Fc=t=>1-Math.sin(Math.acos(t)),Nc=Bc(Fc),Uc=Dc(Fc),Vc=Oc(.33,1.53,.69,.99),Wc=Bc(Vc),Gc=Dc(Wc),qc={linear:Fl,easeIn:Lc,easeInOut:zc,easeOut:jc,circIn:Fc,circInOut:Uc,circOut:Nc,backIn:Wc,backInOut:Gc,backOut:Vc,anticipate:t=>(t*=2)<1?.5*Wc(t):.5*(2-Math.pow(2,-10*(t-1)))},Hc=t=>{if(Array.isArray(t)){bc(4===t.length,"Cubic bezier arrays must contain four numerical values.");const[e,n,r,i]=t;return Oc(e,n,r,i)}return"string"===typeof t?(bc(void 0!==qc[t],"Invalid easing type '".concat(t,"'")),qc[t]):t},Zc=(t,e)=>n=>Boolean(Qs(n)&&Js.test(n)&&n.startsWith(t)||e&&Object.prototype.hasOwnProperty.call(n,e)),Xc=(t,e,n)=>r=>{if(!Qs(r))return r;const[i,o,a,s]=r.match(Ks);return{[t]:parseFloat(i),[e]:parseFloat(o),[n]:parseFloat(a),alpha:void 0!==s?parseFloat(s):1}},Yc={...Hs,transform:t=>Math.round((t=>qs(0,255,t))(t))},Kc={test:Zc("rgb","red"),parse:Xc("red","green","blue"),transform:t=>{let{red:e,green:n,blue:r,alpha:i=1}=t;return"rgba("+Yc.transform(e)+", "+Yc.transform(n)+", "+Yc.transform(r)+", "+Ys(Zs.transform(i))+")"}};const $c={test:Zc("#"),parse:function(t){let e="",n="",r="",i="";return t.length>5?(e=t.substring(1,3),n=t.substring(3,5),r=t.substring(5,7),i=t.substring(7,9)):(e=t.substring(1,2),n=t.substring(2,3),r=t.substring(3,4),i=t.substring(4,5),e+=e,n+=n,r+=r,i+=i),{red:parseInt(e,16),green:parseInt(n,16),blue:parseInt(r,16),alpha:i?parseInt(i,16)/255:1}},transform:Kc.transform},Jc={test:Zc("hsl","hue"),parse:Xc("hue","saturation","lightness"),transform:t=>{let{hue:e,saturation:n,lightness:r,alpha:i=1}=t;return"hsla("+Math.round(e)+", "+nl.transform(Ys(n))+", "+nl.transform(Ys(r))+", "+Ys(Zs.transform(i))+")"}},Qc={test:t=>Kc.test(t)||$c.test(t)||Jc.test(t),parse:t=>Kc.test(t)?Kc.parse(t):Jc.test(t)?Jc.parse(t):$c.parse(t),transform:t=>Qs(t)?t:t.hasOwnProperty("red")?Kc.transform(t):Jc.transform(t)},tu=(t,e,n)=>-n*t+n*e+t;function eu(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+6*(e-t)*n:n<.5?e:n<2/3?t+(e-t)*(2/3-n)*6:t}const nu=(t,e,n)=>{const r=t*t;return Math.sqrt(Math.max(0,n*(e*e-r)+r))},ru=[$c,Kc,Jc];function iu(t){const e=(n=t,ru.find((t=>t.test(n))));var n;bc(Boolean(e),"'".concat(t,"' is not an animatable color. Use the equivalent color code instead."));let r=e.parse(t);return e===Jc&&(r=function(t){let{hue:e,saturation:n,lightness:r,alpha:i}=t;e/=360,n/=100,r/=100;let o=0,a=0,s=0;if(n){const t=r<.5?r*(1+n):r+n-r*n,i=2*r-t;o=eu(i,t,e+1/3),a=eu(i,t,e),s=eu(i,t,e-1/3)}else o=a=s=r;return{red:Math.round(255*o),green:Math.round(255*a),blue:Math.round(255*s),alpha:i}}(r)),r}const ou=(t,e)=>{const n=iu(t),r=iu(e),i={...n};return t=>(i.red=nu(n.red,r.red,t),i.green=nu(n.green,r.green,t),i.blue=nu(n.blue,r.blue,t),i.alpha=tu(n.alpha,r.alpha,t),Kc.transform(i))};const au={regex:/var\s*\(\s*--[\w-]+(\s*,\s*(?:(?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)+)?\s*\)/g,countKey:"Vars",token:"${v}",parse:Fl},su={regex:$s,countKey:"Colors",token:"${c}",parse:Qc.parse},lu={regex:Ks,countKey:"Numbers",token:"${n}",parse:Hs.parse};function cu(t,e){let{regex:n,countKey:r,token:i,parse:o}=e;const a=t.tokenised.match(n);a&&(t["num"+r]=a.length,t.tokenised=t.tokenised.replace(n,i),t.values.push(...a.map(o)))}function uu(t){const e=t.toString(),n={value:e,tokenised:e,values:[],numVars:0,numColors:0,numNumbers:0};return n.value.includes("var(--")&&cu(n,au),cu(n,su),cu(n,lu),n}function hu(t){return uu(t).values}function du(t){const{values:e,numColors:n,numVars:r,tokenised:i}=uu(t),o=e.length;return t=>{let e=i;for(let i=0;i<o;i++)e=i<r?e.replace(au.token,t[i]):i<r+n?e.replace(su.token,Qc.transform(t[i])):e.replace(lu.token,Ys(t[i]));return e}}const fu=t=>"number"===typeof t?0:t;const pu={test:function(t){var e,n;return isNaN(t)&&Qs(t)&&((null===(e=t.match(Ks))||void 0===e?void 0:e.length)||0)+((null===(n=t.match($s))||void 0===n?void 0:n.length)||0)>0},parse:hu,createTransformer:du,getAnimatableNone:function(t){const e=hu(t);return du(t)(e.map(fu))}},mu=(t,e)=>n=>"".concat(n>0?e:t);function gu(t,e){return"number"===typeof t?n=>tu(t,e,n):Qc.test(t)?ou(t,e):t.startsWith("var(")?mu(t,e):_u(t,e)}const yu=(t,e)=>{const n=[...t],r=n.length,i=t.map(((t,n)=>gu(t,e[n])));return t=>{for(let e=0;e<r;e++)n[e]=i[e](t);return n}},vu=(t,e)=>{const n={...t,...e},r={};for(const i in n)void 0!==t[i]&&void 0!==e[i]&&(r[i]=gu(t[i],e[i]));return t=>{for(const e in r)n[e]=r[e](t);return n}},_u=(t,e)=>{const n=pu.createTransformer(e),r=uu(t),i=uu(e);return r.numVars===i.numVars&&r.numColors===i.numColors&&r.numNumbers>=i.numNumbers?tc(yu(r.values,i.values),n):(_c(!0,"Complex values '".concat(t,"' and '").concat(e,"' too different to mix. Ensure all colors are of the same type, and that each contains the same quantity of number and color values. Falling back to instant transition.")),mu(t,e))},bu=(t,e,n)=>{const r=e-t;return 0===r?1:(n-t)/r},xu=(t,e)=>n=>tu(t,e,n);function wu(t,e,n){const r=[],i=n||("number"===typeof(o=t[0])?xu:"string"===typeof o?Qc.test(o)?ou:_u:Array.isArray(o)?yu:"object"===typeof o?vu:xu);var o;const a=t.length-1;for(let s=0;s<a;s++){let n=i(t[s],t[s+1]);if(e){const t=Array.isArray(e)?e[s]||Fl:e;n=tc(t,n)}r.push(n)}return r}function Su(t,e){let{clamp:n=!0,ease:r,mixer:i}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const o=t.length;if(bc(o===e.length,"Both input and output ranges must be the same length"),1===o)return()=>e[0];t[0]>t[o-1]&&(t=[...t].reverse(),e=[...e].reverse());const a=wu(e,r,i),s=a.length,l=e=>{let n=0;if(s>1)for(;n<t.length-2&&!(e<t[n+1]);n++);const r=bu(t[n],t[n+1],e);return a[n](r)};return n?e=>l(qs(t[0],t[o-1],e)):l}function Eu(t,e){const n=t[t.length-1];for(let r=1;r<=e;r++){const i=bu(0,e,r);t.push(tu(n,1,i))}}function Tu(t){const e=[0];return Eu(e,t.length-1),e}function Mu(t,e){return t.map((()=>e||zc)).splice(0,t.length-1)}function Au(t){let{duration:e=300,keyframes:n,times:r,ease:i="easeInOut"}=t;const o=Rc(i)?i.map(Hc):Hc(i),a={done:!1,value:n[0]},s=function(t,e){return t.map((t=>t*e))}(r&&r.length===n.length?r:Tu(n),e),l=Su(s,n,{ease:Array.isArray(o)?o:Mu(n,o)});return{calculatedDuration:e,next:t=>(a.value=l(t),a.done=t>=e,a)}}function Cu(t,e){return e?t*(1e3/e):0}const Pu=5;function ku(t,e,n){const r=Math.max(e-Pu,0);return Cu(n-t(r),e-r)}const Iu=.001,Ou=.01,Lu=10,ju=.05,zu=1;function Ru(t){let e,n,{duration:r=800,bounce:i=.25,velocity:o=0,mass:a=1}=t;_c(r<=xc(Lu),"Spring duration must be 10 seconds or less");let s=1-i;s=qs(ju,zu,s),r=qs(Ou,Lu,wc(r)),s<1?(e=t=>{const e=t*s,n=e*r,i=e-o,a=Bu(t,s),l=Math.exp(-n);return Iu-i/a*l},n=t=>{const n=t*s*r,i=n*o+o,a=Math.pow(s,2)*Math.pow(t,2)*r,l=Math.exp(-n),c=Bu(Math.pow(t,2),s);return(-e(t)+Iu>0?-1:1)*((i-a)*l)/c}):(e=t=>Math.exp(-t*r)*((t-o)*r+1)-Iu,n=t=>Math.exp(-t*r)*(r*r*(o-t)));const l=function(t,e,n){let r=n;for(let i=1;i<Du;i++)r-=t(r)/e(r);return r}(e,n,5/r);if(r=xc(r),isNaN(l))return{stiffness:100,damping:10,duration:r};{const t=Math.pow(l,2)*a;return{stiffness:t,damping:2*s*Math.sqrt(a*t),duration:r}}}const Du=12;function Bu(t,e){return t*Math.sqrt(1-e*e)}const Fu=["duration","bounce"],Nu=["stiffness","damping","mass"];function Uu(t,e){return e.some((e=>void 0!==t[e]))}function Vu(t){let{keyframes:e,restDelta:n,restSpeed:r,...i}=t;const o=e[0],a=e[e.length-1],s={done:!1,value:o},{stiffness:l,damping:c,mass:u,duration:h,velocity:d,isResolvedFromDuration:f}=function(t){let e={velocity:0,stiffness:100,damping:10,mass:1,isResolvedFromDuration:!1,...t};if(!Uu(t,Nu)&&Uu(t,Fu)){const n=Ru(t);e={...e,...n,mass:1},e.isResolvedFromDuration=!0}return e}({...i,velocity:-wc(i.velocity||0)}),p=d||0,m=c/(2*Math.sqrt(l*u)),g=a-o,y=wc(Math.sqrt(l/u)),v=Math.abs(g)<5;let _;if(r||(r=v?.01:2),n||(n=v?.005:.5),m<1){const t=Bu(y,m);_=e=>{const n=Math.exp(-m*y*e);return a-n*((p+m*y*g)/t*Math.sin(t*e)+g*Math.cos(t*e))}}else if(1===m)_=t=>a-Math.exp(-y*t)*(g+(p+y*g)*t);else{const t=y*Math.sqrt(m*m-1);_=e=>{const n=Math.exp(-m*y*e),r=Math.min(t*e,300);return a-n*((p+m*y*g)*Math.sinh(r)+t*g*Math.cosh(r))/t}}return{calculatedDuration:f&&h||null,next:t=>{const e=_(t);if(f)s.done=t>=h;else{let i=p;0!==t&&(i=m<1?ku(_,t,e):0);const o=Math.abs(i)<=r,l=Math.abs(a-e)<=n;s.done=o&&l}return s.value=s.done?a:e,s}}}function Wu(t){let{keyframes:e,velocity:n=0,power:r=.8,timeConstant:i=325,bounceDamping:o=10,bounceStiffness:a=500,modifyTarget:s,min:l,max:c,restDelta:u=.5,restSpeed:h}=t;const d=e[0],f={done:!1,value:d},p=t=>void 0===l?c:void 0===c||Math.abs(l-t)<Math.abs(c-t)?l:c;let m=r*n;const g=d+m,y=void 0===s?g:s(g);y!==g&&(m=y-d);const v=t=>-m*Math.exp(-t/i),_=t=>y+v(t),b=t=>{const e=v(t),n=_(t);f.done=Math.abs(e)<=u,f.value=f.done?y:n};let x,w;const S=t=>{var e;(e=f.value,void 0!==l&&e<l||void 0!==c&&e>c)&&(x=t,w=Vu({keyframes:[f.value,p(f.value)],velocity:ku(_,t,f.value),damping:o,stiffness:a,restDelta:u,restSpeed:h}))};return S(0),{calculatedDuration:null,next:t=>{let e=!1;return w||void 0!==x||(e=!0,b(t),S(t)),void 0!==x&&t>x?w.next(t-x):(!e&&b(t),f)}}}const Gu=t=>{const e=e=>{let{timestamp:n}=e;return t(n)};return{start:()=>Vl.update(e,!0),stop:()=>Wl(e),now:()=>Gl.isProcessing?Gl.timestamp:performance.now()}},qu=2e4;function Hu(t){let e=0;let n=t.next(e);for(;!n.done&&e<qu;)e+=50,n=t.next(e);return e>=qu?1/0:e}const Zu={decay:Wu,inertia:Wu,tween:Au,keyframes:Au,spring:Vu};function Xu(t){let e,n,{autoplay:r=!0,delay:i=0,driver:o=Gu,keyframes:a,type:s="keyframes",repeat:l=0,repeatDelay:c=0,repeatType:u="loop",onPlay:h,onStop:d,onComplete:f,onUpdate:p,...m}=t,g=1,y=!1;const v=()=>{n=new Promise((t=>{e=t}))};let _;v();const b=Zu[s]||Au;let x;b!==Au&&"number"!==typeof a[0]&&(x=Su([0,100],a,{clamp:!1}),a=[0,100]);const w=b({...m,keyframes:a});let S;"mirror"===u&&(S=b({...m,keyframes:[...a].reverse(),velocity:-(m.velocity||0)}));let E="idle",T=null,M=null,A=null;null===w.calculatedDuration&&l&&(w.calculatedDuration=Hu(w));const{calculatedDuration:C}=w;let P=1/0,k=1/0;null!==C&&(P=C+c,k=P*(l+1)-c);let I=0;const O=t=>{if(null===M)return;g>0&&(M=Math.min(M,t)),g<0&&(M=Math.min(t-k/g,M)),I=null!==T?T:Math.round(t-M)*g;const e=I-i*(g>=0?1:-1),n=g>=0?e<0:e>k;I=Math.max(e,0),"finished"===E&&null===T&&(I=k);let r=I,o=w;if(l){const t=Math.min(I,k)/P;let e=Math.floor(t),n=t%1;!n&&t>=1&&(n=1),1===n&&e--,e=Math.min(e,l+1);Boolean(e%2)&&("reverse"===u?(n=1-n,c&&(n-=c/P)):"mirror"===u&&(o=S)),r=qs(0,1,n)*P}const s=n?{done:!1,value:a[0]}:o.next(r);x&&(s.value=x(s.value));let{done:h}=s;n||null===C||(h=g>=0?I>=k:I<=0);const d=null===T&&("finished"===E||"running"===E&&h);return p&&p(s.value),d&&z(),s},L=()=>{_&&_.stop(),_=void 0},j=()=>{E="idle",L(),e(),v(),M=A=null},z=()=>{E="finished",f&&f(),L(),e()},R=()=>{if(y)return;_||(_=o(O));const t=_.now();h&&h(),null!==T?M=t-T:M&&"finished"!==E||(M=t),"finished"===E&&v(),A=M,T=null,E="running",_.start()};r&&R();const D={then:(t,e)=>n.then(t,e),get time(){return wc(I)},set time(t){t=xc(t),I=t,null===T&&_&&0!==g?M=_.now()-t/g:T=t},get duration(){const t=null===w.calculatedDuration?Hu(w):w.calculatedDuration;return wc(t)},get speed(){return g},set speed(t){t!==g&&_&&(g=t,D.time=wc(I))},get state(){return E},play:R,pause:()=>{E="paused",T=I},stop:()=>{y=!0,"idle"!==E&&(E="idle",d&&d(),j())},cancel:()=>{null!==A&&O(A),j()},complete:()=>{E="finished"},sample:t=>(M=0,O(t))};return D}function Yu(t){let e;return()=>(void 0===e&&(e=t()),e)}const Ku=Yu((()=>Object.hasOwnProperty.call(Element.prototype,"animate"))),$u=new Set(["opacity","clipPath","filter","transform","backgroundColor"]);function Ju(t,e,n){let{onUpdate:r,onComplete:i,...o}=n;if(!(Ku()&&$u.has(e)&&!o.repeatDelay&&"mirror"!==o.repeatType&&0!==o.damping&&"inertia"!==o.type))return!1;let a,s,l=!1,c=!1;const u=()=>{s=new Promise((t=>{a=t}))};u();let{keyframes:h,duration:d=300,ease:f,times:p}=o;if(((t,e)=>"spring"===e.type||"backgroundColor"===t||!Tc(e.ease))(e,o)){const t=Xu({...o,repeat:0,delay:0});let e={done:!1,value:h[0]};const n=[];let r=0;for(;!e.done&&r<2e4;)e=t.sample(r),n.push(e.value),r+=10;p=void 0,h=n,d=r-10,f="linear"}const m=function(t,e,n){let{delay:r=0,duration:i,repeat:o=0,repeatType:a="loop",ease:s,times:l}=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};const c={[e]:n};l&&(c.offset=l);const u=Cc(s);return Array.isArray(u)&&(c.easing=u),t.animate(c,{delay:r,duration:i,easing:Array.isArray(u)?"linear":u,fill:"both",iterations:o+1,direction:"reverse"===a?"alternate":"normal"})}(t.owner.current,e,h,{...o,duration:d,ease:f,times:p}),g=()=>{c=!1,m.cancel()},y=()=>{c=!0,Vl.update(g),a(),u()};m.onfinish=()=>{c||(t.set(function(t,e){let{repeat:n,repeatType:r="loop"}=e;return t[n&&"loop"!==r&&n%2===1?0:t.length-1]}(h,o)),i&&i(),y())};const v={then:(t,e)=>s.then(t,e),attachTimeline:t=>(m.timeline=t,m.onfinish=null,Fl),get time(){return wc(m.currentTime||0)},set time(t){m.currentTime=xc(t)},get speed(){return m.playbackRate},set speed(t){m.playbackRate=t},get duration(){return wc(d)},play:()=>{l||(m.play(),Wl(g))},pause:()=>m.pause(),stop:()=>{if(l=!0,"idle"===m.playState)return;const{currentTime:e}=m;if(e){const n=Xu({...o,autoplay:!1});t.setWithVelocity(n.sample(e-10).value,n.sample(e).value,10)}y()},complete:()=>{c||m.finish()},cancel:y};return v}const Qu={type:"spring",stiffness:500,damping:25,restSpeed:10},th={type:"keyframes",duration:.8},eh={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},nh=(t,e)=>{let{keyframes:n}=e;return n.length>2?th:Rs.has(t)?t.startsWith("scale")?{type:"spring",stiffness:550,damping:0===n[1]?2*Math.sqrt(550):30,restSpeed:10}:Qu:eh},rh=(t,e)=>"zIndex"!==t&&(!("number"!==typeof e&&!Array.isArray(e))||!("string"!==typeof e||!pu.test(e)&&"0"!==e||e.startsWith("url("))),ih=new Set(["brightness","contrast","saturate","opacity"]);function oh(t){const[e,n]=t.slice(0,-1).split("(");if("drop-shadow"===e)return t;const[r]=n.match(Ks)||[];if(!r)return t;const i=n.replace(r,"");let o=ih.has(e)?1:0;return r!==n&&(o*=100),e+"("+o+i+")"}const ah=/([a-z-]*)\(.*?\)/g,sh={...pu,getAnimatableNone:t=>{const e=t.match(ah);return e?e.map(oh).join(" "):t}},lh={...ll,color:Qc,backgroundColor:Qc,outlineColor:Qc,fill:Qc,stroke:Qc,borderColor:Qc,borderTopColor:Qc,borderRightColor:Qc,borderBottomColor:Qc,borderLeftColor:Qc,filter:sh,WebkitFilter:sh},ch=t=>lh[t];function uh(t,e){let n=ch(t);return n!==sh&&(n=pu),n.getAnimatableNone?n.getAnimatableNone(e):void 0}const hh=t=>/^0[^.\s]+$/.test(t);function dh(t){return"number"===typeof t?0===t:null!==t?"none"===t||"0"===t||hh(t):void 0}function fh(t,e){return t[e]||t.default||t}const ph=!1,mh=function(t,e,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return i=>{const o=fh(r,t)||{},a=o.delay||r.delay||0;let{elapsed:s=0}=r;s-=xc(a);const l=function(t,e,n,r){const i=rh(e,n);let o;o=Array.isArray(n)?[...n]:[null,n];const a=void 0!==r.from?r.from:t.get();let s;const l=[];for(let c=0;c<o.length;c++)null===o[c]&&(o[c]=0===c?a:o[c-1]),dh(o[c])&&l.push(c),"string"===typeof o[c]&&"none"!==o[c]&&"0"!==o[c]&&(s=o[c]);if(i&&l.length&&s)for(let c=0;c<l.length;c++)o[l[c]]=uh(e,s);return o}(e,t,n,o),c=l[0],u=l[l.length-1],h=rh(t,c),d=rh(t,u);_c(h===d,"You are trying to animate ".concat(t,' from "').concat(c,'" to "').concat(u,'". ').concat(c," is not an animatable value - to enable this animation set ").concat(c," to a value animatable to ").concat(u," via the `style` property."));let f={keyframes:l,velocity:e.getVelocity(),ease:"easeOut",...o,delay:-s,onUpdate:t=>{e.set(t),o.onUpdate&&o.onUpdate(t)},onComplete:()=>{i(),o.onComplete&&o.onComplete()}};if(function(t){let{when:e,delay:n,delayChildren:r,staggerChildren:i,staggerDirection:o,repeat:a,repeatType:s,repeatDelay:l,from:c,elapsed:u,...h}=t;return!!Object.keys(h).length}(o)||(f={...f,...nh(t,f)}),f.duration&&(f.duration=xc(f.duration)),f.repeatDelay&&(f.repeatDelay=xc(f.repeatDelay)),!h||!d||Sc||!1===o.type||ph)return function(t){let{keyframes:e,delay:n,onUpdate:r,onComplete:i}=t;const o=()=>(r&&r(e[e.length-1]),i&&i(),{time:0,speed:1,duration:0,play:Fl,pause:Fl,stop:Fl,then:t=>(t(),Promise.resolve()),cancel:Fl,complete:Fl});return n?Xu({keyframes:[0,1],duration:0,delay:n,onComplete:o}):o()}(Sc?{...f,delay:0}:f);if(!r.isHandoff&&e.owner&&e.owner.current instanceof HTMLElement&&!e.owner.getProps().onUpdate){const n=Ju(e,t,f);if(n)return n}return Xu(f)}};function gh(t){return Boolean(Bs(t)&&t.add)}const yh=t=>/^\-?\d*\.?\d+$/.test(t);function vh(t,e){-1===t.indexOf(e)&&t.push(e)}function _h(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}class bh{constructor(){this.subscriptions=[]}add(t){return vh(this.subscriptions,t),()=>_h(this.subscriptions,t)}notify(t,e,n){const r=this.subscriptions.length;if(r)if(1===r)this.subscriptions[0](t,e,n);else for(let i=0;i<r;i++){const r=this.subscriptions[i];r&&r(t,e,n)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const xh={current:void 0};class wh{constructor(t){var e=this;let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.version="10.18.0",this.timeDelta=0,this.lastUpdated=0,this.canTrackVelocity=!1,this.events={},this.updateAndNotify=function(t){let n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];e.prev=e.current,e.current=t;const{delta:r,timestamp:i}=Gl;e.lastUpdated!==i&&(e.timeDelta=r,e.lastUpdated=i,Vl.postRender(e.scheduleVelocityCheck)),e.prev!==e.current&&e.events.change&&e.events.change.notify(e.current),e.events.velocityChange&&e.events.velocityChange.notify(e.getVelocity()),n&&e.events.renderRequest&&e.events.renderRequest.notify(e.current)},this.scheduleVelocityCheck=()=>Vl.postRender(this.velocityCheck),this.velocityCheck=t=>{let{timestamp:e}=t;e!==this.lastUpdated&&(this.prev=this.current,this.events.velocityChange&&this.events.velocityChange.notify(this.getVelocity()))},this.hasAnimated=!1,this.prev=this.current=t,this.canTrackVelocity=(t=>!isNaN(parseFloat(t)))(this.current),this.owner=n.owner}onChange(t){return this.on("change",t)}on(t,e){this.events[t]||(this.events[t]=new bh);const n=this.events[t].add(e);return"change"===t?()=>{n(),Vl.read((()=>{this.events.change.getSize()||this.stop()}))}:n}clearListeners(){for(const t in this.events)this.events[t].clear()}attach(t,e){this.passiveEffect=t,this.stopPassiveEffect=e}set(t){let e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];e&&this.passiveEffect?this.passiveEffect(t,this.updateAndNotify):this.updateAndNotify(t,e)}setWithVelocity(t,e,n){this.set(e),this.prev=t,this.timeDelta=n}jump(t){this.updateAndNotify(t),this.prev=t,this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}get(){return xh.current&&xh.current.push(this),this.current}getPrevious(){return this.prev}getVelocity(){return this.canTrackVelocity?Cu(parseFloat(this.current)-parseFloat(this.prev),this.timeDelta):0}start(t){return this.stop(),new Promise((e=>{this.hasAnimated=!0,this.animation=t(e),this.events.animationStart&&this.events.animationStart.notify()})).then((()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()}))}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function Sh(t,e){return new wh(t,e)}const Eh=t=>e=>e.test(t),Th=[Hs,rl,nl,el,ol,il,{test:t=>"auto"===t,parse:t=>t}],Mh=t=>Th.find(Eh(t)),Ah=[...Th,Qc,pu];function Ch(t,e,n){t.hasValue(e)?t.getValue(e).set(n):t.addValue(e,Sh(n))}function Ph(t,e){const n=vc(t,e);let{transitionEnd:r={},transition:i={},...o}=n?t.makeTargetAnimatable(n,!1):{};o={...o,...r};for(const a in o){Ch(t,a,zl(o[a]))}}function kh(t,e){if(!e)return;return(e[t]||e.default||e).from}function Ih(t,e){let{protectedKeys:n,needsAnimating:r}=t;const i=n.hasOwnProperty(e)&&!0!==r[e];return r[e]=!1,i}function Oh(t,e){const n=t.get();if(!Array.isArray(e))return n!==e;for(let r=0;r<e.length;r++)if(e[r]!==n)return!0}function Lh(t,e){let{delay:n=0,transitionOverride:r,type:i}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},{transition:o=t.getDefaultTransition(),transitionEnd:a,...s}=t.makeTargetAnimatable(e);const l=t.getValue("willChange");r&&(o=r);const c=[],u=i&&t.animationState&&t.animationState.getState()[i];for(const h in s){const e=t.getValue(h),r=s[h];if(!e||void 0===r||u&&Ih(u,h))continue;const i={delay:n,elapsed:0,...fh(o||{},h)};if(window.HandoffAppearAnimations){const n=t.getProps()[ps];if(n){const t=window.HandoffAppearAnimations(n,h,e,Vl);null!==t&&(i.elapsed=t,i.isHandoff=!0)}}let a=!i.isHandoff&&!Oh(e,r);if("spring"===i.type&&(e.getVelocity()||i.velocity)&&(a=!1),e.animation&&(a=!1),a)continue;e.start(mh(h,e,r,t.shouldReduceMotion&&Rs.has(h)?{type:!1}:i));const d=e.animation;gh(l)&&(l.add(h),d.then((()=>l.remove(h)))),c.push(d)}return a&&Promise.all(c).then((()=>{a&&Ph(t,a)})),c}function jh(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=vc(t,e,n.custom);let{transition:i=t.getDefaultTransition()||{}}=r||{};n.transitionOverride&&(i=n.transitionOverride);const o=r?()=>Promise.all(Lh(t,r,n)):()=>Promise.resolve(),a=t.variantChildren&&t.variantChildren.size?function(){let r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;const{delayChildren:o=0,staggerChildren:a,staggerDirection:s}=i;return function(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1,o=arguments.length>5?arguments[5]:void 0;const a=[],s=(t.variantChildren.size-1)*r,l=1===i?function(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:0)*r}:function(){return s-(arguments.length>0&&void 0!==arguments[0]?arguments[0]:0)*r};return Array.from(t.variantChildren).sort(zh).forEach(((t,r)=>{t.notify("AnimationStart",e),a.push(jh(t,e,{...o,delay:n+l(r)}).then((()=>t.notify("AnimationComplete",e))))})),Promise.all(a)}(t,e,o+r,a,s,n)}:()=>Promise.resolve(),{when:s}=i;if(s){const[t,e]="beforeChildren"===s?[o,a]:[a,o];return t().then((()=>e()))}return Promise.all([o(),a(n.delay)])}function zh(t,e){return t.sortNodePosition(e)}const Rh=[...vs].reverse(),Dh=vs.length;function Bh(t){return e=>Promise.all(e.map((e=>{let{animation:n,options:r}=e;return function(t,e){let n,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(t.notify("AnimationStart",e),Array.isArray(e)){const i=e.map((e=>jh(t,e,r)));n=Promise.all(i)}else if("string"===typeof e)n=jh(t,e,r);else{const i="function"===typeof e?vc(t,e,r.custom):e;n=Promise.all(Lh(t,i,r))}return n.then((()=>t.notify("AnimationComplete",e)))}(t,n,r)})))}function Fh(t){let e=Bh(t);const n={animate:Uh(!0),whileInView:Uh(),whileHover:Uh(),whileTap:Uh(),whileDrag:Uh(),whileFocus:Uh(),exit:Uh()};let r=!0;const i=(e,n)=>{const r=vc(t,n);if(r){const{transition:t,transitionEnd:n,...i}=r;e={...e,...i,...n}}return e};function o(o,a){const s=t.getProps(),l=t.getVariantContext(!0)||{},c=[],u=new Set;let h={},d=1/0;for(let e=0;e<Dh;e++){const f=Rh[e],p=n[f],m=void 0!==s[f]?s[f]:l[f],g=gs(m),y=f===a?p.isActive:null;!1===y&&(d=e);let v=m===l[f]&&m!==s[f]&&g;if(v&&r&&t.manuallyAnimateOnMount&&(v=!1),p.protectedKeys={...h},!p.isActive&&null===y||!m&&!p.prevProp||ys(m)||"boolean"===typeof m)continue;let _=Nh(p.prevProp,m)||f===a&&p.isActive&&!v&&g||e>d&&g,b=!1;const x=Array.isArray(m)?m:[m];let w=x.reduce(i,{});!1===y&&(w={});const{prevResolvedValues:S={}}=p,E={...S,...w},T=t=>{_=!0,u.has(t)&&(b=!0,u.delete(t)),p.needsAnimating[t]=!0};for(const t in E){const e=w[t],n=S[t];if(h.hasOwnProperty(t))continue;let r=!1;r=Ll(e)&&Ll(n)?!yc(e,n):e!==n,r?void 0!==e?T(t):u.add(t):void 0!==e&&u.has(t)?T(t):p.protectedKeys[t]=!0}p.prevProp=m,p.prevResolvedValues=w,p.isActive&&(h={...h,...w}),r&&t.blockInitialAnimation&&(_=!1),!_||v&&!b||c.push(...x.map((t=>({animation:t,options:{type:f,...o}}))))}if(u.size){const e={};u.forEach((n=>{const r=t.getBaseTarget(n);void 0!==r&&(e[n]=r)})),c.push({animation:e})}let f=Boolean(c.length);return!r||!1!==s.initial&&s.initial!==s.animate||t.manuallyAnimateOnMount||(f=!1),r=!1,f?e(c):Promise.resolve()}return{animateChanges:o,setActive:function(e,r,i){var a;if(n[e].isActive===r)return Promise.resolve();null===(a=t.variantChildren)||void 0===a||a.forEach((t=>{var n;return null===(n=t.animationState)||void 0===n?void 0:n.setActive(e,r)})),n[e].isActive=r;const s=o(i,e);for(const t in n)n[t].protectedKeys={};return s},setAnimateFunction:function(n){e=n(t)},getState:()=>n}}function Nh(t,e){return"string"===typeof e?e!==t:!!Array.isArray(e)&&!yc(e,t)}function Uh(){return{isActive:arguments.length>0&&void 0!==arguments[0]&&arguments[0],protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}let Vh=0;const Wh={animation:{Feature:class extends ac{constructor(t){super(t),t.animationState||(t.animationState=Fh(t))}updateAnimationControlsSubscription(){const{animate:t}=this.node.getProps();this.unmount(),ys(t)&&(this.unmount=t.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:t}=this.node.getProps(),{animate:e}=this.node.prevProps||{};t!==e&&this.updateAnimationControlsSubscription()}unmount(){}}},exit:{Feature:class extends ac{constructor(){super(...arguments),this.id=Vh++}update(){if(!this.node.presenceContext)return;const{isPresent:t,onExitComplete:e,custom:n}=this.node.presenceContext,{isPresent:r}=this.node.prevPresenceContext||{};if(!this.node.animationState||t===r)return;const i=this.node.animationState.setActive("exit",!t,{custom:null!==n&&void 0!==n?n:this.node.getProps().custom});e&&!t&&i.then((()=>e(this.id)))}mount(){const{register:t}=this.node.presenceContext||{};t&&(this.unmount=t(this.id))}unmount(){}}}},Gh=(t,e)=>Math.abs(t-e);class qh{constructor(t,e){let{transformPagePoint:n,contextWindow:r,dragSnapToOrigin:i=!1}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!this.lastMoveEvent||!this.lastMoveEventInfo)return;const t=Xh(this.lastMoveEventInfo,this.history),e=null!==this.startEvent,n=function(t,e){const n=Gh(t.x,e.x),r=Gh(t.y,e.y);return Math.sqrt(n**2+r**2)}(t.offset,{x:0,y:0})>=3;if(!e&&!n)return;const{point:r}=t,{timestamp:i}=Gl;this.history.push({...r,timestamp:i});const{onStart:o,onMove:a}=this.handlers;e||(o&&o(this.lastMoveEvent,t),this.startEvent=this.lastMoveEvent),a&&a(this.lastMoveEvent,t)},this.handlePointerMove=(t,e)=>{this.lastMoveEvent=t,this.lastMoveEventInfo=Hh(e,this.transformPagePoint),Vl.update(this.updatePoint,!0)},this.handlePointerUp=(t,e)=>{this.end();const{onEnd:n,onSessionEnd:r,resumeAnimation:i}=this.handlers;if(this.dragSnapToOrigin&&i&&i(),!this.lastMoveEvent||!this.lastMoveEventInfo)return;const o=Xh("pointercancel"===t.type?this.lastMoveEventInfo:Hh(e,this.transformPagePoint),this.history);this.startEvent&&n&&n(t,o),r&&r(t,o)},!Yl(t))return;this.dragSnapToOrigin=i,this.handlers=e,this.transformPagePoint=n,this.contextWindow=r||window;const o=Hh(Kl(t),this.transformPagePoint),{point:a}=o,{timestamp:s}=Gl;this.history=[{...a,timestamp:s}];const{onSessionStart:l}=e;l&&l(t,Xh(o,this.history)),this.removeListeners=tc(Jl(this.contextWindow,"pointermove",this.handlePointerMove),Jl(this.contextWindow,"pointerup",this.handlePointerUp),Jl(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(t){this.handlers=t}end(){this.removeListeners&&this.removeListeners(),Wl(this.updatePoint)}}function Hh(t,e){return e?{point:e(t.point)}:t}function Zh(t,e){return{x:t.x-e.x,y:t.y-e.y}}function Xh(t,e){let{point:n}=t;return{point:n,delta:Zh(n,Kh(e)),offset:Zh(n,Yh(e)),velocity:$h(e,.1)}}function Yh(t){return t[0]}function Kh(t){return t[t.length-1]}function $h(t,e){if(t.length<2)return{x:0,y:0};let n=t.length-1,r=null;const i=Kh(t);for(;n>=0&&(r=t[n],!(i.timestamp-r.timestamp>xc(e)));)n--;if(!r)return{x:0,y:0};const o=wc(i.timestamp-r.timestamp);if(0===o)return{x:0,y:0};const a={x:(i.x-r.x)/o,y:(i.y-r.y)/o};return a.x===1/0&&(a.x=0),a.y===1/0&&(a.y=0),a}function Jh(t){return t.max-t.min}function Qh(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.01;return Math.abs(t-e)<=n}function td(t,e,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.5;t.origin=r,t.originPoint=tu(e.min,e.max,t.origin),t.scale=Jh(n)/Jh(e),(Qh(t.scale,1,1e-4)||isNaN(t.scale))&&(t.scale=1),t.translate=tu(n.min,n.max,t.origin)-t.originPoint,(Qh(t.translate)||isNaN(t.translate))&&(t.translate=0)}function ed(t,e,n,r){td(t.x,e.x,n.x,r?r.originX:void 0),td(t.y,e.y,n.y,r?r.originY:void 0)}function nd(t,e,n){t.min=n.min+e.min,t.max=t.min+Jh(e)}function rd(t,e,n){t.min=e.min-n.min,t.max=t.min+Jh(e)}function id(t,e,n){rd(t.x,e.x,n.x),rd(t.y,e.y,n.y)}function od(t,e,n){return{min:void 0!==e?t.min+e:void 0,max:void 0!==n?t.max+n-(t.max-t.min):void 0}}function ad(t,e){let n=e.min-t.min,r=e.max-t.max;return e.max-e.min<t.max-t.min&&([n,r]=[r,n]),{min:n,max:r}}const sd=.35;function ld(t,e,n){return{min:cd(t,e),max:cd(t,n)}}function cd(t,e){return"number"===typeof t?t:t[e]||0}const ud=()=>({x:{translate:0,scale:1,origin:0,originPoint:0},y:{translate:0,scale:1,origin:0,originPoint:0}}),hd=()=>({x:{min:0,max:0},y:{min:0,max:0}});function dd(t){return[t("x"),t("y")]}function fd(t){let{top:e,left:n,right:r,bottom:i}=t;return{x:{min:n,max:r},y:{min:e,max:i}}}function pd(t){return void 0===t||1===t}function md(t){let{scale:e,scaleX:n,scaleY:r}=t;return!pd(e)||!pd(n)||!pd(r)}function gd(t){return md(t)||yd(t)||t.z||t.rotate||t.rotateX||t.rotateY}function yd(t){return vd(t.x)||vd(t.y)}function vd(t){return t&&"0%"!==t}function _d(t,e,n){return n+e*(t-n)}function bd(t,e,n,r,i){return void 0!==i&&(t=_d(t,i,r)),_d(t,n,r)+e}function xd(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3?arguments[3]:void 0,i=arguments.length>4?arguments[4]:void 0;t.min=bd(t.min,e,n,r,i),t.max=bd(t.max,e,n,r,i)}function wd(t,e){let{x:n,y:r}=e;xd(t.x,n.translate,n.scale,n.originPoint),xd(t.y,r.translate,r.scale,r.originPoint)}function Sd(t){return Number.isInteger(t)||t>1.0000000000001||t<.999999999999?t:1}function Ed(t,e){t.min=t.min+e,t.max=t.max+e}function Td(t,e,n){let[r,i,o]=n;const a=void 0!==e[o]?e[o]:.5,s=tu(t.min,t.max,a);xd(t,e[r],e[i],s,e.scale)}const Md=["x","scaleX","originX"],Ad=["y","scaleY","originY"];function Cd(t,e){Td(t.x,e,Md),Td(t.y,e,Ad)}function Pd(t,e){return fd(function(t,e){if(!e)return t;const n=e({x:t.left,y:t.top}),r=e({x:t.right,y:t.bottom});return{top:n.y,left:n.x,bottom:r.y,right:r.x}}(t.getBoundingClientRect(),e))}const kd=t=>{let{current:e}=t;return e?e.ownerDocument.defaultView:null},Id=new WeakMap;class Od{constructor(t){this.openGlobalLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=hd(),this.visualElement=t}start(t){let{snapToCursor:e=!1}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{presenceContext:n}=this.visualElement;if(n&&!1===n.isPresent)return;const{dragSnapToOrigin:r}=this.getProps();this.panSession=new qh(t,{onSessionStart:t=>{const{dragSnapToOrigin:n}=this.getProps();n?this.pauseAnimation():this.stopAnimation(),e&&this.snapToCursor(Kl(t,"page").point)},onStart:(t,e)=>{const{drag:n,dragPropagation:r,onDragStart:i}=this.getProps();if(n&&!r&&(this.openGlobalLock&&this.openGlobalLock(),this.openGlobalLock=ic(n),!this.openGlobalLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),dd((t=>{let e=this.getAxisMotionValue(t).get()||0;if(nl.test(e)){const{projection:n}=this.visualElement;if(n&&n.layout){const r=n.layout.layoutBox[t];if(r){e=Jh(r)*(parseFloat(e)/100)}}}this.originPoint[t]=e})),i&&Vl.update((()=>i(t,e)),!1,!0);const{animationState:o}=this.visualElement;o&&o.setActive("whileDrag",!0)},onMove:(t,e)=>{const{dragPropagation:n,dragDirectionLock:r,onDirectionLock:i,onDrag:o}=this.getProps();if(!n&&!this.openGlobalLock)return;const{offset:a}=e;if(r&&null===this.currentDirection)return this.currentDirection=function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,n=null;Math.abs(t.y)>e?n="y":Math.abs(t.x)>e&&(n="x");return n}(a),void(null!==this.currentDirection&&i&&i(this.currentDirection));this.updateAxis("x",e.point,a),this.updateAxis("y",e.point,a),this.visualElement.render(),o&&o(t,e)},onSessionEnd:(t,e)=>this.stop(t,e),resumeAnimation:()=>dd((t=>{var e;return"paused"===this.getAnimationState(t)&&(null===(e=this.getAxisMotionValue(t).animation)||void 0===e?void 0:e.play())}))},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:r,contextWindow:kd(this.visualElement)})}stop(t,e){const n=this.isDragging;if(this.cancel(),!n)return;const{velocity:r}=e;this.startAnimation(r);const{onDragEnd:i}=this.getProps();i&&Vl.update((()=>i(t,e)))}cancel(){this.isDragging=!1;const{projection:t,animationState:e}=this.visualElement;t&&(t.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:n}=this.getProps();!n&&this.openGlobalLock&&(this.openGlobalLock(),this.openGlobalLock=null),e&&e.setActive("whileDrag",!1)}updateAxis(t,e,n){const{drag:r}=this.getProps();if(!n||!Ld(t,r,this.currentDirection))return;const i=this.getAxisMotionValue(t);let o=this.originPoint[t]+n[t];this.constraints&&this.constraints[t]&&(o=function(t,e,n){let{min:r,max:i}=e;return void 0!==r&&t<r?t=n?tu(r,t,n.min):Math.max(t,r):void 0!==i&&t>i&&(t=n?tu(i,t,n.max):Math.min(t,i)),t}(o,this.constraints[t],this.elastic[t])),i.set(o)}resolveConstraints(){var t;const{dragConstraints:e,dragElastic:n}=this.getProps(),r=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):null===(t=this.visualElement.projection)||void 0===t?void 0:t.layout,i=this.constraints;e&&ms(e)?this.constraints||(this.constraints=this.resolveRefConstraints()):this.constraints=!(!e||!r)&&function(t,e){let{top:n,left:r,bottom:i,right:o}=e;return{x:od(t.x,r,o),y:od(t.y,n,i)}}(r.layoutBox,e),this.elastic=function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:sd;return!1===t?t=0:!0===t&&(t=sd),{x:ld(t,"left","right"),y:ld(t,"top","bottom")}}(n),i!==this.constraints&&r&&this.constraints&&!this.hasMutatedConstraints&&dd((t=>{this.getAxisMotionValue(t)&&(this.constraints[t]=function(t,e){const n={};return void 0!==e.min&&(n.min=e.min-t.min),void 0!==e.max&&(n.max=e.max-t.min),n}(r.layoutBox[t],this.constraints[t]))}))}resolveRefConstraints(){const{dragConstraints:t,onMeasureDragConstraints:e}=this.getProps();if(!t||!ms(t))return!1;const n=t.current;bc(null!==n,"If `dragConstraints` is set as a React ref, that ref must be passed to another component's `ref` prop.");const{projection:r}=this.visualElement;if(!r||!r.layout)return!1;const i=function(t,e,n){const r=Pd(t,n),{scroll:i}=e;return i&&(Ed(r.x,i.offset.x),Ed(r.y,i.offset.y)),r}(n,r.root,this.visualElement.getTransformPagePoint());let o=function(t,e){return{x:ad(t.x,e.x),y:ad(t.y,e.y)}}(r.layout.layoutBox,i);if(e){const t=e(function(t){let{x:e,y:n}=t;return{top:n.min,right:e.max,bottom:n.max,left:e.min}}(o));this.hasMutatedConstraints=!!t,t&&(o=fd(t))}return o}startAnimation(t){const{drag:e,dragMomentum:n,dragElastic:r,dragTransition:i,dragSnapToOrigin:o,onDragTransitionEnd:a}=this.getProps(),s=this.constraints||{},l=dd((a=>{if(!Ld(a,e,this.currentDirection))return;let l=s&&s[a]||{};o&&(l={min:0,max:0});const c=r?200:1e6,u=r?40:1e7,h={type:"inertia",velocity:n?t[a]:0,bounceStiffness:c,bounceDamping:u,timeConstant:750,restDelta:1,restSpeed:10,...i,...l};return this.startAxisValueAnimation(a,h)}));return Promise.all(l).then(a)}startAxisValueAnimation(t,e){const n=this.getAxisMotionValue(t);return n.start(mh(t,n,0,e))}stopAnimation(){dd((t=>this.getAxisMotionValue(t).stop()))}pauseAnimation(){dd((t=>{var e;return null===(e=this.getAxisMotionValue(t).animation)||void 0===e?void 0:e.pause()}))}getAnimationState(t){var e;return null===(e=this.getAxisMotionValue(t).animation)||void 0===e?void 0:e.state}getAxisMotionValue(t){const e="_drag"+t.toUpperCase(),n=this.visualElement.getProps(),r=n[e];return r||this.visualElement.getValue(t,(n.initial?n.initial[t]:void 0)||0)}snapToCursor(t){dd((e=>{const{drag:n}=this.getProps();if(!Ld(e,n,this.currentDirection))return;const{projection:r}=this.visualElement,i=this.getAxisMotionValue(e);if(r&&r.layout){const{min:n,max:o}=r.layout.layoutBox[e];i.set(t[e]-tu(n,o,.5))}}))}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:t,dragConstraints:e}=this.getProps(),{projection:n}=this.visualElement;if(!ms(e)||!n||!this.constraints)return;this.stopAnimation();const r={x:0,y:0};dd((t=>{const e=this.getAxisMotionValue(t);if(e){const n=e.get();r[t]=function(t,e){let n=.5;const r=Jh(t),i=Jh(e);return i>r?n=bu(e.min,e.max-r,t.min):r>i&&(n=bu(t.min,t.max-i,e.min)),qs(0,1,n)}({min:n,max:n},this.constraints[t])}}));const{transformTemplate:i}=this.visualElement.getProps();this.visualElement.current.style.transform=i?i({},""):"none",n.root&&n.root.updateScroll(),n.updateLayout(),this.resolveConstraints(),dd((e=>{if(!Ld(e,t,null))return;const n=this.getAxisMotionValue(e),{min:i,max:o}=this.constraints[e];n.set(tu(i,o,r[e]))}))}addListeners(){if(!this.visualElement.current)return;Id.set(this.visualElement,this);const t=Jl(this.visualElement.current,"pointerdown",(t=>{const{drag:e,dragListener:n=!0}=this.getProps();e&&n&&this.start(t)})),e=()=>{const{dragConstraints:t}=this.getProps();ms(t)&&(this.constraints=this.resolveRefConstraints())},{projection:n}=this.visualElement,r=n.addEventListener("measure",e);n&&!n.layout&&(n.root&&n.root.updateScroll(),n.updateLayout()),e();const i=Xl(window,"resize",(()=>this.scalePositionWithinConstraints())),o=n.addEventListener("didUpdate",(t=>{let{delta:e,hasLayoutChanged:n}=t;this.isDragging&&n&&(dd((t=>{const n=this.getAxisMotionValue(t);n&&(this.originPoint[t]+=e[t].translate,n.set(n.get()+e[t].translate))})),this.visualElement.render())}));return()=>{i(),t(),r(),o&&o()}}getProps(){const t=this.visualElement.getProps(),{drag:e=!1,dragDirectionLock:n=!1,dragPropagation:r=!1,dragConstraints:i=!1,dragElastic:o=sd,dragMomentum:a=!0}=t;return{...t,drag:e,dragDirectionLock:n,dragPropagation:r,dragConstraints:i,dragElastic:o,dragMomentum:a}}}function Ld(t,e,n){return(!0===e||e===t)&&(null===n||n===t)}const jd=t=>(e,n)=>{t&&Vl.update((()=>t(e,n)))};function zd(){const t=(0,r.useContext)(cs);if(null===t)return[!0,null];const{isPresent:e,onExitComplete:n,register:i}=t,o=(0,r.useId)();(0,r.useEffect)((()=>i(o)),[]);return!e&&n?[!1,()=>n&&n(o)]:[!0]}function Rd(){return null===(t=(0,r.useContext)(cs))||t.isPresent;var t}const Dd={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function Bd(t,e){return e.max===e.min?0:t/(e.max-e.min)*100}const Fd={correct:(t,e)=>{if(!e.target)return t;if("string"===typeof t){if(!rl.test(t))return t;t=parseFloat(t)}const n=Bd(t,e.target.x),r=Bd(t,e.target.y);return"".concat(n,"% ").concat(r,"%")}},Nd={correct:(t,e)=>{let{treeScale:n,projectionDelta:r}=e;const i=t,o=pu.parse(t);if(o.length>5)return i;const a=pu.createTransformer(t),s="number"!==typeof o[0]?1:0,l=r.x.scale*n.x,c=r.y.scale*n.y;o[0+s]/=l,o[1+s]/=c;const u=tu(l,c,.5);return"number"===typeof o[2+s]&&(o[2+s]/=u),"number"===typeof o[3+s]&&(o[3+s]/=u),a(o)}};class Ud extends r.Component{componentDidMount(){const{visualElement:t,layoutGroup:e,switchLayoutGroup:n,layoutId:r}=this.props,{projection:i}=t;var o;o=Wd,Object.assign(js,o),i&&(e.group&&e.group.add(i),n&&n.register&&r&&n.register(i),i.root.didUpdate(),i.addEventListener("animationComplete",(()=>{this.safeToRemove()})),i.setOptions({...i.options,onExitComplete:()=>this.safeToRemove()})),Dd.hasEverUpdated=!0}getSnapshotBeforeUpdate(t){const{layoutDependency:e,visualElement:n,drag:r,isPresent:i}=this.props,o=n.projection;return o?(o.isPresent=i,r||t.layoutDependency!==e||void 0===e?o.willUpdate():this.safeToRemove(),t.isPresent!==i&&(i?o.promote():o.relegate()||Vl.postRender((()=>{const t=o.getStack();t&&t.members.length||this.safeToRemove()}))),null):null}componentDidUpdate(){const{projection:t}=this.props.visualElement;t&&(t.root.didUpdate(),queueMicrotask((()=>{!t.currentAnimation&&t.isLead()&&this.safeToRemove()})))}componentWillUnmount(){const{visualElement:t,layoutGroup:e,switchLayoutGroup:n}=this.props,{projection:r}=t;r&&(r.scheduleCheckAfterUnmount(),e&&e.group&&e.group.remove(r),n&&n.deregister&&n.deregister(r))}safeToRemove(){const{safeToRemove:t}=this.props;t&&t()}render(){return null}}function Vd(t){const[e,n]=zd(),i=(0,r.useContext)(Ms);return r.createElement(Ud,{...t,layoutGroup:i,switchLayoutGroup:(0,r.useContext)(As),isPresent:e,safeToRemove:n})}const Wd={borderRadius:{...Fd,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:Fd,borderTopRightRadius:Fd,borderBottomLeftRadius:Fd,borderBottomRightRadius:Fd,boxShadow:Nd},Gd=["TopLeft","TopRight","BottomLeft","BottomRight"],qd=Gd.length,Hd=t=>"string"===typeof t?parseFloat(t):t,Zd=t=>"number"===typeof t||rl.test(t);function Xd(t,e){return void 0!==t[e]?t[e]:t.borderRadius}const Yd=$d(0,.5,Nc),Kd=$d(.5,.95,Fl);function $d(t,e,n){return r=>r<t?0:r>e?1:n(bu(t,e,r))}function Jd(t,e){t.min=e.min,t.max=e.max}function Qd(t,e){Jd(t.x,e.x),Jd(t.y,e.y)}function tf(t,e,n,r,i){return t=_d(t-=e,1/n,r),void 0!==i&&(t=_d(t,1/i,r)),t}function ef(t,e,n,r,i){let[o,a,s]=n;!function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.5,i=arguments.length>4?arguments[4]:void 0,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:t,a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:t;nl.test(e)&&(e=parseFloat(e),e=tu(a.min,a.max,e/100)-a.min);if("number"!==typeof e)return;let s=tu(o.min,o.max,r);t===o&&(s-=e),t.min=tf(t.min,e,n,s,i),t.max=tf(t.max,e,n,s,i)}(t,e[o],e[a],e[s],e.scale,r,i)}const nf=["x","scaleX","originX"],rf=["y","scaleY","originY"];function of(t,e,n,r){ef(t.x,e,nf,n?n.x:void 0,r?r.x:void 0),ef(t.y,e,rf,n?n.y:void 0,r?r.y:void 0)}function af(t){return 0===t.translate&&1===t.scale}function sf(t){return af(t.x)&&af(t.y)}function lf(t,e){return Math.round(t.x.min)===Math.round(e.x.min)&&Math.round(t.x.max)===Math.round(e.x.max)&&Math.round(t.y.min)===Math.round(e.y.min)&&Math.round(t.y.max)===Math.round(e.y.max)}function cf(t){return Jh(t.x)/Jh(t.y)}class uf{constructor(){this.members=[]}add(t){vh(this.members,t),t.scheduleRender()}remove(t){if(_h(this.members,t),t===this.prevLead&&(this.prevLead=void 0),t===this.lead){const t=this.members[this.members.length-1];t&&this.promote(t)}}relegate(t){const e=this.members.findIndex((e=>t===e));if(0===e)return!1;let n;for(let r=e;r>=0;r--){const t=this.members[r];if(!1!==t.isPresent){n=t;break}}return!!n&&(this.promote(n),!0)}promote(t,e){const n=this.lead;if(t!==n&&(this.prevLead=n,this.lead=t,t.show(),n)){n.instance&&n.scheduleRender(),t.scheduleRender(),t.resumeFrom=n,e&&(t.resumeFrom.preserveOpacity=!0),n.snapshot&&(t.snapshot=n.snapshot,t.snapshot.latestValues=n.animationValues||n.latestValues),t.root&&t.root.isUpdating&&(t.isLayoutDirty=!0);const{crossfade:r}=t.options;!1===r&&n.hide()}}exitAnimationComplete(){this.members.forEach((t=>{const{options:e,resumingFrom:n}=t;e.onExitComplete&&e.onExitComplete(),n&&n.options.onExitComplete&&n.options.onExitComplete()}))}scheduleRender(){this.members.forEach((t=>{t.instance&&t.scheduleRender(!1)}))}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function hf(t,e,n){let r="";const i=t.x.translate/e.x,o=t.y.translate/e.y;if((i||o)&&(r="translate3d(".concat(i,"px, ").concat(o,"px, 0) ")),1===e.x&&1===e.y||(r+="scale(".concat(1/e.x,", ").concat(1/e.y,") ")),n){const{rotate:t,rotateX:e,rotateY:i}=n;t&&(r+="rotate(".concat(t,"deg) ")),e&&(r+="rotateX(".concat(e,"deg) ")),i&&(r+="rotateY(".concat(i,"deg) "))}const a=t.x.scale*e.x,s=t.y.scale*e.y;return 1===a&&1===s||(r+="scale(".concat(a,", ").concat(s,")")),r||"none"}const df=(t,e)=>t.depth-e.depth;class ff{constructor(){this.children=[],this.isDirty=!1}add(t){vh(this.children,t),this.isDirty=!0}remove(t){_h(this.children,t),this.isDirty=!0}forEach(t){this.isDirty&&this.children.sort(df),this.isDirty=!1,this.children.forEach(t)}}function pf(t){return t instanceof SVGElement&&"svg"!==t.tagName}function mf(t,e,n){const r=Bs(t)?t:Sh(t);return r.start(mh("",r,e,n)),r.animation}const gf=["","X","Y","Z"],yf={visibility:"hidden"};let vf=0;const _f={type:"projectionFrame",totalNodes:0,resolvedTargetDeltas:0,recalculatedProjection:0};function bf(t){let{attachResizeListener:e,defaultParent:n,measureScroll:r,checkIsScrollRoot:i,resetTransform:o}=t;return class{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null===n||void 0===n?void 0:n();this.id=vf++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,_f.totalNodes=_f.resolvedTargetDeltas=_f.recalculatedProjection=0,this.nodes.forEach(Sf),this.nodes.forEach(kf),this.nodes.forEach(If),this.nodes.forEach(Ef),function(t){window.MotionDebug&&window.MotionDebug.record(t)}(_f)},this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=t,this.root=e?e.root||e:this,this.path=e?[...e.path,e]:[],this.parent=e,this.depth=e?e.depth+1:0;for(let n=0;n<this.path.length;n++)this.path[n].shouldResetTransform=!0;this.root===this&&(this.nodes=new ff)}addEventListener(t,e){return this.eventHandlers.has(t)||this.eventHandlers.set(t,new bh),this.eventHandlers.get(t).add(e)}notifyListeners(t){const e=this.eventHandlers.get(t);for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];e&&e.notify(...r)}hasListeners(t){return this.eventHandlers.has(t)}mount(t){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.root.hasTreeAnimated;if(this.instance)return;this.isSVG=pf(t),this.instance=t;const{layoutId:r,layout:i,visualElement:o}=this.options;if(o&&!o.current&&o.mount(t),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),n&&(i||r)&&(this.isLayoutDirty=!0),e){let n;const r=()=>this.root.updateBlockedByResize=!1;e(t,(()=>{this.root.updateBlockedByResize=!0,n&&n(),n=function(t,e){const n=performance.now(),r=i=>{let{timestamp:o}=i;const a=o-n;a>=e&&(Wl(r),t(a-e))};return Vl.read(r,!0),()=>Wl(r)}(r,250),Dd.hasAnimatedSinceResize&&(Dd.hasAnimatedSinceResize=!1,this.nodes.forEach(Pf))}))}r&&this.root.registerSharedNode(r,this),!1!==this.options.animate&&o&&(r||i)&&this.addEventListener("didUpdate",(t=>{let{delta:e,hasLayoutChanged:n,hasRelativeTargetChanged:r,layout:i}=t;if(this.isTreeAnimationBlocked())return this.target=void 0,void(this.relativeTarget=void 0);const a=this.options.transition||o.getDefaultTransition()||Df,{onLayoutAnimationStart:s,onLayoutAnimationComplete:l}=o.getProps(),c=!this.targetLayout||!lf(this.targetLayout,i)||r,u=!n&&r;if(this.options.layoutRoot||this.resumeFrom&&this.resumeFrom.instance||u||n&&(c||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0),this.setAnimationOrigin(e,u);const t={...fh(a,"layout"),onPlay:s,onComplete:l};(o.shouldReduceMotion||this.options.layoutRoot)&&(t.delay=0,t.type=!1),this.startAnimation(t)}else n||Pf(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=i}))}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const t=this.getStack();t&&t.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,Wl(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(Of),this.animationId++)}getTransformTemplate(){const{visualElement:t}=this.options;return t&&t.getProps().transformTemplate}willUpdate(){let t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked())return void(this.options.onExitComplete&&this.options.onExitComplete());if(!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let i=0;i<this.path.length;i++){const t=this.path[i];t.shouldResetTransform=!0,t.updateScroll("snapshot"),t.options.layoutRoot&&t.willUpdate(!1)}const{layoutId:e,layout:n}=this.options;if(void 0===e&&!n)return;const r=this.getTransformTemplate();this.prevTransformTemplateValue=r?r(this.latestValues,""):void 0,this.updateSnapshot(),t&&this.notifyListeners("willUpdate")}update(){this.updateScheduled=!1;if(this.isUpdateBlocked())return this.unblockUpdate(),this.clearAllSnapshots(),void this.nodes.forEach(Mf);this.isUpdating||this.nodes.forEach(Af),this.isUpdating=!1,this.nodes.forEach(Cf),this.nodes.forEach(xf),this.nodes.forEach(wf),this.clearAllSnapshots();const t=performance.now();Gl.delta=qs(0,1e3/60,t-Gl.timestamp),Gl.timestamp=t,Gl.isProcessing=!0,ql.update.process(Gl),ql.preRender.process(Gl),ql.render.process(Gl),Gl.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,queueMicrotask((()=>this.update())))}clearAllSnapshots(){this.nodes.forEach(Tf),this.sharedNodes.forEach(Lf)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,Vl.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){Vl.postRender((()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()}))}updateSnapshot(){!this.snapshot&&this.instance&&(this.snapshot=this.measure())}updateLayout(){if(!this.instance)return;if(this.updateScroll(),(!this.options.alwaysMeasureLayout||!this.isLead())&&!this.isLayoutDirty)return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let n=0;n<this.path.length;n++){this.path[n].updateScroll()}const t=this.layout;this.layout=this.measure(!1),this.layoutCorrected=hd(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:e}=this.options;e&&e.notify("LayoutMeasure",this.layout.layoutBox,t?t.layoutBox:void 0)}updateScroll(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"measure",e=Boolean(this.options.layoutScroll&&this.instance);this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===t&&(e=!1),e&&(this.scroll={animationId:this.root.animationId,phase:t,isRoot:i(this.instance),offset:r(this.instance)})}resetTransform(){if(!o)return;const t=this.isLayoutDirty||this.shouldResetTransform,e=this.projectionDelta&&!sf(this.projectionDelta),n=this.getTransformTemplate(),r=n?n(this.latestValues,""):void 0,i=r!==this.prevTransformTemplateValue;t&&(e||gd(this.latestValues)||i)&&(o(this.instance,r),this.shouldResetTransform=!1,this.scheduleRender())}measure(){let t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];const e=this.measurePageBox();let n=this.removeElementScroll(e);var r;return t&&(n=this.removeTransform(n)),Nf((r=n).x),Nf(r.y),{animationId:this.root.animationId,measuredBox:e,layoutBox:n,latestValues:{},source:this.id}}measurePageBox(){const{visualElement:t}=this.options;if(!t)return hd();const e=t.measureViewportBox(),{scroll:n}=this.root;return n&&(Ed(e.x,n.offset.x),Ed(e.y,n.offset.y)),e}removeElementScroll(t){const e=hd();Qd(e,t);for(let n=0;n<this.path.length;n++){const r=this.path[n],{scroll:i,options:o}=r;if(r!==this.root&&i&&o.layoutScroll){if(i.isRoot){Qd(e,t);const{scroll:n}=this.root;n&&(Ed(e.x,-n.offset.x),Ed(e.y,-n.offset.y))}Ed(e.x,i.offset.x),Ed(e.y,i.offset.y)}}return e}applyTransform(t){let e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const n=hd();Qd(n,t);for(let r=0;r<this.path.length;r++){const t=this.path[r];!e&&t.options.layoutScroll&&t.scroll&&t!==t.root&&Cd(n,{x:-t.scroll.offset.x,y:-t.scroll.offset.y}),gd(t.latestValues)&&Cd(n,t.latestValues)}return gd(this.latestValues)&&Cd(n,this.latestValues),n}removeTransform(t){const e=hd();Qd(e,t);for(let n=0;n<this.path.length;n++){const t=this.path[n];if(!t.instance)continue;if(!gd(t.latestValues))continue;md(t.latestValues)&&t.updateSnapshot();const r=hd();Qd(r,t.measurePageBox()),of(e,t.latestValues,t.snapshot?t.snapshot.layoutBox:void 0,r)}return gd(this.latestValues)&&of(e,this.latestValues),e}setTargetDelta(t){this.targetDelta=t,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(t){this.options={...this.options,...t,crossfade:void 0===t.crossfade||t.crossfade}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==Gl.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(){let t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];var e;const n=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=n.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=n.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=n.isSharedProjectionDirty);const r=Boolean(this.resumingFrom)||this!==n;if(!(t||r&&this.isSharedProjectionDirty||this.isProjectionDirty||(null===(e=this.parent)||void 0===e?void 0:e.isProjectionDirty)||this.attemptToResolveRelativeTarget))return;const{layout:i,layoutId:o}=this.options;if(this.layout&&(i||o)){if(this.resolvedRelativeTargetAt=Gl.timestamp,!this.targetDelta&&!this.relativeTarget){const t=this.getClosestProjectingParent();t&&t.layout&&1!==this.animationProgress?(this.relativeParent=t,this.forceRelativeParentToResolveTarget(),this.relativeTarget=hd(),this.relativeTargetOrigin=hd(),id(this.relativeTargetOrigin,this.layout.layoutBox,t.layout.layoutBox),Qd(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(this.relativeTarget||this.targetDelta){var a,s,l;if(this.target||(this.target=hd(),this.targetWithTransforms=hd()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),a=this.target,s=this.relativeTarget,l=this.relativeParent.target,nd(a.x,s.x,l.x),nd(a.y,s.y,l.y)):this.targetDelta?(Boolean(this.resumingFrom)?this.target=this.applyTransform(this.layout.layoutBox):Qd(this.target,this.layout.layoutBox),wd(this.target,this.targetDelta)):Qd(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget){this.attemptToResolveRelativeTarget=!1;const t=this.getClosestProjectingParent();t&&Boolean(t.resumingFrom)===Boolean(this.resumingFrom)&&!t.options.layoutScroll&&t.target&&1!==this.animationProgress?(this.relativeParent=t,this.forceRelativeParentToResolveTarget(),this.relativeTarget=hd(),this.relativeTargetOrigin=hd(),id(this.relativeTargetOrigin,this.target,t.target),Qd(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}_f.resolvedTargetDeltas++}}}getClosestProjectingParent(){if(this.parent&&!md(this.parent.latestValues)&&!yd(this.parent.latestValues))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return Boolean((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var t;const e=this.getLead(),n=Boolean(this.resumingFrom)||this!==e;let r=!0;if((this.isProjectionDirty||(null===(t=this.parent)||void 0===t?void 0:t.isProjectionDirty))&&(r=!1),n&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(r=!1),this.resolvedRelativeTargetAt===Gl.timestamp&&(r=!1),r)return;const{layout:i,layoutId:o}=this.options;if(this.isTreeAnimating=Boolean(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!i&&!o)return;Qd(this.layoutCorrected,this.layout.layoutBox);const a=this.treeScale.x,s=this.treeScale.y;!function(t,e,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const i=n.length;if(!i)return;let o,a;e.x=e.y=1;for(let s=0;s<i;s++){o=n[s],a=o.projectionDelta;const i=o.instance;i&&i.style&&"contents"===i.style.display||(r&&o.options.layoutScroll&&o.scroll&&o!==o.root&&Cd(t,{x:-o.scroll.offset.x,y:-o.scroll.offset.y}),a&&(e.x*=a.x.scale,e.y*=a.y.scale,wd(t,a)),r&&gd(o.latestValues)&&Cd(t,o.latestValues))}e.x=Sd(e.x),e.y=Sd(e.y)}(this.layoutCorrected,this.treeScale,this.path,n),!e.layout||e.target||1===this.treeScale.x&&1===this.treeScale.y||(e.target=e.layout.layoutBox);const{target:l}=e;if(!l)return void(this.projectionTransform&&(this.projectionDelta=ud(),this.projectionTransform="none",this.scheduleRender()));this.projectionDelta||(this.projectionDelta=ud(),this.projectionDeltaWithTransform=ud());const c=this.projectionTransform;ed(this.projectionDelta,this.layoutCorrected,l,this.latestValues),this.projectionTransform=hf(this.projectionDelta,this.treeScale),this.projectionTransform===c&&this.treeScale.x===a&&this.treeScale.y===s||(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",l)),_f.recalculatedProjection++}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(){let t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];if(this.options.scheduleRender&&this.options.scheduleRender(),t){const t=this.getStack();t&&t.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}setAnimationOrigin(t){let e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const n=this.snapshot,r=n?n.latestValues:{},i={...this.latestValues},o=ud();this.relativeParent&&this.relativeParent.options.layoutRoot||(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!e;const a=hd(),s=(n?n.source:void 0)!==(this.layout?this.layout.source:void 0),l=this.getStack(),c=!l||l.members.length<=1,u=Boolean(s&&!c&&!0===this.options.crossfade&&!this.path.some(Rf));let h;this.animationProgress=0,this.mixTargetDelta=e=>{const n=e/1e3;jf(o.x,t.x,n),jf(o.y,t.y,n),this.setTargetDelta(o),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(id(a,this.layout.layoutBox,this.relativeParent.layout.layoutBox),function(t,e,n,r){zf(t.x,e.x,n.x,r),zf(t.y,e.y,n.y,r)}(this.relativeTarget,this.relativeTargetOrigin,a,n),h&&function(t,e){return t.x.min===e.x.min&&t.x.max===e.x.max&&t.y.min===e.y.min&&t.y.max===e.y.max}(this.relativeTarget,h)&&(this.isProjectionDirty=!1),h||(h=hd()),Qd(h,this.relativeTarget)),s&&(this.animationValues=i,function(t,e,n,r,i,o){i?(t.opacity=tu(0,void 0!==n.opacity?n.opacity:1,Yd(r)),t.opacityExit=tu(void 0!==e.opacity?e.opacity:1,0,Kd(r))):o&&(t.opacity=tu(void 0!==e.opacity?e.opacity:1,void 0!==n.opacity?n.opacity:1,r));for(let a=0;a<qd;a++){const i="border".concat(Gd[a],"Radius");let o=Xd(e,i),s=Xd(n,i);void 0===o&&void 0===s||(o||(o=0),s||(s=0),0===o||0===s||Zd(o)===Zd(s)?(t[i]=Math.max(tu(Hd(o),Hd(s),r),0),(nl.test(s)||nl.test(o))&&(t[i]+="%")):t[i]=s)}(e.rotate||n.rotate)&&(t.rotate=tu(e.rotate||0,n.rotate||0,r))}(i,r,this.latestValues,n,u,c)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=n},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(t){this.notifyListeners("animationStart"),this.currentAnimation&&this.currentAnimation.stop(),this.resumingFrom&&this.resumingFrom.currentAnimation&&this.resumingFrom.currentAnimation.stop(),this.pendingAnimation&&(Wl(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=Vl.update((()=>{Dd.hasAnimatedSinceResize=!0,this.currentAnimation=mf(0,1e3,{...t,onUpdate:e=>{this.mixTargetDelta(e),t.onUpdate&&t.onUpdate(e)},onComplete:()=>{t.onComplete&&t.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0}))}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const t=this.getStack();t&&t.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(1e3),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const t=this.getLead();let{targetWithTransforms:e,target:n,layout:r,latestValues:i}=t;if(e&&n&&r){if(this!==t&&this.layout&&r&&Uf(this.options.animationType,this.layout.layoutBox,r.layoutBox)){n=this.target||hd();const e=Jh(this.layout.layoutBox.x);n.x.min=t.target.x.min,n.x.max=n.x.min+e;const r=Jh(this.layout.layoutBox.y);n.y.min=t.target.y.min,n.y.max=n.y.min+r}Qd(e,n),Cd(e,i),ed(this.projectionDeltaWithTransform,this.layoutCorrected,e,i)}}registerSharedNode(t,e){this.sharedNodes.has(t)||this.sharedNodes.set(t,new uf);this.sharedNodes.get(t).add(e);const n=e.options.initialPromotionConfig;e.promote({transition:n?n.transition:void 0,preserveFollowOpacity:n&&n.shouldPreserveFollowOpacity?n.shouldPreserveFollowOpacity(e):void 0})}isLead(){const t=this.getStack();return!t||t.lead===this}getLead(){var t;const{layoutId:e}=this.options;return e&&(null===(t=this.getStack())||void 0===t?void 0:t.lead)||this}getPrevLead(){var t;const{layoutId:e}=this.options;return e?null===(t=this.getStack())||void 0===t?void 0:t.prevLead:void 0}getStack(){const{layoutId:t}=this.options;if(t)return this.root.sharedNodes.get(t)}promote(){let{needsReset:t,transition:e,preserveFollowOpacity:n}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const r=this.getStack();r&&r.promote(this,n),t&&(this.projectionDelta=void 0,this.needsReset=!0),e&&this.setOptions({transition:e})}relegate(){const t=this.getStack();return!!t&&t.relegate(this)}resetRotation(){const{visualElement:t}=this.options;if(!t)return;let e=!1;const{latestValues:n}=t;if((n.rotate||n.rotateX||n.rotateY||n.rotateZ)&&(e=!0),!e)return;const r={};for(let i=0;i<gf.length;i++){const e="rotate"+gf[i];n[e]&&(r[e]=n[e],t.setStaticValue(e,0))}t.render();for(const i in r)t.setStaticValue(i,r[i]);t.scheduleRender()}getProjectionStyles(t){var e,n;if(!this.instance||this.isSVG)return;if(!this.isVisible)return yf;const r={visibility:""},i=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,r.opacity="",r.pointerEvents=Rl(null===t||void 0===t?void 0:t.pointerEvents)||"",r.transform=i?i(this.latestValues,""):"none",r;const o=this.getLead();if(!this.projectionDelta||!this.layout||!o.target){const e={};return this.options.layoutId&&(e.opacity=void 0!==this.latestValues.opacity?this.latestValues.opacity:1,e.pointerEvents=Rl(null===t||void 0===t?void 0:t.pointerEvents)||""),this.hasProjected&&!gd(this.latestValues)&&(e.transform=i?i({},""):"none",this.hasProjected=!1),e}const a=o.animationValues||o.latestValues;this.applyTransformsToTarget(),r.transform=hf(this.projectionDeltaWithTransform,this.treeScale,a),i&&(r.transform=i(a,r.transform));const{x:s,y:l}=this.projectionDelta;r.transformOrigin="".concat(100*s.origin,"% ").concat(100*l.origin,"% 0"),o.animationValues?r.opacity=o===this?null!==(n=null!==(e=a.opacity)&&void 0!==e?e:this.latestValues.opacity)&&void 0!==n?n:1:this.preserveOpacity?this.latestValues.opacity:a.opacityExit:r.opacity=o===this?void 0!==a.opacity?a.opacity:"":void 0!==a.opacityExit?a.opacityExit:0;for(const c in js){if(void 0===a[c])continue;const{correct:t,applyTo:e}=js[c],n="none"===r.transform?a[c]:t(a[c],o);if(e){const t=e.length;for(let i=0;i<t;i++)r[e[i]]=n}else r[c]=n}return this.options.layoutId&&(r.pointerEvents=o===this?Rl(null===t||void 0===t?void 0:t.pointerEvents)||"":"none"),r}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach((t=>{var e;return null===(e=t.currentAnimation)||void 0===e?void 0:e.stop()})),this.root.nodes.forEach(Mf),this.root.sharedNodes.clear()}}}function xf(t){t.updateLayout()}function wf(t){var e;const n=(null===(e=t.resumeFrom)||void 0===e?void 0:e.snapshot)||t.snapshot;if(t.isLead()&&t.layout&&n&&t.hasListeners("didUpdate")){const{layoutBox:e,measuredBox:r}=t.layout,{animationType:i}=t.options,o=n.source!==t.layout.source;"size"===i?dd((t=>{const r=o?n.measuredBox[t]:n.layoutBox[t],i=Jh(r);r.min=e[t].min,r.max=r.min+i})):Uf(i,n.layoutBox,e)&&dd((r=>{const i=o?n.measuredBox[r]:n.layoutBox[r],a=Jh(e[r]);i.max=i.min+a,t.relativeTarget&&!t.currentAnimation&&(t.isProjectionDirty=!0,t.relativeTarget[r].max=t.relativeTarget[r].min+a)}));const a=ud();ed(a,e,n.layoutBox);const s=ud();o?ed(s,t.applyTransform(r,!0),n.measuredBox):ed(s,e,n.layoutBox);const l=!sf(a);let c=!1;if(!t.resumeFrom){const r=t.getClosestProjectingParent();if(r&&!r.resumeFrom){const{snapshot:i,layout:o}=r;if(i&&o){const a=hd();id(a,n.layoutBox,i.layoutBox);const s=hd();id(s,e,o.layoutBox),lf(a,s)||(c=!0),r.options.layoutRoot&&(t.relativeTarget=s,t.relativeTargetOrigin=a,t.relativeParent=r)}}}t.notifyListeners("didUpdate",{layout:e,snapshot:n,delta:s,layoutDelta:a,hasLayoutChanged:l,hasRelativeTargetChanged:c})}else if(t.isLead()){const{onExitComplete:e}=t.options;e&&e()}t.options.transition=void 0}function Sf(t){_f.totalNodes++,t.parent&&(t.isProjecting()||(t.isProjectionDirty=t.parent.isProjectionDirty),t.isSharedProjectionDirty||(t.isSharedProjectionDirty=Boolean(t.isProjectionDirty||t.parent.isProjectionDirty||t.parent.isSharedProjectionDirty)),t.isTransformDirty||(t.isTransformDirty=t.parent.isTransformDirty))}function Ef(t){t.isProjectionDirty=t.isSharedProjectionDirty=t.isTransformDirty=!1}function Tf(t){t.clearSnapshot()}function Mf(t){t.clearMeasurements()}function Af(t){t.isLayoutDirty=!1}function Cf(t){const{visualElement:e}=t.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),t.resetTransform()}function Pf(t){t.finishAnimation(),t.targetDelta=t.relativeTarget=t.target=void 0,t.isProjectionDirty=!0}function kf(t){t.resolveTargetDelta()}function If(t){t.calcProjection()}function Of(t){t.resetRotation()}function Lf(t){t.removeLeadSnapshot()}function jf(t,e,n){t.translate=tu(e.translate,0,n),t.scale=tu(e.scale,1,n),t.origin=e.origin,t.originPoint=e.originPoint}function zf(t,e,n,r){t.min=tu(e.min,n.min,r),t.max=tu(e.max,n.max,r)}function Rf(t){return t.animationValues&&void 0!==t.animationValues.opacityExit}const Df={duration:.45,ease:[.4,0,.1,1]},Bf=t=>"undefined"!==typeof navigator&&navigator.userAgent.toLowerCase().includes(t),Ff=Bf("applewebkit/")&&!Bf("chrome/")?Math.round:Fl;function Nf(t){t.min=Ff(t.min),t.max=Ff(t.max)}function Uf(t,e,n){return"position"===t||"preserve-aspect"===t&&!Qh(cf(e),cf(n),.2)}const Vf=bf({attachResizeListener:(t,e)=>Xl(t,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),Wf={current:void 0},Gf=bf({measureScroll:t=>({x:t.scrollLeft,y:t.scrollTop}),defaultParent:()=>{if(!Wf.current){const t=new Vf({});t.mount(window),t.setOptions({layoutScroll:!0}),Wf.current=t}return Wf.current},resetTransform:(t,e)=>{t.style.transform=void 0!==e?e:"none"},checkIsScrollRoot:t=>Boolean("fixed"===window.getComputedStyle(t).position)}),qf={pan:{Feature:class extends ac{constructor(){super(...arguments),this.removePointerDownListener=Fl}onPointerDown(t){this.session=new qh(t,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:kd(this.node)})}createPanHandlers(){const{onPanSessionStart:t,onPanStart:e,onPan:n,onPanEnd:r}=this.node.getProps();return{onSessionStart:jd(t),onStart:jd(e),onMove:n,onEnd:(t,e)=>{delete this.session,r&&Vl.update((()=>r(t,e)))}}}mount(){this.removePointerDownListener=Jl(this.node.current,"pointerdown",(t=>this.onPointerDown(t)))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}},drag:{Feature:class extends ac{constructor(t){super(t),this.removeGroupControls=Fl,this.removeListeners=Fl,this.controls=new Od(t)}mount(){const{dragControls:t}=this.node.getProps();t&&(this.removeGroupControls=t.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||Fl}unmount(){this.removeGroupControls(),this.removeListeners()}},ProjectionNode:Gf,MeasureLayout:Vd}},Hf=/var\((--[a-zA-Z0-9-_]+),? ?([a-zA-Z0-9 ()%#.,-]+)?\)/;const Zf=4;function Xf(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;bc(n<=Zf,'Max CSS variable fallback depth detected in property "'.concat(t,'". This may indicate a circular fallback dependency.'));const[r,i]=function(t){const e=Hf.exec(t);if(!e)return[,];const[,n,r]=e;return[n,r]}(t);if(!r)return;const o=window.getComputedStyle(e).getPropertyValue(r);if(o){const t=o.trim();return yh(t)?parseFloat(t):t}return Ws(i)?Xf(i,e,n+1):i}const Yf=new Set(["width","height","top","left","right","bottom","x","y","translateX","translateY"]),Kf=t=>Yf.has(t),$f=t=>t===Hs||t===rl,Jf=(t,e)=>parseFloat(t.split(", ")[e]),Qf=(t,e)=>(n,r)=>{let{transform:i}=r;if("none"===i||!i)return 0;const o=i.match(/^matrix3d\((.+)\)$/);if(o)return Jf(o[1],e);{const e=i.match(/^matrix\((.+)\)$/);return e?Jf(e[1],t):0}},tp=new Set(["x","y","z"]),ep=zs.filter((t=>!tp.has(t)));const np={width:(t,e)=>{let{x:n}=t,{paddingLeft:r="0",paddingRight:i="0"}=e;return n.max-n.min-parseFloat(r)-parseFloat(i)},height:(t,e)=>{let{y:n}=t,{paddingTop:r="0",paddingBottom:i="0"}=e;return n.max-n.min-parseFloat(r)-parseFloat(i)},top:(t,e)=>{let{top:n}=e;return parseFloat(n)},left:(t,e)=>{let{left:n}=e;return parseFloat(n)},bottom:(t,e)=>{let{y:n}=t,{top:r}=e;return parseFloat(r)+(n.max-n.min)},right:(t,e)=>{let{x:n}=t,{left:r}=e;return parseFloat(r)+(n.max-n.min)},x:Qf(4,13),y:Qf(5,14)};np.translateX=np.x,np.translateY=np.y;const rp=function(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};e={...e},r={...r};const i=Object.keys(e).filter(Kf);let o=[],a=!1;const s=[];if(i.forEach((i=>{const l=t.getValue(i);if(!t.hasValue(i))return;let c=n[i],u=Mh(c);const h=e[i];let d;if(Ll(h)){const t=h.length,e=null===h[0]?1:0;c=h[e],u=Mh(c);for(let n=e;n<t&&null!==h[n];n++)d?bc(Mh(h[n])===d,"All keyframes must be of the same type"):(d=Mh(h[n]),bc(d===u||$f(u)&&$f(d),"Keyframes must be of the same dimension as the current value"))}else d=Mh(h);if(u!==d)if($f(u)&&$f(d)){const t=l.get();"string"===typeof t&&l.set(parseFloat(t)),"string"===typeof h?e[i]=parseFloat(h):Array.isArray(h)&&d===rl&&(e[i]=h.map(parseFloat))}else(null===u||void 0===u?void 0:u.transform)&&(null===d||void 0===d?void 0:d.transform)&&(0===c||0===h)?0===c?l.set(d.transform(c)):e[i]=u.transform(h):(a||(o=function(t){const e=[];return ep.forEach((n=>{const r=t.getValue(n);void 0!==r&&(e.push([n,r.get()]),r.set(n.startsWith("scale")?1:0))})),e.length&&t.render(),e}(t),a=!0),s.push(i),r[i]=void 0!==r[i]?r[i]:e[i],l.jump(h))})),s.length){const n=s.indexOf("height")>=0?window.pageYOffset:null,i=((t,e,n)=>{const r=e.measureViewportBox(),i=e.current,o=getComputedStyle(i),{display:a}=o,s={};"none"===a&&e.setStaticValue("display",t.display||"block"),n.forEach((t=>{s[t]=np[t](r,o)})),e.render();const l=e.measureViewportBox();return n.forEach((n=>{const r=e.getValue(n);r&&r.jump(s[n]),t[n]=np[n](l,o)})),t})(e,t,s);return o.length&&o.forEach((e=>{let[n,r]=e;t.getValue(n).set(r)})),t.render(),us&&null!==n&&window.scrollTo({top:n}),{target:i,transitionEnd:r}}return{target:e,transitionEnd:r}};function ip(t,e,n,r){return(t=>Object.keys(t).some(Kf))(e)?rp(t,e,n,r):{target:e,transitionEnd:r}}const op=(t,e,n,r)=>{const i=function(t,e,n){let{...r}=e;const i=t.current;if(!(i instanceof Element))return{target:r,transitionEnd:n};n&&(n={...n}),t.values.forEach((t=>{const e=t.get();if(!Ws(e))return;const n=Xf(e,i);n&&t.set(n)}));for(const o in r){const t=r[o];if(!Ws(t))continue;const e=Xf(t,i);e&&(r[o]=e,n||(n={}),void 0===n[o]&&(n[o]=t))}return{target:r,transitionEnd:n}}(t,e,r);return ip(t,e=i.target,n,r=i.transitionEnd)},ap={current:null},sp={current:!1};function lp(){if(sp.current=!0,us)if(window.matchMedia){const t=window.matchMedia("(prefers-reduced-motion)"),e=()=>ap.current=t.matches;t.addListener(e),e()}else ap.current=!1}const cp=new WeakMap,up=Object.keys(Ts),hp=up.length,dp=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"],fp=_s.length;class pp{constructor(t){let{parent:e,props:n,presenceContext:r,reducedMotionConfig:i,visualState:o}=t,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.scheduleRender=()=>Vl.render(this.render,!1,!0);const{latestValues:s,renderState:l}=o;this.latestValues=s,this.baseTarget={...s},this.initialValues=n.initial?{...s}:{},this.renderState=l,this.parent=e,this.props=n,this.presenceContext=r,this.depth=e?e.depth+1:0,this.reducedMotionConfig=i,this.options=a,this.isControllingVariants=bs(n),this.isVariantNode=xs(n),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=Boolean(e&&e.current);const{willChange:c,...u}=this.scrapeMotionValuesFromProps(n,{});for(const h in u){const t=u[h];void 0!==s[h]&&Bs(t)&&(t.set(s[h],!1),gh(c)&&c.add(h))}}scrapeMotionValuesFromProps(t,e){return{}}mount(t){this.current=t,cp.set(t,this),this.projection&&!this.projection.instance&&this.projection.mount(t),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach(((t,e)=>this.bindToMotionValue(e,t))),sp.current||lp(),this.shouldReduceMotion="never"!==this.reducedMotionConfig&&("always"===this.reducedMotionConfig||ap.current),this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){cp.delete(this.current),this.projection&&this.projection.unmount(),Wl(this.notifyUpdate),Wl(this.render),this.valueSubscriptions.forEach((t=>t())),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const t in this.events)this.events[t].clear();for(const t in this.features)this.features[t].unmount();this.current=null}bindToMotionValue(t,e){const n=Rs.has(t),r=e.on("change",(e=>{this.latestValues[t]=e,this.props.onUpdate&&Vl.update(this.notifyUpdate,!1,!0),n&&this.projection&&(this.projection.isTransformDirty=!0)})),i=e.on("renderRequest",this.scheduleRender);this.valueSubscriptions.set(t,(()=>{r(),i()}))}sortNodePosition(t){return this.current&&this.sortInstanceNodePosition&&this.type===t.type?this.sortInstanceNodePosition(this.current,t.current):0}loadFeatures(t,e,n,r){let i,o,{children:a,...s}=t;for(let l=0;l<hp;l++){const t=up[l],{isEnabled:e,Feature:n,ProjectionNode:r,MeasureLayout:a}=Ts[t];r&&(i=r),e(s)&&(!this.features[t]&&n&&(this.features[t]=new n(this)),a&&(o=a))}if(("html"===this.type||"svg"===this.type)&&!this.projection&&i){this.projection=new i(this.latestValues,this.parent&&this.parent.projection);const{layoutId:t,layout:e,drag:n,dragConstraints:o,layoutScroll:a,layoutRoot:l}=s;this.projection.setOptions({layoutId:t,layout:e,alwaysMeasureLayout:Boolean(n)||o&&ms(o),visualElement:this,scheduleRender:()=>this.scheduleRender(),animationType:"string"===typeof e?e:"both",initialPromotionConfig:r,layoutScroll:a,layoutRoot:l})}return o}updateFeatures(){for(const t in this.features){const e=this.features[t];e.isMounted?e.update():(e.mount(),e.isMounted=!0)}}triggerBuild(){this.build(this.renderState,this.latestValues,this.options,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):hd()}getStaticValue(t){return this.latestValues[t]}setStaticValue(t,e){this.latestValues[t]=e}makeTargetAnimatable(t){let e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return this.makeTargetAnimatableFromInstance(t,this.props,e)}update(t,e){(t.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=t,this.prevPresenceContext=this.presenceContext,this.presenceContext=e;for(let n=0;n<dp.length;n++){const e=dp[n];this.propEventSubscriptions[e]&&(this.propEventSubscriptions[e](),delete this.propEventSubscriptions[e]);const r=t["on"+e];r&&(this.propEventSubscriptions[e]=this.on(e,r))}this.prevMotionValues=function(t,e,n){const{willChange:r}=e;for(const i in e){const o=e[i],a=n[i];if(Bs(o))t.addValue(i,o),gh(r)&&r.add(i);else if(Bs(a))t.addValue(i,Sh(o,{owner:t})),gh(r)&&r.remove(i);else if(a!==o)if(t.hasValue(i)){const e=t.getValue(i);!e.hasAnimated&&e.set(o)}else{const e=t.getStaticValue(i);t.addValue(i,Sh(void 0!==e?e:o,{owner:t}))}}for(const i in n)void 0===e[i]&&t.removeValue(i);return e}(this,this.scrapeMotionValuesFromProps(t,this.prevProps),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(t){return this.props.variants?this.props.variants[t]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}getVariantContext(){if(arguments.length>0&&void 0!==arguments[0]&&arguments[0])return this.parent?this.parent.getVariantContext():void 0;if(!this.isControllingVariants){const t=this.parent&&this.parent.getVariantContext()||{};return void 0!==this.props.initial&&(t.initial=this.props.initial),t}const t={};for(let e=0;e<fp;e++){const n=_s[e],r=this.props[n];(gs(r)||!1===r)&&(t[n]=r)}return t}addVariantChild(t){const e=this.getClosestVariantNode();if(e)return e.variantChildren&&e.variantChildren.add(t),()=>e.variantChildren.delete(t)}addValue(t,e){e!==this.values.get(t)&&(this.removeValue(t),this.bindToMotionValue(t,e)),this.values.set(t,e),this.latestValues[t]=e.get()}removeValue(t){this.values.delete(t);const e=this.valueSubscriptions.get(t);e&&(e(),this.valueSubscriptions.delete(t)),delete this.latestValues[t],this.removeValueFromRenderState(t,this.renderState)}hasValue(t){return this.values.has(t)}getValue(t,e){if(this.props.values&&this.props.values[t])return this.props.values[t];let n=this.values.get(t);return void 0===n&&void 0!==e&&(n=Sh(e,{owner:this}),this.addValue(t,n)),n}readValue(t){var e;return void 0===this.latestValues[t]&&this.current?null!==(e=this.getBaseTargetFromProps(this.props,t))&&void 0!==e?e:this.readValueFromInstance(this.current,t,this.options):this.latestValues[t]}setBaseTarget(t,e){this.baseTarget[t]=e}getBaseTarget(t){var e;const{initial:n}=this.props,r="string"===typeof n||"object"===typeof n?null===(e=Il(this.props,n))||void 0===e?void 0:e[t]:void 0;if(n&&void 0!==r)return r;const i=this.getBaseTargetFromProps(this.props,t);return void 0===i||Bs(i)?void 0!==this.initialValues[t]&&void 0===r?void 0:this.baseTarget[t]:i}on(t,e){return this.events[t]||(this.events[t]=new bh),this.events[t].add(e)}notify(t){if(this.events[t]){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];this.events[t].notify(...n)}}}class mp extends pp{sortInstanceNodePosition(t,e){return 2&t.compareDocumentPosition(e)?1:-1}getBaseTargetFromProps(t,e){return t.style?t.style[e]:void 0}removeValueFromRenderState(t,e){let{vars:n,style:r}=e;delete n[t],delete r[t]}makeTargetAnimatableFromInstance(t,e,n){let{transition:r,transitionEnd:i,...o}=t,{transformValues:a}=e,s=function(t,e,n){const r={};for(const i in t){const t=kh(i,e);if(void 0!==t)r[i]=t;else{const t=n.getValue(i);t&&(r[i]=t.get())}}return r}(o,r||{},this);if(a&&(i&&(i=a(i)),o&&(o=a(o)),s&&(s=a(s))),n){!function(t,e,n){var r,i;const o=Object.keys(e).filter((e=>!t.hasValue(e))),a=o.length;var s;if(a)for(let l=0;l<a;l++){const a=o[l],c=e[a];let u=null;Array.isArray(c)&&(u=c[0]),null===u&&(u=null!==(i=null!==(r=n[a])&&void 0!==r?r:t.readValue(a))&&void 0!==i?i:e[a]),void 0!==u&&null!==u&&("string"===typeof u&&(yh(u)||hh(u))?u=parseFloat(u):(s=u,!Ah.find(Eh(s))&&pu.test(c)&&(u=uh(a,c))),t.addValue(a,Sh(u,{owner:t})),void 0===n[a]&&(n[a]=u),null!==u&&t.setBaseTarget(a,u))}}(this,o,s);const t=op(this,o,s,i);i=t.transitionEnd,o=t.target}return{transition:r,transitionEnd:i,...o}}}class gp extends mp{constructor(){super(...arguments),this.type="html"}readValueFromInstance(t,e){if(Rs.has(e)){const t=ch(e);return t&&t.default||0}{const r=(n=t,window.getComputedStyle(n)),i=(Vs(e)?r.getPropertyValue(e):r[e])||0;return"string"===typeof i?i.trim():i}var n}measureInstanceViewportBox(t,e){let{transformPagePoint:n}=e;return Pd(t,n)}build(t,e,n,r){cl(t,e,n,r.transformTemplate)}scrapeMotionValuesFromProps(t,e){return Pl(t,e)}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:t}=this.props;Bs(t)&&(this.childSubscription=t.on("change",(t=>{this.current&&(this.current.textContent="".concat(t))})))}renderInstance(t,e,n,r){Ml(t,e,n,r)}}class yp extends mp{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1}getBaseTargetFromProps(t,e){return t[e]}readValueFromInstance(t,e){if(Rs.has(e)){const t=ch(e);return t&&t.default||0}return e=Al.has(e)?e:fs(e),t.getAttribute(e)}measureInstanceViewportBox(){return hd()}scrapeMotionValuesFromProps(t,e){return kl(t,e)}build(t,e,n,r){xl(t,e,n,this.isSVGTag,r.transformTemplate)}renderInstance(t,e,n,r){Cl(t,e,0,r)}mount(t){this.isSVGTag=Sl(t.tagName),super.mount(t)}}const vp=(t,e)=>Ls(t)?new yp(e,{enableHardwareAcceleration:!1}):new gp(e,{enableHardwareAcceleration:!0}),_p={...Wh,...gc,...qf,...{layout:{ProjectionNode:Gf,MeasureLayout:Vd}}},bp=Is(((t,e)=>function(t,e,n,r){let{forwardMotionProps:i=!1}=e;return{...Ls(t)?Hl:Zl,preloadedFeatures:n,useRender:Tl(i),createVisualElement:r,Component:t}}(t,e,_p,vp)));function xp(){const t=(0,r.useRef)(!1);return hs((()=>(t.current=!0,()=>{t.current=!1})),[]),t}class wp extends r.Component{getSnapshotBeforeUpdate(t){const e=this.props.childRef.current;if(e&&t.isPresent&&!this.props.isPresent){const t=this.props.sizeRef.current;t.height=e.offsetHeight||0,t.width=e.offsetWidth||0,t.top=e.offsetTop,t.left=e.offsetLeft}return null}componentDidUpdate(){}render(){return this.props.children}}function Sp(t){let{children:e,isPresent:n}=t;const i=(0,r.useId)(),o=(0,r.useRef)(null),a=(0,r.useRef)({width:0,height:0,top:0,left:0});return(0,r.useInsertionEffect)((()=>{const{width:t,height:e,top:r,left:s}=a.current;if(n||!o.current||!t||!e)return;o.current.dataset.motionPopId=i;const l=document.createElement("style");return document.head.appendChild(l),l.sheet&&l.sheet.insertRule('\n          [data-motion-pop-id="'.concat(i,'"] {\n            position: absolute !important;\n            width: ').concat(t,"px !important;\n            height: ").concat(e,"px !important;\n            top: ").concat(r,"px !important;\n            left: ").concat(s,"px !important;\n          }\n        ")),()=>{document.head.removeChild(l)}}),[n]),r.createElement(wp,{isPresent:n,childRef:o,sizeRef:a},r.cloneElement(e,{ref:o}))}const Ep=t=>{let{children:e,initial:n,isPresent:i,onExitComplete:o,custom:a,presenceAffectsLayout:s,mode:l}=t;const c=Ol(Tp),u=(0,r.useId)(),h=(0,r.useMemo)((()=>({id:u,initial:n,isPresent:i,custom:a,onExitComplete:t=>{c.set(t,!0);for(const e of c.values())if(!e)return;o&&o()},register:t=>(c.set(t,!1),()=>c.delete(t))})),s?void 0:[i]);return(0,r.useMemo)((()=>{c.forEach(((t,e)=>c.set(e,!1)))}),[i]),r.useEffect((()=>{!i&&!c.size&&o&&o()}),[i]),"popLayout"===l&&(e=r.createElement(Sp,{isPresent:i},e)),r.createElement(cs.Provider,{value:h},e)};function Tp(){return new Map}const Mp=t=>t.key||"";const Ap=t=>{let{children:e,custom:n,initial:i=!0,onExitComplete:o,exitBeforeEnter:a,presenceAffectsLayout:s=!0,mode:l="sync"}=t;bc(!a,"Replace exitBeforeEnter with mode='wait'");const c=(0,r.useContext)(Ms).forceRender||function(){const t=xp(),[e,n]=(0,r.useState)(0),i=(0,r.useCallback)((()=>{t.current&&n(e+1)}),[e]);return[(0,r.useCallback)((()=>Vl.postRender(i)),[i]),e]}()[0],u=xp(),h=function(t){const e=[];return r.Children.forEach(t,(t=>{(0,r.isValidElement)(t)&&e.push(t)})),e}(e);let d=h;const f=(0,r.useRef)(new Map).current,p=(0,r.useRef)(d),m=(0,r.useRef)(new Map).current,g=(0,r.useRef)(!0);var y;if(hs((()=>{g.current=!1,function(t,e){t.forEach((t=>{const n=Mp(t);e.set(n,t)}))}(h,m),p.current=d})),y=()=>{g.current=!0,m.clear(),f.clear()},(0,r.useEffect)((()=>()=>y()),[]),g.current)return r.createElement(r.Fragment,null,d.map((t=>r.createElement(Ep,{key:Mp(t),isPresent:!0,initial:!!i&&void 0,presenceAffectsLayout:s,mode:l},t))));d=[...d];const v=p.current.map(Mp),_=h.map(Mp),b=v.length;for(let r=0;r<b;r++){const t=v[r];-1!==_.indexOf(t)||f.has(t)||f.set(t,void 0)}return"wait"===l&&f.size&&(d=[]),f.forEach(((t,e)=>{if(-1!==_.indexOf(e))return;const i=m.get(e);if(!i)return;const a=v.indexOf(e);let g=t;if(!g){const t=()=>{f.delete(e);const t=Array.from(m.keys()).filter((t=>!_.includes(t)));if(t.forEach((t=>m.delete(t))),p.current=h.filter((n=>{const r=Mp(n);return r===e||t.includes(r)})),!f.size){if(!1===u.current)return;c(),o&&o()}};g=r.createElement(Ep,{key:Mp(i),isPresent:!1,onExitComplete:t,custom:n,presenceAffectsLayout:s,mode:l},i),f.set(e,g)}d.splice(a,0,g)})),d=d.map((t=>{const e=t.key;return f.has(e)?t:r.createElement(Ep,{key:Mp(t),isPresent:!0,presenceAffectsLayout:s,mode:l},t)})),r.createElement(r.Fragment,null,f.size?d:d.map((t=>(0,r.cloneElement)(t))))};var Cp=xi(bp.div),Pp=wi(((t,e)=>{var n,i;const o=Wi("Tooltip",t),a=Mn(t),s=Bi(),{children:l,label:c,shouldWrapChildren:u,"aria-label":h,hasArrow:d,bg:f,portalProps:p,background:m,backgroundColor:g,bgColor:y,motionProps:v,..._}=a,b=null!=(i=null!=(n=null!=m?m:g)?n:f)?i:y;if(b){o.bg=b;const t=function(t,e,n){var r,i,o;return null!=(o=null==(i=null==(r=t.__cssMap)?void 0:r["".concat(e,".").concat(n)])?void 0:i.varRef)?o:n}(s,"colors",b);o[ao.arrowBg.var]=t}const x=Ya({..._,direction:s.direction});let w;if("string"===typeof l||u)w=(0,Si.jsx)(xi.span,{display:"inline-block",tabIndex:0,...x.getTriggerProps(),children:l});else{const t=r.Children.only(l);w=(0,r.cloneElement)(t,x.getTriggerProps(t.props,t.ref))}const S=!!h,E=x.getTooltipProps({},e),T=S?function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];const n=Object.assign({},t);for(const r of e)r in n&&delete n[r];return n}(E,["role","id"]):E,M=function(t,e){const n={};for(const r of e)r in t&&(n[r]=t[r]);return n}(E,["role","id"]);return c?(0,Si.jsxs)(Si.Fragment,{children:[w,(0,Si.jsx)(Ap,{children:x.isOpen&&(0,Si.jsx)(as,{...p,children:(0,Si.jsx)(xi.div,{...x.getTooltipPositionerProps(),__css:{zIndex:o.zIndex,pointerEvents:"none"},children:(0,Si.jsxs)(Cp,{variants:to,initial:"exit",animate:"enter",exit:"exit",...v,...T,__css:o,children:[c,S&&(0,Si.jsx)(xi.span,{srOnly:!0,...M,children:h}),d&&(0,Si.jsx)(xi.div,{"data-popper-arrow":!0,className:"chakra-tooltip__arrow-wrapper",children:(0,Si.jsx)(xi.div,{"data-popper-arrow-inner":!0,className:"chakra-tooltip__arrow",__css:{bg:o.bg}})})]})})})})]}):(0,Si.jsx)(Si.Fragment,{children:l})}));Pp.displayName="Tooltip";var kp=wi(((t,e)=>{const{icon:n,children:i,isRound:o,"aria-label":a,...s}=t,l=n||i,c=(0,r.isValidElement)(l)?(0,r.cloneElement)(l,{"aria-hidden":!0,focusable:!1}):null;return(0,Si.jsx)(Ki,{padding:"0",borderRadius:o?"full":void 0,ref:e,"aria-label":a,...s,children:c})}));function Ip(){}function Op(t){return null==t?Ip:function(){return this.querySelector(t)}}function Lp(){return[]}function jp(t){return null==t?Lp:function(){return this.querySelectorAll(t)}}function zp(t){return function(){return null==(e=t.apply(this,arguments))?[]:Array.isArray(e)?e:Array.from(e);var e}}function Rp(t){return function(){return this.matches(t)}}function Dp(t){return function(e){return e.matches(t)}}kp.displayName="IconButton";var Bp=Array.prototype.find;function Fp(){return this.firstElementChild}var Np=Array.prototype.filter;function Up(){return Array.from(this.children)}function Vp(t){return new Array(t.length)}function Wp(t,e){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=e}function Gp(t,e,n,r,i,o){for(var a,s=0,l=e.length,c=o.length;s<c;++s)(a=e[s])?(a.__data__=o[s],r[s]=a):n[s]=new Wp(t,o[s]);for(;s<l;++s)(a=e[s])&&(i[s]=a)}function qp(t,e,n,r,i,o,a){var s,l,c,u=new Map,h=e.length,d=o.length,f=new Array(h);for(s=0;s<h;++s)(l=e[s])&&(f[s]=c=a.call(l,l.__data__,s,e)+"",u.has(c)?i[s]=l:u.set(c,l));for(s=0;s<d;++s)c=a.call(t,o[s],s,o)+"",(l=u.get(c))?(r[s]=l,l.__data__=o[s],u.delete(c)):n[s]=new Wp(t,o[s]);for(s=0;s<h;++s)(l=e[s])&&u.get(f[s])===l&&(i[s]=l)}function Hp(t){return t.__data__}function Zp(t){return"object"===typeof t&&"length"in t?t:Array.from(t)}function Xp(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}Wp.prototype={constructor:Wp,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,e){return this._parent.insertBefore(t,e)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}};var Yp="http://www.w3.org/1999/xhtml";const Kp={svg:"http://www.w3.org/2000/svg",xhtml:Yp,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function $p(t){var e=t+="",n=e.indexOf(":");return n>=0&&"xmlns"!==(e=t.slice(0,n))&&(t=t.slice(n+1)),Kp.hasOwnProperty(e)?{space:Kp[e],local:t}:t}function Jp(t){return function(){this.removeAttribute(t)}}function Qp(t){return function(){this.removeAttributeNS(t.space,t.local)}}function tm(t,e){return function(){this.setAttribute(t,e)}}function em(t,e){return function(){this.setAttributeNS(t.space,t.local,e)}}function nm(t,e){return function(){var n=e.apply(this,arguments);null==n?this.removeAttribute(t):this.setAttribute(t,n)}}function rm(t,e){return function(){var n=e.apply(this,arguments);null==n?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,n)}}function im(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView}function om(t){return function(){this.style.removeProperty(t)}}function am(t,e,n){return function(){this.style.setProperty(t,e,n)}}function sm(t,e,n){return function(){var r=e.apply(this,arguments);null==r?this.style.removeProperty(t):this.style.setProperty(t,r,n)}}function lm(t,e){return t.style.getPropertyValue(e)||im(t).getComputedStyle(t,null).getPropertyValue(e)}function cm(t){return function(){delete this[t]}}function um(t,e){return function(){this[t]=e}}function hm(t,e){return function(){var n=e.apply(this,arguments);null==n?delete this[t]:this[t]=n}}function dm(t){return t.trim().split(/^|\s+/)}function fm(t){return t.classList||new pm(t)}function pm(t){this._node=t,this._names=dm(t.getAttribute("class")||"")}function mm(t,e){for(var n=fm(t),r=-1,i=e.length;++r<i;)n.add(e[r])}function gm(t,e){for(var n=fm(t),r=-1,i=e.length;++r<i;)n.remove(e[r])}function ym(t){return function(){mm(this,t)}}function vm(t){return function(){gm(this,t)}}function _m(t,e){return function(){(e.apply(this,arguments)?mm:gm)(this,t)}}function bm(){this.textContent=""}function xm(t){return function(){this.textContent=t}}function wm(t){return function(){var e=t.apply(this,arguments);this.textContent=null==e?"":e}}function Sm(){this.innerHTML=""}function Em(t){return function(){this.innerHTML=t}}function Tm(t){return function(){var e=t.apply(this,arguments);this.innerHTML=null==e?"":e}}function Mm(){this.nextSibling&&this.parentNode.appendChild(this)}function Am(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function Cm(t){return function(){var e=this.ownerDocument,n=this.namespaceURI;return n===Yp&&e.documentElement.namespaceURI===Yp?e.createElement(t):e.createElementNS(n,t)}}function Pm(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}function km(t){var e=$p(t);return(e.local?Pm:Cm)(e)}function Im(){return null}function Om(){var t=this.parentNode;t&&t.removeChild(this)}function Lm(){var t=this.cloneNode(!1),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function jm(){var t=this.cloneNode(!0),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function zm(t){return function(){var e=this.__on;if(e){for(var n,r=0,i=-1,o=e.length;r<o;++r)n=e[r],t.type&&n.type!==t.type||n.name!==t.name?e[++i]=n:this.removeEventListener(n.type,n.listener,n.options);++i?e.length=i:delete this.__on}}}function Rm(t,e,n){return function(){var r,i=this.__on,o=function(t){return function(e){t.call(this,e,this.__data__)}}(e);if(i)for(var a=0,s=i.length;a<s;++a)if((r=i[a]).type===t.type&&r.name===t.name)return this.removeEventListener(r.type,r.listener,r.options),this.addEventListener(r.type,r.listener=o,r.options=n),void(r.value=e);this.addEventListener(t.type,o,n),r={type:t.type,name:t.name,value:e,listener:o,options:n},i?i.push(r):this.__on=[r]}}function Dm(t,e,n){var r=im(t),i=r.CustomEvent;"function"===typeof i?i=new i(e,n):(i=r.document.createEvent("Event"),n?(i.initEvent(e,n.bubbles,n.cancelable),i.detail=n.detail):i.initEvent(e,!1,!1)),t.dispatchEvent(i)}function Bm(t,e){return function(){return Dm(this,t,e)}}function Fm(t,e){return function(){return Dm(this,t,e.apply(this,arguments))}}pm.prototype={add:function(t){this._names.indexOf(t)<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){var e=this._names.indexOf(t);e>=0&&(this._names.splice(e,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return this._names.indexOf(t)>=0}};var Nm=[null];function Um(t,e){this._groups=t,this._parents=e}function Vm(){return new Um([[document.documentElement]],Nm)}Um.prototype=Vm.prototype={constructor:Um,select:function(t){"function"!==typeof t&&(t=Op(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var o,a,s=e[i],l=s.length,c=r[i]=new Array(l),u=0;u<l;++u)(o=s[u])&&(a=t.call(o,o.__data__,u,s))&&("__data__"in o&&(a.__data__=o.__data__),c[u]=a);return new Um(r,this._parents)},selectAll:function(t){t="function"===typeof t?zp(t):jp(t);for(var e=this._groups,n=e.length,r=[],i=[],o=0;o<n;++o)for(var a,s=e[o],l=s.length,c=0;c<l;++c)(a=s[c])&&(r.push(t.call(a,a.__data__,c,s)),i.push(a));return new Um(r,i)},selectChild:function(t){return this.select(null==t?Fp:function(t){return function(){return Bp.call(this.children,t)}}("function"===typeof t?t:Dp(t)))},selectChildren:function(t){return this.selectAll(null==t?Up:function(t){return function(){return Np.call(this.children,t)}}("function"===typeof t?t:Dp(t)))},filter:function(t){"function"!==typeof t&&(t=Rp(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var o,a=e[i],s=a.length,l=r[i]=[],c=0;c<s;++c)(o=a[c])&&t.call(o,o.__data__,c,a)&&l.push(o);return new Um(r,this._parents)},data:function(t,e){if(!arguments.length)return Array.from(this,Hp);var n,r=e?qp:Gp,i=this._parents,o=this._groups;"function"!==typeof t&&(n=t,t=function(){return n});for(var a=o.length,s=new Array(a),l=new Array(a),c=new Array(a),u=0;u<a;++u){var h=i[u],d=o[u],f=d.length,p=Zp(t.call(h,h&&h.__data__,u,i)),m=p.length,g=l[u]=new Array(m),y=s[u]=new Array(m);r(h,d,g,y,c[u]=new Array(f),p,e);for(var v,_,b=0,x=0;b<m;++b)if(v=g[b]){for(b>=x&&(x=b+1);!(_=y[x])&&++x<m;);v._next=_||null}}return(s=new Um(s,i))._enter=l,s._exit=c,s},enter:function(){return new Um(this._enter||this._groups.map(Vp),this._parents)},exit:function(){return new Um(this._exit||this._groups.map(Vp),this._parents)},join:function(t,e,n){var r=this.enter(),i=this,o=this.exit();return"function"===typeof t?(r=t(r))&&(r=r.selection()):r=r.append(t+""),null!=e&&(i=e(i))&&(i=i.selection()),null==n?o.remove():n(o),r&&i?r.merge(i).order():i},merge:function(t){for(var e=t.selection?t.selection():t,n=this._groups,r=e._groups,i=n.length,o=r.length,a=Math.min(i,o),s=new Array(i),l=0;l<a;++l)for(var c,u=n[l],h=r[l],d=u.length,f=s[l]=new Array(d),p=0;p<d;++p)(c=u[p]||h[p])&&(f[p]=c);for(;l<i;++l)s[l]=n[l];return new Um(s,this._parents)},selection:function(){return this},order:function(){for(var t=this._groups,e=-1,n=t.length;++e<n;)for(var r,i=t[e],o=i.length-1,a=i[o];--o>=0;)(r=i[o])&&(a&&4^r.compareDocumentPosition(a)&&a.parentNode.insertBefore(r,a),a=r);return this},sort:function(t){function e(e,n){return e&&n?t(e.__data__,n.__data__):!e-!n}t||(t=Xp);for(var n=this._groups,r=n.length,i=new Array(r),o=0;o<r;++o){for(var a,s=n[o],l=s.length,c=i[o]=new Array(l),u=0;u<l;++u)(a=s[u])&&(c[u]=a);c.sort(e)}return new Um(i,this._parents).order()},call:function(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this},nodes:function(){return Array.from(this)},node:function(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var r=t[e],i=0,o=r.length;i<o;++i){var a=r[i];if(a)return a}return null},size:function(){let t=0;for(const e of this)++t;return t},empty:function(){return!this.node()},each:function(t){for(var e=this._groups,n=0,r=e.length;n<r;++n)for(var i,o=e[n],a=0,s=o.length;a<s;++a)(i=o[a])&&t.call(i,i.__data__,a,o);return this},attr:function(t,e){var n=$p(t);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((null==e?n.local?Qp:Jp:"function"===typeof e?n.local?rm:nm:n.local?em:tm)(n,e))},style:function(t,e,n){return arguments.length>1?this.each((null==e?om:"function"===typeof e?sm:am)(t,e,null==n?"":n)):lm(this.node(),t)},property:function(t,e){return arguments.length>1?this.each((null==e?cm:"function"===typeof e?hm:um)(t,e)):this.node()[t]},classed:function(t,e){var n=dm(t+"");if(arguments.length<2){for(var r=fm(this.node()),i=-1,o=n.length;++i<o;)if(!r.contains(n[i]))return!1;return!0}return this.each(("function"===typeof e?_m:e?ym:vm)(n,e))},text:function(t){return arguments.length?this.each(null==t?bm:("function"===typeof t?wm:xm)(t)):this.node().textContent},html:function(t){return arguments.length?this.each(null==t?Sm:("function"===typeof t?Tm:Em)(t)):this.node().innerHTML},raise:function(){return this.each(Mm)},lower:function(){return this.each(Am)},append:function(t){var e="function"===typeof t?t:km(t);return this.select((function(){return this.appendChild(e.apply(this,arguments))}))},insert:function(t,e){var n="function"===typeof t?t:km(t),r=null==e?Im:"function"===typeof e?e:Op(e);return this.select((function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)}))},remove:function(){return this.each(Om)},clone:function(t){return this.select(t?jm:Lm)},datum:function(t){return arguments.length?this.property("__data__",t):this.node().__data__},on:function(t,e,n){var r,i,o=function(t){return t.trim().split(/^|\s+/).map((function(t){var e="",n=t.indexOf(".");return n>=0&&(e=t.slice(n+1),t=t.slice(0,n)),{type:t,name:e}}))}(t+""),a=o.length;if(!(arguments.length<2)){for(s=e?Rm:zm,r=0;r<a;++r)this.each(s(o[r],e,n));return this}var s=this.node().__on;if(s)for(var l,c=0,u=s.length;c<u;++c)for(r=0,l=s[c];r<a;++r)if((i=o[r]).type===l.type&&i.name===l.name)return l.value},dispatch:function(t,e){return this.each(("function"===typeof e?Fm:Bm)(t,e))},[Symbol.iterator]:function*(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var r,i=t[e],o=0,a=i.length;o<a;++o)(r=i[o])&&(yield r)}};const Wm=Vm;var Gm={value:()=>{}};function qm(){for(var t,e=0,n=arguments.length,r={};e<n;++e){if(!(t=arguments[e]+"")||t in r||/[\s.]/.test(t))throw new Error("illegal type: "+t);r[t]=[]}return new Hm(r)}function Hm(t){this._=t}function Zm(t,e){for(var n,r=0,i=t.length;r<i;++r)if((n=t[r]).name===e)return n.value}function Xm(t,e,n){for(var r=0,i=t.length;r<i;++r)if(t[r].name===e){t[r]=Gm,t=t.slice(0,r).concat(t.slice(r+1));break}return null!=n&&t.push({name:e,value:n}),t}Hm.prototype=qm.prototype={constructor:Hm,on:function(t,e){var n,r=this._,i=function(t,e){return t.trim().split(/^|\s+/).map((function(t){var n="",r=t.indexOf(".");if(r>=0&&(n=t.slice(r+1),t=t.slice(0,r)),t&&!e.hasOwnProperty(t))throw new Error("unknown type: "+t);return{type:t,name:n}}))}(t+"",r),o=-1,a=i.length;if(!(arguments.length<2)){if(null!=e&&"function"!==typeof e)throw new Error("invalid callback: "+e);for(;++o<a;)if(n=(t=i[o]).type)r[n]=Xm(r[n],t.name,e);else if(null==e)for(n in r)r[n]=Xm(r[n],t.name,null);return this}for(;++o<a;)if((n=(t=i[o]).type)&&(n=Zm(r[n],t.name)))return n},copy:function(){var t={},e=this._;for(var n in e)t[n]=e[n].slice();return new Hm(t)},call:function(t,e){if((n=arguments.length-2)>0)for(var n,r,i=new Array(n),o=0;o<n;++o)i[o]=arguments[o+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(o=0,n=(r=this._[t]).length;o<n;++o)r[o].value.apply(e,i)},apply:function(t,e,n){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var r=this._[t],i=0,o=r.length;i<o;++i)r[i].value.apply(e,n)}};const Ym=qm;var Km,$m,Jm=0,Qm=0,tg=0,eg=1e3,ng=0,rg=0,ig=0,og="object"===typeof performance&&performance.now?performance:Date,ag="object"===typeof window&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function sg(){return rg||(ag(lg),rg=og.now()+ig)}function lg(){rg=0}function cg(){this._call=this._time=this._next=null}function ug(t,e,n){var r=new cg;return r.restart(t,e,n),r}function hg(){rg=(ng=og.now())+ig,Jm=Qm=0;try{!function(){sg(),++Jm;for(var t,e=Km;e;)(t=rg-e._time)>=0&&e._call.call(void 0,t),e=e._next;--Jm}()}finally{Jm=0,function(){var t,e,n=Km,r=1/0;for(;n;)n._call?(r>n._time&&(r=n._time),t=n,n=n._next):(e=n._next,n._next=null,n=t?t._next=e:Km=e);$m=t,fg(r)}(),rg=0}}function dg(){var t=og.now(),e=t-ng;e>eg&&(ig-=e,ng=t)}function fg(t){Jm||(Qm&&(Qm=clearTimeout(Qm)),t-rg>24?(t<1/0&&(Qm=setTimeout(hg,t-og.now()-ig)),tg&&(tg=clearInterval(tg))):(tg||(ng=og.now(),tg=setInterval(dg,eg)),Jm=1,ag(hg)))}function pg(t,e,n){var r=new cg;return e=null==e?0:+e,r.restart((n=>{r.stop(),t(n+e)}),e,n),r}cg.prototype=ug.prototype={constructor:cg,restart:function(t,e,n){if("function"!==typeof t)throw new TypeError("callback is not a function");n=(null==n?sg():+n)+(null==e?0:+e),this._next||$m===this||($m?$m._next=this:Km=this,$m=this),this._call=t,this._time=n,fg()},stop:function(){this._call&&(this._call=null,this._time=1/0,fg())}};var mg=Ym("start","end","cancel","interrupt"),gg=[],yg=0,vg=1,_g=2,bg=3,xg=4,wg=5,Sg=6;function Eg(t,e,n,r,i,o){var a=t.__transition;if(a){if(n in a)return}else t.__transition={};!function(t,e,n){var r,i=t.__transition;function o(t){n.state=vg,n.timer.restart(a,n.delay,n.time),n.delay<=t&&a(t-n.delay)}function a(o){var c,u,h,d;if(n.state!==vg)return l();for(c in i)if((d=i[c]).name===n.name){if(d.state===bg)return pg(a);d.state===xg?(d.state=Sg,d.timer.stop(),d.on.call("interrupt",t,t.__data__,d.index,d.group),delete i[c]):+c<e&&(d.state=Sg,d.timer.stop(),d.on.call("cancel",t,t.__data__,d.index,d.group),delete i[c])}if(pg((function(){n.state===bg&&(n.state=xg,n.timer.restart(s,n.delay,n.time),s(o))})),n.state=_g,n.on.call("start",t,t.__data__,n.index,n.group),n.state===_g){for(n.state=bg,r=new Array(h=n.tween.length),c=0,u=-1;c<h;++c)(d=n.tween[c].value.call(t,t.__data__,n.index,n.group))&&(r[++u]=d);r.length=u+1}}function s(e){for(var i=e<n.duration?n.ease.call(null,e/n.duration):(n.timer.restart(l),n.state=wg,1),o=-1,a=r.length;++o<a;)r[o].call(t,i);n.state===wg&&(n.on.call("end",t,t.__data__,n.index,n.group),l())}function l(){for(var r in n.state=Sg,n.timer.stop(),delete i[e],i)return;delete t.__transition}i[e]=n,n.timer=ug(o,0,n.time)}(t,n,{name:e,index:r,group:i,on:mg,tween:gg,time:o.time,delay:o.delay,duration:o.duration,ease:o.ease,timer:null,state:yg})}function Tg(t,e){var n=Ag(t,e);if(n.state>yg)throw new Error("too late; already scheduled");return n}function Mg(t,e){var n=Ag(t,e);if(n.state>bg)throw new Error("too late; already running");return n}function Ag(t,e){var n=t.__transition;if(!n||!(n=n[e]))throw new Error("transition not found");return n}function Cg(t,e){return t=+t,e=+e,function(n){return t*(1-n)+e*n}}var Pg,kg=180/Math.PI,Ig={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function Og(t,e,n,r,i,o){var a,s,l;return(a=Math.sqrt(t*t+e*e))&&(t/=a,e/=a),(l=t*n+e*r)&&(n-=t*l,r-=e*l),(s=Math.sqrt(n*n+r*r))&&(n/=s,r/=s,l/=s),t*r<e*n&&(t=-t,e=-e,l=-l,a=-a),{translateX:i,translateY:o,rotate:Math.atan2(e,t)*kg,skewX:Math.atan(l)*kg,scaleX:a,scaleY:s}}function Lg(t,e,n,r){function i(t){return t.length?t.pop()+" ":""}return function(o,a){var s=[],l=[];return o=t(o),a=t(a),function(t,r,i,o,a,s){if(t!==i||r!==o){var l=a.push("translate(",null,e,null,n);s.push({i:l-4,x:Cg(t,i)},{i:l-2,x:Cg(r,o)})}else(i||o)&&a.push("translate("+i+e+o+n)}(o.translateX,o.translateY,a.translateX,a.translateY,s,l),function(t,e,n,o){t!==e?(t-e>180?e+=360:e-t>180&&(t+=360),o.push({i:n.push(i(n)+"rotate(",null,r)-2,x:Cg(t,e)})):e&&n.push(i(n)+"rotate("+e+r)}(o.rotate,a.rotate,s,l),function(t,e,n,o){t!==e?o.push({i:n.push(i(n)+"skewX(",null,r)-2,x:Cg(t,e)}):e&&n.push(i(n)+"skewX("+e+r)}(o.skewX,a.skewX,s,l),function(t,e,n,r,o,a){if(t!==n||e!==r){var s=o.push(i(o)+"scale(",null,",",null,")");a.push({i:s-4,x:Cg(t,n)},{i:s-2,x:Cg(e,r)})}else 1===n&&1===r||o.push(i(o)+"scale("+n+","+r+")")}(o.scaleX,o.scaleY,a.scaleX,a.scaleY,s,l),o=a=null,function(t){for(var e,n=-1,r=l.length;++n<r;)s[(e=l[n]).i]=e.x(t);return s.join("")}}}var jg=Lg((function(t){const e=new("function"===typeof DOMMatrix?DOMMatrix:WebKitCSSMatrix)(t+"");return e.isIdentity?Ig:Og(e.a,e.b,e.c,e.d,e.e,e.f)}),"px, ","px)","deg)"),zg=Lg((function(t){return null==t?Ig:(Pg||(Pg=document.createElementNS("http://www.w3.org/2000/svg","g")),Pg.setAttribute("transform",t),(t=Pg.transform.baseVal.consolidate())?Og((t=t.matrix).a,t.b,t.c,t.d,t.e,t.f):Ig)}),", ",")",")");function Rg(t,e){var n,r;return function(){var i=Mg(this,t),o=i.tween;if(o!==n)for(var a=0,s=(r=n=o).length;a<s;++a)if(r[a].name===e){(r=r.slice()).splice(a,1);break}i.tween=r}}function Dg(t,e,n){var r,i;if("function"!==typeof n)throw new Error;return function(){var o=Mg(this,t),a=o.tween;if(a!==r){i=(r=a).slice();for(var s={name:e,value:n},l=0,c=i.length;l<c;++l)if(i[l].name===e){i[l]=s;break}l===c&&i.push(s)}o.tween=i}}function Bg(t,e,n){var r=t._id;return t.each((function(){var t=Mg(this,r);(t.value||(t.value={}))[e]=n.apply(this,arguments)})),function(t){return Ag(t,r).value[e]}}function Fg(t,e,n){t.prototype=e.prototype=n,n.constructor=t}function Ng(t,e){var n=Object.create(t.prototype);for(var r in e)n[r]=e[r];return n}function Ug(){}var Vg=.7,Wg=1/Vg,Gg="\\s*([+-]?\\d+)\\s*",qg="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Hg="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Zg=/^#([0-9a-f]{3,8})$/,Xg=new RegExp("^rgb\\(".concat(Gg,",").concat(Gg,",").concat(Gg,"\\)$")),Yg=new RegExp("^rgb\\(".concat(Hg,",").concat(Hg,",").concat(Hg,"\\)$")),Kg=new RegExp("^rgba\\(".concat(Gg,",").concat(Gg,",").concat(Gg,",").concat(qg,"\\)$")),$g=new RegExp("^rgba\\(".concat(Hg,",").concat(Hg,",").concat(Hg,",").concat(qg,"\\)$")),Jg=new RegExp("^hsl\\(".concat(qg,",").concat(Hg,",").concat(Hg,"\\)$")),Qg=new RegExp("^hsla\\(".concat(qg,",").concat(Hg,",").concat(Hg,",").concat(qg,"\\)$")),ty={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function ey(){return this.rgb().formatHex()}function ny(){return this.rgb().formatRgb()}function ry(t){var e,n;return t=(t+"").trim().toLowerCase(),(e=Zg.exec(t))?(n=e[1].length,e=parseInt(e[1],16),6===n?iy(e):3===n?new sy(e>>8&15|e>>4&240,e>>4&15|240&e,(15&e)<<4|15&e,1):8===n?oy(e>>24&255,e>>16&255,e>>8&255,(255&e)/255):4===n?oy(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|240&e,((15&e)<<4|15&e)/255):null):(e=Xg.exec(t))?new sy(e[1],e[2],e[3],1):(e=Yg.exec(t))?new sy(255*e[1]/100,255*e[2]/100,255*e[3]/100,1):(e=Kg.exec(t))?oy(e[1],e[2],e[3],e[4]):(e=$g.exec(t))?oy(255*e[1]/100,255*e[2]/100,255*e[3]/100,e[4]):(e=Jg.exec(t))?fy(e[1],e[2]/100,e[3]/100,1):(e=Qg.exec(t))?fy(e[1],e[2]/100,e[3]/100,e[4]):ty.hasOwnProperty(t)?iy(ty[t]):"transparent"===t?new sy(NaN,NaN,NaN,0):null}function iy(t){return new sy(t>>16&255,t>>8&255,255&t,1)}function oy(t,e,n,r){return r<=0&&(t=e=n=NaN),new sy(t,e,n,r)}function ay(t,e,n,r){return 1===arguments.length?((i=t)instanceof Ug||(i=ry(i)),i?new sy((i=i.rgb()).r,i.g,i.b,i.opacity):new sy):new sy(t,e,n,null==r?1:r);var i}function sy(t,e,n,r){this.r=+t,this.g=+e,this.b=+n,this.opacity=+r}function ly(){return"#".concat(dy(this.r)).concat(dy(this.g)).concat(dy(this.b))}function cy(){const t=uy(this.opacity);return"".concat(1===t?"rgb(":"rgba(").concat(hy(this.r),", ").concat(hy(this.g),", ").concat(hy(this.b)).concat(1===t?")":", ".concat(t,")"))}function uy(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function hy(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function dy(t){return((t=hy(t))<16?"0":"")+t.toString(16)}function fy(t,e,n,r){return r<=0?t=e=n=NaN:n<=0||n>=1?t=e=NaN:e<=0&&(t=NaN),new my(t,e,n,r)}function py(t){if(t instanceof my)return new my(t.h,t.s,t.l,t.opacity);if(t instanceof Ug||(t=ry(t)),!t)return new my;if(t instanceof my)return t;var e=(t=t.rgb()).r/255,n=t.g/255,r=t.b/255,i=Math.min(e,n,r),o=Math.max(e,n,r),a=NaN,s=o-i,l=(o+i)/2;return s?(a=e===o?(n-r)/s+6*(n<r):n===o?(r-e)/s+2:(e-n)/s+4,s/=l<.5?o+i:2-o-i,a*=60):s=l>0&&l<1?0:a,new my(a,s,l,t.opacity)}function my(t,e,n,r){this.h=+t,this.s=+e,this.l=+n,this.opacity=+r}function gy(t){return(t=(t||0)%360)<0?t+360:t}function yy(t){return Math.max(0,Math.min(1,t||0))}function vy(t,e,n){return 255*(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)}function _y(t,e,n,r,i){var o=t*t,a=o*t;return((1-3*t+3*o-a)*e+(4-6*o+3*a)*n+(1+3*t+3*o-3*a)*r+a*i)/6}Fg(Ug,ry,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:ey,formatHex:ey,formatHex8:function(){return this.rgb().formatHex8()},formatHsl:function(){return py(this).formatHsl()},formatRgb:ny,toString:ny}),Fg(sy,ay,Ng(Ug,{brighter(t){return t=null==t?Wg:Math.pow(Wg,t),new sy(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=null==t?Vg:Math.pow(Vg,t),new sy(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new sy(hy(this.r),hy(this.g),hy(this.b),uy(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:ly,formatHex:ly,formatHex8:function(){return"#".concat(dy(this.r)).concat(dy(this.g)).concat(dy(this.b)).concat(dy(255*(isNaN(this.opacity)?1:this.opacity)))},formatRgb:cy,toString:cy})),Fg(my,(function(t,e,n,r){return 1===arguments.length?py(t):new my(t,e,n,null==r?1:r)}),Ng(Ug,{brighter(t){return t=null==t?Wg:Math.pow(Wg,t),new my(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=null==t?Vg:Math.pow(Vg,t),new my(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+360*(this.h<0),e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*e,i=2*n-r;return new sy(vy(t>=240?t-240:t+120,i,r),vy(t,i,r),vy(t<120?t+240:t-120,i,r),this.opacity)},clamp(){return new my(gy(this.h),yy(this.s),yy(this.l),uy(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=uy(this.opacity);return"".concat(1===t?"hsl(":"hsla(").concat(gy(this.h),", ").concat(100*yy(this.s),"%, ").concat(100*yy(this.l),"%").concat(1===t?")":", ".concat(t,")"))}}));const by=t=>()=>t;function xy(t,e){return function(n){return t+n*e}}function wy(t){return 1===(t=+t)?Sy:function(e,n){return n-e?function(t,e,n){return t=Math.pow(t,n),e=Math.pow(e,n)-t,n=1/n,function(r){return Math.pow(t+r*e,n)}}(e,n,t):by(isNaN(e)?n:e)}}function Sy(t,e){var n=e-t;return n?xy(t,n):by(isNaN(t)?e:t)}const Ey=function t(e){var n=wy(e);function r(t,e){var r=n((t=ay(t)).r,(e=ay(e)).r),i=n(t.g,e.g),o=n(t.b,e.b),a=Sy(t.opacity,e.opacity);return function(e){return t.r=r(e),t.g=i(e),t.b=o(e),t.opacity=a(e),t+""}}return r.gamma=t,r}(1);function Ty(t){return function(e){var n,r,i=e.length,o=new Array(i),a=new Array(i),s=new Array(i);for(n=0;n<i;++n)r=ay(e[n]),o[n]=r.r||0,a[n]=r.g||0,s[n]=r.b||0;return o=t(o),a=t(a),s=t(s),r.opacity=1,function(t){return r.r=o(t),r.g=a(t),r.b=s(t),r+""}}}Ty((function(t){var e=t.length-1;return function(n){var r=n<=0?n=0:n>=1?(n=1,e-1):Math.floor(n*e),i=t[r],o=t[r+1],a=r>0?t[r-1]:2*i-o,s=r<e-1?t[r+2]:2*o-i;return _y((n-r/e)*e,a,i,o,s)}})),Ty((function(t){var e=t.length;return function(n){var r=Math.floor(((n%=1)<0?++n:n)*e),i=t[(r+e-1)%e],o=t[r%e],a=t[(r+1)%e],s=t[(r+2)%e];return _y((n-r/e)*e,i,o,a,s)}}));var My=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Ay=new RegExp(My.source,"g");function Cy(t,e){var n,r,i,o=My.lastIndex=Ay.lastIndex=0,a=-1,s=[],l=[];for(t+="",e+="";(n=My.exec(t))&&(r=Ay.exec(e));)(i=r.index)>o&&(i=e.slice(o,i),s[a]?s[a]+=i:s[++a]=i),(n=n[0])===(r=r[0])?s[a]?s[a]+=r:s[++a]=r:(s[++a]=null,l.push({i:a,x:Cg(n,r)})),o=Ay.lastIndex;return o<e.length&&(i=e.slice(o),s[a]?s[a]+=i:s[++a]=i),s.length<2?l[0]?function(t){return function(e){return t(e)+""}}(l[0].x):function(t){return function(){return t}}(e):(e=l.length,function(t){for(var n,r=0;r<e;++r)s[(n=l[r]).i]=n.x(t);return s.join("")})}function Py(t,e){var n;return("number"===typeof e?Cg:e instanceof ry?Ey:(n=ry(e))?(e=n,Ey):Cy)(t,e)}function ky(t){return function(){this.removeAttribute(t)}}function Iy(t){return function(){this.removeAttributeNS(t.space,t.local)}}function Oy(t,e,n){var r,i,o=n+"";return function(){var a=this.getAttribute(t);return a===o?null:a===r?i:i=e(r=a,n)}}function Ly(t,e,n){var r,i,o=n+"";return function(){var a=this.getAttributeNS(t.space,t.local);return a===o?null:a===r?i:i=e(r=a,n)}}function jy(t,e,n){var r,i,o;return function(){var a,s,l=n(this);if(null!=l)return(a=this.getAttribute(t))===(s=l+"")?null:a===r&&s===i?o:(i=s,o=e(r=a,l));this.removeAttribute(t)}}function zy(t,e,n){var r,i,o;return function(){var a,s,l=n(this);if(null!=l)return(a=this.getAttributeNS(t.space,t.local))===(s=l+"")?null:a===r&&s===i?o:(i=s,o=e(r=a,l));this.removeAttributeNS(t.space,t.local)}}function Ry(t,e){var n,r;function i(){var i=e.apply(this,arguments);return i!==r&&(n=(r=i)&&function(t,e){return function(n){this.setAttributeNS(t.space,t.local,e.call(this,n))}}(t,i)),n}return i._value=e,i}function Dy(t,e){var n,r;function i(){var i=e.apply(this,arguments);return i!==r&&(n=(r=i)&&function(t,e){return function(n){this.setAttribute(t,e.call(this,n))}}(t,i)),n}return i._value=e,i}function By(t,e){return function(){Tg(this,t).delay=+e.apply(this,arguments)}}function Fy(t,e){return e=+e,function(){Tg(this,t).delay=e}}function Ny(t,e){return function(){Mg(this,t).duration=+e.apply(this,arguments)}}function Uy(t,e){return e=+e,function(){Mg(this,t).duration=e}}var Vy=Wm.prototype.constructor;function Wy(t){return function(){this.style.removeProperty(t)}}var Gy=0;function qy(t,e,n,r){this._groups=t,this._parents=e,this._name=n,this._id=r}function Hy(){return++Gy}var Zy=Wm.prototype;qy.prototype=function(t){return Wm().transition(t)}.prototype={constructor:qy,select:function(t){var e=this._name,n=this._id;"function"!==typeof t&&(t=Op(t));for(var r=this._groups,i=r.length,o=new Array(i),a=0;a<i;++a)for(var s,l,c=r[a],u=c.length,h=o[a]=new Array(u),d=0;d<u;++d)(s=c[d])&&(l=t.call(s,s.__data__,d,c))&&("__data__"in s&&(l.__data__=s.__data__),h[d]=l,Eg(h[d],e,n,d,h,Ag(s,n)));return new qy(o,this._parents,e,n)},selectAll:function(t){var e=this._name,n=this._id;"function"!==typeof t&&(t=jp(t));for(var r=this._groups,i=r.length,o=[],a=[],s=0;s<i;++s)for(var l,c=r[s],u=c.length,h=0;h<u;++h)if(l=c[h]){for(var d,f=t.call(l,l.__data__,h,c),p=Ag(l,n),m=0,g=f.length;m<g;++m)(d=f[m])&&Eg(d,e,n,m,f,p);o.push(f),a.push(l)}return new qy(o,a,e,n)},selectChild:Zy.selectChild,selectChildren:Zy.selectChildren,filter:function(t){"function"!==typeof t&&(t=Rp(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var o,a=e[i],s=a.length,l=r[i]=[],c=0;c<s;++c)(o=a[c])&&t.call(o,o.__data__,c,a)&&l.push(o);return new qy(r,this._parents,this._name,this._id)},merge:function(t){if(t._id!==this._id)throw new Error;for(var e=this._groups,n=t._groups,r=e.length,i=n.length,o=Math.min(r,i),a=new Array(r),s=0;s<o;++s)for(var l,c=e[s],u=n[s],h=c.length,d=a[s]=new Array(h),f=0;f<h;++f)(l=c[f]||u[f])&&(d[f]=l);for(;s<r;++s)a[s]=e[s];return new qy(a,this._parents,this._name,this._id)},selection:function(){return new Vy(this._groups,this._parents)},transition:function(){for(var t=this._name,e=this._id,n=Hy(),r=this._groups,i=r.length,o=0;o<i;++o)for(var a,s=r[o],l=s.length,c=0;c<l;++c)if(a=s[c]){var u=Ag(a,e);Eg(a,t,n,c,s,{time:u.time+u.delay+u.duration,delay:0,duration:u.duration,ease:u.ease})}return new qy(r,this._parents,t,n)},call:Zy.call,nodes:Zy.nodes,node:Zy.node,size:Zy.size,empty:Zy.empty,each:Zy.each,on:function(t,e){var n=this._id;return arguments.length<2?Ag(this.node(),n).on.on(t):this.each(function(t,e,n){var r,i,o=function(t){return(t+"").trim().split(/^|\s+/).every((function(t){var e=t.indexOf(".");return e>=0&&(t=t.slice(0,e)),!t||"start"===t}))}(e)?Tg:Mg;return function(){var a=o(this,t),s=a.on;s!==r&&(i=(r=s).copy()).on(e,n),a.on=i}}(n,t,e))},attr:function(t,e){var n=$p(t),r="transform"===n?zg:Py;return this.attrTween(t,"function"===typeof e?(n.local?zy:jy)(n,r,Bg(this,"attr."+t,e)):null==e?(n.local?Iy:ky)(n):(n.local?Ly:Oy)(n,r,e))},attrTween:function(t,e){var n="attr."+t;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(null==e)return this.tween(n,null);if("function"!==typeof e)throw new Error;var r=$p(t);return this.tween(n,(r.local?Ry:Dy)(r,e))},style:function(t,e,n){var r="transform"===(t+="")?jg:Py;return null==e?this.styleTween(t,function(t,e){var n,r,i;return function(){var o=lm(this,t),a=(this.style.removeProperty(t),lm(this,t));return o===a?null:o===n&&a===r?i:i=e(n=o,r=a)}}(t,r)).on("end.style."+t,Wy(t)):"function"===typeof e?this.styleTween(t,function(t,e,n){var r,i,o;return function(){var a=lm(this,t),s=n(this),l=s+"";return null==s&&(this.style.removeProperty(t),l=s=lm(this,t)),a===l?null:a===r&&l===i?o:(i=l,o=e(r=a,s))}}(t,r,Bg(this,"style."+t,e))).each(function(t,e){var n,r,i,o,a="style."+e,s="end."+a;return function(){var l=Mg(this,t),c=l.on,u=null==l.value[a]?o||(o=Wy(e)):void 0;c===n&&i===u||(r=(n=c).copy()).on(s,i=u),l.on=r}}(this._id,t)):this.styleTween(t,function(t,e,n){var r,i,o=n+"";return function(){var a=lm(this,t);return a===o?null:a===r?i:i=e(r=a,n)}}(t,r,e),n).on("end.style."+t,null)},styleTween:function(t,e,n){var r="style."+(t+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(null==e)return this.tween(r,null);if("function"!==typeof e)throw new Error;return this.tween(r,function(t,e,n){var r,i;function o(){var o=e.apply(this,arguments);return o!==i&&(r=(i=o)&&function(t,e,n){return function(r){this.style.setProperty(t,e.call(this,r),n)}}(t,o,n)),r}return o._value=e,o}(t,e,null==n?"":n))},text:function(t){return this.tween("text","function"===typeof t?function(t){return function(){var e=t(this);this.textContent=null==e?"":e}}(Bg(this,"text",t)):function(t){return function(){this.textContent=t}}(null==t?"":t+""))},textTween:function(t){var e="text";if(arguments.length<1)return(e=this.tween(e))&&e._value;if(null==t)return this.tween(e,null);if("function"!==typeof t)throw new Error;return this.tween(e,function(t){var e,n;function r(){var r=t.apply(this,arguments);return r!==n&&(e=(n=r)&&function(t){return function(e){this.textContent=t.call(this,e)}}(r)),e}return r._value=t,r}(t))},remove:function(){return this.on("end.remove",function(t){return function(){var e=this.parentNode;for(var n in this.__transition)if(+n!==t)return;e&&e.removeChild(this)}}(this._id))},tween:function(t,e){var n=this._id;if(t+="",arguments.length<2){for(var r,i=Ag(this.node(),n).tween,o=0,a=i.length;o<a;++o)if((r=i[o]).name===t)return r.value;return null}return this.each((null==e?Rg:Dg)(n,t,e))},delay:function(t){var e=this._id;return arguments.length?this.each(("function"===typeof t?By:Fy)(e,t)):Ag(this.node(),e).delay},duration:function(t){var e=this._id;return arguments.length?this.each(("function"===typeof t?Ny:Uy)(e,t)):Ag(this.node(),e).duration},ease:function(t){var e=this._id;return arguments.length?this.each(function(t,e){if("function"!==typeof e)throw new Error;return function(){Mg(this,t).ease=e}}(e,t)):Ag(this.node(),e).ease},easeVarying:function(t){if("function"!==typeof t)throw new Error;return this.each(function(t,e){return function(){var n=e.apply(this,arguments);if("function"!==typeof n)throw new Error;Mg(this,t).ease=n}}(this._id,t))},end:function(){var t,e,n=this,r=n._id,i=n.size();return new Promise((function(o,a){var s={value:a},l={value:function(){0===--i&&o()}};n.each((function(){var n=Mg(this,r),i=n.on;i!==t&&((e=(t=i).copy())._.cancel.push(s),e._.interrupt.push(s),e._.end.push(l)),n.on=e})),0===i&&o()}))},[Symbol.iterator]:Zy[Symbol.iterator]};var Xy={time:null,delay:0,duration:250,ease:function(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}};function Yy(t,e){for(var n;!(n=t.__transition)||!(n=n[e]);)if(!(t=t.parentNode))throw new Error("transition ".concat(e," not found"));return n}Wm.prototype.interrupt=function(t){return this.each((function(){!function(t,e){var n,r,i,o=t.__transition,a=!0;if(o){for(i in e=null==e?null:e+"",o)(n=o[i]).name===e?(r=n.state>_g&&n.state<wg,n.state=Sg,n.timer.stop(),n.on.call(r?"interrupt":"cancel",t,t.__data__,n.index,n.group),delete o[i]):a=!1;a&&delete t.__transition}}(this,t)}))},Wm.prototype.transition=function(t){var e,n;t instanceof qy?(e=t._id,t=t._name):(e=Hy(),(n=Xy).time=sg(),t=null==t?null:t+"");for(var r=this._groups,i=r.length,o=0;o<i;++o)for(var a,s=r[o],l=s.length,c=0;c<l;++c)(a=s[c])&&Eg(a,t,e,c,s,n||Yy(a,e));return new qy(r,this._parents,t,e)};const{abs:Ky,max:$y,min:Jy}=Math;function Qy(t){return[+t[0],+t[1]]}function tv(t){return[Qy(t[0]),Qy(t[1])]}["w","e"].map(ev),["n","s"].map(ev),["n","w","e","s","nw","ne","sw","se"].map(ev);function ev(t){return{type:t}}function nv(t,e){if((n=(t=e?t.toExponential(e-1):t.toExponential()).indexOf("e"))<0)return null;var n,r=t.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+t.slice(n+1)]}function rv(t){return(t=nv(Math.abs(t)))?t[1]:NaN}var iv,ov=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function av(t){if(!(e=ov.exec(t)))throw new Error("invalid format: "+t);var e;return new sv({fill:e[1],align:e[2],sign:e[3],symbol:e[4],zero:e[5],width:e[6],comma:e[7],precision:e[8]&&e[8].slice(1),trim:e[9],type:e[10]})}function sv(t){this.fill=void 0===t.fill?" ":t.fill+"",this.align=void 0===t.align?">":t.align+"",this.sign=void 0===t.sign?"-":t.sign+"",this.symbol=void 0===t.symbol?"":t.symbol+"",this.zero=!!t.zero,this.width=void 0===t.width?void 0:+t.width,this.comma=!!t.comma,this.precision=void 0===t.precision?void 0:+t.precision,this.trim=!!t.trim,this.type=void 0===t.type?"":t.type+""}function lv(t,e){var n=nv(t,e);if(!n)return t+"";var r=n[0],i=n[1];return i<0?"0."+new Array(-i).join("0")+r:r.length>i+1?r.slice(0,i+1)+"."+r.slice(i+1):r+new Array(i-r.length+2).join("0")}av.prototype=sv.prototype,sv.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(void 0===this.width?"":Math.max(1,0|this.width))+(this.comma?",":"")+(void 0===this.precision?"":"."+Math.max(0,0|this.precision))+(this.trim?"~":"")+this.type};const cv={"%":(t,e)=>(100*t).toFixed(e),b:t=>Math.round(t).toString(2),c:t=>t+"",d:function(t){return Math.abs(t=Math.round(t))>=1e21?t.toLocaleString("en").replace(/,/g,""):t.toString(10)},e:(t,e)=>t.toExponential(e),f:(t,e)=>t.toFixed(e),g:(t,e)=>t.toPrecision(e),o:t=>Math.round(t).toString(8),p:(t,e)=>lv(100*t,e),r:lv,s:function(t,e){var n=nv(t,e);if(!n)return t+"";var r=n[0],i=n[1],o=i-(iv=3*Math.max(-8,Math.min(8,Math.floor(i/3))))+1,a=r.length;return o===a?r:o>a?r+new Array(o-a+1).join("0"):o>0?r.slice(0,o)+"."+r.slice(o):"0."+new Array(1-o).join("0")+nv(t,Math.max(0,e+o-1))[0]},X:t=>Math.round(t).toString(16).toUpperCase(),x:t=>Math.round(t).toString(16)};function uv(t){return t}var hv,dv,fv,pv=Array.prototype.map,mv=["y","z","a","f","p","n","\xb5","m","","k","M","G","T","P","E","Z","Y"];function gv(t){var e,n,r=void 0===t.grouping||void 0===t.thousands?uv:(e=pv.call(t.grouping,Number),n=t.thousands+"",function(t,r){for(var i=t.length,o=[],a=0,s=e[0],l=0;i>0&&s>0&&(l+s+1>r&&(s=Math.max(1,r-l)),o.push(t.substring(i-=s,i+s)),!((l+=s+1)>r));)s=e[a=(a+1)%e.length];return o.reverse().join(n)}),i=void 0===t.currency?"":t.currency[0]+"",o=void 0===t.currency?"":t.currency[1]+"",a=void 0===t.decimal?".":t.decimal+"",s=void 0===t.numerals?uv:function(t){return function(e){return e.replace(/[0-9]/g,(function(e){return t[+e]}))}}(pv.call(t.numerals,String)),l=void 0===t.percent?"%":t.percent+"",c=void 0===t.minus?"\u2212":t.minus+"",u=void 0===t.nan?"NaN":t.nan+"";function h(t){var e=(t=av(t)).fill,n=t.align,h=t.sign,d=t.symbol,f=t.zero,p=t.width,m=t.comma,g=t.precision,y=t.trim,v=t.type;"n"===v?(m=!0,v="g"):cv[v]||(void 0===g&&(g=12),y=!0,v="g"),(f||"0"===e&&"="===n)&&(f=!0,e="0",n="=");var _="$"===d?i:"#"===d&&/[boxX]/.test(v)?"0"+v.toLowerCase():"",b="$"===d?o:/[%p]/.test(v)?l:"",x=cv[v],w=/[defgprs%]/.test(v);function S(t){var i,o,l,d=_,S=b;if("c"===v)S=x(t)+S,t="";else{var E=(t=+t)<0||1/t<0;if(t=isNaN(t)?u:x(Math.abs(t),g),y&&(t=function(t){t:for(var e,n=t.length,r=1,i=-1;r<n;++r)switch(t[r]){case".":i=e=r;break;case"0":0===i&&(i=r),e=r;break;default:if(!+t[r])break t;i>0&&(i=0)}return i>0?t.slice(0,i)+t.slice(e+1):t}(t)),E&&0===+t&&"+"!==h&&(E=!1),d=(E?"("===h?h:c:"-"===h||"("===h?"":h)+d,S=("s"===v?mv[8+iv/3]:"")+S+(E&&"("===h?")":""),w)for(i=-1,o=t.length;++i<o;)if(48>(l=t.charCodeAt(i))||l>57){S=(46===l?a+t.slice(i+1):t.slice(i))+S,t=t.slice(0,i);break}}m&&!f&&(t=r(t,1/0));var T=d.length+t.length+S.length,M=T<p?new Array(p-T+1).join(e):"";switch(m&&f&&(t=r(M+t,M.length?p-S.length:1/0),M=""),n){case"<":t=d+t+S+M;break;case"=":t=d+M+t+S;break;case"^":t=M.slice(0,T=M.length>>1)+d+t+S+M.slice(T);break;default:t=M+d+t+S}return s(t)}return g=void 0===g?6:/[gprs]/.test(v)?Math.max(1,Math.min(21,g)):Math.max(0,Math.min(20,g)),S.toString=function(){return t+""},S}return{format:h,formatPrefix:function(t,e){var n=h(((t=av(t)).type="f",t)),r=3*Math.max(-8,Math.min(8,Math.floor(rv(e)/3))),i=Math.pow(10,-r),o=mv[8+r/3];return function(t){return n(i*t)+o}}}}function yv(t,e){var n,r=e?e.length:0,i=t?Math.min(r,t.length):0,o=new Array(i),a=new Array(r);for(n=0;n<i;++n)o[n]=xv(t[n],e[n]);for(;n<r;++n)a[n]=e[n];return function(t){for(n=0;n<i;++n)a[n]=o[n](t);return a}}function vv(t,e){var n=new Date;return t=+t,e=+e,function(r){return n.setTime(t*(1-r)+e*r),n}}function _v(t,e){var n,r={},i={};for(n in null!==t&&"object"===typeof t||(t={}),null!==e&&"object"===typeof e||(e={}),e)n in t?r[n]=xv(t[n],e[n]):i[n]=e[n];return function(t){for(n in r)i[n]=r[n](t);return i}}function bv(t,e){e||(e=[]);var n,r=t?Math.min(e.length,t.length):0,i=e.slice();return function(o){for(n=0;n<r;++n)i[n]=t[n]*(1-o)+e[n]*o;return i}}function xv(t,e){var n,r,i=typeof e;return null==e||"boolean"===i?by(e):("number"===i?Cg:"string"===i?(n=ry(e))?(e=n,Ey):Cy:e instanceof ry?Ey:e instanceof Date?vv:(r=e,!ArrayBuffer.isView(r)||r instanceof DataView?Array.isArray(e)?yv:"function"!==typeof e.valueOf&&"function"!==typeof e.toString||isNaN(e)?_v:Cg:bv))(t,e)}function wv(t,e){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(e).domain(t)}return this}function Sv(t,e){switch(arguments.length){case 0:break;case 1:"function"===typeof t?this.interpolator(t):this.range(t);break;default:this.domain(t),"function"===typeof e?this.interpolator(e):this.range(e)}return this}hv=gv({thousands:",",grouping:[3],currency:["$",""]}),dv=hv.format,fv=hv.formatPrefix;class Ev extends Map{constructor(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Cv;if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:e}}),null!=t)for(const[n,r]of t)this.set(n,r)}get(t){return super.get(Tv(this,t))}has(t){return super.has(Tv(this,t))}set(t,e){return super.set(Mv(this,t),e)}delete(t){return super.delete(Av(this,t))}}Set;function Tv(t,e){let{_intern:n,_key:r}=t;const i=r(e);return n.has(i)?n.get(i):e}function Mv(t,e){let{_intern:n,_key:r}=t;const i=r(e);return n.has(i)?n.get(i):(n.set(i,e),e)}function Av(t,e){let{_intern:n,_key:r}=t;const i=r(e);return n.has(i)&&(e=n.get(i),n.delete(i)),e}function Cv(t){return null!==t&&"object"===typeof t?t.valueOf():t}const Pv=Symbol("implicit");function kv(){var t=new Ev,e=[],n=[],r=Pv;function i(i){let o=t.get(i);if(void 0===o){if(r!==Pv)return r;t.set(i,o=e.push(i)-1)}return n[o%n.length]}return i.domain=function(n){if(!arguments.length)return e.slice();e=[],t=new Ev;for(const r of n)t.has(r)||t.set(r,e.push(r)-1);return i},i.range=function(t){return arguments.length?(n=Array.from(t),i):n.slice()},i.unknown=function(t){return arguments.length?(r=t,i):r},i.copy=function(){return kv(e,n).unknown(r)},wv.apply(i,arguments),i}function Iv(){var t,e,n=kv().unknown(void 0),r=n.domain,i=n.range,o=0,a=1,s=!1,l=0,c=0,u=.5;function h(){var n=r().length,h=a<o,d=h?a:o,f=h?o:a;t=(f-d)/Math.max(1,n-l+2*c),s&&(t=Math.floor(t)),d+=(f-d-t*(n-l))*u,e=t*(1-l),s&&(d=Math.round(d),e=Math.round(e));var p=function(t,e,n){t=+t,e=+e,n=(i=arguments.length)<2?(e=t,t=0,1):i<3?1:+n;for(var r=-1,i=0|Math.max(0,Math.ceil((e-t)/n)),o=new Array(i);++r<i;)o[r]=t+r*n;return o}(n).map((function(e){return d+t*e}));return i(h?p.reverse():p)}return delete n.unknown,n.domain=function(t){return arguments.length?(r(t),h()):r()},n.range=function(t){return arguments.length?([o,a]=t,o=+o,a=+a,h()):[o,a]},n.rangeRound=function(t){return[o,a]=t,o=+o,a=+a,s=!0,h()},n.bandwidth=function(){return e},n.step=function(){return t},n.round=function(t){return arguments.length?(s=!!t,h()):s},n.padding=function(t){return arguments.length?(l=Math.min(1,c=+t),h()):l},n.paddingInner=function(t){return arguments.length?(l=Math.min(1,t),h()):l},n.paddingOuter=function(t){return arguments.length?(c=+t,h()):c},n.align=function(t){return arguments.length?(u=Math.max(0,Math.min(1,t)),h()):u},n.copy=function(){return Iv(r(),[o,a]).round(s).paddingInner(l).paddingOuter(c).align(u)},wv.apply(h(),arguments)}function Ov(t){var e=t.copy;return t.padding=t.paddingOuter,delete t.paddingInner,delete t.paddingOuter,t.copy=function(){return Ov(e())},t}function Lv(){return Ov(Iv.apply(null,arguments).paddingInner(1))}const jv=Math.sqrt(50),zv=Math.sqrt(10),Rv=Math.sqrt(2);function Dv(t,e,n){const r=(e-t)/Math.max(0,n),i=Math.floor(Math.log10(r)),o=r/Math.pow(10,i),a=o>=jv?10:o>=zv?5:o>=Rv?2:1;let s,l,c;return i<0?(c=Math.pow(10,-i)/a,s=Math.round(t*c),l=Math.round(e*c),s/c<t&&++s,l/c>e&&--l,c=-c):(c=Math.pow(10,i)*a,s=Math.round(t/c),l=Math.round(e/c),s*c<t&&++s,l*c>e&&--l),l<s&&.5<=n&&n<2?Dv(t,e,2*n):[s,l,c]}function Bv(t,e,n){if(!((n=+n)>0))return[];if((t=+t)===(e=+e))return[t];const r=e<t,[i,o,a]=r?Dv(e,t,n):Dv(t,e,n);if(!(o>=i))return[];const s=o-i+1,l=new Array(s);if(r)if(a<0)for(let c=0;c<s;++c)l[c]=(o-c)/-a;else for(let c=0;c<s;++c)l[c]=(o-c)*a;else if(a<0)for(let c=0;c<s;++c)l[c]=(i+c)/-a;else for(let c=0;c<s;++c)l[c]=(i+c)*a;return l}function Fv(t,e,n){return Dv(t=+t,e=+e,n=+n)[2]}function Nv(t,e,n){n=+n;const r=(e=+e)<(t=+t),i=r?Fv(e,t,n):Fv(t,e,n);return(r?-1:1)*(i<0?1/-i:i)}function Uv(t,e){return null==t||null==e?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function Vv(t,e){return null==t||null==e?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function Wv(t){let e,n,r;function i(t,r){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:t.length;if(i<o){if(0!==e(r,r))return o;do{const e=i+o>>>1;n(t[e],r)<0?i=e+1:o=e}while(i<o)}return i}return 2!==t.length?(e=Uv,n=(e,n)=>Uv(t(e),n),r=(e,n)=>t(e)-n):(e=t===Uv||t===Vv?t:Gv,n=t,r=t),{left:i,center:function(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;const o=i(t,e,n,(arguments.length>3&&void 0!==arguments[3]?arguments[3]:t.length)-1);return o>n&&r(t[o-1],e)>-r(t[o],e)?o-1:o},right:function(t,r){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:t.length;if(i<o){if(0!==e(r,r))return o;do{const e=i+o>>>1;n(t[e],r)<=0?i=e+1:o=e}while(i<o)}return i}}}function Gv(){return 0}function qv(t){return null===t?NaN:+t}const Hv=Wv(Uv),Zv=Hv.right,Xv=(Hv.left,Wv(qv).center,Zv);function Yv(t,e){return t=+t,e=+e,function(n){return Math.round(t*(1-n)+e*n)}}function Kv(t){return+t}var $v=[0,1];function Jv(t){return t}function Qv(t,e){return(e-=t=+t)?function(n){return(n-t)/e}:(n=isNaN(e)?NaN:.5,function(){return n});var n}function t_(t,e,n){var r=t[0],i=t[1],o=e[0],a=e[1];return i<r?(r=Qv(i,r),o=n(a,o)):(r=Qv(r,i),o=n(o,a)),function(t){return o(r(t))}}function e_(t,e,n){var r=Math.min(t.length,e.length)-1,i=new Array(r),o=new Array(r),a=-1;for(t[r]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());++a<r;)i[a]=Qv(t[a],t[a+1]),o[a]=n(e[a],e[a+1]);return function(e){var n=Xv(t,e,1,r)-1;return o[n](i[n](e))}}function n_(t,e){return e.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown())}function r_(){var t,e,n,r,i,o,a=$v,s=$v,l=xv,c=Jv;function u(){var t=Math.min(a.length,s.length);return c!==Jv&&(c=function(t,e){var n;return t>e&&(n=t,t=e,e=n),function(n){return Math.max(t,Math.min(e,n))}}(a[0],a[t-1])),r=t>2?e_:t_,i=o=null,h}function h(e){return null==e||isNaN(e=+e)?n:(i||(i=r(a.map(t),s,l)))(t(c(e)))}return h.invert=function(n){return c(e((o||(o=r(s,a.map(t),Cg)))(n)))},h.domain=function(t){return arguments.length?(a=Array.from(t,Kv),u()):a.slice()},h.range=function(t){return arguments.length?(s=Array.from(t),u()):s.slice()},h.rangeRound=function(t){return s=Array.from(t),l=Yv,u()},h.clamp=function(t){return arguments.length?(c=!!t||Jv,u()):c!==Jv},h.interpolate=function(t){return arguments.length?(l=t,u()):l},h.unknown=function(t){return arguments.length?(n=t,h):n},function(n,r){return t=n,e=r,u()}}function i_(){return r_()(Jv,Jv)}function o_(t,e,n,r){var i,o=Nv(t,e,n);switch((r=av(null==r?",f":r)).type){case"s":var a=Math.max(Math.abs(t),Math.abs(e));return null!=r.precision||isNaN(i=function(t,e){return Math.max(0,3*Math.max(-8,Math.min(8,Math.floor(rv(e)/3)))-rv(Math.abs(t)))}(o,a))||(r.precision=i),fv(r,a);case"":case"e":case"g":case"p":case"r":null!=r.precision||isNaN(i=function(t,e){return t=Math.abs(t),e=Math.abs(e)-t,Math.max(0,rv(e)-rv(t))+1}(o,Math.max(Math.abs(t),Math.abs(e))))||(r.precision=i-("e"===r.type));break;case"f":case"%":null!=r.precision||isNaN(i=function(t){return Math.max(0,-rv(Math.abs(t)))}(o))||(r.precision=i-2*("%"===r.type))}return dv(r)}function a_(t){var e=t.domain;return t.ticks=function(t){var n=e();return Bv(n[0],n[n.length-1],null==t?10:t)},t.tickFormat=function(t,n){var r=e();return o_(r[0],r[r.length-1],null==t?10:t,n)},t.nice=function(n){null==n&&(n=10);var r,i,o=e(),a=0,s=o.length-1,l=o[a],c=o[s],u=10;for(c<l&&(i=l,l=c,c=i,i=a,a=s,s=i);u-- >0;){if((i=Fv(l,c,n))===r)return o[a]=l,o[s]=c,e(o);if(i>0)l=Math.floor(l/i)*i,c=Math.ceil(c/i)*i;else{if(!(i<0))break;l=Math.ceil(l*i)/i,c=Math.floor(c*i)/i}r=i}return t},t}function s_(){var t=i_();return t.copy=function(){return n_(t,s_())},wv.apply(t,arguments),a_(t)}function l_(t){var e;function n(t){return null==t||isNaN(t=+t)?e:t}return n.invert=n,n.domain=n.range=function(e){return arguments.length?(t=Array.from(e,Kv),n):t.slice()},n.unknown=function(t){return arguments.length?(e=t,n):e},n.copy=function(){return l_(t).unknown(e)},t=arguments.length?Array.from(t,Kv):[0,1],a_(n)}function c_(t,e){var n,r=0,i=(t=t.slice()).length-1,o=t[r],a=t[i];return a<o&&(n=r,r=i,i=n,n=o,o=a,a=n),t[r]=e.floor(o),t[i]=e.ceil(a),t}function u_(t){return Math.log(t)}function h_(t){return Math.exp(t)}function d_(t){return-Math.log(-t)}function f_(t){return-Math.exp(-t)}function p_(t){return isFinite(t)?+("1e"+t):t<0?0:t}function m_(t){return(e,n)=>-t(-e,n)}function g_(t){const e=t(u_,h_),n=e.domain;let r,i,o=10;function a(){return r=function(t){return t===Math.E?Math.log:10===t&&Math.log10||2===t&&Math.log2||(t=Math.log(t),e=>Math.log(e)/t)}(o),i=function(t){return 10===t?p_:t===Math.E?Math.exp:e=>Math.pow(t,e)}(o),n()[0]<0?(r=m_(r),i=m_(i),t(d_,f_)):t(u_,h_),e}return e.base=function(t){return arguments.length?(o=+t,a()):o},e.domain=function(t){return arguments.length?(n(t),a()):n()},e.ticks=t=>{const e=n();let a=e[0],s=e[e.length-1];const l=s<a;l&&([a,s]=[s,a]);let c,u,h=r(a),d=r(s);const f=null==t?10:+t;let p=[];if(!(o%1)&&d-h<f){if(h=Math.floor(h),d=Math.ceil(d),a>0){for(;h<=d;++h)for(c=1;c<o;++c)if(u=h<0?c/i(-h):c*i(h),!(u<a)){if(u>s)break;p.push(u)}}else for(;h<=d;++h)for(c=o-1;c>=1;--c)if(u=h>0?c/i(-h):c*i(h),!(u<a)){if(u>s)break;p.push(u)}2*p.length<f&&(p=Bv(a,s,f))}else p=Bv(h,d,Math.min(d-h,f)).map(i);return l?p.reverse():p},e.tickFormat=(t,n)=>{if(null==t&&(t=10),null==n&&(n=10===o?"s":","),"function"!==typeof n&&(o%1||null!=(n=av(n)).precision||(n.trim=!0),n=dv(n)),t===1/0)return n;const a=Math.max(1,o*t/e.ticks().length);return t=>{let e=t/i(Math.round(r(t)));return e*o<o-.5&&(e*=o),e<=a?n(t):""}},e.nice=()=>n(c_(n(),{floor:t=>i(Math.floor(r(t))),ceil:t=>i(Math.ceil(r(t)))})),e}function y_(){const t=g_(r_()).domain([1,10]);return t.copy=()=>n_(t,y_()).base(t.base()),wv.apply(t,arguments),t}function v_(t){return function(e){return Math.sign(e)*Math.log1p(Math.abs(e/t))}}function __(t){return function(e){return Math.sign(e)*Math.expm1(Math.abs(e))*t}}function b_(t){var e=1,n=t(v_(e),__(e));return n.constant=function(n){return arguments.length?t(v_(e=+n),__(e)):e},a_(n)}function x_(){var t=b_(r_());return t.copy=function(){return n_(t,x_()).constant(t.constant())},wv.apply(t,arguments)}function w_(t){return function(e){return e<0?-Math.pow(-e,t):Math.pow(e,t)}}function S_(t){return t<0?-Math.sqrt(-t):Math.sqrt(t)}function E_(t){return t<0?-t*t:t*t}function T_(t){var e=t(Jv,Jv),n=1;return e.exponent=function(e){return arguments.length?1===(n=+e)?t(Jv,Jv):.5===n?t(S_,E_):t(w_(n),w_(1/n)):n},a_(e)}function M_(){var t=T_(r_());return t.copy=function(){return n_(t,M_()).exponent(t.exponent())},wv.apply(t,arguments),t}function A_(){return M_.apply(null,arguments).exponent(.5)}function C_(t){return Math.sign(t)*t*t}function P_(){var t,e=i_(),n=[0,1],r=!1;function i(n){var i=function(t){return Math.sign(t)*Math.sqrt(Math.abs(t))}(e(n));return isNaN(i)?t:r?Math.round(i):i}return i.invert=function(t){return e.invert(C_(t))},i.domain=function(t){return arguments.length?(e.domain(t),i):e.domain()},i.range=function(t){return arguments.length?(e.range((n=Array.from(t,Kv)).map(C_)),i):n.slice()},i.rangeRound=function(t){return i.range(t).round(!0)},i.round=function(t){return arguments.length?(r=!!t,i):r},i.clamp=function(t){return arguments.length?(e.clamp(t),i):e.clamp()},i.unknown=function(e){return arguments.length?(t=e,i):t},i.copy=function(){return P_(e.domain(),n).round(r).clamp(e.clamp()).unknown(t)},wv.apply(i,arguments),a_(i)}function k_(t,e){let n;if(void 0===e)for(const r of t)null!=r&&(n<r||void 0===n&&r>=r)&&(n=r);else{let r=-1;for(let i of t)null!=(i=e(i,++r,t))&&(n<i||void 0===n&&i>=i)&&(n=i)}return n}function I_(t,e){let n;if(void 0===e)for(const r of t)null!=r&&(n>r||void 0===n&&r>=r)&&(n=r);else{let r=-1;for(let i of t)null!=(i=e(i,++r,t))&&(n>i||void 0===n&&i>=i)&&(n=i)}return n}function O_(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Uv;if(t===Uv)return L_;if("function"!==typeof t)throw new TypeError("compare is not a function");return(e,n)=>{const r=t(e,n);return r||0===r?r:(0===t(n,n))-(0===t(e,e))}}function L_(t,e){return(null==t||!(t>=t))-(null==e||!(e>=e))||(t<e?-1:t>e?1:0)}function j_(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1/0,i=arguments.length>4?arguments[4]:void 0;if(e=Math.floor(e),n=Math.floor(Math.max(0,n)),r=Math.floor(Math.min(t.length-1,r)),!(n<=e&&e<=r))return t;for(i=void 0===i?L_:O_(i);r>n;){if(r-n>600){const o=r-n+1,a=e-n+1,s=Math.log(o),l=.5*Math.exp(2*s/3),c=.5*Math.sqrt(s*l*(o-l)/o)*(a-o/2<0?-1:1);j_(t,e,Math.max(n,Math.floor(e-a*l/o+c)),Math.min(r,Math.floor(e+(o-a)*l/o+c)),i)}const o=t[e];let a=n,s=r;for(z_(t,n,e),i(t[r],o)>0&&z_(t,n,r);a<s;){for(z_(t,a,s),++a,--s;i(t[a],o)<0;)++a;for(;i(t[s],o)>0;)--s}0===i(t[n],o)?z_(t,n,s):(++s,z_(t,s,r)),s<=e&&(n=s+1),e<=s&&(r=s-1)}return t}function z_(t,e,n){const r=t[e];t[e]=t[n],t[n]=r}function R_(t,e,n){if(t=Float64Array.from(function*(t,e){if(void 0===e)for(let n of t)null!=n&&(n=+n)>=n&&(yield n);else{let n=-1;for(let r of t)null!=(r=e(r,++n,t))&&(r=+r)>=r&&(yield r)}}(t,n)),(r=t.length)&&!isNaN(e=+e)){if(e<=0||r<2)return I_(t);if(e>=1)return k_(t);var r,i=(r-1)*e,o=Math.floor(i),a=k_(j_(t,o).subarray(0,o+1));return a+(I_(t.subarray(o+1))-a)*(i-o)}}function D_(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:qv;if((r=t.length)&&!isNaN(e=+e)){if(e<=0||r<2)return+n(t[0],0,t);if(e>=1)return+n(t[r-1],r-1,t);var r,i=(r-1)*e,o=Math.floor(i),a=+n(t[o],o,t);return a+(+n(t[o+1],o+1,t)-a)*(i-o)}}function B_(){var t,e=[],n=[],r=[];function i(){var t=0,i=Math.max(1,n.length);for(r=new Array(i-1);++t<i;)r[t-1]=D_(e,t/i);return o}function o(e){return null==e||isNaN(e=+e)?t:n[Xv(r,e)]}return o.invertExtent=function(t){var i=n.indexOf(t);return i<0?[NaN,NaN]:[i>0?r[i-1]:e[0],i<r.length?r[i]:e[e.length-1]]},o.domain=function(t){if(!arguments.length)return e.slice();e=[];for(let n of t)null==n||isNaN(n=+n)||e.push(n);return e.sort(Uv),i()},o.range=function(t){return arguments.length?(n=Array.from(t),i()):n.slice()},o.unknown=function(e){return arguments.length?(t=e,o):t},o.quantiles=function(){return r.slice()},o.copy=function(){return B_().domain(e).range(n).unknown(t)},wv.apply(o,arguments)}function F_(){var t,e=0,n=1,r=1,i=[.5],o=[0,1];function a(e){return null!=e&&e<=e?o[Xv(i,e,0,r)]:t}function s(){var t=-1;for(i=new Array(r);++t<r;)i[t]=((t+1)*n-(t-r)*e)/(r+1);return a}return a.domain=function(t){return arguments.length?([e,n]=t,e=+e,n=+n,s()):[e,n]},a.range=function(t){return arguments.length?(r=(o=Array.from(t)).length-1,s()):o.slice()},a.invertExtent=function(t){var a=o.indexOf(t);return a<0?[NaN,NaN]:a<1?[e,i[0]]:a>=r?[i[r-1],n]:[i[a-1],i[a]]},a.unknown=function(e){return arguments.length?(t=e,a):a},a.thresholds=function(){return i.slice()},a.copy=function(){return F_().domain([e,n]).range(o).unknown(t)},wv.apply(a_(a),arguments)}function N_(){var t,e=[.5],n=[0,1],r=1;function i(i){return null!=i&&i<=i?n[Xv(e,i,0,r)]:t}return i.domain=function(t){return arguments.length?(e=Array.from(t),r=Math.min(e.length,n.length-1),i):e.slice()},i.range=function(t){return arguments.length?(n=Array.from(t),r=Math.min(e.length,n.length-1),i):n.slice()},i.invertExtent=function(t){var r=n.indexOf(t);return[e[r-1],e[r]]},i.unknown=function(e){return arguments.length?(t=e,i):t},i.copy=function(){return N_().domain(e).range(n).unknown(t)},wv.apply(i,arguments)}const U_=1e3,V_=6e4,W_=36e5,G_=864e5,q_=6048e5,H_=2592e6,Z_=31536e6,X_=new Date,Y_=new Date;function K_(t,e,n,r){function i(e){return t(e=0===arguments.length?new Date:new Date(+e)),e}return i.floor=e=>(t(e=new Date(+e)),e),i.ceil=n=>(t(n=new Date(n-1)),e(n,1),t(n),n),i.round=t=>{const e=i(t),n=i.ceil(t);return t-e<n-t?e:n},i.offset=(t,n)=>(e(t=new Date(+t),null==n?1:Math.floor(n)),t),i.range=(n,r,o)=>{const a=[];if(n=i.ceil(n),o=null==o?1:Math.floor(o),!(n<r)||!(o>0))return a;let s;do{a.push(s=new Date(+n)),e(n,o),t(n)}while(s<n&&n<r);return a},i.filter=n=>K_((e=>{if(e>=e)for(;t(e),!n(e);)e.setTime(e-1)}),((t,r)=>{if(t>=t)if(r<0)for(;++r<=0;)for(;e(t,-1),!n(t););else for(;--r>=0;)for(;e(t,1),!n(t););})),n&&(i.count=(e,r)=>(X_.setTime(+e),Y_.setTime(+r),t(X_),t(Y_),Math.floor(n(X_,Y_))),i.every=t=>(t=Math.floor(t),isFinite(t)&&t>0?t>1?i.filter(r?e=>r(e)%t===0:e=>i.count(0,e)%t===0):i:null)),i}const $_=K_((()=>{}),((t,e)=>{t.setTime(+t+e)}),((t,e)=>e-t));$_.every=t=>(t=Math.floor(t),isFinite(t)&&t>0?t>1?K_((e=>{e.setTime(Math.floor(e/t)*t)}),((e,n)=>{e.setTime(+e+n*t)}),((e,n)=>(n-e)/t)):$_:null);$_.range;const J_=K_((t=>{t.setTime(t-t.getMilliseconds())}),((t,e)=>{t.setTime(+t+e*U_)}),((t,e)=>(e-t)/U_),(t=>t.getUTCSeconds())),Q_=(J_.range,K_((t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*U_)}),((t,e)=>{t.setTime(+t+e*V_)}),((t,e)=>(e-t)/V_),(t=>t.getMinutes()))),tb=(Q_.range,K_((t=>{t.setUTCSeconds(0,0)}),((t,e)=>{t.setTime(+t+e*V_)}),((t,e)=>(e-t)/V_),(t=>t.getUTCMinutes()))),eb=(tb.range,K_((t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*U_-t.getMinutes()*V_)}),((t,e)=>{t.setTime(+t+e*W_)}),((t,e)=>(e-t)/W_),(t=>t.getHours()))),nb=(eb.range,K_((t=>{t.setUTCMinutes(0,0,0)}),((t,e)=>{t.setTime(+t+e*W_)}),((t,e)=>(e-t)/W_),(t=>t.getUTCHours()))),rb=(nb.range,K_((t=>t.setHours(0,0,0,0)),((t,e)=>t.setDate(t.getDate()+e)),((t,e)=>(e-t-(e.getTimezoneOffset()-t.getTimezoneOffset())*V_)/G_),(t=>t.getDate()-1))),ib=(rb.range,K_((t=>{t.setUTCHours(0,0,0,0)}),((t,e)=>{t.setUTCDate(t.getUTCDate()+e)}),((t,e)=>(e-t)/G_),(t=>t.getUTCDate()-1))),ob=(ib.range,K_((t=>{t.setUTCHours(0,0,0,0)}),((t,e)=>{t.setUTCDate(t.getUTCDate()+e)}),((t,e)=>(e-t)/G_),(t=>Math.floor(t/G_))));ob.range;function ab(t){return K_((e=>{e.setDate(e.getDate()-(e.getDay()+7-t)%7),e.setHours(0,0,0,0)}),((t,e)=>{t.setDate(t.getDate()+7*e)}),((t,e)=>(e-t-(e.getTimezoneOffset()-t.getTimezoneOffset())*V_)/q_))}const sb=ab(0),lb=ab(1),cb=ab(2),ub=ab(3),hb=ab(4),db=ab(5),fb=ab(6);sb.range,lb.range,cb.range,ub.range,hb.range,db.range,fb.range;function pb(t){return K_((e=>{e.setUTCDate(e.getUTCDate()-(e.getUTCDay()+7-t)%7),e.setUTCHours(0,0,0,0)}),((t,e)=>{t.setUTCDate(t.getUTCDate()+7*e)}),((t,e)=>(e-t)/q_))}const mb=pb(0),gb=pb(1),yb=pb(2),vb=pb(3),_b=pb(4),bb=pb(5),xb=pb(6),wb=(mb.range,gb.range,yb.range,vb.range,_b.range,bb.range,xb.range,K_((t=>{t.setDate(1),t.setHours(0,0,0,0)}),((t,e)=>{t.setMonth(t.getMonth()+e)}),((t,e)=>e.getMonth()-t.getMonth()+12*(e.getFullYear()-t.getFullYear())),(t=>t.getMonth()))),Sb=(wb.range,K_((t=>{t.setUTCDate(1),t.setUTCHours(0,0,0,0)}),((t,e)=>{t.setUTCMonth(t.getUTCMonth()+e)}),((t,e)=>e.getUTCMonth()-t.getUTCMonth()+12*(e.getUTCFullYear()-t.getUTCFullYear())),(t=>t.getUTCMonth()))),Eb=(Sb.range,K_((t=>{t.setMonth(0,1),t.setHours(0,0,0,0)}),((t,e)=>{t.setFullYear(t.getFullYear()+e)}),((t,e)=>e.getFullYear()-t.getFullYear()),(t=>t.getFullYear())));Eb.every=t=>isFinite(t=Math.floor(t))&&t>0?K_((e=>{e.setFullYear(Math.floor(e.getFullYear()/t)*t),e.setMonth(0,1),e.setHours(0,0,0,0)}),((e,n)=>{e.setFullYear(e.getFullYear()+n*t)})):null;Eb.range;const Tb=K_((t=>{t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)}),((t,e)=>{t.setUTCFullYear(t.getUTCFullYear()+e)}),((t,e)=>e.getUTCFullYear()-t.getUTCFullYear()),(t=>t.getUTCFullYear()));Tb.every=t=>isFinite(t=Math.floor(t))&&t>0?K_((e=>{e.setUTCFullYear(Math.floor(e.getUTCFullYear()/t)*t),e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)}),((e,n)=>{e.setUTCFullYear(e.getUTCFullYear()+n*t)})):null;Tb.range;function Mb(t,e,n,r,i,o){const a=[[J_,1,U_],[J_,5,5e3],[J_,15,15e3],[J_,30,3e4],[o,1,V_],[o,5,3e5],[o,15,9e5],[o,30,18e5],[i,1,W_],[i,3,108e5],[i,6,216e5],[i,12,432e5],[r,1,G_],[r,2,1728e5],[n,1,q_],[e,1,H_],[e,3,7776e6],[t,1,Z_]];function s(e,n,r){const i=Math.abs(n-e)/r,o=Wv((t=>{let[,,e]=t;return e})).right(a,i);if(o===a.length)return t.every(Nv(e/Z_,n/Z_,r));if(0===o)return $_.every(Math.max(Nv(e,n,r),1));const[s,l]=a[i/a[o-1][2]<a[o][2]/i?o-1:o];return s.every(l)}return[function(t,e,n){const r=e<t;r&&([t,e]=[e,t]);const i=n&&"function"===typeof n.range?n:s(t,e,n),o=i?i.range(t,+e+1):[];return r?o.reverse():o},s]}const[Ab,Cb]=Mb(Tb,Sb,mb,ob,nb,tb),[Pb,kb]=Mb(Eb,wb,sb,rb,eb,Q_);function Ib(t){if(0<=t.y&&t.y<100){var e=new Date(-1,t.m,t.d,t.H,t.M,t.S,t.L);return e.setFullYear(t.y),e}return new Date(t.y,t.m,t.d,t.H,t.M,t.S,t.L)}function Ob(t){if(0<=t.y&&t.y<100){var e=new Date(Date.UTC(-1,t.m,t.d,t.H,t.M,t.S,t.L));return e.setUTCFullYear(t.y),e}return new Date(Date.UTC(t.y,t.m,t.d,t.H,t.M,t.S,t.L))}function Lb(t,e,n){return{y:t,m:e,d:n,H:0,M:0,S:0,L:0}}var jb,zb,Rb,Db={"-":"",_:" ",0:"0"},Bb=/^\s*\d+/,Fb=/^%/,Nb=/[\\^$*+?|[\]().{}]/g;function Ub(t,e,n){var r=t<0?"-":"",i=(r?-t:t)+"",o=i.length;return r+(o<n?new Array(n-o+1).join(e)+i:i)}function Vb(t){return t.replace(Nb,"\\$&")}function Wb(t){return new RegExp("^(?:"+t.map(Vb).join("|")+")","i")}function Gb(t){return new Map(t.map(((t,e)=>[t.toLowerCase(),e])))}function qb(t,e,n){var r=Bb.exec(e.slice(n,n+1));return r?(t.w=+r[0],n+r[0].length):-1}function Hb(t,e,n){var r=Bb.exec(e.slice(n,n+1));return r?(t.u=+r[0],n+r[0].length):-1}function Zb(t,e,n){var r=Bb.exec(e.slice(n,n+2));return r?(t.U=+r[0],n+r[0].length):-1}function Xb(t,e,n){var r=Bb.exec(e.slice(n,n+2));return r?(t.V=+r[0],n+r[0].length):-1}function Yb(t,e,n){var r=Bb.exec(e.slice(n,n+2));return r?(t.W=+r[0],n+r[0].length):-1}function Kb(t,e,n){var r=Bb.exec(e.slice(n,n+4));return r?(t.y=+r[0],n+r[0].length):-1}function $b(t,e,n){var r=Bb.exec(e.slice(n,n+2));return r?(t.y=+r[0]+(+r[0]>68?1900:2e3),n+r[0].length):-1}function Jb(t,e,n){var r=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(e.slice(n,n+6));return r?(t.Z=r[1]?0:-(r[2]+(r[3]||"00")),n+r[0].length):-1}function Qb(t,e,n){var r=Bb.exec(e.slice(n,n+1));return r?(t.q=3*r[0]-3,n+r[0].length):-1}function tx(t,e,n){var r=Bb.exec(e.slice(n,n+2));return r?(t.m=r[0]-1,n+r[0].length):-1}function ex(t,e,n){var r=Bb.exec(e.slice(n,n+2));return r?(t.d=+r[0],n+r[0].length):-1}function nx(t,e,n){var r=Bb.exec(e.slice(n,n+3));return r?(t.m=0,t.d=+r[0],n+r[0].length):-1}function rx(t,e,n){var r=Bb.exec(e.slice(n,n+2));return r?(t.H=+r[0],n+r[0].length):-1}function ix(t,e,n){var r=Bb.exec(e.slice(n,n+2));return r?(t.M=+r[0],n+r[0].length):-1}function ox(t,e,n){var r=Bb.exec(e.slice(n,n+2));return r?(t.S=+r[0],n+r[0].length):-1}function ax(t,e,n){var r=Bb.exec(e.slice(n,n+3));return r?(t.L=+r[0],n+r[0].length):-1}function sx(t,e,n){var r=Bb.exec(e.slice(n,n+6));return r?(t.L=Math.floor(r[0]/1e3),n+r[0].length):-1}function lx(t,e,n){var r=Fb.exec(e.slice(n,n+1));return r?n+r[0].length:-1}function cx(t,e,n){var r=Bb.exec(e.slice(n));return r?(t.Q=+r[0],n+r[0].length):-1}function ux(t,e,n){var r=Bb.exec(e.slice(n));return r?(t.s=+r[0],n+r[0].length):-1}function hx(t,e){return Ub(t.getDate(),e,2)}function dx(t,e){return Ub(t.getHours(),e,2)}function fx(t,e){return Ub(t.getHours()%12||12,e,2)}function px(t,e){return Ub(1+rb.count(Eb(t),t),e,3)}function mx(t,e){return Ub(t.getMilliseconds(),e,3)}function gx(t,e){return mx(t,e)+"000"}function yx(t,e){return Ub(t.getMonth()+1,e,2)}function vx(t,e){return Ub(t.getMinutes(),e,2)}function _x(t,e){return Ub(t.getSeconds(),e,2)}function bx(t){var e=t.getDay();return 0===e?7:e}function xx(t,e){return Ub(sb.count(Eb(t)-1,t),e,2)}function wx(t){var e=t.getDay();return e>=4||0===e?hb(t):hb.ceil(t)}function Sx(t,e){return t=wx(t),Ub(hb.count(Eb(t),t)+(4===Eb(t).getDay()),e,2)}function Ex(t){return t.getDay()}function Tx(t,e){return Ub(lb.count(Eb(t)-1,t),e,2)}function Mx(t,e){return Ub(t.getFullYear()%100,e,2)}function Ax(t,e){return Ub((t=wx(t)).getFullYear()%100,e,2)}function Cx(t,e){return Ub(t.getFullYear()%1e4,e,4)}function Px(t,e){var n=t.getDay();return Ub((t=n>=4||0===n?hb(t):hb.ceil(t)).getFullYear()%1e4,e,4)}function kx(t){var e=t.getTimezoneOffset();return(e>0?"-":(e*=-1,"+"))+Ub(e/60|0,"0",2)+Ub(e%60,"0",2)}function Ix(t,e){return Ub(t.getUTCDate(),e,2)}function Ox(t,e){return Ub(t.getUTCHours(),e,2)}function Lx(t,e){return Ub(t.getUTCHours()%12||12,e,2)}function jx(t,e){return Ub(1+ib.count(Tb(t),t),e,3)}function zx(t,e){return Ub(t.getUTCMilliseconds(),e,3)}function Rx(t,e){return zx(t,e)+"000"}function Dx(t,e){return Ub(t.getUTCMonth()+1,e,2)}function Bx(t,e){return Ub(t.getUTCMinutes(),e,2)}function Fx(t,e){return Ub(t.getUTCSeconds(),e,2)}function Nx(t){var e=t.getUTCDay();return 0===e?7:e}function Ux(t,e){return Ub(mb.count(Tb(t)-1,t),e,2)}function Vx(t){var e=t.getUTCDay();return e>=4||0===e?_b(t):_b.ceil(t)}function Wx(t,e){return t=Vx(t),Ub(_b.count(Tb(t),t)+(4===Tb(t).getUTCDay()),e,2)}function Gx(t){return t.getUTCDay()}function qx(t,e){return Ub(gb.count(Tb(t)-1,t),e,2)}function Hx(t,e){return Ub(t.getUTCFullYear()%100,e,2)}function Zx(t,e){return Ub((t=Vx(t)).getUTCFullYear()%100,e,2)}function Xx(t,e){return Ub(t.getUTCFullYear()%1e4,e,4)}function Yx(t,e){var n=t.getUTCDay();return Ub((t=n>=4||0===n?_b(t):_b.ceil(t)).getUTCFullYear()%1e4,e,4)}function Kx(){return"+0000"}function $x(){return"%"}function Jx(t){return+t}function Qx(t){return Math.floor(+t/1e3)}function tw(t){return new Date(t)}function ew(t){return t instanceof Date?+t:+new Date(+t)}function nw(t,e,n,r,i,o,a,s,l,c){var u=i_(),h=u.invert,d=u.domain,f=c(".%L"),p=c(":%S"),m=c("%I:%M"),g=c("%I %p"),y=c("%a %d"),v=c("%b %d"),_=c("%B"),b=c("%Y");function x(t){return(l(t)<t?f:s(t)<t?p:a(t)<t?m:o(t)<t?g:r(t)<t?i(t)<t?y:v:n(t)<t?_:b)(t)}return u.invert=function(t){return new Date(h(t))},u.domain=function(t){return arguments.length?d(Array.from(t,ew)):d().map(tw)},u.ticks=function(e){var n=d();return t(n[0],n[n.length-1],null==e?10:e)},u.tickFormat=function(t,e){return null==e?x:c(e)},u.nice=function(t){var n=d();return t&&"function"===typeof t.range||(t=e(n[0],n[n.length-1],null==t?10:t)),t?d(c_(n,t)):u},u.copy=function(){return n_(u,nw(t,e,n,r,i,o,a,s,l,c))},u}function rw(){return wv.apply(nw(Pb,kb,Eb,wb,sb,rb,eb,Q_,J_,zb).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function iw(){return wv.apply(nw(Ab,Cb,Tb,Sb,mb,ib,nb,tb,J_,Rb).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function ow(){var t,e,n,r,i,o=0,a=1,s=Jv,l=!1;function c(e){return null==e||isNaN(e=+e)?i:s(0===n?.5:(e=(r(e)-t)*n,l?Math.max(0,Math.min(1,e)):e))}function u(t){return function(e){var n,r;return arguments.length?([n,r]=e,s=t(n,r),c):[s(0),s(1)]}}return c.domain=function(i){return arguments.length?([o,a]=i,t=r(o=+o),e=r(a=+a),n=t===e?0:1/(e-t),c):[o,a]},c.clamp=function(t){return arguments.length?(l=!!t,c):l},c.interpolator=function(t){return arguments.length?(s=t,c):s},c.range=u(xv),c.rangeRound=u(Yv),c.unknown=function(t){return arguments.length?(i=t,c):i},function(i){return r=i,t=i(o),e=i(a),n=t===e?0:1/(e-t),c}}function aw(t,e){return e.domain(t.domain()).interpolator(t.interpolator()).clamp(t.clamp()).unknown(t.unknown())}function sw(){var t=a_(ow()(Jv));return t.copy=function(){return aw(t,sw())},Sv.apply(t,arguments)}function lw(){var t=g_(ow()).domain([1,10]);return t.copy=function(){return aw(t,lw()).base(t.base())},Sv.apply(t,arguments)}function cw(){var t=b_(ow());return t.copy=function(){return aw(t,cw()).constant(t.constant())},Sv.apply(t,arguments)}function uw(){var t=T_(ow());return t.copy=function(){return aw(t,uw()).exponent(t.exponent())},Sv.apply(t,arguments)}function hw(){return uw.apply(null,arguments).exponent(.5)}function dw(){var t=[],e=Jv;function n(n){if(null!=n&&!isNaN(n=+n))return e((Xv(t,n,1)-1)/(t.length-1))}return n.domain=function(e){if(!arguments.length)return t.slice();t=[];for(let n of e)null==n||isNaN(n=+n)||t.push(n);return t.sort(Uv),n},n.interpolator=function(t){return arguments.length?(e=t,n):e},n.range=function(){return t.map(((n,r)=>e(r/(t.length-1))))},n.quantiles=function(e){return Array.from({length:e+1},((n,r)=>R_(t,r/e)))},n.copy=function(){return dw(e).domain(t)},Sv.apply(n,arguments)}function fw(){var t,e,n,r,i,o,a,s=0,l=.5,c=1,u=1,h=Jv,d=!1;function f(t){return isNaN(t=+t)?a:(t=.5+((t=+o(t))-e)*(u*t<u*e?r:i),h(d?Math.max(0,Math.min(1,t)):t))}function p(t){return function(e){var n,r,i;return arguments.length?([n,r,i]=e,h=function(t,e){void 0===e&&(e=t,t=xv);for(var n=0,r=e.length-1,i=e[0],o=new Array(r<0?0:r);n<r;)o[n]=t(i,i=e[++n]);return function(t){var e=Math.max(0,Math.min(r-1,Math.floor(t*=r)));return o[e](t-e)}}(t,[n,r,i]),f):[h(0),h(.5),h(1)]}}return f.domain=function(a){return arguments.length?([s,l,c]=a,t=o(s=+s),e=o(l=+l),n=o(c=+c),r=t===e?0:.5/(e-t),i=e===n?0:.5/(n-e),u=e<t?-1:1,f):[s,l,c]},f.clamp=function(t){return arguments.length?(d=!!t,f):d},f.interpolator=function(t){return arguments.length?(h=t,f):h},f.range=p(xv),f.rangeRound=p(Yv),f.unknown=function(t){return arguments.length?(a=t,f):a},function(a){return o=a,t=a(s),e=a(l),n=a(c),r=t===e?0:.5/(e-t),i=e===n?0:.5/(n-e),u=e<t?-1:1,f}}function pw(){var t=a_(fw()(Jv));return t.copy=function(){return aw(t,pw())},Sv.apply(t,arguments)}function mw(){var t=g_(fw()).domain([.1,1,10]);return t.copy=function(){return aw(t,mw()).base(t.base())},Sv.apply(t,arguments)}function gw(){var t=b_(fw());return t.copy=function(){return aw(t,gw()).constant(t.constant())},Sv.apply(t,arguments)}function yw(){var t=T_(fw());return t.copy=function(){return aw(t,yw()).exponent(t.exponent())},Sv.apply(t,arguments)}function vw(){return yw.apply(null,arguments).exponent(.5)}function _w(t,e,n){this.k=t,this.x=e,this.y=n}!function(t){jb=function(t){var e=t.dateTime,n=t.date,r=t.time,i=t.periods,o=t.days,a=t.shortDays,s=t.months,l=t.shortMonths,c=Wb(i),u=Gb(i),h=Wb(o),d=Gb(o),f=Wb(a),p=Gb(a),m=Wb(s),g=Gb(s),y=Wb(l),v=Gb(l),_={a:function(t){return a[t.getDay()]},A:function(t){return o[t.getDay()]},b:function(t){return l[t.getMonth()]},B:function(t){return s[t.getMonth()]},c:null,d:hx,e:hx,f:gx,g:Ax,G:Px,H:dx,I:fx,j:px,L:mx,m:yx,M:vx,p:function(t){return i[+(t.getHours()>=12)]},q:function(t){return 1+~~(t.getMonth()/3)},Q:Jx,s:Qx,S:_x,u:bx,U:xx,V:Sx,w:Ex,W:Tx,x:null,X:null,y:Mx,Y:Cx,Z:kx,"%":$x},b={a:function(t){return a[t.getUTCDay()]},A:function(t){return o[t.getUTCDay()]},b:function(t){return l[t.getUTCMonth()]},B:function(t){return s[t.getUTCMonth()]},c:null,d:Ix,e:Ix,f:Rx,g:Zx,G:Yx,H:Ox,I:Lx,j:jx,L:zx,m:Dx,M:Bx,p:function(t){return i[+(t.getUTCHours()>=12)]},q:function(t){return 1+~~(t.getUTCMonth()/3)},Q:Jx,s:Qx,S:Fx,u:Nx,U:Ux,V:Wx,w:Gx,W:qx,x:null,X:null,y:Hx,Y:Xx,Z:Kx,"%":$x},x={a:function(t,e,n){var r=f.exec(e.slice(n));return r?(t.w=p.get(r[0].toLowerCase()),n+r[0].length):-1},A:function(t,e,n){var r=h.exec(e.slice(n));return r?(t.w=d.get(r[0].toLowerCase()),n+r[0].length):-1},b:function(t,e,n){var r=y.exec(e.slice(n));return r?(t.m=v.get(r[0].toLowerCase()),n+r[0].length):-1},B:function(t,e,n){var r=m.exec(e.slice(n));return r?(t.m=g.get(r[0].toLowerCase()),n+r[0].length):-1},c:function(t,n,r){return E(t,e,n,r)},d:ex,e:ex,f:sx,g:$b,G:Kb,H:rx,I:rx,j:nx,L:ax,m:tx,M:ix,p:function(t,e,n){var r=c.exec(e.slice(n));return r?(t.p=u.get(r[0].toLowerCase()),n+r[0].length):-1},q:Qb,Q:cx,s:ux,S:ox,u:Hb,U:Zb,V:Xb,w:qb,W:Yb,x:function(t,e,r){return E(t,n,e,r)},X:function(t,e,n){return E(t,r,e,n)},y:$b,Y:Kb,Z:Jb,"%":lx};function w(t,e){return function(n){var r,i,o,a=[],s=-1,l=0,c=t.length;for(n instanceof Date||(n=new Date(+n));++s<c;)37===t.charCodeAt(s)&&(a.push(t.slice(l,s)),null!=(i=Db[r=t.charAt(++s)])?r=t.charAt(++s):i="e"===r?" ":"0",(o=e[r])&&(r=o(n,i)),a.push(r),l=s+1);return a.push(t.slice(l,s)),a.join("")}}function S(t,e){return function(n){var r,i,o=Lb(1900,void 0,1);if(E(o,t,n+="",0)!=n.length)return null;if("Q"in o)return new Date(o.Q);if("s"in o)return new Date(1e3*o.s+("L"in o?o.L:0));if(e&&!("Z"in o)&&(o.Z=0),"p"in o&&(o.H=o.H%12+12*o.p),void 0===o.m&&(o.m="q"in o?o.q:0),"V"in o){if(o.V<1||o.V>53)return null;"w"in o||(o.w=1),"Z"in o?(i=(r=Ob(Lb(o.y,0,1))).getUTCDay(),r=i>4||0===i?gb.ceil(r):gb(r),r=ib.offset(r,7*(o.V-1)),o.y=r.getUTCFullYear(),o.m=r.getUTCMonth(),o.d=r.getUTCDate()+(o.w+6)%7):(i=(r=Ib(Lb(o.y,0,1))).getDay(),r=i>4||0===i?lb.ceil(r):lb(r),r=rb.offset(r,7*(o.V-1)),o.y=r.getFullYear(),o.m=r.getMonth(),o.d=r.getDate()+(o.w+6)%7)}else("W"in o||"U"in o)&&("w"in o||(o.w="u"in o?o.u%7:"W"in o?1:0),i="Z"in o?Ob(Lb(o.y,0,1)).getUTCDay():Ib(Lb(o.y,0,1)).getDay(),o.m=0,o.d="W"in o?(o.w+6)%7+7*o.W-(i+5)%7:o.w+7*o.U-(i+6)%7);return"Z"in o?(o.H+=o.Z/100|0,o.M+=o.Z%100,Ob(o)):Ib(o)}}function E(t,e,n,r){for(var i,o,a=0,s=e.length,l=n.length;a<s;){if(r>=l)return-1;if(37===(i=e.charCodeAt(a++))){if(i=e.charAt(a++),!(o=x[i in Db?e.charAt(a++):i])||(r=o(t,n,r))<0)return-1}else if(i!=n.charCodeAt(r++))return-1}return r}return _.x=w(n,_),_.X=w(r,_),_.c=w(e,_),b.x=w(n,b),b.X=w(r,b),b.c=w(e,b),{format:function(t){var e=w(t+="",_);return e.toString=function(){return t},e},parse:function(t){var e=S(t+="",!1);return e.toString=function(){return t},e},utcFormat:function(t){var e=w(t+="",b);return e.toString=function(){return t},e},utcParse:function(t){var e=S(t+="",!0);return e.toString=function(){return t},e}}}(t),zb=jb.format,jb.parse,Rb=jb.utcFormat,jb.utcParse}({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]}),_w.prototype={constructor:_w,scale:function(t){return 1===t?this:new _w(this.k*t,this.x,this.y)},translate:function(t,e){return 0===t&0===e?this:new _w(this.k,this.x+this.k*t,this.y+this.k*e)},apply:function(t){return[t[0]*this.k+this.x,t[1]*this.k+this.y]},applyX:function(t){return t*this.k+this.x},applyY:function(t){return t*this.k+this.y},invert:function(t){return[(t[0]-this.x)/this.k,(t[1]-this.y)/this.k]},invertX:function(t){return(t-this.x)/this.k},invertY:function(t){return(t-this.y)/this.k},rescaleX:function(t){return t.copy().domain(t.range().map(this.invertX,this).map(t.invert,t))},rescaleY:function(t){return t.copy().domain(t.range().map(this.invertY,this).map(t.invert,t))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};new _w(1,0,0);function bw(t){return bw="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},bw(t)}function xw(t){var e=function(t,e){if("object"!=bw(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=bw(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==bw(e)?e:e+""}function ww(t,e,n){return(e=xw(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Sw(t){if("undefined"!==typeof window&&"object"===typeof window.process&&"renderer"===window.process.type)return!0;if("undefined"!==typeof process&&"object"===typeof process.versions&&Boolean(process.versions.electron))return!0;const e="object"===typeof navigator&&"string"===typeof navigator.userAgent&&navigator.userAgent,n=t||e;return!!(n&&n.indexOf("Electron")>=0)}function Ew(){return!("object"===typeof process&&"[object process]"===String(process)&&!process.browser)||Sw()}_w.prototype;const Tw="undefined"!==typeof __VERSION__?__VERSION__:"untranspiled source";Ew();class Mw{constructor(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"sessionStorage";ww(this,"storage",void 0),ww(this,"id",void 0),ww(this,"config",void 0),this.storage=function(t){try{const e=window[t],n="__storage_test__";return e.setItem(n,n),e.removeItem(n),e}catch(pbt){return null}}(n),this.id=t,this.config=e,this._loadConfiguration()}getConfiguration(){return this.config}setConfiguration(t){if(Object.assign(this.config,t),this.storage){const t=JSON.stringify(this.config);this.storage.setItem(this.id,t)}}_loadConfiguration(){let t={};if(this.storage){const e=this.storage.getItem(this.id);t=e?JSON.parse(e):{}}return Object.assign(this.config,t),this}}function Aw(t,e,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:600;const i=t.src.replace(/\(/g,"%28").replace(/\)/g,"%29");t.width>r&&(n=Math.min(n,r/t.width));const o=t.width*n,a=t.height*n,s=["font-size:1px;","padding:".concat(Math.floor(a/2),"px ").concat(Math.floor(o/2),"px;"),"line-height:".concat(a,"px;"),"background:url(".concat(i,");"),"background-size:".concat(o,"px ").concat(a,"px;"),"color:transparent;"].join("");return["".concat(e," %c+"),s]}let Cw;function Pw(t){return"string"===typeof t?Cw[t.toUpperCase()]||Cw.WHITE:t}function kw(t,e){if(!t)throw new Error(e||"Assertion failed")}!function(t){t[t.BLACK=30]="BLACK",t[t.RED=31]="RED",t[t.GREEN=32]="GREEN",t[t.YELLOW=33]="YELLOW",t[t.BLUE=34]="BLUE",t[t.MAGENTA=35]="MAGENTA",t[t.CYAN=36]="CYAN",t[t.WHITE=37]="WHITE",t[t.BRIGHT_BLACK=90]="BRIGHT_BLACK",t[t.BRIGHT_RED=91]="BRIGHT_RED",t[t.BRIGHT_GREEN=92]="BRIGHT_GREEN",t[t.BRIGHT_YELLOW=93]="BRIGHT_YELLOW",t[t.BRIGHT_BLUE=94]="BRIGHT_BLUE",t[t.BRIGHT_MAGENTA=95]="BRIGHT_MAGENTA",t[t.BRIGHT_CYAN=96]="BRIGHT_CYAN",t[t.BRIGHT_WHITE=97]="BRIGHT_WHITE"}(Cw||(Cw={}));const Iw={self:"undefined"!==typeof self&&self,window:"undefined"!==typeof window&&window,global:"undefined"!==typeof n.g&&n.g,document:"undefined"!==typeof document&&document,process:"object"===typeof process&&process},Ow=Iw.window||Iw.self||Iw.global,Lw=Iw.process||{};function jw(){let t;var e,n;if(Ew&&"performance"in Ow)t=null===Ow||void 0===Ow||null===(e=Ow.performance)||void 0===e||null===(n=e.now)||void 0===n?void 0:n.call(e);else if("hrtime"in Lw){var r;const e=null===Lw||void 0===Lw||null===(r=Lw.hrtime)||void 0===r?void 0:r.call(Lw);t=1e3*e[0]+e[1]/1e6}else t=Date.now();return t}const zw={debug:Ew&&console.debug||console.log,log:console.log,info:console.info,warn:console.warn,error:console.error},Rw={enabled:!0,level:0};function Dw(){}const Bw={},Fw={once:!0};class Nw{constructor(){let{id:t}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{id:""};ww(this,"id",void 0),ww(this,"VERSION",Tw),ww(this,"_startTs",jw()),ww(this,"_deltaTs",jw()),ww(this,"_storage",void 0),ww(this,"userData",{}),ww(this,"LOG_THROTTLE_TIMEOUT",0),this.id=t,this.userData={},this._storage=new Mw("__probe-".concat(this.id,"__"),Rw),this.timeStamp("".concat(this.id," started")),function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:["constructor"];const n=Object.getPrototypeOf(t),r=Object.getOwnPropertyNames(n);for(const i of r)"function"===typeof t[i]&&(e.find((t=>i===t))||(t[i]=t[i].bind(t)))}(this),Object.seal(this)}set level(t){this.setLevel(t)}get level(){return this.getLevel()}isEnabled(){return this._storage.config.enabled}getLevel(){return this._storage.config.level}getTotal(){return Number((jw()-this._startTs).toPrecision(10))}getDelta(){return Number((jw()-this._deltaTs).toPrecision(10))}set priority(t){this.level=t}get priority(){return this.level}getPriority(){return this.level}enable(){let t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return this._storage.setConfiguration({enabled:t}),this}setLevel(t){return this._storage.setConfiguration({level:t}),this}get(t){return this._storage.config[t]}set(t,e){this._storage.setConfiguration({[t]:e})}settings(){console.table?console.table(this._storage.config):console.log(this._storage.config)}assert(t,e){kw(t,e)}warn(t){return this._getLogFunction(0,t,zw.warn,arguments,Fw)}error(t){return this._getLogFunction(0,t,zw.error,arguments)}deprecated(t,e){return this.warn("`".concat(t,"` is deprecated and will be removed in a later version. Use `").concat(e,"` instead"))}removed(t,e){return this.error("`".concat(t,"` has been removed. Use `").concat(e,"` instead"))}probe(t,e){return this._getLogFunction(t,e,zw.log,arguments,{time:!0,once:!0})}log(t,e){return this._getLogFunction(t,e,zw.debug,arguments)}info(t,e){return this._getLogFunction(t,e,console.info,arguments)}once(t,e){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];return this._getLogFunction(t,e,zw.debug||zw.info,arguments,Fw)}table(t,e,n){return e?this._getLogFunction(t,e,console.table||Dw,n&&[n],{tag:Ww(e)}):Dw}image(t){let{logLevel:e,priority:n,image:r,message:i="",scale:o=1}=t;return this._shouldLog(e||n)?Ew?function(t){let{image:e,message:n="",scale:r=1}=t;if("string"===typeof e){const t=new Image;return t.onload=()=>{const e=Aw(t,n,r);console.log(...e)},t.src=e,Dw}const i=e.nodeName||"";if("img"===i.toLowerCase())return console.log(...Aw(e,n,r)),Dw;if("canvas"===i.toLowerCase()){const t=new Image;return t.onload=()=>console.log(...Aw(t,n,r)),t.src=e.toDataURL(),Dw}return Dw}({image:r,message:i,scale:o}):function(t){let{image:e,message:n="",scale:r=1}=t;return console.warn("removed"),Dw}({image:r,message:i,scale:o}):Dw}time(t,e){return this._getLogFunction(t,e,console.time?console.time:console.info)}timeEnd(t,e){return this._getLogFunction(t,e,console.timeEnd?console.timeEnd:console.info)}timeStamp(t,e){return this._getLogFunction(t,e,console.timeStamp||Dw)}group(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{collapsed:!1};const r=Vw({logLevel:t,message:e,opts:n}),{collapsed:i}=n;return r.method=(i?console.groupCollapsed:console.group)||console.info,this._getLogFunction(r)}groupCollapsed(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return this.group(t,e,Object.assign({},n,{collapsed:!0}))}groupEnd(t){return this._getLogFunction(t,"",console.groupEnd||Dw)}withGroup(t,e,n){this.group(t,e)();try{n()}finally{this.groupEnd(t)()}}trace(){console.trace&&console.trace()}_shouldLog(t){return this.isEnabled()&&this.getLevel()>=Uw(t)}_getLogFunction(t,e,n,r,i){if(this._shouldLog(t)){i=Vw({logLevel:t,message:e,args:r,opts:i}),kw(n=n||i.method),i.total=this.getTotal(),i.delta=this.getDelta(),this._deltaTs=jw();const o=i.tag||i.message;if(i.once){if(Bw[o])return Dw;Bw[o]=jw()}return e=function(t,e,n){if("string"===typeof e){const r=n.time?function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:8;const n=Math.max(e-t.length,0);return"".concat(" ".repeat(n)).concat(t)}(function(t){let e;return e=t<10?"".concat(t.toFixed(2),"ms"):t<100?"".concat(t.toFixed(1),"ms"):t<1e3?"".concat(t.toFixed(0),"ms"):"".concat((t/1e3).toFixed(2),"s"),e}(n.total)):"";e=function(t,e,n){return Ew||"string"!==typeof t||(e&&(e=Pw(e),t="\x1b[".concat(e,"m").concat(t,"\x1b[39m")),n&&(e=Pw(n),t="\x1b[".concat(n+10,"m").concat(t,"\x1b[49m"))),t}(e=n.time?"".concat(t,": ").concat(r,"  ").concat(e):"".concat(t,": ").concat(e),n.color,n.background)}return e}(this.id,i.message,i),n.bind(console,e,...i.args)}return Dw}}function Uw(t){if(!t)return 0;let e;switch(typeof t){case"number":e=t;break;case"object":e=t.logLevel||t.priority||0;break;default:return 0}return kw(Number.isFinite(e)&&e>=0),e}function Vw(t){const{logLevel:e,message:n}=t;t.logLevel=Uw(e);const r=t.args?Array.from(t.args):[];for(;r.length&&r.shift()!==n;);switch(typeof e){case"string":case"function":void 0!==n&&r.unshift(n),t.message=e;break;case"object":Object.assign(t,e)}"function"===typeof t.message&&(t.message=t.message());const i=typeof t.message;return kw("string"===i||"object"===i),Object.assign(t,{args:r},t.opts)}function Ww(t){for(const e in t)for(const n in t[e])return n||"untitled";return"empty"}ww(Nw,"VERSION",Tw);const Gw=new Nw({id:"deck"}),qw={DEFAULT:-1,LNGLAT:1,METER_OFFSETS:2,LNGLAT_OFFSETS:3,CARTESIAN:0};Object.defineProperty(qw,"IDENTITY",{get:()=>(Gw.deprecated("COORDINATE_SYSTEM.IDENTITY","COORDINATE_SYSTEM.CARTESIAN")(),0)});const Hw={WEB_MERCATOR:1,GLOBE:2,WEB_MERCATOR_AUTO_OFFSET:4,IDENTITY:0},Zw={common:0,meters:1,pixels:2},Xw={click:{handler:"onClick"},panstart:{handler:"onDragStart"},panmove:{handler:"onDrag"},panend:{handler:"onDragEnd"}},Yw=new Nw({id:"luma.gl"});function Kw(t,e){if(!t)throw new Error(e||"luma.gl: assertion failed.")}const $w="Invalid WebGLRenderingContext",Jw="Requires WebGL2";function Qw(t){return"undefined"!==typeof WebGLRenderingContext&&t instanceof WebGLRenderingContext||("undefined"!==typeof WebGL2RenderingContext&&t instanceof WebGL2RenderingContext||Boolean(t&&Number.isFinite(t._version)))}function tS(t){return"undefined"!==typeof WebGL2RenderingContext&&t instanceof WebGL2RenderingContext||Boolean(t&&2===t._version)}function eS(t){return Kw(Qw(t),$w),t}function nS(t){return Kw(tS(t),Jw),t}const rS={};function iS(t,e){var n;rS[t]=!0,void 0!==e&&(n=e,globalThis.console&&globalThis.console.error&&globalThis.console.error(n))}const oS=function t(e){const n=e.gl;this.ext=e,this.isAlive=!0,this.hasBeenBound=!1,this.elementArrayBuffer=null,this.attribs=new Array(e.maxVertexAttribs);for(let r=0;r<this.attribs.length;r++){const e=new t.VertexAttrib(n);this.attribs[r]=e}this.maxAttrib=0};(oS.VertexAttrib=function(t){this.enabled=!1,this.buffer=null,this.size=4,this.type=5126,this.normalized=!1,this.stride=16,this.offset=0,this.cached="",this.recache()}).prototype.recache=function(){this.cached=[this.size,this.type,this.normalized,this.stride,this.offset].join(":")};const aS=function(t){const e=this;this.gl=t,function(t){const e=t.getError;t.getError=function(){let n;do{n=e.apply(t),0!==n&&(rS[n]=!0)}while(0!==n);for(n in rS)if(rS[n])return delete rS[n],parseInt(n,10);return 0}}(t);const n=this.original={getParameter:t.getParameter,enableVertexAttribArray:t.enableVertexAttribArray,disableVertexAttribArray:t.disableVertexAttribArray,bindBuffer:t.bindBuffer,getVertexAttrib:t.getVertexAttrib,vertexAttribPointer:t.vertexAttribPointer};t.getParameter=function(t){return t===e.VERTEX_ARRAY_BINDING_OES?e.currentVertexArrayObject===e.defaultVertexArrayObject?null:e.currentVertexArrayObject:n.getParameter.apply(this,arguments)},t.enableVertexAttribArray=function(t){const r=e.currentVertexArrayObject;r.maxAttrib=Math.max(r.maxAttrib,t);return r.attribs[t].enabled=!0,n.enableVertexAttribArray.apply(this,arguments)},t.disableVertexAttribArray=function(t){const r=e.currentVertexArrayObject;r.maxAttrib=Math.max(r.maxAttrib,t);return r.attribs[t].enabled=!1,n.disableVertexAttribArray.apply(this,arguments)},t.bindBuffer=function(t,r){switch(t){case 34962:e.currentArrayBuffer=r;break;case 34963:e.currentVertexArrayObject.elementArrayBuffer=r}return n.bindBuffer.apply(this,arguments)},t.getVertexAttrib=function(t,r){const i=e.currentVertexArrayObject.attribs[t];switch(r){case 34975:return i.buffer;case 34338:return i.enabled;case 34339:return i.size;case 34340:return i.stride;case 34341:return i.type;case 34922:return i.normalized;default:return n.getVertexAttrib.apply(this,arguments)}},t.vertexAttribPointer=function(t,r,i,o,a,s){const l=e.currentVertexArrayObject;l.maxAttrib=Math.max(l.maxAttrib,t);const c=l.attribs[t];return c.buffer=e.currentArrayBuffer,c.size=r,c.type=i,c.normalized=o,c.stride=a,c.offset=s,c.recache(),n.vertexAttribPointer.apply(this,arguments)},t.instrumentExtension&&t.instrumentExtension(this,"OES_vertex_array_object"),t.canvas&&t.canvas.addEventListener("webglcontextrestored",(()=>{var t;t="OESVertexArrayObject emulation library context restored",globalThis.console&&globalThis.console.log&&globalThis.console.log(t),e.reset_()}),!0),this.reset_()};aS.prototype.VERTEX_ARRAY_BINDING_OES=34229,aS.prototype.reset_=function(){if(void 0!==this.vertexArrayObjects)for(let e=0;e<this.vertexArrayObjects.length;++e)this.vertexArrayObjects.isAlive=!1;const t=this.gl;this.maxVertexAttribs=t.getParameter(34921),this.defaultVertexArrayObject=new oS(this),this.currentVertexArrayObject=null,this.currentArrayBuffer=null,this.vertexArrayObjects=[this.defaultVertexArrayObject],this.bindVertexArrayOES(null)},aS.prototype.createVertexArrayOES=function(){const t=new oS(this);return this.vertexArrayObjects.push(t),t},aS.prototype.deleteVertexArrayOES=function(t){t.isAlive=!1,this.vertexArrayObjects.splice(this.vertexArrayObjects.indexOf(t),1),this.currentVertexArrayObject===t&&this.bindVertexArrayOES(null)},aS.prototype.isVertexArrayOES=function(t){return!!(t&&t instanceof oS&&t.hasBeenBound&&t.ext===this)},aS.prototype.bindVertexArrayOES=function(t){const e=this.gl;if(t&&!t.isAlive)return void iS(1282,"bindVertexArrayOES: attempt to bind deleted arrayObject");const n=this.original,r=this.currentVertexArrayObject;this.currentVertexArrayObject=t||this.defaultVertexArrayObject,this.currentVertexArrayObject.hasBeenBound=!0;const i=this.currentVertexArrayObject;if(r===i)return;r&&i.elementArrayBuffer===r.elementArrayBuffer||n.bindBuffer.call(e,34963,i.elementArrayBuffer);let o=this.currentArrayBuffer;const a=Math.max(r?r.maxAttrib:0,i.maxAttrib);for(let s=0;s<=a;s++){const t=i.attribs[s],a=r?r.attribs[s]:null;if(r&&t.enabled===a.enabled||(t.enabled?n.enableVertexAttribArray.call(e,s):n.disableVertexAttribArray.call(e,s)),t.enabled){let i=!1;r&&t.buffer===a.buffer||(o!==t.buffer&&(n.bindBuffer.call(e,34962,t.buffer),o=t.buffer),i=!0),(i||t.cached!==a.cached)&&n.vertexAttribPointer.call(e,s,t.size,t.type,t.normalized,t.stride,t.offset)}}this.currentArrayBuffer!==o&&n.bindBuffer.call(e,34962,this.currentArrayBuffer)};const sS="OES_element_index",lS="WEBGL_draw_buffers",cS="WEBGL_debug_renderer_info",uS=35723,hS=36795,dS=34047,fS=37445,pS=37446,mS=t=>tS(t)?void 0:0,gS={3074:t=>tS(t)?void 0:36064,[uS]:t=>tS(t)?void 0:4352,35977:mS,32937:mS,[hS]:(t,e)=>{const n=tS(t)?t.getExtension("EXT_disjoint_timer_query_webgl2"):t.getExtension("EXT_disjoint_timer_query");return n&&n.GPU_DISJOINT_EXT?e(n.GPU_DISJOINT_EXT):0},[fS]:(t,e)=>{const n=t.getExtension(cS);return e(n&&n.UNMASKED_VENDOR_WEBGL||7936)},[pS]:(t,e)=>{const n=t.getExtension(cS);return e(n&&n.UNMASKED_RENDERER_WEBGL||7937)},[dS]:(t,e)=>{const n=t.luma.extensions.EXT_texture_filter_anisotropic;return n?e(n.MAX_TEXTURE_MAX_ANISOTROPY_EXT):1},32883:mS,35071:mS,37447:mS,36063:(t,e)=>{if(!tS(t)){const n=t.getExtension(lS);return n?e(n.MAX_COLOR_ATTACHMENTS_WEBGL):0}},35379:mS,35374:mS,35377:mS,34852:t=>{if(!tS(t)){const e=t.getExtension(lS);return e?e.MAX_DRAW_BUFFERS_WEBGL:0}},36203:t=>t.getExtension(sS)?2147483647:65535,33001:t=>t.getExtension(sS)?16777216:65535,33e3:t=>16777216,37157:mS,35373:mS,35657:mS,36183:mS,37137:mS,34045:mS,35978:mS,35979:mS,35968:mS,35376:mS,35375:mS,35659:mS,37154:mS,35371:mS,35658:mS,35076:mS,35077:mS,35380:mS};const yS="OES_vertex_array_object",vS="ANGLE_instanced_arrays",_S="WEBGL_draw_buffers",bS="EXT_disjoint_timer_query";const xS={[yS]:{meta:{suffix:"OES"},createVertexArray:()=>{Kw(!1,"VertexArray requires WebGL2 or OES_vertex_array_object extension")},deleteVertexArray:()=>{},bindVertexArray:()=>{},isVertexArray:()=>!1},[vS]:{meta:{suffix:"ANGLE"},vertexAttribDivisor(t,e){Kw(0===e,"WebGL instanced rendering not supported")},drawElementsInstanced:()=>{},drawArraysInstanced:()=>{}},[_S]:{meta:{suffix:"WEBGL"},drawBuffers:()=>{Kw(!1)}},[bS]:{meta:{suffix:"EXT"},createQuery:()=>{Kw(!1)},deleteQuery:()=>{Kw(!1)},beginQuery:()=>{Kw(!1)},endQuery:()=>{},getQuery(t,e){return this.getQueryObject(t,e)},getQueryParameter(t,e){return this.getQueryObject(t,e)},getQueryObject:()=>{}}},wS={readBuffer:(t,e,n)=>{tS(t)&&e(n)},getVertexAttrib:(t,e,n,r)=>{const{webgl2:i,ext:o}=function(t,e){return{webgl2:tS(t),ext:t.getExtension(e)}}(t,vS);let a;switch(r){case 35069:a=!!i&&void 0;break;case 35070:a=i||o?void 0:0}return void 0!==a?a:e(n,r)},getProgramParameter:(t,e,n,r)=>{if(!tS(t))switch(r){case 35967:return 35981;case 35971:case 35382:return 0}return e(n,r)},getInternalformatParameter:(t,e,n,r,i)=>tS(t)||32937!==i?t.getInternalformatParameter(n,r,i):new Int32Array([0]),getTexParameter(t,e,n,r){if(34046===r){const{extensions:e}=t.luma,n=e.EXT_texture_filter_anisotropic;r=n&&n.TEXTURE_MAX_ANISOTROPY_EXT||34046}return e(n,r)},getParameter:function(t,e,n){const r=gS[n],i="function"===typeof r?r(t,e,n):r;return void 0!==i?i:e(n)},hint:(t,e,n,r)=>e(n,r)};function SS(t,e){let{extension:n,target:r,target2:i}=e;const o=xS[n];Kw(o);const{meta:a={}}=o,{suffix:s=""}=a,l=t.getExtension(n);for(const c of Object.keys(o)){const e="".concat(c).concat(s);let n=null;"meta"===c||"function"===typeof t[c]||(l&&"function"===typeof l[e]?n=function(){return l[e](...arguments)}:"function"===typeof o[c]&&(n=o[c].bind(r))),n&&(r[c]=n,i[c]=n)}}globalThis.polyfillContext=function(t){t.luma=t.luma||{};const{luma:e}=t;return e.polyfilled||(!function(t){if("function"===typeof t.createVertexArray)return;const e=t.getSupportedExtensions;t.getSupportedExtensions=function(){const t=e.call(this)||[];return t.indexOf("OES_vertex_array_object")<0&&t.push("OES_vertex_array_object"),t};const n=t.getExtension;t.getExtension=function(e){return n.call(this,e)||("OES_vertex_array_object"!==e?null:(t.__OESVertexArrayObject||(this.__OESVertexArrayObject=new aS(this)),this.__OESVertexArrayObject))}}(t),function(t){t.luma.extensions={};const e=t.getSupportedExtensions()||[];for(const n of e)t.luma[n]=t.getExtension(n)}(t),function(t,e){for(const n of Object.getOwnPropertyNames(e))"overrides"!==n&&SS(t,{extension:n,target:t.luma,target2:t})}(t,xS),function(t,e){let{target:n,target2:r}=e;Object.keys(wS).forEach((e=>{if("function"===typeof wS[e]){const i=t[e]?t[e].bind(t):()=>{},o=wS[e].bind(null,t,i);n[e]=o,r[e]=o}}))}(t,{target:e,target2:t}),e.polyfilled=!0),t};const ES={3042:!1,32773:new Float32Array([0,0,0,0]),32777:32774,34877:32774,32969:1,32968:0,32971:1,32970:0,3106:new Float32Array([0,0,0,0]),3107:[!0,!0,!0,!0],2884:!1,2885:1029,2929:!1,2931:1,2932:513,2928:new Float32Array([0,1]),2930:!0,3024:!0,36006:null,2886:2305,33170:4352,2849:1,32823:!1,32824:0,10752:0,32938:1,32939:!1,3089:!1,3088:new Int32Array([0,0,1024,1024]),2960:!1,2961:0,2968:4294967295,36005:4294967295,2962:519,2967:0,2963:4294967295,34816:519,36003:0,36004:4294967295,2964:7680,2965:7680,2966:7680,34817:7680,34818:7680,34819:7680,2978:[0,0,1024,1024],3333:4,3317:4,37440:!1,37441:!1,37443:37444,35723:4352,36010:null,35977:!1,3330:0,3332:0,3331:0,3314:0,32878:0,3316:0,3315:0,32877:0},TS=(t,e,n)=>e?t.enable(n):t.disable(n),MS=(t,e,n)=>t.hint(n,e),AS=(t,e,n)=>t.pixelStorei(n,e);function CS(t){return Array.isArray(t)||ArrayBuffer.isView(t)}const PS={3042:TS,32773:(t,e)=>t.blendColor(...e),32777:"blendEquation",34877:"blendEquation",32969:"blendFunc",32968:"blendFunc",32971:"blendFunc",32970:"blendFunc",3106:(t,e)=>t.clearColor(...e),3107:(t,e)=>t.colorMask(...e),2884:TS,2885:(t,e)=>t.cullFace(e),2929:TS,2931:(t,e)=>t.clearDepth(e),2932:(t,e)=>t.depthFunc(e),2928:(t,e)=>t.depthRange(...e),2930:(t,e)=>t.depthMask(e),3024:TS,35723:MS,36006:(t,e)=>{const n=tS(t)?36009:36160;return t.bindFramebuffer(n,e)},2886:(t,e)=>t.frontFace(e),33170:MS,2849:(t,e)=>t.lineWidth(e),32823:TS,32824:"polygonOffset",10752:"polygonOffset",35977:TS,32938:"sampleCoverage",32939:"sampleCoverage",3089:TS,3088:(t,e)=>t.scissor(...e),2960:TS,2961:(t,e)=>t.clearStencil(e),2968:(t,e)=>t.stencilMaskSeparate(1028,e),36005:(t,e)=>t.stencilMaskSeparate(1029,e),2962:"stencilFuncFront",2967:"stencilFuncFront",2963:"stencilFuncFront",34816:"stencilFuncBack",36003:"stencilFuncBack",36004:"stencilFuncBack",2964:"stencilOpFront",2965:"stencilOpFront",2966:"stencilOpFront",34817:"stencilOpBack",34818:"stencilOpBack",34819:"stencilOpBack",2978:(t,e)=>t.viewport(...e),3333:AS,3317:AS,37440:AS,37441:AS,37443:AS,3330:AS,3332:AS,3331:AS,36010:(t,e)=>t.bindFramebuffer(36008,e),3314:AS,32878:AS,3316:AS,3315:AS,32877:AS,framebuffer:(t,e)=>{const n=e&&"handle"in e?e.handle:e;return t.bindFramebuffer(36160,n)},blend:(t,e)=>e?t.enable(3042):t.disable(3042),blendColor:(t,e)=>t.blendColor(...e),blendEquation:(t,e)=>{e=CS(e)?e:[e,e],t.blendEquationSeparate(...e)},blendFunc:(t,e)=>{e=CS(e)&&2===e.length?[...e,...e]:e,t.blendFuncSeparate(...e)},clearColor:(t,e)=>t.clearColor(...e),clearDepth:(t,e)=>t.clearDepth(e),clearStencil:(t,e)=>t.clearStencil(e),colorMask:(t,e)=>t.colorMask(...e),cull:(t,e)=>e?t.enable(2884):t.disable(2884),cullFace:(t,e)=>t.cullFace(e),depthTest:(t,e)=>e?t.enable(2929):t.disable(2929),depthFunc:(t,e)=>t.depthFunc(e),depthMask:(t,e)=>t.depthMask(e),depthRange:(t,e)=>t.depthRange(...e),dither:(t,e)=>e?t.enable(3024):t.disable(3024),derivativeHint:(t,e)=>{t.hint(35723,e)},frontFace:(t,e)=>t.frontFace(e),mipmapHint:(t,e)=>t.hint(33170,e),lineWidth:(t,e)=>t.lineWidth(e),polygonOffsetFill:(t,e)=>e?t.enable(32823):t.disable(32823),polygonOffset:(t,e)=>t.polygonOffset(...e),sampleCoverage:(t,e)=>t.sampleCoverage(...e),scissorTest:(t,e)=>e?t.enable(3089):t.disable(3089),scissor:(t,e)=>t.scissor(...e),stencilTest:(t,e)=>e?t.enable(2960):t.disable(2960),stencilMask:(t,e)=>{e=CS(e)?e:[e,e];const[n,r]=e;t.stencilMaskSeparate(1028,n),t.stencilMaskSeparate(1029,r)},stencilFunc:(t,e)=>{e=CS(e)&&3===e.length?[...e,...e]:e;const[n,r,i,o,a,s]=e;t.stencilFuncSeparate(1028,n,r,i),t.stencilFuncSeparate(1029,o,a,s)},stencilOp:(t,e)=>{e=CS(e)&&3===e.length?[...e,...e]:e;const[n,r,i,o,a,s]=e;t.stencilOpSeparate(1028,n,r,i),t.stencilOpSeparate(1029,o,a,s)},viewport:(t,e)=>t.viewport(...e)};function kS(t,e,n){return void 0!==e[t]?e[t]:n[t]}const IS={blendEquation:(t,e,n)=>t.blendEquationSeparate(kS(32777,e,n),kS(34877,e,n)),blendFunc:(t,e,n)=>t.blendFuncSeparate(kS(32969,e,n),kS(32968,e,n),kS(32971,e,n),kS(32970,e,n)),polygonOffset:(t,e,n)=>t.polygonOffset(kS(32824,e,n),kS(10752,e,n)),sampleCoverage:(t,e,n)=>t.sampleCoverage(kS(32938,e,n),kS(32939,e,n)),stencilFuncFront:(t,e,n)=>t.stencilFuncSeparate(1028,kS(2962,e,n),kS(2967,e,n),kS(2963,e,n)),stencilFuncBack:(t,e,n)=>t.stencilFuncSeparate(1029,kS(34816,e,n),kS(36003,e,n),kS(36004,e,n)),stencilOpFront:(t,e,n)=>t.stencilOpSeparate(1028,kS(2964,e,n),kS(2965,e,n),kS(2966,e,n)),stencilOpBack:(t,e,n)=>t.stencilOpSeparate(1029,kS(34817,e,n),kS(34818,e,n),kS(34819,e,n))},OS={enable:(t,e)=>t({[e]:!0}),disable:(t,e)=>t({[e]:!1}),pixelStorei:(t,e,n)=>t({[e]:n}),hint:(t,e,n)=>t({[e]:n}),bindFramebuffer:(t,e,n)=>{switch(e){case 36160:return t({36006:n,36010:n});case 36009:return t({36006:n});case 36008:return t({36010:n});default:return null}},blendColor:(t,e,n,r,i)=>t({32773:new Float32Array([e,n,r,i])}),blendEquation:(t,e)=>t({32777:e,34877:e}),blendEquationSeparate:(t,e,n)=>t({32777:e,34877:n}),blendFunc:(t,e,n)=>t({32969:e,32968:n,32971:e,32970:n}),blendFuncSeparate:(t,e,n,r,i)=>t({32969:e,32968:n,32971:r,32970:i}),clearColor:(t,e,n,r,i)=>t({3106:new Float32Array([e,n,r,i])}),clearDepth:(t,e)=>t({2931:e}),clearStencil:(t,e)=>t({2961:e}),colorMask:(t,e,n,r,i)=>t({3107:[e,n,r,i]}),cullFace:(t,e)=>t({2885:e}),depthFunc:(t,e)=>t({2932:e}),depthRange:(t,e,n)=>t({2928:new Float32Array([e,n])}),depthMask:(t,e)=>t({2930:e}),frontFace:(t,e)=>t({2886:e}),lineWidth:(t,e)=>t({2849:e}),polygonOffset:(t,e,n)=>t({32824:e,10752:n}),sampleCoverage:(t,e,n)=>t({32938:e,32939:n}),scissor:(t,e,n,r,i)=>t({3088:new Int32Array([e,n,r,i])}),stencilMask:(t,e)=>t({2968:e,36005:e}),stencilMaskSeparate:(t,e,n)=>t({[1028===e?2968:36005]:n}),stencilFunc:(t,e,n,r)=>t({2962:e,2967:n,2963:r,34816:e,36003:n,36004:r}),stencilFuncSeparate:(t,e,n,r,i)=>t({[1028===e?2962:34816]:n,[1028===e?2967:36003]:r,[1028===e?2963:36004]:i}),stencilOp:(t,e,n,r)=>t({2964:e,2965:n,2966:r,34817:e,34818:n,34819:r}),stencilOpSeparate:(t,e,n,r,i)=>t({[1028===e?2964:34817]:n,[1028===e?2965:34818]:r,[1028===e?2966:34819]:i}),viewport:(t,e,n,r,i)=>t({2978:[e,n,r,i]})},LS=(t,e)=>t.isEnabled(e),jS={3042:LS,2884:LS,2929:LS,3024:LS,32823:LS,32926:LS,32928:LS,3089:LS,2960:LS,35977:LS};function zS(t){for(const e in t)return!1;return!0}function RS(t,e){if(t===e)return!0;const n=Array.isArray(t)||ArrayBuffer.isView(t),r=Array.isArray(e)||ArrayBuffer.isView(e);if(n&&r&&t.length===e.length){for(let n=0;n<t.length;++n)if(t[n]!==e[n])return!1;return!0}return!1}function DS(t,e){const n=t[e].bind(t);t[e]=function(){const e=arguments.length<=0?void 0:arguments[0];return e in t.state.cache&&t.state.enable?t.state.cache[e]:n(...arguments)},Object.defineProperty(t[e],"name",{value:"".concat(e,"-from-cache"),configurable:!1})}function BS(t,e,n){const r=t[e].bind(t);t[e]=function(){for(var e=arguments.length,i=new Array(e),o=0;o<e;o++)i[o]=arguments[o];const{valueChanged:a,oldValue:s}=n(t.state._updateCache,...i);return a&&r(...i),s},Object.defineProperty(t[e],"name",{value:"".concat(e,"-to-cache"),configurable:!1})}class FS{constructor(t){let{copyState:e=!1,log:n=(()=>{})}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.gl=t,this.program=null,this.stateStack=[],this.enable=!0,this.cache=e?WS(t):Object.assign({},ES),this.log=n,this._updateCache=this._updateCache.bind(this),Object.seal(this)}push(){this.stateStack.push({})}pop(){Kw(this.stateStack.length>0);const t=this.stateStack[this.stateStack.length-1];VS(this.gl,t),this.stateStack.pop()}_updateCache(t){let e,n=!1;const r=this.stateStack.length>0&&this.stateStack[this.stateStack.length-1];for(const i in t){Kw(void 0!==i);const o=t[i],a=this.cache[i];RS(o,a)||(n=!0,e=a,r&&!(i in r)&&(r[i]=a),this.cache[i]=o)}return{valueChanged:n,oldValue:e}}}function NS(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{enable:n=!0,copyState:r}=e;if(Kw(void 0!==r),!t.state){const{polyfillContext:e}=globalThis;e&&e(t),t.state=new FS(t,{copyState:r}),function(t){const e=t.useProgram.bind(t);t.useProgram=function(n){t.state.program!==n&&(e(n),t.state.program=n)}}(t);for(const n in OS){BS(t,n,OS[n])}DS(t,"getParameter"),DS(t,"isEnabled")}return t.state.enable=n,t}function US(t){Kw(t.state),t.state.pop()}function VS(t,e){if(Kw(Qw(t),"setParameters requires a WebGL context"),zS(e))return;const n={};for(const i in e){const r=Number(i),o=PS[i];o&&("string"===typeof o?n[o]=!0:o(t,e[i],r))}const r=t.state&&t.state.cache;if(r)for(const i in n){(0,IS[i])(t,e,r)}}function WS(t,e){if("number"===typeof(e=e||ES)){const n=e,r=jS[n];return r?r(t,n):t.getParameter(n)}const n=Array.isArray(e)?e:Object.keys(e),r={};for(const i of n){const e=jS[i];r[i]=e?e(t,Number(i)):t.getParameter(Number(i))}return r}function GS(t,e,n){if(zS(e))return n(t);const{nocatch:r=!0}=e;let i;if(function(t){t.state||NS(t,{copyState:!1}),t.state.push()}(t),VS(t,e),r)i=n(t),US(t);else try{i=n(t)}finally{US(t)}return i}function qS(t){const{luma:e}=t;if(t.canvas&&e){const n=e.canvasSizeInfo,r="clientWidth"in n?n.clientWidth:t.canvas.clientWidth;return r?t.drawingBufferWidth/r:1}return 1}function HS(t,e){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return function(t,e,n,r,i){const o=ZS(t[0],e,n);let a=XS(t[1],e,r,i),s=ZS(t[0]+1,e,n);const l=s===n-1?s:s-1;let c;s=XS(t[1]+1,e,r,i),i?(s=0===s?s:s+1,c=a,a=s):c=s===r-1?s:s-1;return{x:o,y:a,width:Math.max(l-o+1,1),height:Math.max(c-a+1,1)}}(e,qS(t),t.drawingBufferWidth,t.drawingBufferHeight,n)}function ZS(t,e,n){return Math.min(Math.round(t*e),n-1)}function XS(t,e,n,r){return r?Math.max(0,n-1-Math.round(t*e)):Math.min(Math.round(t*e),n-1)}const YS=Ew(),KS=YS&&"undefined"!==typeof document,$S={webgl2:!0,webgl1:!0,throwOnError:!0,manageState:!0,canvas:null,debug:!1,width:800,height:600};function JS(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Kw(YS,"createGLContext only available in the browser.\nCreate your own headless context or use 'createHeadlessContext' from @luma.gl/test-utils"),t=Object.assign({},$S,t);const{width:e,height:n}=t;function r(e){if(t.throwOnError)throw new Error(e);return console.error(e),null}let i;t.onError=r;const{canvas:o}=t,a=function(t){let e,{canvas:n,width:r=800,height:i=600,onError:o}=t;if("string"===typeof n){KS&&"complete"===document.readyState||o("createGLContext called on canvas '".concat(n,"' before page was loaded")),e=document.getElementById(n)}else n?e=n:(e=document.createElement("canvas"),e.id="lumagl-canvas",e.style.width=Number.isFinite(r)?"".concat(r,"px"):"100%",e.style.height=Number.isFinite(i)?"".concat(i,"px"):"100%",document.body.insertBefore(e,document.body.firstChild));return e}({canvas:o,width:e,height:n,onError:r});return i=function(t,e){const{onError:n}=e;let r=null;const i=t=>r=t.statusMessage||r;t.addEventListener("webglcontextcreationerror",i,!1);const{webgl1:o=!0,webgl2:a=!0}=e;let s=null;a&&(s=s||t.getContext("webgl2",e),s=s||t.getContext("experimental-webgl2",e));o&&(s=s||t.getContext("webgl",e),s=s||t.getContext("experimental-webgl",e));if(t.removeEventListener("webglcontextcreationerror",i,!1),!s)return n("Failed to create ".concat(a&&!o?"WebGL2":"WebGL"," context: ").concat(r||"Unknown error"));e.onContextLost&&t.addEventListener("webglcontextlost",e.onContextLost,!1);e.onContextRestored&&t.addEventListener("webglcontextrestored",e.onContextRestored,!1);return s}(a,t),i?(i=QS(i,t),function(t){const e=tS(t)?"WebGL2":"WebGL1",n=function(t){const e=t.getParameter(7936),n=t.getParameter(7937),r=t.getExtension("WEBGL_debug_renderer_info"),i=r&&t.getParameter(r.UNMASKED_VENDOR_WEBGL||7936),o=r&&t.getParameter(r.UNMASKED_RENDERER_WEBGL||7937);return{vendor:i||e,renderer:o||n,vendorMasked:e,rendererMasked:n,version:t.getParameter(7938),shadingLanguageVersion:t.getParameter(35724)}}(t),r=n?"(".concat(n.vendor,",").concat(n.renderer,")"):"",i=t.debug?" debug":"";Yw.info(1,"".concat(e).concat(i," context ").concat(r))()}(i),i):null}function QS(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!t||t._instrumented)return t;t._version=t._version||function(t){if("undefined"!==typeof WebGL2RenderingContext&&t instanceof WebGL2RenderingContext)return 2;return 1}(t),t.luma=t.luma||{},t.luma.canvasSizeInfo=t.luma.canvasSizeInfo||{},e=Object.assign({},$S,e);const{manageState:n,debug:r}=e;return n&&NS(t,{copyState:!1,log:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return Yw.log(1,...e)()}}),YS&&r&&(globalThis.makeDebugContext?(t=globalThis.makeDebugContext(t,e),Yw.level=Math.max(Yw.level,1)):Yw.warn('WebGL debug mode not activated. import "@luma.gl/debug" to enable.')()),t._instrumented=!0,t}function tE(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(t.canvas){return void function(t,e,n){let r="width"in n?n.width:t.canvas.clientWidth,i="height"in n?n.height:t.canvas.clientHeight;r&&i||(Yw.log(1,"Canvas clientWidth/clientHeight is 0")(),e=1,r=t.canvas.width||1,i=t.canvas.height||1);t.luma=t.luma||{},t.luma.canvasSizeInfo=t.luma.canvasSizeInfo||{};const o=t.luma.canvasSizeInfo;if(o.clientWidth!==r||o.clientHeight!==i||o.devicePixelRatio!==e){let n=e;const o=Math.floor(r*n),a=Math.floor(i*n);t.canvas.width=o,t.canvas.height=a,t.drawingBufferWidth===o&&t.drawingBufferHeight===a||(Yw.warn("Device pixel ratio clamped")(),n=Math.min(t.drawingBufferWidth/r,t.drawingBufferHeight/i),t.canvas.width=Math.floor(r*n),t.canvas.height=Math.floor(i*n)),Object.assign(t.luma.canvasSizeInfo,{clientWidth:r,clientHeight:i,devicePixelRatio:e})}}(t,function(t){const e="undefined"===typeof window?1:window.devicePixelRatio||1;return Number.isFinite(t)?t<=0?1:t:t?e:1}(e.useDevicePixels),e)}const n=t.getExtension("STACKGL_resize_drawingbuffer");n&&"width"in e&&"height"in e&&n.resize(e.width,e.height)}function eE(){let t;if("undefined"!==typeof window&&window.performance)t=window.performance.now();else if("undefined"!==typeof process&&process.hrtime){const e=process.hrtime();t=1e3*e[0]+e[1]/1e6}else t=Date.now();return t}class nE{constructor(t,e){ww(this,"name",void 0),ww(this,"type",void 0),ww(this,"sampleSize",1),ww(this,"time",void 0),ww(this,"count",void 0),ww(this,"samples",void 0),ww(this,"lastTiming",void 0),ww(this,"lastSampleTime",void 0),ww(this,"lastSampleCount",void 0),ww(this,"_count",0),ww(this,"_time",0),ww(this,"_samples",0),ww(this,"_startTime",0),ww(this,"_timerPending",!1),this.name=t,this.type=e,this.reset()}setSampleSize(t){return this.sampleSize=t,this}incrementCount(){return this.addCount(1),this}decrementCount(){return this.subtractCount(1),this}addCount(t){return this._count+=t,this._samples++,this._checkSampling(),this}subtractCount(t){return this._count-=t,this._samples++,this._checkSampling(),this}addTime(t){return this._time+=t,this.lastTiming=t,this._samples++,this._checkSampling(),this}timeStart(){return this._startTime=eE(),this._timerPending=!0,this}timeEnd(){return this._timerPending?(this.addTime(eE()-this._startTime),this._timerPending=!1,this._checkSampling(),this):this}getSampleAverageCount(){return this.sampleSize>0?this.lastSampleCount/this.sampleSize:0}getSampleAverageTime(){return this.sampleSize>0?this.lastSampleTime/this.sampleSize:0}getSampleHz(){return this.lastSampleTime>0?this.sampleSize/(this.lastSampleTime/1e3):0}getAverageCount(){return this.samples>0?this.count/this.samples:0}getAverageTime(){return this.samples>0?this.time/this.samples:0}getHz(){return this.time>0?this.samples/(this.time/1e3):0}reset(){return this.time=0,this.count=0,this.samples=0,this.lastTiming=0,this.lastSampleTime=0,this.lastSampleCount=0,this._count=0,this._time=0,this._samples=0,this._startTime=0,this._timerPending=!1,this}_checkSampling(){this._samples===this.sampleSize&&(this.lastSampleTime=this._time,this.lastSampleCount=this._count,this.count+=this._count,this.time+=this._time,this.samples+=this._samples,this._time=0,this._count=0,this._samples=0)}}class rE{constructor(t){ww(this,"id",void 0),ww(this,"stats",{}),this.id=t.id,this.stats={},this._initializeStats(t.stats),Object.seal(this)}get(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"count";return this._getOrCreate({name:t,type:e})}get size(){return Object.keys(this.stats).length}reset(){for(const t in this.stats)this.stats[t].reset();return this}forEach(t){for(const e in this.stats)t(this.stats[e])}getTable(){const t={};return this.forEach((e=>{t[e.name]={time:e.time||0,count:e.count||0,average:e.getAverageTime()||0,hz:e.getHz()||0}})),t}_initializeStats(){(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]).forEach((t=>this._getOrCreate(t)))}_getOrCreate(t){if(!t||!t.name)return null;const{name:e,type:n}=t;return this.stats[e]||(this.stats[e]=t instanceof nE?t:new nE(e,n)),this.stats[e]}}const iE="8.5.21";const oE=new class{constructor(){this.stats=new Map}get(t){return this.stats.has(t)||this.stats.set(t,new rE({id:t})),this.stats.get(t)}};if(globalThis.luma&&globalThis.luma.VERSION!==iE)throw new Error("luma.gl - multiple VERSIONs detected: ".concat(globalThis.luma.VERSION," vs ").concat(iE));globalThis.luma||(Ew()&&Yw.log(1,"luma.gl ".concat(iE," - ").concat("set luma.log.level=1 (or higher) to trace rendering"))(),globalThis.luma=globalThis.luma||{VERSION:iE,version:iE,log:Yw,stats:oE,globals:{modules:{},nodeIO:{}}});globalThis.luma;function aE(t,e){if(!t)throw new Error(e||"luma.gl: assertion failed.")}function sE(t,e){if("string"!==typeof e)return e;const n=Number(e);if(!isNaN(n))return n;const r=t[e=e.replace(/^.*\./,"")];return aE(void 0!==r,"Accessing undefined constant GL.".concat(e)),r}function lE(t,e){e=Number(e);for(const n in t)if(t[n]===e)return"GL.".concat(n);return String(e)}const cE={};function uE(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"id";cE[t]=cE[t]||1;const e=cE[t]++;return"".concat(t,"-").concat(e)}function hE(t){return aE("number"===typeof t,"Input must be a number"),t&&0===(t&t-1)}function dE(t){let e=!0;for(const n in t){e=!1;break}return e}function fE(t,e,n,r){const i="See luma.gl ".concat(n," Upgrade Guide at https://luma.gl/docs/upgrade-guide"),o=Object.getPrototypeOf(t);r.forEach((t=>{o.methodName||(o[t]=()=>{throw Yw.removed("Calling removed method ".concat(e,".").concat(t,": "),i)(),new Error(t)})}))}const pE="Resource subclass must define virtual methods";class mE{get[Symbol.toStringTag](){return"Resource"}constructor(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};eS(t);const{id:n,userData:r={}}=e;this.gl=t,this.gl2=t,this.id=n||uE(this[Symbol.toStringTag]),this.userData=r,this._bound=!1,this._handle=e.handle,void 0===this._handle&&(this._handle=this._createHandle()),this.byteLength=0,this._addStats()}toString(){return"".concat(this[Symbol.toStringTag]||this.constructor.name,"(").concat(this.id,")")}get handle(){return this._handle}delete(){let{deleteChildren:t=!1}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const e=this._handle&&this._deleteHandle(this._handle);return this._handle&&this._removeStats(),this._handle=null,e&&t&&e.filter(Boolean).forEach((t=>t.delete())),this}bind(){let t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.handle;return"function"!==typeof e?(this._bindHandle(e),this):(this._bound?t=e():(this._bindHandle(this.handle),this._bound=!0,t=e(),this._bound=!1,this._bindHandle(null)),t)}unbind(){this.bind(null)}getParameter(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};aE(t=sE(this.gl,t));const n=(this.constructor.PARAMETERS||{})[t];if(n){const t=tS(this.gl);if(!((!("webgl2"in n)||t)&&(!("extension"in n)||this.gl.getExtension(n.extension)))){const e=n.webgl1,r="webgl2"in n?n.webgl2:n.webgl1;return t?r:e}}return this._getParameter(t,e)}getParameters(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{parameters:e,keys:n}=t,r=this.constructor.PARAMETERS||{},i=tS(this.gl),o={},a=e||Object.keys(r);for(const s of a){const e=r[s];if(e&&(!("webgl2"in e)||i)&&(!("extension"in e)||this.gl.getExtension(e.extension))){const r=n?lE(this.gl,s):s;o[r]=this.getParameter(s,t),n&&"GLenum"===e.type&&(o[r]=lE(this.gl,o[r]))}}return o}setParameter(t,e){aE(t=sE(this.gl,t));const n=(this.constructor.PARAMETERS||{})[t];if(n){const t=tS(this.gl);if(!((!("webgl2"in n)||t)&&(!("extension"in n)||this.gl.getExtension(n.extension))))throw new Error("Parameter not available on this platform");"GLenum"===n.type&&(e=sE(e))}return this._setParameter(t,e),this}setParameters(t){for(const e in t)this.setParameter(e,t[e]);return this}stubRemovedMethods(t,e,n){return fE(this,t,e,n)}initialize(t){}_createHandle(){throw new Error(pE)}_deleteHandle(){throw new Error(pE)}_bindHandle(t){throw new Error(pE)}_getOptsFromHandle(){throw new Error(pE)}_getParameter(t,e){throw new Error(pE)}_setParameter(t,e){throw new Error(pE)}_context(){return this.gl.luma=this.gl.luma||{},this.gl.luma}_addStats(){const t=this[Symbol.toStringTag],e=oE.get("Resource Counts");e.get("Resources Created").incrementCount(),e.get("".concat(t,"s Created")).incrementCount(),e.get("".concat(t,"s Active")).incrementCount()}_removeStats(){const t=this[Symbol.toStringTag];oE.get("Resource Counts").get("".concat(t,"s Active")).decrementCount()}_trackAllocatedMemory(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this[Symbol.toStringTag];this._trackAllocatedMemoryForContext(t,e),this._trackAllocatedMemoryForContext(t,e,this.gl.canvas&&this.gl.canvas.id),this.byteLength=t}_trackAllocatedMemoryForContext(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this[Symbol.toStringTag],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";const r=oE.get("Memory Usage".concat(n));r.get("GPU Memory").addCount(t),r.get("".concat(e," Memory")).addCount(t)}_trackDeallocatedMemory(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this[Symbol.toStringTag];this._trackDeallocatedMemoryForContext(t),this._trackDeallocatedMemoryForContext(t,this.gl.canvas&&this.gl.canvas.id),this.byteLength=0}_trackDeallocatedMemoryForContext(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this[Symbol.toStringTag],e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";const n=oE.get("Memory Usage".concat(e));n.get("GPU Memory").subtractCount(this.byteLength),n.get("".concat(t," Memory")).subtractCount(this.byteLength)}}const gE="Failed to deduce GL constant from typed array";function yE(t){switch(ArrayBuffer.isView(t)?t.constructor:t){case Float32Array:return 5126;case Uint16Array:return 5123;case Uint32Array:return 5125;case Uint8Array:case Uint8ClampedArray:return 5121;case Int8Array:return 5120;case Int16Array:return 5122;case Int32Array:return 5124;default:throw new Error(gE)}}function vE(t){let{clamped:e=!0}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(t){case 5126:return Float32Array;case 5123:case 33635:case 32819:case 32820:return Uint16Array;case 5125:return Uint32Array;case 5121:return e?Uint8ClampedArray:Uint8Array;case 5120:return Int8Array;case 5122:return Int16Array;case 5124:return Int32Array;default:throw new Error("Failed to deduce typed array type from GL constant")}}function _E(t){let{data:e,width:n,height:r}=t;const i=Math.round(n/2),o=Math.round(r/2),a=new Uint8Array(i*o*4);for(let s=0;s<o;s++)for(let t=0;t<i;t++)for(let r=0;r<4;r++)a[4*(s*i+t)+r]=e[4*(2*s*n+2*t)+r];return{data:a,width:i,height:o}}function bE(t,e,n){const{removedProps:r={},deprecatedProps:i={},replacedProps:o={}}=n;for(const s in r)if(s in e){const e=r[s]?"".concat(t,".").concat(r[s]):"N/A";Yw.removed("".concat(t,".").concat(s),e)()}for(const s in i)if(s in e){const e=i[s];Yw.deprecated("".concat(t,".").concat(s),"".concat(t,".").concat(e))()}let a=null;for(const s in o)if(s in e){const n=o[s];Yw.deprecated("".concat(t,".").concat(s),"".concat(t,".").concat(n))(),a=a||Object.assign({},e),a[n]=e[s],delete a[s]}return a||e}const xE={offset:0,stride:0,type:5126,size:1,divisor:0,normalized:!1,integer:!1},wE={deprecatedProps:{instanced:"divisor",isInstanced:"divisor"}};class SE{static getBytesPerElement(t){return vE(t.type||5126).BYTES_PER_ELEMENT}static getBytesPerVertex(t){aE(t.size);return vE(t.type||5126).BYTES_PER_ELEMENT*t.size}static resolve(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return new SE(...[xE,...e])}constructor(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];e.forEach((t=>this._assign(t))),Object.freeze(this)}toString(){return JSON.stringify(this)}get BYTES_PER_ELEMENT(){return SE.getBytesPerElement(this)}get BYTES_PER_VERTEX(){return SE.getBytesPerVertex(this)}_assign(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return t=bE("Accessor",t,wE),void 0!==t.type&&(this.type=t.type,5124!==t.type&&5125!==t.type||(this.integer=!0)),void 0!==t.size&&(this.size=t.size),void 0!==t.offset&&(this.offset=t.offset),void 0!==t.stride&&(this.stride=t.stride),void 0!==t.normalized&&(this.normalized=t.normalized),void 0!==t.integer&&(this.integer=t.integer),void 0!==t.divisor&&(this.divisor=t.divisor),void 0!==t.buffer&&(this.buffer=t.buffer),void 0!==t.index&&("boolean"===typeof t.index?this.index=t.index?1:0:this.index=t.index),void 0!==t.instanced&&(this.divisor=t.instanced?1:0),void 0!==t.isInstanced&&(this.divisor=t.isInstanced?1:0),this}}const EE={offset:"accessor.offset",stride:"accessor.stride",type:"accessor.type",size:"accessor.size",divisor:"accessor.divisor",normalized:"accessor.normalized",integer:"accessor.integer",instanced:"accessor.divisor",isInstanced:"accessor.divisor"},TE={removedProps:{},replacedProps:{bytes:"byteLength"},deprecatedProps:EE},ME={removedProps:EE};class AE extends mE{get[Symbol.toStringTag](){return"Buffer"}constructor(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};super(t,e),this.stubRemovedMethods("Buffer","v6.0",["layout","setLayout","getIndexedParameter"]),this.target=e.target||(this.gl.webgl2?36662:34962),this.initialize(e),Object.seal(this)}getElementCount(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.accessor;return Math.round(this.byteLength/SE.getBytesPerElement(t))}getVertexCount(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.accessor;return Math.round(this.byteLength/SE.getBytesPerVertex(t))}initialize(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return ArrayBuffer.isView(t)&&(t={data:t}),Number.isFinite(t)&&(t={byteLength:t}),t=bE("Buffer",t,TE),this.usage=t.usage||35044,this.debugData=null,this.setAccessor(Object.assign({},t,t.accessor)),t.data?this._setData(t.data,t.offset,t.byteLength):this._setByteLength(t.byteLength||0),this}setProps(t){return"accessor"in(t=bE("Buffer",t,ME))&&this.setAccessor(t.accessor),this}setAccessor(t){return delete(t=Object.assign({},t)).buffer,this.accessor=new SE(t),this}reallocate(t){return t>this.byteLength?(this._setByteLength(t),!0):(this.bytesUsed=t,!1)}setData(t){return this.initialize(t)}subData(t){ArrayBuffer.isView(t)&&(t={data:t});const{data:e,offset:n=0,srcOffset:r=0}=t,i=t.byteLength||t.length;aE(e);const o=this.gl.webgl2?36663:this.target;return this.gl.bindBuffer(o,this.handle),0!==r||void 0!==i?(nS(this.gl),this.gl.bufferSubData(this.target,n,e,r,i)):this.gl.bufferSubData(o,n,e),this.gl.bindBuffer(o,null),this.debugData=null,this._inferType(e),this}copyData(t){let{sourceBuffer:e,readOffset:n=0,writeOffset:r=0,size:i}=t;const{gl:o}=this;return nS(o),o.bindBuffer(36662,e.handle),o.bindBuffer(36663,this.handle),o.copyBufferSubData(36662,36663,n,r,i),o.bindBuffer(36662,null),o.bindBuffer(36663,null),this.debugData=null,this}getData(){let{dstData:t=null,srcByteOffset:e=0,dstOffset:n=0,length:r=0}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};nS(this.gl);const i=vE(this.accessor.type||5126,{clamped:!1}),o=this._getAvailableElementCount(e),a=n;let s,l;t?(l=t.length,s=l-a):(s=Math.min(o,r||o),l=a+s);const c=Math.min(o,s);return r=r||c,aE(r<=c),t=t||new i(l),this.gl.bindBuffer(36662,this.handle),this.gl.getBufferSubData(36662,e,t,n,r),this.gl.bindBuffer(36662,null),t}bind(){let{target:t=this.target,index:e=this.accessor&&this.accessor.index,offset:n=0,size:r}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return 35345===t||35982===t?void 0!==r?this.gl.bindBufferRange(t,e,this.handle,n,r):(aE(0===n),this.gl.bindBufferBase(t,e,this.handle)):this.gl.bindBuffer(t,this.handle),this}unbind(){let{target:t=this.target,index:e=this.accessor&&this.accessor.index}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return 35345===t||35982===t?this.gl.bindBufferBase(t,e,null):this.gl.bindBuffer(t,null),this}getDebugData(){return this.debugData?{data:this.debugData,changed:!1}:(this.debugData=this.getData({length:Math.min(10,this.byteLength)}),{data:this.debugData,changed:!0})}invalidateDebugData(){this.debugData=null}_setData(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t.byteLength+e;aE(ArrayBuffer.isView(t)),this._trackDeallocatedMemory();const r=this._getTarget();this.gl.bindBuffer(r,this.handle),this.gl.bufferData(r,n,this.usage),this.gl.bufferSubData(r,e,t),this.gl.bindBuffer(r,null),this.debugData=t.slice(0,10),this.bytesUsed=n,this._trackAllocatedMemory(n);const i=yE(t);return aE(i),this.setAccessor(new SE(this.accessor,{type:i})),this}_setByteLength(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.usage;aE(t>=0),this._trackDeallocatedMemory();let n=t;0===t&&(n=new Float32Array(0));const r=this._getTarget();return this.gl.bindBuffer(r,this.handle),this.gl.bufferData(r,n,e),this.gl.bindBuffer(r,null),this.usage=e,this.debugData=null,this.bytesUsed=t,this._trackAllocatedMemory(t),this}_getTarget(){return this.gl.webgl2?36663:this.target}_getAvailableElementCount(t){const e=t/vE(this.accessor.type||5126,{clamped:!1}).BYTES_PER_ELEMENT;return this.getElementCount()-e}_inferType(t){this.accessor.type||this.setAccessor(new SE(this.accessor,{type:yE(t)}))}_createHandle(){return this.gl.createBuffer()}_deleteHandle(){this.gl.deleteBuffer(this.handle),this._trackDeallocatedMemory()}_getParameter(t){this.gl.bindBuffer(this.target,this.handle);const e=this.gl.getBufferParameter(this.target,t);return this.gl.bindBuffer(this.target,null),e}get type(){return Yw.deprecated("Buffer.type","Buffer.accessor.type")(),this.accessor.type}get bytes(){return Yw.deprecated("Buffer.bytes","Buffer.byteLength")(),this.byteLength}setByteLength(t){return Yw.deprecated("setByteLength","reallocate")(),this.reallocate(t)}updateAccessor(t){return Yw.deprecated("updateAccessor(...)","setAccessor(new Accessor(buffer.accessor, ...)")(),this.accessor=new SE(this.accessor,t),this}}const CE={6407:{dataFormat:6407,types:[5121,33635]},6408:{dataFormat:6408,types:[5121,32819,32820]},6406:{dataFormat:6406,types:[5121]},6409:{dataFormat:6409,types:[5121]},6410:{dataFormat:6410,types:[5121]},33326:{dataFormat:6403,types:[5126],gl2:!0},33328:{dataFormat:33319,types:[5126],gl2:!0},34837:{dataFormat:6407,types:[5126],gl2:!0},34836:{dataFormat:6408,types:[5126],gl2:!0}},PE={6403:1,36244:1,33319:2,33320:2,6407:3,36248:3,6408:4,36249:4,6402:1,34041:1,6406:1,6409:1,6410:2},kE={5126:4,5125:4,5124:4,5123:2,5122:2,5131:2,5120:1,5121:1};const IE=[9729,9728],OE=globalThis.WebGLBuffer||function(){};class LE extends mE{get[Symbol.toStringTag](){return"Texture"}static isSupported(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{format:n,linearFiltering:r}=e;let i=!0;return n&&(i=i&&function(t,e){const n=CE[e];if(!n)return!1;if(void 0===n.gl1&&void 0===n.gl2)return!0;const r=tS(t)&&n.gl2||n.gl1;return"string"===typeof r?t.getExtension(r):r}(t,n),i=i&&(!r||function(t,e){const n=CE[e];switch(n&&n.types[0]){case 5126:return t.getExtension("OES_texture_float_linear");case 5131:return t.getExtension("OES_texture_half_float_linear");default:return!0}}(t,n))),i}constructor(t,e){const{id:n=uE("texture"),handle:r,target:i}=e;super(t,{id:n,handle:r}),this.target=i,this.textureUnit=void 0,this.loaded=!1,this.width=void 0,this.height=void 0,this.depth=void 0,this.format=void 0,this.type=void 0,this.dataFormat=void 0,this.border=void 0,this.textureUnit=void 0,this.mipmaps=void 0}toString(){return"Texture(".concat(this.id,",").concat(this.width,"x").concat(this.height,")")}initialize(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.data;if(e instanceof Promise)return e.then((e=>this.initialize(Object.assign({},t,{pixels:e,data:e})))),this;const n="undefined"!==typeof HTMLVideoElement&&e instanceof HTMLVideoElement;if(n&&e.readyState<HTMLVideoElement.HAVE_METADATA)return this._video=null,e.addEventListener("loadeddata",(()=>this.initialize(t))),this;const{pixels:r=null,format:i=6408,border:o=0,recreate:a=!1,parameters:s={},pixelStore:l={},textureUnit:c}=t;e||(e=r);let{width:u,height:h,dataFormat:d,type:f,compressed:p=!1,mipmaps:m=!0}=t;const{depth:g=0}=t;return({width:u,height:h,compressed:p,dataFormat:d,type:f}=this._deduceParameters({format:i,type:f,dataFormat:d,compressed:p,data:e,width:u,height:h})),this.width=u,this.height=h,this.depth=g,this.format=i,this.type=f,this.dataFormat=d,this.border=o,this.textureUnit=c,Number.isFinite(this.textureUnit)&&(this.gl.activeTexture(33984+this.textureUnit),this.gl.bindTexture(this.target,this.handle)),m&&this._isNPOT()&&(Yw.warn("texture: ".concat(this," is Non-Power-Of-Two, disabling mipmaping"))(),m=!1,this._updateForNPOT(s)),this.mipmaps=m,this.setImageData({data:e,width:u,height:h,depth:g,format:i,type:f,dataFormat:d,border:o,mipmaps:m,parameters:l,compressed:p}),m&&this.generateMipmap(),this.setParameters(s),a&&(this.data=e),n&&(this._video={video:e,parameters:s,lastTime:e.readyState>=HTMLVideoElement.HAVE_CURRENT_DATA?e.currentTime:-1}),this}update(){if(this._video){const{video:t,parameters:e,lastTime:n}=this._video;if(n===t.currentTime||t.readyState<HTMLVideoElement.HAVE_CURRENT_DATA)return;this.setSubImageData({data:t,parameters:e}),this.mipmaps&&this.generateMipmap(),this._video.lastTime=t.currentTime}}resize(t){let{height:e,width:n,mipmaps:r=!1}=t;return n!==this.width||e!==this.height?this.initialize({width:n,height:e,format:this.format,type:this.type,dataFormat:this.dataFormat,border:this.border,mipmaps:r}):this}generateMipmap(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this._isNPOT()?(Yw.warn("texture: ".concat(this," is Non-Power-Of-Two, disabling mipmaping"))(),this):(this.mipmaps=!0,this.gl.bindTexture(this.target,this.handle),GS(this.gl,t,(()=>{this.gl.generateMipmap(this.target)})),this.gl.bindTexture(this.target,null),this)}setImageData(t){this._trackDeallocatedMemory("Texture");const{target:e=this.target,pixels:n=null,level:r=0,format:i=this.format,border:o=this.border,offset:a=0,parameters:s={}}=t;let{data:l=null,type:c=this.type,width:u=this.width,height:h=this.height,dataFormat:d=this.dataFormat,compressed:f=!1}=t;l||(l=n),({type:c,dataFormat:d,compressed:f,width:u,height:h}=this._deduceParameters({format:i,type:c,dataFormat:d,compressed:f,data:l,width:u,height:h}));const{gl:p}=this;p.bindTexture(this.target,this.handle);let m,g=null;({data:l,dataType:g}=this._getDataType({data:l,compressed:f}));let y=0;if(GS(this.gl,s,(()=>{switch(g){case"null":p.texImage2D(e,r,i,u,h,o,d,c,l);break;case"typed-array":p.texImage2D(e,r,i,u,h,o,d,c,l,a);break;case"buffer":m=nS(p),m.bindBuffer(35052,l.handle||l),m.texImage2D(e,r,i,u,h,o,d,c,a),m.bindBuffer(35052,null);break;case"browser-object":tS(p)?p.texImage2D(e,r,i,u,h,o,d,c,l):p.texImage2D(e,r,i,d,c,l);break;case"compressed":for(const[t,n]of l.entries())p.compressedTexImage2D(e,t,n.format,n.width,n.height,o,n.data),y+=n.levelSize;break;default:aE(!1,"Unknown image data type")}})),"compressed"===g)this._trackAllocatedMemory(y,"Texture");else if(l&&l.byteLength)this._trackAllocatedMemory(l.byteLength,"Texture");else{const t=PE[this.dataFormat]||4,e=kE[this.type]||1;this._trackAllocatedMemory(this.width*this.height*t*e,"Texture")}return this.loaded=!0,this}setSubImageData(t){let{target:e=this.target,pixels:n=null,data:r=null,x:i=0,y:o=0,width:a=this.width,height:s=this.height,level:l=0,format:c=this.format,type:u=this.type,dataFormat:h=this.dataFormat,compressed:d=!1,offset:f=0,border:p=this.border,parameters:m={}}=t;if(({type:u,dataFormat:h,compressed:d,width:a,height:s}=this._deduceParameters({format:c,type:u,dataFormat:h,compressed:d,data:r,width:a,height:s})),aE(0===this.depth,"texSubImage not supported for 3D textures"),r||(r=n),r&&r.data){const t=r;r=t.data,a=t.shape[0],s=t.shape[1]}r instanceof AE&&(r=r.handle),this.gl.bindTexture(this.target,this.handle),GS(this.gl,m,(()=>{if(d)this.gl.compressedTexSubImage2D(e,l,i,o,a,s,c,r);else if(null===r)this.gl.texSubImage2D(e,l,i,o,a,s,h,u,null);else if(ArrayBuffer.isView(r))this.gl.texSubImage2D(e,l,i,o,a,s,h,u,r,f);else if(r instanceof OE){const t=nS(this.gl);t.bindBuffer(35052,r),t.texSubImage2D(e,l,i,o,a,s,h,u,f),t.bindBuffer(35052,null)}else if(tS(this.gl)){nS(this.gl).texSubImage2D(e,l,i,o,a,s,h,u,r)}else this.gl.texSubImage2D(e,l,i,o,h,u,r)})),this.gl.bindTexture(this.target,null)}copyFramebuffer(){return Yw.error("Texture.copyFramebuffer({...}) is no logner supported, use copyToTexture(source, target, opts})")(),null}getActiveUnit(){return this.gl.getParameter(34016)-33984}bind(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.textureUnit;const{gl:e}=this;return void 0!==t&&(this.textureUnit=t,e.activeTexture(33984+t)),e.bindTexture(this.target,this.handle),t}unbind(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.textureUnit;const{gl:e}=this;return void 0!==t&&(this.textureUnit=t,e.activeTexture(33984+t)),e.bindTexture(this.target,null),t}_getDataType(t){let{data:e,compressed:n=!1}=t;return n?{data:e,dataType:"compressed"}:null===e?{data:e,dataType:"null"}:ArrayBuffer.isView(e)?{data:e,dataType:"typed-array"}:e instanceof AE?{data:e.handle,dataType:"buffer"}:e instanceof OE?{data:e,dataType:"buffer"}:{data:e,dataType:"browser-object"}}_deduceParameters(t){const{format:e,data:n}=t;let{width:r,height:i,dataFormat:o,type:a,compressed:s}=t;const l=CE[e];return o=o||l&&l.dataFormat,a=a||l&&l.types[0],s=s||l&&l.compressed,({width:r,height:i}=this._deduceImageSize(n,r,i)),{dataFormat:o,type:a,compressed:s,width:r,height:i,format:e,data:n}}_deduceImageSize(t,e,n){let r;return r="undefined"!==typeof ImageData&&t instanceof ImageData?{width:t.width,height:t.height}:"undefined"!==typeof HTMLImageElement&&t instanceof HTMLImageElement?{width:t.naturalWidth,height:t.naturalHeight}:"undefined"!==typeof HTMLCanvasElement&&t instanceof HTMLCanvasElement||"undefined"!==typeof ImageBitmap&&t instanceof ImageBitmap?{width:t.width,height:t.height}:"undefined"!==typeof HTMLVideoElement&&t instanceof HTMLVideoElement?{width:t.videoWidth,height:t.videoHeight}:t?{width:e,height:n}:{width:e>=0?e:1,height:n>=0?n:1},aE(r,"Could not deduced texture size"),aE(void 0===e||r.width===e,"Deduced texture width does not match supplied width"),aE(void 0===n||r.height===n,"Deduced texture height does not match supplied height"),r}_createHandle(){return this.gl.createTexture()}_deleteHandle(){this.gl.deleteTexture(this.handle),this._trackDeallocatedMemory("Texture")}_getParameter(t){switch(t){case 4096:return this.width;case 4097:return this.height;default:this.gl.bindTexture(this.target,this.handle);const e=this.gl.getTexParameter(this.target,t);return this.gl.bindTexture(this.target,null),e}}_setParameter(t,e){switch(this.gl.bindTexture(this.target,this.handle),e=this._getNPOTParam(t,e),t){case 33082:case 33083:this.gl.texParameterf(this.handle,t,e);break;case 4096:case 4097:aE(!1);break;default:this.gl.texParameteri(this.target,t,e)}return this.gl.bindTexture(this.target,null),this}_isNPOT(){return!tS(this.gl)&&(!(!this.width||!this.height)&&(!hE(this.width)||!hE(this.height)))}_updateForNPOT(t){void 0===t[this.gl.TEXTURE_MIN_FILTER]&&(t[this.gl.TEXTURE_MIN_FILTER]=this.gl.LINEAR),void 0===t[this.gl.TEXTURE_WRAP_S]&&(t[this.gl.TEXTURE_WRAP_S]=this.gl.CLAMP_TO_EDGE),void 0===t[this.gl.TEXTURE_WRAP_T]&&(t[this.gl.TEXTURE_WRAP_T]=this.gl.CLAMP_TO_EDGE)}_getNPOTParam(t,e){if(this._isNPOT())switch(t){case 10241:-1===IE.indexOf(e)&&(e=9729);break;case 10242:case 10243:33071!==e&&(e=33071)}return e}}let jE="";class zE extends LE{get[Symbol.toStringTag](){return"Texture2D"}static isSupported(t,e){return LE.isSupported(t,e)}constructor(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};var n,r;eS(t),(e instanceof Promise||"string"===typeof e)&&(e={data:e}),"string"===typeof e.data&&(e=Object.assign({},e,{data:(n=e.data,aE("string"===typeof n),n=jE+n,new Promise(((t,e)=>{try{const i=new Image;i.onload=()=>t(i),i.onerror=()=>e(new Error("Could not load image ".concat(n,"."))),i.crossOrigin=r&&r.crossOrigin||"anonymous",i.src=n}catch(i){e(i)}})))})),super(t,Object.assign({},e,{target:3553})),this.initialize(e),Object.seal(this)}}const RE="EXT_color_buffer_float",DE={33189:{bpp:2},33190:{gl2:!0,bpp:3},36012:{gl2:!0,bpp:4},36168:{bpp:1},34041:{bpp:4},35056:{gl2:!0,bpp:4},36013:{gl2:!0,bpp:5},32854:{bpp:2},36194:{bpp:2},32855:{bpp:2},33321:{gl2:!0,bpp:1},33330:{gl2:!0,bpp:1},33329:{gl2:!0,bpp:1},33332:{gl2:!0,bpp:2},33331:{gl2:!0,bpp:2},33334:{gl2:!0,bpp:4},33333:{gl2:!0,bpp:4},33323:{gl2:!0,bpp:2},33336:{gl2:!0,bpp:2},33335:{gl2:!0,bpp:2},33338:{gl2:!0,bpp:4},33337:{gl2:!0,bpp:4},33340:{gl2:!0,bpp:8},33339:{gl2:!0,bpp:8},32849:{gl2:!0,bpp:3},32856:{gl2:!0,bpp:4},32857:{gl2:!0,bpp:4},36220:{gl2:!0,bpp:4},36238:{gl2:!0,bpp:4},36975:{gl2:!0,bpp:4},36214:{gl2:!0,bpp:8},36232:{gl2:!0,bpp:8},36226:{gl2:!0,bpp:16},36208:{gl2:!0,bpp:16},33325:{gl2:RE,bpp:2},33327:{gl2:RE,bpp:4},34842:{gl2:RE,bpp:8},33326:{gl2:RE,bpp:4},33328:{gl2:RE,bpp:8},34836:{gl2:RE,bpp:16},35898:{gl2:RE,bpp:4}};class BE extends mE{get[Symbol.toStringTag](){return"Renderbuffer"}static isSupported(t){let{format:e}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{format:null};return!e||function(t,e,n){const r=n[e];if(!r)return!1;const i=tS(t)&&r.gl2||r.gl1;return"string"===typeof i?t.getExtension(i):i}(t,e,DE)}static getSamplesForFormat(t,e){let{format:n}=e;return t.getInternalformatParameter(36161,n,32937)}constructor(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};super(t,e),this.initialize(e),Object.seal(this)}initialize(t){let{format:e,width:n=1,height:r=1,samples:i=0}=t;return aE(e,"Needs format"),this._trackDeallocatedMemory(),this.gl.bindRenderbuffer(36161,this.handle),0!==i&&tS(this.gl)?this.gl.renderbufferStorageMultisample(36161,i,e,n,r):this.gl.renderbufferStorage(36161,e,n,r),this.format=e,this.width=n,this.height=r,this.samples=i,this._trackAllocatedMemory(this.width*this.height*(this.samples||1)*DE[this.format].bpp),this}resize(t){let{width:e,height:n}=t;return e!==this.width||n!==this.height?this.initialize({width:e,height:n,format:this.format,samples:this.samples}):this}_createHandle(){return this.gl.createRenderbuffer()}_deleteHandle(){this.gl.deleteRenderbuffer(this.handle),this._trackDeallocatedMemory()}_bindHandle(t){this.gl.bindRenderbuffer(36161,t)}_syncHandle(t){this.format=this.getParameter(36164),this.width=this.getParameter(36162),this.height=this.getParameter(36163),this.samples=this.getParameter(36011)}_getParameter(t){this.gl.bindRenderbuffer(36161,this.handle);return this.gl.getRenderbufferParameter(36161,t)}}const FE=6144,NE="clear: bad arguments";function UE(t){let{framebuffer:e=null,color:n=null,depth:r=null,stencil:i=null}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const o={};e&&(o.framebuffer=e);let a=0;n&&(a|=16384,!0!==n&&(o.clearColor=n)),r&&(a|=256,!0!==r&&(o.clearDepth=r)),i&&(a|=1024,!0!==r&&(o.clearStencil=r)),aE(0!==a,NE),GS(t,o,(()=>{t.clear(a)}))}const VE=[34069,34070,34071,34072,34073,34074];class WE extends LE{get[Symbol.toStringTag](){return"TextureCube"}constructor(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};eS(t),super(t,Object.assign({},e,{target:34067})),this.initialize(e),Object.seal(this)}initialize(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{mipmaps:e=!0,parameters:n={}}=t;return this.opts=t,this.setCubeMapImageData(t).then((()=>{this.loaded=!0,e&&this.generateMipmap(t),this.setParameters(n)})),this}subImage(t){let{face:e,data:n,x:r=0,y:i=0,mipmapLevel:o=0}=t;return this._subImage({target:e,data:n,x:r,y:i,mipmapLevel:o})}async setCubeMapImageData(t){let{width:e,height:n,pixels:r,data:i,border:o=0,format:a=6408,type:s=5121}=t;const{gl:l}=this,c=r||i,u=await Promise.all(VE.map((t=>{const e=c[t];return Promise.all(Array.isArray(e)?e:[e])})));this.bind(),VE.forEach(((t,r)=>{u[r].length>1&&!1!==this.opts.mipmaps&&Yw.warn("".concat(this.id," has mipmap and multiple LODs."))(),u[r].forEach(((r,i)=>{e&&n?l.texImage2D(t,i,a,e,n,o,a,s,r):l.texImage2D(t,i,a,a,s,r)}))})),this.unbind()}setImageDataForFace(t){const{face:e,width:n,height:r,pixels:i,data:o,border:a=0,format:s=6408,type:l=5121}=t,{gl:c}=this,u=i||o;return this.bind(),u instanceof Promise?u.then((n=>this.setImageDataForFace(Object.assign({},t,{face:e,data:n,pixels:n})))):this.width||this.height?c.texImage2D(e,0,s,n,r,a,s,l,u):c.texImage2D(e,0,s,s,l,u),this}}WE.FACES=VE;class GE extends LE{get[Symbol.toStringTag](){return"Texture3D"}static isSupported(t){return tS(t)}constructor(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};nS(t),e=Object.assign({depth:1},e,{target:32879,unpackFlipY:!1}),super(t,e),this.initialize(e),Object.seal(this)}setImageData(t){let{level:e=0,dataFormat:n=6408,width:r,height:i,depth:o=1,border:a=0,format:s,type:l=5121,offset:c=0,data:u,parameters:h={}}=t;if(this._trackDeallocatedMemory("Texture"),this.gl.bindTexture(this.target,this.handle),GS(this.gl,h,(()=>{ArrayBuffer.isView(u)&&this.gl.texImage3D(this.target,e,n,r,i,o,a,s,l,u),u instanceof AE&&(this.gl.bindBuffer(35052,u.handle),this.gl.texImage3D(this.target,e,n,r,i,o,a,s,l,c))})),u&&u.byteLength)this._trackAllocatedMemory(u.byteLength,"Texture");else{const t=PE[this.dataFormat]||4,e=kE[this.type]||1;this._trackAllocatedMemory(this.width*this.height*this.depth*t*e,"Texture")}return this.loaded=!0,this}}function qE(t,e){const{gl:n,width:r,height:i,id:o}=t;return new KE(n,Object.assign({},e,{id:"framebuffer-for-".concat(o),width:r,height:i,attachments:{36064:t}}))}function HE(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{sourceX:n=0,sourceY:r=0,sourceFormat:i=6408}=e;let{sourceAttachment:o=36064,target:a=null,sourceWidth:s,sourceHeight:l,sourceType:c}=e;const{framebuffer:u,deleteFramebuffer:h}=XE(t);aE(u);const{gl:d,handle:f,attachments:p}=u;s=s||u.width,l=l||u.height,36064===o&&null===f&&(o=1028),aE(p[o]),c=c||p[o].type,a=function(t,e,n,r,i){if(t)return t;e=e||5121;const o=vE(e,{clamped:!1}),a=function(t){switch(t){case 6406:case 33326:case 6403:return 1;case 33328:case 33319:return 2;case 6407:case 34837:return 3;case 6408:case 34836:return 4;default:return aE(!1),0}}(n);return new o(r*i*a)}(a,c,i,s,l),c=c||yE(a);const m=d.bindFramebuffer(36160,f);return d.readPixels(n,r,s,l,i,c,a),d.bindFramebuffer(36160,m||null),h&&u.delete(),a}function ZE(t){let{sourceAttachment:e=36064,targetMaxHeight:n=Number.MAX_SAFE_INTEGER}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=HE(t,{sourceAttachment:e}),{width:i,height:o}=t;for(;o>n;)({data:r,width:i,height:o}=_E({data:r,width:i,height:o}));!function(t){let{data:e,width:n,height:r,bytesPerPixel:i=4,temp:o}=t;const a=n*i;o=o||new Uint8Array(a);for(let s=0;s<r/2;++s){const t=s*a,n=(r-s-1)*a;o.set(e.subarray(t,t+a)),e.copyWithin(t,n,n+a),e.set(o,n)}}({data:r,width:i,height:o});const a=document.createElement("canvas");a.width=i,a.height=o;const s=a.getContext("2d"),l=s.createImageData(i,o);return l.data.set(r),s.putImageData(l,0,0),a.toDataURL()}function XE(t){return t instanceof KE?{framebuffer:t,deleteFramebuffer:!1}:{framebuffer:qE(t),deleteFramebuffer:!0}}const YE="Multiple render targets not supported";class KE extends mE{get[Symbol.toStringTag](){return"Framebuffer"}static isSupported(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{colorBufferFloat:n,colorBufferHalfFloat:r}=e;let i=!0;return n&&(i=Boolean(t.getExtension("EXT_color_buffer_float")||t.getExtension("WEBGL_color_buffer_float")||t.getExtension("OES_texture_float"))),r&&(i=i&&Boolean(t.getExtension("EXT_color_buffer_float")||t.getExtension("EXT_color_buffer_half_float"))),i}static getDefaultFramebuffer(t){return t.luma=t.luma||{},t.luma.defaultFramebuffer=t.luma.defaultFramebuffer||new KE(t,{id:"default-framebuffer",handle:null,attachments:{}}),t.luma.defaultFramebuffer}get MAX_COLOR_ATTACHMENTS(){const t=nS(this.gl);return t.getParameter(t.MAX_COLOR_ATTACHMENTS)}get MAX_DRAW_BUFFERS(){const t=nS(this.gl);return t.getParameter(t.MAX_DRAW_BUFFERS)}constructor(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};super(t,e),this.width=null,this.height=null,this.attachments={},this.readBuffer=36064,this.drawBuffers=[36064],this.ownResources=[],this.initialize(e),Object.seal(this)}get color(){return this.attachments[36064]||null}get texture(){return this.attachments[36064]||null}get depth(){return this.attachments[36096]||this.attachments[33306]||null}get stencil(){return this.attachments[36128]||this.attachments[33306]||null}initialize(t){let{width:e=1,height:n=1,attachments:r=null,color:i=!0,depth:o=!0,stencil:a=!1,check:s=!0,readBuffer:l,drawBuffers:c}=t;if(aE(e>=0&&n>=0,"Width and height need to be integers"),this.width=e,this.height=n,r)for(const u in r){const t=r[u];(Array.isArray(t)?t[0]:t).resize({width:e,height:n})}else r=this._createDefaultAttachments(i,o,a,e,n);this.update({clearAttachments:!0,attachments:r,readBuffer:l,drawBuffers:c}),r&&s&&this.checkStatus()}delete(){for(const t of this.ownResources)t.delete();return super.delete(),this}update(t){let{attachments:e={},readBuffer:n,drawBuffers:r,clearAttachments:i=!1,resizeAttachments:o=!0}=t;this.attach(e,{clearAttachments:i,resizeAttachments:o});const{gl:a}=this,s=a.bindFramebuffer(36160,this.handle);return n&&this._setReadBuffer(n),r&&this._setDrawBuffers(r),a.bindFramebuffer(36160,s||null),this}resize(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{width:e,height:n}=t;if(null===this.handle)return aE(void 0===e&&void 0===n),this.width=this.gl.drawingBufferWidth,this.height=this.gl.drawingBufferHeight,this;void 0===e&&(e=this.gl.drawingBufferWidth),void 0===n&&(n=this.gl.drawingBufferHeight),e!==this.width&&n!==this.height&&Yw.log(2,"Resizing framebuffer ".concat(this.id," to ").concat(e,"x").concat(n))();for(const r in this.attachments)this.attachments[r].resize({width:e,height:n});return this.width=e,this.height=n,this}attach(t){let{clearAttachments:e=!1,resizeAttachments:n=!0}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const r={};e&&Object.keys(this.attachments).forEach((t=>{r[t]=null})),Object.assign(r,t);const i=this.gl.bindFramebuffer(36160,this.handle);for(const o in r){aE(void 0!==o,"Misspelled framebuffer binding point?");const t=Number(o),e=r[t];let i=e;if(i)if(i instanceof BE)this._attachRenderbuffer({attachment:t,renderbuffer:i});else if(Array.isArray(e)){const[n,r=0,o=0]=e;i=n,this._attachTexture({attachment:t,texture:n,layer:r,level:o})}else this._attachTexture({attachment:t,texture:i,layer:0,level:0});else this._unattach(t);n&&i&&i.resize({width:this.width,height:this.height})}this.gl.bindFramebuffer(36160,i||null),Object.assign(this.attachments,t),Object.keys(this.attachments).filter((t=>!this.attachments[t])).forEach((t=>{delete this.attachments[t]}))}checkStatus(){const{gl:t}=this,e=this.getStatus();if(36053!==e)throw new Error(function(t){return(KE.STATUS||{})[t]||"Framebuffer error ".concat(t)}(e));return this}getStatus(){const{gl:t}=this,e=t.bindFramebuffer(36160,this.handle),n=t.checkFramebufferStatus(36160);return t.bindFramebuffer(36160,e||null),n}clear(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{color:e,depth:n,stencil:r,drawBuffers:i=[]}=t,o=this.gl.bindFramebuffer(36160,this.handle);return(e||n||r)&&UE(this.gl,{color:e,depth:n,stencil:r}),i.forEach(((t,e)=>{!function(t){let{framebuffer:e=null,buffer:n=FE,drawBuffer:r=0,value:i=[0,0,0,0]}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};nS(t),GS(t,{framebuffer:e},(()=>{switch(n){case FE:switch(i.constructor){case Int32Array:t.clearBufferiv(n,r,i);break;case Uint32Array:t.clearBufferuiv(n,r,i);break;case Float32Array:default:t.clearBufferfv(n,r,i)}break;case 6145:t.clearBufferfv(6145,0,[i]);break;case 6146:t.clearBufferiv(6146,0,[i]);break;case 34041:const[e,o]=i;t.clearBufferfi(34041,0,e,o);break;default:aE(!1,NE)}}))}(this.gl,{drawBuffer:e,value:t})})),this.gl.bindFramebuffer(36160,o||null),this}readPixels(){return Yw.error("Framebuffer.readPixels() is no logner supported, use readPixelsToArray(framebuffer)")(),null}readPixelsToBuffer(){return Yw.error("Framebuffer.readPixelsToBuffer()is no logner supported, use readPixelsToBuffer(framebuffer)")(),null}copyToDataUrl(){return Yw.error("Framebuffer.copyToDataUrl() is no logner supported, use copyToDataUrl(framebuffer)")(),null}copyToImage(){return Yw.error("Framebuffer.copyToImage() is no logner supported, use copyToImage(framebuffer)")(),null}copyToTexture(){return Yw.error("Framebuffer.copyToTexture({...}) is no logner supported, use copyToTexture(source, target, opts})")(),null}blit(){return Yw.error("Framebuffer.blit({...}) is no logner supported, use blit(source, target, opts)")(),null}invalidate(t){let{attachments:e=[],x:n=0,y:r=0,width:i,height:o}=t;const a=nS(this.gl),s=a.bindFramebuffer(36008,this.handle);return 0===n&&0===r&&void 0===i&&void 0===o?a.invalidateFramebuffer(36008,e):a.invalidateFramebuffer(36008,e,n,r,i,o),a.bindFramebuffer(36008,s),this}getAttachmentParameter(t,e,n){let r=this._getAttachmentParameterFallback(e);return null===r&&(this.gl.bindFramebuffer(36160,this.handle),r=this.gl.getFramebufferAttachmentParameter(36160,t,e),this.gl.bindFramebuffer(36160,null)),n&&r>1e3&&(r=lE(this.gl,r)),r}getAttachmentParameters(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:36064,e=arguments.length>1?arguments[1]:void 0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.constructor.ATTACHMENT_PARAMETERS||[];const r={};for(const i of n){r[e?lE(this.gl,i):i]=this.getAttachmentParameter(t,i,e)}return r}getParameters(){let t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];const e=Object.keys(this.attachments),n={};for(const r of e){const e=Number(r);n[t?lE(this.gl,e):e]=this.getAttachmentParameters(e,t)}return n}show(){return"undefined"!==typeof window&&window.open(ZE(this),"luma-debug-texture"),this}log(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";if(t>Yw.level||"undefined"===typeof window)return this;e=e||"Framebuffer ".concat(this.id);const n=ZE(this,{targetMaxHeight:100});return Yw.image({logLevel:t,message:e,image:n},e)(),this}bind(){let{target:t=36160}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.gl.bindFramebuffer(t,this.handle),this}unbind(){let{target:t=36160}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.gl.bindFramebuffer(t,null),this}_createDefaultAttachments(t,e,n,r,i){let o=null;return t&&(o=o||{},o[36064]=new zE(this.gl,{id:"".concat(this.id,"-color0"),pixels:null,format:6408,type:5121,width:r,height:i,mipmaps:!1,parameters:{10241:9729,10240:9729,10242:33071,10243:33071}}),this.ownResources.push(o[36064])),e&&n?(o=o||{},o[33306]=new BE(this.gl,{id:"".concat(this.id,"-depth-stencil"),format:35056,width:r,height:111}),this.ownResources.push(o[33306])):e?(o=o||{},o[36096]=new BE(this.gl,{id:"".concat(this.id,"-depth"),format:33189,width:r,height:i}),this.ownResources.push(o[36096])):n&&aE(!1),o}_unattach(t){const e=this.attachments[t];e&&(e instanceof BE?this.gl.framebufferRenderbuffer(36160,t,36161,null):this.gl.framebufferTexture2D(36160,t,3553,null,0),delete this.attachments[t])}_attachRenderbuffer(t){let{attachment:e=36064,renderbuffer:n}=t;const{gl:r}=this;r.framebufferRenderbuffer(36160,e,36161,n.handle),this.attachments[e]=n}_attachTexture(t){let{attachment:e=36064,texture:n,layer:r,level:i}=t;const{gl:o}=this;switch(o.bindTexture(n.target,n.handle),n.target){case 35866:case 32879:nS(o).framebufferTextureLayer(36160,e,n.target,i,r);break;case 34067:const t=function(t){return t<34069?t+34069:t}(r);o.framebufferTexture2D(36160,e,t,n.handle,i);break;case 3553:o.framebufferTexture2D(36160,e,3553,n.handle,i);break;default:aE(!1,"Illegal texture type")}o.bindTexture(n.target,null),this.attachments[e]=n}_setReadBuffer(t){const e=tS(n=this.gl)?n:null;var n;e?e.readBuffer(t):aE(36064===t||1029===t,YE),this.readBuffer=t}_setDrawBuffers(t){const{gl:e}=this,n=nS(e);if(n)n.drawBuffers(t);else{const n=e.getExtension("WEBGL_draw_buffers");n?n.drawBuffersWEBGL(t):aE(1===t.length&&(36064===t[0]||1029===t[0]),YE)}this.drawBuffers=t}_getAttachmentParameterFallback(t){const e=function(t){t.luma=t.luma||{},t.luma.caps=t.luma.caps||{};for(const e in _T)void 0===t.luma.caps[e]&&(t.luma.caps[e]=wT(t,e));return t.luma.caps}(this.gl);switch(t){case 36052:return e.WEBGL2?null:0;case 33298:case 33299:case 33300:case 33301:case 33302:case 33303:return e.WEBGL2?null:8;case 33297:return e.WEBGL2?null:5125;case 33296:return e.WEBGL2||e.EXT_sRGB?null:9729;default:return null}}_createHandle(){return this.gl.createFramebuffer()}_deleteHandle(){this.gl.deleteFramebuffer(this.handle)}_bindHandle(t){return this.gl.bindFramebuffer(36160,t)}}KE.ATTACHMENT_PARAMETERS=[36049,36048,33296,33298,33299,33300,33301,33302,33303];const $E="WEBGL2",JE="VERTEX_ARRAY_OBJECT",QE="TIMER_QUERY",tT="INSTANCED_RENDERING",eT="MULTIPLE_RENDER_TARGETS",nT="ELEMENT_INDEX_UINT32",rT="BLEND_EQUATION_MINMAX",iT="FLOAT_BLEND",oT="COLOR_ENCODING_SRGB",aT="TEXTURE_DEPTH",sT="TEXTURE_FLOAT",lT="TEXTURE_HALF_FLOAT",cT="TEXTURE_FILTER_LINEAR_FLOAT",uT="TEXTURE_FILTER_LINEAR_HALF_FLOAT",hT="TEXTURE_FILTER_ANISOTROPIC",dT="COLOR_ATTACHMENT_RGBA32F",fT="COLOR_ATTACHMENT_FLOAT",pT="COLOR_ATTACHMENT_HALF_FLOAT",mT="GLSL_FRAG_DATA",gT="GLSL_FRAG_DEPTH",yT="GLSL_DERIVATIVES",vT="GLSL_TEXTURE_LOD";const _T={[$E]:[!1,!0],[JE]:["OES_vertex_array_object",!0],[QE]:["EXT_disjoint_timer_query","EXT_disjoint_timer_query_webgl2"],[tT]:["ANGLE_instanced_arrays",!0],[eT]:["WEBGL_draw_buffers",!0],[nT]:["OES_element_index_uint",!0],[rT]:["EXT_blend_minmax",!0],[iT]:["EXT_float_blend"],[oT]:["EXT_sRGB",!0],[aT]:["WEBGL_depth_texture",!0],[sT]:["OES_texture_float",!0],[lT]:["OES_texture_half_float",!0],[cT]:["OES_texture_float_linear"],[uT]:["OES_texture_half_float_linear"],[hT]:["EXT_texture_filter_anisotropic"],[dT]:[function(t){const e=new zE(t,{format:6408,type:5126,dataFormat:6408}),n=new KE(t,{id:"test-framebuffer",check:!1,attachments:{36064:e}}),r=n.getStatus();return e.delete(),n.delete(),36053===r},"EXT_color_buffer_float"],[fT]:[!1,"EXT_color_buffer_float"],[pT]:["EXT_color_buffer_half_float"],[mT]:["WEBGL_draw_buffers",!0],[gT]:["EXT_frag_depth",!0],[yT]:["OES_standard_derivatives",!0],[vT]:["EXT_shader_texture_lod",!0]},bT=2;function xT(t,e){return(e=Array.isArray(e)?e:[e]).every((e=>wT(t,e)))}function wT(t,e){return t.luma=t.luma||{},t.luma.caps=t.luma.caps||{},void 0===t.luma.caps[e]&&(t.luma.caps[e]=function(t,e){const n=_T[e];let r;aE(n,e);const i=tS(t)&&n[1]||n[0];if("function"===typeof i)r=i(t);else if(Array.isArray(i)){r=!0;for(const e of i)r=r&&Boolean(t.getExtension(e))}else"string"===typeof i?r=Boolean(t.getExtension(i)):"boolean"===typeof i?r=i:aE(!1);return r}(t,e)),t.luma.caps[e]||Yw.log(bT,"Feature: ".concat(e," not supported"))(),t.luma.caps[e]}class ST{constructor(t,e){ww(this,"opts",void 0),ww(this,"source",void 0),this.opts=e,this.source=t}get value(){return this.source.value}getValue(){const t=this.source.getBuffer(),e=this.getAccessor();if(t)return[t,e];const{value:n}=this.source,{size:r}=e;let i=n;if(n&&n.length!==r){i=new Float32Array(r);const t=e.elementOffset||0;for(let e=0;e<r;++e)i[e]=n[t+e]}return i}getAccessor(){return{...this.source.getAccessor(),...this.opts}}}const ET=new class{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};ww(this,"_pool",[]),ww(this,"opts",{overAlloc:2,poolSize:100}),this.setOptions(t)}setOptions(t){Object.assign(this.opts,t)}allocate(t,e,n){let{size:r=1,type:i,padding:o=0,copy:a=!1,initialize:s=!1,maxCount:l}=n;const c=i||t&&t.constructor||Float32Array,u=e*r+o;if(ArrayBuffer.isView(t)){if(u<=t.length)return t;if(u*t.BYTES_PER_ELEMENT<=t.buffer.byteLength)return new c(t.buffer,0,u)}let h=1/0;l&&(h=l*r+o);const d=this._allocate(c,u,s,h);return t&&a?d.set(t):s||d.fill(0,0,4),this._release(t),d}release(t){this._release(t)}_allocate(t,e,n,r){let i=Math.max(Math.ceil(e*this.opts.overAlloc),1);i>r&&(i=r);const o=this._pool,a=t.BYTES_PER_ELEMENT*i,s=o.findIndex((t=>t.byteLength>=a));if(s>=0){const e=new t(o.splice(s,1)[0],0,i);return n&&e.fill(0),e}return new t(i)}_release(t){if(!ArrayBuffer.isView(t))return;const e=this._pool,{buffer:n}=t,{byteLength:r}=n,i=e.findIndex((t=>t.byteLength>=r));i<0?e.push(n):(i>0||e.length<this.opts.poolSize)&&e.splice(i,0,n),e.length>this.opts.poolSize&&e.shift()}},TT=(Math.PI,Math.PI,{EPSILON:1e-12,debug:!1,precision:4,printTypes:!1,printDegrees:!1,printRowMajor:!0});function MT(t){let{precision:e=TT.precision}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return t=function(t){return Math.round(t/TT.EPSILON)*TT.EPSILON}(t),"".concat(parseFloat(t.toPrecision(e)))}function AT(t){return Array.isArray(t)||ArrayBuffer.isView(t)&&!(t instanceof DataView)}function CT(t,e,n){return IT(t,(t=>Math.max(e,Math.min(n,t))))}function PT(t,e,n){return AT(t)?t.map(((t,r)=>PT(t,e[r],n))):n*e+(1-n)*t}function kT(t,e,n){const r=TT.EPSILON;n&&(TT.EPSILON=n);try{if(t===e)return!0;if(AT(t)&&AT(e)){if(t.length!==e.length)return!1;for(let n=0;n<t.length;++n)if(!kT(t[n],e[n]))return!1;return!0}return t&&t.equals?t.equals(e):e&&e.equals?e.equals(t):"number"===typeof t&&"number"===typeof e&&Math.abs(t-e)<=TT.EPSILON*Math.max(1,Math.abs(t),Math.abs(e))}finally{TT.EPSILON=r}}function IT(t,e,n){if(AT(t)){const r=t;n=n||function(t){return t.clone?t.clone():new Array(t.length)}(r);for(let i=0;i<n.length&&i<r.length;++i)n[i]=e(t[i],i,n);return n}return e(t)}class OT extends(function(t){function e(){var e=Reflect.construct(t,Array.from(arguments));return Object.setPrototypeOf(e,Object.getPrototypeOf(this)),e}return e.prototype=Object.create(t.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t,e}(Array)){clone(){return(new this.constructor).copy(this)}fromArray(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;for(let n=0;n<this.ELEMENTS;++n)this[n]=t[n+e];return this.check()}toArray(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;for(let n=0;n<this.ELEMENTS;++n)t[e+n]=this[n];return t}from(t){return Array.isArray(t)?this.copy(t):this.fromObject(t)}to(t){return t===this?this:AT(t)?this.toArray(t):this.toObject(t)}toTarget(t){return t?this.to(t):this}toFloat32Array(){return new Float32Array(this)}toString(){return this.formatString(TT)}formatString(t){let e="";for(let n=0;n<this.ELEMENTS;++n)e+=(n>0?", ":"")+MT(this[n],t);return"".concat(t.printTypes?this.constructor.name:"","[").concat(e,"]")}equals(t){if(!t||this.length!==t.length)return!1;for(let e=0;e<this.ELEMENTS;++e)if(!kT(this[e],t[e]))return!1;return!0}exactEquals(t){if(!t||this.length!==t.length)return!1;for(let e=0;e<this.ELEMENTS;++e)if(this[e]!==t[e])return!1;return!0}negate(){for(let t=0;t<this.ELEMENTS;++t)this[t]=-this[t];return this.check()}lerp(t,e,n){if(void 0===n)return this.lerp(this,t,e);for(let r=0;r<this.ELEMENTS;++r){const i=t[r];this[r]=i+n*(e[r]-i)}return this.check()}min(t){for(let e=0;e<this.ELEMENTS;++e)this[e]=Math.min(t[e],this[e]);return this.check()}max(t){for(let e=0;e<this.ELEMENTS;++e)this[e]=Math.max(t[e],this[e]);return this.check()}clamp(t,e){for(let n=0;n<this.ELEMENTS;++n)this[n]=Math.min(Math.max(this[n],t[n]),e[n]);return this.check()}add(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];for(const r of e)for(let t=0;t<this.ELEMENTS;++t)this[t]+=r[t];return this.check()}subtract(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];for(const r of e)for(let t=0;t<this.ELEMENTS;++t)this[t]-=r[t];return this.check()}scale(t){if("number"===typeof t)for(let e=0;e<this.ELEMENTS;++e)this[e]*=t;else for(let e=0;e<this.ELEMENTS&&e<t.length;++e)this[e]*=t[e];return this.check()}multiplyByScalar(t){for(let e=0;e<this.ELEMENTS;++e)this[e]*=t;return this.check()}check(){if(TT.debug&&!this.validate())throw new Error("math.gl: ".concat(this.constructor.name," some fields set to invalid numbers'"));return this}validate(){let t=this.length===this.ELEMENTS;for(let e=0;e<this.ELEMENTS;++e)t=t&&Number.isFinite(this[e]);return t}sub(t){return this.subtract(t)}setScalar(t){for(let e=0;e<this.ELEMENTS;++e)this[e]=t;return this.check()}addScalar(t){for(let e=0;e<this.ELEMENTS;++e)this[e]+=t;return this.check()}subScalar(t){return this.addScalar(-t)}multiplyScalar(t){for(let e=0;e<this.ELEMENTS;++e)this[e]*=t;return this.check()}divideScalar(t){return this.multiplyByScalar(1/t)}clampScalar(t,e){for(let n=0;n<this.ELEMENTS;++n)this[n]=Math.min(Math.max(this[n],t),e);return this.check()}get elements(){return this}}function LT(t){if(!Number.isFinite(t))throw new Error("Invalid number ".concat(t));return t}function jT(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";if(TT.debug&&!function(t,e){if(t.length!==e)return!1;for(let n=0;n<t.length;++n)if(!Number.isFinite(t[n]))return!1;return!0}(t,e))throw new Error("math.gl: ".concat(n," some fields set to invalid numbers'"));return t}function zT(t,e){if(!t)throw new Error("math.gl assertion ".concat(e))}class RT extends OT{get x(){return this[0]}set x(t){this[0]=LT(t)}get y(){return this[1]}set y(t){this[1]=LT(t)}len(){return Math.sqrt(this.lengthSquared())}magnitude(){return this.len()}lengthSquared(){let t=0;for(let e=0;e<this.ELEMENTS;++e)t+=this[e]*this[e];return t}magnitudeSquared(){return this.lengthSquared()}distance(t){return Math.sqrt(this.distanceSquared(t))}distanceSquared(t){let e=0;for(let n=0;n<this.ELEMENTS;++n){const r=this[n]-t[n];e+=r*r}return LT(e)}dot(t){let e=0;for(let n=0;n<this.ELEMENTS;++n)e+=this[n]*t[n];return LT(e)}normalize(){const t=this.magnitude();if(0!==t)for(let e=0;e<this.ELEMENTS;++e)this[e]/=t;return this.check()}multiply(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];for(const r of e)for(let t=0;t<this.ELEMENTS;++t)this[t]*=r[t];return this.check()}divide(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];for(const r of e)for(let t=0;t<this.ELEMENTS;++t)this[t]/=r[t];return this.check()}lengthSq(){return this.lengthSquared()}distanceTo(t){return this.distance(t)}distanceToSquared(t){return this.distanceSquared(t)}getComponent(t){return zT(t>=0&&t<this.ELEMENTS,"index is out of range"),LT(this[t])}setComponent(t,e){return zT(t>=0&&t<this.ELEMENTS,"index is out of range"),this[t]=e,this.check()}addVectors(t,e){return this.copy(t).add(e)}subVectors(t,e){return this.copy(t).subtract(e)}multiplyVectors(t,e){return this.copy(t).multiply(e)}addScaledVector(t,e){return this.add(new this.constructor(t).multiplyScalar(e))}}var DT=1e-6,BT="undefined"!==typeof Float32Array?Float32Array:Array;Math.random;Math.PI;function FT(){var t=new BT(3);return BT!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0),t}function NT(t,e,n){var r=new BT(3);return r[0]=t,r[1]=e,r[2]=n,r}function UT(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}function VT(t,e,n){var r=e[0],i=e[1],o=e[2],a=n[0],s=n[1],l=n[2];return t[0]=i*l-o*s,t[1]=o*a-r*l,t[2]=r*s-i*a,t}function WT(t,e,n){var r=e[0],i=e[1],o=e[2],a=n[3]*r+n[7]*i+n[11]*o+n[15];return a=a||1,t[0]=(n[0]*r+n[4]*i+n[8]*o+n[12])/a,t[1]=(n[1]*r+n[5]*i+n[9]*o+n[13])/a,t[2]=(n[2]*r+n[6]*i+n[10]*o+n[14])/a,t}function GT(t,e,n){var r=e[0],i=e[1],o=e[2];return t[0]=r*n[0]+i*n[3]+o*n[6],t[1]=r*n[1]+i*n[4]+o*n[7],t[2]=r*n[2]+i*n[5]+o*n[8],t}function qT(t,e,n){var r=n[0],i=n[1],o=n[2],a=n[3],s=e[0],l=e[1],c=e[2],u=i*c-o*l,h=o*s-r*c,d=r*l-i*s,f=i*d-o*h,p=o*u-r*d,m=r*h-i*u,g=2*a;return u*=g,h*=g,d*=g,f*=2,p*=2,m*=2,t[0]=s+u+f,t[1]=l+h+p,t[2]=c+d+m,t}Math.hypot||(Math.hypot=function(){for(var t=0,e=arguments.length;e--;)t+=arguments[e]*arguments[e];return Math.sqrt(t)});var HT=function(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t},ZT=function(t){var e=t[0],n=t[1],r=t[2];return Math.hypot(e,n,r)},XT=function(t){var e=t[0],n=t[1],r=t[2];return e*e+n*n+r*r};!function(){var t=FT()}();function YT(t,e,n){const r=e[0],i=e[1],o=e[2],a=n[3]*r+n[7]*i+n[11]*o||1;return t[0]=(n[0]*r+n[4]*i+n[8]*o)/a,t[1]=(n[1]*r+n[5]*i+n[9]*o)/a,t[2]=(n[2]*r+n[6]*i+n[10]*o)/a,t}function KT(t,e,n){const r=e[0],i=e[1],o=e[2];return t[0]=n[0]*r+n[3]*i+n[6]*o,t[1]=n[1]*r+n[4]*i+n[7]*o,t[2]=n[2]*r+n[5]*i+n[8]*o,t[3]=e[3],t}const $T=[0,0,0];let JT;class QT extends RT{static get ZERO(){return JT||(JT=new QT(0,0,0),Object.freeze(JT)),JT}constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;super(-0,-0,-0),1===arguments.length&&AT(t)?this.copy(t):(TT.debug&&(LT(t),LT(e),LT(n)),this[0]=t,this[1]=e,this[2]=n)}set(t,e,n){return this[0]=t,this[1]=e,this[2]=n,this.check()}copy(t){return this[0]=t[0],this[1]=t[1],this[2]=t[2],this.check()}fromObject(t){return TT.debug&&(LT(t.x),LT(t.y),LT(t.z)),this[0]=t.x,this[1]=t.y,this[2]=t.z,this.check()}toObject(t){return t.x=this[0],t.y=this[1],t.z=this[2],t}get ELEMENTS(){return 3}get z(){return this[2]}set z(t){this[2]=LT(t)}angle(t){return function(t,e){var n=t[0],r=t[1],i=t[2],o=e[0],a=e[1],s=e[2],l=Math.sqrt(n*n+r*r+i*i)*Math.sqrt(o*o+a*a+s*s),c=l&&UT(t,e)/l;return Math.acos(Math.min(Math.max(c,-1),1))}(this,t)}cross(t){return VT(this,this,t),this.check()}rotateX(t){let{radians:e,origin:n=$T}=t;return function(t,e,n,r){var i=[],o=[];i[0]=e[0]-n[0],i[1]=e[1]-n[1],i[2]=e[2]-n[2],o[0]=i[0],o[1]=i[1]*Math.cos(r)-i[2]*Math.sin(r),o[2]=i[1]*Math.sin(r)+i[2]*Math.cos(r),t[0]=o[0]+n[0],t[1]=o[1]+n[1],t[2]=o[2]+n[2]}(this,this,n,e),this.check()}rotateY(t){let{radians:e,origin:n=$T}=t;return function(t,e,n,r){var i=[],o=[];i[0]=e[0]-n[0],i[1]=e[1]-n[1],i[2]=e[2]-n[2],o[0]=i[2]*Math.sin(r)+i[0]*Math.cos(r),o[1]=i[1],o[2]=i[2]*Math.cos(r)-i[0]*Math.sin(r),t[0]=o[0]+n[0],t[1]=o[1]+n[1],t[2]=o[2]+n[2]}(this,this,n,e),this.check()}rotateZ(t){let{radians:e,origin:n=$T}=t;return function(t,e,n,r){var i=[],o=[];i[0]=e[0]-n[0],i[1]=e[1]-n[1],i[2]=e[2]-n[2],o[0]=i[0]*Math.cos(r)-i[1]*Math.sin(r),o[1]=i[0]*Math.sin(r)+i[1]*Math.cos(r),o[2]=i[2],t[0]=o[0]+n[0],t[1]=o[1]+n[1],t[2]=o[2]+n[2]}(this,this,n,e),this.check()}transform(t){return this.transformAsPoint(t)}transformAsPoint(t){return WT(this,this,t),this.check()}transformAsVector(t){return YT(this,this,t),this.check()}transformByMatrix3(t){return GT(this,this,t),this.check()}transformByMatrix2(t){return function(t,e,n){const r=e[0],i=e[1];t[0]=n[0]*r+n[2]*i,t[1]=n[1]*r+n[3]*i,t[2]=e[2]}(this,this,t),this.check()}transformByQuaternion(t){return qT(this,this,t),this.check()}}const tM=new QT;function eM(t,e,n,r){tM.set(t,e,n);const i=tM.len();return{distance:r/i,normal:new QT(-t/i,-e/i,-n/i)}}let nM;function rM(t,e){const{size:n=1,startIndex:r=0}=e,i=void 0!==e.endIndex?e.endIndex:t.length,o=(i-r)/n;nM=ET.allocate(nM,o,{type:Float32Array,size:2*n});let a=r,s=0;for(;a<i;){for(let e=0;e<n;e++){const r=t[a++];nM[s+e]=r,nM[s+e+n]=(l=r)-Math.fround(l)}s+=2*n}var l;return nM.subarray(0,o*n*2)}function iM(t){let e=null,n=!1;for(const r of t)r&&(e?(n||(e=[[e[0][0],e[0][1]],[e[1][0],e[1][1]]],n=!0),e[0][0]=Math.min(e[0][0],r[0][0]),e[0][1]=Math.min(e[0][1],r[0][1]),e[1][0]=Math.max(e[1][0],r[1][0]),e[1][1]=Math.max(e[1][1],r[1][1])):e=r);return e}function oM(t){return t.stride||t.size*t.bytesPerElement}function aM(t,e){e.offset&&Gw.removed("shaderAttribute.offset","vertexOffset, elementOffset")();const n=oM(t),r=(void 0!==e.vertexOffset?e.vertexOffset:t.vertexOffset||0)*n+(e.elementOffset||0)*t.bytesPerElement+(t.offset||0);return{...e,offset:r,stride:n}}class sM{constructor(t,e,n){ww(this,"gl",void 0),ww(this,"id",void 0),ww(this,"size",void 0),ww(this,"settings",void 0),ww(this,"value",void 0),ww(this,"doublePrecision",void 0),ww(this,"_buffer",void 0),ww(this,"state",void 0),this.gl=t,this.id=e.id||"",this.size=e.size||1;const r=e.logicalType||e.type,i=5130===r;let o,{defaultValue:a}=e;a=Number.isFinite(a)?[a]:a||new Array(this.size).fill(0),o=i?5126:!r&&e.isIndexed?t&&function(t,e){return xT(t,e)}(t,nT)?5125:5123:r||5126;let s=function(t){switch(t){case 5126:return Float32Array;case 5130:return Float64Array;case 5123:case 33635:case 32819:case 32820:return Uint16Array;case 5125:return Uint32Array;case 5121:return Uint8ClampedArray;case 5120:return Int8Array;case 5122:return Int16Array;case 5124:return Int32Array;default:throw new Error("Unknown GL type")}}(r||o||5126);this.doublePrecision=i,i&&!1===e.fp64&&(s=Float32Array),this.value=null,this.settings={...e,defaultType:s,defaultValue:a,logicalType:r,type:o,size:this.size,bytesPerElement:s.BYTES_PER_ELEMENT},this.state={...n,externalBuffer:null,bufferAccessor:this.settings,allocatedValue:null,numInstances:0,bounds:null,constant:!1},this._buffer=null}get isConstant(){return this.state.constant}get buffer(){if(!this._buffer){const{isIndexed:t,type:e}=this.settings;this._buffer=new AE(this.gl,{id:this.id,target:t?34963:34962,accessor:{type:e}})}return this._buffer}get byteOffset(){const t=this.getAccessor();return t.vertexOffset?t.vertexOffset*oM(t):0}get numInstances(){return this.state.numInstances}set numInstances(t){this.state.numInstances=t}delete(){this._buffer&&(this._buffer.delete(),this._buffer=null),ET.release(this.state.allocatedValue)}getShaderAttributes(t,e){if(this.doublePrecision){const n={},r=this.value instanceof Float64Array,i=function(t,e){const n=aM(t,e);return{high:n,low:{...n,offset:n.offset+4*t.size}}}(this.getAccessor(),e||{});return n[t]=new ST(this,i.high),n["".concat(t,"64Low")]=r?new ST(this,i.low):new Float32Array(this.size),n}if(e){const n=aM(this.getAccessor(),e);return{[t]:new ST(this,n)}}return{[t]:this}}getBuffer(){return this.state.constant?null:this.state.externalBuffer||this._buffer}getValue(){return this.state.constant?this.value:[this.getBuffer(),this.getAccessor()]}getAccessor(){return this.state.bufferAccessor}getBounds(){if(this.state.bounds)return this.state.bounds;let t=null;if(this.state.constant&&this.value){const e=Array.from(this.value);t=[e,e]}else{const{value:e,numInstances:n,size:r}=this,i=n*r;if(e&&i&&e.length>=i){const n=new Array(r).fill(1/0),o=new Array(r).fill(-1/0);for(let t=0;t<i;)for(let i=0;i<r;i++){const r=e[t++];r<n[i]&&(n[i]=r),r>o[i]&&(o[i]=r)}t=[n,o]}}return this.state.bounds=t,t}setData(t){const{state:e}=this;let n;n=ArrayBuffer.isView(t)?{value:t}:t instanceof AE?{buffer:t}:t;const r={...this.settings,...n};if(e.bufferAccessor=r,e.bounds=null,n.constant){let t=n.value;t=this._normalizeValue(t,[],0),this.settings.normalized&&(t=this.normalizeConstant(t));if(!(!e.constant||!this._areValuesEqual(t,this.value)))return!1;e.externalBuffer=null,e.constant=!0,this.value=t}else if(n.buffer){const t=n.buffer;e.externalBuffer=t,e.constant=!1,this.value=n.value||null;const i=n.value instanceof Float64Array;r.type=n.type||t.accessor.type,r.bytesPerElement=t.accessor.BYTES_PER_ELEMENT*(i?2:1),r.stride=oM(r)}else if(n.value){this._checkExternalBuffer(n);let t=n.value;e.externalBuffer=null,e.constant=!1,this.value=t,r.bytesPerElement=t.BYTES_PER_ELEMENT,r.stride=oM(r);const{buffer:i,byteOffset:o}=this;this.doublePrecision&&t instanceof Float64Array&&(t=rM(t,r));const a=t.byteLength+o+2*r.stride;i.byteLength<a&&i.reallocate(a),i.setAccessor(null),i.subData({data:t,offset:o}),r.type=n.type||i.accessor.type}return!0}updateSubBuffer(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.state.bounds=null;const e=this.value,{startOffset:n=0,endOffset:r}=t;this.buffer.subData({data:this.doublePrecision&&e instanceof Float64Array?rM(e,{size:this.size,startIndex:n,endIndex:r}):e.subarray(n,r),offset:n*e.BYTES_PER_ELEMENT+this.byteOffset})}allocate(t){let e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const{state:n}=this,r=n.allocatedValue,i=ET.allocate(r,t+1,{size:this.size,type:this.settings.defaultType,copy:e});this.value=i;const{buffer:o,byteOffset:a}=this;return o.byteLength<i.byteLength+a&&(o.reallocate(i.byteLength+a),e&&r&&o.subData({data:r instanceof Float64Array?rM(r,this):r,offset:a})),n.allocatedValue=i,n.constant=!1,n.externalBuffer=null,n.bufferAccessor=this.settings,!0}_checkExternalBuffer(t){const{value:e}=t;if(!ArrayBuffer.isView(e))throw new Error("Attribute ".concat(this.id," value is not TypedArray"));const n=this.settings.defaultType;let r=!1;if(this.doublePrecision&&(r=e.BYTES_PER_ELEMENT<4),r)throw new Error("Attribute ".concat(this.id," does not support ").concat(e.constructor.name));e instanceof n||!this.settings.normalized||"normalized"in t||Gw.warn("Attribute ".concat(this.id," is normalized"))()}normalizeConstant(t){switch(this.settings.type){case 5120:return new Float32Array(t).map((t=>(t+128)/255*2-1));case 5122:return new Float32Array(t).map((t=>(t+32768)/65535*2-1));case 5121:return new Float32Array(t).map((t=>t/255));case 5123:return new Float32Array(t).map((t=>t/65535));default:return t}}_normalizeValue(t,e,n){const{defaultValue:r,size:i}=this.settings;if(Number.isFinite(t))return e[n]=t,e;if(!t){let t=i;for(;--t>=0;)e[n+t]=r[t];return e}switch(i){case 4:e[n+3]=Number.isFinite(t[3])?t[3]:r[3];case 3:e[n+2]=Number.isFinite(t[2])?t[2]:r[2];case 2:e[n+1]=Number.isFinite(t[1])?t[1]:r[1];case 1:e[n+0]=Number.isFinite(t[0])?t[0]:r[0];break;default:let o=i;for(;--o>=0;)e[n+o]=Number.isFinite(t[o])?t[o]:r[o]}return e}_areValuesEqual(t,e){if(!t||!e)return!1;const{size:n}=this;for(let r=0;r<n;r++)if(t[r]!==e[r])return!1;return!0}}function lM(t,e){if(!t)throw new Error(e||"deck.gl: assertion failed.")}const cM=[],uM=[];function hM(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1/0,r=cM;const i={index:-1,data:t,target:[]};return t?"function"===typeof t[Symbol.iterator]?r=t:t.length>0&&(uM.length=t.length,r=uM):r=cM,(e>0||Number.isFinite(n))&&(r=(Array.isArray(r)?r:Array.from(r)).slice(e,n),i.index=e-1),{iterable:r,objectInfo:i}}function dM(t){return t&&t[Symbol.asyncIterator]}function fM(t,e){const{size:n,stride:r,offset:i,startIndices:o,nested:a}=e,s=t.BYTES_PER_ELEMENT,l=r?r/s:n,c=i?i/s:0,u=Math.floor((t.length-c)/l);return(e,r)=>{let{index:i,target:s}=r;if(!o){const e=i*l+c;for(let r=0;r<n;r++)s[r]=t[e+r];return s}const h=o[i],d=o[i+1]||u;let f;if(a){f=new Array(d-h);for(let e=h;e<d;e++){const r=e*l+c;s=new Array(n);for(let e=0;e<n;e++)s[e]=t[r+e];f[e-h]=s}}else if(l===n)f=t.subarray(h*n+c,d*n+c);else{f=new t.constructor((d-h)*n);let e=0;for(let r=h;r<d;r++){const i=r*l+c;for(let r=0;r<n;r++)f[e++]=t[i+r]}}return f}}function pM(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:()=>!0;return Array.isArray(t)?mM(t,e,[]):e(t)?[t]:[]}function mM(t,e,n){let r=-1;for(;++r<t.length;){const i=t[r];Array.isArray(i)?mM(i,e,n):e(i)&&n.push(i)}return n}function gM(t){let{target:e,source:n,start:r=0,count:i=1}=t;const o=n.length,a=i*o;let s=0;for(let l=r;s<o;s++)e[l++]=n[s];for(;s<a;)s<a-s?(e.copyWithin(r+s,r,r+s),s*=2):(e.copyWithin(r+s,r,r+a-s),s=a);return e}const yM=[],vM=[[0,1/0]];function _M(t){const{source:e,target:n,start:r=0,size:i,getData:o}=t,a=t.end||n.length,s=e.length,l=a-r;if(s>l)return void n.set(e.subarray(0,l),r);if(n.set(e,r),!o)return;let c=s;for(;c<l;){const t=o(c,e);for(let e=0;e<i;e++)n[r+c]=t[e]||0,c++}}const bM={interpolation:{duration:0,easing:t=>t},spring:{stiffness:.05,damping:.5}};function xM(t,e){if(!t)return null;Number.isFinite(t)&&(t={type:"interpolation",duration:t});const n=t.type||"interpolation";return{...bM[n],...e,...t,type:n}}function wM(t,e){const n=e.getBuffer();return n?[n,{divisor:0,size:e.size,normalized:e.settings.normalized}]:e.value}function SM(t){switch(t){case 1:return"float";case 2:return"vec2";case 3:return"vec3";case 4:return"vec4";default:throw new Error('No defined attribute type for size "'.concat(t,'"'))}}function EM(t){t.push(t.shift())}function TM(t,e){const{doublePrecision:n,settings:r,value:i,size:o}=t,a=n&&i instanceof Float64Array?2:1;return(r.noAlloc?i.length:e*o)*a}function MM(t){let{buffer:e,numInstances:n,attribute:r,fromLength:i,fromStartIndices:o,getData:a=(t=>t)}=t;const s=r.doublePrecision&&r.value instanceof Float64Array?2:1,l=r.size*s,c=r.byteOffset,u=r.startIndices,h=o&&u,d=TM(r,n),f=r.isConstant;if(!h&&i>=d)return;const p=f?r.value:r.getBuffer().getData({srcByteOffset:c});if(r.settings.normalized&&!f){const t=a;a=(e,n)=>r.normalizeConstant(t(e,n))}const m=f?(t,e)=>a(p,e):(t,e)=>a(p.subarray(t,t+l),e),g=e.getData({length:i}),y=new Float32Array(d);!function(t){let{source:e,target:n,size:r,getData:i,sourceStartIndices:o,targetStartIndices:a}=t;if(!Array.isArray(a))return _M({source:e,target:n,size:r,getData:i}),n;let s=0,l=0;const c=i&&((t,e)=>i(t+l,e)),u=Math.min(o.length,a.length);for(let h=1;h<u;h++){const t=o[h]*r,i=a[h]*r;_M({source:e.subarray(s,t),target:n,start:l,end:i,size:r,getData:c}),s=t,l=i}l<n.length&&_M({source:[],target:n,start:l,size:r,getData:c})}({source:g,target:y,sourceStartIndices:o,targetStartIndices:u,size:l,getData:m}),e.byteLength<y.byteLength+c&&e.reallocate(y.byteLength+c),e.subData({data:y,offset:c})}class AM extends sM{constructor(t,e){super(t,e,{startIndices:null,lastExternalBuffer:null,binaryValue:null,binaryAccessor:null,needsUpdate:!0,needsRedraw:!1,updateRanges:vM}),ww(this,"constant",!1),this.settings.update=e.update||(e.accessor?this._autoUpdater:void 0),Object.seal(this.settings),Object.seal(this.state),this._validateAttributeUpdaters()}get startIndices(){return this.state.startIndices}set startIndices(t){this.state.startIndices=t}needsUpdate(){return this.state.needsUpdate}needsRedraw(){let{clearChangedFlags:t=!1}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const e=this.state.needsRedraw;return this.state.needsRedraw=e&&!t,e}getUpdateTriggers(){const{accessor:t}=this.settings;return[this.id].concat("function"!==typeof t&&t||[])}supportsTransition(){return Boolean(this.settings.transition)}getTransitionSetting(t){if(!t||!this.supportsTransition())return null;const{accessor:e}=this.settings,n=this.settings.transition,r=Array.isArray(e)?t[e.find((e=>t[e]))]:t[e];return xM(r,n)}setNeedsUpdate(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.id,e=arguments.length>1?arguments[1]:void 0;if(this.state.needsUpdate=this.state.needsUpdate||t,this.setNeedsRedraw(t),e){const{startRow:t=0,endRow:n=1/0}=e;this.state.updateRanges=function(t,e){if(t===vM)return t;if(e[0]<0&&(e[0]=0),e[0]>=e[1])return t;const n=[],r=t.length;let i=0;for(let o=0;o<r;o++){const r=t[o];r[1]<e[0]?(n.push(r),i=o+1):r[0]>e[1]?n.push(r):e=[Math.min(r[0],e[0]),Math.max(r[1],e[1])]}return n.splice(i,0,e),n}(this.state.updateRanges,[t,n])}else this.state.updateRanges=vM}clearNeedsUpdate(){this.state.needsUpdate=!1,this.state.updateRanges=yM}setNeedsRedraw(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.id;this.state.needsRedraw=this.state.needsRedraw||t}allocate(t){const{state:e,settings:n}=this;return!n.noAlloc&&(!!n.update&&(super.allocate(t,e.updateRanges!==vM),!0))}updateBuffer(t){let{numInstances:e,data:n,props:r,context:i}=t;if(!this.needsUpdate())return!1;const{state:{updateRanges:o},settings:{update:a,noAlloc:s}}=this;let l=!0;if(a){for(const[t,s]of o)a.call(i,this,{data:n,startRow:t,endRow:s,props:r,numInstances:e});if(this.value)if(this.constant||this.buffer.byteLength<this.value.byteLength+this.byteOffset)this.setData({value:this.value,constant:this.constant}),this.constant=!1;else for(const[t,n]of o){const r=Number.isFinite(t)?this.getVertexOffset(t):0,i=Number.isFinite(n)?this.getVertexOffset(n):s||!Number.isFinite(e)?this.value.length:e*this.size;super.updateSubBuffer({startOffset:r,endOffset:i})}else;this._checkAttributeArray()}else l=!1;return this.clearNeedsUpdate(),this.setNeedsRedraw(),l}setConstantValue(t){if(void 0===t||"function"===typeof t)return!1;return this.setData({constant:!0,value:t})&&this.setNeedsRedraw(),this.clearNeedsUpdate(),!0}setExternalBuffer(t){const{state:e}=this;return t?(this.clearNeedsUpdate(),e.lastExternalBuffer===t||(e.lastExternalBuffer=t,this.setNeedsRedraw(),this.setData(t)),!0):(e.lastExternalBuffer=null,!1)}setBinaryValue(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;const{state:n,settings:r}=this;if(!t)return n.binaryValue=null,n.binaryAccessor=null,!1;if(r.noAlloc)return!1;if(n.binaryValue===t)return this.clearNeedsUpdate(),!0;n.binaryValue=t,this.setNeedsRedraw();if(r.transform||e!==this.startIndices){ArrayBuffer.isView(t)&&(t={value:t});const i=t;lM(ArrayBuffer.isView(i.value),"invalid ".concat(r.accessor));const o=Boolean(i.size)&&i.size!==this.size;return n.binaryAccessor=fM(i.value,{size:i.size||this.size,stride:i.stride,offset:i.offset,startIndices:e,nested:o}),!1}return this.clearNeedsUpdate(),this.setData(t),!0}getVertexOffset(t){const{startIndices:e}=this;return(e?t<e.length?e[t]:this.numInstances:t)*this.size}getShaderAttributes(){const t=this.settings.shaderAttributes||{[this.id]:null},e={};for(const n in t)Object.assign(e,super.getShaderAttributes(n,t[n]));return e}_autoUpdater(t,e){let{data:n,startRow:r,endRow:i,props:o,numInstances:a}=e;if(t.constant)return;const{settings:s,state:l,value:c,size:u,startIndices:h}=t,{accessor:d,transform:f}=s,p=l.binaryAccessor||("function"===typeof d?d:o[d]);lM("function"===typeof p,'accessor "'.concat(d,'" is not a function'));let m=t.getVertexOffset(r);const{iterable:g,objectInfo:y}=hM(n,r,i);for(const v of g){y.index++;let e=p(v,y);if(f&&(e=f.call(this,e)),h){const n=(y.index<h.length-1?h[y.index+1]:a)-h[y.index];if(e&&Array.isArray(e[0])){let n=m;for(const r of e)t._normalizeValue(r,c,n),n+=u}else e&&e.length>u?c.set(e,m):(t._normalizeValue(e,y.target,0),gM({target:c,source:y.target,start:m,count:n}));m+=n*u}else t._normalizeValue(e,c,m),m+=u}}_validateAttributeUpdaters(){const{settings:t}=this;if(!(t.noAlloc||"function"===typeof t.update))throw new Error("Attribute ".concat(this.id," missing update or accessor"))}_checkAttributeArray(){const{value:t}=this,e=Math.min(4,this.size);if(t&&t.length>=e){let n=!0;switch(e){case 4:n=n&&Number.isFinite(t[3]);case 3:n=n&&Number.isFinite(t[2]);case 2:n=n&&Number.isFinite(t[1]);case 1:n=n&&Number.isFinite(t[0]);break;default:n=!1}if(!n)throw new Error("Illegal attribute generated for ".concat(this.id))}}}function CM(t,e){if(t===e)return!0;if(Array.isArray(t)){const n=t.length;if(!e||e.length!==n)return!1;for(let r=0;r<n;r++)if(t[r]!==e[r])return!1;return!0}return!1}function PM(t){let e,n={};return r=>{for(const i in r)if(!CM(r[i],n[i])){e=t(r),n=r;break}return e}}let kM={};function IM(t){kM=t}function OM(t,e,n,r){Gw.level>0&&kM[t]&&kM[t].call(null,e,n,r)}function LM(t,e){if(!t)throw new Error(e||"shadertools: assertion failed.")}const jM="out vec4 transform_output;\nvoid main() {\n  transform_output = vec4(0);\n}",zM="#version 300 es\n".concat(jM);function RM(t,e){e=Array.isArray(e)?e:[e];const n=t.replace(/^\s+/,"").split(/\s+/),[r,i,o]=n;if(!e.includes(r)||!i||!o)return null;return{qualifier:r,type:i,name:o.split(";")[0]}}function DM(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{version:e=100,input:n,inputType:r,output:i}=t;if(!n)return 300===e?zM:e>300?"#version ".concat(e,"\n").concat(jM):"void main() {gl_FragColor = vec4(0);}";const o=function(t,e){switch(e){case"float":return"vec4(".concat(t,", 0.0, 0.0, 1.0)");case"vec2":return"vec4(".concat(t,", 0.0, 1.0)");case"vec3":return"vec4(".concat(t,", 1.0)");case"vec4":return t;default:return LM(!1),null}}(n,r);return e>=300?"#version ".concat(e," ").concat(300===e?"es":"","\nin ").concat(r," ").concat(n,";\nout vec4 ").concat(i,";\nvoid main() {\n  ").concat(i," = ").concat(o,";\n}"):"varying ".concat(r," ").concat(n,";\nvoid main() {\n  gl_FragColor = ").concat(o,";\n}")}class BM extends mE{get[Symbol.toStringTag](){return"TransformFeedback"}static isSupported(t){return tS(t)}constructor(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};nS(t),super(t,e),this.initialize(e),this.stubRemovedMethods("TransformFeedback","v6.0",["pause","resume"]),Object.seal(this)}initialize(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.buffers={},this.unused={},this.configuration=null,this.bindOnUse=!0,dE(this.buffers)||this.bind((()=>this._unbindBuffers())),this.setProps(t),this}setProps(t){"program"in t&&(this.configuration=t.program&&t.program.configuration),"configuration"in t&&(this.configuration=t.configuration),"bindOnUse"in t&&(t=t.bindOnUse),"buffers"in t&&this.setBuffers(t.buffers)}setBuffers(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.bind((()=>{for(const e in t)this.setBuffer(e,t[e])})),this}setBuffer(t,e){const n=this._getVaryingIndex(t),{buffer:r,byteSize:i,byteOffset:o}=this._getBufferParams(e);return n<0?(this.unused[t]=r,Yw.warn("".concat(this.id," unused varying buffer ").concat(t))(),this):(this.buffers[n]=e,this.bindOnUse||this._bindBuffer(n,r,o,i),this)}begin(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return this.gl.bindTransformFeedback(36386,this.handle),this._bindBuffers(),this.gl.beginTransformFeedback(t),this}end(){return this.gl.endTransformFeedback(),this._unbindBuffers(),this.gl.bindTransformFeedback(36386,null),this}_getBufferParams(t){let e,n,r;return t instanceof AE===!1?(r=t.buffer,n=t.byteSize,e=t.byteOffset):r=t,void 0===e&&void 0===n||(e=e||0,n=n||r.byteLength-e),{buffer:r,byteOffset:e,byteSize:n}}_getVaryingInfo(t){return this.configuration&&this.configuration.getVaryingInfo(t)}_getVaryingIndex(t){if(this.configuration)return this.configuration.getVaryingInfo(t).location;const e=Number(t);return Number.isFinite(e)?e:-1}_bindBuffers(){if(this.bindOnUse)for(const t in this.buffers){const{buffer:e,byteSize:n,byteOffset:r}=this._getBufferParams(this.buffers[t]);this._bindBuffer(t,e,r,n)}}_unbindBuffers(){if(this.bindOnUse)for(const t in this.buffers)this._bindBuffer(t,null)}_bindBuffer(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3?arguments[3]:void 0;const i=e&&e.handle;return i&&void 0!==r?this.gl.bindBufferRange(35982,t,i,n,r):this.gl.bindBufferBase(35982,t,i),this}_createHandle(){return this.gl.createTransformFeedback()}_deleteHandle(){this.gl.deleteTransformFeedback(this.handle)}_bindHandle(t){this.gl.bindTransformFeedback(36386,this.handle)}}class FM{constructor(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.gl=t,this.currentIndex=0,this.feedbackMap={},this.varyings=null,this.bindings=[],this.resources={},this._initialize(e),Object.seal(this)}setupResources(t){for(const e of this.bindings)this._setupTransformFeedback(e,t)}updateModelProps(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{varyings:e}=this;return e.length>0&&(t=Object.assign({},t,{varyings:e})),t}getDrawOptions(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const e=this.bindings[this.currentIndex],{sourceBuffers:n,transformFeedback:r}=e;return{attributes:Object.assign({},n,t.attributes),transformFeedback:r}}swap(){return!!this.feedbackMap&&(this.currentIndex=this._getNextIndex(),!0)}update(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this._setupBuffers(t)}getBuffer(t){const{feedbackBuffers:e}=this.bindings[this.currentIndex],n=t?e[t]:null;return n?n instanceof AE?n:n.buffer:null}getData(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{varyingName:e}=t,n=this.getBuffer(e);return n?n.getData():null}delete(){for(const t in this.resources)this.resources[t].delete()}_initialize(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this._setupBuffers(t),this.varyings=t.varyings||Object.keys(this.bindings[this.currentIndex].feedbackBuffers),this.varyings.length>0&&aE(tS(this.gl))}_getFeedbackBuffers(t){const{sourceBuffers:e={}}=t,n={};if(this.bindings[this.currentIndex]&&Object.assign(n,this.bindings[this.currentIndex].feedbackBuffers),this.feedbackMap)for(const r in this.feedbackMap){const t=this.feedbackMap[r];r in e&&(n[t]=r)}Object.assign(n,t.feedbackBuffers);for(const r in n){const t=n[r];if("string"===typeof t){const i=e[t],{byteLength:o,usage:a,accessor:s}=i;n[r]=this._createNewBuffer(r,{byteLength:o,usage:a,accessor:s})}}return n}_setupBuffers(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{sourceBuffers:e=null}=t;Object.assign(this.feedbackMap,t.feedbackMap);const n=this._getFeedbackBuffers(t);this._updateBindings({sourceBuffers:e,feedbackBuffers:n})}_setupTransformFeedback(t,e){let{model:n}=e;const{program:r}=n;t.transformFeedback=new BM(this.gl,{program:r,buffers:t.feedbackBuffers})}_updateBindings(t){if(this.bindings[this.currentIndex]=this._updateBinding(this.bindings[this.currentIndex],t),this.feedbackMap){const{sourceBuffers:t,feedbackBuffers:e}=this._swapBuffers(this.bindings[this.currentIndex]),n=this._getNextIndex();this.bindings[n]=this._updateBinding(this.bindings[n],{sourceBuffers:t,feedbackBuffers:e})}}_updateBinding(t,e){return t?(Object.assign(t.sourceBuffers,e.sourceBuffers),Object.assign(t.feedbackBuffers,e.feedbackBuffers),t.transformFeedback&&t.transformFeedback.setBuffers(t.feedbackBuffers),t):{sourceBuffers:Object.assign({},e.sourceBuffers),feedbackBuffers:Object.assign({},e.feedbackBuffers)}}_swapBuffers(t){if(!this.feedbackMap)return null;const e=Object.assign({},t.sourceBuffers),n=Object.assign({},t.feedbackBuffers);for(const r in this.feedbackMap){const i=this.feedbackMap[r];e[r]=t.feedbackBuffers[i],n[i]=t.sourceBuffers[r],aE(n[i]instanceof AE)}return{sourceBuffers:e,feedbackBuffers:n}}_createNewBuffer(t,e){const n=new AE(this.gl,e);return this.resources[t]&&this.resources[t].delete(),this.resources[t]=n,n}_getNextIndex(){return(this.currentIndex+1)%2}}function NM(t){let e=100;const n=t.match(/[^\s]+/g);if(n.length>=2&&"#version"===n[0]){const t=parseInt(n[1],10);Number.isFinite(t)&&(e=t)}return e}const UM="vs",VM="fs",WM={[UM]:"#ifdef MODULE_LOGDEPTH\n  logdepth_adjustPosition(gl_Position);\n#endif\n",[VM]:"#ifdef MODULE_MATERIAL\n  gl_FragColor = material_filterColor(gl_FragColor);\n#endif\n\n#ifdef MODULE_LIGHTING\n  gl_FragColor = lighting_filterColor(gl_FragColor);\n#endif\n\n#ifdef MODULE_FOG\n  gl_FragColor = fog_filterColor(gl_FragColor);\n#endif\n\n#ifdef MODULE_PICKING\n  gl_FragColor = picking_filterHighlightColor(gl_FragColor);\n  gl_FragColor = picking_filterPickingColor(gl_FragColor);\n#endif\n\n#ifdef MODULE_LOGDEPTH\n  logdepth_setFragDepth();\n#endif\n"},GM="__LUMA_INJECT_DECLARATIONS__",qM=/void\s+main\s*\([^)]*\)\s*\{\n?/,HM=/}\n?[^{}]*$/,ZM=[];function XM(t,e,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const i=e===UM;for(const o in n){const e=n[o];e.sort(((t,e)=>t.order-e.order)),ZM.length=e.length;for(let t=0,n=e.length;t<n;++t)ZM[t]=e[t].injection;const r="".concat(ZM.join("\n"),"\n");switch(o){case"vs:#decl":i&&(t=t.replace(GM,r));break;case"vs:#main-start":i&&(t=t.replace(qM,(t=>t+r)));break;case"vs:#main-end":i&&(t=t.replace(HM,(t=>r+t)));break;case"fs:#decl":i||(t=t.replace(GM,r));break;case"fs:#main-start":i||(t=t.replace(qM,(t=>t+r)));break;case"fs:#main-end":i||(t=t.replace(HM,(t=>r+t)));break;default:t=t.replace(o,(t=>t+r))}}return t=t.replace(GM,""),r&&(t=t.replace(/\}\s*$/,(t=>t+WM[e]))),t}function YM(t){const e={};return LM(Array.isArray(t)&&t.length>1),t.forEach((t=>{for(const n in t)e[n]=e[n]?"".concat(e[n],"\n").concat(t[n]):t[n]})),e}const KM={name:"transform",vs:"attribute float transform_elementID;\nvec2 transform_getPixelSizeHalf(vec2 size) {\n  return vec2(1.) / (2. * size);\n}\n\nvec2 transform_getPixelIndices(vec2 texSize, vec2 pixelSizeHalf) {\n  float yIndex = floor((transform_elementID / texSize[0]) + pixelSizeHalf[1]);\n  float xIndex = transform_elementID - (yIndex * texSize[0]);\n  return vec2(xIndex, yIndex);\n}\nvec2 transform_getTexCoord(vec2 size) {\n  vec2 pixelSizeHalf = transform_getPixelSizeHalf(size);\n  vec2 indices = transform_getPixelIndices(size, pixelSizeHalf);\n  vec2 coord = indices / size + pixelSizeHalf;\n  return coord;\n}\nvec2 transform_getPos(vec2 size) {\n  vec2 texCoord = transform_getTexCoord(size);\n  vec2 pos = (texCoord * (2.0, 2.0)) - (1., 1.);\n  return pos;\n}\nvec4 transform_getInput(sampler2D texSampler, vec2 size) {\n  vec2 texCoord = transform_getTexCoord(size);\n  vec4 textureColor = texture2D(texSampler, texCoord);\n  return textureColor;\n}\n",fs:null},$M="transform_uSampler_",JM="transform_uSize_",QM="transform_position";function tA(t){let{vs:e,sourceTextureMap:n,targetTextureVarying:r,targetTexture:i}=t;let o=Object.keys(n).length,a=null;const s={};let l=e,c={};if(o>0||r){const t=l.split("\n"),e=t.slice();if(t.forEach(((t,i,l)=>{if(o>0){const r=function(t,e){const n={},r=function(t){return RM(t,["attribute","in"])}(t);if(!r)return null;const{type:i,name:o}=r;if(o&&e[o]){const e="// ".concat(t," => Replaced by Transform with a sampler"),{samplerName:r,sizeName:a,uniformDeclerations:s}=function(t){const e="".concat($M).concat(t),n="".concat(JM).concat(t),r="  uniform sampler2D ".concat(e,";\n  uniform vec2 ").concat(n,";");return{samplerName:e,sizeName:n,uniformDeclerations:r}}(o),l=function(t){switch(t){case"float":return"x";case"vec2":return"xy";case"vec3":return"xyz";case"vec4":return"xyzw";default:return LM(!1),null}}(i),c="  ".concat(i," ").concat(o," = transform_getInput(").concat(r,", ").concat(a,").").concat(l,";\n");n[r]=o;return{updatedLine:e,inject:{"vs:#decl":s,"vs:#main-start":c},samplerTextureMap:n}}return null}(t,n);if(r){const{updatedLine:t,inject:n}=r;e[i]=t,c=YM([c,n]),Object.assign(s,r.samplerTextureMap),o--}}r&&!a&&(a=function(t,e){const n=RM(t,["varying","out"]);if(!n)return null;return n.name===e?n.type:null}(t,r))})),r){aE(i);const t="".concat(JM).concat(r),e="uniform vec2 ".concat(t,";\n"),n="     vec2 ".concat(QM," = transform_getPos(").concat(t,");\n     gl_Position = vec4(").concat(QM,", 0, 1.);\n");c=YM([c,{"vs:#decl":e,"vs:#main-start":n}])}l=e.join("\n")}return{vs:l,targetTextureType:a,inject:c,samplerTextureMap:s}}const eA={10241:9728,10240:9728,10242:33071,10243:33071};class nA{constructor(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.gl=t,this.id=this.currentIndex=0,this._swapTexture=null,this.targetTextureVarying=null,this.targetTextureType=null,this.samplerTextureMap=null,this.bindings=[],this.resources={},this._initialize(e),Object.seal(this)}updateModelProps(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const e=this._processVertexShader(t);return Object.assign({},t,e)}getDrawOptions(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{sourceBuffers:e,sourceTextures:n,framebuffer:r,targetTexture:i}=this.bindings[this.currentIndex],o=Object.assign({},e,t.attributes),a=Object.assign({},t.uniforms),s=Object.assign({},t.parameters);let l=t.discard;if(this.hasSourceTextures||this.hasTargetTexture){o.transform_elementID=this.elementIDBuffer;for(const e in this.samplerTextureMap){const t=this.samplerTextureMap[e];a[e]=n[t]}this._setSourceTextureParameters();const t=function(t){let{sourceTextureMap:e,targetTextureVarying:n,targetTexture:r}=t;const i={};let o,a;n&&(({width:o,height:a}=r),i["".concat(JM).concat(n)]=[o,a]);for(const s in e)({width:o,height:a}=e[s]),i["".concat(JM).concat(s)]=[o,a];return i}({sourceTextureMap:n,targetTextureVarying:this.targetTextureVarying,targetTexture:i});Object.assign(a,t)}return this.hasTargetTexture&&(l=!1,s.viewport=[0,0,r.width,r.height]),{attributes:o,framebuffer:r,uniforms:a,discard:l,parameters:s}}swap(){return!!this._swapTexture&&(this.currentIndex=this._getNextIndex(),!0)}update(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this._setupTextures(t)}getTargetTexture(){const{targetTexture:t}=this.bindings[this.currentIndex];return t}getData(){let{packed:t=!1}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{framebuffer:e}=this.bindings[this.currentIndex],n=HE(e);if(!t)return n;const r=n.constructor,i=function(t){switch(t){case"float":return 1;case"vec2":return 2;case"vec3":return 3;case"vec4":return 4;default:return LM(!1),null}}(this.targetTextureType),o=new r(n.length*i/4);let a=0;for(let s=0;s<n.length;s+=4)for(let t=0;t<i;t++)o[a++]=n[s+t];return o}getFramebuffer(){return this.bindings[this.currentIndex].framebuffer}delete(){this.ownTexture&&this.ownTexture.delete(),this.elementIDBuffer&&this.elementIDBuffer.delete()}_initialize(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{_targetTextureVarying:e,_swapTexture:n}=t;this._swapTexture=n,this.targetTextureVarying=e,this.hasTargetTexture=e,this._setupTextures(t)}_createTargetTexture(t){const{sourceTextures:e,textureOrReference:n}=t;if(n instanceof zE)return n;const r=e[n];return r?(this._targetRefTexName=n,this._createNewTexture(r)):null}_setupTextures(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{sourceBuffers:e,_sourceTextures:n={},_targetTexture:r}=t,i=this._createTargetTexture({sourceTextures:n,textureOrReference:r});this.hasSourceTextures=this.hasSourceTextures||n&&Object.keys(n).length>0,this._updateBindings({sourceBuffers:e,sourceTextures:n,targetTexture:i}),"elementCount"in t&&this._updateElementIDBuffer(t.elementCount)}_updateElementIDBuffer(t){if("number"!==typeof t||this.elementCount>=t)return;const e=new Float32Array(t);e.forEach(((t,e,n)=>{n[e]=e})),this.elementIDBuffer?this.elementIDBuffer.setData({data:e}):this.elementIDBuffer=new AE(this.gl,{data:e,accessor:{size:1}}),this.elementCount=t}_updateBindings(t){if(this.bindings[this.currentIndex]=this._updateBinding(this.bindings[this.currentIndex],t),this._swapTexture){const{sourceTextures:t,targetTexture:e}=this._swapTextures(this.bindings[this.currentIndex]),n=this._getNextIndex();this.bindings[n]=this._updateBinding(this.bindings[n],{sourceTextures:t,targetTexture:e})}}_updateBinding(t,e){const{sourceBuffers:n,sourceTextures:r,targetTexture:i}=e;if(t||(t={sourceBuffers:{},sourceTextures:{},targetTexture:null}),Object.assign(t.sourceTextures,r),Object.assign(t.sourceBuffers,n),i){t.targetTexture=i;const{width:e,height:n}=i,{framebuffer:r}=t;r?(r.update({attachments:{36064:i},resizeAttachments:!1}),r.resize({width:e,height:n})):t.framebuffer=new KE(this.gl,{id:"transform-framebuffer",width:e,height:n,attachments:{36064:i}})}return t}_setSourceTextureParameters(){const t=this.currentIndex,{sourceTextures:e}=this.bindings[t];for(const n in e)e[n].setParameters(eA)}_swapTextures(t){if(!this._swapTexture)return null;const e=Object.assign({},t.sourceTextures);e[this._swapTexture]=t.targetTexture;return{sourceTextures:e,targetTexture:t.sourceTextures[this._swapTexture]}}_createNewTexture(t){const e=function(t,e){aE(t instanceof zE||t instanceof WE||t instanceof GE);const n=t.constructor,{gl:r,width:i,height:o,format:a,type:s,dataFormat:l,border:c,mipmaps:u}=t;return new n(r,Object.assign({width:i,height:o,format:a,type:s,dataFormat:l,border:c,mipmaps:u},e))}(t,{parameters:{10241:9728,10240:9728,10242:33071,10243:33071},pixelStore:{37440:!1}});return this.ownTexture&&this.ownTexture.delete(),this.ownTexture=e,e}_getNextIndex(){return(this.currentIndex+1)%2}_processVertexShader(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{sourceTextures:e,targetTexture:n}=this.bindings[this.currentIndex],{vs:r,uniforms:i,targetTextureType:o,inject:a,samplerTextureMap:s}=tA({vs:t.vs,sourceTextureMap:e,targetTextureVarying:this.targetTextureVarying,targetTexture:n}),l=YM([t.inject||{},a]);this.targetTextureType=o,this.samplerTextureMap=s;return{vs:r,fs:t._fs||DM({version:NM(r),input:this.targetTextureVarying,inputType:o,output:"transform_output"}),modules:this.hasSourceTextures||this.targetTextureVarying?[KM].concat(t.modules||[]):t.modules,uniforms:i,inject:l}}}const rA={number:{validate:(t,e)=>Number.isFinite(t)&&(!("max"in e)||t<=e.max)&&(!("min"in e)||t>=e.min)},array:{validate:(t,e)=>Array.isArray(t)||ArrayBuffer.isView(t)}};function iA(t){let e=oA(t);return"object"===e?t?"type"in t?Object.assign({},t,rA[t.type]):"value"in t?(e=oA(t.value),Object.assign({type:e},t,rA[e])):{type:"object",value:t}:{type:"object",value:null}:Object.assign({type:e,value:t},rA[e])}function oA(t){return Array.isArray(t)||ArrayBuffer.isView(t)?"array":typeof t}class aA{constructor(t){let{name:e,vs:n,fs:r,dependencies:i=[],uniforms:o,getUniforms:a,deprecations:s=[],defines:l={},inject:c={},vertexShader:u,fragmentShader:h}=t;LM("string"===typeof e),this.name=e,this.vs=n||u,this.fs=r||h,this.getModuleUniforms=a,this.dependencies=i,this.deprecations=this._parseDeprecationDefinitions(s),this.defines=l,this.injections=function(t){const e={vs:{},fs:{}};for(const n in t){let r=t[n];"string"===typeof r&&(r={order:0,injection:r}),e[n.slice(0,2)][n]=r}return e}(c),o&&(this.uniforms=function(t){const e={};for(const n in t){const r=iA(t[n]);e[n]=r}return e}(o))}getModuleSource(t){let e;switch(t){case"vs":e=this.vs||"";break;case"fs":e=this.fs||"";break;default:LM(!1)}return"#define MODULE_".concat(this.name.toUpperCase().replace(/[^0-9a-z]/gi,"_"),"\n").concat(e,"// END MODULE_").concat(this.name,"\n\n")}getUniforms(t,e){return this.getModuleUniforms?this.getModuleUniforms(t,e):this.uniforms?this._defaultGetUniforms(t):{}}getDefines(){return this.defines}checkDeprecations(t,e){this.deprecations.forEach((n=>{n.regex.test(t)&&(n.deprecated?e.deprecated(n.old,n.new)():e.removed(n.old,n.new)())}))}_parseDeprecationDefinitions(t){return t.forEach((t=>{if("function"===t.type)t.regex=new RegExp("\\b".concat(t.old,"\\("));else t.regex=new RegExp("".concat(t.type," ").concat(t.old,";"))})),t}_defaultGetUniforms(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const e={},n=this.uniforms;for(const r in n){const i=n[r];r in t&&!i.private?(i.validate&&LM(i.validate(t[r],i),"".concat(this.name,": invalid ").concat(r)),e[r]=t[r]):e[r]=i.value}return e}}function sA(t){return lA(uA(t))}function lA(t){const e={},n={};return cA({modules:t,level:0,moduleMap:e,moduleDepth:n}),Object.keys(n).sort(((t,e)=>n[e]-n[t])).map((t=>e[t]))}function cA(t){let{modules:e,level:n,moduleMap:r,moduleDepth:i}=t;if(n>=5)throw new Error("Possible loop in shader dependency graph");for(const o of e)r[o.name]=o,(void 0===i[o.name]||i[o.name]<n)&&(i[o.name]=n);for(const o of e)o.dependencies&&cA({modules:o.dependencies,level:n+1,moduleMap:r,moduleDepth:i})}function uA(t,e){return t.map((t=>(t instanceof aA||(LM("string"!==typeof t,"Shader module use by name is deprecated. Import shader module '".concat(t,"' and use it directly.")),LM(t.name,"shader module has no name"),(t=new aA(t)).dependencies=uA(t.dependencies)),t)))}const hA=7936,dA=7937,fA=7938,pA=35724,mA={GLSL_FRAG_DATA:["WEBGL_draw_buffers",!0],GLSL_FRAG_DEPTH:["EXT_frag_depth",!0],GLSL_DERIVATIVES:["OES_standard_derivatives",!0],GLSL_TEXTURE_LOD:["EXT_shader_texture_lod",!0]},gA={};Object.keys(mA).forEach((t=>{gA[t]=t}));const yA={};function vA(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=mA[e];if(LM(r,e),!function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const e="undefined"!==typeof window&&window.navigator||{},n=t.userAgent||e.userAgent||"",r=-1!==n.indexOf("MSIE "),i=-1!==n.indexOf("Trident/");return r||i}(n))return!0;if(e in yA)return yA[e];const i=r[0],o=n.behavior||"enable",a="#extension GL_".concat(i," : ").concat(o,"\nvoid main(void) {}"),s=t.createShader(35633);t.shaderSource(s,a),t.compileShader(s);const l=t.getShaderParameter(s,35713);return t.deleteShader(s),yA[e]=l,l}function _A(t,e){const n=mA[e];LM(n,e);const r=function(t){return"undefined"!==typeof WebGL2RenderingContext&&t instanceof WebGL2RenderingContext||Boolean(t&&2===t._version)}(t)&&n[1]||n[0],i="string"===typeof r?Boolean(t.getExtension(r)):r;return LM(!1===i||!0===i),i}function bA(t,e){return(e=Array.isArray(e)?e:[e]).every((e=>_A(t,e)))}function xA(t){const e=function(t){const e=t.getExtension("WEBGL_debug_renderer_info"),n=t.getParameter(e&&e.UNMASKED_VENDOR_WEBGL||hA),r=t.getParameter(e&&e.UNMASKED_RENDERER_WEBGL||dA);return{gpuVendor:function(t,e){return t.match(/NVIDIA/i)||e.match(/NVIDIA/i)?"NVIDIA":t.match(/INTEL/i)||e.match(/INTEL/i)?"INTEL":t.match(/AMD/i)||e.match(/AMD/i)||t.match(/ATI/i)||e.match(/ATI/i)?"AMD":"UNKNOWN GPU"}(n,r),vendor:n,renderer:r,version:t.getParameter(fA),shadingLanguageVersion:t.getParameter(pA)}}(t);switch(e.gpuVendor.toLowerCase()){case"nvidia":return"#define NVIDIA_GPU\n// Nvidia optimizes away the calculation necessary for emulated fp64\n#define LUMA_FP64_CODE_ELIMINATION_WORKAROUND 1\n";case"intel":return"#define INTEL_GPU\n// Intel optimizes away the calculation necessary for emulated fp64\n#define LUMA_FP64_CODE_ELIMINATION_WORKAROUND 1\n// Intel's built-in 'tan' function doesn't have acceptable precision\n#define LUMA_FP32_TAN_PRECISION_WORKAROUND 1\n// Intel GPU doesn't have full 32 bits precision in same cases, causes overflow\n#define LUMA_FP64_HIGH_BITS_OVERFLOW_WORKAROUND 1\n";case"amd":return"#define AMD_GPU\n";default:return"#define DEFAULT_GPU\n// Prevent driver from optimizing away the calculation necessary for emulated fp64\n#define LUMA_FP64_CODE_ELIMINATION_WORKAROUND 1\n// Intel's built-in 'tan' function doesn't have acceptable precision\n#define LUMA_FP32_TAN_PRECISION_WORKAROUND 1\n// Intel GPU doesn't have full 32 bits precision in same cases, causes overflow\n#define LUMA_FP64_HIGH_BITS_OVERFLOW_WORKAROUND 1\n"}}function wA(t){return new RegExp("\\b".concat(t,"[ \\t]+(\\w+[ \\t]+\\w+(\\[\\w+\\])?;)"),"g")}const SA=[[/^(#version[ \t]+(100|300[ \t]+es))?[ \t]*\n/,"#version 300 es\n"],[/\btexture(2D|2DProj|Cube)Lod(EXT)?\(/g,"textureLod("],[/\btexture(2D|2DProj|Cube)(EXT)?\(/g,"texture("]],EA=[...SA,[wA("attribute"),"in $1"],[wA("varying"),"out $1"]],TA=[...SA,[wA("varying"),"in $1"]],MA=[[/^#version[ \t]+300[ \t]+es/,"#version 100"],[/\btexture(2D|2DProj|Cube)Lod\(/g,"texture$1LodEXT("],[/\btexture\(/g,"texture2D("],[/\btextureLod\(/g,"texture2DLodEXT("]],AA=[...MA,[wA("in"),"attribute $1"],[wA("out"),"varying $1"]],CA=[...MA,[wA("in"),"varying $1"]],PA="gl_FragColor",kA=/\bout[ \t]+vec4[ \t]+(\w+)[ \t]*;\n?/,IA=/void\s+main\s*\([^)]*\)\s*\{\n?/;function OA(t,e,n){switch(e){case 300:return n?LA(t,EA):function(t){t=LA(t,TA);const e=t.match(kA);if(e){const n=e[1];t=t.replace(new RegExp("\\b".concat(PA,"\\b"),"g"),n)}else{const e="fragmentColor";t=t.replace(IA,(t=>"out vec4 ".concat(e,";\n").concat(t))).replace(new RegExp("\\b".concat(PA,"\\b"),"g"),e)}return t}(t);case 100:return n?LA(t,AA):function(t){t=LA(t,CA);const e=t.match(kA);if(e){const n=e[1];t=t.replace(kA,"").replace(new RegExp("\\b".concat(n,"\\b"),"g"),PA)}return t}(t);default:throw new Error("unknown GLSL version ".concat(e))}}function LA(t,e){for(const[n,r]of e)t=t.replace(n,r);return t}const jA="\n\n".concat(GM,"\n\n"),zA={[UM]:"vertex",[VM]:"fragment"},RA="precision highp float;\n\n";function DA(t,e){let{id:n,source:r,type:i,modules:o,defines:a={},hookFunctions:s=[],inject:l={},transpileToGLSL100:c=!1,prologue:u=!0,log:h}=e;LM("string"===typeof r,"shader source must be a string");const d=i===UM,f=r.split("\n");let p=100,m="",g=r;0===f[0].indexOf("#version ")?(p=300,m=f[0],g=f.slice(1).join("\n")):m="#version ".concat(p);const y={};o.forEach((t=>{Object.assign(y,t.getDefines())})),Object.assign(y,a);let v=u?"".concat(m,"\n").concat(function(t){let{id:e,source:n,type:r}=t;const i=e&&"string"===typeof e&&-1===n.indexOf("SHADER_NAME");return i?"\n#define SHADER_NAME ".concat(e,"_").concat(zA[r],"\n\n"):""}({id:n,source:r,type:i}),"\n").concat(function(t){let{type:e}=t;return"\n#define SHADER_TYPE_".concat(zA[e].toUpperCase(),"\n")}({type:i}),"\n").concat(xA(t),"\n").concat(function(t,e,n){let r="#if (__VERSION__ > 120)\n\n# define FEATURE_GLSL_DERIVATIVES\n# define FEATURE_GLSL_DRAW_BUFFERS\n# define FEATURE_GLSL_FRAG_DEPTH\n# define FEATURE_GLSL_TEXTURE_LOD\n\n// DEPRECATED FLAGS, remove in v9\n# define FRAG_DEPTH\n# define DERIVATIVES\n# define DRAW_BUFFERS\n# define TEXTURE_LOD\n\n#endif // __VERSION\n";return bA(t,gA.GLSL_FRAG_DEPTH)&&(r+="\n// FRAG_DEPTH => gl_FragDepth is available\n#ifdef GL_EXT_frag_depth\n#extension GL_EXT_frag_depth : enable\n# define FEATURE_GLSL_FRAG_DEPTH\n# define FRAG_DEPTH\n# define gl_FragDepth gl_FragDepthEXT\n#endif\n"),bA(t,gA.GLSL_DERIVATIVES)&&vA(t,gA.GLSL_DERIVATIVES)&&(r+="\n// DERIVATIVES => dxdF, dxdY and fwidth are available\n#ifdef GL_OES_standard_derivatives\n#extension GL_OES_standard_derivatives : enable\n# define FEATURE_GLSL_DERIVATIVES\n# define DERIVATIVES\n#endif\n"),bA(t,gA.GLSL_FRAG_DATA)&&vA(t,gA.GLSL_FRAG_DATA,{behavior:"require"})&&(r+="\n// DRAW_BUFFERS => gl_FragData[] is available\n#ifdef GL_EXT_draw_buffers\n#extension GL_EXT_draw_buffers : require\n#define FEATURE_GLSL_DRAW_BUFFERS\n#define DRAW_BUFFERS\n#endif\n"),bA(t,gA.GLSL_TEXTURE_LOD)&&(r+="// TEXTURE_LOD => texture2DLod etc are available\n#ifdef GL_EXT_shader_texture_lod\n#extension GL_EXT_shader_texture_lod : enable\n\n# define FEATURE_GLSL_TEXTURE_LOD\n# define TEXTURE_LOD\n\n#endif\n"),r}(t),"\n").concat(function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=0,n="";for(const r in t){0===e&&(n+="\n// APPLICATION DEFINES\n"),e++;const i=t[r];(i||Number.isFinite(i))&&(n+="#define ".concat(r.toUpperCase()," ").concat(t[r],"\n"))}0===e&&(n+="\n");return n}(y),"\n").concat(d?"":RA,"\n"):"".concat(m,"\n");const _=function(t){const e={vs:{},fs:{}};return t.forEach((t=>{let n;"string"!==typeof t?(n=t,t=n.hook):n={},t=t.trim();const[r,i]=t.split(":"),o=t.replace(/\(.+/,"");e[r][o]=Object.assign(n,{signature:i})})),e}(s),b={},x={},w={};for(const S in l){const t="string"===typeof l[S]?{injection:l[S],order:0}:l[S],e=S.match(/^(v|f)s:(#)?([\w-]+)$/);if(e){const n=e[2],r=e[3];n?"decl"===r?x[S]=[t]:w[S]=[t]:b[S]=[t]}else w[S]=[t]}for(const S of o){h&&S.checkDeprecations(g,h);v+=S.getModuleSource(i,p);const t=S.injections[i];for(const e in t){const n=e.match(/^(v|f)s:#([\w-]+)$/);if(n){const r="decl"===n[2]?x:w;r[e]=r[e]||[],r[e].push(t[e])}else b[e]=b[e]||[],b[e].push(t[e])}}return v+=jA,v=XM(v,i,x),v+=function(t,e){let n="";for(const r in t){const i=t[r];if(n+="void ".concat(i.signature," {\n"),i.header&&(n+="  ".concat(i.header)),e[r]){const t=e[r];t.sort(((t,e)=>t.order-e.order));for(const e of t)n+="  ".concat(e.injection,"\n")}i.footer&&(n+="  ".concat(i.footer)),n+="}\n"}return n}(_[i],b),v+=g,v=XM(v,i,w),v=OA(v,c?100:p,d),v}function BA(t){return function(e){const n={};for(const r of t){const t=r.getUniforms(e,n);Object.assign(n,t)}return n}}const FA={5126:QA.bind(null,"uniform1fv",qA,1,tC),35664:QA.bind(null,"uniform2fv",qA,2,tC),35665:QA.bind(null,"uniform3fv",qA,3,tC),35666:QA.bind(null,"uniform4fv",qA,4,tC),5124:QA.bind(null,"uniform1iv",HA,1,tC),35667:QA.bind(null,"uniform2iv",HA,2,tC),35668:QA.bind(null,"uniform3iv",HA,3,tC),35669:QA.bind(null,"uniform4iv",HA,4,tC),35670:QA.bind(null,"uniform1iv",HA,1,tC),35671:QA.bind(null,"uniform2iv",HA,2,tC),35672:QA.bind(null,"uniform3iv",HA,3,tC),35673:QA.bind(null,"uniform4iv",HA,4,tC),35674:QA.bind(null,"uniformMatrix2fv",qA,4,eC),35675:QA.bind(null,"uniformMatrix3fv",qA,9,eC),35676:QA.bind(null,"uniformMatrix4fv",qA,16,eC),35678:JA,35680:JA,5125:QA.bind(null,"uniform1uiv",ZA,1,tC),36294:QA.bind(null,"uniform2uiv",ZA,2,tC),36295:QA.bind(null,"uniform3uiv",ZA,3,tC),36296:QA.bind(null,"uniform4uiv",ZA,4,tC),35685:QA.bind(null,"uniformMatrix2x3fv",qA,6,eC),35686:QA.bind(null,"uniformMatrix2x4fv",qA,8,eC),35687:QA.bind(null,"uniformMatrix3x2fv",qA,6,eC),35688:QA.bind(null,"uniformMatrix3x4fv",qA,12,eC),35689:QA.bind(null,"uniformMatrix4x2fv",qA,8,eC),35690:QA.bind(null,"uniformMatrix4x3fv",qA,12,eC),35678:JA,35680:JA,35679:JA,35682:JA,36289:JA,36292:JA,36293:JA,36298:JA,36299:JA,36300:JA,36303:JA,36306:JA,36307:JA,36308:JA,36311:JA},NA={},UA={},VA={},WA=[0];function GA(t,e,n,r){1===e&&"boolean"===typeof t&&(t=t?1:0),Number.isFinite(t)&&(WA[0]=t,t=WA);const i=t.length;if(i%e&&Yw.warn("Uniform size should be multiples of ".concat(e),t)(),t instanceof n)return t;let o=r[i];o||(o=new n(i),r[i]=o);for(let a=0;a<i;a++)o[a]=t[a];return o}function qA(t,e){return GA(t,e,Float32Array,NA)}function HA(t,e){return GA(t,e,Int32Array,UA)}function ZA(t,e){return GA(t,e,Uint32Array,VA)}function XA(t,e,n){const r=FA[n.type];if(!r)throw new Error("Unknown GLSL uniform type ".concat(n.type));return r().bind(null,t,e)}function YA(t){if("]"!==t[t.length-1])return{name:t,length:1,isArray:!1};const e=t.match(/([^[]*)(\[[0-9]+\])?/);if(!e||e.length<2)throw new Error("Failed to parse GLSL uniform name ".concat(t));return{name:e[1],length:e[2]||1,isArray:Boolean(e[2])}}function KA(t){return Array.isArray(t)||ArrayBuffer.isView(t)?function(t){if(0===t.length)return!1;const e=Math.min(t.length,16);for(let n=0;n<e;++n)if(!Number.isFinite(t[n]))return!1;return!0}(t):!!isFinite(t)||(!0===t||!1===t||(t instanceof LE||(t instanceof BE||t instanceof KE&&Boolean(t.texture))))}function $A(t,e,n){if(Array.isArray(n)||ArrayBuffer.isView(n))if(t[e]){const r=t[e];for(let t=0,e=n.length;t<e;++t)r[t]=n[t]}else t[e]=n.slice();else t[e]=n}function JA(){let t=null;return(e,n,r)=>{const i=t!==r;return i&&(e.uniform1i(n,r),t=r),i}}function QA(t,e,n,r){let i=null,o=null;return(a,s,l)=>{const c=e(l,n),u=c.length;let h=!1;if(null===i)i=new Float32Array(u),o=u,h=!0;else{aE(o===u,"Uniform length cannot change.");for(let t=0;t<u;++t)if(c[t]!==i[t]){h=!0;break}}return h&&(r(a,t,s,c),i.set(c)),h}}function tC(t,e,n,r){t[e](n,r)}function eC(t,e,n,r){t[e](n,!1,r)}function nC(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"unnamed";const n=t.match(/#define[\s*]SHADER_NAME[\s*]([A-Za-z0-9_-]+)[\s*]/);return n?n[1]:e}const rC=35632,iC=35633;function oC(t,e,n,r){const i=t.split(/\r?\n/),o={},a={},s=r||nC(e)||"(unnamed)",l="".concat(function(t){switch(t){case rC:return"fragment";case iC:return"vertex";default:return"unknown type"}}(n)," shader ").concat(s);for(let u=0;u<i.length;u++){const e=i[u];if(e.length<=1)continue;const n=e.split(":"),r=n[0],s=parseInt(n[2],10);if(isNaN(s))throw new Error("GLSL compilation error in ".concat(l,": ").concat(t));"WARNING"!==r?o[s]=e:a[s]=e}const c=function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:": ";const r=t.split(/\r?\n/),i=String(r.length+e-1).length;return r.map(((t,r)=>{const o=String(r+e),a=o.length;return sC(o,i-a)+n+t}))}(e);return{shaderName:l,errors:aC(o,c),warnings:aC(a,c)}}function aC(t,e){let n="";for(let r=0;r<e.length;r++){const i=e[r];if((t[r+3]||t[r+2]||t[r+1])&&(n+="".concat(i,"\n"),t[r+1])){const e=t[r+1],i=e.split(":",3),o=i[0],a=parseInt(i[1],10)||0,s=e.substring(i.join(":").length+1).trim();n+=sC("^^^ ".concat(o,": ").concat(s,"\n\n"),a)}}return n}function sC(t,e){let n="";for(let r=0;r<e;++r)n+=" ";return"".concat(n).concat(t)}class lC extends mE{get[Symbol.toStringTag](){return"Shader"}static getTypeName(t){switch(t){case 35633:return"vertex-shader";case 35632:return"fragment-shader";default:return aE(!1),"unknown"}}constructor(t,e){eS(t),aE("string"===typeof e.source,"Shader: GLSL source code must be a JavaScript string");super(t,{id:nC(e.source,null)||e.id||uE("unnamed ".concat(lC.getTypeName(e.shaderType)))}),this.shaderType=e.shaderType,this.source=e.source,this.initialize(e)}initialize(t){let{source:e}=t;const n=nC(e,null);n&&(this.id=uE(n)),this._compile(e)}getParameter(t){return this.gl.getShaderParameter(this.handle,t)}toString(){return"".concat(lC.getTypeName(this.shaderType),":").concat(this.id)}getName(){return nC(this.source)||"unnamed-shader"}getSource(){return this.gl.getShaderSource(this.handle)}getTranslatedSource(){const t=this.gl.getExtension("WEBGL_debug_shaders");return t?t.getTranslatedShaderSource(this.handle):"No translated source available. WEBGL_debug_shaders not implemented"}_compile(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.source;t.startsWith("#version ")||(t="#version 100\n".concat(t)),this.source=t,this.gl.shaderSource(this.handle,this.source),this.gl.compileShader(this.handle);if(!this.getParameter(35713)){const t=this.gl.getShaderInfoLog(this.handle),{shaderName:e,errors:n,warnings:r}=oC(t,this.source,this.shaderType,this.id);throw Yw.error("GLSL compilation errors in ".concat(e,"\n").concat(n))(),Yw.warn("GLSL compilation warnings in ".concat(e,"\n").concat(r))(),new Error("GLSL compilation errors in ".concat(e))}}_deleteHandle(){this.gl.deleteShader(this.handle)}_getOptsFromHandle(){return{type:this.getParameter(35663),source:this.getSource()}}}class cC extends lC{get[Symbol.toStringTag](){return"VertexShader"}constructor(t,e){"string"===typeof e&&(e={source:e}),super(t,Object.assign({},e,{shaderType:35633}))}_createHandle(){return this.gl.createShader(35633)}}class uC extends lC{get[Symbol.toStringTag](){return"FragmentShader"}constructor(t,e){"string"===typeof e&&(e={source:e}),super(t,Object.assign({},e,{shaderType:35632}))}_createHandle(){return this.gl.createShader(35632)}}const hC=5120,dC=5121,fC=5122,pC=5123,mC=0,gC=1,yC=2,vC=3,_C=4,bC=5,xC=6,wC=5126,SC=35664,EC=35665,TC=35666,MC=5124,AC=35667,CC=35668,PC=35669,kC=5125,IC=36294,OC=36295,LC=36296,jC=35670,zC=35671,RC=35672,DC=35673,BC=35674,FC=35675,NC=35676,UC=35685,VC=35686,WC=35687,GC=35688,qC=35689,HC=35690,ZC={[wC]:[wC,1,"float"],[SC]:[wC,2,"vec2"],[EC]:[wC,3,"vec3"],[TC]:[wC,4,"vec4"],[MC]:[MC,1,"int"],[AC]:[MC,2,"ivec2"],[CC]:[MC,3,"ivec3"],[PC]:[MC,4,"ivec4"],[kC]:[kC,1,"uint"],[IC]:[kC,2,"uvec2"],[OC]:[kC,3,"uvec3"],[LC]:[kC,4,"uvec4"],[jC]:[wC,1,"bool"],[zC]:[wC,2,"bvec2"],[RC]:[wC,3,"bvec3"],[DC]:[wC,4,"bvec4"],[BC]:[wC,8,"mat2"],[UC]:[wC,8,"mat2x3"],[VC]:[wC,8,"mat2x4"],[FC]:[wC,12,"mat3"],[WC]:[wC,12,"mat3x2"],[GC]:[wC,12,"mat3x4"],[NC]:[wC,16,"mat4"],[qC]:[wC,16,"mat4x2"],[HC]:[wC,16,"mat4x3"]};function XC(t){switch(t){case mC:return mC;case gC:case vC:case yC:return gC;case _C:case bC:case xC:return _C;default:return aE(!1),0}}function YC(t){const e=ZC[t];if(!e)return null;const[n,r]=e;return{type:n,components:r}}function KC(t,e){switch(t){case hC:case dC:case fC:case pC:t=wC}for(const n in ZC){const[r,i,o]=ZC[n];if(r===t&&i===e)return{glType:n,name:o}}return null}class $C{constructor(t){this.id=t.id,this.attributeInfos=[],this.attributeInfosByName={},this.attributeInfosByLocation=[],this.varyingInfos=[],this.varyingInfosByName={},Object.seal(this),this._readAttributesFromProgram(t),this._readVaryingsFromProgram(t)}getAttributeInfo(t){const e=Number(t);return Number.isFinite(e)?this.attributeInfosByLocation[e]:this.attributeInfosByName[t]||null}getAttributeLocation(t){const e=this.getAttributeInfo(t);return e?e.location:-1}getAttributeAccessor(t){const e=this.getAttributeInfo(t);return e?e.accessor:null}getVaryingInfo(t){const e=Number(t);return Number.isFinite(e)?this.varyingInfos[e]:this.varyingInfosByName[t]||null}getVaryingIndex(t){const e=this.getVaryingInfo();return e?e.location:-1}getVaryingAccessor(t){const e=this.getVaryingInfo();return e?e.accessor:null}_readAttributesFromProgram(t){const{gl:e}=t,n=e.getProgramParameter(t.handle,35721);for(let r=0;r<n;r++){const{name:n,type:i,size:o}=e.getActiveAttrib(t.handle,r),a=e.getAttribLocation(t.handle,n);a>=0&&this._addAttribute(a,n,i,o)}this.attributeInfos.sort(((t,e)=>t.location-e.location))}_readVaryingsFromProgram(t){const{gl:e}=t;if(!tS(e))return;const n=e.getProgramParameter(t.handle,35971);for(let r=0;r<n;r++){const{name:n,type:i,size:o}=e.getTransformFeedbackVarying(t.handle,r);this._addVarying(r,n,i,o)}this.varyingInfos.sort(((t,e)=>t.location-e.location))}_addAttribute(t,e,n,r){const{type:i,components:o}=YC(n),a={type:i,size:r*o};this._inferProperties(t,e,a);const s={location:t,name:e,accessor:new SE(a)};this.attributeInfos.push(s),this.attributeInfosByLocation[t]=s,this.attributeInfosByName[s.name]=s}_inferProperties(t,e,n){/instance/i.test(e)&&(n.divisor=1)}_addVarying(t,e,n,r){const{type:i,components:o}=YC(n),a={location:t,name:e,accessor:new SE({type:i,size:r*o})};this.varyingInfos.push(a),this.varyingInfosByName[a.name]=a}}const JC=35981,QC=["setVertexArray","setAttributes","setBuffers","unsetBuffers","use","getUniformCount","getUniformInfo","getUniformLocation","getUniformValue","getVarying","getFragDataLocation","getAttachedShaders","getAttributeCount","getAttributeLocation","getAttributeInfo"];class tP extends mE{get[Symbol.toStringTag](){return"Program"}constructor(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};super(t,e),this.stubRemovedMethods("Program","v6.0",QC),this._isCached=!1,this.initialize(e),Object.seal(this),this._setId(e.id)}initialize(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{hash:e,vs:n,fs:r,varyings:i,bufferMode:o=JC}=t;return this.hash=e||"",this.vs="string"===typeof n?new cC(this.gl,{id:"".concat(t.id,"-vs"),source:n}):n,this.fs="string"===typeof r?new uC(this.gl,{id:"".concat(t.id,"-fs"),source:r}):r,aE(this.vs instanceof cC),aE(this.fs instanceof uC),this.uniforms={},this._textureUniforms={},i&&i.length>0&&(nS(this.gl),this.varyings=i,this.gl2.transformFeedbackVaryings(this.handle,i,o)),this._compileAndLink(),this._readUniformLocationsFromLinkedProgram(),this.configuration=new $C(this),this.setProps(t)}delete(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this._isCached?this:super.delete(t)}setProps(t){return"uniforms"in t&&this.setUniforms(t.uniforms),this}draw(t){let{logPriority:e,drawMode:n=4,vertexCount:r,offset:i=0,start:o,end:a,isIndexed:s=!1,indexType:l=5123,instanceCount:c=0,isInstanced:u=c>0,vertexArray:h=null,transformFeedback:d,framebuffer:f,parameters:p={},uniforms:m,samplers:g}=t;if((m||g)&&(Yw.deprecated("Program.draw({uniforms})","Program.setUniforms(uniforms)")(),this.setUniforms(m||{})),Yw.priority>=e){const t=f?f.id:"default",i="mode=".concat(lE(this.gl,n)," verts=").concat(r," ")+"instances=".concat(c," indexType=").concat(lE(this.gl,l)," ")+"isInstanced=".concat(u," isIndexed=").concat(s," ")+"Framebuffer=".concat(t);Yw.log(e,i)()}return aE(h),this.gl.useProgram(this.handle),!(!this._areTexturesRenderable()||0===r||u&&0===c)&&(h.bindForDraw(r,c,(()=>{if(void 0!==f&&(p=Object.assign({},p,{framebuffer:f})),d){const t=XC(n);d.begin(t)}this._bindTextures(),GS(this.gl,p,(()=>{s&&u?this.gl2.drawElementsInstanced(n,r,l,i,c):s&&tS(this.gl)&&!isNaN(o)&&!isNaN(a)?this.gl2.drawRangeElements(n,o,a,r,l,i):s?this.gl.drawElements(n,r,l,i):u?this.gl2.drawArraysInstanced(n,i,r,c):this.gl.drawArrays(n,i,r)})),d&&d.end()})),!0)}setUniforms(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Yw.priority>=2&&function(t,e,n){for(const r in t){const i=t[r];if((!n||Boolean(n[r]))&&!KA(i))throw e=e?"".concat(e," "):"",console.error("".concat(e," Bad uniform ").concat(r),i),new Error("".concat(e," Bad uniform ").concat(r))}}(t,this.id,this._uniformSetters),this.gl.useProgram(this.handle);for(const e in t){const n=t[e],r=this._uniformSetters[e];if(r){let t=n,i=!1;if(t instanceof KE&&(t=t.texture),t instanceof LE)if(i=this.uniforms[e]!==n,i){void 0===r.textureIndex&&(r.textureIndex=this._textureIndexCounter++);const n=t,{textureIndex:i}=r;n.bind(i),t=i,this._textureUniforms[e]=n}else t=r.textureIndex;else this._textureUniforms[e]&&delete this._textureUniforms[e];(r(t)||i)&&$A(this.uniforms,e,n)}}return this}_areTexturesRenderable(){let t=!0;for(const e in this._textureUniforms){const n=this._textureUniforms[e];n.update(),t=t&&n.loaded}return t}_bindTextures(){for(const t in this._textureUniforms){const e=this._uniformSetters[t].textureIndex;this._textureUniforms[t].bind(e)}}_createHandle(){return this.gl.createProgram()}_deleteHandle(){this.gl.deleteProgram(this.handle)}_getOptionsFromHandle(t){const e=this.gl.getAttachedShaders(t),n={};for(const r of e){switch(this.gl.getShaderParameter(this.handle,35663)){case 35633:n.vs=new cC({handle:r});break;case 35632:n.fs=new uC({handle:r})}}return n}_getParameter(t){return this.gl.getProgramParameter(this.handle,t)}_setId(t){if(!t){const t=this._getName();this.id=uE(t)}}_getName(){let t=this.vs.getName()||this.fs.getName();return t=t.replace(/shader/i,""),t=t?"".concat(t,"-program"):"program",t}_compileAndLink(){const{gl:t}=this;if(t.attachShader(this.handle,this.vs.handle),t.attachShader(this.handle,this.fs.handle),Yw.time(4,"linkProgram for ".concat(this._getName()))(),t.linkProgram(this.handle),Yw.timeEnd(4,"linkProgram for ".concat(this._getName()))(),t.debug||Yw.level>0){if(!t.getProgramParameter(this.handle,35714))throw new Error("Error linking: ".concat(t.getProgramInfoLog(this.handle)));t.validateProgram(this.handle);if(!t.getProgramParameter(this.handle,35715))throw new Error("Error validating: ".concat(t.getProgramInfoLog(this.handle)))}}_readUniformLocationsFromLinkedProgram(){const{gl:t}=this;this._uniformSetters={},this._uniformCount=this._getParameter(35718);for(let e=0;e<this._uniformCount;e++){const n=this.gl.getActiveUniform(this.handle,e),{name:r}=YA(n.name);let i=t.getUniformLocation(this.handle,r);if(this._uniformSetters[r]=XA(t,i,n),n.size>1)for(let e=0;e<n.size;e++)i=t.getUniformLocation(this.handle,"".concat(r,"[").concat(e,"]")),this._uniformSetters["".concat(r,"[").concat(e,"]")]=XA(t,i,n)}this._textureIndexCounter=0}getActiveUniforms(t,e){return this.gl2.getActiveUniforms(this.handle,t,e)}getUniformBlockIndex(t){return this.gl2.getUniformBlockIndex(this.handle,t)}getActiveUniformBlockParameter(t,e){return this.gl2.getActiveUniformBlockParameter(this.handle,t,e)}uniformBlockBinding(t,e){this.gl2.uniformBlockBinding(this.handle,t,e)}}class eP{static getDefaultProgramManager(t){return t.luma=t.luma||{},t.luma.defaultProgramManager=t.luma.defaultProgramManager||new eP(t),t.luma.defaultProgramManager}constructor(t){this.gl=t,this._programCache={},this._getUniforms={},this._registeredModules={},this._hookFunctions=[],this._defaultModules=[],this._hashes={},this._hashCounter=0,this.stateHash=0,this._useCounts={}}addDefaultModule(t){this._defaultModules.find((e=>e.name===t.name))||this._defaultModules.push(t),this.stateHash++}removeDefaultModule(t){const e="string"===typeof t?t:t.name;this._defaultModules=this._defaultModules.filter((t=>t.name!==e)),this.stateHash++}addShaderHook(t,e){e&&(t=Object.assign(e,{hook:t})),this._hookFunctions.push(t),this.stateHash++}get(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{vs:e="",fs:n="",defines:r={},inject:i={},varyings:o=[],bufferMode:a=35981,transpileToGLSL100:s=!1}=t,l=this._getModuleList(t.modules),c=this._getHash(e),u=this._getHash(n),h=l.map((t=>this._getHash(t.name))).sort(),d=o.map((t=>this._getHash(t))),f=Object.keys(r).sort(),p=Object.keys(i).sort(),m=[],g=[];for(const v of f)m.push(this._getHash(v)),m.push(this._getHash(r[v]));for(const v of p)g.push(this._getHash(v)),g.push(this._getHash(i[v]));const y="".concat(c,"/").concat(u,"D").concat(m.join("/"),"M").concat(h.join("/"),"I").concat(g.join("/"),"V").concat(d.join("/"),"H").concat(this.stateHash,"B").concat(a).concat(s?"T":"");if(!this._programCache[y]){const t=function(t,e){const{vs:n,fs:r}=e,i=sA(e.modules||[]);return{gl:t,vs:DA(t,Object.assign({},e,{source:n,type:UM,modules:i})),fs:DA(t,Object.assign({},e,{source:r,type:VM,modules:i})),getUniforms:BA(i)}}(this.gl,{vs:e,fs:n,modules:l,inject:i,defines:r,hookFunctions:this._hookFunctions,transpileToGLSL100:s});this._programCache[y]=new tP(this.gl,{hash:y,vs:t.vs,fs:t.fs,varyings:o,bufferMode:a}),this._getUniforms[y]=t.getUniforms||(t=>{}),this._useCounts[y]=0}return this._useCounts[y]++,this._programCache[y]}getUniforms(t){return this._getUniforms[t.hash]||null}release(t){const e=t.hash;this._useCounts[e]--,0===this._useCounts[e]&&(this._programCache[e].delete(),delete this._programCache[e],delete this._getUniforms[e],delete this._useCounts[e])}_getHash(t){return void 0===this._hashes[t]&&(this._hashes[t]=this._hashCounter++),this._hashes[t]}_getModuleList(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];const e=new Array(this._defaultModules.length+t.length),n={};let r=0;for(let i=0,o=this._defaultModules.length;i<o;++i){const t=this._defaultModules[i],o=t.name;e[r++]=t,n[o]=!0}for(let i=0,o=t.length;i<o;++i){const o=t[i],a=o.name;n[a]||(e[r++]=o,n[a]=!0)}return e.length=r,e}}let nP=null;function rP(t,e){var n;return new t((n=t.BYTES_PER_ELEMENT*e,(!nP||nP.byteLength<n)&&(nP=new ArrayBuffer(n)),nP),0,e)}const iP=globalThis;function oP(t){if(!t&&!Ew())return"Node";if(Sw(t))return"Electron";const e="undefined"!==typeof navigator?navigator:{},n=t||e.userAgent||"";if(n.indexOf("Edge")>-1)return"Edge";const r=-1!==n.indexOf("MSIE "),i=-1!==n.indexOf("Trident/");return r||i?"IE":iP.chrome?"Chrome":iP.safari?"Safari":iP.mozInnerScreenX?"Firefox":"Unknown"}class aP extends mE{get[Symbol.toStringTag](){return"VertexArrayObject"}static isSupported(t){return!(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).constantAttributeZero||(tS(t)||"Chrome"===oP())}static getDefaultArray(t){return t.luma=t.luma||{},t.luma.defaultVertexArray||(t.luma.defaultVertexArray=new aP(t,{handle:null,isDefaultArray:!0})),t.luma.defaultVertexArray}static getMaxAttributes(t){return aP.MAX_ATTRIBUTES=aP.MAX_ATTRIBUTES||t.getParameter(34921),aP.MAX_ATTRIBUTES}static setConstant(t,e,n){switch(n.constructor){case Float32Array:aP._setConstantFloatArray(t,e,n);break;case Int32Array:aP._setConstantIntArray(t,e,n);break;case Uint32Array:aP._setConstantUintArray(t,e,n);break;default:aE(!1)}}constructor(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=e.id||e.program&&e.program.id;super(t,Object.assign({},e,{id:n})),this.buffer=null,this.bufferValue=null,this.isDefaultArray=e.isDefaultArray||!1,this.gl2=t,this.initialize(e),Object.seal(this)}delete(){return super.delete(),this.buffer&&this.buffer.delete(),this}get MAX_ATTRIBUTES(){return aP.getMaxAttributes(this.gl)}initialize(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.setProps(t)}setProps(t){return this}setElementBuffer(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return aE(!t||34963===t.target,"elements must be GL.ELEMENT_ARRAY_BUFFER"),this.bind((()=>{this.gl.bindBuffer(34963,t?t.handle:null)})),this}setBuffer(t,e,n){if(34963===e.target)return this.setElementBuffer(e,n);const{size:r,type:i,stride:o,offset:a,normalized:s,integer:l,divisor:c}=n,{gl:u,gl2:h}=this;return t=Number(t),this.bind((()=>{u.bindBuffer(34962,e.handle),l?(aE(tS(u)),h.vertexAttribIPointer(t,r,i,o,a)):u.vertexAttribPointer(t,r,i,s,o,a),u.enableVertexAttribArray(t),h.vertexAttribDivisor(t,c||0)})),this}enable(t){let e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return!e&&0===t&&!aP.isSupported(this.gl,{constantAttributeZero:!0})||(t=Number(t),this.bind((()=>e?this.gl.enableVertexAttribArray(t):this.gl.disableVertexAttribArray(t)))),this}getConstantBuffer(t,e){const n=this._normalizeConstantArrayValue(e),r=n.byteLength*t,i=n.length*t;let o=!this.buffer;if(this.buffer=this.buffer||new AE(this.gl,r),o=o||this.buffer.reallocate(r),o=o||!this._compareConstantArrayValues(n,this.bufferValue),o){const t=rP(e.constructor,i);!function(t){let{target:e,source:n,start:r=0,count:i=1}=t;const o=n.length,a=i*o;let s=0;for(let l=r;s<o;s++)e[l++]=n[s];for(;s<a;)s<a-s?(e.copyWithin(r+s,r,r+s),s*=2):(e.copyWithin(r+s,r,r+a-s),s=a)}({target:t,source:n,start:0,count:i}),this.buffer.subData(t),this.bufferValue=e}return this.buffer}_normalizeConstantArrayValue(t){return Array.isArray(t)?new Float32Array(t):t}_compareConstantArrayValues(t,e){if(!t||!e||t.length!==e.length||t.constructor!==e.constructor)return!1;for(let n=0;n<t.length;++n)if(t[n]!==e[n])return!1;return!0}static _setConstantFloatArray(t,e,n){switch(n.length){case 1:t.vertexAttrib1fv(e,n);break;case 2:t.vertexAttrib2fv(e,n);break;case 3:t.vertexAttrib3fv(e,n);break;case 4:t.vertexAttrib4fv(e,n);break;default:aE(!1)}}static _setConstantIntArray(t,e,n){switch(aE(tS(t)),n.length){case 1:t.vertexAttribI1iv(e,n);break;case 2:t.vertexAttribI2iv(e,n);break;case 3:t.vertexAttribI3iv(e,n);break;case 4:t.vertexAttribI4iv(e,n);break;default:aE(!1)}}static _setConstantUintArray(t,e,n){switch(aE(tS(t)),n.length){case 1:t.vertexAttribI1uiv(e,n);break;case 2:t.vertexAttribI2uiv(e,n);break;case 3:t.vertexAttribI3uiv(e,n);break;case 4:t.vertexAttribI4uiv(e,n);break;default:aE(!1)}}_createHandle(){return this.gl.createVertexArray()}_deleteHandle(t){return this.gl2.deleteVertexArray(t),[this.elements]}_bindHandle(t){this.gl2.bindVertexArray(t)}_getParameter(t,e){let{location:n}=e;return aE(Number.isFinite(n)),this.bind((()=>34373===t?this.gl.getVertexAttribOffset(n,t):this.gl.getVertexAttrib(n,t)))}}const sP=/^(.+)__LOCATION_([0-9]+)$/,lP=["setBuffers","setGeneric","clearBindings","setLocations","setGenericValues","setDivisor","enable","disable"];class cP{constructor(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=e.id||e.program&&e.program.id;this.id=n,this.gl=t,this.configuration=null,this.elements=null,this.elementsAccessor=null,this.values=null,this.accessors=null,this.unused=null,this.drawParams=null,this.buffer=null,this.attributes={},this.vertexArrayObject=new aP(t),fE(this,"VertexArray","v6.0",lP),this.initialize(e),Object.seal(this)}delete(){this.buffer&&this.buffer.delete(),this.vertexArrayObject.delete()}initialize(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.reset(),this.configuration=null,this.bindOnUse=!1,this.setProps(t)}reset(){this.elements=null,this.elementsAccessor=null;const{MAX_ATTRIBUTES:t}=this.vertexArrayObject;return this.values=new Array(t).fill(null),this.accessors=new Array(t).fill(null),this.unused={},this.drawParams=null,this}setProps(t){return"program"in t&&(this.configuration=t.program&&t.program.configuration),"configuration"in t&&(this.configuration=t.configuration),"attributes"in t&&this.setAttributes(t.attributes),"elements"in t&&this.setElementBuffer(t.elements),"bindOnUse"in t&&(t=t.bindOnUse),this}clearDrawParams(){this.drawParams=null}getDrawParams(){return this.drawParams=this.drawParams||this._updateDrawParams(),this.drawParams}setAttributes(t){return Object.assign(this.attributes,t),this.vertexArrayObject.bind((()=>{for(const e in t){const n=t[e];this._setAttribute(e,n)}this.gl.bindBuffer(34962,null)})),this}setElementBuffer(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.elements=t,this.elementsAccessor=e,this.clearDrawParams(),this.vertexArrayObject.setElementBuffer(t,e),this}setBuffer(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(34963===e.target)return this.setElementBuffer(e,n);const{location:r,accessor:i}=this._resolveLocationAndAccessor(t,e,e.accessor,n);return r>=0&&(this.values[r]=e,this.accessors[r]=i,this.clearDrawParams(),this.vertexArrayObject.setBuffer(r,e,i)),this}setConstant(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const{location:r,accessor:i}=this._resolveLocationAndAccessor(t,e,Object.assign({size:e.length},n));return r>=0&&(e=this.vertexArrayObject._normalizeConstantArrayValue(e),this.values[r]=e,this.accessors[r]=i,this.clearDrawParams(),this.vertexArrayObject.enable(r,!1)),this}unbindBuffers(){return this.vertexArrayObject.bind((()=>{this.elements&&this.vertexArrayObject.setElementBuffer(null),this.buffer=this.buffer||new AE(this.gl,{accessor:{size:4}});for(let t=0;t<this.vertexArrayObject.MAX_ATTRIBUTES;t++)this.values[t]instanceof AE&&(this.gl.disableVertexAttribArray(t),this.gl.bindBuffer(34962,this.buffer.handle),this.gl.vertexAttribPointer(t,1,5126,!1,0,0))})),this}bindBuffers(){return this.vertexArrayObject.bind((()=>{this.elements&&this.setElementBuffer(this.elements);for(let t=0;t<this.vertexArrayObject.MAX_ATTRIBUTES;t++){const e=this.values[t];e instanceof AE&&this.setBuffer(t,e)}})),this}bindForDraw(t,e,n){let r;return this.vertexArrayObject.bind((()=>{this._setConstantAttributes(t,e),r=n()})),r}_resolveLocationAndAccessor(t,e,n,r){const i={location:-1,accessor:null},{location:o,name:a}=this._getAttributeIndex(t);if(!Number.isFinite(o)||o<0)return this.unused[t]=e,Yw.once(3,(()=>"unused value ".concat(t," in ").concat(this.id)))(),i;const s=this._getAttributeInfo(a||o);if(!s)return i;const l=this.accessors[o]||{},c=SE.resolve(s.accessor,l,n,r),{size:u,type:h}=c;return aE(Number.isFinite(u)&&Number.isFinite(h)),{location:o,accessor:c}}_getAttributeInfo(t){return this.configuration&&this.configuration.getAttributeInfo(t)}_getAttributeIndex(t){const e=Number(t);if(Number.isFinite(e))return{location:e};const n=sP.exec(t),r=n?n[1]:t,i=n?Number(n[2]):0;return this.configuration?{location:this.configuration.getAttributeLocation(r)+i,name:r}:{location:-1}}_setAttribute(t,e){if(e instanceof AE)this.setBuffer(t,e);else if(Array.isArray(e)&&e.length&&e[0]instanceof AE){const n=e[0],r=e[1];this.setBuffer(t,n,r)}else if(ArrayBuffer.isView(e)||Array.isArray(e)){const n=e;this.setConstant(t,n)}else{if(!(e.buffer instanceof AE))throw new Error("VertexArray: attributes must be Buffers or constants (i.e. typed array)");{const n=e;this.setBuffer(t,n.buffer,n)}}}_setConstantAttributes(t,e){const n=Math.max(0|t,0|e);let r=this.values[0];ArrayBuffer.isView(r)&&this._setConstantAttributeZero(r,n);for(let i=1;i<this.vertexArrayObject.MAX_ATTRIBUTES;i++)r=this.values[i],ArrayBuffer.isView(r)&&this._setConstantAttribute(i,r)}_setConstantAttributeZero(t,e){if(aP.isSupported(this.gl,{constantAttributeZero:!0}))return void this._setConstantAttribute(0,t);const n=this.vertexArrayObject.getConstantBuffer(e,t);this.vertexArrayObject.setBuffer(0,n,this.accessors[0])}_setConstantAttribute(t,e){aP.setConstant(this.gl,t,e)}_updateDrawParams(){const t={isIndexed:!1,isInstanced:!1,indexCount:1/0,vertexCount:1/0,instanceCount:1/0};for(let e=0;e<this.vertexArrayObject.MAX_ATTRIBUTES;e++)this._updateDrawParamsForLocation(t,e);return this.elements&&(t.elementCount=this.elements.getElementCount(this.elements.accessor),t.isIndexed=!0,t.indexType=this.elementsAccessor.type||this.elements.accessor.type,t.indexOffset=this.elementsAccessor.offset||0),t.indexCount===1/0&&(t.indexCount=0),t.vertexCount===1/0&&(t.vertexCount=0),t.instanceCount===1/0&&(t.instanceCount=0),t}_updateDrawParamsForLocation(t,e){const n=this.values[e],r=this.accessors[e];if(!n)return;const{divisor:i}=r,o=i>0;if(t.isInstanced=t.isInstanced||o,n instanceof AE){const e=n;if(o){const n=e.getVertexCount(r);t.instanceCount=Math.min(t.instanceCount,n)}else{const n=e.getVertexCount(r);t.vertexCount=Math.min(t.vertexCount,n)}}}setElements(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Yw.deprecated("setElements","setElementBuffer")(),this.setElementBuffer(t,e)}}function uP(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{isInteger:n=!1}=e;if(Array.isArray(t)||ArrayBuffer.isView(t))return function(t,e){const{maxElts:n=16,size:r=1}=e;let i="[";for(let a=0;a<t.length&&a<n;++a)a>0&&(i+=",".concat(a%r===0?" ":"")),i+=uP(t[a],e);const o=t.length>n?"...":"]";return"".concat(i).concat(o)}(t,e);if(!Number.isFinite(t))return String(t);if(Math.abs(t)<1e-16)return n?"0":"0.";if(n)return t.toFixed(0);if(Math.abs(t)>100&&Math.abs(t)<1e4)return t.toFixed(0);const r=t.toPrecision(2);return r.indexOf(".0")===r.length-2?r.slice(0,-1):r}function hP(t,e,n,r){const{gl:i}=t;if(!e)return{[r]:"null","Format ":"N/A"};let o,a,s,l="NOT PROVIDED",c=1,u=0,h=0;if(n&&(l=n.type,c=n.size,l=String(l).replace("Array",""),o=-1!==l.indexOf("nt")),e instanceof AE){const t=e,{data:d,changed:f}=t.getDebugData();let p;if(a=f?"*":"",s=d,h=t.byteLength,u=h/d.BYTES_PER_ELEMENT/c,n){const t=n.divisor>0;p="".concat(t?"I ":"P "," ").concat(u," (x").concat(c,"=").concat(h," bytes ").concat(lE(i,l),")")}else o=!0,p="".concat(h," bytes");return{[r]:"".concat(a).concat(uP(s,{size:c,isInteger:o})),"Format ":p}}return s=e,c=e.length,l=String(e.constructor.name).replace("Array",""),o=-1!==l.indexOf("nt"),{[r]:"".concat(uP(s,{size:c,isInteger:o})," (constant)"),"Format ":"".concat(c,"x").concat(l," (constant)")}}function dP(t,e){const{type:n,size:r}=e,i=KC(n,r);return i?"".concat(t," (").concat(i.name,")"):t}function fP(t){let{header:e="Uniforms",program:n,uniforms:r,undefinedOnly:i=!1}=t;aE(n);const o=".*Matrix",a=n._uniformSetters,s={},l=Object.keys(a).sort();let c=0;for(const d of l)d.match(".*_.*")||d.match(o)||pP({table:s,header:e,uniforms:r,uniformName:d,undefinedOnly:i})&&c++;for(const d of l)d.match(o)&&pP({table:s,header:e,uniforms:r,uniformName:d,undefinedOnly:i})&&c++;for(const d of l)s[d]||pP({table:s,header:e,uniforms:r,uniformName:d,undefinedOnly:i})&&c++;let u=0;const h={};if(!i)for(const d in r){const t=r[d];s[d]||(u++,h[d]={Type:"NOT USED: ".concat(t),[e]:uP(t)})}return{table:s,count:c,unusedTable:h,unusedCount:u}}function pP(t){let{table:e,header:n,uniforms:r,uniformName:i,undefinedOnly:o}=t;const a=r[i],s=function(t){return void 0!==t&&null!==t}(a);return(!o||!s)&&(e[i]={[n]:s?uP(a):"N/A","Uniform Type":s?a:"NOT PROVIDED"},!0)}function mP(t){const{type:e,size:n}=t.accessor,r=KC(e,n);return r?"".concat(r.name," ").concat(t.name):t.name}const gP={POSITION:"positions",NORMAL:"normals",COLOR_0:"colors",TEXCOORD_0:"texCoords",TEXCOORD_1:"texCoords1",TEXCOORD_2:"texCoords2"};function yP(t,e){const{attributeMap:n=gP}=e||{};return n&&n[t]||t}function vP(t,e){let n;switch(t){case"texCoords":case"texCoord1":case"texCoord2":case"texCoord3":n="uvs";break;case"vertices":case"positions":case"normals":case"pickingColors":n="vectors"}switch(n){case"vectors":e.size=e.size||3;break;case"uvs":e.size=e.size||2}aE(Number.isFinite(e.size),"attribute ".concat(t," needs size"))}const _P=()=>{},bP={};class xP{constructor(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{id:n=uE("model")}=e;aE(Qw(t)),this.id=n,this.gl=t,this.id=e.id||uE("Model"),this.lastLogTime=0,this.animated=!1,this.initialize(e)}initialize(t){this.props={},this.programManager=t.programManager||eP.getDefaultProgramManager(this.gl),this._programManagerState=-1,this._managedProgram=!1;const{program:e=null,vs:n,fs:r,modules:i,defines:o,inject:a,varyings:s,bufferMode:l,transpileToGLSL100:c}=t;this.programProps={program:e,vs:n,fs:r,modules:i,defines:o,inject:a,varyings:s,bufferMode:l,transpileToGLSL100:c},this.program=null,this.vertexArray=null,this._programDirty=!0,this.userData={},this.needsRedraw=!0,this._attributes={},this.attributes={},this.uniforms={},this.pickable=!0,this._checkProgram(),this.setUniforms(Object.assign({},this.getModuleUniforms(t.moduleSettings))),this.drawMode=void 0!==t.drawMode?t.drawMode:4,this.vertexCount=t.vertexCount||0,this.geometryBuffers={},this.isInstanced=t.isInstanced||t.instanced||t.instanceCount>0,this._setModelProps(t),this.geometry={},aE(void 0!==this.drawMode&&Number.isFinite(this.vertexCount),"Model needs drawMode and vertexCount")}setProps(t){this._setModelProps(t)}delete(){for(const t in this._attributes)this._attributes[t]!==this.attributes[t]&&this._attributes[t].delete();this._managedProgram&&(this.programManager.release(this.program),this._managedProgram=!1),this.vertexArray.delete(),this._deleteGeometryBuffers()}getDrawMode(){return this.drawMode}getVertexCount(){return this.vertexCount}getInstanceCount(){return this.instanceCount}getAttributes(){return this.attributes}getProgram(){return this.program}setProgram(t){const{program:e,vs:n,fs:r,modules:i,defines:o,inject:a,varyings:s,bufferMode:l,transpileToGLSL100:c}=t;this.programProps={program:e,vs:n,fs:r,modules:i,defines:o,inject:a,varyings:s,bufferMode:l,transpileToGLSL100:c},this._programDirty=!0}getUniforms(){return this.uniforms}setDrawMode(t){return this.drawMode=t,this}setVertexCount(t){return aE(Number.isFinite(t)),this.vertexCount=t,this}setInstanceCount(t){return aE(Number.isFinite(t)),this.instanceCount=t,this}setGeometry(t){return this.drawMode=t.drawMode,this.vertexCount=t.getVertexCount(),this._deleteGeometryBuffers(),this.geometryBuffers=function(t,e,n){const r={};let i=e.indices;for(const o in e.attributes){const a=e.attributes[o],s=yP(o,n);if("indices"===o)i=a;else if(a.constant)r[s]=a.value;else{const e=a.value,n={...a};delete n.value,r[s]=[new AE(t,e),n],vP(o,n)}}if(i){const e=i.value||i;aE(e instanceof Uint16Array||e instanceof Uint32Array,'attribute array for "indices" must be of integer type');const n={size:1,isIndexed:void 0===i.isIndexed||i.isIndexed};r.indices=[new AE(t,{data:e,target:34963}),n]}return r}(this.gl,t),this.vertexArray.setAttributes(this.geometryBuffers),this}setAttributes(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(dE(t))return this;const e={};for(const n in t){const r=t[n];e[n]=r.getValue?r.getValue():r}return this.vertexArray.setAttributes(e),this}setUniforms(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object.assign(this.uniforms,t),this}getModuleUniforms(t){this._checkProgram();const e=this.programManager.getUniforms(this.program);return e?e(t):{}}updateModuleSettings(t){const e=this.getModuleUniforms(t||{});return this.setUniforms(e)}clear(t){return UE(this.program.gl,t),this}draw(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this._checkProgram();const{moduleSettings:e=null,framebuffer:n,uniforms:r={},attributes:i={},transformFeedback:o=this.transformFeedback,parameters:a={},vertexArray:s=this.vertexArray}=t;let l;this.setAttributes(i),this.updateModuleSettings(e),this.setUniforms(r),Yw.priority>=2&&(l=this._logDrawCallStart(2));const c=this.vertexArray.getDrawParams(),{isIndexed:u=c.isIndexed,indexType:h=c.indexType,indexOffset:d=c.indexOffset,vertexArrayInstanced:f=c.isInstanced}=this.props;f&&!this.isInstanced&&Yw.warn("Found instanced attributes on non-instanced model",this.id)();const{isInstanced:p,instanceCount:m}=this,{onBeforeRender:g=_P,onAfterRender:y=_P}=this.props;g(),this.program.setUniforms(this.uniforms);const v=this.program.draw(Object.assign(bP,t,{logPriority:l,uniforms:null,framebuffer:n,parameters:a,drawMode:this.getDrawMode(),vertexCount:this.getVertexCount(),vertexArray:s,transformFeedback:o,isIndexed:u,indexType:h,isInstanced:p,instanceCount:m,offset:u?d:0}));return y(),Yw.priority>=2&&this._logDrawCallEnd(l,s,n),v}transform(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{discard:e=!0,feedbackBuffers:n,unbindModels:r=[]}=t;let{parameters:i}=t;n&&this._setFeedbackBuffers(n),e&&(i=Object.assign({},i,{35977:e})),r.forEach((t=>t.vertexArray.unbindBuffers()));try{this.draw(Object.assign({},t,{parameters:i}))}finally{r.forEach((t=>t.vertexArray.bindBuffers()))}return this}render(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Yw.warn("Model.render() is deprecated. Use Model.setUniforms() and Model.draw()")(),this.setUniforms(t).draw()}_setModelProps(t){Object.assign(this.props,t),"uniforms"in t&&this.setUniforms(t.uniforms),"pickable"in t&&(this.pickable=t.pickable),"instanceCount"in t&&(this.instanceCount=t.instanceCount),"geometry"in t&&this.setGeometry(t.geometry),"attributes"in t&&this.setAttributes(t.attributes),"_feedbackBuffers"in t&&this._setFeedbackBuffers(t._feedbackBuffers)}_checkProgram(){if(!(this._programDirty||this.programManager.stateHash!==this._programManagerState))return;let{program:t}=this.programProps;if(t)this._managedProgram=!1;else{const{vs:e,fs:n,modules:r,inject:i,defines:o,varyings:a,bufferMode:s,transpileToGLSL100:l}=this.programProps;t=this.programManager.get({vs:e,fs:n,modules:r,inject:i,defines:o,varyings:a,bufferMode:s,transpileToGLSL100:l}),this.program&&this._managedProgram&&this.programManager.release(this.program),this._programManagerState=this.programManager.stateHash,this._managedProgram=!0}aE(t instanceof tP,"Model needs a program"),this._programDirty=!1,t!==this.program&&(this.program=t,this.vertexArray?this.vertexArray.setProps({program:this.program,attributes:this.vertexArray.attributes}):this.vertexArray=new cP(this.gl,{program:this.program}),this.setUniforms(Object.assign({},this.getModuleUniforms())))}_deleteGeometryBuffers(){for(const t in this.geometryBuffers){const e=this.geometryBuffers[t][0]||this.geometryBuffers[t];e instanceof AE&&e.delete()}}_setAnimationProps(t){this.animated&&aE(t,"Model.draw(): animated uniforms but no animationProps")}_setFeedbackBuffers(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(dE(t))return this;const{gl:e}=this.program;return this.transformFeedback=this.transformFeedback||new BM(e,{program:this.program}),this.transformFeedback.setBuffers(t),this}_logDrawCallStart(t){const e=t>3?0:1e4;if(!(Date.now()-this.lastLogTime<e))return this.lastLogTime=Date.now(),Yw.group(2,">>> DRAWING MODEL ".concat(this.id),{collapsed:Yw.level<=2})(),t}_logDrawCallEnd(t,e,n,r){if(void 0===t)return;const i=function(t){let{vertexArray:e,header:n="Attributes"}=t;if(!e.configuration)return{};const r={};e.elements&&(r.ELEMENT_ARRAY_BUFFER=hP(e,e.elements,null,n));const i=e.values;for(const o in i){const t=e._getAttributeInfo(o);if(t){let a="".concat(o,": ").concat(t.name);const s=e.accessors[t.location];s&&(a="".concat(o,": ").concat(dP(t.name,s))),r[a]=hP(e,i[o],s,n)}}return r}({vertexArray:e,header:"".concat(this.id," attributes"),attributes:this._attributes}),{table:o,unusedTable:a,unusedCount:s}=fP({header:"".concat(this.id," uniforms"),program:this.program,uniforms:Object.assign({},this.program.uniforms,n)}),{table:l,count:c}=fP({header:"".concat(this.id," uniforms"),program:this.program,uniforms:Object.assign({},this.program.uniforms,n),undefinedOnly:!0});c>0&&Yw.log("MISSING UNIFORMS",Object.keys(l))(),s>0&&Yw.log("UNUSED UNIFORMS",Object.keys(a))();const u=function(t){const e={},n="Accessors for ".concat(t.id);for(const r of t.attributeInfos)if(r){const t=mP(r);e["in ".concat(t)]={[n]:JSON.stringify(r.accessor)}}for(const r of t.varyingInfos)if(r){const t=mP(r);e["out ".concat(t)]={[n]:JSON.stringify(r.accessor)}}return e}(this.vertexArray.configuration);Yw.table(t,i)(),Yw.table(t,o)(),Yw.table(t+1,u)(),r&&r.log({logLevel:2,message:"Rendered to ".concat(r.id)}),Yw.groupEnd(2)()}}class wP{static isSupported(t){return tS(t)}constructor(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.gl=t,this.model=null,this.elementCount=0,this.bufferTransform=null,this.textureTransform=null,this.elementIDBuffer=null,this._initialize(e),Object.seal(this)}delete(){const{model:t,bufferTransform:e,textureTransform:n}=this;t&&t.delete(),e&&e.delete(),n&&n.delete()}run(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{clearRenderTarget:e=!0}=t,n=this._updateDrawOptions(t);e&&n.framebuffer&&n.framebuffer.clear({color:!0}),this.model.transform(n)}swap(){let t=!1;const e=[this.bufferTransform,this.textureTransform].filter(Boolean);for(const n of e)t=t||n.swap();aE(t,"Nothing to swap")}getBuffer(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return this.bufferTransform&&this.bufferTransform.getBuffer(t)}getData(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const e=[this.bufferTransform,this.textureTransform].filter(Boolean);for(const n of e){const e=n.getData(t);if(e)return e}return null}getFramebuffer(){return this.textureTransform&&this.textureTransform.getFramebuffer()}update(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};"elementCount"in t&&this.model.setVertexCount(t.elementCount);const e=[this.bufferTransform,this.textureTransform].filter(Boolean);for(const n of e)n.update(t)}_initialize(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{gl:e}=this;this._buildResourceTransforms(e,t),t=this._updateModelProps(t),this.model=new xP(e,Object.assign({},t,{fs:t.fs||DM({version:NM(t.vs)}),id:t.id||"transform-model",drawMode:t.drawMode||0,vertexCount:t.elementCount})),this.bufferTransform&&this.bufferTransform.setupResources({model:this.model})}_updateModelProps(t){let e=Object.assign({},t);const n=[this.bufferTransform,this.textureTransform].filter(Boolean);for(const r of n)e=r.updateModelProps(e);return e}_buildResourceTransforms(t,e){(function(t){if(!dE(t.feedbackBuffers)||!dE(t.feedbackMap)||t.varyings&&t.varyings.length>0)return!0;return!1})(e)&&(this.bufferTransform=new FM(t,e)),function(t){if(!dE(t._sourceTextures)||t._targetTexture||t._targetTextureVarying)return!0;return!1}(e)&&(this.textureTransform=new nA(t,e)),aE(this.bufferTransform||this.textureTransform,"must provide source/feedback buffers or source/target textures")}_updateDrawOptions(t){let e=Object.assign({},t);const n=[this.bufferTransform,this.textureTransform].filter(Boolean);for(const r of n)e=Object.assign(e,r.getDrawOptions(e));return e}}class SP{constructor(t){ww(this,"_inProgress",void 0),ww(this,"_handle",void 0),ww(this,"_timeline",void 0),ww(this,"time",void 0),ww(this,"settings",void 0),this._inProgress=!1,this._handle=null,this._timeline=t,this.time=0,this.settings={duration:0}}get inProgress(){return this._inProgress}start(t){var e,n;this.cancel(),this.settings=t,this._inProgress=!0,null===(e=(n=this.settings).onStart)||void 0===e||e.call(n,this)}end(){var t,e;this._inProgress&&(this._timeline.removeChannel(this._handle),this._handle=null,this._inProgress=!1,null===(t=(e=this.settings).onEnd)||void 0===t||t.call(e,this))}cancel(){var t,e;this._inProgress&&(null===(t=(e=this.settings).onInterrupt)||void 0===t||t.call(e,this),this._timeline.removeChannel(this._handle),this._handle=null,this._inProgress=!1)}update(){var t,e;if(!this._inProgress)return!1;if(null===this._handle){const{_timeline:t,settings:e}=this;this._handle=t.addChannel({delay:t.getTime(),duration:e.duration})}return this.time=this._timeline.getTime(this._handle),this._onUpdate(),null===(t=(e=this.settings).onUpdate)||void 0===t||t.call(e,this),this._timeline.isFinished(this._handle)&&this.end(),!0}_onUpdate(){}}const EP="\n#define SHADER_NAME interpolation-transition-vertex-shader\n\nuniform float time;\nattribute ATTRIBUTE_TYPE aFrom;\nattribute ATTRIBUTE_TYPE aTo;\nvarying ATTRIBUTE_TYPE vCurrent;\n\nvoid main(void) {\n  vCurrent = mix(aFrom, aTo, time);\n  gl_Position = vec4(0.0);\n}\n";const TP={interpolation:class{constructor(t){let{gl:e,attribute:n,timeline:r}=t;ww(this,"gl",void 0),ww(this,"type","interpolation"),ww(this,"attributeInTransition",void 0),ww(this,"settings",void 0),ww(this,"attribute",void 0),ww(this,"transition",void 0),ww(this,"currentStartIndices",void 0),ww(this,"currentLength",void 0),ww(this,"transform",void 0),ww(this,"buffers",void 0),this.gl=e,this.transition=new SP(r),this.attribute=n,this.attributeInTransition=new AM(e,n.settings),this.currentStartIndices=n.startIndices,this.currentLength=0,this.transform=function(t,e){const n=SM(e.size);return new wP(t,{vs:EP,defines:{ATTRIBUTE_TYPE:n},varyings:["vCurrent"]})}(e,n);const i={byteLength:0,usage:35050};this.buffers=[new AE(e,i),new AE(e,i)]}get inProgress(){return this.transition.inProgress}start(t,e){if(t.duration<=0)return void this.transition.cancel();this.settings=t;const{gl:n,buffers:r,attribute:i}=this;EM(r);const o={numInstances:e,attribute:i,fromLength:this.currentLength,fromStartIndices:this.currentStartIndices,getData:t.enter};for(const a of r)MM({buffer:a,...o});this.currentStartIndices=i.startIndices,this.currentLength=TM(i,e),this.attributeInTransition.setData({buffer:r[1],value:i.value}),this.transition.start(t),this.transform.update({elementCount:Math.floor(this.currentLength/i.size),sourceBuffers:{aFrom:r[0],aTo:wM(0,i)},feedbackBuffers:{vCurrent:r[1]}})}update(){const t=this.transition.update();if(t){const{duration:t,easing:e}=this.settings,{time:n}=this.transition;let r=n/t;e&&(r=e(r)),this.transform.run({uniforms:{time:r}})}return t}cancel(){this.transition.cancel(),this.transform.delete();for(const t of this.buffers)t.delete();this.buffers.length=0}},spring:class{constructor(t){let{gl:e,attribute:n,timeline:r}=t;ww(this,"gl",void 0),ww(this,"type","spring"),ww(this,"attributeInTransition",void 0),ww(this,"settings",void 0),ww(this,"attribute",void 0),ww(this,"transition",void 0),ww(this,"currentStartIndices",void 0),ww(this,"currentLength",void 0),ww(this,"texture",void 0),ww(this,"framebuffer",void 0),ww(this,"transform",void 0),ww(this,"buffers",void 0),this.gl=e,this.type="spring",this.transition=new SP(r),this.attribute=n,this.attributeInTransition=new AM(e,{...n.settings,normalized:!1}),this.currentStartIndices=n.startIndices,this.currentLength=0,this.texture=function(t){return new zE(t,{data:new Uint8Array(4),format:6408,type:5121,border:0,mipmaps:!1,dataFormat:6408,width:1,height:1})}(e),this.framebuffer=function(t,e){return new KE(t,{id:"spring-transition-is-transitioning-framebuffer",width:1,height:1,attachments:{36064:e}})}(e,this.texture),this.transform=function(t,e,n){const r=SM(e.size);return new wP(t,{framebuffer:n,vs:"\n#define SHADER_NAME spring-transition-vertex-shader\n\n#define EPSILON 0.00001\n\nuniform float stiffness;\nuniform float damping;\nattribute ATTRIBUTE_TYPE aPrev;\nattribute ATTRIBUTE_TYPE aCur;\nattribute ATTRIBUTE_TYPE aTo;\nvarying ATTRIBUTE_TYPE vNext;\nvarying float vIsTransitioningFlag;\n\nATTRIBUTE_TYPE getNextValue(ATTRIBUTE_TYPE cur, ATTRIBUTE_TYPE prev, ATTRIBUTE_TYPE dest) {\n  ATTRIBUTE_TYPE velocity = cur - prev;\n  ATTRIBUTE_TYPE delta = dest - cur;\n  ATTRIBUTE_TYPE spring = delta * stiffness;\n  ATTRIBUTE_TYPE damper = velocity * -1.0 * damping;\n  return spring + damper + velocity + cur;\n}\n\nvoid main(void) {\n  bool isTransitioning = length(aCur - aPrev) > EPSILON || length(aTo - aCur) > EPSILON;\n  vIsTransitioningFlag = isTransitioning ? 1.0 : 0.0;\n\n  vNext = getNextValue(aCur, aPrev, aTo);\n  gl_Position = vec4(0, 0, 0, 1);\n  gl_PointSize = 100.0;\n}\n",fs:"\n#define SHADER_NAME spring-transition-is-transitioning-fragment-shader\n\nvarying float vIsTransitioningFlag;\n\nvoid main(void) {\n  if (vIsTransitioningFlag == 0.0) {\n    discard;\n  }\n  gl_FragColor = vec4(1.0);\n}",defines:{ATTRIBUTE_TYPE:r},varyings:["vNext"]})}(e,n,this.framebuffer);const i={byteLength:0,usage:35050};this.buffers=[new AE(e,i),new AE(e,i),new AE(e,i)]}get inProgress(){return this.transition.inProgress}start(t,e){const{gl:n,buffers:r,attribute:i}=this,o={numInstances:e,attribute:i,fromLength:this.currentLength,fromStartIndices:this.currentStartIndices,getData:t.enter};for(const a of r)MM({buffer:a,...o});this.settings=t,this.currentStartIndices=i.startIndices,this.currentLength=TM(i,e),this.attributeInTransition.setData({buffer:r[1],value:i.value}),this.transition.start({...t,duration:1/0}),this.transform.update({elementCount:Math.floor(this.currentLength/i.size),sourceBuffers:{aTo:wM(0,i)}})}update(){const{buffers:t,transform:e,framebuffer:n,transition:r}=this;if(!r.update())return!1;const i=this.settings;e.update({sourceBuffers:{aPrev:t[0],aCur:t[1]},feedbackBuffers:{vNext:t[2]}}),e.run({framebuffer:n,discard:!1,clearRenderTarget:!0,uniforms:{stiffness:i.stiffness,damping:i.damping},parameters:{depthTest:!1,blend:!0,viewport:[0,0,1,1],blendFunc:[1,1],blendEquation:[32776,32776]}}),EM(t),this.attributeInTransition.setData({buffer:t[1],value:this.attribute.value});return HE(n)[0]>0||r.end(),!0}cancel(){this.transition.cancel(),this.transform.delete();for(const t of this.buffers)t.delete();this.buffers.length=0,this.texture.delete(),this.framebuffer.delete()}}};class MP{constructor(t,e){let{id:n,timeline:r}=e;ww(this,"id",void 0),ww(this,"isSupported",void 0),ww(this,"gl",void 0),ww(this,"timeline",void 0),ww(this,"transitions",void 0),ww(this,"needsRedraw",void 0),ww(this,"numInstances",void 0),this.id=n,this.gl=t,this.timeline=r,this.transitions={},this.needsRedraw=!1,this.numInstances=1,this.isSupported=wP.isSupported(t)}finalize(){for(const t in this.transitions)this._removeTransition(t)}update(t){let{attributes:e,transitions:n,numInstances:r}=t;this.numInstances=r||1;for(const i in e){const t=e[i],r=t.getTransitionSetting(n);r&&this._updateAttribute(i,t,r)}for(const i in this.transitions){const t=e[i];t&&t.getTransitionSetting(n)||this._removeTransition(i)}}hasAttribute(t){const e=this.transitions[t];return e&&e.inProgress}getAttributes(){const t={};for(const e in this.transitions){const n=this.transitions[e];n.inProgress&&(t[e]=n.attributeInTransition)}return t}run(){if(!this.isSupported||0===this.numInstances)return!1;for(const e in this.transitions){this.transitions[e].update()&&(this.needsRedraw=!0)}const t=this.needsRedraw;return this.needsRedraw=!1,t}_removeTransition(t){this.transitions[t].cancel(),delete this.transitions[t]}_updateAttribute(t,e,n){const r=this.transitions[t];let i=!r||r.type!==n.type;if(i){if(!this.isSupported)return void Gw.warn("WebGL2 not supported by this browser. Transition for ".concat(t," is disabled."))();r&&this._removeTransition(t);const o=TP[n.type];o?this.transitions[t]=new o({attribute:e,timeline:this.timeline,gl:this.gl}):(Gw.error("unsupported transition type '".concat(n.type,"'"))(),i=!1)}(i||e.needsRedraw())&&(this.needsRedraw=!0,this.transitions[t].start(n,this.numInstances))}}const AP="attributeManager.invalidate";class CP{constructor(t){let{id:e="attribute-manager",stats:n,timeline:r}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};ww(this,"id",void 0),ww(this,"gl",void 0),ww(this,"attributes",void 0),ww(this,"updateTriggers",void 0),ww(this,"needsRedraw",void 0),ww(this,"userData",void 0),ww(this,"stats",void 0),ww(this,"attributeTransitionManager",void 0),ww(this,"mergeBoundsMemoized",PM(iM)),this.id=e,this.gl=t,this.attributes={},this.updateTriggers={},this.needsRedraw=!0,this.userData={},this.stats=n,this.attributeTransitionManager=new MP(t,{id:"".concat(e,"-transitions"),timeline:r}),Object.seal(this)}finalize(){for(const t in this.attributes)this.attributes[t].delete();this.attributeTransitionManager.finalize()}getNeedsRedraw(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{clearRedrawFlags:!1};const e=this.needsRedraw;return this.needsRedraw=this.needsRedraw&&!t.clearRedrawFlags,e&&this.id}setNeedsRedraw(){this.needsRedraw=!0}add(t){this._add(t)}addInstanced(t){this._add(t,{instanced:1})}remove(t){for(const e of t)void 0!==this.attributes[e]&&(this.attributes[e].delete(),delete this.attributes[e])}invalidate(t,e){const n=this._invalidateTrigger(t,e);OM(AP,this,t,n)}invalidateAll(t){for(const e in this.attributes)this.attributes[e].setNeedsUpdate(e,t);OM(AP,this,"all")}update(t){let{data:e,numInstances:n,startIndices:r=null,transitions:i,props:o={},buffers:a={},context:s={}}=t,l=!1;OM("attributeManager.updateStart",this),this.stats&&this.stats.get("Update Attributes").timeStart();for(const c in this.attributes){const t=this.attributes[c],i=t.settings.accessor;t.startIndices=r,t.numInstances=n,o[c]&&Gw.removed("props.".concat(c),"data.attributes.".concat(c))(),t.setExternalBuffer(a[c])||t.setBinaryValue("string"===typeof i?a[i]:void 0,e.startIndices)||"string"===typeof i&&!a[i]&&t.setConstantValue(o[i])||t.needsUpdate()&&(l=!0,this._updateAttribute({attribute:t,numInstances:n,data:e,props:o,context:s})),this.needsRedraw=this.needsRedraw||t.needsRedraw()}l&&OM("attributeManager.updateEnd",this,n),this.stats&&this.stats.get("Update Attributes").timeEnd(),this.attributeTransitionManager.update({attributes:this.attributes,numInstances:n,transitions:i})}updateTransition(){const{attributeTransitionManager:t}=this,e=t.run();return this.needsRedraw=this.needsRedraw||e,e}getAttributes(){return this.attributes}getBounds(t){const e=t.map((t=>{var e;return null===(e=this.attributes[t])||void 0===e?void 0:e.getBounds()}));return this.mergeBoundsMemoized(e)}getChangedAttributes(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{clearChangedFlags:!1};const{attributes:e,attributeTransitionManager:n}=this,r={...n.getAttributes()};for(const i in e){const o=e[i];o.needsRedraw(t)&&!n.hasAttribute(i)&&(r[i]=o)}return r}getShaderAttributes(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};t||(t=this.getAttributes());const n={};for(const r in t)e[r]||Object.assign(n,t[r].getShaderAttributes());return n}_add(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};for(const n in t){const r=t[n];this.attributes[n]=this._createAttribute(n,r,e)}this._mapUpdateTriggersToAttributes()}_createAttribute(t,e,n){const r={...e,id:t,size:(e.isIndexed?1:e.size)||1,divisor:n.instanced?1:e.divisor||0};return new AM(this.gl,r)}_mapUpdateTriggersToAttributes(){const t={};for(const e in this.attributes){this.attributes[e].getUpdateTriggers().forEach((n=>{t[n]||(t[n]=[]),t[n].push(e)}))}this.updateTriggers=t}_invalidateTrigger(t,e){const{attributes:n,updateTriggers:r}=this,i=r[t];return i&&i.forEach((t=>{const r=n[t];r&&r.setNeedsUpdate(r.id,e)})),i}_updateAttribute(t){const{attribute:e,numInstances:n}=t;if(OM("attribute.updateStart",e),e.constant)return void e.setConstantValue(e.value);e.allocate(n)&&OM("attribute.allocate",e,n);e.updateBuffer(t)&&(this.needsRedraw=!0,OM("attribute.updateEnd",e,n))}}const PP=1e-5;function kP(t,e,n,r,i){const o=e-t;return(n-e)*i+-o*r+o+e}function IP(t,e){if(Array.isArray(t)){let n=0;for(let r=0;r<t.length;r++){const i=t[r]-e[r];n+=i*i}return Math.sqrt(n)}return Math.abs(t-e)}const OP={interpolation:class extends SP{get value(){return this._value}_onUpdate(){const{time:t,settings:{fromValue:e,toValue:n,duration:r,easing:i}}=this,o=i(t/r);this._value=PT(e,n,o)}},spring:class extends SP{get value(){return this._currValue}_onUpdate(){const{fromValue:t,toValue:e,damping:n,stiffness:r}=this.settings,{_prevValue:i=t,_currValue:o=t}=this;let a=function(t,e,n,r,i){if(Array.isArray(n)){const o=[];for(let a=0;a<n.length;a++)o[a]=kP(t[a],e[a],n[a],r,i);return o}return kP(t,e,n,r,i)}(i,o,e,n,r);const s=IP(a,e),l=IP(a,o);s<PP&&l<PP&&(a=e,this.end()),this._prevValue=o,this._currValue=a}}};class LP{constructor(t){this.transitions=new Map,this.timeline=t}get active(){return this.transitions.size>0}add(t,e,n,r){const{transitions:i}=this;if(i.has(t)){const n=i.get(t),{value:r=n.settings.fromValue}=n;e=r,this.remove(t)}if(!(r=xM(r)))return;const o=OP[r.type];if(!o)return void Gw.error("unsupported transition type '".concat(r.type,"'"))();const a=new o(this.timeline);a.start({...r,fromValue:e,toValue:n}),i.set(t,a)}remove(t){const{transitions:e}=this;e.has(t)&&(e.get(t).cancel(),e.delete(t))}update(){const t={};for(const[e,n]of this.transitions)n.update(),t[e]=n.value,n.inProgress||this.remove(e);return t}clear(){for(const t of this.transitions.keys())this.remove(t)}}const jP="Awaiting state",zP="Matched. State transferred from previous layer",RP="Initialized",DP="Discarded. Awaiting garbage collection",BP="No longer matched. Awaiting garbage collection",FP="Finalized! Awaiting garbage collection",NP=Symbol.for("component"),UP=Symbol.for("propTypes"),VP=Symbol.for("deprecatedProps"),WP=Symbol.for("asyncPropDefaults"),GP=Symbol.for("asyncPropOriginal"),qP=Symbol.for("asyncPropResolved");function HP(t,e){const n=XP({newProps:t,oldProps:e,propTypes:t[UP],ignoreProps:{data:null,updateTriggers:null,extensions:null,transitions:null}}),r=function(t,e){if(null===e)return"oldProps is null, initial diff";let n=!1;const{dataComparator:r,_dataDiff:i}=t;r?r(t.data,e.data)||(n="Data comparator detected a change"):t.data!==e.data&&(n="A new data container was supplied");n&&i&&(n=i(t.data,e.data)||n);return n}(t,e);let i=!1;return r||(i=function(t,e){if(null===e)return{all:!0};if("all"in t.updateTriggers){if($P(t,e,"all"))return{all:!0}}const n={};let r=!1;for(const i in t.updateTriggers)if("all"!==i){$P(t,e,i)&&(n[i]=!0,r=!0)}return!!r&&n}(t,e)),{dataChanged:r,propsChanged:n,updateTriggersChanged:i,extensionsChanged:KP(t,e),transitionsChanged:ZP(t,e)}}function ZP(t,e){if(!t.transitions)return!1;const n={},r=t[UP];let i=!1;for(const o in t.transitions){const a=r[o],s=a&&a.type;("number"===s||"color"===s||"array"===s)&&YP(t[o],e[o],a)&&(n[o]=!0,i=!0)}return!!i&&n}function XP(t){let{newProps:e,oldProps:n,ignoreProps:r={},propTypes:i={},triggerName:o="props"}=t;if(n===e)return!1;if("object"!==typeof e||null===e)return"".concat(o," changed shallowly");if("object"!==typeof n||null===n)return"".concat(o," changed shallowly");for(const a of Object.keys(e))if(!(a in r)){if(!(a in n))return"".concat(o,".").concat(a," added");const t=YP(e[a],n[a],i[a]);if(t)return"".concat(o,".").concat(a," ").concat(t)}for(const a of Object.keys(n))if(!(a in r)){if(!(a in e))return"".concat(o,".").concat(a," dropped");if(!Object.hasOwnProperty.call(e,a)){const t=YP(e[a],n[a],i[a]);if(t)return"".concat(o,".").concat(a," ").concat(t)}}return!1}function YP(t,e,n){let r=n&&n.equal;return r&&!r(t,e,n)?"changed deeply":r||(r=t&&e&&t.equals,!r||r.call(t,e))?r||e===t?null:"changed shallowly":"changed deeply"}function KP(t,e){if(null===e)return!0;const n=e.extensions,{extensions:r}=t;if(r===n)return!1;if(!n||!r)return!0;if(r.length!==n.length)return!0;for(let i=0;i<r.length;i++)if(!r[i].equals(n[i]))return!0;return!1}function $P(t,e,n){let r=t.updateTriggers[n];r=void 0===r||null===r?{}:r;let i=e.updateTriggers[n];i=void 0===i||null===i?{}:i;return XP({oldProps:i,newProps:r,triggerName:n})}function JP(t){if(!function(t){return null!==t&&"object"===typeof t}(t))throw new Error("count(): argument not an object");if("function"===typeof t.count)return t.count();if(Number.isFinite(t.size))return t.size;if(Number.isFinite(t.length))return t.length;if(function(t){return null!==t&&"object"===typeof t&&t.constructor===Object}(t))return Object.keys(t).length;throw new Error("count(): argument not a container")}function QP(t,e){if(!e)return t;const n={...t,...e};if("defines"in e&&(n.defines={...t.defines,...e.defines}),"modules"in e&&(n.modules=(t.modules||[]).concat(e.modules),e.modules.some((t=>"project64"===t.name)))){const t=n.modules.findIndex((t=>"project32"===t.name));t>=0&&n.modules.splice(t,1)}if("inject"in e)if(t.inject){const r={...t.inject};for(const t in e.inject)r[t]=(r[t]||"")+e.inject[t];n.inject=r}else n.inject=e.inject;return n}function tk(t,e){var n=e[0],r=e[1],i=e[2],o=e[3],a=e[4],s=e[5],l=e[6],c=e[7],u=e[8],h=e[9],d=e[10],f=e[11],p=e[12],m=e[13],g=e[14],y=e[15],v=n*s-r*a,_=n*l-i*a,b=n*c-o*a,x=r*l-i*s,w=r*c-o*s,S=i*c-o*l,E=u*m-h*p,T=u*g-d*p,M=u*y-f*p,A=h*g-d*m,C=h*y-f*m,P=d*y-f*g,k=v*P-_*C+b*A+x*M-w*T+S*E;return k?(k=1/k,t[0]=(s*P-l*C+c*A)*k,t[1]=(i*C-r*P-o*A)*k,t[2]=(m*S-g*w+y*x)*k,t[3]=(d*w-h*S-f*x)*k,t[4]=(l*M-a*P-c*T)*k,t[5]=(n*P-i*M+o*T)*k,t[6]=(g*b-p*S-y*_)*k,t[7]=(u*S-d*b+f*_)*k,t[8]=(a*C-s*M+c*E)*k,t[9]=(r*M-n*C-o*E)*k,t[10]=(p*w-m*b+y*v)*k,t[11]=(h*b-u*w-f*v)*k,t[12]=(s*T-a*A-l*E)*k,t[13]=(n*A-r*T+i*E)*k,t[14]=(m*_-p*x-g*v)*k,t[15]=(u*x-h*_+d*v)*k,t):null}function ek(t,e,n){var r=e[0],i=e[1],o=e[2],a=e[3],s=e[4],l=e[5],c=e[6],u=e[7],h=e[8],d=e[9],f=e[10],p=e[11],m=e[12],g=e[13],y=e[14],v=e[15],_=n[0],b=n[1],x=n[2],w=n[3];return t[0]=_*r+b*s+x*h+w*m,t[1]=_*i+b*l+x*d+w*g,t[2]=_*o+b*c+x*f+w*y,t[3]=_*a+b*u+x*p+w*v,_=n[4],b=n[5],x=n[6],w=n[7],t[4]=_*r+b*s+x*h+w*m,t[5]=_*i+b*l+x*d+w*g,t[6]=_*o+b*c+x*f+w*y,t[7]=_*a+b*u+x*p+w*v,_=n[8],b=n[9],x=n[10],w=n[11],t[8]=_*r+b*s+x*h+w*m,t[9]=_*i+b*l+x*d+w*g,t[10]=_*o+b*c+x*f+w*y,t[11]=_*a+b*u+x*p+w*v,_=n[12],b=n[13],x=n[14],w=n[15],t[12]=_*r+b*s+x*h+w*m,t[13]=_*i+b*l+x*d+w*g,t[14]=_*o+b*c+x*f+w*y,t[15]=_*a+b*u+x*p+w*v,t}function nk(t,e,n){var r,i,o,a,s,l,c,u,h,d,f,p,m=n[0],g=n[1],y=n[2];return e===t?(t[12]=e[0]*m+e[4]*g+e[8]*y+e[12],t[13]=e[1]*m+e[5]*g+e[9]*y+e[13],t[14]=e[2]*m+e[6]*g+e[10]*y+e[14],t[15]=e[3]*m+e[7]*g+e[11]*y+e[15]):(r=e[0],i=e[1],o=e[2],a=e[3],s=e[4],l=e[5],c=e[6],u=e[7],h=e[8],d=e[9],f=e[10],p=e[11],t[0]=r,t[1]=i,t[2]=o,t[3]=a,t[4]=s,t[5]=l,t[6]=c,t[7]=u,t[8]=h,t[9]=d,t[10]=f,t[11]=p,t[12]=r*m+s*g+h*y+e[12],t[13]=i*m+l*g+d*y+e[13],t[14]=o*m+c*g+f*y+e[14],t[15]=a*m+u*g+p*y+e[15]),t}function rk(t,e,n){var r=n[0],i=n[1],o=n[2];return t[0]=e[0]*r,t[1]=e[1]*r,t[2]=e[2]*r,t[3]=e[3]*r,t[4]=e[4]*i,t[5]=e[5]*i,t[6]=e[6]*i,t[7]=e[7]*i,t[8]=e[8]*o,t[9]=e[9]*o,t[10]=e[10]*o,t[11]=e[11]*o,t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}function ik(t,e,n){var r=Math.sin(n),i=Math.cos(n),o=e[4],a=e[5],s=e[6],l=e[7],c=e[8],u=e[9],h=e[10],d=e[11];return e!==t&&(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[4]=o*i+c*r,t[5]=a*i+u*r,t[6]=s*i+h*r,t[7]=l*i+d*r,t[8]=c*i-o*r,t[9]=u*i-a*r,t[10]=h*i-s*r,t[11]=d*i-l*r,t}function ok(t,e,n){var r=Math.sin(n),i=Math.cos(n),o=e[0],a=e[1],s=e[2],l=e[3],c=e[4],u=e[5],h=e[6],d=e[7];return e!==t&&(t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=o*i+c*r,t[1]=a*i+u*r,t[2]=s*i+h*r,t[3]=l*i+d*r,t[4]=c*i-o*r,t[5]=u*i-a*r,t[6]=h*i-s*r,t[7]=d*i-l*r,t}function ak(t,e){var n=e[0],r=e[1],i=e[2],o=e[4],a=e[5],s=e[6],l=e[8],c=e[9],u=e[10];return t[0]=Math.hypot(n,r,i),t[1]=Math.hypot(o,a,s),t[2]=Math.hypot(l,c,u),t}var sk=function(t,e,n,r,i){var o,a=1/Math.tan(e/2);return t[0]=a/n,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=a,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=-1,t[12]=0,t[13]=0,t[15]=0,null!=i&&i!==1/0?(o=1/(r-i),t[10]=(i+r)*o,t[14]=2*i*r*o):(t[10]=-1,t[14]=-2*r),t};var lk=function(t,e,n,r,i,o,a){var s=1/(e-n),l=1/(r-i),c=1/(o-a);return t[0]=-2*s,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*l,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=2*c,t[11]=0,t[12]=(e+n)*s,t[13]=(i+r)*l,t[14]=(a+o)*c,t[15]=1,t};function ck(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t}function uk(t){var e=t[0],n=t[1],r=t[2],i=t[3];return Math.hypot(e,n,r,i)}function hk(t){var e=t[0],n=t[1],r=t[2],i=t[3];return e*e+n*n+r*r+i*i}function dk(t,e,n){var r=e[0],i=e[1],o=e[2],a=e[3];return t[0]=n[0]*r+n[4]*i+n[8]*o+n[12]*a,t[1]=n[1]*r+n[5]*i+n[9]*o+n[13]*a,t[2]=n[2]*r+n[6]*i+n[10]*o+n[14]*a,t[3]=n[3]*r+n[7]*i+n[11]*o+n[15]*a,t}!function(){var t=function(){var t=new BT(4);return BT!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0,t[3]=0),t}()}();const fk=[0,0,0,0],pk=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,0],mk=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],gk=[0,0,0],yk=[0,0,0],vk=PM((function(t){let{viewport:e,devicePixelRatio:n,coordinateSystem:r,coordinateOrigin:i}=t;const{projectionCenter:o,viewProjectionMatrix:a,originCommon:s,cameraPosCommon:l,shaderCoordinateOrigin:c,geospatialOrigin:u}=function(t,e,n){const{viewMatrixUncentered:r,projectionMatrix:i}=t;let{viewMatrix:o,viewProjectionMatrix:a}=t,s=fk,l=fk,c=t.cameraPosition;const{geospatialOrigin:u,shaderCoordinateOrigin:h,offsetMode:d}=_k(t,e,n);d&&(l=t.projectPosition(u||h),c=[c[0]-l[0],c[1]-l[1],c[2]-l[2]],l[3]=1,s=dk([],l,a),o=r||o,a=ek([],i,o),a=ek([],a,pk));return{viewMatrix:o,viewProjectionMatrix:a,projectionCenter:s,originCommon:l,cameraPosCommon:c,shaderCoordinateOrigin:h,geospatialOrigin:u}}(e,r,i),h=e.getDistanceScales(),d=[e.width*n,e.height*n],f=dk([],[0,0,-e.focalDistance,1],e.projectionMatrix)[3]||1,p={project_uCoordinateSystem:r,project_uProjectionMode:e.projectionMode,project_uCoordinateOrigin:c,project_uCommonOrigin:s.slice(0,3),project_uCenter:o,project_uPseudoMeters:Boolean(e._pseudoMeters),project_uViewportSize:d,project_uDevicePixelRatio:n,project_uFocalDistance:f,project_uCommonUnitsPerMeter:h.unitsPerMeter,project_uCommonUnitsPerWorldUnit:h.unitsPerMeter,project_uCommonUnitsPerWorldUnit2:gk,project_uScale:e.scale,project_uWrapLongitude:!1,project_uViewProjectionMatrix:a,project_uModelMatrix:mk,project_uCameraPosition:l};if(u){const t=e.getDistanceScales(u);switch(r){case qw.METER_OFFSETS:p.project_uCommonUnitsPerWorldUnit=t.unitsPerMeter,p.project_uCommonUnitsPerWorldUnit2=t.unitsPerMeter2;break;case qw.LNGLAT:case qw.LNGLAT_OFFSETS:e._pseudoMeters||(p.project_uCommonUnitsPerMeter=t.unitsPerMeter),p.project_uCommonUnitsPerWorldUnit=t.unitsPerDegree,p.project_uCommonUnitsPerWorldUnit2=t.unitsPerDegree2;break;case qw.CARTESIAN:p.project_uCommonUnitsPerWorldUnit=[1,1,t.unitsPerMeter[2]],p.project_uCommonUnitsPerWorldUnit2=[0,0,t.unitsPerMeter2[2]]}}return p}));function _k(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:yk;n.length<3&&(n=[n[0],n[1],0]);let r,i=n,o=!0;switch(r=e===qw.LNGLAT_OFFSETS||e===qw.METER_OFFSETS?n:t.isGeospatial?[Math.fround(t.longitude),Math.fround(t.latitude),0]:null,t.projectionMode){case Hw.WEB_MERCATOR:e!==qw.LNGLAT&&e!==qw.CARTESIAN||(r=[0,0,0],o=!1);break;case Hw.WEB_MERCATOR_AUTO_OFFSET:e===qw.LNGLAT?i=r:e===qw.CARTESIAN&&(i=[Math.fround(t.center[0]),Math.fround(t.center[1]),0],r=t.unprojectPosition(i),i[0]-=n[0],i[1]-=n[1],i[2]-=n[2]);break;case Hw.IDENTITY:i=t.position.map(Math.fround),i[2]=i[2]||0;break;case Hw.GLOBE:o=!1,r=null;break;default:o=!1}return{geospatialOrigin:r,shaderCoordinateOrigin:i,offsetMode:o}}class bk extends OT{toString(){let t="[";if(TT.printRowMajor){t+="row-major:";for(let e=0;e<this.RANK;++e)for(let n=0;n<this.RANK;++n)t+=" ".concat(this[n*this.RANK+e])}else{t+="column-major:";for(let e=0;e<this.ELEMENTS;++e)t+=" ".concat(this[e])}return t+="]",t}getElementIndex(t,e){return e*this.RANK+t}getElement(t,e){return this[e*this.RANK+t]}setElement(t,e,n){return this[e*this.RANK+t]=LT(n),this}getColumn(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Array(this.RANK).fill(-0);const n=t*this.RANK;for(let r=0;r<this.RANK;++r)e[r]=this[n+r];return e}setColumn(t,e){const n=t*this.RANK;for(let r=0;r<this.RANK;++r)this[n+r]=e[r];return this}}function xk(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t}function wk(t,e,n,r){var i=e[0],o=e[1];return t[0]=i+r*(n[0]-i),t[1]=o+r*(n[1]-o),t}var Sk;!function(){var t=function(){var t=new BT(2);return BT!=Float32Array&&(t[0]=0,t[1]=0),t}()}();!function(t){t[t.COL0ROW0=0]="COL0ROW0",t[t.COL0ROW1=1]="COL0ROW1",t[t.COL0ROW2=2]="COL0ROW2",t[t.COL0ROW3=3]="COL0ROW3",t[t.COL1ROW0=4]="COL1ROW0",t[t.COL1ROW1=5]="COL1ROW1",t[t.COL1ROW2=6]="COL1ROW2",t[t.COL1ROW3=7]="COL1ROW3",t[t.COL2ROW0=8]="COL2ROW0",t[t.COL2ROW1=9]="COL2ROW1",t[t.COL2ROW2=10]="COL2ROW2",t[t.COL2ROW3=11]="COL2ROW3",t[t.COL3ROW0=12]="COL3ROW0",t[t.COL3ROW1=13]="COL3ROW1",t[t.COL3ROW2=14]="COL3ROW2",t[t.COL3ROW3=15]="COL3ROW3"}(Sk||(Sk={}));const Ek=45*Math.PI/180,Tk=1,Mk=.1,Ak=500,Ck=Object.freeze([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]);class Pk extends bk{static get IDENTITY(){return function(){Ik||(Ik=new Pk,Object.freeze(Ik));return Ik}()}static get ZERO(){return function(){kk||(kk=new Pk([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]),Object.freeze(kk));return kk}()}get ELEMENTS(){return 16}get RANK(){return 4}get INDICES(){return Sk}constructor(t){super(-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0),1===arguments.length&&Array.isArray(t)?this.copy(t):this.identity()}copy(t){return this[0]=t[0],this[1]=t[1],this[2]=t[2],this[3]=t[3],this[4]=t[4],this[5]=t[5],this[6]=t[6],this[7]=t[7],this[8]=t[8],this[9]=t[9],this[10]=t[10],this[11]=t[11],this[12]=t[12],this[13]=t[13],this[14]=t[14],this[15]=t[15],this.check()}set(t,e,n,r,i,o,a,s,l,c,u,h,d,f,p,m){return this[0]=t,this[1]=e,this[2]=n,this[3]=r,this[4]=i,this[5]=o,this[6]=a,this[7]=s,this[8]=l,this[9]=c,this[10]=u,this[11]=h,this[12]=d,this[13]=f,this[14]=p,this[15]=m,this.check()}setRowMajor(t,e,n,r,i,o,a,s,l,c,u,h,d,f,p,m){return this[0]=t,this[1]=i,this[2]=l,this[3]=d,this[4]=e,this[5]=o,this[6]=c,this[7]=f,this[8]=n,this[9]=a,this[10]=u,this[11]=p,this[12]=r,this[13]=s,this[14]=h,this[15]=m,this.check()}toRowMajor(t){return t[0]=this[0],t[1]=this[4],t[2]=this[8],t[3]=this[12],t[4]=this[1],t[5]=this[5],t[6]=this[9],t[7]=this[13],t[8]=this[2],t[9]=this[6],t[10]=this[10],t[11]=this[14],t[12]=this[3],t[13]=this[7],t[14]=this[11],t[15]=this[15],t}identity(){return this.copy(Ck)}fromObject(t){return this.check()}fromQuaternion(t){return function(t,e){var n=e[0],r=e[1],i=e[2],o=e[3],a=n+n,s=r+r,l=i+i,c=n*a,u=r*a,h=r*s,d=i*a,f=i*s,p=i*l,m=o*a,g=o*s,y=o*l;t[0]=1-h-p,t[1]=u+y,t[2]=d-g,t[3]=0,t[4]=u-y,t[5]=1-c-p,t[6]=f+m,t[7]=0,t[8]=d+g,t[9]=f-m,t[10]=1-c-h,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1}(this,t),this.check()}frustum(t){const{left:e,right:n,bottom:r,top:i,near:o=Mk,far:a=Ak}=t;return a===1/0?function(t,e,n,r,i,o){const a=2*o/(n-e),s=2*o/(i-r),l=(n+e)/(n-e),c=(i+r)/(i-r),u=-1,h=-1,d=-2*o;t[0]=a,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=s,t[6]=0,t[7]=0,t[8]=l,t[9]=c,t[10]=u,t[11]=h,t[12]=0,t[13]=0,t[14]=d,t[15]=0}(this,e,n,r,i,o):function(t,e,n,r,i,o,a){var s=1/(n-e),l=1/(i-r),c=1/(o-a);t[0]=2*o*s,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=2*o*l,t[6]=0,t[7]=0,t[8]=(n+e)*s,t[9]=(i+r)*l,t[10]=(a+o)*c,t[11]=-1,t[12]=0,t[13]=0,t[14]=a*o*2*c,t[15]=0}(this,e,n,r,i,o,a),this.check()}lookAt(t){const{eye:e,center:n=[0,0,0],up:r=[0,1,0]}=t;return function(t,e,n,r){var i,o,a,s,l,c,u,h,d,f,p=e[0],m=e[1],g=e[2],y=r[0],v=r[1],_=r[2],b=n[0],x=n[1],w=n[2];Math.abs(p-b)<DT&&Math.abs(m-x)<DT&&Math.abs(g-w)<DT?function(t){t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1}(t):(u=p-b,h=m-x,d=g-w,i=v*(d*=f=1/Math.hypot(u,h,d))-_*(h*=f),o=_*(u*=f)-y*d,a=y*h-v*u,(f=Math.hypot(i,o,a))?(i*=f=1/f,o*=f,a*=f):(i=0,o=0,a=0),s=h*a-d*o,l=d*i-u*a,c=u*o-h*i,(f=Math.hypot(s,l,c))?(s*=f=1/f,l*=f,c*=f):(s=0,l=0,c=0),t[0]=i,t[1]=s,t[2]=u,t[3]=0,t[4]=o,t[5]=l,t[6]=h,t[7]=0,t[8]=a,t[9]=c,t[10]=d,t[11]=0,t[12]=-(i*p+o*m+a*g),t[13]=-(s*p+l*m+c*g),t[14]=-(u*p+h*m+d*g),t[15]=1)}(this,e,n,r),this.check()}ortho(t){const{left:e,right:n,bottom:r,top:i,near:o=Mk,far:a=Ak}=t;return lk(this,e,n,r,i,o,a),this.check()}orthographic(t){const{fovy:e=Ek,aspect:n=Tk,focalDistance:r=1,near:i=Mk,far:o=Ak}=t;Ok(e);const a=e/2,s=r*Math.tan(a),l=s*n;return this.ortho({left:-l,right:l,bottom:-s,top:s,near:i,far:o})}perspective(t){const{fovy:e=45*Math.PI/180,aspect:n=1,near:r=.1,far:i=500}=t;return Ok(e),sk(this,e,n,r,i),this.check()}determinant(){return function(t){var e=t[0],n=t[1],r=t[2],i=t[3],o=t[4],a=t[5],s=t[6],l=t[7],c=t[8],u=t[9],h=t[10],d=t[11],f=t[12],p=t[13],m=t[14],g=t[15];return(e*a-n*o)*(h*g-d*m)-(e*s-r*o)*(u*g-d*p)+(e*l-i*o)*(u*m-h*p)+(n*s-r*a)*(c*g-d*f)-(n*l-i*a)*(c*m-h*f)+(r*l-i*s)*(c*p-u*f)}(this)}getScale(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[-0,-0,-0];return t[0]=Math.sqrt(this[0]*this[0]+this[1]*this[1]+this[2]*this[2]),t[1]=Math.sqrt(this[4]*this[4]+this[5]*this[5]+this[6]*this[6]),t[2]=Math.sqrt(this[8]*this[8]+this[9]*this[9]+this[10]*this[10]),t}getTranslation(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[-0,-0,-0];return t[0]=this[12],t[1]=this[13],t[2]=this[14],t}getRotation(t,e){t=t||[-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0],e=e||[-0,-0,-0];const n=this.getScale(e),r=1/n[0],i=1/n[1],o=1/n[2];return t[0]=this[0]*r,t[1]=this[1]*i,t[2]=this[2]*o,t[3]=0,t[4]=this[4]*r,t[5]=this[5]*i,t[6]=this[6]*o,t[7]=0,t[8]=this[8]*r,t[9]=this[9]*i,t[10]=this[10]*o,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}getRotationMatrix3(t,e){t=t||[-0,-0,-0,-0,-0,-0,-0,-0,-0],e=e||[-0,-0,-0];const n=this.getScale(e),r=1/n[0],i=1/n[1],o=1/n[2];return t[0]=this[0]*r,t[1]=this[1]*i,t[2]=this[2]*o,t[3]=this[4]*r,t[4]=this[5]*i,t[5]=this[6]*o,t[6]=this[8]*r,t[7]=this[9]*i,t[8]=this[10]*o,t}transpose(){return function(t,e){if(t===e){var n=e[1],r=e[2],i=e[3],o=e[6],a=e[7],s=e[11];t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=n,t[6]=e[9],t[7]=e[13],t[8]=r,t[9]=o,t[11]=e[14],t[12]=i,t[13]=a,t[14]=s}else t[0]=e[0],t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=e[1],t[5]=e[5],t[6]=e[9],t[7]=e[13],t[8]=e[2],t[9]=e[6],t[10]=e[10],t[11]=e[14],t[12]=e[3],t[13]=e[7],t[14]=e[11],t[15]=e[15]}(this,this),this.check()}invert(){return tk(this,this),this.check()}multiplyLeft(t){return ek(this,t,this),this.check()}multiplyRight(t){return ek(this,this,t),this.check()}rotateX(t){return ik(this,this,t),this.check()}rotateY(t){return function(t,e,n){var r=Math.sin(n),i=Math.cos(n),o=e[0],a=e[1],s=e[2],l=e[3],c=e[8],u=e[9],h=e[10],d=e[11];e!==t&&(t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=o*i-c*r,t[1]=a*i-u*r,t[2]=s*i-h*r,t[3]=l*i-d*r,t[8]=o*r+c*i,t[9]=a*r+u*i,t[10]=s*r+h*i,t[11]=l*r+d*i}(this,this,t),this.check()}rotateZ(t){return ok(this,this,t),this.check()}rotateXYZ(t){return this.rotateX(t[0]).rotateY(t[1]).rotateZ(t[2])}rotateAxis(t,e){return function(t,e,n,r){var i,o,a,s,l,c,u,h,d,f,p,m,g,y,v,_,b,x,w,S,E,T,M,A,C=r[0],P=r[1],k=r[2],I=Math.hypot(C,P,k);I<DT||(C*=I=1/I,P*=I,k*=I,i=Math.sin(n),a=1-(o=Math.cos(n)),s=e[0],l=e[1],c=e[2],u=e[3],h=e[4],d=e[5],f=e[6],p=e[7],m=e[8],g=e[9],y=e[10],v=e[11],_=C*C*a+o,b=P*C*a+k*i,x=k*C*a-P*i,w=C*P*a-k*i,S=P*P*a+o,E=k*P*a+C*i,T=C*k*a+P*i,M=P*k*a-C*i,A=k*k*a+o,t[0]=s*_+h*b+m*x,t[1]=l*_+d*b+g*x,t[2]=c*_+f*b+y*x,t[3]=u*_+p*b+v*x,t[4]=s*w+h*S+m*E,t[5]=l*w+d*S+g*E,t[6]=c*w+f*S+y*E,t[7]=u*w+p*S+v*E,t[8]=s*T+h*M+m*A,t[9]=l*T+d*M+g*A,t[10]=c*T+f*M+y*A,t[11]=u*T+p*M+v*A,e!==t&&(t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]))}(this,this,t,e),this.check()}scale(t){return rk(this,this,Array.isArray(t)?t:[t,t,t]),this.check()}translate(t){return nk(this,this,t),this.check()}transform(t,e){return 4===t.length?(jT(e=dk(e||[-0,-0,-0,-0],t,this),4),e):this.transformAsPoint(t,e)}transformAsPoint(t,e){const{length:n}=t;let r;switch(n){case 2:r=function(t,e,n){var r=e[0],i=e[1];return t[0]=n[0]*r+n[4]*i+n[12],t[1]=n[1]*r+n[5]*i+n[13],t}(e||[-0,-0],t,this);break;case 3:r=WT(e||[-0,-0,-0],t,this);break;default:throw new Error("Illegal vector")}return jT(r,t.length),r}transformAsVector(t,e){let n;switch(t.length){case 2:n=function(t,e,n){const r=e[0],i=e[1],o=n[3]*r+n[7]*i||1;return t[0]=(n[0]*r+n[4]*i)/o,t[1]=(n[1]*r+n[5]*i)/o,t}(e||[-0,-0],t,this);break;case 3:n=YT(e||[-0,-0,-0],t,this);break;default:throw new Error("Illegal vector")}return jT(n,t.length),n}transformPoint(t,e){return this.transformAsPoint(t,e)}transformVector(t,e){return this.transformAsPoint(t,e)}transformDirection(t,e){return this.transformAsVector(t,e)}makeRotationX(t){return this.identity().rotateX(t)}makeTranslation(t,e,n){return this.identity().translate([t,e,n])}}let kk,Ik;function Ok(t){if(t>2*Math.PI)throw Error("expected radians")}function Lk(t,e){const n=dk([],e,t);return ck(n,n,1/n[3]),n}function jk(t,e){const n=t%e;return n<0?e+n:n}function zk(t,e,n){return t<e?e:t>n?n:t}const Rk=Math.log2||function(t){return Math.log(t)*Math.LOG2E};function Dk(t,e){if(!t)throw new Error(e||"@math.gl/web-mercator: assertion failed.")}const Bk=Math.PI,Fk=Bk/4,Nk=Bk/180,Uk=180/Bk,Vk=512,Wk=4003e4,Gk=85.051129,qk=1.5;function Hk(t){const[e,n]=t;Dk(Number.isFinite(e)),Dk(Number.isFinite(n)&&n>=-90&&n<=90,"invalid latitude");const r=n*Nk;return[Vk*(e*Nk+Bk)/(2*Bk),Vk*(Bk+Math.log(Math.tan(Fk+.5*r)))/(2*Bk)]}function Zk(t){const[e,n]=t,r=e/Vk*(2*Bk)-Bk,i=2*(Math.atan(Math.exp(n/Vk*(2*Bk)-Bk))-Fk);return[r*Uk,i*Uk]}function Xk(t){const{latitude:e}=t;Dk(Number.isFinite(e));const n=Math.cos(e*Nk);return function(t){return Rk(t)}(Wk*n)-9}function Yk(t){const e=Math.cos(t*Nk);return Vk/Wk/e}function Kk(t){const{latitude:e,longitude:n,highPrecision:r=!1}=t;Dk(Number.isFinite(e)&&Number.isFinite(n));const i=Vk,o=Math.cos(e*Nk),a=i/360,s=a/o,l=i/Wk/o,c={unitsPerMeter:[l,l,l],metersPerUnit:[1/l,1/l,1/l],unitsPerDegree:[a,s,l],degreesPerUnit:[1/a,1/s,1/l]};if(r){const t=Nk*Math.tan(e*Nk)/o,n=a*t/2,r=i/Wk*t,u=r/s*l;c.unitsPerDegree2=[0,n,r],c.unitsPerMeter2=[u,0,u]}return c}function $k(t,e){const[n,r,i]=t,[o,a,s]=e,{unitsPerMeter:l,unitsPerMeter2:c}=Kk({longitude:n,latitude:r,highPrecision:!0}),u=Hk(t);u[0]+=o*(l[0]+c[0]*a),u[1]+=a*(l[1]+c[1]*a);const h=Zk(u),d=(i||0)+(s||0);return Number.isFinite(i)||Number.isFinite(s)?[h[0],h[1],d]:h}function Jk(t){const{width:e,height:n,altitude:r,pitch:i=0,offset:o,center:a,scale:s,nearZMultiplier:l=1,farZMultiplier:c=1}=t;let{fovy:u=Qk(qk)}=t;void 0!==r&&(u=Qk(r));const h=u*Nk,d=i*Nk,f=tI(u);let p=f;a&&(p+=a[2]*s/Math.cos(d)/n);const m=h*(.5+(o?o[1]:0)/n),g=Math.sin(m)*p/Math.sin(zk(Math.PI/2-d-m,.01,Math.PI-.01)),y=Math.sin(d)*g+p,v=10*p;return{fov:h,aspect:e/n,focalDistance:f,near:l,far:Math.min(y*c,v)}}function Qk(t){return 2*Math.atan(.5/t)*Uk}function tI(t){return.5/Math.tan(.5*t*Nk)}function eI(t,e){const[n,r,i=0]=t;return Dk(Number.isFinite(n)&&Number.isFinite(r)&&Number.isFinite(i)),Lk(e,[n,r,i,1])}function nI(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;const[r,i,o]=t;if(Dk(Number.isFinite(r)&&Number.isFinite(i),"invalid pixel coordinate"),Number.isFinite(o)){return Lk(e,[r,i,o,1])}const a=Lk(e,[r,i,0,1]),s=Lk(e,[r,i,1,1]),l=a[2],c=s[2];return wk([],a,s,l===c?0:((n||0)-l)/(c-l))}function rI(t){const{width:e,height:n,bounds:r,minExtent:i=0,maxZoom:o=24,offset:a=[0,0]}=t,[[s,l],[c,u]]=r,h=function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;if("number"===typeof t)return{top:t,bottom:t,left:t,right:t};return Dk(Number.isFinite(t.top)&&Number.isFinite(t.bottom)&&Number.isFinite(t.left)&&Number.isFinite(t.right)),t}(t.padding),d=Hk([s,zk(u,-85.051129,Gk)]),f=Hk([c,zk(l,-85.051129,Gk)]),p=[Math.max(Math.abs(f[0]-d[0]),i),Math.max(Math.abs(f[1]-d[1]),i)],m=[e-h.left-h.right-2*Math.abs(a[0]),n-h.top-h.bottom-2*Math.abs(a[1])];Dk(m[0]>0&&m[1]>0);const g=m[0]/p[0],y=m[1]/p[1],v=(h.right-h.left)/2/g,_=(h.top-h.bottom)/2/y,b=Zk([(f[0]+d[0])/2+v,(f[1]+d[1])/2+_]),x=Math.min(o,Rk(Math.abs(Math.min(g,y))));return Dk(Number.isFinite(x)),{longitude:b[0],latitude:b[1],zoom:x}}const iI=Math.PI/180;function oI(t,e,n){const{pixelUnprojectionMatrix:r}=t,i=Lk(r,[e,0,1,1]),o=Lk(r,[e,t.height,1,1]),a=Zk(wk([],i,o,(n*t.distanceScales.unitsPerMeter[2]-i[2])/(o[2]-i[2])));return a.push(n),a}const aI=Math.PI/180,sI=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],lI=[0,0,0],cI={unitsPerMeter:[1,1,1],metersPerUnit:[1,1,1]};class uI{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};ww(this,"id",void 0),ww(this,"x",void 0),ww(this,"y",void 0),ww(this,"width",void 0),ww(this,"height",void 0),ww(this,"padding",void 0),ww(this,"isGeospatial",void 0),ww(this,"zoom",void 0),ww(this,"focalDistance",void 0),ww(this,"position",void 0),ww(this,"modelMatrix",void 0),ww(this,"distanceScales",void 0),ww(this,"scale",void 0),ww(this,"center",void 0),ww(this,"cameraPosition",void 0),ww(this,"projectionMatrix",void 0),ww(this,"viewMatrix",void 0),ww(this,"viewMatrixUncentered",void 0),ww(this,"viewMatrixInverse",void 0),ww(this,"viewProjectionMatrix",void 0),ww(this,"pixelProjectionMatrix",void 0),ww(this,"pixelUnprojectionMatrix",void 0),ww(this,"resolution",void 0),ww(this,"_frustumPlanes",{}),this.id=t.id||this.constructor.displayName||"viewport",this.x=t.x||0,this.y=t.y||0,this.width=t.width||1,this.height=t.height||1,this.zoom=t.zoom||0,this.padding=t.padding,this.distanceScales=t.distanceScales||cI,this.focalDistance=t.focalDistance||1,this.position=t.position||lI,this.modelMatrix=t.modelMatrix||null;const{longitude:e,latitude:n}=t;this.isGeospatial=Number.isFinite(n)&&Number.isFinite(e),this._initProps(t),this._initMatrices(t),this.equals=this.equals.bind(this),this.project=this.project.bind(this),this.unproject=this.unproject.bind(this),this.projectPosition=this.projectPosition.bind(this),this.unprojectPosition=this.unprojectPosition.bind(this),this.projectFlat=this.projectFlat.bind(this),this.unprojectFlat=this.unprojectFlat.bind(this)}get subViewports(){return null}get metersPerPixel(){return this.distanceScales.metersPerUnit[2]/this.scale}get projectionMode(){return this.isGeospatial?this.zoom<12?Hw.WEB_MERCATOR:Hw.WEB_MERCATOR_AUTO_OFFSET:Hw.IDENTITY}equals(t){return t instanceof uI&&(this===t||t.width===this.width&&t.height===this.height&&t.scale===this.scale&&kT(t.projectionMatrix,this.projectionMatrix)&&kT(t.viewMatrix,this.viewMatrix))}project(t){let{topLeft:e=!0}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=eI(this.projectPosition(t),this.pixelProjectionMatrix),[r,i]=n,o=e?i:this.height-i;return 2===t.length?[r,o]:[r,o,n[2]]}unproject(t){let{topLeft:e=!0,targetZ:n}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const[r,i,o]=t,a=e?i:this.height-i,s=n&&n*this.distanceScales.unitsPerMeter[2],l=nI([r,a,o],this.pixelUnprojectionMatrix,s),[c,u,h]=this.unprojectPosition(l);return Number.isFinite(o)?[c,u,h]:Number.isFinite(n)?[c,u,n]:[c,u]}projectPosition(t){const[e,n]=this.projectFlat(t);return[e,n,(t[2]||0)*this.distanceScales.unitsPerMeter[2]]}unprojectPosition(t){const[e,n]=this.unprojectFlat(t);return[e,n,(t[2]||0)*this.distanceScales.metersPerUnit[2]]}projectFlat(t){if(this.isGeospatial){const e=Hk(t);return e[1]=CT(e[1],-318,830),e}return t}unprojectFlat(t){return this.isGeospatial?Zk(t):t}getBounds(){const t={targetZ:(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).z||0},e=this.unproject([0,0],t),n=this.unproject([this.width,0],t),r=this.unproject([0,this.height],t),i=this.unproject([this.width,this.height],t);return[Math.min(e[0],n[0],r[0],i[0]),Math.min(e[1],n[1],r[1],i[1]),Math.max(e[0],n[0],r[0],i[0]),Math.max(e[1],n[1],r[1],i[1])]}getDistanceScales(t){return t?Kk({longitude:t[0],latitude:t[1],highPrecision:!0}):this.distanceScales}containsPixel(t){let{x:e,y:n,width:r=1,height:i=1}=t;return e<this.x+this.width&&this.x<e+r&&n<this.y+this.height&&this.y<n+i}getFrustumPlanes(){return this._frustumPlanes.near||Object.assign(this._frustumPlanes,{left:eM((t=this.viewProjectionMatrix)[3]+t[0],t[7]+t[4],t[11]+t[8],t[15]+t[12]),right:eM(t[3]-t[0],t[7]-t[4],t[11]-t[8],t[15]-t[12]),bottom:eM(t[3]+t[1],t[7]+t[5],t[11]+t[9],t[15]+t[13]),top:eM(t[3]-t[1],t[7]-t[5],t[11]-t[9],t[15]-t[13]),near:eM(t[3]+t[2],t[7]+t[6],t[11]+t[10],t[15]+t[14]),far:eM(t[3]-t[2],t[7]-t[6],t[11]-t[10],t[15]-t[14])}),this._frustumPlanes;var t}panByPosition(t,e){return null}_initProps(t){const e=t.longitude,n=t.latitude;this.isGeospatial&&(Number.isFinite(t.zoom)||(this.zoom=Xk({latitude:n})+Math.log2(this.focalDistance)),this.distanceScales=t.distanceScales||Kk({latitude:n,longitude:e}));const r=Math.pow(2,this.zoom);this.scale=r;const{position:i,modelMatrix:o}=t;let a=lI;if(i&&(a=o?new Pk(o).transformAsVector(i,[]):i),this.isGeospatial){const t=this.projectPosition([e,n,0]);this.center=new QT(a).scale(this.distanceScales.unitsPerMeter).add(t)}else this.center=this.projectPosition(a)}_initMatrices(t){const{viewMatrix:e=sI,projectionMatrix:n=null,orthographic:r=!1,fovyRadians:i,fovy:o=75,near:a=.1,far:s=1e3,padding:l=null,focalDistance:c=1}=t;this.viewMatrixUncentered=e,this.viewMatrix=(new Pk).multiplyRight(e).translate(new QT(this.center).negate()),this.projectionMatrix=n||function(t){let{width:e,height:n,orthographic:r,fovyRadians:i,focalDistance:o,padding:a,near:s,far:l}=t;const c=e/n,u=r?(new Pk).orthographic({fovy:i,aspect:c,focalDistance:o,near:s,far:l}):(new Pk).perspective({fovy:i,aspect:c,near:s,far:l});if(a){const{left:t=0,right:r=0,top:i=0,bottom:o=0}=a,s=CT((t+e-r)/2,0,e)-e/2,l=CT((i+n-o)/2,0,n)-n/2;u[8]-=2*s/e,u[9]+=2*l/n}return u}({width:this.width,height:this.height,orthographic:r,fovyRadians:i||o*aI,focalDistance:c,padding:l,near:a,far:s});const u=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];var h;ek(u,u,this.projectionMatrix),ek(u,u,this.viewMatrix),this.viewProjectionMatrix=u,this.viewMatrixInverse=tk([],this.viewMatrix)||this.viewMatrix,this.cameraPosition=[(h=this.viewMatrixInverse)[12],h[13],h[14]];const d=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],f=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];rk(d,d,[this.width/2,-this.height/2,1]),nk(d,d,[1,-1,0]),ek(f,d,this.viewProjectionMatrix),this.pixelProjectionMatrix=f,this.pixelUnprojectionMatrix=tk([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],this.pixelProjectionMatrix),this.pixelUnprojectionMatrix||Gw.warn("Pixel project matrix not invertible")()}}ww(uI,"displayName","Viewport");class hI extends uI{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{latitude:e=0,longitude:n=0,zoom:r=0,pitch:i=0,bearing:o=0,nearZMultiplier:a=.1,farZMultiplier:s=1.01,nearZ:l,farZ:c,orthographic:u=!1,projectionMatrix:h,repeat:d=!1,worldOffset:f=0,position:p,padding:m,legacyMeterSizes:g=!1}=t;let{width:y,height:v,altitude:_=1.5}=t;const b=Math.pow(2,r);let x;y=y||1,v=v||1;let w=null;if(h)_=h[5]/2,x=Qk(_);else{let n;if(t.fovy?(x=t.fovy,_=tI(x)):x=Qk(_),m){const{top:t=0,bottom:e=0}=m;n=[0,CT((t+v-e)/2,0,v)-v/2]}w=Jk({width:y,height:v,scale:b,center:p&&[0,0,p[2]*Yk(e)],offset:n,pitch:i,fovy:x,nearZMultiplier:a,farZMultiplier:s}),Number.isFinite(l)&&(w.near=l),Number.isFinite(c)&&(w.far=c)}let S=function(t){const{height:e,pitch:n,bearing:r,altitude:i,scale:o,center:a}=t,s=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];nk(s,s,[0,0,-i]),ik(s,s,-n*Nk),ok(s,s,r*Nk);const l=o/e;return rk(s,s,[l,l,l]),a&&nk(s,s,function(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t}([],a)),s}({height:v,pitch:i,bearing:o,scale:b,altitude:_});if(f){S=(new Pk).translate([512*f,0,0]).multiplyLeft(S)}super({...t,width:y,height:v,viewMatrix:S,longitude:n,latitude:e,zoom:r,...w,fovy:x,focalDistance:_}),ww(this,"longitude",void 0),ww(this,"latitude",void 0),ww(this,"pitch",void 0),ww(this,"bearing",void 0),ww(this,"altitude",void 0),ww(this,"fovy",void 0),ww(this,"orthographic",void 0),ww(this,"_subViewports",void 0),ww(this,"_pseudoMeters",void 0),this.latitude=e,this.longitude=n,this.zoom=r,this.pitch=i,this.bearing=o,this.altitude=_,this.fovy=x,this.orthographic=u,this._subViewports=d?[]:null,this._pseudoMeters=g,Object.freeze(this)}get subViewports(){if(this._subViewports&&!this._subViewports.length){const t=this.getBounds(),e=Math.floor((t[0]+180)/360),n=Math.ceil((t[2]-180)/360);for(let r=e;r<=n;r++){const t=r?new hI({...this,worldOffset:r}):this;this._subViewports.push(t)}}return this._subViewports}projectPosition(t){if(this._pseudoMeters)return super.projectPosition(t);const[e,n]=this.projectFlat(t);return[e,n,(t[2]||0)*Yk(t[1])]}unprojectPosition(t){if(this._pseudoMeters)return super.unprojectPosition(t);const[e,n]=this.unprojectFlat(t);return[e,n,(t[2]||0)/Yk(n)]}addMetersToLngLat(t,e){return $k(t,e)}panByPosition(t,e){const n=nI(e,this.pixelUnprojectionMatrix),r=xk([],this.projectFlat(t),function(t,e){return t[0]=-e[0],t[1]=-e[1],t}([],n)),i=xk([],this.center,r),[o,a]=this.unprojectFlat(i);return{longitude:o,latitude:a}}getBounds(){const t=function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;const{width:n,height:r,unproject:i}=t,o={targetZ:e},a=i([0,r],o),s=i([n,r],o);let l,c;return(t.fovy?.5*t.fovy*iI:Math.atan(.5/t.altitude))>(90-t.pitch)*iI-.01?(l=oI(t,0,e),c=oI(t,n,e)):(l=i([0,0],o),c=i([n,0],o)),[a,s,c,l]}(this,(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).z||0);return[Math.min(t[0][0],t[1][0],t[2][0],t[3][0]),Math.min(t[0][1],t[1][1],t[2][1],t[3][1]),Math.max(t[0][0],t[1][0],t[2][0],t[3][0]),Math.max(t[0][1],t[1][1],t[2][1],t[3][1])]}fitBounds(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{width:n,height:r}=this,{longitude:i,latitude:o,zoom:a}=rI({width:n,height:r,bounds:t,...e});return new hI({width:n,height:r,longitude:i,latitude:o,zoom:a})}}ww(hI,"displayName","WebMercatorViewport");const dI=[0,0,0];function fI(t,e){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r=e.projectPosition(t);if(n&&e instanceof hI){const[n,i,o=0]=t,a=e.getDistanceScales([n,i]);r[2]=o*a.unitsPerMeter[2]}return r}function pI(t,e){let{viewport:n,modelMatrix:r,coordinateSystem:i,coordinateOrigin:o,offsetMode:a}=e,[s,l,c=0]=t;switch(r&&([s,l,c]=dk([],[s,l,c,1],r)),i){case qw.LNGLAT:return fI([s,l,c],n,a);case qw.LNGLAT_OFFSETS:return fI([s+o[0],l+o[1],c+(o[2]||0)],n,a);case qw.METER_OFFSETS:return fI($k(o,[s,l,c]),n,a);case qw.CARTESIAN:default:return n.isGeospatial?[s+o[0],l+o[1],c+o[2]]:n.projectPosition([s,l,c])}}function mI(t,e){const{viewport:n,coordinateSystem:r,coordinateOrigin:i,modelMatrix:o,fromCoordinateSystem:a,fromCoordinateOrigin:s}=function(t){const{viewport:e,modelMatrix:n,coordinateOrigin:r}=t;let{coordinateSystem:i,fromCoordinateSystem:o,fromCoordinateOrigin:a}=t;return i===qw.DEFAULT&&(i=e.isGeospatial?qw.LNGLAT:qw.CARTESIAN),void 0===o&&(o=i),void 0===a&&(a=r),{viewport:e,coordinateSystem:i,coordinateOrigin:r,modelMatrix:n,fromCoordinateSystem:o,fromCoordinateOrigin:a}}(e),{autoOffset:l=!0}=e,{geospatialOrigin:c=dI,shaderCoordinateOrigin:u=dI,offsetMode:h=!1}=l?_k(n,r,i):{},d=pI(t,{viewport:n,modelMatrix:o,coordinateSystem:a,coordinateOrigin:s,offsetMode:h});if(h){const t=n.projectPosition(c||u);HT(d,d,t)}return d}const gI={10241:9987,10240:9729,10242:33071,10243:33071},yI={};function vI(t,e,n){if(t===e)return!0;if(!n||!t||!e)return!1;if(Array.isArray(t)){if(!Array.isArray(e)||t.length!==e.length)return!1;for(let r=0;r<t.length;r++)if(!vI(t[r],e[r],n-1))return!1;return!0}if(Array.isArray(e))return!1;if("object"===typeof t&&"object"===typeof e){const r=Object.keys(t),i=Object.keys(e);if(r.length!==i.length)return!1;for(const o of r){if(!e.hasOwnProperty(o))return!1;if(!vI(t[o],e[o],n-1))return!1}return!0}return!1}const _I={boolean:{validate:(t,e)=>!0,equal:(t,e,n)=>Boolean(t)===Boolean(e)},number:{validate:(t,e)=>Number.isFinite(t)&&(!("max"in e)||t<=e.max)&&(!("min"in e)||t>=e.min)},color:{validate:(t,e)=>e.optional&&!t||wI(t)&&(3===t.length||4===t.length),equal:(t,e,n)=>vI(t,e,1)},accessor:{validate(t,e){const n=SI(t);return"function"===n||n===SI(e.value)},equal:(t,e,n)=>"function"===typeof e||vI(t,e,1)},array:{validate:(t,e)=>e.optional&&!t||wI(t),equal(t,e,n){const{compare:r}=n,i=Number.isInteger(r)?r:r?1:0;return r?vI(t,e,i):t===e}},object:{equal(t,e,n){if(n.ignore)return!0;const{compare:r}=n,i=Number.isInteger(r)?r:r?1:0;return r?vI(t,e,i):t===e}},function:{validate:(t,e)=>e.optional&&!t||"function"===typeof t,equal:(t,e,n)=>!n.compare&&!1!==n.ignore||t===e},data:{transform:(t,e,n)=>{const{dataTransform:r}=n.props;return r&&t?r(t):t}},image:{transform:(t,e,n)=>{const r=n.context;return r&&r.gl?function(t,e,n,r){if(n instanceof zE)return n;n.constructor&&"Object"!==n.constructor.name&&(n={data:n});let i=null;n.compressed&&(i={10241:n.data.length>1?9985:9729});const o=new zE(e,{...n,parameters:{...gI,...i,...r}});return yI[o.id]=t,o}(n.id,r.gl,t,{...e.parameters,...n.props.textureParameters}):null},release:(t,e,n)=>{var r,i;r=n.id,(i=t)&&i instanceof zE&&yI[i.id]===r&&(i.delete(),delete yI[i.id])}}};function bI(t,e){switch(SI(e)){case"object":return xI(t,e);case"array":return xI(t,{type:"array",value:e,compare:!1});case"boolean":return xI(t,{type:"boolean",value:e});case"number":return xI(t,{type:"number",value:e});case"function":return xI(t,{type:"function",value:e,compare:!0});default:return{name:t,type:"unknown",value:e}}}function xI(t,e){return"type"in e?{name:t,..._I[e.type],...e}:"value"in e?{name:t,type:SI(e.value),...e}:{name:t,type:"object",value:e}}function wI(t){return Array.isArray(t)||ArrayBuffer.isView(t)}function SI(t){return wI(t)?"array":null===t?"null":typeof t}const EI="_mergedDefaultProps";function TI(t,e){let n=EI;if(e)for(const i of e){const t=i.constructor;t&&(n+=":".concat(t.extensionName||t.name))}const r=CI(t,n);return r||(t[n]=function(t,e){const n=t.prototype;if(!n)return null;const r=Object.getPrototypeOf(t),i=TI(r),o=CI(t,"defaultProps")||{},a=function(t){const e={},n={},r={};for(const[i,o]of Object.entries(t)){const t=null===o||void 0===o?void 0:o.deprecatedFor;if(t)r[i]=Array.isArray(t)?t:[t];else{const t=bI(i,o);e[i]=t,n[i]=t.value}}return{propTypes:e,defaultProps:n,deprecatedProps:r}}(o),s=Object.assign(Object.create(null),i,a.defaultProps),l=Object.assign(Object.create(null),null===i||void 0===i?void 0:i[UP],a.propTypes),c=Object.assign(Object.create(null),null===i||void 0===i?void 0:i[VP],a.deprecatedProps);for(const u of e){const t=TI(u.constructor);t&&(Object.assign(s,t),Object.assign(l,t[UP]),Object.assign(c,t[VP]))}(function(t,e){const n=function(t){const e=t.componentName;e||Gw.warn("".concat(t.name,".componentName not specified"))();return e||t.name}(e);Object.defineProperties(t,{id:{writable:!0,value:n}})})(s,t),function(t,e){const n={},r={};for(const i in e){const t=e[i],{name:o,value:a}=t;t.async&&(n[o]=a,r[o]=MI(o))}t[WP]=n,t[GP]={},Object.defineProperties(t,r)}(s,l),function(t,e){for(const n in e)Object.defineProperty(t,n,{enumerable:!1,set(t){const r="".concat(this.id,": ").concat(n);for(const i of e[n])AI(this,i)||(this[i]=t);Gw.deprecated(r,e[n].join("/"))()}})}(s,c),s[UP]=l,s[VP]=c,0!==e.length||AI(t,"_propTypes")||(t._propTypes=l);return s}(t,e||[]))}function MI(t){return{enumerable:!0,set(e){"string"===typeof e||e instanceof Promise||dM(e)?this[GP][t]=e:this[qP][t]=e},get(){if(this[qP]){if(t in this[qP]){return this[qP][t]||this[WP][t]}if(t in this[GP]){const e=this[NP]&&this[NP].internalState;if(e&&e.hasAsyncProp(t))return e.getAsyncProp(t)||this[WP][t]}}return this[WP][t]}}}function AI(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function CI(t,e){return AI(t,e)&&t[e]}let PI=0;class kI{constructor(){ww(this,"id",void 0),ww(this,"props",void 0),ww(this,"count",void 0);for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];this.props=function(t,e){let n;for(let o=e.length-1;o>=0;o--){const t=e[o];"extensions"in t&&(n=t.extensions)}const r=TI(t.constructor,n),i=Object.create(r);i[NP]=t,i[GP]={},i[qP]={};for(let o=0;o<e.length;++o){const t=e[o];for(const e in t)i[e]=t[e]}return Object.freeze(i),i}(this,e),this.id=this.props.id,this.count=PI++}clone(t){const{props:e}=this,n={};for(const r in e[WP])r in e[qP]?n[r]=e[qP][r]:r in e[GP]&&(n[r]=e[GP][r]);return new this.constructor({...e,...n,...t})}}ww(kI,"componentName","Component"),ww(kI,"defaultProps",{});const II=Object.freeze({});class OI{constructor(t){ww(this,"component",void 0),ww(this,"onAsyncPropUpdated",void 0),ww(this,"asyncProps",void 0),ww(this,"oldProps",void 0),ww(this,"oldAsyncProps",void 0),this.component=t,this.asyncProps={},this.onAsyncPropUpdated=()=>{},this.oldProps=null,this.oldAsyncProps=null}finalize(){for(const t in this.asyncProps){const e=this.asyncProps[t];e&&e.type&&e.type.release&&e.type.release(e.resolvedValue,e.type,this.component)}this.asyncProps={},this.component=null,this.resetOldProps()}getOldProps(){return this.oldAsyncProps||this.oldProps||II}resetOldProps(){this.oldAsyncProps=null,this.oldProps=this.component?this.component.props:null}hasAsyncProp(t){return t in this.asyncProps}getAsyncProp(t){const e=this.asyncProps[t];return e&&e.resolvedValue}isAsyncPropLoading(t){if(t){const e=this.asyncProps[t];return Boolean(e&&e.pendingLoadCount>0&&e.pendingLoadCount!==e.resolvedLoadCount)}for(const e in this.asyncProps)if(this.isAsyncPropLoading(e))return!0;return!1}reloadAsyncProp(t,e){this._watchPromise(t,Promise.resolve(e))}setAsyncProps(t){this.component=t[NP]||this.component;const e=t[qP]||{},n=t[GP]||t,r=t[WP]||{};for(const i in e){const t=e[i];this._createAsyncPropData(i,r[i]),this._updateAsyncProp(i,t),e[i]=this.getAsyncProp(i)}for(const i in n){const t=n[i];this._createAsyncPropData(i,r[i]),this._updateAsyncProp(i,t)}}_fetch(t,e){return null}_onResolve(t,e){}_onError(t,e){}_updateAsyncProp(t,e){this._didAsyncInputValueChange(t,e)&&("string"===typeof e&&(e=this._fetch(t,e)),e instanceof Promise?this._watchPromise(t,e):dM(e)?this._resolveAsyncIterable(t,e):this._setPropValue(t,e))}_freezeAsyncOldProps(){if(!this.oldAsyncProps&&this.oldProps){this.oldAsyncProps=Object.create(this.oldProps);for(const t in this.asyncProps)Object.defineProperty(this.oldAsyncProps,t,{enumerable:!0,value:this.oldProps[t]})}}_didAsyncInputValueChange(t,e){const n=this.asyncProps[t];return e!==n.resolvedValue&&e!==n.lastValue&&(n.lastValue=e,!0)}_setPropValue(t,e){this._freezeAsyncOldProps();const n=this.asyncProps[t];n&&(e=this._postProcessValue(n,e),n.resolvedValue=e,n.pendingLoadCount++,n.resolvedLoadCount=n.pendingLoadCount)}_setAsyncPropValue(t,e,n){const r=this.asyncProps[t];r&&n>=r.resolvedLoadCount&&void 0!==e&&(this._freezeAsyncOldProps(),r.resolvedValue=e,r.resolvedLoadCount=n,this.onAsyncPropUpdated(t,e))}_watchPromise(t,e){const n=this.asyncProps[t];if(n){n.pendingLoadCount++;const r=n.pendingLoadCount;e.then((e=>{this.component&&(e=this._postProcessValue(n,e),this._setAsyncPropValue(t,e,r),this._onResolve(t,e))})).catch((e=>{this._onError(t,e)}))}}async _resolveAsyncIterable(t,e){if("data"!==t)return void this._setPropValue(t,e);const n=this.asyncProps[t];if(!n)return;n.pendingLoadCount++;const r=n.pendingLoadCount;let i=[],o=0;for await(const a of e){if(!this.component)return;const{dataTransform:e}=this.component.props;i=e?e(a,i):i.concat(a),Object.defineProperty(i,"__diff",{enumerable:!1,value:[{startRow:o,endRow:i.length}]}),o=i.length,this._setAsyncPropValue(t,i,r)}this._onResolve(t,i)}_postProcessValue(t,e){const n=t.type;return n&&this.component&&(n.release&&n.release(t.resolvedValue,n,this.component),n.transform)?n.transform(e,n,this.component):e}_createAsyncPropData(t,e){if(!this.asyncProps[t]){const n=this.component&&this.component.props[UP];this.asyncProps[t]={type:n&&n[t],lastValue:null,resolvedValue:e,pendingLoadCount:0,resolvedLoadCount:0}}}}class LI extends OI{constructor(t){let{attributeManager:e,layer:n}=t;super(n),ww(this,"attributeManager",void 0),ww(this,"needsRedraw",void 0),ww(this,"needsUpdate",void 0),ww(this,"subLayers",void 0),ww(this,"usesPickingColorCache",void 0),ww(this,"hasPickingBuffer",void 0),ww(this,"changeFlags",void 0),ww(this,"viewport",void 0),ww(this,"uniformTransitions",void 0),ww(this,"propsInTransition",void 0),this.attributeManager=e,this.needsRedraw=!0,this.needsUpdate=!0,this.subLayers=null,this.usesPickingColorCache=!1}get layer(){return this.component}_fetch(t,e){const n=this.layer,r=null===n||void 0===n?void 0:n.props.fetch;return r?r(e,{propName:t,layer:n}):super._fetch(t,e)}_onResolve(t,e){const n=this.layer;if(n){const r=n.props.onDataLoad;"data"===t&&r&&r(e,{propName:t,layer:n})}}_onError(t,e){const n=this.layer;n&&n.raiseError(e,"loading ".concat(t," of ").concat(this.layer))}}const jI=t=>"boolean"===typeof t,zI=t=>"function"===typeof t,RI=t=>null!==t&&"object"===typeof t,DI=t=>RI(t)&&t.constructor==={}.constructor,BI=t=>t&&"function"===typeof t[Symbol.iterator],FI=t=>t&&"function"===typeof t[Symbol.asyncIterator],NI=t=>"undefined"!==typeof Response&&t instanceof Response||t&&t.arrayBuffer&&t.text&&t.json,UI=t=>"undefined"!==typeof Blob&&t instanceof Blob,VI=t=>t&&"object"===typeof t&&t.isBuffer,WI=t=>(t=>"undefined"!==typeof ReadableStream&&t instanceof ReadableStream||RI(t)&&zI(t.tee)&&zI(t.cancel)&&zI(t.getReader))(t)||(t=>RI(t)&&zI(t.read)&&zI(t.pipe)&&jI(t.readable))(t);function GI(t,e){if(!t)throw new Error(e||"loader assertion failed.")}function qI(t){var e;if(!t)return!1;Array.isArray(t)&&(t=t[0]);return Array.isArray(null===(e=t)||void 0===e?void 0:e.extensions)}function HI(t){var e,n;let r;return GI(t,"null loader"),GI(qI(t),"invalid loader"),Array.isArray(t)&&(r=t[1],t=t[0],t={...t,options:{...t.options,...r}}),(null!==(e=t)&&void 0!==e&&e.parseTextSync||null!==(n=t)&&void 0!==n&&n.parseText)&&(t.text=!0),t.text||(t.binary=!0),t}let ZI="";const XI={};const YI=/^data:([-\w.]+\/[-\w.+]+)(;|,)/,KI=/^([-\w.]+\/[-\w.+]+)/;function $I(t){const e=YI.exec(t);return e?e[1]:""}const JI=/\?.*/;function QI(t){return t.replace(JI,"")}function tO(t){if(NI(t)){return t.url}if(UI(t)){return t.name||""}return"string"===typeof t?t:""}function eO(t){if(NI(t)){const e=t,n=e.headers.get("content-type")||"",r=QI(e.url);return function(t){const e=KI.exec(t);return e?e[1]:t}(n)||$I(r)}if(UI(t)){return t.type||""}return"string"===typeof t?$I(t):""}async function nO(t){if(NI(t))return t;const e={},n=function(t){if(NI(t))return t.headers["content-length"]||-1;if(UI(t))return t.size;return"string"===typeof t?t.length:t instanceof ArrayBuffer||ArrayBuffer.isView(t)?t.byteLength:-1}(t);n>=0&&(e["content-length"]=String(n));const r=tO(t),i=eO(t);i&&(e["content-type"]=i);const o=await async function(t){const e=5;if("string"===typeof t)return"data:,".concat(t.slice(0,e));if(t instanceof Blob){const e=t.slice(0,5);return await new Promise((t=>{const n=new FileReader;n.onload=e=>{var n;return t(null===e||void 0===e||null===(n=e.target)||void 0===n?void 0:n.result)},n.readAsDataURL(e)}))}if(t instanceof ArrayBuffer){const n=function(t){let e="";const n=new Uint8Array(t);for(let r=0;r<n.byteLength;r++)e+=String.fromCharCode(n[r]);return btoa(e)}(t.slice(0,e));return"data:base64,".concat(n)}return null}(t);o&&(e["x-first-bytes"]=o),"string"===typeof t&&(t=(new TextEncoder).encode(t));const a=new Response(t,{headers:e});return Object.defineProperty(a,"url",{value:r}),a}async function rO(t,e){if("string"===typeof t){t=function(t){for(const e in XI)if(t.startsWith(e)){const n=XI[e];t=t.replace(e,n)}return t.startsWith("http://")||t.startsWith("https://")||(t="".concat(ZI).concat(t)),t}(t);let n=e;return null!==e&&void 0!==e&&e.fetch&&"function"!==typeof(null===e||void 0===e?void 0:e.fetch)&&(n=e.fetch),await fetch(t,n)}return await nO(t)}const iO=new Nw({id:"loaders.gl"});class oO{log(){return()=>{}}info(){return()=>{}}warn(){return()=>{}}error(){return()=>{}}}"undefined"!==typeof self&&self,"undefined"!==typeof window&&window,"undefined"!==typeof n.g&&n.g,"undefined"!==typeof document&&document;const aO=Boolean("object"!==typeof process||"[object process]"!==String(process)||process.browser),sO="undefined"!==typeof process&&process.version&&/v([0-9]*)/.exec(process.version),lO=(sO&&parseFloat(sO[1]),{fetch:null,mimeType:void 0,nothrow:!1,log:new class{constructor(){ww(this,"console",void 0),this.console=console}log(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return this.console.log.bind(this.console,...e)}info(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return this.console.info.bind(this.console,...e)}warn(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return this.console.warn.bind(this.console,...e)}error(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return this.console.error.bind(this.console,...e)}},CDN:"https://unpkg.com/@loaders.gl",worker:!0,maxConcurrency:3,maxMobileConcurrency:1,reuseWorkers:aO,_nodeWorkers:!1,_workerType:"",limit:0,_limitMB:0,batchSize:"auto",batchDebounceMs:0,metadata:!1,transforms:[]}),cO={throws:"nothrow",dataType:"(no longer used)",uri:"baseUri",method:"fetch.method",headers:"fetch.headers",body:"fetch.body",mode:"fetch.mode",credentials:"fetch.credentials",cache:"fetch.cache",redirect:"fetch.redirect",referrer:"fetch.referrer",referrerPolicy:"fetch.referrerPolicy",integrity:"fetch.integrity",keepalive:"fetch.keepalive",signal:"fetch.signal"};function uO(){globalThis.loaders=globalThis.loaders||{};const{loaders:t}=globalThis;return t._state=t._state||{},t._state}const hO=()=>{const t=uO();return t.globalOptions=t.globalOptions||{...lO},t.globalOptions};function dO(t,e,n,r){return n=n||[],function(t,e){fO(t,null,lO,cO,e);for(const n of e){const r=t&&t[n.id]||{},i=n.options&&n.options[n.id]||{},o=n.deprecatedOptions&&n.deprecatedOptions[n.id]||{};fO(r,n.id,i,o,e)}}(t,n=Array.isArray(n)?n:[n]),mO(e,t,r)}function fO(t,e,n,r,i){const o=e||"Top level",a=e?"".concat(e,"."):"";for(const s in t){const l=!e&&RI(t[s]);if(!(s in n)&&!("baseUri"===s&&!e)&&!("workerUrl"===s&&e))if(s in r)iO.warn("".concat(o," loader option '").concat(a).concat(s,"' no longer supported, use '").concat(r[s],"'"))();else if(!l){const t=pO(s,i);iO.warn("".concat(o," loader option '").concat(a).concat(s,"' not recognized. ").concat(t))()}}}function pO(t,e){const n=t.toLowerCase();let r="";for(const i of e)for(const e in i.options){if(t===e)return"Did you mean '".concat(i.id,".").concat(e,"'?");const o=e.toLowerCase();(n.startsWith(o)||o.startsWith(n))&&(r=r||"Did you mean '".concat(i.id,".").concat(e,"'?"))}return r}function mO(t,e,n){const r={...t.options||{}};return function(t,e){e&&!("baseUri"in t)&&(t.baseUri=e)}(r,n),null===r.log&&(r.log=new oO),gO(r,hO()),gO(r,e),r}function gO(t,e){for(const n in e)if(n in e){const r=e[n];DI(r)&&DI(t[n])?t[n]={...t[n],...e[n]}:t[n]=e[n]}}function yO(t,e){const n=hO(),r=t||n;return"function"===typeof r.fetch?r.fetch:RI(r.fetch)?t=>rO(t,r):null!==e&&void 0!==e&&e.fetch?null===e||void 0===e?void 0:e.fetch:rO}function vO(t,e){if(!t)throw new Error(e||"loaders.gl assertion failed.")}const _O="3.4.15";"undefined"!==typeof self&&self,"undefined"!==typeof window&&window,"undefined"!==typeof n.g&&n.g,"undefined"!==typeof document&&document;const bO="object"!==typeof process||"[object process]"!==String(process)||process.browser,xO="undefined"!==typeof window&&"undefined"!==typeof window.orientation,wO="undefined"!==typeof process&&process.version&&/v([0-9]*)/.exec(process.version);wO&&parseFloat(wO[1]);class SO{terminate(){}}const EO=new Map;function TO(t){vO(t.source&&!t.url||!t.source&&t.url);let e=EO.get(t.source||t.url);return e||(t.url&&(e=function(t){if(!t.startsWith("http"))return t;return MO((e=t,"try {\n  importScripts('".concat(e,"');\n} catch (error) {\n  console.error(error);\n  throw error;\n}")));var e}(t.url),EO.set(t.url,e)),t.source&&(e=MO(t.source),EO.set(t.source,e))),vO(e),e}function MO(t){const e=new Blob([t],{type:"application/javascript"});return URL.createObjectURL(e)}function AO(t){let e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=arguments.length>2?arguments[2]:void 0;const r=n||new Set;if(t){if(CO(t))r.add(t);else if(CO(t.buffer))r.add(t.buffer);else if(ArrayBuffer.isView(t));else if(e&&"object"===typeof t)for(const i in t)AO(t[i],e,r)}else;return void 0===n?Array.from(r):[]}function CO(t){return!!t&&(t instanceof ArrayBuffer||("undefined"!==typeof MessagePort&&t instanceof MessagePort||("undefined"!==typeof ImageBitmap&&t instanceof ImageBitmap||"undefined"!==typeof OffscreenCanvas&&t instanceof OffscreenCanvas)))}const PO=()=>{};class kO{static isSupported(){return"undefined"!==typeof Worker&&bO||"undefined"!==typeof SO&&!bO}constructor(t){ww(this,"name",void 0),ww(this,"source",void 0),ww(this,"url",void 0),ww(this,"terminated",!1),ww(this,"worker",void 0),ww(this,"onMessage",void 0),ww(this,"onError",void 0),ww(this,"_loadableURL","");const{name:e,source:n,url:r}=t;vO(n||r),this.name=e,this.source=n,this.url=r,this.onMessage=PO,this.onError=t=>console.log(t),this.worker=bO?this._createBrowserWorker():this._createNodeWorker()}destroy(){this.onMessage=PO,this.onError=PO,this.worker.terminate(),this.terminated=!0}get isRunning(){return Boolean(this.onMessage)}postMessage(t,e){e=e||AO(t),this.worker.postMessage(t,e)}_getErrorFromErrorEvent(t){let e="Failed to load ";return e+="worker ".concat(this.name," from ").concat(this.url,". "),t.message&&(e+="".concat(t.message," in ")),t.lineno&&(e+=":".concat(t.lineno,":").concat(t.colno)),new Error(e)}_createBrowserWorker(){this._loadableURL=TO({source:this.source,url:this.url});const t=new Worker(this._loadableURL,{name:this.name});return t.onmessage=t=>{t.data?this.onMessage(t.data):this.onError(new Error("No data received"))},t.onerror=t=>{this.onError(this._getErrorFromErrorEvent(t)),this.terminated=!0},t.onmessageerror=t=>console.error(t),t}_createNodeWorker(){let t;if(this.url){const e=this.url.includes(":/")||this.url.startsWith("/")?this.url:"./".concat(this.url);t=new SO(e,{eval:!1})}else{if(!this.source)throw new Error("no worker");t=new SO(this.source,{eval:!0})}return t.on("message",(t=>{this.onMessage(t)})),t.on("error",(t=>{this.onError(t)})),t.on("exit",(t=>{})),t}}class IO{constructor(t,e){ww(this,"name",void 0),ww(this,"workerThread",void 0),ww(this,"isRunning",!0),ww(this,"result",void 0),ww(this,"_resolve",(()=>{})),ww(this,"_reject",(()=>{})),this.name=t,this.workerThread=e,this.result=new Promise(((t,e)=>{this._resolve=t,this._reject=e}))}postMessage(t,e){this.workerThread.postMessage({source:"loaders.gl",type:t,payload:e})}done(t){vO(this.isRunning),this.isRunning=!1,this._resolve(t)}error(t){vO(this.isRunning),this.isRunning=!1,this._reject(t)}}class OO{static isSupported(){return kO.isSupported()}constructor(t){ww(this,"name","unnamed"),ww(this,"source",void 0),ww(this,"url",void 0),ww(this,"maxConcurrency",1),ww(this,"maxMobileConcurrency",1),ww(this,"onDebug",(()=>{})),ww(this,"reuseWorkers",!0),ww(this,"props",{}),ww(this,"jobQueue",[]),ww(this,"idleQueue",[]),ww(this,"count",0),ww(this,"isDestroyed",!1),this.source=t.source,this.url=t.url,this.setProps(t)}destroy(){this.idleQueue.forEach((t=>t.destroy())),this.isDestroyed=!0}setProps(t){this.props={...this.props,...t},void 0!==t.name&&(this.name=t.name),void 0!==t.maxConcurrency&&(this.maxConcurrency=t.maxConcurrency),void 0!==t.maxMobileConcurrency&&(this.maxMobileConcurrency=t.maxMobileConcurrency),void 0!==t.reuseWorkers&&(this.reuseWorkers=t.reuseWorkers),void 0!==t.onDebug&&(this.onDebug=t.onDebug)}async startJob(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:(t,e,n)=>t.done(n),n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:(t,e)=>t.error(e);const r=new Promise((r=>(this.jobQueue.push({name:t,onMessage:e,onError:n,onStart:r}),this)));return this._startQueuedJob(),await r}async _startQueuedJob(){if(!this.jobQueue.length)return;const t=this._getAvailableWorker();if(!t)return;const e=this.jobQueue.shift();if(e){this.onDebug({message:"Starting job",name:e.name,workerThread:t,backlog:this.jobQueue.length});const n=new IO(e.name,t);t.onMessage=t=>e.onMessage(n,t.type,t.payload),t.onError=t=>e.onError(n,t),e.onStart(n);try{await n.result}finally{this.returnWorkerToQueue(t)}}}returnWorkerToQueue(t){this.isDestroyed||!this.reuseWorkers||this.count>this._getMaxConcurrency()?(t.destroy(),this.count--):this.idleQueue.push(t),this.isDestroyed||this._startQueuedJob()}_getAvailableWorker(){if(this.idleQueue.length>0)return this.idleQueue.shift()||null;if(this.count<this._getMaxConcurrency()){this.count++;const t="".concat(this.name.toLowerCase()," (#").concat(this.count," of ").concat(this.maxConcurrency,")");return new kO({name:t,source:this.source,url:this.url})}return null}_getMaxConcurrency(){return xO?this.maxMobileConcurrency:this.maxConcurrency}}const LO={maxConcurrency:3,maxMobileConcurrency:1,reuseWorkers:!0,onDebug:()=>{}};class jO{static isSupported(){return kO.isSupported()}static getWorkerFarm(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return jO._workerFarm=jO._workerFarm||new jO({}),jO._workerFarm.setProps(t),jO._workerFarm}constructor(t){ww(this,"props",void 0),ww(this,"workerPools",new Map),this.props={...LO},this.setProps(t),this.workerPools=new Map}destroy(){for(const t of this.workerPools.values())t.destroy();this.workerPools=new Map}setProps(t){this.props={...this.props,...t};for(const e of this.workerPools.values())e.setProps(this._getWorkerPoolProps())}getWorkerPool(t){const{name:e,source:n,url:r}=t;let i=this.workerPools.get(e);return i||(i=new OO({name:e,source:n,url:r}),i.setProps(this._getWorkerPoolProps()),this.workerPools.set(e,i)),i}_getWorkerPoolProps(){return{maxConcurrency:this.props.maxConcurrency,maxMobileConcurrency:this.props.maxMobileConcurrency,reuseWorkers:this.props.reuseWorkers,onDebug:this.props.onDebug}}}ww(jO,"_workerFarm",void 0);const zO="latest";async function RO(t,e,n,r,i){const o=t.id,a=function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=e[t.id]||{},r="".concat(t.id,"-worker.js");let i=n.workerUrl;if(i||"compression"!==t.id||(i=e.workerUrl),"test"===e._workerType&&(i="modules/".concat(t.module,"/dist/").concat(r)),!i){let e=t.version;"latest"===e&&(e=zO);const n=e?"@".concat(e):"";i="https://unpkg.com/@loaders.gl/".concat(t.module).concat(n,"/dist/").concat(r)}return vO(i),i}(t,n),s=jO.getWorkerFarm(n).getWorkerPool({name:o,url:a});n=JSON.parse(JSON.stringify(n)),r=JSON.parse(JSON.stringify(r||{}));const l=await s.startJob("process-on-worker",DO.bind(null,i));l.postMessage("process",{input:e,options:n,context:r});const c=await l.result;return await c.result}async function DO(t,e,n,r){switch(n){case"done":e.done(r);break;case"error":e.error(new Error(r.error));break;case"process":const{id:o,input:a,options:s}=r;try{const n=await t(a,s);e.postMessage("done",{id:o,result:n})}catch(i){const t=i instanceof Error?i.message:"unknown error";e.postMessage("error",{id:o,error:t})}break;default:console.warn("parse-with-worker unknown message ".concat(n))}}async function BO(t){const e=[];for await(const n of t)e.push(n);return function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];const r=e.map((t=>t instanceof ArrayBuffer?new Uint8Array(t):t)),i=r.reduce(((t,e)=>t+e.byteLength),0),o=new Uint8Array(i);let a=0;for(const s of r)o.set(s,a),a+=s.byteLength;return o.buffer}(...e)}const FO=262144;const NO=262144;const UO=1048576;function VO(t){if(function(t){return t&&"object"===typeof t&&t.isBuffer}(t))return t;if(t instanceof ArrayBuffer)return t;if(ArrayBuffer.isView(t))return 0===t.byteOffset&&t.byteLength===t.buffer.byteLength?t.buffer:t.buffer.slice(t.byteOffset,t.byteOffset+t.byteLength);if("string"===typeof t){const e=t;return(new TextEncoder).encode(e).buffer}if(t&&"object"===typeof t&&t._toArrayBuffer)return t._toArrayBuffer();throw new Error("toArrayBuffer")}function WO(t,e){return aO?async function*(t,e){const n=t.getReader();let r;try{for(;;){const t=r||n.read();null!==e&&void 0!==e&&e._streamReadAhead&&(r=n.read());const{done:i,value:o}=await t;if(i)return;yield VO(o)}}catch(i){n.releaseLock()}}(t,e):async function*(t,e){for await(const n of t)yield VO(n)}(t)}function GO(t,e){if("string"===typeof t)return function*(t,e){const n=(null===e||void 0===e?void 0:e.chunkSize)||FO;let r=0;const i=new TextEncoder;for(;r<t.length;){const e=Math.min(t.length-r,n),o=t.slice(r,r+e);r+=e,yield i.encode(o)}}(t,e);if(t instanceof ArrayBuffer)return function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return function*(){const{chunkSize:n=NO}=e;let r=0;for(;r<t.byteLength;){const e=Math.min(t.byteLength-r,n),i=new ArrayBuffer(e),o=new Uint8Array(t,r,e);new Uint8Array(i).set(o),r+=e,yield i}}()}(t,e);if(UI(t))return async function*(t,e){const n=(null===e||void 0===e?void 0:e.chunkSize)||UO;let r=0;for(;r<t.size;){const e=r+n,i=await t.slice(r,e).arrayBuffer();r=e,yield i}}(t,e);if(WI(t))return WO(t,e);if(NI(t)){return WO(t.body,e)}throw new Error("makeIterator")}const qO="Cannot convert supplied data type";async function HO(t,e,n){const r=t instanceof ArrayBuffer||ArrayBuffer.isView(t);if("string"===typeof t||r)return function(t,e,n){if(e.text&&"string"===typeof t)return t;if(VI(t)&&(t=t.buffer),t instanceof ArrayBuffer){const n=t;return e.text&&!e.binary?new TextDecoder("utf8").decode(n):n}if(ArrayBuffer.isView(t)){if(e.text&&!e.binary)return new TextDecoder("utf8").decode(t);let n=t.buffer;const r=t.byteLength||t.length;return 0===t.byteOffset&&r===n.byteLength||(n=n.slice(t.byteOffset,t.byteOffset+r)),n}throw new Error(qO)}(t,e);if(UI(t)&&(t=await nO(t)),NI(t)){const n=t;return await async function(t){if(!t.ok){const e=await async function(t){let e="Failed to fetch resource ".concat(t.url," (").concat(t.status,"): ");try{const n=t.headers.get("Content-Type");let r=t.statusText;n.includes("application/json")&&(r+=" ".concat(await t.text())),e+=r,e=e.length>60?"".concat(e.slice(0,60),"..."):e}catch(n){}return e}(t);throw new Error(e)}}(n),e.binary?await n.arrayBuffer():await n.text()}if(WI(t)&&(t=GO(t,n)),BI(t)||FI(t))return BO(t);throw new Error(qO)}function ZO(t){const e=t?t.lastIndexOf("/"):-1;return e>=0?t.substr(e+1):""}function XO(t,e,n){if(n)return n;const r={fetch:yO(e,t),...t};if(r.url){const t=QI(r.url);r.baseUrl=t,r.queryString=function(t){const e=t.match(JI);return e&&e[0]}(r.url),r.filename=ZO(t),r.baseUrl=function(t){const e=t?t.lastIndexOf("/"):-1;return e>=0?t.substr(0,e):""}(t)}return Array.isArray(r.loaders)||(r.loaders=null),r}const YO=new Nw({id:"loaders.gl"}),KO=()=>{const t=uO();return t.loaderRegistry=t.loaderRegistry||[],t.loaderRegistry};const $O=/\.([^.]+)$/;function JO(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2?arguments[2]:void 0,r=arguments.length>3?arguments[3]:void 0;if(!QO(t))return null;if(e&&!Array.isArray(e))return HI(e);let i=[];e&&(i=i.concat(e)),null!==n&&void 0!==n&&n.ignoreRegisteredLoaders||i.push(...KO()),function(t){for(const e of t)HI(e)}(i);const o=function(t,e,n,r){const i=tO(t),o=eO(t),a=QI(i)||(null===r||void 0===r?void 0:r.url);let s=null,l="";null!==n&&void 0!==n&&n.mimeType&&(s=eL(e,null===n||void 0===n?void 0:n.mimeType),l="match forced by supplied MIME type ".concat(null===n||void 0===n?void 0:n.mimeType));var c;s=s||function(t,e){const n=e&&$O.exec(e),r=n&&n[1];return r?function(t,e){e=e.toLowerCase();for(const n of t)for(const t of n.extensions)if(t.toLowerCase()===e)return n;return null}(t,r):null}(e,a),l=l||(s?"matched url ".concat(a):""),s=s||eL(e,o),l=l||(s?"matched MIME type ".concat(o):""),s=s||function(t,e){if(!e)return null;for(const n of t)if("string"===typeof e){if(nL(e,n))return n}else if(ArrayBuffer.isView(e)){if(rL(e.buffer,e.byteOffset,n))return n}else if(e instanceof ArrayBuffer){if(rL(e,0,n))return n}return null}(e,t),l=l||(s?"matched initial data ".concat(iL(t)):""),s=s||eL(e,null===n||void 0===n?void 0:n.fallbackMimeType),l=l||(s?"matched fallback MIME type ".concat(o):""),l&&YO.log(1,"selectLoader selected ".concat(null===(c=s)||void 0===c?void 0:c.name,": ").concat(l,"."));return s}(t,i,n,r);if(!o&&(null===n||void 0===n||!n.nothrow))throw new Error(tL(t));return o}function QO(t){return!(t instanceof Response&&204===t.status)}function tL(t){const e=tO(t),n=eO(t);let r="No valid loader found (";r+=e?"".concat(ZO(e),", "):"no url provided, ",r+="MIME type: ".concat(n?'"'.concat(n,'"'):"not provided",", ");const i=t?iL(t):"";return r+=i?' first bytes: "'.concat(i,'"'):"first bytes: not available",r+=")",r}function eL(t,e){for(const n of t){if(n.mimeTypes&&n.mimeTypes.includes(e))return n;if(e==="application/x.".concat(n.id))return n}return null}function nL(t,e){if(e.testText)return e.testText(t);return(Array.isArray(e.tests)?e.tests:[e.tests]).some((e=>t.startsWith(e)))}function rL(t,e,n){return(Array.isArray(n.tests)?n.tests:[n.tests]).some((r=>function(t,e,n,r){if(r instanceof ArrayBuffer)return function(t,e,n){if(n=n||t.byteLength,t.byteLength<n||e.byteLength<n)return!1;const r=new Uint8Array(t),i=new Uint8Array(e);for(let o=0;o<r.length;++o)if(r[o]!==i[o])return!1;return!0}(r,t,r.byteLength);switch(typeof r){case"function":return r(t,n);case"string":return r===oL(t,e,r.length);default:return!1}}(t,e,n,r)))}function iL(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:5;if("string"===typeof t)return t.slice(0,e);if(ArrayBuffer.isView(t))return oL(t.buffer,t.byteOffset,e);if(t instanceof ArrayBuffer){return oL(t,0,e)}return""}function oL(t,e,n){if(t.byteLength<e+n)return"";const r=new DataView(t);let i="";for(let o=0;o<n;o++)i+=String.fromCharCode(r.getUint8(e+o));return i}async function aL(t,e,n,r){vO(!r||"object"===typeof r),!e||Array.isArray(e)||qI(e)||(r=void 0,n=e,e=void 0),n=n||{};const i=tO(t=await t),o=function(t,e){if(!e&&t&&!Array.isArray(t))return t;let n;if(t&&(n=Array.isArray(t)?t:[t]),e&&e.loaders){const t=Array.isArray(e.loaders)?e.loaders:[e.loaders];n=n?[...n,...t]:t}return n&&n.length?n:null}(e,r),a=await async function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2?arguments[2]:void 0,r=arguments.length>3?arguments[3]:void 0;if(!QO(t))return null;let i=JO(t,e,{...n,nothrow:!0},r);if(i)return i;if(UI(t)&&(i=JO(t=await t.slice(0,10).arrayBuffer(),e,n,r)),!i&&(null===n||void 0===n||!n.nothrow))throw new Error(tL(t));return i}(t,o,n);return a?(r=XO({url:i,parse:aL,loaders:o},n=dO(n,a,o,i),r||null),await async function(t,e,n,r){if(function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:_O;vO(t,"no worker provided");const n=t.version}(t),NI(e)){const t=e,{ok:n,redirected:i,status:o,statusText:a,type:s,url:l}=t,c=Object.fromEntries(t.headers.entries());r.response={headers:c,ok:n,redirected:i,status:o,statusText:a,type:s,url:l}}if(e=await HO(e,t,n),t.parseTextSync&&"string"===typeof e)return n.dataType="text",t.parseTextSync(e,n,r,t);if(function(t,e){return!!jO.isSupported()&&!!(bO||null!==e&&void 0!==e&&e._nodeWorkers)&&t.worker&&(null===e||void 0===e?void 0:e.worker)}(t,n))return await RO(t,e,n,r,aL);if(t.parseText&&"string"===typeof e)return await t.parseText(e,n,r,t);if(t.parse)return await t.parse(e,n,r,t);throw vO(!t.parseSync),new Error("".concat(t.id," loader - no parser found and worker is disabled"))}(a,t,n,r)):null}async function sL(t,e,n,r){Array.isArray(e)||qI(e)||(n=e,e=void 0);const i=yO(n);let o=t;return"string"===typeof t&&(o=await i(t)),UI(t)&&(o=await i(t)),await aL(o,e,n)}const lL=2**24-1,cL=Object.freeze([]),uL=PM((t=>{let{oldViewport:e,viewport:n}=t;return e.equals(n)}));let hL=new Uint8ClampedArray(0);const dL={data:{type:"data",value:cL,async:!0},dataComparator:{type:"function",value:null,optional:!0},_dataDiff:{type:"function",value:t=>t&&t.__diff,optional:!0},dataTransform:{type:"function",value:null,optional:!0},onDataLoad:{type:"function",value:null,optional:!0},onError:{type:"function",value:null,optional:!0},fetch:{type:"function",value:(t,e)=>{let{propName:n,layer:r,loaders:i,loadOptions:o,signal:a}=e;const{resourceManager:s}=r.context;var l;(o=o||r.getLoadOptions(),i=i||r.props.loaders,a)&&(o={...o,fetch:{...null===(l=o)||void 0===l?void 0:l.fetch,signal:a}});let c=s.contains(t);return c||o||(s.add({resourceId:t,data:sL(t,i),persistent:!1}),c=!0),c?s.subscribe({resourceId:t,onChange:t=>{var e;return null===(e=r.internalState)||void 0===e?void 0:e.reloadAsyncProp(n,t)},consumerId:r.id,requestId:n}):sL(t,i,o)}},updateTriggers:{},visible:!0,pickable:!1,opacity:{type:"number",min:0,max:1,value:1},operation:"draw",onHover:{type:"function",value:null,optional:!0},onClick:{type:"function",value:null,optional:!0},onDragStart:{type:"function",value:null,optional:!0},onDrag:{type:"function",value:null,optional:!0},onDragEnd:{type:"function",value:null,optional:!0},coordinateSystem:qw.DEFAULT,coordinateOrigin:{type:"array",value:[0,0,0],compare:!0},modelMatrix:{type:"array",value:null,compare:!0,optional:!0},wrapLongitude:!1,positionFormat:"XYZ",colorFormat:"RGBA",parameters:{type:"object",value:{},optional:!0,compare:2},loadOptions:{type:"object",value:null,optional:!0,ignore:!0},transitions:null,extensions:[],loaders:{type:"array",value:[],optional:!0,ignore:!0},getPolygonOffset:{type:"function",value:t=>{let{layerIndex:e}=t;return[0,100*-e]}},highlightedObjectIndex:null,autoHighlight:!1,highlightColor:{type:"accessor",value:[0,0,128,128]}};class fL extends kI{constructor(){super(...arguments),ww(this,"internalState",null),ww(this,"lifecycle",jP),ww(this,"context",void 0),ww(this,"state",void 0),ww(this,"parent",null)}static get componentName(){return Object.prototype.hasOwnProperty.call(this,"layerName")?this.layerName:""}get root(){let t=this;for(;t.parent;)t=t.parent;return t}toString(){const t=this.constructor.layerName||this.constructor.name;return"".concat(t,"({id: '").concat(this.props.id,"'})")}project(t){lM(this.internalState);const e=this.internalState.viewport||this.context.viewport,n=pI(t,{viewport:e,modelMatrix:this.props.modelMatrix,coordinateOrigin:this.props.coordinateOrigin,coordinateSystem:this.props.coordinateSystem}),[r,i,o]=eI(n,e.pixelProjectionMatrix);return 2===t.length?[r,i]:[r,i,o]}unproject(t){lM(this.internalState);return(this.internalState.viewport||this.context.viewport).unproject(t)}projectPosition(t,e){lM(this.internalState);return mI(t,{viewport:this.internalState.viewport||this.context.viewport,modelMatrix:this.props.modelMatrix,coordinateOrigin:this.props.coordinateOrigin,coordinateSystem:this.props.coordinateSystem,...e})}get isComposite(){return!1}setState(t){this.setChangeFlags({stateChanged:!0}),Object.assign(this.state,t),this.setNeedsRedraw()}setNeedsRedraw(){this.internalState&&(this.internalState.needsRedraw=!0)}setNeedsUpdate(){this.internalState&&(this.context.layerManager.setNeedsUpdate(String(this)),this.internalState.needsUpdate=!0)}get isLoaded(){return!!this.internalState&&!this.internalState.isAsyncPropLoading()}get wrapLongitude(){return this.props.wrapLongitude}isPickable(){return this.props.pickable&&this.props.visible}getModels(){return this.state&&(this.state.models||this.state.model&&[this.state.model])||[]}setModuleParameters(t){for(const e of this.getModels())e.updateModuleSettings(t)}getAttributeManager(){return this.internalState&&this.internalState.attributeManager}getCurrentLayer(){return this.internalState&&this.internalState.layer}getLoadOptions(){return this.props.loadOptions}use64bitPositions(){const{coordinateSystem:t}=this.props;return t===qw.DEFAULT||t===qw.LNGLAT||t===qw.CARTESIAN}onHover(t,e){return this.props.onHover&&this.props.onHover(t,e)||!1}onClick(t,e){return this.props.onClick&&this.props.onClick(t,e)||!1}nullPickingColor(){return[0,0,0]}encodePickingColor(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return e[0]=t+1&255,e[1]=t+1>>8&255,e[2]=t+1>>8>>8&255,e}decodePickingColor(t){lM(t instanceof Uint8Array);const[e,n,r]=t;return e+256*n+65536*r-1}getNumInstances(){return Number.isFinite(this.props.numInstances)?this.props.numInstances:this.state&&void 0!==this.state.numInstances?this.state.numInstances:JP(this.props.data)}getStartIndices(){return this.props.startIndices?this.props.startIndices:this.state&&this.state.startIndices?this.state.startIndices:null}getBounds(){var t;return null===(t=this.getAttributeManager())||void 0===t?void 0:t.getBounds(["positions","instancePositions"])}getShaders(t){for(const e of this.props.extensions)t=QP(t,e.getShaders.call(this,e));return t}shouldUpdateState(t){return t.changeFlags.propsOrDataChanged}updateState(t){const e=this.getAttributeManager(),{dataChanged:n}=t.changeFlags;if(n&&e)if(Array.isArray(n))for(const r of n)e.invalidateAll(r);else e.invalidateAll();if(e){const{props:n}=t,r=this.internalState.hasPickingBuffer,i=Number.isInteger(n.highlightedObjectIndex)||n.pickable||n.extensions.some((t=>t.getNeedsPickingBuffer.call(this,t)));if(r!==i){this.internalState.hasPickingBuffer=i;const{pickingColors:t,instancePickingColors:n}=e.attributes,r=t||n;r&&(i&&r.constant&&(r.constant=!1,e.invalidate(r.id)),r.value||i||(r.constant=!0,r.value=[0,0,0]))}}}finalizeState(t){for(const n of this.getModels())n.delete();const e=this.getAttributeManager();e&&e.finalize(),this.context&&this.context.resourceManager.unsubscribe({consumerId:this.id}),this.internalState&&(this.internalState.uniformTransitions.clear(),this.internalState.finalize())}draw(t){for(const e of this.getModels())e.draw(t)}getPickingInfo(t){let{info:e,mode:n,sourceLayer:r}=t;const{index:i}=e;return i>=0&&Array.isArray(this.props.data)&&(e.object=this.props.data[i]),e}raiseError(t,e){var n,r,i,o;(e&&(t=new Error("".concat(e,": ").concat(t.message),{cause:t})),null!==(n=(r=this.props).onError)&&void 0!==n&&n.call(r,t))||(null===(i=this.context)||void 0===i||null===(o=i.onError)||void 0===o||o.call(i,t,this))}getNeedsRedraw(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{clearRedrawFlags:!1};return this._getNeedsRedraw(t)}needsUpdate(){return!!this.internalState&&(this.internalState.needsUpdate||this.hasUniformTransition()||this.shouldUpdateState(this._getUpdateParams()))}hasUniformTransition(){var t;return(null===(t=this.internalState)||void 0===t?void 0:t.uniformTransitions.active)||!1}activateViewport(t){if(!this.internalState)return;const e=this.internalState.viewport;this.internalState.viewport=t,e&&uL({oldViewport:e,viewport:t})||(this.setChangeFlags({viewportChanged:!0}),this.isComposite?this.needsUpdate()&&this.setNeedsUpdate():this._update())}invalidateAttribute(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"all";const e=this.getAttributeManager();e&&("all"===t?e.invalidateAll():e.invalidate(t))}updateAttributes(t){for(const e of this.getModels())this._setModelAttributes(e,t)}_updateAttributes(){const t=this.getAttributeManager();if(!t)return;const e=this.props,n=this.getNumInstances(),r=this.getStartIndices();t.update({data:e.data,numInstances:n,startIndices:r,props:e,transitions:e.transitions,buffers:e.data.attributes,context:this});const i=t.getChangedAttributes({clearChangedFlags:!0});this.updateAttributes(i)}_updateAttributeTransition(){const t=this.getAttributeManager();t&&t.updateTransition()}_updateUniformTransition(){const{uniformTransitions:t}=this.internalState;if(t.active){const e=t.update(),n=Object.create(this.props);for(const t in e)Object.defineProperty(n,t,{value:e[t]});return n}return this.props}calculateInstancePickingColors(t,e){let{numInstances:n}=e;if(t.constant)return;const r=Math.floor(hL.length/3);if(this.internalState.usesPickingColorCache=!0,r<n){n>lL&&Gw.warn("Layer has too many data objects. Picking might not be able to distinguish all objects.")(),hL=ET.allocate(hL,n,{size:3,copy:!0,maxCount:Math.max(n,lL)});const t=Math.floor(hL.length/3),e=[];for(let n=r;n<t;n++)this.encodePickingColor(n,e),hL[3*n+0]=e[0],hL[3*n+1]=e[1],hL[3*n+2]=e[2]}t.value=hL.subarray(0,3*n)}_setModelAttributes(t,e){const n=this.getAttributeManager(),r=t.userData.excludeAttributes||{},i=n.getShaderAttributes(e,r);t.setAttributes(i)}disablePickingIndex(t){const e=this.props.data;if(!("attributes"in e))return void this._disablePickingIndex(t);const{pickingColors:n,instancePickingColors:r}=this.getAttributeManager().attributes,i=n||r,o=i&&e.attributes&&e.attributes[i.id];if(o&&o.value){const n=o.value,r=this.encodePickingColor(t);for(let t=0;t<e.length;t++){const e=i.getVertexOffset(t);n[e]===r[0]&&n[e+1]===r[1]&&n[e+2]===r[2]&&this._disablePickingIndex(t)}}else this._disablePickingIndex(t)}_disablePickingIndex(t){const{pickingColors:e,instancePickingColors:n}=this.getAttributeManager().attributes,r=e||n;if(!r)return;const i=r.getVertexOffset(t),o=r.getVertexOffset(t+1);r.buffer.subData({data:new Uint8Array(o-i),offset:i})}restorePickingColors(){const{pickingColors:t,instancePickingColors:e}=this.getAttributeManager().attributes,n=t||e;n&&(this.internalState.usesPickingColorCache&&n.value.buffer!==hL.buffer&&(n.value=hL.subarray(0,n.value.length)),n.updateSubBuffer({startOffset:0}))}_initialize(){lM(!this.internalState),lM(Number.isFinite(this.props.coordinateSystem)),OM("layer.initialize",this);const t=this._getAttributeManager();t&&t.addInstanced({instancePickingColors:{type:5121,size:3,noAlloc:!0,update:this.calculateInstancePickingColors}}),this.internalState=new LI({attributeManager:t,layer:this}),this._clearChangeFlags(),this.state={},Object.defineProperty(this.state,"attributeManager",{get:()=>(Gw.deprecated("layer.state.attributeManager","layer.getAttributeManager()")(),t)}),this.internalState.uniformTransitions=new LP(this.context.timeline),this.internalState.onAsyncPropUpdated=this._onAsyncPropUpdated.bind(this),this.internalState.setAsyncProps(this.props),this.initializeState(this.context);for(const e of this.props.extensions)e.initializeState.call(this,this.context,e);this.setChangeFlags({dataChanged:"init",propsChanged:"init",viewportChanged:!0,extensionsChanged:!0}),this._update()}_transferState(t){OM("layer.matched",this,this===t);const{state:e,internalState:n}=t;this!==t&&(this.internalState=n,this.state=e,this.internalState.setAsyncProps(this.props),this._diffProps(this.props,this.internalState.getOldProps()))}_update(){const t=this.needsUpdate();if(OM("layer.update",this,t),!t)return;const e=this.props,n=this.context,r=this.internalState,i=n.viewport,o=this._updateUniformTransition();r.propsInTransition=o,n.viewport=r.viewport||i,this.props=o;try{const t=this._getUpdateParams(),e=this.getModels();if(n.gl)this.updateState(t);else try{this.updateState(t)}catch(a){}for(const n of this.props.extensions)n.updateState.call(this,t,n);const r=this.getModels()[0]!==e[0];this._postUpdate(t,r)}finally{n.viewport=i,this.props=e,this._clearChangeFlags(),r.needsUpdate=!1,r.resetOldProps()}}_finalize(){OM("layer.finalize",this),this.finalizeState(this.context);for(const t of this.props.extensions)t.finalizeState.call(this,this.context,t)}_drawLayer(t){let{moduleParameters:e=null,uniforms:n={},parameters:r={}}=t;this._updateAttributeTransition();const i=this.props,o=this.context;this.props=this.internalState.propsInTransition||i;const a=this.props.opacity;n.opacity=Math.pow(a,1/2.2);try{e&&this.setModuleParameters(e);const{getPolygonOffset:t}=this.props,i=t&&t(n)||[0,0];VS(o.gl,{polygonOffset:i}),GS(o.gl,r,(()=>{const t={moduleParameters:e,uniforms:n,parameters:r,context:o};for(const e of this.props.extensions)e.draw.call(this,t,e);this.draw(t)}))}finally{this.props=i}}getChangeFlags(){var t;return null===(t=this.internalState)||void 0===t?void 0:t.changeFlags}setChangeFlags(t){if(!this.internalState)return;const{changeFlags:e}=this.internalState;for(const r in t)if(t[r]){let n=!1;if("dataChanged"===r){const i=t[r],o=e[r];i&&Array.isArray(o)&&(e.dataChanged=Array.isArray(i)?o.concat(i):i,n=!0)}e[r]||(e[r]=t[r],n=!0),n&&OM("layer.changeFlag",this,r,t)}const n=Boolean(e.dataChanged||e.updateTriggersChanged||e.propsChanged||e.extensionsChanged);e.propsOrDataChanged=n,e.somethingChanged=n||e.viewportChanged||e.stateChanged}_clearChangeFlags(){this.internalState.changeFlags={dataChanged:!1,propsChanged:!1,updateTriggersChanged:!1,viewportChanged:!1,stateChanged:!1,extensionsChanged:!1,propsOrDataChanged:!1,somethingChanged:!1}}_diffProps(t,e){const n=HP(t,e);if(n.updateTriggersChanged)for(const i in n.updateTriggersChanged)n.updateTriggersChanged[i]&&this.invalidateAttribute(i);if(n.transitionsChanged)for(const i in n.transitionsChanged){var r;this.internalState.uniformTransitions.add(i,e[i],t[i],null===(r=t.transitions)||void 0===r?void 0:r[i])}return this.setChangeFlags(n)}validateProps(){!function(t){const e=t[UP];for(const n in e){const r=e[n],{validate:i}=r;if(i&&!i(t[n],r))throw new Error("Invalid prop ".concat(n,": ").concat(t[n]))}}(this.props)}updateAutoHighlight(t){this.props.autoHighlight&&!Number.isInteger(this.props.highlightedObjectIndex)&&this._updateAutoHighlight(t)}_updateAutoHighlight(t){const e={pickingSelectedColor:t.picked?t.color:null},{highlightColor:n}=this.props;t.picked&&"function"===typeof n&&(e.pickingHighlightColor=n(t)),this.setModuleParameters(e),this.setNeedsRedraw()}_getAttributeManager(){const t=this.context;return new CP(t.gl,{id:this.props.id,stats:t.stats,timeline:t.timeline})}_postUpdate(t,e){const{props:n,oldProps:r}=t;this.setNeedsRedraw(),this._updateAttributes();const{model:i}=this.state;null===i||void 0===i||i.setInstanceCount(this.getNumInstances());const{autoHighlight:o,highlightedObjectIndex:a,highlightColor:s}=n;if(e||r.autoHighlight!==o||r.highlightedObjectIndex!==a||r.highlightColor!==s){const t={};o||(t.pickingSelectedColor=null),Array.isArray(s)&&(t.pickingHighlightColor=s),(e||a!==r.highlightedObjectIndex)&&(t.pickingSelectedColor=Number.isFinite(a)&&a>=0?this.encodePickingColor(a):null),this.setModuleParameters(t)}}_getUpdateParams(){return{props:this.props,oldProps:this.internalState.getOldProps(),context:this.context,changeFlags:this.internalState.changeFlags}}_getNeedsRedraw(t){if(!this.internalState)return!1;let e=!1;e=e||this.internalState.needsRedraw&&this.id;const n=this.getAttributeManager(),r=!!n&&n.getNeedsRedraw(t);if(e=e||r,e)for(const i of this.props.extensions)i.onNeedsRedraw.call(this,i);return this.internalState.needsRedraw=this.internalState.needsRedraw&&!t.clearRedrawFlags,e}_onAsyncPropUpdated(){this._diffProps(this.props,this.internalState.getOldProps()),this.setNeedsUpdate()}}ww(fL,"defaultProps",dL),ww(fL,"layerName","Layer");class pL extends fL{get isComposite(){return!0}get isLoaded(){return super.isLoaded&&this.getSubLayers().every((t=>t.isLoaded))}getSubLayers(){return this.internalState&&this.internalState.subLayers||[]}initializeState(t){}setState(t){super.setState(t),this.setNeedsUpdate()}getPickingInfo(t){let{info:e}=t;const{object:n}=e;return n&&n.__source&&n.__source.parent&&n.__source.parent.id===this.id?(e.object=n.__source.object,e.index=n.__source.index,e):e}filterSubLayer(t){return!0}shouldRenderSubLayer(t,e){return e&&e.length}getSubLayerClass(t,e){const{_subLayerProps:n}=this.props;return n&&n[t]&&n[t].type||e}getSubLayerRow(t,e,n){return t.__source={parent:this,object:e,index:n},t}getSubLayerAccessor(t){if("function"===typeof t){const e={index:-1,data:this.props.data,target:[]};return(n,r)=>n&&n.__source?(e.index=n.__source.index,t(n.__source.object,e)):t(n,r)}return t}getSubLayerProps(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};var e;const{opacity:n,pickable:r,visible:i,parameters:o,getPolygonOffset:a,highlightedObjectIndex:s,autoHighlight:l,highlightColor:c,coordinateSystem:u,coordinateOrigin:h,wrapLongitude:d,positionFormat:f,modelMatrix:p,extensions:m,fetch:g,operation:y,_subLayerProps:v}=this.props,_={id:"",updateTriggers:{},opacity:n,pickable:r,visible:i,parameters:o,getPolygonOffset:a,highlightedObjectIndex:s,autoHighlight:l,highlightColor:c,coordinateSystem:u,coordinateOrigin:h,wrapLongitude:d,positionFormat:f,modelMatrix:p,extensions:m,fetch:g,operation:y},b=v&&t.id&&v[t.id],x=b&&b.updateTriggers,w=t.id||"sublayer";if(b){const e=this.props[UP],n=t.type?t.type._propTypes:{};for(const t in b){const r=n[t]||e[t];r&&"accessor"===r.type&&(b[t]=this.getSubLayerAccessor(b[t]))}}Object.assign(_,t,b),_.id="".concat(this.props.id,"-").concat(w),_.updateTriggers={all:null===(e=this.props.updateTriggers)||void 0===e?void 0:e.all,...t.updateTriggers,...x};for(const S of m){const t=S.getSubLayerProps.call(this,S);t&&Object.assign(_,t,{updateTriggers:Object.assign(_.updateTriggers,t.updateTriggers)})}return _}_updateAutoHighlight(t){for(const e of this.getSubLayers())e.updateAutoHighlight(t)}_getAttributeManager(){return null}_postUpdate(t,e){let n=this.internalState.subLayers;const r=!n||this.needsUpdate();if(r){n=pM(this.renderLayers(),Boolean),this.internalState.subLayers=n}OM("compositeLayer.renderLayers",this,r,n);for(const i of n)i.parent=this}}function mL(t){let{data:e,getIndex:n,dataRange:r,replace:i}=t;const{startRow:o=0,endRow:a=1/0}=r,s=e.length;let l=s,c=s;for(let d=0;d<s;d++){const t=n(e[d]);if(l>d&&t>=o&&(l=d),t>=a){c=d;break}}let u=l;const h=c-l!==i.length?e.slice(c):void 0;for(let d=0;d<i.length;d++)e[u++]=i[d];if(h){for(let t=0;t<h.length;t++)e[u++]=h[t];e.length=u}return{startRow:l,endRow:l+i.length}}ww(pL,"layerName","CompositeLayer");const gL={name:"fp32",vs:"#ifdef LUMA_FP32_TAN_PRECISION_WORKAROUND\nconst float TWO_PI = 6.2831854820251465;\nconst float PI_2 = 1.5707963705062866;\nconst float PI_16 = 0.1963495463132858;\n\nconst float SIN_TABLE_0 = 0.19509032368659973;\nconst float SIN_TABLE_1 = 0.3826834261417389;\nconst float SIN_TABLE_2 = 0.5555702447891235;\nconst float SIN_TABLE_3 = 0.7071067690849304;\n\nconst float COS_TABLE_0 = 0.9807852506637573;\nconst float COS_TABLE_1 = 0.9238795042037964;\nconst float COS_TABLE_2 = 0.8314695954322815;\nconst float COS_TABLE_3 = 0.7071067690849304;\n\nconst float INVERSE_FACTORIAL_3 = 1.666666716337204e-01;\nconst float INVERSE_FACTORIAL_5 = 8.333333767950535e-03;\nconst float INVERSE_FACTORIAL_7 = 1.9841270113829523e-04;\nconst float INVERSE_FACTORIAL_9 = 2.75573188446287533e-06;\n\nfloat sin_taylor_fp32(float a) {\n  float r, s, t, x;\n\n  if (a == 0.0) {\n    return 0.0;\n  }\n\n  x = -a * a;\n  s = a;\n  r = a;\n\n  r = r * x;\n  t = r * INVERSE_FACTORIAL_3;\n  s = s + t;\n\n  r = r * x;\n  t = r * INVERSE_FACTORIAL_5;\n  s = s + t;\n\n  r = r * x;\n  t = r * INVERSE_FACTORIAL_7;\n  s = s + t;\n\n  r = r * x;\n  t = r * INVERSE_FACTORIAL_9;\n  s = s + t;\n\n  return s;\n}\n\nvoid sincos_taylor_fp32(float a, out float sin_t, out float cos_t) {\n  if (a == 0.0) {\n    sin_t = 0.0;\n    cos_t = 1.0;\n  }\n  sin_t = sin_taylor_fp32(a);\n  cos_t = sqrt(1.0 - sin_t * sin_t);\n}\n\nfloat tan_taylor_fp32(float a) {\n    float sin_a;\n    float cos_a;\n\n    if (a == 0.0) {\n        return 0.0;\n    }\n    float z = floor(a / TWO_PI);\n    float r = a - TWO_PI * z;\n\n    float t;\n    float q = floor(r / PI_2 + 0.5);\n    int j = int(q);\n\n    if (j < -2 || j > 2) {\n        return 1.0 / 0.0;\n    }\n\n    t = r - PI_2 * q;\n\n    q = floor(t / PI_16 + 0.5);\n    int k = int(q);\n    int abs_k = int(abs(float(k)));\n\n    if (abs_k > 4) {\n        return 1.0 / 0.0;\n    } else {\n        t = t - PI_16 * q;\n    }\n\n    float u = 0.0;\n    float v = 0.0;\n\n    float sin_t, cos_t;\n    float s, c;\n    sincos_taylor_fp32(t, sin_t, cos_t);\n\n    if (k == 0) {\n        s = sin_t;\n        c = cos_t;\n    } else {\n        if (abs(float(abs_k) - 1.0) < 0.5) {\n            u = COS_TABLE_0;\n            v = SIN_TABLE_0;\n        } else if (abs(float(abs_k) - 2.0) < 0.5) {\n            u = COS_TABLE_1;\n            v = SIN_TABLE_1;\n        } else if (abs(float(abs_k) - 3.0) < 0.5) {\n            u = COS_TABLE_2;\n            v = SIN_TABLE_2;\n        } else if (abs(float(abs_k) - 4.0) < 0.5) {\n            u = COS_TABLE_3;\n            v = SIN_TABLE_3;\n        }\n        if (k > 0) {\n            s = u * sin_t + v * cos_t;\n            c = u * cos_t - v * sin_t;\n        } else {\n            s = u * sin_t - v * cos_t;\n            c = u * cos_t + v * sin_t;\n        }\n    }\n\n    if (j == 0) {\n        sin_a = s;\n        cos_a = c;\n    } else if (j == 1) {\n        sin_a = c;\n        cos_a = -s;\n    } else if (j == -1) {\n        sin_a = -c;\n        cos_a = s;\n    } else {\n        sin_a = -s;\n        cos_a = -c;\n    }\n    return sin_a / cos_a;\n}\n#endif\n\nfloat tan_fp32(float a) {\n#ifdef LUMA_FP32_TAN_PRECISION_WORKAROUND\n  return tan_taylor_fp32(a);\n#else\n  return tan(a);\n#endif\n}\n",fs:null},yL="#define SMOOTH_EDGE_RADIUS 0.5",vL={name:"geometry",vs:"\n".concat(yL,"\n\nstruct VertexGeometry {\n  vec4 position;\n  vec3 worldPosition;\n  vec3 worldPositionAlt;\n  vec3 normal;\n  vec2 uv;\n  vec3 pickingColor;\n} geometry = VertexGeometry(\n  vec4(0.0, 0.0, 1.0, 0.0),\n  vec3(0.0),\n  vec3(0.0),\n  vec3(0.0),\n  vec2(0.0),\n  vec3(0.0)\n);\n"),fs:"\n".concat(yL,"\n\nstruct FragmentGeometry {\n  vec2 uv;\n} geometry;\n\nfloat smoothedge(float edge, float x) {\n  return smoothstep(edge - SMOOTH_EDGE_RADIUS, edge + SMOOTH_EDGE_RADIUS, x);\n}\n")},_L=Object.keys(qw).map((t=>"const int COORDINATE_SYSTEM_".concat(t," = ").concat(qw[t],";"))).join(""),bL=Object.keys(Hw).map((t=>"const int PROJECTION_MODE_".concat(t," = ").concat(Hw[t],";"))).join(""),xL=Object.keys(Zw).map((t=>"const int UNIT_".concat(t.toUpperCase()," = ").concat(Zw[t],";"))).join(""),wL="".concat(_L,"\n").concat(bL,"\n").concat(xL,"\n\nuniform int project_uCoordinateSystem;\nuniform int project_uProjectionMode;\nuniform float project_uScale;\nuniform bool project_uWrapLongitude;\nuniform vec3 project_uCommonUnitsPerMeter;\nuniform vec3 project_uCommonUnitsPerWorldUnit;\nuniform vec3 project_uCommonUnitsPerWorldUnit2;\nuniform vec4 project_uCenter;\nuniform mat4 project_uModelMatrix;\nuniform mat4 project_uViewProjectionMatrix;\nuniform vec2 project_uViewportSize;\nuniform float project_uDevicePixelRatio;\nuniform float project_uFocalDistance;\nuniform vec3 project_uCameraPosition;\nuniform vec3 project_uCoordinateOrigin;\nuniform vec3 project_uCommonOrigin;\nuniform bool project_uPseudoMeters;\n\nconst float TILE_SIZE = 512.0;\nconst float PI = 3.1415926536;\nconst float WORLD_SCALE = TILE_SIZE / (PI * 2.0);\nconst vec3 ZERO_64_LOW = vec3(0.0);\nconst float EARTH_RADIUS = 6370972.0;\nconst float GLOBE_RADIUS = 256.0;\nfloat project_size_at_latitude(float lat) {\n  float y = clamp(lat, -89.9, 89.9);\n  return 1.0 / cos(radians(y));\n}\n\nfloat project_size() {\n  if (project_uProjectionMode == PROJECTION_MODE_WEB_MERCATOR &&\n    project_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT &&\n    project_uPseudoMeters == false) {\n    \n    if (geometry.position.w == 0.0) {\n      return project_size_at_latitude(geometry.worldPosition.y);\n    }\n  \n    float y = geometry.position.y / TILE_SIZE * 2.0 - 1.0;\n    float y2 = y * y;\n    float y4 = y2 * y2;\n    float y6 = y4 * y2;\n    return 1.0 + 4.9348 * y2 + 4.0587 * y4 + 1.5642 * y6;\n  }\n  return 1.0;\n}\n\nfloat project_size_at_latitude(float meters, float lat) {\n  return meters * project_uCommonUnitsPerMeter.z * project_size_at_latitude(lat);\n}\nfloat project_size(float meters) {\n  return meters * project_uCommonUnitsPerMeter.z * project_size();\n}\n\nvec2 project_size(vec2 meters) {\n  return meters * project_uCommonUnitsPerMeter.xy * project_size();\n}\n\nvec3 project_size(vec3 meters) {\n  return meters * project_uCommonUnitsPerMeter * project_size();\n}\n\nvec4 project_size(vec4 meters) {\n  return vec4(meters.xyz * project_uCommonUnitsPerMeter, meters.w);\n}\nmat3 project_get_orientation_matrix(vec3 up) {\n  vec3 uz = normalize(up);\n  vec3 ux = abs(uz.z) == 1.0 ? vec3(1.0, 0.0, 0.0) : normalize(vec3(uz.y, -uz.x, 0));\n  vec3 uy = cross(uz, ux);\n  return mat3(ux, uy, uz);\n}\n\nbool project_needs_rotation(vec3 commonPosition, out mat3 transform) {\n  if (project_uProjectionMode == PROJECTION_MODE_GLOBE) {\n    transform = project_get_orientation_matrix(commonPosition);\n    return true;\n  }\n  return false;\n}\nvec3 project_normal(vec3 vector) {\n  vec4 normal_modelspace = project_uModelMatrix * vec4(vector, 0.0);\n  vec3 n = normalize(normal_modelspace.xyz * project_uCommonUnitsPerMeter);\n  mat3 rotation;\n  if (project_needs_rotation(geometry.position.xyz, rotation)) {\n    n = rotation * n;\n  }\n  return n;\n}\n\nvec4 project_offset_(vec4 offset) {\n  float dy = offset.y;\n  vec3 commonUnitsPerWorldUnit = project_uCommonUnitsPerWorldUnit + project_uCommonUnitsPerWorldUnit2 * dy;\n  return vec4(offset.xyz * commonUnitsPerWorldUnit, offset.w);\n}\nvec2 project_mercator_(vec2 lnglat) {\n  float x = lnglat.x;\n  if (project_uWrapLongitude) {\n    x = mod(x + 180., 360.0) - 180.;\n  }\n  float y = clamp(lnglat.y, -89.9, 89.9);\n  return vec2(\n    radians(x) + PI,\n    PI + log(tan_fp32(PI * 0.25 + radians(y) * 0.5))\n  ) * WORLD_SCALE;\n}\n\nvec3 project_globe_(vec3 lnglatz) {\n  float lambda = radians(lnglatz.x);\n  float phi = radians(lnglatz.y);\n  float cosPhi = cos(phi);\n  float D = (lnglatz.z / EARTH_RADIUS + 1.0) * GLOBE_RADIUS;\n\n  return vec3(\n    sin(lambda) * cosPhi,\n    -cos(lambda) * cosPhi,\n    sin(phi)\n  ) * D;\n}\nvec4 project_position(vec4 position, vec3 position64Low) {\n  vec4 position_world = project_uModelMatrix * position;\n  if (project_uProjectionMode == PROJECTION_MODE_WEB_MERCATOR) {\n    if (project_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT) {\n      return vec4(\n        project_mercator_(position_world.xy),\n        project_size_at_latitude(position_world.z, position_world.y),\n        position_world.w\n      );\n    }\n    if (project_uCoordinateSystem == COORDINATE_SYSTEM_CARTESIAN) {\n      position_world.xyz += project_uCoordinateOrigin;\n    }\n  }\n  if (project_uProjectionMode == PROJECTION_MODE_GLOBE) {\n    if (project_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT) {\n      return vec4(\n        project_globe_(position_world.xyz),\n        position_world.w\n      );\n    }\n  }\n  if (project_uProjectionMode == PROJECTION_MODE_WEB_MERCATOR_AUTO_OFFSET) {\n    if (project_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT) {\n      if (abs(position_world.y - project_uCoordinateOrigin.y) > 0.25) {\n        return vec4(\n          project_mercator_(position_world.xy) - project_uCommonOrigin.xy,\n          project_size(position_world.z),\n          position_world.w\n        );\n      }\n    }\n  }\n  if (project_uProjectionMode == PROJECTION_MODE_IDENTITY ||\n    (project_uProjectionMode == PROJECTION_MODE_WEB_MERCATOR_AUTO_OFFSET &&\n    (project_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT ||\n     project_uCoordinateSystem == COORDINATE_SYSTEM_CARTESIAN))) {\n    position_world.xyz -= project_uCoordinateOrigin;\n  }\n  return project_offset_(position_world) + project_offset_(project_uModelMatrix * vec4(position64Low, 0.0));\n}\n\nvec4 project_position(vec4 position) {\n  return project_position(position, ZERO_64_LOW);\n}\n\nvec3 project_position(vec3 position, vec3 position64Low) {\n  vec4 projected_position = project_position(vec4(position, 1.0), position64Low);\n  return projected_position.xyz;\n}\n\nvec3 project_position(vec3 position) {\n  vec4 projected_position = project_position(vec4(position, 1.0), ZERO_64_LOW);\n  return projected_position.xyz;\n}\n\nvec2 project_position(vec2 position) {\n  vec4 projected_position = project_position(vec4(position, 0.0, 1.0), ZERO_64_LOW);\n  return projected_position.xy;\n}\n\nvec4 project_common_position_to_clipspace(vec4 position, mat4 viewProjectionMatrix, vec4 center) {\n  return viewProjectionMatrix * position + center;\n}\nvec4 project_common_position_to_clipspace(vec4 position) {\n  return project_common_position_to_clipspace(position, project_uViewProjectionMatrix, project_uCenter);\n}\nvec2 project_pixel_size_to_clipspace(vec2 pixels) {\n  vec2 offset = pixels / project_uViewportSize * project_uDevicePixelRatio * 2.0;\n  return offset * project_uFocalDistance;\n}\n\nfloat project_size_to_pixel(float meters) {\n  return project_size(meters) * project_uScale;\n}\nfloat project_size_to_pixel(float size, int unit) {\n  if (unit == UNIT_METERS) return project_size_to_pixel(size);\n  if (unit == UNIT_COMMON) return size * project_uScale;\n  return size;\n}\nfloat project_pixel_size(float pixels) {\n  return pixels / project_uScale;\n}\nvec2 project_pixel_size(vec2 pixels) {\n  return pixels / project_uScale;\n}\n"),SL={};const EL={name:"project",dependencies:[gL,vL],vs:wL,getUniforms:function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:SL;return"viewport"in t?function(t){let{viewport:e,devicePixelRatio:n=1,modelMatrix:r=null,coordinateSystem:i=qw.DEFAULT,coordinateOrigin:o=yk,autoWrapLongitude:a=!1}=t;i===qw.DEFAULT&&(i=e.isGeospatial?qw.LNGLAT:qw.CARTESIAN);const s=vk({viewport:e,devicePixelRatio:n,coordinateSystem:i,coordinateOrigin:o});return s.project_uWrapLongitude=a,s.project_uModelMatrix=r||mk,s}(t):{}}},TL={name:"project32",dependencies:[EL],vs:"\nvec4 project_position_to_clipspace(\n  vec3 position, vec3 position64Low, vec3 offset, out vec4 commonPosition\n) {\n  vec3 projectedPosition = project_position(position, position64Low);\n  mat3 rotation;\n  if (project_needs_rotation(projectedPosition, rotation)) {\n    // offset is specified as ENU\n    // when in globe projection, rotate offset so that the ground alighs with the surface of the globe\n    offset = rotation * offset;\n  }\n  commonPosition = vec4(projectedPosition + offset, 1.0);\n  return project_common_position_to_clipspace(commonPosition);\n}\n\nvec4 project_position_to_clipspace(\n  vec3 position, vec3 position64Low, vec3 offset\n) {\n  vec4 commonPosition;\n  return project_position_to_clipspace(position, position64Low, offset, commonPosition);\n}\n"},ML={pickingSelectedColor:null,pickingHighlightColor:new Uint8Array([0,255,255,255]),pickingActive:!1,pickingAttribute:!1};const AL={name:"picking",vs:"uniform bool picking_uActive;\nuniform bool picking_uAttribute;\nuniform vec3 picking_uSelectedColor;\nuniform bool picking_uSelectedColorValid;\n\nout vec4 picking_vRGBcolor_Avalid;\n\nconst float COLOR_SCALE = 1. / 255.;\n\nbool picking_isColorValid(vec3 color) {\n  return dot(color, vec3(1.0)) > 0.001;\n}\n\nbool isVertexPicked(vec3 vertexColor) {\n  return\n    picking_uSelectedColorValid &&\n    !picking_isColorValid(abs(vertexColor - picking_uSelectedColor));\n}\n\nvoid picking_setPickingColor(vec3 pickingColor) {\n  if (picking_uActive) {\n    picking_vRGBcolor_Avalid.a = float(picking_isColorValid(pickingColor));\n\n    if (!picking_uAttribute) {\n      picking_vRGBcolor_Avalid.rgb = pickingColor * COLOR_SCALE;\n    }\n  } else {\n    picking_vRGBcolor_Avalid.a = float(isVertexPicked(pickingColor));\n  }\n}\n\nvoid picking_setPickingAttribute(float value) {\n  if (picking_uAttribute) {\n    picking_vRGBcolor_Avalid.r = value;\n  }\n}\nvoid picking_setPickingAttribute(vec2 value) {\n  if (picking_uAttribute) {\n    picking_vRGBcolor_Avalid.rg = value;\n  }\n}\nvoid picking_setPickingAttribute(vec3 value) {\n  if (picking_uAttribute) {\n    picking_vRGBcolor_Avalid.rgb = value;\n  }\n}\n",fs:"uniform bool picking_uActive;\nuniform vec3 picking_uSelectedColor;\nuniform vec4 picking_uHighlightColor;\n\nin vec4 picking_vRGBcolor_Avalid;\nvec4 picking_filterHighlightColor(vec4 color) {\n  if (picking_uActive) {\n    return color;\n  }\n  bool selected = bool(picking_vRGBcolor_Avalid.a);\n\n  if (selected) {\n    float highLightAlpha = picking_uHighlightColor.a;\n    float blendedAlpha = highLightAlpha + color.a * (1.0 - highLightAlpha);\n    float highLightRatio = highLightAlpha / blendedAlpha;\n\n    vec3 blendedRGB = mix(color.rgb, picking_uHighlightColor.rgb, highLightRatio);\n    return vec4(blendedRGB, blendedAlpha);\n  } else {\n    return color;\n  }\n}\nvec4 picking_filterPickingColor(vec4 color) {\n  if (picking_uActive) {\n    if (picking_vRGBcolor_Avalid.a == 0.0) {\n      discard;\n    }\n    return picking_vRGBcolor_Avalid;\n  }\n  return color;\n}\nvec4 picking_filterColor(vec4 color) {\n  vec4 highightColor = picking_filterHighlightColor(color);\n  return picking_filterPickingColor(highightColor);\n}\n\n",getUniforms:function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ML;const e={};if(void 0!==t.pickingSelectedColor)if(t.pickingSelectedColor){const n=t.pickingSelectedColor.slice(0,3);e.picking_uSelectedColorValid=1,e.picking_uSelectedColor=n}else e.picking_uSelectedColorValid=0;if(t.pickingHighlightColor){const n=Array.from(t.pickingHighlightColor,(t=>t/255));Number.isFinite(n[3])||(n[3]=1),e.picking_uHighlightColor=n}return void 0!==t.pickingActive&&(e.picking_uActive=Boolean(t.pickingActive),e.picking_uAttribute=Boolean(t.pickingAttribute)),e}},CL={inject:{"vs:DECKGL_FILTER_GL_POSITION":"\n    // for picking depth values\n    picking_setPickingAttribute(position.z / position.w);\n  ","vs:DECKGL_FILTER_COLOR":"\n  picking_setPickingColor(geometry.pickingColor);\n  ","fs:#decl":"\nuniform bool picking_uAttribute;\n  ","fs:DECKGL_FILTER_COLOR":{order:99,injection:"\n  // use highlight color if this fragment belongs to the selected object.\n  color = picking_filterHighlightColor(color);\n\n  // use picking color if rendering to picking FBO.\n  color = picking_filterPickingColor(color);\n    "}},...AL},PL={POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6};class kL{static get DRAW_MODE(){return PL}constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{id:e=uE("geometry"),drawMode:n=PL.TRIANGLES,attributes:r={},indices:i=null,vertexCount:o=null}=t;this.id=e,this.drawMode=0|n,this.attributes={},this.userData={},this._setAttributes(r,i),this.vertexCount=o||this._calculateVertexCount(this.attributes,this.indices)}get mode(){return this.drawMode}getVertexCount(){return this.vertexCount}getAttributes(){return this.indices?{indices:this.indices,...this.attributes}:this.attributes}_print(t){return"Geometry ".concat(this.id," attribute ").concat(t)}_setAttributes(t,e){e&&(this.indices=ArrayBuffer.isView(e)?{value:e,size:1}:e);for(const n in t){let e=t[n];e=ArrayBuffer.isView(e)?{value:e}:e,aE(ArrayBuffer.isView(e.value),"".concat(this._print(n),": must be typed array or object with value as typed array")),"POSITION"!==n&&"positions"!==n||e.size||(e.size=3),"indices"===n?(aE(!this.indices),this.indices=e):this.attributes[n]=e}return this.indices&&void 0!==this.indices.isIndexed&&(this.indices=Object.assign({},this.indices),delete this.indices.isIndexed),this}_calculateVertexCount(t,e){if(e)return e.value.length;let n=1/0;for(const r in t){const e=t[r],{value:i,size:o,constant:a}=e;!a&&i&&o>=1&&(n=Math.min(n,i.length/o))}return aE(Number.isFinite(n)),n}}const IL=()=>{},OL={10241:9987,10240:9729,10242:33071,10243:33071};function LL(t){return Math.pow(2,Math.ceil(Math.log2(t)))}function jL(t,e,n,r){const i=Math.min(n/e.width,r/e.height),o=Math.floor(e.width*i),a=Math.floor(e.height*i);return 1===i?{data:e,width:o,height:a}:(t.canvas.height=a,t.canvas.width=o,t.clearRect(0,0,o,a),t.drawImage(e,0,0,e.width,e.height,0,0,o,a),{data:t.canvas,width:o,height:a})}function zL(t){return t&&(t.id||t.url)}function RL(t,e,n,r){const i=t.width,o=t.height,a=new zE(t.gl,{width:e,height:n,parameters:r});return function(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const{sourceX:r=0,sourceY:i=0,targetMipmaplevel:o=0,targetInternalFormat:a=6408}=n;let{targetX:s,targetY:l,targetZ:c,width:u,height:h}=n;const{framebuffer:d,deleteFramebuffer:f}=XE(t);aE(d);const{gl:p,handle:m}=d,g="undefined"!==typeof s||"undefined"!==typeof l||"undefined"!==typeof c;s=s||0,l=l||0,c=c||0;const y=p.bindFramebuffer(36160,m);aE(e);let v=null;if(e instanceof LE&&(v=e,u=Number.isFinite(u)?u:v.width,h=Number.isFinite(h)?h:v.height,v.bind(0),e=v.target),g)switch(e){case 3553:case 34067:p.copyTexSubImage2D(e,o,s,l,r,i,u,h);break;case 35866:case 32879:nS(p).copyTexSubImage3D(e,o,s,l,c,r,i,u,h)}else p.copyTexImage2D(e,o,a,r,i,u,h,0);v&&v.unbind(),p.bindFramebuffer(36160,y||null),f&&d.delete()}(t,a,{targetY:0,width:i,height:o}),t.delete(),a}function DL(t,e,n){for(let r=0;r<e.length;r++){const{icon:i,xOffset:o}=e[r];t[zL(i)]={...i,x:o,y:n}}}class BL{constructor(t,e){let{onUpdate:n=IL,onError:r=IL}=e;ww(this,"gl",void 0),ww(this,"onUpdate",void 0),ww(this,"onError",void 0),ww(this,"_loadOptions",null),ww(this,"_texture",null),ww(this,"_externalTexture",null),ww(this,"_mapping",{}),ww(this,"_textureParameters",null),ww(this,"_pendingCount",0),ww(this,"_autoPacking",!1),ww(this,"_xOffset",0),ww(this,"_yOffset",0),ww(this,"_rowHeight",0),ww(this,"_buffer",4),ww(this,"_canvasWidth",1024),ww(this,"_canvasHeight",0),ww(this,"_canvas",null),this.gl=t,this.onUpdate=n,this.onError=r}finalize(){var t;null===(t=this._texture)||void 0===t||t.delete()}getTexture(){return this._texture||this._externalTexture}getIconMapping(t){const e=this._autoPacking?zL(t):t;return this._mapping[e]||{}}setProps(t){let{loadOptions:e,autoPacking:n,iconAtlas:r,iconMapping:i,textureParameters:o}=t;var a;(e&&(this._loadOptions=e),void 0!==n&&(this._autoPacking=n),i&&(this._mapping=i),r)&&(null===(a=this._texture)||void 0===a||a.delete(),this._texture=null,this._externalTexture=r);o&&(this._textureParameters=o)}get isLoaded(){return 0===this._pendingCount}packIcons(t,e){if(!this._autoPacking||"undefined"===typeof document)return;const n=Object.values(function(t,e,n){if(!t||!e)return null;n=n||{};const r={},{iterable:i,objectInfo:o}=hM(t);for(const a of i){o.index++;const t=e(a,o),i=zL(t);if(!t)throw new Error("Icon is missing.");if(!t.url)throw new Error("Icon url is missing.");r[i]||n[i]&&t.url===n[i].url||(r[i]={...t,source:a,sourceIndex:o.index})}return r}(t,e,this._mapping)||{});if(n.length>0){const{mapping:t,xOffset:e,yOffset:r,rowHeight:i,canvasHeight:o}=function(t){let{icons:e,buffer:n,mapping:r={},xOffset:i=0,yOffset:o=0,rowHeight:a=0,canvasWidth:s}=t,l=[];for(let c=0;c<e.length;c++){const t=e[c];if(!r[zL(t)]){const{height:e,width:c}=t;i+c+n>s&&(DL(r,l,o),i=0,o=a+o+n,a=0,l=[]),l.push({icon:t,xOffset:i}),i=i+c+n,a=Math.max(a,e)}}return l.length>0&&DL(r,l,o),{mapping:r,rowHeight:a,xOffset:i,yOffset:o,canvasWidth:s,canvasHeight:LL(a+o+n)}}({icons:n,buffer:this._buffer,canvasWidth:this._canvasWidth,mapping:this._mapping,rowHeight:this._rowHeight,xOffset:this._xOffset,yOffset:this._yOffset});this._rowHeight=i,this._mapping=t,this._xOffset=e,this._yOffset=r,this._canvasHeight=o,this._texture||(this._texture=new zE(this.gl,{width:this._canvasWidth,height:this._canvasHeight,parameters:this._textureParameters||OL})),this._texture.height!==this._canvasHeight&&(this._texture=RL(this._texture,this._canvasWidth,this._canvasHeight,this._textureParameters||OL)),this.onUpdate(),this._canvas=this._canvas||document.createElement("canvas"),this._loadIcons(n)}}_loadIcons(t){const e=this._canvas.getContext("2d",{willReadFrequently:!0});for(const n of t)this._pendingCount++,sL(n.url,this._loadOptions).then((t=>{const r=zL(n),i=this._mapping[r],{x:o,y:a,width:s,height:l}=i,{data:c,width:u,height:h}=jL(e,t,s,l);this._texture.setSubImageData({data:c,x:o+(s-u)/2,y:a+(l-h)/2,width:u,height:h}),i.width=u,i.height=h,this._texture.generateMipmap(),this.onUpdate()})).catch((t=>{this.onError({url:n.url,source:n.source,sourceIndex:n.sourceIndex,loadOptions:this._loadOptions,error:t})})).finally((()=>{this._pendingCount--}))}}const FL=[0,0,0,255],NL={iconAtlas:{type:"image",value:null,async:!0},iconMapping:{type:"object",value:{},async:!0},sizeScale:{type:"number",value:1,min:0},billboard:!0,sizeUnits:"pixels",sizeMinPixels:{type:"number",min:0,value:0},sizeMaxPixels:{type:"number",min:0,value:Number.MAX_SAFE_INTEGER},alphaCutoff:{type:"number",value:.05,min:0,max:1},getPosition:{type:"accessor",value:t=>t.position},getIcon:{type:"accessor",value:t=>t.icon},getColor:{type:"accessor",value:FL},getSize:{type:"accessor",value:1},getAngle:{type:"accessor",value:0},getPixelOffset:{type:"accessor",value:[0,0]},onIconError:{type:"function",value:null,optional:!0},textureParameters:{type:"object",ignore:!0}};class UL extends fL{constructor(){super(...arguments),ww(this,"state",void 0)}getShaders(){return super.getShaders({vs:"#define SHADER_NAME icon-layer-vertex-shader\n\nattribute vec2 positions;\n\nattribute vec3 instancePositions;\nattribute vec3 instancePositions64Low;\nattribute float instanceSizes;\nattribute float instanceAngles;\nattribute vec4 instanceColors;\nattribute vec3 instancePickingColors;\nattribute vec4 instanceIconFrames;\nattribute float instanceColorModes;\nattribute vec2 instanceOffsets;\nattribute vec2 instancePixelOffset;\n\nuniform float sizeScale;\nuniform vec2 iconsTextureDim;\nuniform float sizeMinPixels;\nuniform float sizeMaxPixels;\nuniform bool billboard;\nuniform int sizeUnits;\n\nvarying float vColorMode;\nvarying vec4 vColor;\nvarying vec2 vTextureCoords;\nvarying vec2 uv;\n\nvec2 rotate_by_angle(vec2 vertex, float angle) {\n  float angle_radian = angle * PI / 180.0;\n  float cos_angle = cos(angle_radian);\n  float sin_angle = sin(angle_radian);\n  mat2 rotationMatrix = mat2(cos_angle, -sin_angle, sin_angle, cos_angle);\n  return rotationMatrix * vertex;\n}\n\nvoid main(void) {\n  geometry.worldPosition = instancePositions;\n  geometry.uv = positions;\n  geometry.pickingColor = instancePickingColors;\n  uv = positions;\n\n  vec2 iconSize = instanceIconFrames.zw;\n  float sizePixels = clamp(\n    project_size_to_pixel(instanceSizes * sizeScale, sizeUnits), \n    sizeMinPixels, sizeMaxPixels\n  );\n  float instanceScale = iconSize.y == 0.0 ? 0.0 : sizePixels / iconSize.y;\n  vec2 pixelOffset = positions / 2.0 * iconSize + instanceOffsets;\n  pixelOffset = rotate_by_angle(pixelOffset, instanceAngles) * instanceScale;\n  pixelOffset += instancePixelOffset;\n  pixelOffset.y *= -1.0;\n\n  if (billboard)  {\n    gl_Position = project_position_to_clipspace(instancePositions, instancePositions64Low, vec3(0.0), geometry.position);\n    DECKGL_FILTER_GL_POSITION(gl_Position, geometry);\n    vec3 offset = vec3(pixelOffset, 0.0);\n    DECKGL_FILTER_SIZE(offset, geometry);\n    gl_Position.xy += project_pixel_size_to_clipspace(offset.xy);\n\n  } else {\n    vec3 offset_common = vec3(project_pixel_size(pixelOffset), 0.0);\n    DECKGL_FILTER_SIZE(offset_common, geometry);\n    gl_Position = project_position_to_clipspace(instancePositions, instancePositions64Low, offset_common, geometry.position); \n    DECKGL_FILTER_GL_POSITION(gl_Position, geometry);\n  }\n\n  vTextureCoords = mix(\n    instanceIconFrames.xy,\n    instanceIconFrames.xy + iconSize,\n    (positions.xy + 1.0) / 2.0\n  ) / iconsTextureDim;\n\n  vColor = instanceColors;\n  DECKGL_FILTER_COLOR(vColor, geometry);\n\n  vColorMode = instanceColorModes;\n}\n",fs:"#define SHADER_NAME icon-layer-fragment-shader\n\nprecision highp float;\n\nuniform float opacity;\nuniform sampler2D iconsTexture;\nuniform float alphaCutoff;\n\nvarying float vColorMode;\nvarying vec4 vColor;\nvarying vec2 vTextureCoords;\nvarying vec2 uv;\n\nvoid main(void) {\n  geometry.uv = uv;\n\n  vec4 texColor = texture2D(iconsTexture, vTextureCoords);\n  vec3 color = mix(texColor.rgb, vColor.rgb, vColorMode);\n  float a = texColor.a * opacity * vColor.a;\n\n  if (a < alphaCutoff) {\n    discard;\n  }\n\n  gl_FragColor = vec4(color, a);\n  DECKGL_FILTER_COLOR(gl_FragColor, geometry);\n}\n",modules:[TL,CL]})}initializeState(){this.state={iconManager:new BL(this.context.gl,{onUpdate:this._onUpdate.bind(this),onError:this._onError.bind(this)})};this.getAttributeManager().addInstanced({instancePositions:{size:3,type:5130,fp64:this.use64bitPositions(),transition:!0,accessor:"getPosition"},instanceSizes:{size:1,transition:!0,accessor:"getSize",defaultValue:1},instanceOffsets:{size:2,accessor:"getIcon",transform:this.getInstanceOffset},instanceIconFrames:{size:4,accessor:"getIcon",transform:this.getInstanceIconFrame},instanceColorModes:{size:1,type:5121,accessor:"getIcon",transform:this.getInstanceColorMode},instanceColors:{size:this.props.colorFormat.length,type:5121,normalized:!0,transition:!0,accessor:"getColor",defaultValue:FL},instanceAngles:{size:1,transition:!0,accessor:"getAngle"},instancePixelOffset:{size:2,transition:!0,accessor:"getPixelOffset"}})}updateState(t){super.updateState(t);const{props:e,oldProps:n,changeFlags:r}=t,i=this.getAttributeManager(),{iconAtlas:o,iconMapping:a,data:s,getIcon:l,textureParameters:c}=e,{iconManager:u}=this.state,h=o||this.internalState.isAsyncPropLoading("iconAtlas");if(u.setProps({loadOptions:e.loadOptions,autoPacking:!h,iconAtlas:o,iconMapping:h?a:null,textureParameters:c}),h?n.iconMapping!==e.iconMapping&&i.invalidate("getIcon"):(r.dataChanged||r.updateTriggersChanged&&(r.updateTriggersChanged.all||r.updateTriggersChanged.getIcon))&&u.packIcons(s,l),r.extensionsChanged){var d;const{gl:t}=this.context;null===(d=this.state.model)||void 0===d||d.delete(),this.state.model=this._getModel(t),i.invalidateAll()}}get isLoaded(){return super.isLoaded&&this.state.iconManager.isLoaded}finalizeState(t){super.finalizeState(t),this.state.iconManager.finalize()}draw(t){let{uniforms:e}=t;const{sizeScale:n,sizeMinPixels:r,sizeMaxPixels:i,sizeUnits:o,billboard:a,alphaCutoff:s}=this.props,{iconManager:l}=this.state,c=l.getTexture();c&&this.state.model.setUniforms(e).setUniforms({iconsTexture:c,iconsTextureDim:[c.width,c.height],sizeUnits:Zw[o],sizeScale:n,sizeMinPixels:r,sizeMaxPixels:i,billboard:a,alphaCutoff:s}).draw()}_getModel(t){return new xP(t,{...this.getShaders(),id:this.props.id,geometry:new kL({drawMode:6,attributes:{positions:{size:2,value:new Float32Array([-1,-1,-1,1,1,1,1,-1])}}}),isInstanced:!0})}_onUpdate(){this.setNeedsRedraw()}_onError(t){var e;const n=null===(e=this.getCurrentLayer())||void 0===e?void 0:e.props.onIconError;n?n(t):Gw.error(t.error.message)()}getInstanceOffset(t){const{width:e,height:n,anchorX:r=e/2,anchorY:i=n/2}=this.state.iconManager.getIconMapping(t);return[e/2-r,n/2-i]}getInstanceColorMode(t){return this.state.iconManager.getIconMapping(t).mask?1:0}getInstanceIconFrame(t){const{x:e,y:n,width:r,height:i}=this.state.iconManager.getIconMapping(t);return[e,n,r,i]}}ww(UL,"defaultProps",NL),ww(UL,"layerName","IconLayer");const VL=[0,0,0,255],WL={radiusUnits:"meters",radiusScale:{type:"number",min:0,value:1},radiusMinPixels:{type:"number",min:0,value:0},radiusMaxPixels:{type:"number",min:0,value:Number.MAX_SAFE_INTEGER},lineWidthUnits:"meters",lineWidthScale:{type:"number",min:0,value:1},lineWidthMinPixels:{type:"number",min:0,value:0},lineWidthMaxPixels:{type:"number",min:0,value:Number.MAX_SAFE_INTEGER},stroked:!1,filled:!0,billboard:!1,antialiasing:!0,getPosition:{type:"accessor",value:t=>t.position},getRadius:{type:"accessor",value:1},getFillColor:{type:"accessor",value:VL},getLineColor:{type:"accessor",value:VL},getLineWidth:{type:"accessor",value:1},strokeWidth:{deprecatedFor:"getLineWidth"},outline:{deprecatedFor:"stroked"},getColor:{deprecatedFor:["getFillColor","getLineColor"]}};class GL extends fL{getShaders(){return super.getShaders({vs:"#define SHADER_NAME scatterplot-layer-vertex-shader\n\nattribute vec3 positions;\n\nattribute vec3 instancePositions;\nattribute vec3 instancePositions64Low;\nattribute float instanceRadius;\nattribute float instanceLineWidths;\nattribute vec4 instanceFillColors;\nattribute vec4 instanceLineColors;\nattribute vec3 instancePickingColors;\n\nuniform float opacity;\nuniform float radiusScale;\nuniform float radiusMinPixels;\nuniform float radiusMaxPixels;\nuniform float lineWidthScale;\nuniform float lineWidthMinPixels;\nuniform float lineWidthMaxPixels;\nuniform float stroked;\nuniform bool filled;\nuniform bool antialiasing;\nuniform bool billboard;\nuniform int radiusUnits;\nuniform int lineWidthUnits;\n\nvarying vec4 vFillColor;\nvarying vec4 vLineColor;\nvarying vec2 unitPosition;\nvarying float innerUnitRadius;\nvarying float outerRadiusPixels;\n\n\nvoid main(void) {\n  geometry.worldPosition = instancePositions;\n  outerRadiusPixels = clamp(\n    project_size_to_pixel(radiusScale * instanceRadius, radiusUnits),\n    radiusMinPixels, radiusMaxPixels\n  );\n  float lineWidthPixels = clamp(\n    project_size_to_pixel(lineWidthScale * instanceLineWidths, lineWidthUnits),\n    lineWidthMinPixels, lineWidthMaxPixels\n  );\n  outerRadiusPixels += stroked * lineWidthPixels / 2.0;\n  float edgePadding = antialiasing ? (outerRadiusPixels + SMOOTH_EDGE_RADIUS) / outerRadiusPixels : 1.0;\n  unitPosition = edgePadding * positions.xy;\n  geometry.uv = unitPosition;\n  geometry.pickingColor = instancePickingColors;\n\n  innerUnitRadius = 1.0 - stroked * lineWidthPixels / outerRadiusPixels;\n  \n  if (billboard) {\n    gl_Position = project_position_to_clipspace(instancePositions, instancePositions64Low, vec3(0.0), geometry.position);\n    DECKGL_FILTER_GL_POSITION(gl_Position, geometry);\n    vec3 offset = edgePadding * positions * outerRadiusPixels;\n    DECKGL_FILTER_SIZE(offset, geometry);\n    gl_Position.xy += project_pixel_size_to_clipspace(offset.xy);\n  } else {\n    vec3 offset = edgePadding * positions * project_pixel_size(outerRadiusPixels);\n    DECKGL_FILTER_SIZE(offset, geometry);\n    gl_Position = project_position_to_clipspace(instancePositions, instancePositions64Low, offset, geometry.position);\n    DECKGL_FILTER_GL_POSITION(gl_Position, geometry);\n  }\n  vFillColor = vec4(instanceFillColors.rgb, instanceFillColors.a * opacity);\n  DECKGL_FILTER_COLOR(vFillColor, geometry);\n  vLineColor = vec4(instanceLineColors.rgb, instanceLineColors.a * opacity);\n  DECKGL_FILTER_COLOR(vLineColor, geometry);\n}\n",fs:"#define SHADER_NAME scatterplot-layer-fragment-shader\n\nprecision highp float;\n\nuniform bool filled;\nuniform float stroked;\nuniform bool antialiasing;\n\nvarying vec4 vFillColor;\nvarying vec4 vLineColor;\nvarying vec2 unitPosition;\nvarying float innerUnitRadius;\nvarying float outerRadiusPixels;\n\nvoid main(void) {\n  geometry.uv = unitPosition;\n\n  float distToCenter = length(unitPosition) * outerRadiusPixels;\n  float inCircle = antialiasing ? \n    smoothedge(distToCenter, outerRadiusPixels) : \n    step(distToCenter, outerRadiusPixels);\n\n  if (inCircle == 0.0) {\n    discard;\n  }\n\n  if (stroked > 0.5) {\n    float isLine = antialiasing ? \n      smoothedge(innerUnitRadius * outerRadiusPixels, distToCenter) :\n      step(innerUnitRadius * outerRadiusPixels, distToCenter);\n\n    if (filled) {\n      gl_FragColor = mix(vFillColor, vLineColor, isLine);\n    } else {\n      if (isLine == 0.0) {\n        discard;\n      }\n      gl_FragColor = vec4(vLineColor.rgb, vLineColor.a * isLine);\n    }\n  } else if (!filled) {\n    discard;\n  } else {\n    gl_FragColor = vFillColor;\n  }\n\n  gl_FragColor.a *= inCircle;\n  DECKGL_FILTER_COLOR(gl_FragColor, geometry);\n}\n",modules:[TL,CL]})}initializeState(){this.getAttributeManager().addInstanced({instancePositions:{size:3,type:5130,fp64:this.use64bitPositions(),transition:!0,accessor:"getPosition"},instanceRadius:{size:1,transition:!0,accessor:"getRadius",defaultValue:1},instanceFillColors:{size:this.props.colorFormat.length,transition:!0,normalized:!0,type:5121,accessor:"getFillColor",defaultValue:[0,0,0,255]},instanceLineColors:{size:this.props.colorFormat.length,transition:!0,normalized:!0,type:5121,accessor:"getLineColor",defaultValue:[0,0,0,255]},instanceLineWidths:{size:1,transition:!0,accessor:"getLineWidth",defaultValue:1}})}updateState(t){if(super.updateState(t),t.changeFlags.extensionsChanged){var e;const{gl:t}=this.context;null===(e=this.state.model)||void 0===e||e.delete(),this.state.model=this._getModel(t),this.getAttributeManager().invalidateAll()}}draw(t){let{uniforms:e}=t;const{radiusUnits:n,radiusScale:r,radiusMinPixels:i,radiusMaxPixels:o,stroked:a,filled:s,billboard:l,antialiasing:c,lineWidthUnits:u,lineWidthScale:h,lineWidthMinPixels:d,lineWidthMaxPixels:f}=this.props;this.state.model.setUniforms(e).setUniforms({stroked:a?1:0,filled:s,billboard:l,antialiasing:c,radiusUnits:Zw[n],radiusScale:r,radiusMinPixels:i,radiusMaxPixels:o,lineWidthUnits:Zw[u],lineWidthScale:h,lineWidthMinPixels:d,lineWidthMaxPixels:f}).draw()}_getModel(t){return new xP(t,{...this.getShaders(),id:this.props.id,geometry:new kL({drawMode:6,vertexCount:4,attributes:{positions:{size:3,value:new Float32Array([-1,-1,0,1,-1,0,1,1,0,-1,1,0])}}}),isInstanced:!0})}}ww(GL,"defaultProps",WL),ww(GL,"layerName","ScatterplotLayer");const qL=.75,HL=[];class ZL extends UL{constructor(){super(...arguments),ww(this,"state",void 0)}getShaders(){return{...super.getShaders(),fs:"#define SHADER_NAME multi-icon-layer-fragment-shader\n\nprecision highp float;\n\nuniform float opacity;\nuniform sampler2D iconsTexture;\nuniform float gamma;\nuniform bool sdf;\nuniform float alphaCutoff;\nuniform float sdfBuffer;\nuniform float outlineBuffer;\nuniform vec4 outlineColor;\n\nvarying vec4 vColor;\nvarying vec2 vTextureCoords;\nvarying vec2 uv;\n\nvoid main(void) {\n  geometry.uv = uv;\n\n  if (!picking_uActive) {\n    float alpha = texture2D(iconsTexture, vTextureCoords).a;\n    vec4 color = vColor;\n    if (sdf) {\n      float distance = alpha;\n      alpha = smoothstep(sdfBuffer - gamma, sdfBuffer + gamma, distance);\n\n      if (outlineBuffer > 0.0) {\n        float inFill = alpha;\n        float inBorder = smoothstep(outlineBuffer - gamma, outlineBuffer + gamma, distance);\n        color = mix(outlineColor, vColor, inFill);\n        alpha = inBorder;\n      }\n    }\n    float a = alpha * color.a;\n    \n    if (a < alphaCutoff) {\n      discard;\n    }\n\n    gl_FragColor = vec4(color.rgb, a * opacity);\n  }\n\n  DECKGL_FILTER_COLOR(gl_FragColor, geometry);\n}\n"}}initializeState(){super.initializeState();this.getAttributeManager().addInstanced({instanceOffsets:{size:2,accessor:"getIconOffsets"},instancePickingColors:{type:5121,size:3,accessor:(t,e)=>{let{index:n,target:r}=e;return this.encodePickingColor(n,r)}}})}updateState(t){super.updateState(t);const{props:e,oldProps:n}=t;let{outlineColor:r}=e;r!==n.outlineColor&&(r=r.map((t=>t/255)),r[3]=Number.isFinite(r[3])?r[3]:1,this.setState({outlineColor:r})),!e.sdf&&e.outlineWidth&&Gw.warn("".concat(this.id,": fontSettings.sdf is required to render outline"))()}draw(t){const{sdf:e,smoothing:n,outlineWidth:r}=this.props,{outlineColor:i}=this.state,o=r?Math.max(n,qL*(1-r)):-1;if(t.uniforms={...t.uniforms,sdfBuffer:qL,outlineBuffer:o,gamma:n,sdf:Boolean(e),outlineColor:i},super.draw(t),e&&r){const{iconManager:t}=this.state;t.getTexture()&&this.state.model.draw({uniforms:{outlineBuffer:qL}})}}getInstanceOffset(t){return t?Array.from(t).flatMap((t=>super.getInstanceOffset(t))):HL}getInstanceColorMode(t){return 1}getInstanceIconFrame(t){return t?Array.from(t).flatMap((t=>super.getInstanceIconFrame(t))):HL}}ww(ZL,"defaultProps",{getIconOffsets:{type:"accessor",value:t=>t.offsets},alphaCutoff:.001,smoothing:.1,outlineWidth:0,outlineColor:{type:"color",value:[0,0,0,255]}}),ww(ZL,"layerName","MultiIconLayer");const XL=1e20;class YL{constructor(){let{fontSize:t=24,buffer:e=3,radius:n=8,cutoff:r=.25,fontFamily:i="sans-serif",fontWeight:o="normal",fontStyle:a="normal"}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.buffer=e,this.cutoff=r,this.radius=n;const s=this.size=t+4*e,l=this._createCanvas(s),c=this.ctx=l.getContext("2d",{willReadFrequently:!0});c.font="".concat(a," ").concat(o," ").concat(t,"px ").concat(i),c.textBaseline="alphabetic",c.textAlign="left",c.fillStyle="black",this.gridOuter=new Float64Array(s*s),this.gridInner=new Float64Array(s*s),this.f=new Float64Array(s),this.z=new Float64Array(s+1),this.v=new Uint16Array(s)}_createCanvas(t){const e=document.createElement("canvas");return e.width=e.height=t,e}draw(t){const{width:e,actualBoundingBoxAscent:n,actualBoundingBoxDescent:r,actualBoundingBoxLeft:i,actualBoundingBoxRight:o}=this.ctx.measureText(t),a=Math.ceil(n),s=Math.max(0,Math.min(this.size-this.buffer,Math.ceil(o-i))),l=Math.min(this.size-this.buffer,a+Math.ceil(r)),c=s+2*this.buffer,u=l+2*this.buffer,h=Math.max(c*u,0),d=new Uint8ClampedArray(h),f={data:d,width:c,height:u,glyphWidth:s,glyphHeight:l,glyphTop:a,glyphLeft:0,glyphAdvance:e};if(0===s||0===l)return f;const{ctx:p,buffer:m,gridInner:g,gridOuter:y}=this;p.clearRect(m,m,s,l),p.fillText(t,m,m+a);const v=p.getImageData(m,m,s,l);y.fill(XL,0,h),g.fill(0,0,h);for(let _=0;_<l;_++)for(let t=0;t<s;t++){const e=v.data[4*(_*s+t)+3]/255;if(0===e)continue;const n=(_+m)*c+t+m;if(1===e)y[n]=0,g[n]=XL;else{const t=.5-e;y[n]=t>0?t*t:0,g[n]=t<0?t*t:0}}KL(y,0,0,c,u,c,this.f,this.v,this.z),KL(g,m,m,s,l,c,this.f,this.v,this.z);for(let _=0;_<h;_++){const t=Math.sqrt(y[_])-Math.sqrt(g[_]);d[_]=Math.round(255-255*(t/this.radius+this.cutoff))}return f}}function KL(t,e,n,r,i,o,a,s,l){for(let c=e;c<e+r;c++)$L(t,n*o+c,o,i,a,s,l);for(let c=n;c<n+i;c++)$L(t,c*o+e,1,r,a,s,l)}function $L(t,e,n,r,i,o,a){o[0]=0,a[0]=-XL,a[1]=XL,i[0]=t[e];for(let s=1,l=0,c=0;s<r;s++){i[s]=t[e+s*n];const r=s*s;do{const t=o[l];c=(i[s]-i[t]+r-t*t)/(s-t)/2}while(c<=a[l]&&--l>-1);l++,o[l]=s,a[l]=c,a[l+1]=XL}for(let s=0,l=0;s<r;s++){for(;a[l+1]<s;)l++;const r=o[l],c=s-r;t[e+s*n]=i[r]+c*c}}const JL=32,QL=[];function tj(t){return Math.pow(2,Math.ceil(Math.log2(t)))}function ej(t,e,n,r){let i=0;for(let a=e;a<n;a++){var o;i+=(null===(o=r[t[a]])||void 0===o?void 0:o.layoutWidth)||0}return i}function nj(t,e,n,r,i,o){let a=e,s=0;for(let l=e;l<n;l++){const e=ej(t,l,l+1,i);s+e>r&&(a<l&&o.push(l),a=l,s=0),s+=e}return s}function rj(t,e,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,o=arguments.length>5?arguments[5]:void 0;void 0===o&&(o=t.length);const a=[];return"break-all"===e?nj(t,i,o,n,r,a):function(t,e,n,r,i,o){let a=e,s=e,l=e,c=0;for(let u=e;u<n;u++)if(" "===t[u]?l=u+1:" "!==t[u+1]&&u+1!==n||(l=u+1),l>s){let e=ej(t,s,l,i);c+e>r&&(a<s&&(o.push(s),a=s,c=0),e>r&&(e=nj(t,s,l,r,i,o),a=o[o.length-1])),s=l,c+=e}}(t,i,o,n,r,a),a}function ij(t,e,n,r,i,o){let a=0,s=0;for(let l=e;l<n;l++){const e=t[l],n=r[e];n?(s||(s=n.layoutHeight),i[l]=a+n.layoutWidth/2,a+=n.layoutWidth):(Gw.warn("Missing character: ".concat(e," (").concat(e.codePointAt(0),")"))(),i[l]=a,a+=JL)}o[0]=a,o[1]=s}class oj{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:5;ww(this,"limit",void 0),ww(this,"_cache",{}),ww(this,"_order",[]),this.limit=t}get(t){const e=this._cache[t];return e&&(this._deleteOrder(t),this._appendOrder(t)),e}set(t,e){this._cache[t]?(this.delete(t),this._cache[t]=e,this._appendOrder(t)):(Object.keys(this._cache).length===this.limit&&this.delete(this._order[0]),this._cache[t]=e,this._appendOrder(t))}delete(t){this._cache[t]&&(delete this._cache[t],this._deleteOrder(t))}_deleteOrder(t){const e=this._order.indexOf(t);e>=0&&this._order.splice(e,1)}_appendOrder(t){this._order.push(t)}}const aj={fontFamily:"Monaco, monospace",fontWeight:"normal",characterSet:function(){const t=[];for(let e=32;e<128;e++)t.push(String.fromCharCode(e));return t}(),fontSize:64,buffer:4,sdf:!1,cutoff:.25,radius:12,smoothing:.1};let sj=new oj(3);function lj(t,e){for(let n=0;n<t.length;n++)e.data[4*n+3]=t[n]}function cj(t,e,n,r){t.font="".concat(r," ").concat(n,"px ").concat(e),t.fillStyle="#000",t.textBaseline="alphabetic",t.textAlign="left"}class uj{constructor(){ww(this,"props",{...aj}),ww(this,"_key",void 0),ww(this,"_atlas",void 0)}get texture(){return this._atlas}get mapping(){return this._atlas&&this._atlas.mapping}get scale(){const{fontSize:t,buffer:e}=this.props;return(1.2*t+2*e)/t}setProps(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object.assign(this.props,t),this._key=this._getKey();const e=function(t,e){let n;n="string"===typeof e?new Set(Array.from(e)):new Set(e);const r=sj.get(t);if(!r)return n;for(const i in r.mapping)n.has(i)&&n.delete(i);return n}(this._key,this.props.characterSet),n=sj.get(this._key);if(n&&0===e.size)return void(this._atlas!==n&&(this._atlas=n));const r=this._generateFontAtlas(e,n);this._atlas=r,sj.set(this._key,r)}_generateFontAtlas(t,e){const{fontFamily:n,fontWeight:r,fontSize:i,buffer:o,sdf:a,radius:s,cutoff:l}=this.props;let c=e&&e.data;c||(c=document.createElement("canvas"),c.width=1024);const u=c.getContext("2d",{willReadFrequently:!0});cj(u,n,i,r);const{mapping:h,canvasHeight:d,xOffset:f,yOffset:p}=function(t){let{characterSet:e,getFontWidth:n,fontHeight:r,buffer:i,maxCanvasWidth:o,mapping:a={},xOffset:s=0,yOffset:l=0}=t,c=0,u=s;const h=r+2*i;for(const d of e)if(!a[d]){const t=n(d);u+t+2*i>o&&(u=0,c++),a[d]={x:u+i,y:l+c*h+i,width:t,height:h,layoutWidth:t,layoutHeight:r},u+=t+2*i}return{mapping:a,xOffset:u,yOffset:l+c*h,canvasHeight:tj(l+(c+1)*h)}}({getFontWidth:t=>u.measureText(t).width,fontHeight:1.2*i,buffer:o,characterSet:t,maxCanvasWidth:1024,...e&&{mapping:e.mapping,xOffset:e.xOffset,yOffset:e.yOffset}});if(c.height!==d){const t=u.getImageData(0,0,c.width,c.height);c.height=d,u.putImageData(t,0,0)}if(cj(u,n,i,r),a){const e=new YL({fontSize:i,buffer:o,radius:s,cutoff:l,fontFamily:n,fontWeight:"".concat(r)});for(const n of t){const{data:t,width:r,height:o,glyphTop:a}=e.draw(n);h[n].width=r,h[n].layoutOffsetY=.9*i-a;const s=u.createImageData(r,o);lj(t,s),u.putImageData(s,h[n].x,h[n].y)}}else for(const m of t)u.fillText(m,h[m].x,h[m].y+o+.9*i);return{xOffset:f,yOffset:p,mapping:h,data:c,width:c.width,height:c.height}}_getKey(){const{fontFamily:t,fontWeight:e,fontSize:n,buffer:r,sdf:i,radius:o,cutoff:a}=this.props;return i?"".concat(t," ").concat(e," ").concat(n," ").concat(r," ").concat(o," ").concat(a):"".concat(t," ").concat(e," ").concat(n," ").concat(r)}}const hj={billboard:!0,sizeScale:1,sizeUnits:"pixels",sizeMinPixels:0,sizeMaxPixels:Number.MAX_SAFE_INTEGER,padding:{type:"array",value:[0,0,0,0]},getPosition:{type:"accessor",value:t=>t.position},getSize:{type:"accessor",value:1},getAngle:{type:"accessor",value:0},getPixelOffset:{type:"accessor",value:[0,0]},getBoundingRect:{type:"accessor",value:[0,0,0,0]},getFillColor:{type:"accessor",value:[0,0,0,255]},getLineColor:{type:"accessor",value:[0,0,0,255]},getLineWidth:{type:"accessor",value:1}};class dj extends fL{constructor(){super(...arguments),ww(this,"state",void 0)}getShaders(){return super.getShaders({vs:"#define SHADER_NAME text-background-layer-vertex-shader\n\nattribute vec2 positions;\n\nattribute vec3 instancePositions;\nattribute vec3 instancePositions64Low;\nattribute vec4 instanceRects;\nattribute float instanceSizes;\nattribute float instanceAngles;\nattribute vec2 instancePixelOffsets;\nattribute float instanceLineWidths;\nattribute vec4 instanceFillColors;\nattribute vec4 instanceLineColors;\nattribute vec3 instancePickingColors;\n\nuniform bool billboard;\nuniform float opacity;\nuniform float sizeScale;\nuniform float sizeMinPixels;\nuniform float sizeMaxPixels;\nuniform vec4 padding;\nuniform int sizeUnits;\n\nvarying vec4 vFillColor;\nvarying vec4 vLineColor;\nvarying float vLineWidth;\nvarying vec2 uv;\nvarying vec2 dimensions;\n\nvec2 rotate_by_angle(vec2 vertex, float angle) {\n  float angle_radian = radians(angle);\n  float cos_angle = cos(angle_radian);\n  float sin_angle = sin(angle_radian);\n  mat2 rotationMatrix = mat2(cos_angle, -sin_angle, sin_angle, cos_angle);\n  return rotationMatrix * vertex;\n}\n\nvoid main(void) {\n  geometry.worldPosition = instancePositions;\n  geometry.uv = positions;\n  geometry.pickingColor = instancePickingColors;\n  uv = positions;\n  vLineWidth = instanceLineWidths;\n  float sizePixels = clamp(\n    project_size_to_pixel(instanceSizes * sizeScale, sizeUnits),\n    sizeMinPixels, sizeMaxPixels\n  );\n\n  dimensions = instanceRects.zw * sizePixels + padding.xy + padding.zw;\n\n  vec2 pixelOffset = (positions * instanceRects.zw + instanceRects.xy) * sizePixels + mix(-padding.xy, padding.zw, positions);\n  pixelOffset = rotate_by_angle(pixelOffset, instanceAngles);\n  pixelOffset += instancePixelOffsets;\n  pixelOffset.y *= -1.0;\n\n  if (billboard)  {\n    gl_Position = project_position_to_clipspace(instancePositions, instancePositions64Low, vec3(0.0), geometry.position);\n    DECKGL_FILTER_GL_POSITION(gl_Position, geometry);\n    vec3 offset = vec3(pixelOffset, 0.0);\n    DECKGL_FILTER_SIZE(offset, geometry);\n    gl_Position.xy += project_pixel_size_to_clipspace(offset.xy);\n  } else {\n    vec3 offset_common = vec3(project_pixel_size(pixelOffset), 0.0);\n    DECKGL_FILTER_SIZE(offset_common, geometry);\n    gl_Position = project_position_to_clipspace(instancePositions, instancePositions64Low, offset_common, geometry.position);\n    DECKGL_FILTER_GL_POSITION(gl_Position, geometry);\n  }\n  vFillColor = vec4(instanceFillColors.rgb, instanceFillColors.a * opacity);\n  DECKGL_FILTER_COLOR(vFillColor, geometry);\n  vLineColor = vec4(instanceLineColors.rgb, instanceLineColors.a * opacity);\n  DECKGL_FILTER_COLOR(vLineColor, geometry);\n}\n",fs:"#define SHADER_NAME text-background-layer-fragment-shader\n\nprecision highp float;\n\nuniform bool stroked;\n\nvarying vec4 vFillColor;\nvarying vec4 vLineColor;\nvarying float vLineWidth;\nvarying vec2 uv;\nvarying vec2 dimensions;\n\nvoid main(void) {\n  geometry.uv = uv;\n\n  vec2 pixelPosition = uv * dimensions;\n  if (stroked) {\n    float distToEdge = min(\n      min(pixelPosition.x, dimensions.x - pixelPosition.x),\n      min(pixelPosition.y, dimensions.y - pixelPosition.y)\n    );\n    float isBorder = smoothedge(distToEdge, vLineWidth);\n    gl_FragColor = mix(vFillColor, vLineColor, isBorder);\n  } else {\n    gl_FragColor = vFillColor;\n  }\n\n  DECKGL_FILTER_COLOR(gl_FragColor, geometry);\n}\n",modules:[TL,CL]})}initializeState(){this.getAttributeManager().addInstanced({instancePositions:{size:3,type:5130,fp64:this.use64bitPositions(),transition:!0,accessor:"getPosition"},instanceSizes:{size:1,transition:!0,accessor:"getSize",defaultValue:1},instanceAngles:{size:1,transition:!0,accessor:"getAngle"},instanceRects:{size:4,accessor:"getBoundingRect"},instancePixelOffsets:{size:2,transition:!0,accessor:"getPixelOffset"},instanceFillColors:{size:4,transition:!0,normalized:!0,type:5121,accessor:"getFillColor",defaultValue:[0,0,0,255]},instanceLineColors:{size:4,transition:!0,normalized:!0,type:5121,accessor:"getLineColor",defaultValue:[0,0,0,255]},instanceLineWidths:{size:1,transition:!0,accessor:"getLineWidth",defaultValue:1}})}updateState(t){super.updateState(t);const{changeFlags:e}=t;if(e.extensionsChanged){var n;const{gl:t}=this.context;null===(n=this.state.model)||void 0===n||n.delete(),this.state.model=this._getModel(t),this.getAttributeManager().invalidateAll()}}draw(t){let{uniforms:e}=t;const{billboard:n,sizeScale:r,sizeUnits:i,sizeMinPixels:o,sizeMaxPixels:a,getLineWidth:s}=this.props;let{padding:l}=this.props;l.length<4&&(l=[l[0],l[1],l[0],l[1]]),this.state.model.setUniforms(e).setUniforms({billboard:n,stroked:Boolean(s),padding:l,sizeUnits:Zw[i],sizeScale:r,sizeMinPixels:o,sizeMaxPixels:a}).draw()}_getModel(t){return new xP(t,{...this.getShaders(),id:this.props.id,geometry:new kL({drawMode:6,vertexCount:4,attributes:{positions:{size:2,value:new Float32Array([0,0,1,0,1,1,0,1])}}}),isInstanced:!0})}}ww(dj,"defaultProps",hj),ww(dj,"layerName","TextBackgroundLayer");const fj={start:1,middle:0,end:-1},pj={top:1,center:0,bottom:-1},mj=[0,0,0,255],gj={billboard:!0,sizeScale:1,sizeUnits:"pixels",sizeMinPixels:0,sizeMaxPixels:Number.MAX_SAFE_INTEGER,background:!1,getBackgroundColor:{type:"accessor",value:[255,255,255,255]},getBorderColor:{type:"accessor",value:mj},getBorderWidth:{type:"accessor",value:0},backgroundPadding:{type:"array",value:[0,0,0,0]},characterSet:{type:"object",value:aj.characterSet},fontFamily:aj.fontFamily,fontWeight:aj.fontWeight,lineHeight:1,outlineWidth:{type:"number",value:0,min:0},outlineColor:{type:"color",value:mj},fontSettings:{type:"object",value:{},compare:1},wordBreak:"break-word",maxWidth:{type:"number",value:-1},getText:{type:"accessor",value:t=>t.text},getPosition:{type:"accessor",value:t=>t.position},getColor:{type:"accessor",value:mj},getSize:{type:"accessor",value:32},getAngle:{type:"accessor",value:0},getTextAnchor:{type:"accessor",value:"middle"},getAlignmentBaseline:{type:"accessor",value:"center"},getPixelOffset:{type:"accessor",value:[0,0]},backgroundColor:{deprecatedFor:["background","getBackgroundColor"]}};class yj extends pL{constructor(){super(...arguments),ww(this,"state",void 0),ww(this,"getBoundingRect",((t,e)=>{let{size:[n,r]}=this.transformParagraph(t,e);const{fontSize:i}=this.state.fontAtlasManager.props;n/=i,r/=i;const{getTextAnchor:o,getAlignmentBaseline:a}=this.props;return[(fj["function"===typeof o?o(t,e):o]-1)*n/2,(pj["function"===typeof a?a(t,e):a]-1)*r/2,n,r]})),ww(this,"getIconOffsets",((t,e)=>{const{getTextAnchor:n,getAlignmentBaseline:r}=this.props,{x:i,y:o,rowWidth:a,size:[s,l]}=this.transformParagraph(t,e),c=fj["function"===typeof n?n(t,e):n],u=pj["function"===typeof r?r(t,e):r],h=i.length,d=new Array(2*h);let f=0;for(let p=0;p<h;p++){const t=(1-c)*(s-a[p])/2;d[f++]=(c-1)*s/2+t+i[p],d[f++]=(u-1)*l/2+o[p]}return d}))}initializeState(){this.state={styleVersion:0,fontAtlasManager:new uj},this.props.maxWidth>0&&Gw.warn("v8.9 breaking change: TextLayer maxWidth is now relative to text size")()}updateState(t){const{props:e,oldProps:n,changeFlags:r}=t;(r.dataChanged||r.updateTriggersChanged&&(r.updateTriggersChanged.all||r.updateTriggersChanged.getText))&&this._updateText();(this._updateFontAtlas()||e.lineHeight!==n.lineHeight||e.wordBreak!==n.wordBreak||e.maxWidth!==n.maxWidth)&&this.setState({styleVersion:this.state.styleVersion+1})}getPickingInfo(t){let{info:e}=t;return e.object=e.index>=0?this.props.data[e.index]:null,e}_updateFontAtlas(){const{fontSettings:t,fontFamily:e,fontWeight:n}=this.props,{fontAtlasManager:r,characterSet:i}=this.state,o={...t,characterSet:i,fontFamily:e,fontWeight:n};if(!r.mapping)return r.setProps(o),!0;for(const a in o)if(o[a]!==r.props[a])return r.setProps(o),!0;return!1}_updateText(){var t;const{data:e,characterSet:n}=this.props,r=null===(t=e.attributes)||void 0===t?void 0:t.getText;let i,{getText:o}=this.props,a=e.startIndices;const s="auto"===n&&new Set;if(r&&a){const{texts:t,characterCount:n}=function(t){let{value:e,length:n,stride:r,offset:i,startIndices:o,characterSet:a}=t;const s=e.BYTES_PER_ELEMENT,l=r?r/s:1,c=i?i/s:0,u=o[n]||Math.ceil((e.length-c)/l),h=a&&new Set,d=new Array(n);let f=e;if(l>1||c>0){f=new(0,e.constructor)(u);for(let t=0;t<u;t++)f[t]=e[t*l+c]}for(let p=0;p<n;p++){const t=o[p],e=o[p+1]||u,n=f.subarray(t,e);d[p]=String.fromCodePoint.apply(null,n),h&&n.forEach(h.add,h)}if(h)for(const p of h)a.add(String.fromCodePoint(p));return{texts:d,characterCount:u}}({...ArrayBuffer.isView(r)?{value:r}:r,length:e.length,startIndices:a,characterSet:s});i=n,o=(e,n)=>{let{index:r}=n;return t[r]}}else{const{iterable:t,objectInfo:n}=hM(e);a=[0],i=0;for(const e of t){n.index++;const t=Array.from(o(e,n)||"");s&&t.forEach(s.add,s),i+=t.length,a.push(i)}}this.setState({getText:o,startIndices:a,numInstances:i,characterSet:s||n})}transformParagraph(t,e){const{fontAtlasManager:n}=this.state,r=n.mapping,i=this.state.getText,{wordBreak:o,lineHeight:a,maxWidth:s}=this.props;return function(t,e,n,r,i){const o=Array.from(t),a=o.length,s=new Array(a),l=new Array(a),c=new Array(a),u=("break-word"===n||"break-all"===n)&&isFinite(r)&&r>0,h=[0,0],d=[0,0];let f=0,p=0,m=0;for(let y=0;y<=a;y++){const t=o[y];if("\n"!==t&&y!==a||(m=y),m>p){const t=u?rj(o,n,r,i,p,m):QL;for(let n=0;n<=t.length;n++){const r=0===n?p:t[n-1],a=n<t.length?t[n]:m;ij(o,r,a,i,s,d);for(let t=r;t<a;t++){var g;const e=(null===(g=i[o[t]])||void 0===g?void 0:g.layoutOffsetY)||0;l[t]=f+d[1]/2+e,c[t]=d[0]}f+=d[1]*e,h[0]=Math.max(h[0],d[0])}p=m}"\n"===t&&(s[p]=0,l[p]=0,c[p]=0,p++)}return h[1]=f,{x:s,y:l,rowWidth:c,size:h}}(i(t,e)||"",a,o,s*n.props.fontSize,r)}renderLayers(){const{startIndices:t,numInstances:e,getText:n,fontAtlasManager:{scale:r,texture:i,mapping:o},styleVersion:a}=this.state,{data:s,_dataDiff:l,getPosition:c,getColor:u,getSize:h,getAngle:d,getPixelOffset:f,getBackgroundColor:p,getBorderColor:m,getBorderWidth:g,backgroundPadding:y,background:v,billboard:_,fontSettings:b,outlineWidth:x,outlineColor:w,sizeScale:S,sizeUnits:E,sizeMinPixels:T,sizeMaxPixels:M,transitions:A,updateTriggers:C}=this.props,P=this.getSubLayerClass("characters",ZL),k=this.getSubLayerClass("background",dj);return[v&&new k({getFillColor:p,getLineColor:m,getLineWidth:g,padding:y,getPosition:c,getSize:h,getAngle:d,getPixelOffset:f,billboard:_,sizeScale:S,sizeUnits:E,sizeMinPixels:T,sizeMaxPixels:M,transitions:A&&{getPosition:A.getPosition,getAngle:A.getAngle,getSize:A.getSize,getFillColor:A.getBackgroundColor,getLineColor:A.getBorderColor,getLineWidth:A.getBorderWidth,getPixelOffset:A.getPixelOffset}},this.getSubLayerProps({id:"background",updateTriggers:{getPosition:C.getPosition,getAngle:C.getAngle,getSize:C.getSize,getFillColor:C.getBackgroundColor,getLineColor:C.getBorderColor,getLineWidth:C.getBorderWidth,getPixelOffset:C.getPixelOffset,getBoundingRect:{getText:C.getText,getTextAnchor:C.getTextAnchor,getAlignmentBaseline:C.getAlignmentBaseline,styleVersion:a}}}),{data:s.attributes&&s.attributes.background?{length:s.length,attributes:s.attributes.background}:s,_dataDiff:l,autoHighlight:!1,getBoundingRect:this.getBoundingRect}),new P({sdf:b.sdf,smoothing:Number.isFinite(b.smoothing)?b.smoothing:aj.smoothing,outlineWidth:x/(b.radius||aj.radius),outlineColor:w,iconAtlas:i,iconMapping:o,getPosition:c,getColor:u,getSize:h,getAngle:d,getPixelOffset:f,billboard:_,sizeScale:S*r,sizeUnits:E,sizeMinPixels:T*r,sizeMaxPixels:M*r,transitions:A&&{getPosition:A.getPosition,getAngle:A.getAngle,getColor:A.getColor,getSize:A.getSize,getPixelOffset:A.getPixelOffset}},this.getSubLayerProps({id:"characters",updateTriggers:{all:C.getText,getPosition:C.getPosition,getAngle:C.getAngle,getColor:C.getColor,getSize:C.getSize,getPixelOffset:C.getPixelOffset,getIconOffsets:{getTextAnchor:C.getTextAnchor,getAlignmentBaseline:C.getAlignmentBaseline,styleVersion:a}}}),{data:s,_dataDiff:l,startIndices:t,numInstances:e,getIconOffsets:this.getIconOffsets,getIcon:n})]}static set fontAtlasCacheLimit(t){!function(t){Gw.assert(Number.isFinite(t)&&t>=3,"Invalid cache limit"),sj=new oj(t)}(t)}}ww(yj,"defaultProps",gj),ww(yj,"layerName","TextLayer");class vj{constructor(t){ww(this,"opts",void 0),ww(this,"typedArrayManager",void 0),ww(this,"indexStarts",[0]),ww(this,"vertexStarts",[0]),ww(this,"vertexCount",0),ww(this,"instanceCount",0),ww(this,"attributes",void 0),ww(this,"_attributeDefs",void 0),ww(this,"data",void 0),ww(this,"getGeometry",void 0),ww(this,"geometryBuffer",void 0),ww(this,"buffers",void 0),ww(this,"positionSize",void 0),ww(this,"normalize",void 0);const{attributes:e={}}=t;this.typedArrayManager=ET,this.attributes={},this._attributeDefs=e,this.opts=t,this.updateGeometry(t)}updateGeometry(t){Object.assign(this.opts,t);const{data:e,buffers:n={},getGeometry:r,geometryBuffer:i,positionFormat:o,dataChanged:a,normalize:s=!0}=this.opts;if(this.data=e,this.getGeometry=r,this.positionSize=i&&i.size||("XY"===o?2:3),this.buffers=n,this.normalize=s,i&&(lM(e.startIndices),this.getGeometry=this.getGeometryFromBuffer(i),s||(n.positions=i)),this.geometryBuffer=n.positions,Array.isArray(a))for(const l of a)this._rebuildGeometry(l);else this._rebuildGeometry()}updatePartialGeometry(t){let{startRow:e,endRow:n}=t;this._rebuildGeometry({startRow:e,endRow:n})}getGeometryFromBuffer(t){const e=t.value||t;return ArrayBuffer.isView(e)?fM(e,{size:this.positionSize,offset:t.offset,stride:t.stride,startIndices:this.data.startIndices}):null}_allocate(t,e){const{attributes:n,buffers:r,_attributeDefs:i,typedArrayManager:o}=this;for(const a in i)if(a in r)o.release(n[a]),n[a]=null;else{const r=i[a];r.copy=e,n[a]=o.allocate(n[a],t,r)}}_forEachGeometry(t,e,n){const{data:r,getGeometry:i}=this,{iterable:o,objectInfo:a}=hM(r,e,n);for(const s of o){a.index++;t(i?i(s,a):null,a.index)}}_rebuildGeometry(t){if(!this.data)return;let{indexStarts:e,vertexStarts:n,instanceCount:r}=this;const{data:i,geometryBuffer:o}=this,{startRow:a=0,endRow:s=1/0}=t||{},l={};if(t||(e=[0],n=[0]),this.normalize||!o)this._forEachGeometry(((t,e)=>{const r=t&&this.normalizeGeometry(t);l[e]=r,n[e+1]=n[e]+(r?this.getGeometrySize(r):0)}),a,s),r=n[n.length-1];else if(n=i.startIndices,r=n[i.length]||0,ArrayBuffer.isView(o))r=r||o.length/this.positionSize;else if(o instanceof AE){const t=o.accessor.stride||4*this.positionSize;r=r||o.byteLength/t}else if(o.buffer){const t=o.stride||4*this.positionSize;r=r||o.buffer.byteLength/t}else if(o.value){const t=o.value,e=o.stride/t.BYTES_PER_ELEMENT||this.positionSize;r=r||t.length/e}this._allocate(r,Boolean(t)),this.indexStarts=e,this.vertexStarts=n,this.instanceCount=r;const c={};this._forEachGeometry(((t,i)=>{const o=l[i]||t;c.vertexStart=n[i],c.indexStart=e[i];const a=i<n.length-1?n[i+1]:r;c.geometrySize=a-n[i],c.geometryIndex=i,this.updateGeometryAttributes(o,c)}),a,s),this.vertexCount=e[e.length-1]}}const _j=1,bj=-1;function xj(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Math.sign(function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{start:n=0,end:r=t.length}=e,i=e.size||2;let o=0;for(let a=n,s=r-i;a<r;a+=i)o+=(t[a]-t[s])*(t[a+1]+t[s+1]),s=a;return o/2}(t,e))}(t,n);return r!==e&&(function(t,e){const{start:n=0,end:r=t.length,size:i=2}=e,o=(r-n)/i,a=Math.floor(o/2);for(let s=0;s<a;++s){const e=n+s*i,r=n+(o-1-s)*i;for(let n=0;n<i;++n){const i=t[e+n];t[e+n]=t[r+n],t[r+n]=i}}}(t,n),!0)}function wj(t,e,n,r){let i,o,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[];if(8&n)i=(r[3]-t[1])/(e[1]-t[1]),o=3;else if(4&n)i=(r[1]-t[1])/(e[1]-t[1]),o=1;else if(2&n)i=(r[2]-t[0])/(e[0]-t[0]),o=2;else{if(!(1&n))return null;i=(r[0]-t[0])/(e[0]-t[0]),o=0}for(let s=0;s<t.length;s++)a[s]=(1&o)===s?r[o]:i*(e[s]-t[s])+t[s];return a}function Sj(t,e){let n=0;return t[0]<e[0]?n|=1:t[0]>e[2]&&(n|=2),t[1]<e[1]?n|=4:t[1]>e[3]&&(n|=8),n}function Ej(t,e){const n=e.length,r=t.length;if(r>0){let i=!0;for(let o=0;o<n;o++)if(t[r-n+o]!==e[o]){i=!1;break}if(i)return!1}for(let i=0;i<n;i++)t[r+i]=e[i];return!0}function Tj(t,e){const n=e.length;for(let r=0;r<n;r++)t[r]=e[r]}function Mj(t,e,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[];const o=r+e*n;for(let a=0;a<n;a++)i[a]=t[o+a];return i}function Aj(t,e){const{size:n=2,broken:r=!1,gridResolution:i=10,gridOffset:o=[0,0],startIndex:a=0,endIndex:s=t.length}=e||{},l=(s-a)/n;let c=[];const u=[c],h=Mj(t,0,n,a);let d,f;const p=Lj(h,i,o,[]),m=[];Ej(c,h);for(let g=1;g<l;g++){for(d=Mj(t,g,n,a,d),f=Sj(d,p);f;){wj(h,d,f,p,m);const t=Sj(m,p);t&&(wj(h,m,t,p,m),f=t),Ej(c,m),Tj(h,m),jj(p,i,f),r&&c.length>n&&(c=[],u.push(c),Ej(c,h)),f=Sj(d,p)}Ej(c,d),Tj(h,d)}return r?u:u[0]}const Cj=0,Pj=1;function kj(t,e){for(let n=0;n<e.length;n++)t.push(e[n]);return t}function Ij(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2?arguments[2]:void 0;if(!t.length)return[];const{size:r=2,gridResolution:i=10,gridOffset:o=[0,0],edgeTypes:a=!1}=n||{},s=[],l=[{pos:t,types:a?new Array(t.length/r).fill(Pj):null,holes:e||[]}],c=[[],[]];let u=[];for(;l.length;){const{pos:t,types:e,holes:n}=l.shift();zj(t,r,n[0]||t.length,c),u=Lj(c[0],i,o,u);const h=Sj(c[1],u);if(h){let i=Oj(t,e,r,0,n[0]||t.length,u,h);const o={pos:i[0].pos,types:i[0].types,holes:[]},s={pos:i[1].pos,types:i[1].types,holes:[]};l.push(o,s);for(let l=0;l<n.length;l++)i=Oj(t,e,r,n[l],n[l+1]||t.length,u,h),i[0]&&(o.holes.push(o.pos.length),o.pos=kj(o.pos,i[0].pos),a&&(o.types=kj(o.types,i[0].types))),i[1]&&(s.holes.push(s.pos.length),s.pos=kj(s.pos,i[1].pos),a&&(s.types=kj(s.types,i[1].types)))}else{const r={positions:t};a&&(r.edgeTypes=e),n.length&&(r.holeIndices=n),s.push(r)}}return s}function Oj(t,e,n,r,i,o,a){const s=(i-r)/n,l=[],c=[],u=[],h=[],d=[];let f,p,m;const g=Mj(t,s-1,n,r);let y=Math.sign(8&a?g[1]-o[3]:g[0]-o[2]),v=e&&e[s-1],_=0,b=0;for(let x=0;x<s;x++)f=Mj(t,x,n,r,f),p=Math.sign(8&a?f[1]-o[3]:f[0]-o[2]),m=e&&e[r/n+x],p&&y&&y!==p&&(wj(g,f,a,o,d),Ej(l,d)&&u.push(v),Ej(c,d)&&h.push(v)),p<=0?(Ej(l,f)&&u.push(m),_-=p):u.length&&(u[u.length-1]=Cj),p>=0?(Ej(c,f)&&h.push(m),b+=p):h.length&&(h[h.length-1]=Cj),Tj(g,f),y=p,v=m;return[_?{pos:l,types:e&&u}:null,b?{pos:c,types:e&&h}:null]}function Lj(t,e,n,r){const i=Math.floor((t[0]-n[0])/e)*e+n[0],o=Math.floor((t[1]-n[1])/e)*e+n[1];return r[0]=i,r[1]=o,r[2]=i+e,r[3]=o+e,r}function jj(t,e,n){8&n?(t[1]+=e,t[3]+=e):4&n?(t[1]-=e,t[3]-=e):2&n?(t[0]+=e,t[2]+=e):1&n&&(t[0]-=e,t[2]-=e)}function zj(t,e,n,r){let i=1/0,o=-1/0,a=1/0,s=-1/0;for(let l=0;l<n;l+=e){const e=t[l],n=t[l+1];i=e<i?e:i,o=e>o?e:o,a=n<a?n:a,s=n>s?n:s}return r[0][0]=i,r[0][1]=a,r[1][0]=o,r[1][1]=s,r}const Rj=85.051129;function Dj(t,e,n,r){let i=-1,o=-1;for(let a=n+1;a<r;a+=e){const e=Math.abs(t[a]);e>i&&(i=e,o=a-1)}return o}function Bj(t,e,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Rj;const o=t[n],a=t[r-e];if(Math.abs(o-a)>180){const r=Mj(t,0,e,n);r[0]+=360*Math.round((a-o)/360),Ej(t,r),r[1]=Math.sign(r[1])*i,Ej(t,r),r[0]=o,Ej(t,r)}}function Fj(t,e,n,r){let i,o=t[0];for(let a=n;a<r;a+=e){i=t[a];const e=i-o;(e>180||e<-180)&&(i-=360*Math.round(e/360)),t[a]=o=i}}function Nj(t,e){let n;const r=t.length/e;for(let o=0;o<r&&(n=t[o*e],(n+180)%360===0);o++);const i=360*-Math.round(n/360);if(0!==i)for(let o=0;o<r;o++)t[o*e]+=i}function Uj(t,e,n,r){let i;if(Array.isArray(t[0])){const n=t.length*e;i=new Array(n);for(let r=0;r<t.length;r++)for(let n=0;n<e;n++)i[r*e+n]=t[r][n]||0}else i=t;return n?Aj(i,{size:e,gridResolution:n}):r?function(t,e){const{size:n=2,startIndex:r=0,endIndex:i=t.length,normalize:o=!0}=e||{},a=t.slice(r,i);Fj(a,n,0,i-r);const s=Aj(a,{size:n,broken:!0,gridResolution:360,gridOffset:[-180,-180]});if(o)for(const l of s)Nj(l,n);return s}(i,{size:e}):i}class Vj extends vj{constructor(t){super({...t,attributes:{positions:{size:3,padding:18,initialize:!0,type:t.fp64?Float64Array:Float32Array},segmentTypes:{size:1,type:Uint8ClampedArray}}})}get(t){return this.attributes[t]}getGeometryFromBuffer(t){return this.normalize?super.getGeometryFromBuffer(t):null}normalizeGeometry(t){return this.normalize?Uj(t,this.positionSize,this.opts.resolution,this.opts.wrapLongitude):t}getGeometrySize(t){if(Wj(t)){let e=0;for(const n of t)e+=this.getGeometrySize(n);return e}const e=this.getPathLength(t);return e<2?0:this.isClosed(t)?e<3?0:e+2:e}updateGeometryAttributes(t,e){if(0!==e.geometrySize)if(t&&Wj(t))for(const n of t){const t=this.getGeometrySize(n);e.geometrySize=t,this.updateGeometryAttributes(n,e),e.vertexStart+=t}else this._updateSegmentTypes(t,e),this._updatePositions(t,e)}_updateSegmentTypes(t,e){const n=this.attributes.segmentTypes,r=!!t&&this.isClosed(t),{vertexStart:i,geometrySize:o}=e;n.fill(0,i,i+o),r?(n[i]=4,n[i+o-2]=4):(n[i]+=1,n[i+o-2]+=2),n[i+o-1]=4}_updatePositions(t,e){const{positions:n}=this.attributes;if(!n||!t)return;const{vertexStart:r,geometrySize:i}=e,o=new Array(3);for(let a=r,s=0;s<i;a++,s++)this.getPointOnPath(t,s,o),n[3*a]=o[0],n[3*a+1]=o[1],n[3*a+2]=o[2]}getPathLength(t){return t.length/this.positionSize}getPointOnPath(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];const{positionSize:r}=this;e*r>=t.length&&(e+=1-t.length/r);const i=e*r;return n[0]=t[i],n[1]=t[i+1],n[2]=3===r&&t[i+2]||0,n}isClosed(t){if(!this.normalize)return Boolean(this.opts.loop);const{positionSize:e}=this,n=t.length-e;return t[0]===t[n]&&t[1]===t[n+1]&&(2===e||t[2]===t[n+2])}}function Wj(t){return Array.isArray(t[0])}const Gj=[0,0,0,255],qj={widthUnits:"meters",widthScale:{type:"number",min:0,value:1},widthMinPixels:{type:"number",min:0,value:0},widthMaxPixels:{type:"number",min:0,value:Number.MAX_SAFE_INTEGER},jointRounded:!1,capRounded:!1,miterLimit:{type:"number",min:0,value:4},billboard:!1,_pathType:null,getPath:{type:"accessor",value:t=>t.path},getColor:{type:"accessor",value:Gj},getWidth:{type:"accessor",value:1},rounded:{deprecatedFor:["jointRounded","capRounded"]}},Hj={enter:(t,e)=>e.length?e.subarray(e.length-t.length):t};class Zj extends fL{constructor(){super(...arguments),ww(this,"state",void 0)}getShaders(){return super.getShaders({vs:"#define SHADER_NAME path-layer-vertex-shader\n\nattribute vec2 positions;\n\nattribute float instanceTypes;\nattribute vec3 instanceStartPositions;\nattribute vec3 instanceEndPositions;\nattribute vec3 instanceLeftPositions;\nattribute vec3 instanceRightPositions;\nattribute vec3 instanceLeftPositions64Low;\nattribute vec3 instanceStartPositions64Low;\nattribute vec3 instanceEndPositions64Low;\nattribute vec3 instanceRightPositions64Low;\nattribute float instanceStrokeWidths;\nattribute vec4 instanceColors;\nattribute vec3 instancePickingColors;\n\nuniform float widthScale;\nuniform float widthMinPixels;\nuniform float widthMaxPixels;\nuniform float jointType;\nuniform float capType;\nuniform float miterLimit;\nuniform bool billboard;\nuniform int widthUnits;\n\nuniform float opacity;\n\nvarying vec4 vColor;\nvarying vec2 vCornerOffset;\nvarying float vMiterLength;\nvarying vec2 vPathPosition;\nvarying float vPathLength;\nvarying float vJointType;\n\nconst float EPSILON = 0.001;\nconst vec3 ZERO_OFFSET = vec3(0.0);\n\nfloat flipIfTrue(bool flag) {\n  return -(float(flag) * 2. - 1.);\n}\nvec3 getLineJoinOffset(\n  vec3 prevPoint, vec3 currPoint, vec3 nextPoint,\n  vec2 width\n) {\n  bool isEnd = positions.x > 0.0;\n  float sideOfPath = positions.y;\n  float isJoint = float(sideOfPath == 0.0);\n\n  vec3 deltaA3 = (currPoint - prevPoint);\n  vec3 deltaB3 = (nextPoint - currPoint);\n\n  mat3 rotationMatrix;\n  bool needsRotation = !billboard && project_needs_rotation(currPoint, rotationMatrix);\n  if (needsRotation) {\n    deltaA3 = deltaA3 * rotationMatrix;\n    deltaB3 = deltaB3 * rotationMatrix;\n  }\n  vec2 deltaA = deltaA3.xy / width;\n  vec2 deltaB = deltaB3.xy / width;\n\n  float lenA = length(deltaA);\n  float lenB = length(deltaB);\n\n  vec2 dirA = lenA > 0. ? normalize(deltaA) : vec2(0.0, 0.0);\n  vec2 dirB = lenB > 0. ? normalize(deltaB) : vec2(0.0, 0.0);\n\n  vec2 perpA = vec2(-dirA.y, dirA.x);\n  vec2 perpB = vec2(-dirB.y, dirB.x);\n  vec2 tangent = dirA + dirB;\n  tangent = length(tangent) > 0. ? normalize(tangent) : perpA;\n  vec2 miterVec = vec2(-tangent.y, tangent.x);\n  vec2 dir = isEnd ? dirA : dirB;\n  vec2 perp = isEnd ? perpA : perpB;\n  float L = isEnd ? lenA : lenB;\n  float sinHalfA = abs(dot(miterVec, perp));\n  float cosHalfA = abs(dot(dirA, miterVec));\n  float turnDirection = flipIfTrue(dirA.x * dirB.y >= dirA.y * dirB.x);\n  float cornerPosition = sideOfPath * turnDirection;\n\n  float miterSize = 1.0 / max(sinHalfA, EPSILON);\n  miterSize = mix(\n    min(miterSize, max(lenA, lenB) / max(cosHalfA, EPSILON)),\n    miterSize,\n    step(0.0, cornerPosition)\n  );\n\n  vec2 offsetVec = mix(miterVec * miterSize, perp, step(0.5, cornerPosition))\n    * (sideOfPath + isJoint * turnDirection);\n  bool isStartCap = lenA == 0.0 || (!isEnd && (instanceTypes == 1.0 || instanceTypes == 3.0));\n  bool isEndCap = lenB == 0.0 || (isEnd && (instanceTypes == 2.0 || instanceTypes == 3.0));\n  bool isCap = isStartCap || isEndCap;\n  if (isCap) {\n    offsetVec = mix(perp * sideOfPath, dir * capType * 4.0 * flipIfTrue(isStartCap), isJoint);\n    vJointType = capType;\n  } else {\n    vJointType = jointType;\n  }\n  vPathLength = L;\n  vCornerOffset = offsetVec;\n  vMiterLength = dot(vCornerOffset, miterVec * turnDirection);\n  vMiterLength = isCap ? isJoint : vMiterLength;\n\n  vec2 offsetFromStartOfPath = vCornerOffset + deltaA * float(isEnd);\n  vPathPosition = vec2(\n    dot(offsetFromStartOfPath, perp),\n    dot(offsetFromStartOfPath, dir)\n  );\n  geometry.uv = vPathPosition;\n\n  float isValid = step(instanceTypes, 3.5);\n  vec3 offset = vec3(offsetVec * width * isValid, 0.0);\n\n  if (needsRotation) {\n    offset = rotationMatrix * offset;\n  }\n  return offset;\n}\nvoid clipLine(inout vec4 position, vec4 refPosition) {\n  if (position.w < EPSILON) {\n    float r = (EPSILON - refPosition.w) / (position.w - refPosition.w);\n    position = refPosition + (position - refPosition) * r;\n  }\n}\n\nvoid main() {\n  geometry.pickingColor = instancePickingColors;\n\n  vColor = vec4(instanceColors.rgb, instanceColors.a * opacity);\n\n  float isEnd = positions.x;\n\n  vec3 prevPosition = mix(instanceLeftPositions, instanceStartPositions, isEnd);\n  vec3 prevPosition64Low = mix(instanceLeftPositions64Low, instanceStartPositions64Low, isEnd);\n\n  vec3 currPosition = mix(instanceStartPositions, instanceEndPositions, isEnd);\n  vec3 currPosition64Low = mix(instanceStartPositions64Low, instanceEndPositions64Low, isEnd);\n\n  vec3 nextPosition = mix(instanceEndPositions, instanceRightPositions, isEnd);\n  vec3 nextPosition64Low = mix(instanceEndPositions64Low, instanceRightPositions64Low, isEnd);\n\n  geometry.worldPosition = currPosition;\n  vec2 widthPixels = vec2(clamp(\n    project_size_to_pixel(instanceStrokeWidths * widthScale, widthUnits),\n    widthMinPixels, widthMaxPixels) / 2.0);\n  vec3 width;\n\n  if (billboard) {\n    vec4 prevPositionScreen = project_position_to_clipspace(prevPosition, prevPosition64Low, ZERO_OFFSET);\n    vec4 currPositionScreen = project_position_to_clipspace(currPosition, currPosition64Low, ZERO_OFFSET, geometry.position);\n    vec4 nextPositionScreen = project_position_to_clipspace(nextPosition, nextPosition64Low, ZERO_OFFSET);\n\n    clipLine(prevPositionScreen, currPositionScreen);\n    clipLine(nextPositionScreen, currPositionScreen);\n    clipLine(currPositionScreen, mix(nextPositionScreen, prevPositionScreen, isEnd));\n\n    width = vec3(widthPixels, 0.0);\n    DECKGL_FILTER_SIZE(width, geometry);\n\n    vec3 offset = getLineJoinOffset(\n      prevPositionScreen.xyz / prevPositionScreen.w,\n      currPositionScreen.xyz / currPositionScreen.w,\n      nextPositionScreen.xyz / nextPositionScreen.w,\n      project_pixel_size_to_clipspace(width.xy)\n    );\n\n    DECKGL_FILTER_GL_POSITION(currPositionScreen, geometry);\n    gl_Position = vec4(currPositionScreen.xyz + offset * currPositionScreen.w, currPositionScreen.w);\n  } else {\n    prevPosition = project_position(prevPosition, prevPosition64Low);\n    currPosition = project_position(currPosition, currPosition64Low);\n    nextPosition = project_position(nextPosition, nextPosition64Low);\n\n    width = vec3(project_pixel_size(widthPixels), 0.0);\n    DECKGL_FILTER_SIZE(width, geometry);\n\n    vec3 offset = getLineJoinOffset(prevPosition, currPosition, nextPosition, width.xy);\n    geometry.position = vec4(currPosition + offset, 1.0);\n    gl_Position = project_common_position_to_clipspace(geometry.position);\n    DECKGL_FILTER_GL_POSITION(gl_Position, geometry);\n  }\n  DECKGL_FILTER_COLOR(vColor, geometry);\n}\n",fs:"#define SHADER_NAME path-layer-fragment-shader\n\nprecision highp float;\n\nuniform float miterLimit;\n\nvarying vec4 vColor;\nvarying vec2 vCornerOffset;\nvarying float vMiterLength;\nvarying vec2 vPathPosition;\nvarying float vPathLength;\nvarying float vJointType;\n\nvoid main(void) {\n  geometry.uv = vPathPosition;\n\n  if (vPathPosition.y < 0.0 || vPathPosition.y > vPathLength) {\n    if (vJointType > 0.5 && length(vCornerOffset) > 1.0) {\n      discard;\n    }\n    if (vJointType < 0.5 && vMiterLength > miterLimit + 1.0) {\n      discard;\n    }\n  }\n  gl_FragColor = vColor;\n\n  DECKGL_FILTER_COLOR(gl_FragColor, geometry);\n}\n",modules:[TL,CL]})}get wrapLongitude(){return!1}initializeState(){const t=!0;this.getAttributeManager().addInstanced({positions:{size:3,vertexOffset:1,type:5130,fp64:this.use64bitPositions(),transition:Hj,accessor:"getPath",update:this.calculatePositions,noAlloc:t,shaderAttributes:{instanceLeftPositions:{vertexOffset:0},instanceStartPositions:{vertexOffset:1},instanceEndPositions:{vertexOffset:2},instanceRightPositions:{vertexOffset:3}}},instanceTypes:{size:1,type:5121,update:this.calculateSegmentTypes,noAlloc:t},instanceStrokeWidths:{size:1,accessor:"getWidth",transition:Hj,defaultValue:1},instanceColors:{size:this.props.colorFormat.length,type:5121,normalized:!0,accessor:"getColor",transition:Hj,defaultValue:Gj},instancePickingColors:{size:3,type:5121,accessor:(t,e)=>{let{index:n,target:r}=e;return this.encodePickingColor(t&&t.__source?t.__source.index:n,r)}}}),this.setState({pathTesselator:new Vj({fp64:this.use64bitPositions()})})}updateState(t){super.updateState(t);const{props:e,changeFlags:n}=t,r=this.getAttributeManager();if(n.dataChanged||n.updateTriggersChanged&&(n.updateTriggersChanged.all||n.updateTriggersChanged.getPath)){const{pathTesselator:t}=this.state,i=e.data.attributes||{};t.updateGeometry({data:e.data,geometryBuffer:i.getPath,buffers:i,normalize:!e._pathType,loop:"loop"===e._pathType,getGeometry:e.getPath,positionFormat:e.positionFormat,wrapLongitude:e.wrapLongitude,resolution:this.context.viewport.resolution,dataChanged:n.dataChanged}),this.setState({numInstances:t.instanceCount,startIndices:t.vertexStarts}),n.dataChanged||r.invalidateAll()}if(n.extensionsChanged){var i;const{gl:t}=this.context;null===(i=this.state.model)||void 0===i||i.delete(),this.state.model=this._getModel(t),r.invalidateAll()}}getPickingInfo(t){const e=super.getPickingInfo(t),{index:n}=e,{data:r}=this.props;return r[0]&&r[0].__source&&(e.object=r.find((t=>t.__source.index===n))),e}disablePickingIndex(t){const{data:e}=this.props;if(e[0]&&e[0].__source)for(let n=0;n<e.length;n++)e[n].__source.index===t&&this._disablePickingIndex(n);else super.disablePickingIndex(t)}draw(t){let{uniforms:e}=t;const{jointRounded:n,capRounded:r,billboard:i,miterLimit:o,widthUnits:a,widthScale:s,widthMinPixels:l,widthMaxPixels:c}=this.props;this.state.model.setUniforms(e).setUniforms({jointType:Number(n),capType:Number(r),billboard:i,widthUnits:Zw[a],widthScale:s,miterLimit:o,widthMinPixels:l,widthMaxPixels:c}).draw()}_getModel(t){return new xP(t,{...this.getShaders(),id:this.props.id,geometry:new kL({drawMode:4,attributes:{indices:new Uint16Array([0,1,2,1,4,2,1,3,4,3,5,4]),positions:{value:new Float32Array([0,0,0,-1,0,1,1,-1,1,1,1,0]),size:2}}}),isInstanced:!0})}calculatePositions(t){const{pathTesselator:e}=this.state;t.startIndices=e.vertexStarts,t.value=e.get("positions")}calculateSegmentTypes(t){const{pathTesselator:e}=this.state;t.startIndices=e.vertexStarts,t.value=e.get("segmentTypes")}}ww(Zj,"defaultProps",qj),ww(Zj,"layerName","PathLayer");const Xj="#if (defined(SHADER_TYPE_FRAGMENT) && defined(LIGHTING_FRAGMENT)) || (defined(SHADER_TYPE_VERTEX) && defined(LIGHTING_VERTEX))\n\nstruct AmbientLight {\n vec3 color;\n};\n\nstruct PointLight {\n vec3 color;\n vec3 position;\n vec3 attenuation;\n};\n\nstruct DirectionalLight {\n  vec3 color;\n  vec3 direction;\n};\n\nuniform AmbientLight lighting_uAmbientLight;\nuniform PointLight lighting_uPointLight[MAX_LIGHTS];\nuniform DirectionalLight lighting_uDirectionalLight[MAX_LIGHTS];\nuniform int lighting_uPointLightCount;\nuniform int lighting_uDirectionalLightCount;\n\nuniform bool lighting_uEnabled;\n\nfloat getPointLightAttenuation(PointLight pointLight, float distance) {\n  return pointLight.attenuation.x\n       + pointLight.attenuation.y * distance\n       + pointLight.attenuation.z * distance * distance;\n}\n\n#endif\n",Yj={lightSources:{}};function Kj(){let{color:t=[0,0,0],intensity:e=1}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return t.map((t=>t*e/255))}const $j={name:"lights",vs:Xj,fs:Xj,getUniforms:function t(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Yj;if("lightSources"in e){const{ambientLight:t,pointLights:n,directionalLights:r}=e.lightSources||{};return t||n&&n.length>0||r&&r.length>0?Object.assign({},function(t){let{ambientLight:e,pointLights:n=[],directionalLights:r=[]}=t;const i={};return i["lighting_uAmbientLight.color"]=e?Kj(e):[0,0,0],n.forEach(((t,e)=>{i["lighting_uPointLight[".concat(e,"].color")]=Kj(t),i["lighting_uPointLight[".concat(e,"].position")]=t.position,i["lighting_uPointLight[".concat(e,"].attenuation")]=t.attenuation||[1,0,0]})),i.lighting_uPointLightCount=n.length,r.forEach(((t,e)=>{i["lighting_uDirectionalLight[".concat(e,"].color")]=Kj(t),i["lighting_uDirectionalLight[".concat(e,"].direction")]=t.direction})),i.lighting_uDirectionalLightCount=r.length,i}({ambientLight:t,pointLights:n,directionalLights:r}),{lighting_uEnabled:!0}):{lighting_uEnabled:!1}}if("lights"in e){const n={pointLights:[],directionalLights:[]};for(const t of e.lights||[])switch(t.type){case"ambient":n.ambientLight=t;break;case"directional":n.directionalLights.push(t);break;case"point":n.pointLights.push(t)}return t({lightSources:n})}return{}},defines:{MAX_LIGHTS:3}},Jj="\nuniform float lighting_uAmbient;\nuniform float lighting_uDiffuse;\nuniform float lighting_uShininess;\nuniform vec3  lighting_uSpecularColor;\n\nvec3 lighting_getLightColor(vec3 surfaceColor, vec3 light_direction, vec3 view_direction, vec3 normal_worldspace, vec3 color) {\n    vec3 halfway_direction = normalize(light_direction + view_direction);\n    float lambertian = dot(light_direction, normal_worldspace);\n    float specular = 0.0;\n    if (lambertian > 0.0) {\n      float specular_angle = max(dot(normal_worldspace, halfway_direction), 0.0);\n      specular = pow(specular_angle, lighting_uShininess);\n    }\n    lambertian = max(lambertian, 0.0);\n    return (lambertian * lighting_uDiffuse * surfaceColor + specular * lighting_uSpecularColor) * color;\n}\n\nvec3 lighting_getLightColor(vec3 surfaceColor, vec3 cameraPosition, vec3 position_worldspace, vec3 normal_worldspace) {\n  vec3 lightColor = surfaceColor;\n\n  if (lighting_uEnabled) {\n    vec3 view_direction = normalize(cameraPosition - position_worldspace);\n    lightColor = lighting_uAmbient * surfaceColor * lighting_uAmbientLight.color;\n\n    for (int i = 0; i < MAX_LIGHTS; i++) {\n      if (i >= lighting_uPointLightCount) {\n        break;\n      }\n      PointLight pointLight = lighting_uPointLight[i];\n      vec3 light_position_worldspace = pointLight.position;\n      vec3 light_direction = normalize(light_position_worldspace - position_worldspace);\n      lightColor += lighting_getLightColor(surfaceColor, light_direction, view_direction, normal_worldspace, pointLight.color);\n    }\n\n    for (int i = 0; i < MAX_LIGHTS; i++) {\n      if (i >= lighting_uDirectionalLightCount) {\n        break;\n      }\n      DirectionalLight directionalLight = lighting_uDirectionalLight[i];\n      lightColor += lighting_getLightColor(surfaceColor, -directionalLight.direction, view_direction, normal_worldspace, directionalLight.color);\n    }\n  }\n  return lightColor;\n}\n\nvec3 lighting_getSpecularLightColor(vec3 cameraPosition, vec3 position_worldspace, vec3 normal_worldspace) {\n  vec3 lightColor = vec3(0, 0, 0);\n  vec3 surfaceColor = vec3(0, 0, 0);\n\n  if (lighting_uEnabled) {\n    vec3 view_direction = normalize(cameraPosition - position_worldspace);\n\n    for (int i = 0; i < MAX_LIGHTS; i++) {\n      if (i >= lighting_uPointLightCount) {\n        break;\n      }\n      PointLight pointLight = lighting_uPointLight[i];\n      vec3 light_position_worldspace = pointLight.position;\n      vec3 light_direction = normalize(light_position_worldspace - position_worldspace);\n      lightColor += lighting_getLightColor(surfaceColor, light_direction, view_direction, normal_worldspace, pointLight.color);\n    }\n\n    for (int i = 0; i < MAX_LIGHTS; i++) {\n      if (i >= lighting_uDirectionalLightCount) {\n        break;\n      }\n      DirectionalLight directionalLight = lighting_uDirectionalLight[i];\n      lightColor += lighting_getLightColor(surfaceColor, -directionalLight.direction, view_direction, normal_worldspace, directionalLight.color);\n    }\n  }\n  return lightColor;\n}\n",Qj={};function tz(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Qj;if(!("material"in t))return{};const{material:e}=t;return e?function(t){const{ambient:e=.35,diffuse:n=.6,shininess:r=32,specularColor:i=[30,30,30]}=t;return{lighting_uAmbient:e,lighting_uDiffuse:n,lighting_uShininess:r,lighting_uSpecularColor:i.map((t=>t/255))}}(e):{lighting_uEnabled:!1}}const ez={name:"gouraud-lighting",dependencies:[$j],vs:Jj,defines:{LIGHTING_VERTEX:1},getUniforms:tz};var nz=n(973),rz=n.n(nz);const iz=_j,oz=bj,az={isClosed:!0};function sz(t){return"positions"in t?t.positions:t}function lz(t){return"holeIndices"in t?t.holeIndices:null}function cz(t,e,n,r,i){let o=e;const a=n.length;for(let s=0;s<a;s++)for(let e=0;e<r;e++)t[o++]=n[s][e]||0;if(!function(t){const e=t[0],n=t[t.length-1];return e[0]===n[0]&&e[1]===n[1]&&e[2]===n[2]}(n))for(let s=0;s<r;s++)t[o++]=n[0][s]||0;return az.start=e,az.end=o,az.size=r,xj(t,i,az),o}function uz(t,e,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,o=arguments.length>5?arguments[5]:void 0,a=arguments.length>6?arguments[6]:void 0;o=o||n.length;const s=o-i;if(s<=0)return e;let l=e;for(let c=0;c<s;c++)t[l++]=n[i+c];if(!function(t,e,n,r){for(let i=0;i<e;i++)if(t[n+i]!==t[r-e+i])return!1;return!0}(n,r,i,o))for(let c=0;c<r;c++)t[l++]=n[i+c];return az.start=e,az.end=l,az.size=r,xj(t,a,az),l}function hz(t,e){!function(t){if(t=t&&t.positions||t,!Array.isArray(t)&&!ArrayBuffer.isView(t))throw new Error("invalid polygon")}(t);const n=[],r=[];if("positions"in t){const{positions:i,holeIndices:o}=t;if(o){let t=0;for(let a=0;a<=o.length;a++)t=uz(n,t,i,e,o[a-1],o[a],0===a?iz:oz),r.push(t);return r.pop(),{positions:n,holeIndices:r}}t=i}if(!function(t){return Array.isArray(t[0])}(t))return uz(n,0,t,e,0,n.length,iz),n;if(!function(t){return t.length>=1&&t[0].length>=2&&Number.isFinite(t[0][0])}(t)){let i=0;for(const[o,a]of t.entries())i=cz(n,i,a,e,0===o?iz:oz),r.push(i);return r.pop(),{positions:n,holeIndices:r}}return cz(n,0,t,e,iz),n}function dz(t,e,n){const r=t.length/3;let i=0;for(let o=0;o<r;o++){const a=(o+1)%r;i+=t[3*o+e]*t[3*a+n],i-=t[3*a+e]*t[3*o+n]}return Math.abs(i/2)}function fz(t,e,n,r){const i=t.length/3;for(let o=0;o<i;o++){const i=3*o,a=t[i+0],s=t[i+1],l=t[i+2];t[i+e]=a,t[i+n]=s,t[i+r]=l}}class pz extends vj{constructor(t){const{fp64:e,IndexType:n=Uint32Array}=t;super({...t,attributes:{positions:{size:3,type:e?Float64Array:Float32Array},vertexValid:{type:Uint8ClampedArray,size:1},indices:{type:n,size:1}}})}get(t){const{attributes:e}=this;return"indices"===t?e.indices&&e.indices.subarray(0,this.vertexCount):e[t]}updateGeometry(t){super.updateGeometry(t);const e=this.buffers.indices;if(e)this.vertexCount=(e.value||e).length;else if(this.data&&!this.getGeometry)throw new Error("missing indices buffer")}normalizeGeometry(t){if(this.normalize){const e=hz(t,this.positionSize);return this.opts.resolution?Ij(sz(e),lz(e),{size:this.positionSize,gridResolution:this.opts.resolution,edgeTypes:!0}):this.opts.wrapLongitude?function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2?arguments[2]:void 0;const{size:r=2,normalize:i=!0,edgeTypes:o=!1}=n||{};e=e||[];const a=[],s=[];let l=0,c=0;for(let h=0;h<=e.length;h++){const i=e[h]||t.length,o=c,u=Dj(t,r,l,i);for(let e=u;e<i;e++)a[c++]=t[e];for(let e=l;e<u;e++)a[c++]=t[e];Fj(a,r,o,c),Bj(a,r,o,c,null===n||void 0===n?void 0:n.maxLatitude),l=i,s[h]=c}s.pop();const u=Ij(a,s,{size:r,gridResolution:360,gridOffset:[-180,-180],edgeTypes:o});if(i)for(const h of u)Nj(h.positions,r);return u}(sz(e),lz(e),{size:this.positionSize,maxLatitude:86,edgeTypes:!0}):e}return t}getGeometrySize(t){if(mz(t)){let e=0;for(const n of t)e+=this.getGeometrySize(n);return e}return sz(t).length/this.positionSize}getGeometryFromBuffer(t){return this.normalize||!this.buffers.indices?super.getGeometryFromBuffer(t):null}updateGeometryAttributes(t,e){if(t&&mz(t))for(const n of t){const t=this.getGeometrySize(n);e.geometrySize=t,this.updateGeometryAttributes(n,e),e.vertexStart+=t,e.indexStart=this.indexStarts[e.geometryIndex+1]}else this._updateIndices(t,e),this._updatePositions(t,e),this._updateVertexValid(t,e)}_updateIndices(t,e){let{geometryIndex:n,vertexStart:r,indexStart:i}=e;const{attributes:o,indexStarts:a,typedArrayManager:s}=this;let l=o.indices;if(!l||!t)return;let c=i;const u=function(t,e,n,r){let i=lz(t);i&&(i=i.map((t=>t/e)));let o=sz(t);const a=r&&3===e;if(n){const t=o.length;o=o.slice();const r=[];for(let i=0;i<t;i+=e){r[0]=o[i],r[1]=o[i+1],a&&(r[2]=o[i+2]);const t=n(r);o[i]=t[0],o[i+1]=t[1],a&&(o[i+2]=t[2])}}if(a){const t=dz(o,0,1),e=dz(o,0,2),r=dz(o,1,2);if(!t&&!e&&!r)return[];t>e&&t>r||(e>r?(n||(o=o.slice()),fz(o,0,2,1)):(n||(o=o.slice()),fz(o,2,0,1)))}return rz()(o,i,e)}(t,this.positionSize,this.opts.preproject,this.opts.full3d);l=s.allocate(l,i+u.length,{copy:!0});for(let h=0;h<u.length;h++)l[c++]=u[h]+r;a[n+1]=i+u.length,o.indices=l}_updatePositions(t,e){let{vertexStart:n,geometrySize:r}=e;const{attributes:{positions:i},positionSize:o}=this;if(!i||!t)return;const a=sz(t);for(let s=n,l=0;l<r;s++,l++){const t=a[l*o],e=a[l*o+1],n=o>2?a[l*o+2]:0;i[3*s]=t,i[3*s+1]=e,i[3*s+2]=n}}_updateVertexValid(t,e){let{vertexStart:n,geometrySize:r}=e;const{positionSize:i}=this,o=this.attributes.vertexValid,a=t&&lz(t);if(t&&t.edgeTypes?o.set(t.edgeTypes,n):o.fill(1,n,n+r),a)for(let s=0;s<a.length;s++)o[n+a[s]/i-1]=0;o[n+r-1]=0}}function mz(t){return Array.isArray(t)&&t.length>0&&!Number.isFinite(t[0])}const gz="\nattribute vec2 vertexPositions;\nattribute float vertexValid;\n\nuniform bool extruded;\nuniform bool isWireframe;\nuniform float elevationScale;\nuniform float opacity;\n\nvarying vec4 vColor;\n\nstruct PolygonProps {\n  vec4 fillColors;\n  vec4 lineColors;\n  vec3 positions;\n  vec3 nextPositions;\n  vec3 pickingColors;\n  vec3 positions64Low;\n  vec3 nextPositions64Low;\n  float elevations;\n};\n\nvec3 project_offset_normal(vec3 vector) {\n  if (project_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT ||\n    project_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSETS) {\n    return normalize(vector * project_uCommonUnitsPerWorldUnit);\n  }\n  return project_normal(vector);\n}\n\nvoid calculatePosition(PolygonProps props) {\n#ifdef IS_SIDE_VERTEX\n  if(vertexValid < 0.5){\n    gl_Position = vec4(0.);\n    return;\n  }\n#endif\n\n  vec3 pos;\n  vec3 pos64Low;\n  vec3 normal;\n  vec4 colors = isWireframe ? props.lineColors : props.fillColors;\n\n  geometry.worldPosition = props.positions;\n  geometry.worldPositionAlt = props.nextPositions;\n  geometry.pickingColor = props.pickingColors;\n\n#ifdef IS_SIDE_VERTEX\n  pos = mix(props.positions, props.nextPositions, vertexPositions.x);\n  pos64Low = mix(props.positions64Low, props.nextPositions64Low, vertexPositions.x);\n#else\n  pos = props.positions;\n  pos64Low = props.positions64Low;\n#endif\n\n  if (extruded) {\n    pos.z += props.elevations * vertexPositions.y * elevationScale;\n  }\n  gl_Position = project_position_to_clipspace(pos, pos64Low, vec3(0.), geometry.position);\n\n  DECKGL_FILTER_GL_POSITION(gl_Position, geometry);\n\n  if (extruded) {\n  #ifdef IS_SIDE_VERTEX\n    normal = vec3(\n      props.positions.y - props.nextPositions.y + (props.positions64Low.y - props.nextPositions64Low.y),\n      props.nextPositions.x - props.positions.x + (props.nextPositions64Low.x - props.positions64Low.x),\n      0.0);\n    normal = project_offset_normal(normal);\n  #else\n    normal = project_normal(vec3(0.0, 0.0, 1.0));\n  #endif\n    geometry.normal = normal;\n    vec3 lightColor = lighting_getLightColor(colors.rgb, project_uCameraPosition, geometry.position.xyz, normal);\n    vColor = vec4(lightColor, colors.a * opacity);\n  } else {\n    vColor = vec4(colors.rgb, colors.a * opacity);\n  }\n  DECKGL_FILTER_COLOR(vColor, geometry);\n}\n",yz="#define SHADER_NAME solid-polygon-layer-vertex-shader\n\nattribute vec3 positions;\nattribute vec3 positions64Low;\nattribute float elevations;\nattribute vec4 fillColors;\nattribute vec4 lineColors;\nattribute vec3 pickingColors;\n\n".concat(gz,"\n\nvoid main(void) {\n  PolygonProps props;\n\n  props.positions = positions;\n  props.positions64Low = positions64Low;\n  props.elevations = elevations;\n  props.fillColors = fillColors;\n  props.lineColors = lineColors;\n  props.pickingColors = pickingColors;\n\n  calculatePosition(props);\n}\n"),vz="#define SHADER_NAME solid-polygon-layer-vertex-shader-side\n#define IS_SIDE_VERTEX\n\n\nattribute vec3 instancePositions;\nattribute vec3 nextPositions;\nattribute vec3 instancePositions64Low;\nattribute vec3 nextPositions64Low;\nattribute float instanceElevations;\nattribute vec4 instanceFillColors;\nattribute vec4 instanceLineColors;\nattribute vec3 instancePickingColors;\n\n".concat(gz,"\n\nvoid main(void) {\n  PolygonProps props;\n\n  #if RING_WINDING_ORDER_CW == 1\n    props.positions = instancePositions;\n    props.positions64Low = instancePositions64Low;\n    props.nextPositions = nextPositions;\n    props.nextPositions64Low = nextPositions64Low;\n  #else\n    props.positions = nextPositions;\n    props.positions64Low = nextPositions64Low;\n    props.nextPositions = instancePositions;\n    props.nextPositions64Low = instancePositions64Low;\n  #endif\n  props.elevations = instanceElevations;\n  props.fillColors = instanceFillColors;\n  props.lineColors = instanceLineColors;\n  props.pickingColors = instancePickingColors;\n\n  calculatePosition(props);\n}\n"),_z=[0,0,0,255],bz={filled:!0,extruded:!1,wireframe:!1,_normalize:!0,_windingOrder:"CW",_full3d:!1,elevationScale:{type:"number",min:0,value:1},getPolygon:{type:"accessor",value:t=>t.polygon},getElevation:{type:"accessor",value:1e3},getFillColor:{type:"accessor",value:_z},getLineColor:{type:"accessor",value:_z},material:!0},xz={enter:(t,e)=>e.length?e.subarray(e.length-t.length):t};class wz extends fL{constructor(){super(...arguments),ww(this,"state",void 0)}getShaders(t){return super.getShaders({vs:"top"===t?yz:vz,fs:"#define SHADER_NAME solid-polygon-layer-fragment-shader\n\nprecision highp float;\n\nvarying vec4 vColor;\n\nvoid main(void) {\n  gl_FragColor = vColor;\n\n  DECKGL_FILTER_COLOR(gl_FragColor, geometry);\n}\n",defines:{RING_WINDING_ORDER_CW:this.props._normalize||"CCW"!==this.props._windingOrder?1:0},modules:[TL,ez,CL]})}get wrapLongitude(){return!1}initializeState(){const{gl:t,viewport:e}=this.context;let{coordinateSystem:n}=this.props;const{_full3d:r}=this.props;let i;e.isGeospatial&&n===qw.DEFAULT&&(n=qw.LNGLAT),n===qw.LNGLAT&&(i=r?e.projectPosition.bind(e):e.projectFlat.bind(e)),this.setState({numInstances:0,polygonTesselator:new pz({preproject:i,fp64:this.use64bitPositions(),IndexType:!t||xT(t,nT)?Uint32Array:Uint16Array})});const o=this.getAttributeManager(),a=!0;o.remove(["instancePickingColors"]),o.add({indices:{size:1,isIndexed:!0,update:this.calculateIndices,noAlloc:a},positions:{size:3,type:5130,fp64:this.use64bitPositions(),transition:xz,accessor:"getPolygon",update:this.calculatePositions,noAlloc:a,shaderAttributes:{positions:{vertexOffset:0,divisor:0},instancePositions:{vertexOffset:0,divisor:1},nextPositions:{vertexOffset:1,divisor:1}}},vertexValid:{size:1,divisor:1,type:5121,update:this.calculateVertexValid,noAlloc:a},elevations:{size:1,transition:xz,accessor:"getElevation",shaderAttributes:{elevations:{divisor:0},instanceElevations:{divisor:1}}},fillColors:{size:this.props.colorFormat.length,type:5121,normalized:!0,transition:xz,accessor:"getFillColor",defaultValue:_z,shaderAttributes:{fillColors:{divisor:0},instanceFillColors:{divisor:1}}},lineColors:{size:this.props.colorFormat.length,type:5121,normalized:!0,transition:xz,accessor:"getLineColor",defaultValue:_z,shaderAttributes:{lineColors:{divisor:0},instanceLineColors:{divisor:1}}},pickingColors:{size:3,type:5121,accessor:(t,e)=>{let{index:n,target:r}=e;return this.encodePickingColor(t&&t.__source?t.__source.index:n,r)},shaderAttributes:{pickingColors:{divisor:0},instancePickingColors:{divisor:1}}}})}getPickingInfo(t){const e=super.getPickingInfo(t),{index:n}=e,{data:r}=this.props;return r[0]&&r[0].__source&&(e.object=r.find((t=>t.__source.index===n))),e}disablePickingIndex(t){const{data:e}=this.props;if(e[0]&&e[0].__source)for(let n=0;n<e.length;n++)e[n].__source.index===t&&this._disablePickingIndex(n);else super.disablePickingIndex(t)}draw(t){let{uniforms:e}=t;const{extruded:n,filled:r,wireframe:i,elevationScale:o}=this.props,{topModel:a,sideModel:s,polygonTesselator:l}=this.state,c={...e,extruded:Boolean(n),elevationScale:o};s&&(s.setInstanceCount(l.instanceCount-1),s.setUniforms(c),i&&(s.setDrawMode(3),s.setUniforms({isWireframe:!0}).draw()),r&&(s.setDrawMode(6),s.setUniforms({isWireframe:!1}).draw())),a&&(a.setVertexCount(l.vertexCount),a.setUniforms(c).draw())}updateState(t){super.updateState(t),this.updateGeometry(t);const{props:e,oldProps:n,changeFlags:r}=t,i=this.getAttributeManager();var o;(r.extensionsChanged||e.filled!==n.filled||e.extruded!==n.extruded)&&(null===(o=this.state.models)||void 0===o||o.forEach((t=>t.delete())),this.setState(this._getModels(this.context.gl)),i.invalidateAll())}updateGeometry(t){let{props:e,oldProps:n,changeFlags:r}=t;if(r.dataChanged||r.updateTriggersChanged&&(r.updateTriggersChanged.all||r.updateTriggersChanged.getPolygon)){const{polygonTesselator:t}=this.state,n=e.data.attributes||{};t.updateGeometry({data:e.data,normalize:e._normalize,geometryBuffer:n.getPolygon,buffers:n,getGeometry:e.getPolygon,positionFormat:e.positionFormat,wrapLongitude:e.wrapLongitude,resolution:this.context.viewport.resolution,fp64:this.use64bitPositions(),dataChanged:r.dataChanged,full3d:e._full3d}),this.setState({numInstances:t.instanceCount,startIndices:t.vertexStarts}),r.dataChanged||this.getAttributeManager().invalidateAll()}}_getModels(t){const{id:e,filled:n,extruded:r}=this.props;let i,o;if(n){const n=this.getShaders("top");n.defines.NON_INSTANCED_MODEL=1,i=new xP(t,{...n,id:"".concat(e,"-top"),drawMode:4,attributes:{vertexPositions:new Float32Array([0,1])},uniforms:{isWireframe:!1,isSideVertex:!1},vertexCount:0,isIndexed:!0})}return r&&(o=new xP(t,{...this.getShaders("side"),id:"".concat(e,"-side"),geometry:new kL({drawMode:1,vertexCount:4,attributes:{vertexPositions:{size:2,value:new Float32Array([1,0,0,0,0,1,1,1])}}}),instanceCount:0,isInstanced:1}),o.userData.excludeAttributes={indices:!0}),{models:[o,i].filter(Boolean),topModel:i,sideModel:o}}calculateIndices(t){const{polygonTesselator:e}=this.state;t.startIndices=e.indexStarts,t.value=e.get("indices")}calculatePositions(t){const{polygonTesselator:e}=this.state;t.startIndices=e.vertexStarts,t.value=e.get("positions")}calculateVertexValid(t){t.value=this.state.polygonTesselator.get("vertexValid")}}ww(wz,"defaultProps",bz),ww(wz,"layerName","SolidPolygonLayer");const Sz={circle:{type:GL,props:{filled:"filled",stroked:"stroked",lineWidthMaxPixels:"lineWidthMaxPixels",lineWidthMinPixels:"lineWidthMinPixels",lineWidthScale:"lineWidthScale",lineWidthUnits:"lineWidthUnits",pointRadiusMaxPixels:"radiusMaxPixels",pointRadiusMinPixels:"radiusMinPixels",pointRadiusScale:"radiusScale",pointRadiusUnits:"radiusUnits",pointAntialiasing:"antialiasing",pointBillboard:"billboard",getFillColor:"getFillColor",getLineColor:"getLineColor",getLineWidth:"getLineWidth",getPointRadius:"getRadius"}},icon:{type:UL,props:{iconAtlas:"iconAtlas",iconMapping:"iconMapping",iconSizeMaxPixels:"sizeMaxPixels",iconSizeMinPixels:"sizeMinPixels",iconSizeScale:"sizeScale",iconSizeUnits:"sizeUnits",iconAlphaCutoff:"alphaCutoff",iconBillboard:"billboard",getIcon:"getIcon",getIconAngle:"getAngle",getIconColor:"getColor",getIconPixelOffset:"getPixelOffset",getIconSize:"getSize"}},text:{type:yj,props:{textSizeMaxPixels:"sizeMaxPixels",textSizeMinPixels:"sizeMinPixels",textSizeScale:"sizeScale",textSizeUnits:"sizeUnits",textBackground:"background",textBackgroundPadding:"backgroundPadding",textFontFamily:"fontFamily",textFontWeight:"fontWeight",textLineHeight:"lineHeight",textMaxWidth:"maxWidth",textOutlineColor:"outlineColor",textOutlineWidth:"outlineWidth",textWordBreak:"wordBreak",textCharacterSet:"characterSet",textBillboard:"billboard",textFontSettings:"fontSettings",getText:"getText",getTextAngle:"getAngle",getTextColor:"getColor",getTextPixelOffset:"getPixelOffset",getTextSize:"getSize",getTextAnchor:"getTextAnchor",getTextAlignmentBaseline:"getAlignmentBaseline",getTextBackgroundColor:"getBackgroundColor",getTextBorderColor:"getBorderColor",getTextBorderWidth:"getBorderWidth"}}},Ez={type:Zj,props:{lineWidthUnits:"widthUnits",lineWidthScale:"widthScale",lineWidthMinPixels:"widthMinPixels",lineWidthMaxPixels:"widthMaxPixels",lineJointRounded:"jointRounded",lineCapRounded:"capRounded",lineMiterLimit:"miterLimit",lineBillboard:"billboard",getLineColor:"getColor",getLineWidth:"getWidth"}},Tz={type:wz,props:{extruded:"extruded",filled:"filled",wireframe:"wireframe",elevationScale:"elevationScale",material:"material",_full3d:"_full3d",getElevation:"getElevation",getFillColor:"getFillColor",getLineColor:"getLineColor"}};function Mz(t){let{type:e,props:n}=t;const r={};for(const i in n)r[i]=e.defaultProps[n[i]];return r}function Az(t,e){const{transitions:n,updateTriggers:r}=t.props,i={updateTriggers:{},transitions:n&&{getPosition:n.geometry}};for(const o in e){const a=e[o];let s=t.props[o];o.startsWith("get")&&(s=t.getSubLayerAccessor(s),i.updateTriggers[a]=r[o],n&&(i.transitions[a]=n[o])),i[a]=s}return i}function Cz(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r={pointFeatures:[],lineFeatures:[],polygonFeatures:[],polygonOutlineFeatures:[]},{startRow:i=0,endRow:o=t.length}=n;for(let a=i;a<o;a++){const n=t[a],{geometry:i}=n;if(i)if("GeometryCollection"===i.type){Gw.assert(Array.isArray(i.geometries),"GeoJSON does not have geometries array");const{geometries:t}=i;for(let i=0;i<t.length;i++){Pz(t[i],r,e,n,a)}}else Pz(i,r,e,n,a)}return r}function Pz(t,e,n,r,i){const{type:o,coordinates:a}=t,{pointFeatures:s,lineFeatures:l,polygonFeatures:c,polygonOutlineFeatures:u}=e;if(function(t,e){let n=kz[t];Gw.assert(n,"Unknown GeoJSON type ".concat(t));for(;e&&--n>0;)e=e[0];return e&&Number.isFinite(e[0])}(o,a))switch(o){case"Point":s.push(n({geometry:t},r,i));break;case"MultiPoint":a.forEach((t=>{s.push(n({geometry:{type:"Point",coordinates:t}},r,i))}));break;case"LineString":l.push(n({geometry:t},r,i));break;case"MultiLineString":a.forEach((t=>{l.push(n({geometry:{type:"LineString",coordinates:t}},r,i))}));break;case"Polygon":c.push(n({geometry:t},r,i)),a.forEach((t=>{u.push(n({geometry:{type:"LineString",coordinates:t}},r,i))}));break;case"MultiPolygon":a.forEach((t=>{c.push(n({geometry:{type:"Polygon",coordinates:t}},r,i)),t.forEach((t=>{u.push(n({geometry:{type:"LineString",coordinates:t}},r,i))}))}))}else Gw.warn("".concat(o," coordinates are malformed"))()}const kz={Point:1,MultiPoint:2,LineString:2,MultiLineString:3,Polygon:3,MultiPolygon:4};function Iz(t){return t.geometry.coordinates}function Oz(t,e){const n={points:{},lines:{},polygons:{},polygonsOutline:{}},{points:r,lines:i,polygons:o}=t,a=function(t,e){const n={points:null,lines:null,polygons:null};for(const r in n){const i=t[r].globalFeatureIds.value;n[r]=new Uint8ClampedArray(3*i.length);const o=[];for(let t=0;t<i.length;t++)e(i[t],o),n[r][3*t+0]=o[0],n[r][3*t+1]=o[1],n[r][3*t+2]=o[2]}return n}(t,e);return n.points.data={length:r.positions.value.length/r.positions.size,attributes:{...r.attributes,getPosition:r.positions,instancePickingColors:{size:3,value:a.points}},properties:r.properties,numericProps:r.numericProps,featureIds:r.featureIds},n.lines.data={length:i.pathIndices.value.length-1,startIndices:i.pathIndices.value,attributes:{...i.attributes,getPath:i.positions,instancePickingColors:{size:3,value:a.lines}},properties:i.properties,numericProps:i.numericProps,featureIds:i.featureIds},n.lines._pathType="open",n.polygons.data={length:o.polygonIndices.value.length-1,startIndices:o.polygonIndices.value,attributes:{...o.attributes,getPolygon:o.positions,pickingColors:{size:3,value:a.polygons}},properties:o.properties,numericProps:o.numericProps,featureIds:o.featureIds},n.polygons._normalize=!1,o.triangles&&(n.polygons.data.attributes.indices=o.triangles.value),n.polygonsOutline.data={length:o.primitivePolygonIndices.value.length-1,startIndices:o.primitivePolygonIndices.value,attributes:{...o.attributes,getPath:o.positions,instancePickingColors:{size:3,value:a.polygons}},properties:o.properties,numericProps:o.numericProps,featureIds:o.featureIds},n.polygonsOutline._pathType="open",n}const Lz=["points","linestrings","polygons"],jz={...Mz(Sz.circle),...Mz(Sz.icon),...Mz(Sz.text),...Mz(Ez),...Mz(Tz),stroked:!0,filled:!0,extruded:!1,wireframe:!1,_full3d:!1,iconAtlas:{type:"object",value:null},iconMapping:{type:"object",value:{}},getIcon:{type:"accessor",value:t=>t.properties.icon},getText:{type:"accessor",value:t=>t.properties.text},pointType:"circle",getRadius:{deprecatedFor:"getPointRadius"}};class zz extends pL{initializeState(){this.state={layerProps:{},features:{}}}updateState(t){let{props:e,changeFlags:n}=t;if(!n.dataChanged)return;const{data:r}=this.props,i=r&&"points"in r&&"polygons"in r&&"lines"in r;this.setState({binary:i}),i?this._updateStateBinary({props:e,changeFlags:n}):this._updateStateJSON({props:e,changeFlags:n})}_updateStateBinary(t){let{props:e,changeFlags:n}=t;const r=Oz(e.data,this.encodePickingColor);this.setState({layerProps:r})}_updateStateJSON(t){let{props:e,changeFlags:n}=t;const r=function(t){if(Array.isArray(t))return t;switch(Gw.assert(t.type,"GeoJSON does not have type"),t.type){case"Feature":return[t];case"FeatureCollection":return Gw.assert(Array.isArray(t.features),"GeoJSON does not have features array"),t.features;default:return[{geometry:t}]}}(e.data),i=this.getSubLayerRow.bind(this);let o={};const a={};if(Array.isArray(n.dataChanged)){const t=this.state.features;for(const e in t)o[e]=t[e].slice(),a[e]=[];for(const e of n.dataChanged){const n=Cz(r,i,e);for(const r in t)a[r].push(mL({data:o[r],getIndex:t=>t.__source.index,dataRange:e,replace:n[r]}))}}else o=Cz(r,i);const s=function(t,e){const n={points:{},lines:{},polygons:{},polygonsOutline:{}},{pointFeatures:r,lineFeatures:i,polygonFeatures:o,polygonOutlineFeatures:a}=t;return n.points.data=r,n.points._dataDiff=e.pointFeatures&&(()=>e.pointFeatures),n.points.getPosition=Iz,n.lines.data=i,n.lines._dataDiff=e.lineFeatures&&(()=>e.lineFeatures),n.lines.getPath=Iz,n.polygons.data=o,n.polygons._dataDiff=e.polygonFeatures&&(()=>e.polygonFeatures),n.polygons.getPolygon=Iz,n.polygonsOutline.data=a,n.polygonsOutline._dataDiff=e.polygonOutlineFeatures&&(()=>e.polygonOutlineFeatures),n.polygonsOutline.getPath=Iz,n}(o,a);this.setState({features:o,featuresDiff:a,layerProps:s})}getPickingInfo(t){const e=super.getPickingInfo(t),{index:n,sourceLayer:r}=e;return e.featureType=Lz.find((t=>r.id.startsWith("".concat(this.id,"-").concat(t,"-")))),n>=0&&r.id.startsWith("".concat(this.id,"-points-text"))&&this.state.binary&&(e.index=this.props.data.points.globalFeatureIds.value[n]),e}_updateAutoHighlight(t){const e="".concat(this.id,"-points-"),n="points"===t.featureType;for(const r of this.getSubLayers())r.id.startsWith(e)===n&&r.updateAutoHighlight(t)}_renderPolygonLayer(){const{extruded:t,wireframe:e}=this.props,{layerProps:n}=this.state,r="polygons-fill",i=this.shouldRenderSubLayer(r,n.polygons.data)&&this.getSubLayerClass(r,Tz.type);if(i){const o=Az(this,Tz.props),a=t&&e;return a||delete o.getLineColor,o.updateTriggers.lineColors=a,new i(o,this.getSubLayerProps({id:r,updateTriggers:o.updateTriggers}),n.polygons)}return null}_renderLineLayers(){const{extruded:t,stroked:e}=this.props,{layerProps:n}=this.state,r="polygons-stroke",i="linestrings",o=!t&&e&&this.shouldRenderSubLayer(r,n.polygonsOutline.data)&&this.getSubLayerClass(r,Ez.type),a=this.shouldRenderSubLayer(i,n.lines.data)&&this.getSubLayerClass(i,Ez.type);if(o||a){const t=Az(this,Ez.props);return[o&&new o(t,this.getSubLayerProps({id:r,updateTriggers:t.updateTriggers}),n.polygonsOutline),a&&new a(t,this.getSubLayerProps({id:i,updateTriggers:t.updateTriggers}),n.lines)]}return null}_renderPointLayers(){const{pointType:t}=this.props,{layerProps:e,binary:n}=this.state;let{highlightedObjectIndex:r}=this.props;!n&&Number.isFinite(r)&&(r=e.points.data.findIndex((t=>t.__source.index===r)));const i=new Set(t.split("+")),o=[];for(const a of i){const t="points-".concat(a),i=Sz[a],s=i&&this.shouldRenderSubLayer(t,e.points.data)&&this.getSubLayerClass(t,i.type);if(s){const l=Az(this,i.props);let c=e.points;if("text"===a&&n){const{instancePickingColors:t,...e}=c.data.attributes;c={...c,data:{...c.data,attributes:e}}}o.push(new s(l,this.getSubLayerProps({id:t,updateTriggers:l.updateTriggers,highlightedObjectIndex:r}),c))}}return o}renderLayers(){const{extruded:t}=this.props,e=this._renderPolygonLayer();return[!t&&e,this._renderLineLayers(),this._renderPointLayers(),t&&e]}getSubLayerAccessor(t){const{binary:e}=this.state;return e&&"function"===typeof t?(e,n)=>{const{data:r,index:i}=n,o=function(t,e){if(!t)return null;const n="startIndices"in t?t.startIndices[e]:e,r=t.featureIds.value[n];return-1!==n?function(t,e,n){const r={properties:{...t.properties[e]}};for(const i in t.numericProps)r.properties[i]=t.numericProps[i].value[n];return r}(t,r,n):null}(r,i);return t(o,n)}:super.getSubLayerAccessor(t)}}ww(zz,"layerName","GeoJsonLayer"),ww(zz,"defaultProps",jz);var Rz={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},Dz=r.createContext&&r.createContext(Rz),Bz=function(){return Bz=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},Bz.apply(this,arguments)},Fz=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n};function Nz(t){return t&&t.map((function(t,e){return r.createElement(t.tag,Bz({key:e},t.attr),Nz(t.child))}))}function Uz(t){return function(e){return r.createElement(Vz,Bz({attr:Bz({},t.attr)},e),Nz(t.child))}}function Vz(t){var e=function(e){var n,i=t.attr,o=t.size,a=t.title,s=Fz(t,["attr","size","title"]),l=o||e.size||"1em";return e.className&&(n=e.className),t.className&&(n=(n?n+" ":"")+t.className),r.createElement("svg",Bz({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},e.attr,i,s,{className:n,style:Bz(Bz({color:t.color||e.color},e.style),t.style),height:l,width:l,xmlns:"http://www.w3.org/2000/svg"}),a&&r.createElement("title",null,a),t.children)};return void 0!==Dz?r.createElement(Dz.Consumer,null,(function(t){return e(t)})):e(Rz)}function Wz(t){return Uz({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"}},{tag:"path",attr:{d:"M6 19h4V5H6v14zm8-14v14h4V5h-4z"}}]})(t)}function Gz(t){return Uz({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"}},{tag:"path",attr:{d:"M8 5v14l11-7z"}}]})(t)}function qz(t){return Uz({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"}},{tag:"path",attr:{d:"M20 4H4c-1.1 0-1.99.9-1.99 2L2 18c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm0 4l-8 5-8-5V6l8 5 8-5v2z"}}]})(t)}function Hz(t){return Uz({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"}},{tag:"path",attr:{d:"M5 20h14v-2H5v2zM19 9h-4V3H9v6H5l7 7 7-7z"}}]})(t)}function Zz(t){return Uz({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"}},{tag:"path",attr:{d:"M16 11c1.66 0 2.99-1.34 2.99-3S17.66 5 16 5c-1.66 0-3 1.34-3 3s1.34 3 3 3zm-8 0c1.66 0 2.99-1.34 2.99-3S9.66 5 8 5C6.34 5 5 6.34 5 8s1.34 3 3 3zm0 2c-2.33 0-7 1.17-7 3.5V19h14v-2.5c0-2.33-4.67-3.5-7-3.5zm8 0c-.29 0-.62.02-.97.05 1.16.84 1.97 1.97 1.97 3.45V19h6v-2.5c0-2.33-4.67-3.5-7-3.5z"}}]})(t)}function Xz(t){return Uz({tag:"svg",attr:{viewBox:"0 0 192 512"},child:[{tag:"path",attr:{d:"M20 424.229h20V279.771H20c-11.046 0-20-8.954-20-20V212c0-11.046 8.954-20 20-20h112c11.046 0 20 8.954 20 20v212.229h20c11.046 0 20 8.954 20 20V492c0 11.046-8.954 20-20 20H20c-11.046 0-20-8.954-20-20v-47.771c0-11.046 8.954-20 20-20zM96 0C56.235 0 24 32.235 24 72s32.235 72 72 72 72-32.235 72-72S135.764 0 96 0z"}}]})(t)}var Yz=wi((function(t,e){const n=Wi("Heading",t),{className:r,...i}=Mn(t);return(0,Si.jsx)(xi.h2,{ref:e,className:kt("chakra-heading",t.className),...i,__css:n})}));Yz.displayName="Heading";var Kz=wi((function(t,e){const n=Wi("Text",t),{className:r,align:i,decoration:o,casing:a,...s}=Mn(t),l=function(t){const e=Object.assign({},t);for(let n in e)void 0===e[n]&&delete e[n];return e}({textAlign:t.align,textDecoration:t.decoration,textTransform:t.casing});return(0,Si.jsx)(xi.p,{ref:e,className:kt("chakra-text",t.className),...l,...s,__css:n})}));function $z(t,e,n){var r;if("string"===typeof t){let i=document;e&&(bc(Boolean(e.current),"Scope provided, but no element detected."),i=e.current),n?(null!==(r=n[t])&&void 0!==r||(n[t]=i.querySelectorAll(t)),t=n[t]):t=i.querySelectorAll(t)}else t instanceof Element&&(t=[t]);return Array.from(t||[])}Kz.displayName="Text";const Jz={some:0,all:1};function Qz(t){let{root:e,margin:n,amount:i,once:o=!1}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const[a,s]=(0,r.useState)(!1);return(0,r.useEffect)((()=>{if(!t.current||o&&a)return;const r={root:e&&e.current||void 0,margin:n,amount:i};return function(t,e){let{root:n,margin:r,amount:i="some"}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const o=$z(t),a=new WeakMap,s=new IntersectionObserver((t=>{t.forEach((t=>{const n=a.get(t.target);if(t.isIntersecting!==Boolean(n))if(t.isIntersecting){const n=e(t);"function"===typeof n?a.set(t.target,n):s.unobserve(t.target)}else n&&(n(t),a.delete(t.target))}))}),{root:n,rootMargin:r,threshold:"number"===typeof i?i:Jz[i]});return o.forEach((t=>s.observe(t))),()=>s.disconnect()}(t.current,(()=>(s(!0),o?void 0:()=>s(!1))),r)}),[e,t,n,o,i]),a}const tR=t=>{let{children:e,opacity:n=.5,duration:i=.5,x:o=0,y:a=0}=t;const s=(0,r.useRef)(null),l=Qz(s)?{opacity:1,x:0,y:0,transition:{duration:i}}:{};return(0,Si.jsx)(bp.div,{ref:s,initial:{opacity:n,x:o,y:a},animate:l,children:e})},eR=t=>{let{children:e,color:n}=t;const[r]=ki("(max-width: 800px)");return(0,Si.jsx)(tR,{duration:.5,x:-5,opacity:.5,children:(0,Si.jsx)(Yz,{className:"response",color:"".concat(n,".600"),mb:"2dvh",mt:"1dvh",style:{fontSize:r?"0.9rem":"min(2dvh, 1.2dvw)"},children:e})})},nR=t=>{let{children:e,color:n}=t;const[r]=ki("(max-width: 800px)");return(0,Si.jsx)(tR,{duration:.5,y:-5,opacity:.5,children:(0,Si.jsx)(Kz,{as:"p",className:"context",color:"".concat(n,".600"),style:{fontSize:r?"0.8rem":"min(1.8dvh, 1.1dvw)",marginTop:"2dvh"},children:e})})},rR=t=>{let{id:e,children:n,color:r}=t;return(0,Si.jsx)("section",{className:"cardSection",id:e,children:(0,Si.jsx)(Ei,{className:"card",borderColor:"".concat(r,".500"),children:(0,Si.jsx)("div",{style:{position:"relative",height:"100%",width:"100%"},children:n})})})};var iR=n(7424),oR=n.n(iR),aR=n(9686),sR=n.n(aR);function lR(t){var e,n,r="";if("string"==typeof t||"number"==typeof t)r+=t;else if("object"==typeof t)if(Array.isArray(t)){var i=t.length;for(e=0;e<i;e++)t[e]&&(n=lR(t[e]))&&(r&&(r+=" "),r+=n)}else for(n in t)t[n]&&(r&&(r+=" "),r+=n);return r}const cR=function(){for(var t,e,n=0,r="",i=arguments.length;n<i;n++)(t=arguments[n])&&(e=lR(t))&&(r&&(r+=" "),r+=e);return r};var uR=n(620),hR=n.n(uR),dR=n(5268),fR=n.n(dR),pR=n(3097),mR=n.n(pR),gR=n(9160),yR=n.n(gR),vR=function(t){return 0===t?0:t>0?1:-1},_R=function(t){return hR()(t)&&t.indexOf("%")===t.length-1},bR=function(t){return yR()(t)&&!fR()(t)},xR=function(t){return bR(t)||hR()(t)},wR=0,SR=function(t){var e=++wR;return"".concat(t||"").concat(e)},ER=function(t,e){var n,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(!bR(t)&&!hR()(t))return r;if(_R(t)){var o=t.indexOf("%");n=e*parseFloat(t.slice(0,o))/100}else n=+t;return fR()(n)&&(n=r),i&&n>e&&(n=e),n},TR=function(t){if(!t)return null;var e=Object.keys(t);return e&&e.length?t[e[0]]:null},MR=function(t,e){return bR(t)&&bR(e)?function(n){return t+n*(e-t)}:function(){return e}};function AR(t,e,n){return t&&t.length?t.find((function(t){return t&&("function"===typeof e?e(t):mR()(t,e))===n})):null}function CR(t){return CR="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},CR(t)}function PR(){return PR=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},PR.apply(this,arguments)}function kR(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,i,o,a,s=[],l=!0,c=!1;try{if(o=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=o.call(n)).done)&&(s.push(r.value),s.length!==e);l=!0);}catch(t){c=!0,i=t}finally{try{if(!l&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw i}}return s}}(t,e)||function(t,e){if(!t)return;if("string"===typeof t)return IR(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return IR(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function IR(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function OR(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function LR(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?OR(Object(n),!0).forEach((function(e){jR(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):OR(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function jR(t,e,n){return e=function(t){var e=function(t,e){if("object"!=CR(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=CR(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==CR(e)?e:String(e)}(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function zR(t){return Array.isArray(t)&&xR(t[0])&&xR(t[1])?t.join(" ~ "):t}var RR=function(t){var e=t.separator,n=void 0===e?" : ":e,i=t.contentStyle,o=void 0===i?{}:i,a=t.itemStyle,s=void 0===a?{}:a,l=t.labelStyle,c=void 0===l?{}:l,u=t.payload,h=t.formatter,d=t.itemSorter,f=t.wrapperClassName,p=t.labelClassName,m=t.label,g=t.labelFormatter,y=t.accessibilityLayer,v=void 0!==y&&y,_=LR({margin:0,padding:10,backgroundColor:"#fff",border:"1px solid #ccc",whiteSpace:"nowrap"},o),b=LR({margin:0},c),x=!sR()(m),w=x?m:"",S=cR("recharts-default-tooltip",f),E=cR("recharts-tooltip-label",p);x&&g&&void 0!==u&&null!==u&&(w=g(m,u));var T=v?{role:"status","aria-live":"assertive"}:{};return r.createElement("div",PR({className:S,style:_},T),r.createElement("p",{className:E,style:b},r.isValidElement(w)?w:"".concat(w)),function(){if(u&&u.length){var t=(d?oR()(u,d):u).map((function(t,e){if("none"===t.type)return null;var i=LR({display:"block",paddingTop:4,paddingBottom:4,color:t.color||"#000"},s),o=t.formatter||h||zR,a=t.value,l=t.name,c=a,d=l;if(o&&null!=c&&null!=d){var f=o(a,l,t,e,u);if(Array.isArray(f)){var p=kR(f,2);c=p[0],d=p[1]}else c=f}return r.createElement("li",{className:"recharts-tooltip-item",key:"tooltip-item-".concat(e),style:i},xR(d)?r.createElement("span",{className:"recharts-tooltip-item-name"},d):null,xR(d)?r.createElement("span",{className:"recharts-tooltip-item-separator"},n):null,r.createElement("span",{className:"recharts-tooltip-item-value"},c),r.createElement("span",{className:"recharts-tooltip-item-unit"},t.unit||""))}));return r.createElement("ul",{className:"recharts-tooltip-item-list",style:{padding:0,margin:0}},t)}return null}())},DR=n(9889),BR=n.n(DR),FR=n(2086),NR=function(t,e){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i]},UR=n(1629),VR=n.n(UR),WR=n(6686),GR=n.n(WR);function qR(t,e){for(var n in t)if({}.hasOwnProperty.call(t,n)&&(!{}.hasOwnProperty.call(e,n)||t[n]!==e[n]))return!1;for(var r in e)if({}.hasOwnProperty.call(e,r)&&!{}.hasOwnProperty.call(t,r))return!1;return!0}function HR(t){return HR="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},HR(t)}var ZR=["aria-activedescendant","aria-atomic","aria-autocomplete","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colspan","aria-controls","aria-current","aria-describedby","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-modal","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext","className","color","height","id","lang","max","media","method","min","name","style","target","width","role","tabIndex","accentHeight","accumulate","additive","alignmentBaseline","allowReorder","alphabetic","amplitude","arabicForm","ascent","attributeName","attributeType","autoReverse","azimuth","baseFrequency","baselineShift","baseProfile","bbox","begin","bias","by","calcMode","capHeight","clip","clipPath","clipPathUnits","clipRule","colorInterpolation","colorInterpolationFilters","colorProfile","colorRendering","contentScriptType","contentStyleType","cursor","cx","cy","d","decelerate","descent","diffuseConstant","direction","display","divisor","dominantBaseline","dur","dx","dy","edgeMode","elevation","enableBackground","end","exponent","externalResourcesRequired","fill","fillOpacity","fillRule","filter","filterRes","filterUnits","floodColor","floodOpacity","focusable","fontFamily","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontVariant","fontWeight","format","from","fx","fy","g1","g2","glyphName","glyphOrientationHorizontal","glyphOrientationVertical","glyphRef","gradientTransform","gradientUnits","hanging","horizAdvX","horizOriginX","href","ideographic","imageRendering","in2","in","intercept","k1","k2","k3","k4","k","kernelMatrix","kernelUnitLength","kerning","keyPoints","keySplines","keyTimes","lengthAdjust","letterSpacing","lightingColor","limitingConeAngle","local","markerEnd","markerHeight","markerMid","markerStart","markerUnits","markerWidth","mask","maskContentUnits","maskUnits","mathematical","mode","numOctaves","offset","opacity","operator","order","orient","orientation","origin","overflow","overlinePosition","overlineThickness","paintOrder","panose1","pathLength","patternContentUnits","patternTransform","patternUnits","pointerEvents","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","r","radius","refX","refY","renderingIntent","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","result","rotate","rx","ry","seed","shapeRendering","slope","spacing","specularConstant","specularExponent","speed","spreadMethod","startOffset","stdDeviation","stemh","stemv","stitchTiles","stopColor","stopOpacity","strikethroughPosition","strikethroughThickness","string","stroke","strokeDasharray","strokeDashoffset","strokeLinecap","strokeLinejoin","strokeMiterlimit","strokeOpacity","strokeWidth","surfaceScale","systemLanguage","tableValues","targetX","targetY","textAnchor","textDecoration","textLength","textRendering","to","transform","u1","u2","underlinePosition","underlineThickness","unicode","unicodeBidi","unicodeRange","unitsPerEm","vAlphabetic","values","vectorEffect","version","vertAdvY","vertOriginX","vertOriginY","vHanging","vIdeographic","viewTarget","visibility","vMathematical","widths","wordSpacing","writingMode","x1","x2","x","xChannelSelector","xHeight","xlinkActuate","xlinkArcrole","xlinkHref","xlinkRole","xlinkShow","xlinkTitle","xlinkType","xmlBase","xmlLang","xmlns","xmlnsXlink","xmlSpace","y1","y2","y","yChannelSelector","z","zoomAndPan","ref","key","angle"],XR=["points","pathLength"],YR={svg:["viewBox","children"],polygon:XR,polyline:XR},KR=["dangerouslySetInnerHTML","onCopy","onCopyCapture","onCut","onCutCapture","onPaste","onPasteCapture","onCompositionEnd","onCompositionEndCapture","onCompositionStart","onCompositionStartCapture","onCompositionUpdate","onCompositionUpdateCapture","onFocus","onFocusCapture","onBlur","onBlurCapture","onChange","onChangeCapture","onBeforeInput","onBeforeInputCapture","onInput","onInputCapture","onReset","onResetCapture","onSubmit","onSubmitCapture","onInvalid","onInvalidCapture","onLoad","onLoadCapture","onError","onErrorCapture","onKeyDown","onKeyDownCapture","onKeyPress","onKeyPressCapture","onKeyUp","onKeyUpCapture","onAbort","onAbortCapture","onCanPlay","onCanPlayCapture","onCanPlayThrough","onCanPlayThroughCapture","onDurationChange","onDurationChangeCapture","onEmptied","onEmptiedCapture","onEncrypted","onEncryptedCapture","onEnded","onEndedCapture","onLoadedData","onLoadedDataCapture","onLoadedMetadata","onLoadedMetadataCapture","onLoadStart","onLoadStartCapture","onPause","onPauseCapture","onPlay","onPlayCapture","onPlaying","onPlayingCapture","onProgress","onProgressCapture","onRateChange","onRateChangeCapture","onSeeked","onSeekedCapture","onSeeking","onSeekingCapture","onStalled","onStalledCapture","onSuspend","onSuspendCapture","onTimeUpdate","onTimeUpdateCapture","onVolumeChange","onVolumeChangeCapture","onWaiting","onWaitingCapture","onAuxClick","onAuxClickCapture","onClick","onClickCapture","onContextMenu","onContextMenuCapture","onDoubleClick","onDoubleClickCapture","onDrag","onDragCapture","onDragEnd","onDragEndCapture","onDragEnter","onDragEnterCapture","onDragExit","onDragExitCapture","onDragLeave","onDragLeaveCapture","onDragOver","onDragOverCapture","onDragStart","onDragStartCapture","onDrop","onDropCapture","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseMoveCapture","onMouseOut","onMouseOutCapture","onMouseOver","onMouseOverCapture","onMouseUp","onMouseUpCapture","onSelect","onSelectCapture","onTouchCancel","onTouchCancelCapture","onTouchEnd","onTouchEndCapture","onTouchMove","onTouchMoveCapture","onTouchStart","onTouchStartCapture","onPointerDown","onPointerDownCapture","onPointerMove","onPointerMoveCapture","onPointerUp","onPointerUpCapture","onPointerCancel","onPointerCancelCapture","onPointerEnter","onPointerEnterCapture","onPointerLeave","onPointerLeaveCapture","onPointerOver","onPointerOverCapture","onPointerOut","onPointerOutCapture","onGotPointerCapture","onGotPointerCaptureCapture","onLostPointerCapture","onLostPointerCaptureCapture","onScroll","onScrollCapture","onWheel","onWheelCapture","onAnimationStart","onAnimationStartCapture","onAnimationEnd","onAnimationEndCapture","onAnimationIteration","onAnimationIterationCapture","onTransitionEnd","onTransitionEndCapture"],$R=function(t,e){if(!t||"function"===typeof t||"boolean"===typeof t)return null;var n=t;if((0,r.isValidElement)(t)&&(n=t.props),!GR()(n))return null;var i={};return Object.keys(n).forEach((function(t){KR.includes(t)&&(i[t]=e||function(e){return n[t](n,e)})})),i},JR=function(t,e,n){if(!GR()(t)||"object"!==HR(t))return null;var r=null;return Object.keys(t).forEach((function(i){var o=t[i];KR.includes(i)&&"function"===typeof o&&(r||(r={}),r[i]=function(t,e,n){return function(r){return t(e,n,r),null}}(o,e,n))})),r},QR=["children"],tD=["children"];function eD(t,e){if(null==t)return{};var n,r,i=function(t,e){if(null==t)return{};var n,r,i={},o=Object.keys(t);for(r=0;r<o.length;r++)n=o[r],e.indexOf(n)>=0||(i[n]=t[n]);return i}(t,e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(r=0;r<o.length;r++)n=o[r],e.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function nD(t){return nD="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},nD(t)}var rD={click:"onClick",mousedown:"onMouseDown",mouseup:"onMouseUp",mouseover:"onMouseOver",mousemove:"onMouseMove",mouseout:"onMouseOut",mouseenter:"onMouseEnter",mouseleave:"onMouseLeave",touchcancel:"onTouchCancel",touchend:"onTouchEnd",touchmove:"onTouchMove",touchstart:"onTouchStart"},iD=function(t){return"string"===typeof t?t:t?t.displayName||t.name||"Component":""},oD=null,aD=null,sD=function t(e){if(e===oD&&Array.isArray(aD))return aD;var n=[];return r.Children.forEach(e,(function(e){sR()(e)||((0,FR.isFragment)(e)?n=n.concat(t(e.props.children)):n.push(e))})),aD=n,oD=e,n};function lD(t,e){var n=[],r=[];return r=Array.isArray(e)?e.map((function(t){return iD(t)})):[iD(e)],sD(t).forEach((function(t){var e=mR()(t,"type.displayName")||mR()(t,"type.name");-1!==r.indexOf(e)&&n.push(t)})),n}function cD(t,e){var n=lD(t,e);return n&&n[0]}var uD=function(t){if(!t||!t.props)return!1;var e=t.props,n=e.width,r=e.height;return!(!bR(n)||n<=0||!bR(r)||r<=0)},hD=["a","altGlyph","altGlyphDef","altGlyphItem","animate","animateColor","animateMotion","animateTransform","circle","clipPath","color-profile","cursor","defs","desc","ellipse","feBlend","feColormatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","filter","font","font-face","font-face-format","font-face-name","font-face-url","foreignObject","g","glyph","glyphRef","hkern","image","line","lineGradient","marker","mask","metadata","missing-glyph","mpath","path","pattern","polygon","polyline","radialGradient","rect","script","set","stop","style","svg","switch","symbol","text","textPath","title","tref","tspan","use","view","vkern"],dD=function(t){return t&&t.type&&hR()(t.type)&&hD.indexOf(t.type)>=0},fD=function(t,e,n){if(!t||"function"===typeof t||"boolean"===typeof t)return null;var i=t;if((0,r.isValidElement)(t)&&(i=t.props),!GR()(i))return null;var o={};return Object.keys(i).forEach((function(t){var r;(function(t,e,n,r){var i,o=null!==(i=null===YR||void 0===YR?void 0:YR[r])&&void 0!==i?i:[];return!VR()(t)&&(r&&o.includes(e)||ZR.includes(e))||n&&KR.includes(e)})(null===(r=i)||void 0===r?void 0:r[t],t,e,n)&&(o[t]=i[t])})),o},pD=function t(e,n){if(e===n)return!0;var i=r.Children.count(e);if(i!==r.Children.count(n))return!1;if(0===i)return!0;if(1===i)return mD(Array.isArray(e)?e[0]:e,Array.isArray(n)?n[0]:n);for(var o=0;o<i;o++){var a=e[o],s=n[o];if(Array.isArray(a)||Array.isArray(s)){if(!t(a,s))return!1}else if(!mD(a,s))return!1}return!0},mD=function(t,e){if(sR()(t)&&sR()(e))return!0;if(!sR()(t)&&!sR()(e)){var n=t.props||{},r=n.children,i=eD(n,QR),o=e.props||{},a=o.children,s=eD(o,tD);return r&&a?qR(i,s)&&pD(r,a):!r&&!a&&qR(i,s)}return!1},gD=function(t,e){var n=[],r={};return sD(t).forEach((function(t,i){if(dD(t))n.push(t);else if(t){var o=iD(t.type),a=e[o]||{},s=a.handler,l=a.once;if(s&&(!l||!r[o])){var c=s(t,o,i);n.push(c),r[o]=!0}}})),n},yD=function(t,e){return sD(e).indexOf(t)};function vD(t){return vD="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},vD(t)}function _D(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function bD(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?_D(Object(n),!0).forEach((function(e){xD(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):_D(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function xD(t,e,n){return e=function(t){var e=function(t,e){if("object"!=vD(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=vD(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==vD(e)?e:String(e)}(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function wD(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,i,o,a,s=[],l=!0,c=!1;try{if(o=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=o.call(n)).done)&&(s.push(r.value),s.length!==e);l=!0);}catch(t){c=!0,i=t}finally{try{if(!l&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw i}}return s}}(t,e)||function(t,e){if(!t)return;if("string"===typeof t)return SD(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return SD(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function SD(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var ED=(0,r.forwardRef)((function(t,e){var n=t.aspect,i=t.initialDimension,o=void 0===i?{width:-1,height:-1}:i,a=t.width,s=void 0===a?"100%":a,l=t.height,c=void 0===l?"100%":l,u=t.minWidth,h=void 0===u?0:u,d=t.minHeight,f=t.maxHeight,p=t.children,m=t.debounce,g=void 0===m?0:m,y=t.id,v=t.className,_=t.onResize,b=t.style,x=void 0===b?{}:b,w=(0,r.useRef)(null),S=(0,r.useRef)();S.current=_,(0,r.useImperativeHandle)(e,(function(){return Object.defineProperty(w.current,"current",{get:function(){return console.warn("The usage of ref.current.current is deprecated and will no longer be supported."),w.current},configurable:!0})}));var E=wD((0,r.useState)({containerWidth:o.width,containerHeight:o.height}),2),T=E[0],M=E[1],A=(0,r.useCallback)((function(t,e){M((function(n){var r=Math.round(t),i=Math.round(e);return n.containerWidth===r&&n.containerHeight===i?n:{containerWidth:r,containerHeight:i}}))}),[]);(0,r.useEffect)((function(){var t=function(t){var e,n=t[0].contentRect,r=n.width,i=n.height;A(r,i),null===(e=S.current)||void 0===e||e.call(S,r,i)};g>0&&(t=BR()(t,g,{trailing:!0,leading:!1}));var e=new ResizeObserver(t),n=w.current.getBoundingClientRect(),r=n.width,i=n.height;return A(r,i),e.observe(w.current),function(){e.disconnect()}}),[A,g]);var C=(0,r.useMemo)((function(){var t=T.containerWidth,e=T.containerHeight;if(t<0||e<0)return null;NR(_R(s)||_R(c),"The width(%s) and height(%s) are both fixed numbers,\n       maybe you don't need to use a ResponsiveContainer.",s,c),NR(!n||n>0,"The aspect(%s) must be greater than zero.",n);var i=_R(s)?t:s,o=_R(c)?e:c;n&&n>0&&(i?o=i/n:o&&(i=o*n),f&&o>f&&(o=f)),NR(i>0||o>0,"The width(%s) and height(%s) of chart should be greater than 0,\n       please check the style of container, or the props width(%s) and height(%s),\n       or add a minWidth(%s) or minHeight(%s) or use aspect(%s) to control the\n       height and width.",i,o,s,c,h,d,n);var a=!Array.isArray(p)&&(0,FR.isElement)(p)&&iD(p.type).endsWith("Chart");return r.Children.map(p,(function(t){return(0,FR.isElement)(t)?(0,r.cloneElement)(t,bD({width:i,height:o},a?{style:bD({height:"100%",width:"100%",maxHeight:o,maxWidth:i},t.props.style)}:{})):t}))}),[n,p,c,f,d,h,T,s]);return r.createElement("div",{id:y?"".concat(y):void 0,className:cR("recharts-responsive-container",v),style:bD(bD({},x),{},{width:s,height:c,minWidth:h,minHeight:d,maxHeight:f}),ref:w},C)})),TD=n(6604),MD=n.n(TD),AD=!0,CD="Invariant failed";function PD(t,e){if(!t){if(AD)throw new Error(CD);var n="function"===typeof e?e():e,r=n?"".concat(CD,": ").concat(n):CD;throw new Error(r)}}var kD=["children","width","height","viewBox","className","style","title","desc"];function ID(){return ID=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},ID.apply(this,arguments)}function OD(t,e){if(null==t)return{};var n,r,i=function(t,e){if(null==t)return{};var n,r,i={},o=Object.keys(t);for(r=0;r<o.length;r++)n=o[r],e.indexOf(n)>=0||(i[n]=t[n]);return i}(t,e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(r=0;r<o.length;r++)n=o[r],e.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function LD(t){var e=t.children,n=t.width,i=t.height,o=t.viewBox,a=t.className,s=t.style,l=t.title,c=t.desc,u=OD(t,kD),h=o||{width:n,height:i,x:0,y:0},d=cR("recharts-surface",a);return r.createElement("svg",ID({},fD(u,!0,"svg"),{className:d,width:n,height:i,style:s,viewBox:"".concat(h.x," ").concat(h.y," ").concat(h.width," ").concat(h.height)}),r.createElement("title",null,l),r.createElement("desc",null,c),e)}var jD=["children","className"];function zD(){return zD=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},zD.apply(this,arguments)}function RD(t,e){if(null==t)return{};var n,r,i=function(t,e){if(null==t)return{};var n,r,i={},o=Object.keys(t);for(r=0;r<o.length;r++)n=o[r],e.indexOf(n)>=0||(i[n]=t[n]);return i}(t,e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(r=0;r<o.length;r++)n=o[r],e.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}var DD=r.forwardRef((function(t,e){var n=t.children,i=t.className,o=RD(t,jD),a=cR("recharts-layer",i);return r.createElement("g",zD({className:a},fD(o,!0),{ref:e}),n)}));function BD(t){return BD="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},BD(t)}function FD(t,e,n){return e=function(t){var e=function(t,e){if("object"!=BD(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=BD(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==BD(e)?e:String(e)}(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var ND="recharts-tooltip-wrapper",UD={visibility:"hidden"};function VD(t){var e=t.coordinate,n=t.translateX,r=t.translateY;return cR(ND,FD(FD(FD(FD({},"".concat(ND,"-right"),bR(n)&&e&&bR(e.x)&&n>=e.x),"".concat(ND,"-left"),bR(n)&&e&&bR(e.x)&&n<e.x),"".concat(ND,"-bottom"),bR(r)&&e&&bR(e.y)&&r>=e.y),"".concat(ND,"-top"),bR(r)&&e&&bR(e.y)&&r<e.y))}function WD(t){var e=t.allowEscapeViewBox,n=t.coordinate,r=t.key,i=t.offsetTopLeft,o=t.position,a=t.reverseDirection,s=t.tooltipDimension,l=t.viewBox,c=t.viewBoxDimension;if(o&&bR(o[r]))return o[r];var u=n[r]-s-i,h=n[r]+i;return e[r]?a[r]?u:h:a[r]?u<l[r]?Math.max(h,l[r]):Math.max(u,l[r]):h+s>l[r]+c?Math.max(u,l[r]):Math.max(h,l[r])}function GD(t){return GD="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},GD(t)}function qD(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function HD(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?qD(Object(n),!0).forEach((function(e){QD(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):qD(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function ZD(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,tB(r.key),r)}}function XD(t,e,n){return e=KD(e),function(t,e){if(e&&("object"===GD(e)||"function"===typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return $D(t)}(t,YD()?Reflect.construct(e,n||[],KD(t).constructor):e.apply(t,n))}function YD(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(YD=function(){return!!t})()}function KD(t){return KD=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},KD(t)}function $D(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function JD(t,e){return JD=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},JD(t,e)}function QD(t,e,n){return(e=tB(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function tB(t){var e=function(t,e){if("object"!=GD(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=GD(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==GD(e)?e:String(e)}var eB=function(t){function e(){var t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return QD($D(t=XD(this,e,[].concat(r))),"state",{dismissed:!1,dismissedAtCoordinate:{x:0,y:0},lastBoundingBox:{width:-1,height:-1}}),QD($D(t),"handleKeyDown",(function(e){var n,r,i,o;"Escape"===e.key&&t.setState({dismissed:!0,dismissedAtCoordinate:{x:null!==(n=null===(r=t.props.coordinate)||void 0===r?void 0:r.x)&&void 0!==n?n:0,y:null!==(i=null===(o=t.props.coordinate)||void 0===o?void 0:o.y)&&void 0!==i?i:0}})})),t}var n,i,o;return function(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&JD(t,e)}(e,t),n=e,i=[{key:"updateBBox",value:function(){if(this.wrapperNode&&this.wrapperNode.getBoundingClientRect){var t=this.wrapperNode.getBoundingClientRect();(Math.abs(t.width-this.state.lastBoundingBox.width)>1||Math.abs(t.height-this.state.lastBoundingBox.height)>1)&&this.setState({lastBoundingBox:{width:t.width,height:t.height}})}else-1===this.state.lastBoundingBox.width&&-1===this.state.lastBoundingBox.height||this.setState({lastBoundingBox:{width:-1,height:-1}})}},{key:"componentDidMount",value:function(){document.addEventListener("keydown",this.handleKeyDown),this.updateBBox()}},{key:"componentWillUnmount",value:function(){document.removeEventListener("keydown",this.handleKeyDown)}},{key:"componentDidUpdate",value:function(){var t,e;this.props.active&&this.updateBBox(),this.state.dismissed&&((null===(t=this.props.coordinate)||void 0===t?void 0:t.x)===this.state.dismissedAtCoordinate.x&&(null===(e=this.props.coordinate)||void 0===e?void 0:e.y)===this.state.dismissedAtCoordinate.y||(this.state.dismissed=!1))}},{key:"render",value:function(){var t=this,e=this.props,n=e.active,i=e.allowEscapeViewBox,o=e.animationDuration,a=e.animationEasing,s=e.children,l=e.coordinate,c=e.hasPayload,u=e.isAnimationActive,h=e.offset,d=e.position,f=e.reverseDirection,p=e.useTranslate3d,m=e.viewBox,g=e.wrapperStyle,y=function(t){var e,n,r=t.allowEscapeViewBox,i=t.coordinate,o=t.offsetTopLeft,a=t.position,s=t.reverseDirection,l=t.tooltipBox,c=t.useTranslate3d,u=t.viewBox;return{cssProperties:l.height>0&&l.width>0&&i?function(t){var e=t.translateX,n=t.translateY;return{transform:t.useTranslate3d?"translate3d(".concat(e,"px, ").concat(n,"px, 0)"):"translate(".concat(e,"px, ").concat(n,"px)")}}({translateX:e=WD({allowEscapeViewBox:r,coordinate:i,key:"x",offsetTopLeft:o,position:a,reverseDirection:s,tooltipDimension:l.width,viewBox:u,viewBoxDimension:u.width}),translateY:n=WD({allowEscapeViewBox:r,coordinate:i,key:"y",offsetTopLeft:o,position:a,reverseDirection:s,tooltipDimension:l.height,viewBox:u,viewBoxDimension:u.height}),useTranslate3d:c}):UD,cssClasses:VD({translateX:e,translateY:n,coordinate:i})}}({allowEscapeViewBox:i,coordinate:l,offsetTopLeft:h,position:d,reverseDirection:f,tooltipBox:this.state.lastBoundingBox,useTranslate3d:p,viewBox:m}),v=y.cssClasses,_=y.cssProperties,b=HD(HD({transition:u&&n?"transform ".concat(o,"ms ").concat(a):void 0},_),{},{pointerEvents:"none",visibility:!this.state.dismissed&&n&&c?"visible":"hidden",position:"absolute",top:0,left:0},g);return r.createElement("div",{tabIndex:-1,className:v,style:b,ref:function(e){t.wrapperNode=e}},s)}}],i&&ZD(n.prototype,i),o&&ZD(n,o),Object.defineProperty(n,"prototype",{writable:!1}),e}(r.PureComponent),nB={isSsr:!("undefined"!==typeof window&&window.document&&window.document.createElement&&window.setTimeout),get:function(t){return nB[t]},set:function(t,e){if("string"===typeof t)nB[t]=e;else{var n=Object.keys(t);n&&n.length&&n.forEach((function(e){nB[e]=t[e]}))}}},rB=n(977),iB=n.n(rB);function oB(t,e,n){return!0===e?iB()(t,n):VR()(e)?iB()(t,e):t}function aB(t){return aB="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},aB(t)}function sB(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function lB(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?sB(Object(n),!0).forEach((function(e){pB(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):sB(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function cB(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,mB(r.key),r)}}function uB(t,e,n){return e=dB(e),function(t,e){if(e&&("object"===aB(e)||"function"===typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,hB()?Reflect.construct(e,n||[],dB(t).constructor):e.apply(t,n))}function hB(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(hB=function(){return!!t})()}function dB(t){return dB=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},dB(t)}function fB(t,e){return fB=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},fB(t,e)}function pB(t,e,n){return(e=mB(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function mB(t){var e=function(t,e){if("object"!=aB(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=aB(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==aB(e)?e:String(e)}function gB(t){return t.dataKey}var yB=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),uB(this,e,arguments)}var n,i,o;return function(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&fB(t,e)}(e,t),n=e,i=[{key:"render",value:function(){var t=this,e=this.props,n=e.active,i=e.allowEscapeViewBox,o=e.animationDuration,a=e.animationEasing,s=e.content,l=e.coordinate,c=e.filterNull,u=e.isAnimationActive,h=e.offset,d=e.payload,f=e.payloadUniqBy,p=e.position,m=e.reverseDirection,g=e.useTranslate3d,y=e.viewBox,v=e.wrapperStyle,_=null!==d&&void 0!==d?d:[];c&&_.length&&(_=oB(d.filter((function(e){return null!=e.value&&(!0!==e.hide||t.props.includeHidden)})),f,gB));var b=_.length>0;return r.createElement(eB,{allowEscapeViewBox:i,animationDuration:o,animationEasing:a,isAnimationActive:u,active:n,coordinate:l,hasPayload:b,offset:h,position:p,reverseDirection:m,useTranslate3d:g,viewBox:y,wrapperStyle:v},function(t,e){return r.isValidElement(t)?r.cloneElement(t,e):"function"===typeof t?r.createElement(t,e):r.createElement(RR,e)}(s,lB(lB({},this.props),{},{payload:_})))}}],i&&cB(n.prototype,i),o&&cB(n,o),Object.defineProperty(n,"prototype",{writable:!1}),e}(r.PureComponent);pB(yB,"displayName","Tooltip"),pB(yB,"defaultProps",{accessibilityLayer:!1,allowEscapeViewBox:{x:!1,y:!1},animationDuration:400,animationEasing:"ease",contentStyle:{},coordinate:{x:0,y:0},cursor:!0,cursorStyle:{},filterNull:!0,isAnimationActive:!nB.isSsr,itemStyle:{},labelStyle:{},offset:10,reverseDirection:{x:!1,y:!1},separator:" : ",trigger:"hover",useTranslate3d:!1,viewBox:{x:0,y:0,height:0,width:0},wrapperStyle:{}});var vB=n(643),_B=n.n(vB);Math.abs,Math.atan2;const bB=Math.cos,xB=(Math.max,Math.min,Math.sin),wB=Math.sqrt,SB=Math.PI,EB=2*SB;const TB={draw(t,e){const n=wB(e/SB);t.moveTo(n,0),t.arc(0,0,n,0,EB)}},MB={draw(t,e){const n=wB(e/5)/2;t.moveTo(-3*n,-n),t.lineTo(-n,-n),t.lineTo(-n,-3*n),t.lineTo(n,-3*n),t.lineTo(n,-n),t.lineTo(3*n,-n),t.lineTo(3*n,n),t.lineTo(n,n),t.lineTo(n,3*n),t.lineTo(-n,3*n),t.lineTo(-n,n),t.lineTo(-3*n,n),t.closePath()}},AB=wB(1/3),CB=2*AB,PB={draw(t,e){const n=wB(e/CB),r=n*AB;t.moveTo(0,-n),t.lineTo(r,0),t.lineTo(0,n),t.lineTo(-r,0),t.closePath()}},kB={draw(t,e){const n=wB(e),r=-n/2;t.rect(r,r,n,n)}},IB=xB(SB/10)/xB(7*SB/10),OB=xB(EB/10)*IB,LB=-bB(EB/10)*IB,jB={draw(t,e){const n=wB(.8908130915292852*e),r=OB*n,i=LB*n;t.moveTo(0,-n),t.lineTo(r,i);for(let o=1;o<5;++o){const e=EB*o/5,a=bB(e),s=xB(e);t.lineTo(s*n,-a*n),t.lineTo(a*r-s*i,s*r+a*i)}t.closePath()}},zB=wB(3),RB={draw(t,e){const n=-wB(e/(3*zB));t.moveTo(0,2*n),t.lineTo(-zB*n,-n),t.lineTo(zB*n,-n),t.closePath()}},DB=-.5,BB=wB(3)/2,FB=1/wB(12),NB=3*(FB/2+1),UB={draw(t,e){const n=wB(e/NB),r=n/2,i=n*FB,o=r,a=n*FB+n,s=-o,l=a;t.moveTo(r,i),t.lineTo(o,a),t.lineTo(s,l),t.lineTo(DB*r-BB*i,BB*r+DB*i),t.lineTo(DB*o-BB*a,BB*o+DB*a),t.lineTo(DB*s-BB*l,BB*s+DB*l),t.lineTo(DB*r+BB*i,DB*i-BB*r),t.lineTo(DB*o+BB*a,DB*a-BB*o),t.lineTo(DB*s+BB*l,DB*l-BB*s),t.closePath()}};function VB(t){return function(){return t}}function WB(t,e){return e||(e=t.slice(0)),Object.freeze(Object.defineProperties(t,{raw:{value:Object.freeze(e)}}))}var GB,qB,HB,ZB,XB,YB,KB,$B,JB,QB,tF,eF,nF,rF;const iF=Math.PI,oF=2*iF,aF=1e-6,sF=oF-aF;function lF(t){this._+=t[0];for(let e=1,n=t.length;e<n;++e)this._+=arguments[e]+t[e]}class cF{constructor(t){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=null==t?lF:function(t){let e=Math.floor(t);if(!(e>=0))throw new Error("invalid digits: ".concat(t));if(e>15)return lF;const n=10**e;return function(t){this._+=t[0];for(let e=1,r=t.length;e<r;++e)this._+=Math.round(arguments[e]*n)/n+t[e]}}(t)}moveTo(t,e){this._append(GB||(GB=WB(["M",",",""])),this._x0=this._x1=+t,this._y0=this._y1=+e)}closePath(){null!==this._x1&&(this._x1=this._x0,this._y1=this._y0,this._append(qB||(qB=WB(["Z"]))))}lineTo(t,e){this._append(HB||(HB=WB(["L",",",""])),this._x1=+t,this._y1=+e)}quadraticCurveTo(t,e,n,r){this._append(ZB||(ZB=WB(["Q",",",",",",",""])),+t,+e,this._x1=+n,this._y1=+r)}bezierCurveTo(t,e,n,r,i,o){this._append(XB||(XB=WB(["C",",",",",",",",",",",""])),+t,+e,+n,+r,this._x1=+i,this._y1=+o)}arcTo(t,e,n,r,i){if(t=+t,e=+e,n=+n,r=+r,(i=+i)<0)throw new Error("negative radius: ".concat(i));let o=this._x1,a=this._y1,s=n-t,l=r-e,c=o-t,u=a-e,h=c*c+u*u;if(null===this._x1)this._append(YB||(YB=WB(["M",",",""])),this._x1=t,this._y1=e);else if(h>aF)if(Math.abs(u*s-l*c)>aF&&i){let d=n-o,f=r-a,p=s*s+l*l,m=d*d+f*f,g=Math.sqrt(p),y=Math.sqrt(h),v=i*Math.tan((iF-Math.acos((p+h-m)/(2*g*y)))/2),_=v/y,b=v/g;Math.abs(_-1)>aF&&this._append($B||($B=WB(["L",",",""])),t+_*c,e+_*u),this._append(JB||(JB=WB(["A",",",",0,0,",",",",",""])),i,i,+(u*d>c*f),this._x1=t+b*s,this._y1=e+b*l)}else this._append(KB||(KB=WB(["L",",",""])),this._x1=t,this._y1=e);else;}arc(t,e,n,r,i,o){if(t=+t,e=+e,o=!!o,(n=+n)<0)throw new Error("negative radius: ".concat(n));let a=n*Math.cos(r),s=n*Math.sin(r),l=t+a,c=e+s,u=1^o,h=o?r-i:i-r;null===this._x1?this._append(QB||(QB=WB(["M",",",""])),l,c):(Math.abs(this._x1-l)>aF||Math.abs(this._y1-c)>aF)&&this._append(tF||(tF=WB(["L",",",""])),l,c),n&&(h<0&&(h=h%oF+oF),h>sF?this._append(eF||(eF=WB(["A",",",",0,1,",",",",","A",",",",0,1,",",",",",""])),n,n,u,t-a,e-s,n,n,u,this._x1=l,this._y1=c):h>aF&&this._append(nF||(nF=WB(["A",",",",0,",",",",",",",""])),n,n,+(h>=iF),u,this._x1=t+n*Math.cos(i),this._y1=e+n*Math.sin(i)))}rect(t,e,n,r){this._append(rF||(rF=WB(["M",",","h","v","h","Z"])),this._x0=this._x1=+t,this._y0=this._y1=+e,n=+n,+r,-n)}toString(){return this._}}function uF(t){let e=3;return t.digits=function(n){if(!arguments.length)return e;if(null==n)e=null;else{const t=Math.floor(n);if(!(t>=0))throw new RangeError("invalid digits: ".concat(n));e=t}return t},()=>new cF(e)}cF.prototype;wB(3),wB(3);function hF(t){return hF="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},hF(t)}var dF=["type","size","sizeType"];function fF(){return fF=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},fF.apply(this,arguments)}function pF(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function mF(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?pF(Object(n),!0).forEach((function(e){gF(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):pF(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function gF(t,e,n){return e=function(t){var e=function(t,e){if("object"!=hF(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=hF(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==hF(e)?e:String(e)}(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function yF(t,e){if(null==t)return{};var n,r,i=function(t,e){if(null==t)return{};var n,r,i={},o=Object.keys(t);for(r=0;r<o.length;r++)n=o[r],e.indexOf(n)>=0||(i[n]=t[n]);return i}(t,e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(r=0;r<o.length;r++)n=o[r],e.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}var vF={symbolCircle:TB,symbolCross:MB,symbolDiamond:PB,symbolSquare:kB,symbolStar:jB,symbolTriangle:RB,symbolWye:UB},_F=Math.PI/180,bF=function(t){var e=t.type,n=void 0===e?"circle":e,i=t.size,o=void 0===i?64:i,a=t.sizeType,s=void 0===a?"area":a,l=mF(mF({},yF(t,dF)),{},{type:n,size:o,sizeType:s}),c=l.className,u=l.cx,h=l.cy,d=fD(l,!0);return u===+u&&h===+h&&o===+o?r.createElement("path",fF({},d,{className:cR("recharts-symbols",c),transform:"translate(".concat(u,", ").concat(h,")"),d:function(){var t=function(t){var e="symbol".concat(_B()(t));return vF[e]||TB}(n),e=function(t,e){let n=null,r=uF(i);function i(){let i;if(n||(n=i=r()),t.apply(this,arguments).draw(n,+e.apply(this,arguments)),i)return n=null,i+""||null}return t="function"===typeof t?t:VB(t||TB),e="function"===typeof e?e:VB(void 0===e?64:+e),i.type=function(e){return arguments.length?(t="function"===typeof e?e:VB(e),i):t},i.size=function(t){return arguments.length?(e="function"===typeof t?t:VB(+t),i):e},i.context=function(t){return arguments.length?(n=null==t?null:t,i):n},i}().type(t).size(function(t,e,n){if("area"===e)return t;switch(n){case"cross":return 5*t*t/9;case"diamond":return.5*t*t/Math.sqrt(3);case"square":return t*t;case"star":var r=18*_F;return 1.25*t*t*(Math.tan(r)-Math.tan(2*r)*Math.pow(Math.tan(r),2));case"triangle":return Math.sqrt(3)*t*t/4;case"wye":return(21-10*Math.sqrt(3))*t*t/8;default:return Math.PI*t*t/4}}(o,s,n));return e()}()})):null};function xF(t){return xF="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},xF(t)}function wF(){return wF=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},wF.apply(this,arguments)}function SF(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function EF(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,kF(r.key),r)}}function TF(t,e,n){return e=AF(e),function(t,e){if(e&&("object"===xF(e)||"function"===typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,MF()?Reflect.construct(e,n||[],AF(t).constructor):e.apply(t,n))}function MF(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(MF=function(){return!!t})()}function AF(t){return AF=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},AF(t)}function CF(t,e){return CF=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},CF(t,e)}function PF(t,e,n){return(e=kF(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function kF(t){var e=function(t,e){if("object"!=xF(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=xF(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==xF(e)?e:String(e)}bF.registerSymbol=function(t,e){vF["symbol".concat(_B()(t))]=e};var IF=32,OF=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),TF(this,e,arguments)}var n,i,o;return function(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&CF(t,e)}(e,t),n=e,i=[{key:"renderIcon",value:function(t){var e=this.props.inactiveColor,n=16,i=IF/6,o=IF/3,a=t.inactive?e:t.color;if("plainline"===t.type)return r.createElement("line",{strokeWidth:4,fill:"none",stroke:a,strokeDasharray:t.payload.strokeDasharray,x1:0,y1:n,x2:IF,y2:n,className:"recharts-legend-icon"});if("line"===t.type)return r.createElement("path",{strokeWidth:4,fill:"none",stroke:a,d:"M0,".concat(n,"h").concat(o,"\n            A").concat(i,",").concat(i,",0,1,1,").concat(2*o,",").concat(n,"\n            H").concat(IF,"M").concat(2*o,",").concat(n,"\n            A").concat(i,",").concat(i,",0,1,1,").concat(o,",").concat(n),className:"recharts-legend-icon"});if("rect"===t.type)return r.createElement("path",{stroke:"none",fill:a,d:"M0,".concat(4,"h").concat(IF,"v").concat(24,"h").concat(-32,"z"),className:"recharts-legend-icon"});if(r.isValidElement(t.legendIcon)){var s=function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?SF(Object(n),!0).forEach((function(e){PF(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):SF(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}({},t);return delete s.legendIcon,r.cloneElement(t.legendIcon,s)}return r.createElement(bF,{fill:a,cx:n,cy:n,size:IF,sizeType:"diameter",type:t.type})}},{key:"renderItems",value:function(){var t=this,e=this.props,n=e.payload,i=e.iconSize,o=e.layout,a=e.formatter,s=e.inactiveColor,l={x:0,y:0,width:IF,height:IF},c={display:"horizontal"===o?"inline-block":"block",marginRight:10},u={display:"inline-block",verticalAlign:"middle",marginRight:4};return n.map((function(e,n){var o=e.formatter||a,h=cR(PF(PF({"recharts-legend-item":!0},"legend-item-".concat(n),!0),"inactive",e.inactive));if("none"===e.type)return null;var d=VR()(e.value)?null:e.value;NR(!VR()(e.value),'The name property is also required when using a function for the dataKey of a chart\'s cartesian components. Ex: <Bar name="Name of my Data"/>');var f=e.inactive?s:e.color;return r.createElement("li",wF({className:h,style:c,key:"legend-item-".concat(n)},JR(t.props,e,n)),r.createElement(LD,{width:i,height:i,viewBox:l,style:u},t.renderIcon(e)),r.createElement("span",{className:"recharts-legend-item-text",style:{color:f}},o?o(d,e,n):d))}))}},{key:"render",value:function(){var t=this.props,e=t.payload,n=t.layout,i=t.align;if(!e||!e.length)return null;var o={padding:0,margin:0,textAlign:"horizontal"===n?i:"left"};return r.createElement("ul",{className:"recharts-default-legend",style:o},this.renderItems())}}],i&&EF(n.prototype,i),o&&EF(n,o),Object.defineProperty(n,"prototype",{writable:!1}),e}(r.PureComponent);function LF(t){return LF="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},LF(t)}PF(OF,"displayName","Legend"),PF(OF,"defaultProps",{iconSize:14,layout:"horizontal",align:"center",verticalAlign:"middle",inactiveColor:"#ccc"});var jF=["ref"];function zF(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function RF(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?zF(Object(n),!0).forEach((function(e){WF(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):zF(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function DF(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,GF(r.key),r)}}function BF(t,e,n){return e=NF(e),function(t,e){if(e&&("object"===LF(e)||"function"===typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return UF(t)}(t,FF()?Reflect.construct(e,n||[],NF(t).constructor):e.apply(t,n))}function FF(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(FF=function(){return!!t})()}function NF(t){return NF=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},NF(t)}function UF(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function VF(t,e){return VF=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},VF(t,e)}function WF(t,e,n){return(e=GF(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function GF(t){var e=function(t,e){if("object"!=LF(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=LF(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==LF(e)?e:String(e)}function qF(t,e){if(null==t)return{};var n,r,i=function(t,e){if(null==t)return{};var n,r,i={},o=Object.keys(t);for(r=0;r<o.length;r++)n=o[r],e.indexOf(n)>=0||(i[n]=t[n]);return i}(t,e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(r=0;r<o.length;r++)n=o[r],e.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function HF(t){return t.value}var ZF=function(t){function e(){var t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return WF(UF(t=BF(this,e,[].concat(r))),"lastBoundingBox",{width:-1,height:-1}),t}var n,i,o;return function(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&VF(t,e)}(e,t),n=e,i=[{key:"componentDidMount",value:function(){this.updateBBox()}},{key:"componentDidUpdate",value:function(){this.updateBBox()}},{key:"getBBox",value:function(){if(this.wrapperNode&&this.wrapperNode.getBoundingClientRect){var t=this.wrapperNode.getBoundingClientRect();return t.height=this.wrapperNode.offsetHeight,t.width=this.wrapperNode.offsetWidth,t}return null}},{key:"updateBBox",value:function(){var t=this.props.onBBoxUpdate,e=this.getBBox();e?(Math.abs(e.width-this.lastBoundingBox.width)>1||Math.abs(e.height-this.lastBoundingBox.height)>1)&&(this.lastBoundingBox.width=e.width,this.lastBoundingBox.height=e.height,t&&t(e)):-1===this.lastBoundingBox.width&&-1===this.lastBoundingBox.height||(this.lastBoundingBox.width=-1,this.lastBoundingBox.height=-1,t&&t(null))}},{key:"getBBoxSnapshot",value:function(){return this.lastBoundingBox.width>=0&&this.lastBoundingBox.height>=0?RF({},this.lastBoundingBox):{width:0,height:0}}},{key:"getDefaultPosition",value:function(t){var e,n,r=this.props,i=r.layout,o=r.align,a=r.verticalAlign,s=r.margin,l=r.chartWidth,c=r.chartHeight;return t&&(void 0!==t.left&&null!==t.left||void 0!==t.right&&null!==t.right)||(e="center"===o&&"vertical"===i?{left:((l||0)-this.getBBoxSnapshot().width)/2}:"right"===o?{right:s&&s.right||0}:{left:s&&s.left||0}),t&&(void 0!==t.top&&null!==t.top||void 0!==t.bottom&&null!==t.bottom)||(n="middle"===a?{top:((c||0)-this.getBBoxSnapshot().height)/2}:"bottom"===a?{bottom:s&&s.bottom||0}:{top:s&&s.top||0}),RF(RF({},e),n)}},{key:"render",value:function(){var t=this,e=this.props,n=e.content,i=e.width,o=e.height,a=e.wrapperStyle,s=e.payloadUniqBy,l=e.payload,c=RF(RF({position:"absolute",width:i||"auto",height:o||"auto"},this.getDefaultPosition(a)),a);return r.createElement("div",{className:"recharts-legend-wrapper",style:c,ref:function(e){t.wrapperNode=e}},function(t,e){if(r.isValidElement(t))return r.cloneElement(t,e);if("function"===typeof t)return r.createElement(t,e);e.ref;var n=qF(e,jF);return r.createElement(OF,n)}(n,RF(RF({},this.props),{},{payload:oB(l,s,HF)})))}}],o=[{key:"getWithHeight",value:function(t,e){var n=t.props.layout;return"vertical"===n&&bR(t.props.height)?{height:t.props.height}:"horizontal"===n?{width:t.props.width||e}:null}}],i&&DF(n.prototype,i),o&&DF(n,o),Object.defineProperty(n,"prototype",{writable:!1}),e}(r.PureComponent);function XF(){return XF=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},XF.apply(this,arguments)}WF(ZF,"displayName","Legend"),WF(ZF,"defaultProps",{iconSize:14,layout:"horizontal",align:"center",verticalAlign:"bottom"});var YF=function(t){var e=t.cx,n=t.cy,i=t.r,o=t.className,a=cR("recharts-dot",o);return e===+e&&n===+n&&i===+i?r.createElement("circle",XF({},fD(t,!1),$R(t),{className:a,cx:e,cy:n,r:i})):null},KF=n(5173),$F=n.n(KF),JF=Object.getOwnPropertyNames,QF=Object.getOwnPropertySymbols,tN=Object.prototype.hasOwnProperty;function eN(t,e){return function(n,r,i){return t(n,r,i)&&e(n,r,i)}}function nN(t){return function(e,n,r){if(!e||!n||"object"!==typeof e||"object"!==typeof n)return t(e,n,r);var i=r.cache,o=i.get(e),a=i.get(n);if(o&&a)return o===n&&a===e;i.set(e,n),i.set(n,e);var s=t(e,n,r);return i.delete(e),i.delete(n),s}}function rN(t){return JF(t).concat(QF(t))}var iN=Object.hasOwn||function(t,e){return tN.call(t,e)};function oN(t,e){return t||e?t===e:t===e||t!==t&&e!==e}var aN="_owner",sN=Object.getOwnPropertyDescriptor,lN=Object.keys;function cN(t,e,n){var r=t.length;if(e.length!==r)return!1;for(;r-- >0;)if(!n.equals(t[r],e[r],r,r,t,e,n))return!1;return!0}function uN(t,e){return oN(t.getTime(),e.getTime())}function hN(t,e,n){if(t.size!==e.size)return!1;for(var r,i,o={},a=t.entries(),s=0;(r=a.next())&&!r.done;){for(var l=e.entries(),c=!1,u=0;(i=l.next())&&!i.done;){var h=r.value,d=h[0],f=h[1],p=i.value,m=p[0],g=p[1];c||o[u]||!(c=n.equals(d,m,s,u,t,e,n)&&n.equals(f,g,d,m,t,e,n))||(o[u]=!0),u++}if(!c)return!1;s++}return!0}function dN(t,e,n){var r,i=lN(t),o=i.length;if(lN(e).length!==o)return!1;for(;o-- >0;){if((r=i[o])===aN&&(t.$$typeof||e.$$typeof)&&t.$$typeof!==e.$$typeof)return!1;if(!iN(e,r)||!n.equals(t[r],e[r],r,r,t,e,n))return!1}return!0}function fN(t,e,n){var r,i,o,a=rN(t),s=a.length;if(rN(e).length!==s)return!1;for(;s-- >0;){if((r=a[s])===aN&&(t.$$typeof||e.$$typeof)&&t.$$typeof!==e.$$typeof)return!1;if(!iN(e,r))return!1;if(!n.equals(t[r],e[r],r,r,t,e,n))return!1;if(i=sN(t,r),o=sN(e,r),(i||o)&&(!i||!o||i.configurable!==o.configurable||i.enumerable!==o.enumerable||i.writable!==o.writable))return!1}return!0}function pN(t,e){return oN(t.valueOf(),e.valueOf())}function mN(t,e){return t.source===e.source&&t.flags===e.flags}function gN(t,e,n){if(t.size!==e.size)return!1;for(var r,i,o={},a=t.values();(r=a.next())&&!r.done;){for(var s=e.values(),l=!1,c=0;(i=s.next())&&!i.done;)l||o[c]||!(l=n.equals(r.value,i.value,r.value,i.value,t,e,n))||(o[c]=!0),c++;if(!l)return!1}return!0}function yN(t,e){var n=t.length;if(e.length!==n)return!1;for(;n-- >0;)if(t[n]!==e[n])return!1;return!0}var vN="[object Arguments]",_N="[object Boolean]",bN="[object Date]",xN="[object Map]",wN="[object Number]",SN="[object Object]",EN="[object RegExp]",TN="[object Set]",MN="[object String]",AN=Array.isArray,CN="function"===typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView:null,PN=Object.assign,kN=Object.prototype.toString.call.bind(Object.prototype.toString);var IN=ON();ON({strict:!0}),ON({circular:!0}),ON({circular:!0,strict:!0}),ON({createInternalComparator:function(){return oN}}),ON({strict:!0,createInternalComparator:function(){return oN}}),ON({circular:!0,createInternalComparator:function(){return oN}}),ON({circular:!0,createInternalComparator:function(){return oN},strict:!0});function ON(t){void 0===t&&(t={});var e,n=t.circular,r=void 0!==n&&n,i=t.createInternalComparator,o=t.createState,a=t.strict,s=void 0!==a&&a,l=function(t){var e=t.circular,n=t.createCustomConfig,r=t.strict,i={areArraysEqual:r?fN:cN,areDatesEqual:uN,areMapsEqual:r?eN(hN,fN):hN,areObjectsEqual:r?fN:dN,arePrimitiveWrappersEqual:pN,areRegExpsEqual:mN,areSetsEqual:r?eN(gN,fN):gN,areTypedArraysEqual:r?fN:yN};if(n&&(i=PN({},i,n(i))),e){var o=nN(i.areArraysEqual),a=nN(i.areMapsEqual),s=nN(i.areObjectsEqual),l=nN(i.areSetsEqual);i=PN({},i,{areArraysEqual:o,areMapsEqual:a,areObjectsEqual:s,areSetsEqual:l})}return i}(t),c=function(t){var e=t.areArraysEqual,n=t.areDatesEqual,r=t.areMapsEqual,i=t.areObjectsEqual,o=t.arePrimitiveWrappersEqual,a=t.areRegExpsEqual,s=t.areSetsEqual,l=t.areTypedArraysEqual;return function(t,c,u){if(t===c)return!0;if(null==t||null==c||"object"!==typeof t||"object"!==typeof c)return t!==t&&c!==c;var h=t.constructor;if(h!==c.constructor)return!1;if(h===Object)return i(t,c,u);if(AN(t))return e(t,c,u);if(null!=CN&&CN(t))return l(t,c,u);if(h===Date)return n(t,c,u);if(h===RegExp)return a(t,c,u);if(h===Map)return r(t,c,u);if(h===Set)return s(t,c,u);var d=kN(t);return d===bN?n(t,c,u):d===EN?a(t,c,u):d===xN?r(t,c,u):d===TN?s(t,c,u):d===SN?"function"!==typeof t.then&&"function"!==typeof c.then&&i(t,c,u):d===vN?i(t,c,u):(d===_N||d===wN||d===MN)&&o(t,c,u)}}(l),u=i?i(c):(e=c,function(t,n,r,i,o,a,s){return e(t,n,s)});return function(t){var e=t.circular,n=t.comparator,r=t.createState,i=t.equals,o=t.strict;if(r)return function(t,a){var s=r(),l=s.cache,c=void 0===l?e?new WeakMap:void 0:l,u=s.meta;return n(t,a,{cache:c,equals:i,meta:u,strict:o})};if(e)return function(t,e){return n(t,e,{cache:new WeakMap,equals:i,meta:void 0,strict:o})};var a={cache:void 0,equals:i,meta:void 0,strict:o};return function(t,e){return n(t,e,a)}}({circular:r,comparator:c,createState:o,equals:u,strict:s})}function LN(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=-1;requestAnimationFrame((function r(i){n<0&&(n=i),i-n>e?(t(i),n=-1):function(t){"undefined"!==typeof requestAnimationFrame&&requestAnimationFrame(t)}(r)}))}function jN(t){return jN="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},jN(t)}function zN(t){return function(t){if(Array.isArray(t))return t}(t)||function(t){if("undefined"!==typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"===typeof t)return RN(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return RN(t,e)}(t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function RN(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function DN(){var t=function(){return null},e=!1,n=function n(r){if(!e){if(Array.isArray(r)){if(!r.length)return;var i=zN(r),o=i[0],a=i.slice(1);return"number"===typeof o?void LN(n.bind(null,a),o):(n(o),void LN(n.bind(null,a)))}"object"===jN(r)&&t(r),"function"===typeof r&&r()}};return{stop:function(){e=!0},start:function(t){e=!1,n(t)},subscribe:function(e){return t=e,function(){t=function(){return null}}}}}function BN(t){return BN="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},BN(t)}function FN(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function NN(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?FN(Object(n),!0).forEach((function(e){UN(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):FN(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function UN(t,e,n){return e=function(t){var e=function(t,e){if("object"!==BN(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!==BN(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===BN(e)?e:String(e)}(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var VN=function(t){return t},WN=function(t,e){return Object.keys(e).reduce((function(n,r){return NN(NN({},n),{},UN({},r,t(r,e[r])))}),{})},GN=function(t,e,n){return t.map((function(t){return"".concat((r=t,r.replace(/([A-Z])/g,(function(t){return"-".concat(t.toLowerCase())})))," ").concat(e,"ms ").concat(n);var r})).join(",")};function qN(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,i,o,a,s=[],l=!0,c=!1;try{if(o=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=o.call(n)).done)&&(s.push(r.value),s.length!==e);l=!0);}catch(t){c=!0,i=t}finally{try{if(!l&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw i}}return s}}(t,e)||ZN(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function HN(t){return function(t){if(Array.isArray(t))return XN(t)}(t)||function(t){if("undefined"!==typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||ZN(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ZN(t,e){if(t){if("string"===typeof t)return XN(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?XN(t,e):void 0}}function XN(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var YN=1e-4,KN=function(t,e){return[0,3*t,3*e-6*t,3*t-3*e+1]},$N=function(t,e){return t.map((function(t,n){return t*Math.pow(e,n)})).reduce((function(t,e){return t+e}))},JN=function(t,e){return function(n){var r=KN(t,e);return $N(r,n)}},QN=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];var r=e[0],i=e[1],o=e[2],a=e[3];if(1===e.length)switch(e[0]){case"linear":r=0,i=0,o=1,a=1;break;case"ease":r=.25,i=.1,o=.25,a=1;break;case"ease-in":r=.42,i=0,o=1,a=1;break;case"ease-out":r=.42,i=0,o=.58,a=1;break;case"ease-in-out":r=0,i=0,o=.58,a=1;break;default:var s=e[0].split("(");if("cubic-bezier"===s[0]&&4===s[1].split(")")[0].split(",").length){var l=qN(s[1].split(")")[0].split(",").map((function(t){return parseFloat(t)})),4);r=l[0],i=l[1],o=l[2],a=l[3]}}[r,o,i,a].every((function(t){return"number"===typeof t&&t>=0&&t<=1}));var c,u,h=JN(r,o),d=JN(i,a),f=(c=r,u=o,function(t){var e=KN(c,u),n=[].concat(HN(e.map((function(t,e){return t*e})).slice(1)),[0]);return $N(n,t)}),p=function(t){return t>1?1:t<0?0:t},m=function(t){for(var e=t>1?1:t,n=e,r=0;r<8;++r){var i=h(n)-e,o=f(n);if(Math.abs(i-e)<YN||o<YN)return d(n);n=p(n-i/o)}return d(n)};return m.isStepper=!1,m},tU=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];var r=e[0];if("string"===typeof r)switch(r){case"ease":case"ease-in-out":case"ease-out":case"ease-in":case"linear":return QN(r);case"spring":return function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.stiff,n=void 0===e?100:e,r=t.damping,i=void 0===r?8:r,o=t.dt,a=void 0===o?17:o,s=function(t,e,r){var o=r+(-(t-e)*n-r*i)*a/1e3,s=r*a/1e3+t;return Math.abs(s-e)<YN&&Math.abs(o)<YN?[e,0]:[s,o]};return s.isStepper=!0,s.dt=a,s}();default:if("cubic-bezier"===r.split("(")[0])return QN(r)}return"function"===typeof r?r:null};function eU(t){return eU="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},eU(t)}function nU(t){return function(t){if(Array.isArray(t))return lU(t)}(t)||function(t){if("undefined"!==typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||sU(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function rU(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function iU(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?rU(Object(n),!0).forEach((function(e){oU(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):rU(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function oU(t,e,n){return e=function(t){var e=function(t,e){if("object"!==eU(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!==eU(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===eU(e)?e:String(e)}(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function aU(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,i,o,a,s=[],l=!0,c=!1;try{if(o=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=o.call(n)).done)&&(s.push(r.value),s.length!==e);l=!0);}catch(t){c=!0,i=t}finally{try{if(!l&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw i}}return s}}(t,e)||sU(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function sU(t,e){if(t){if("string"===typeof t)return lU(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?lU(t,e):void 0}}function lU(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var cU=function(t,e,n){return t+(e-t)*n},uU=function(t){return t.from!==t.to},hU=function t(e,n,r){var i=WN((function(t,n){if(uU(n)){var r=aU(e(n.from,n.to,n.velocity),2),i=r[0],o=r[1];return iU(iU({},n),{},{from:i,velocity:o})}return n}),n);return r<1?WN((function(t,e){return uU(e)?iU(iU({},e),{},{velocity:cU(e.velocity,i[t].velocity,r),from:cU(e.from,i[t].from,r)}):e}),n):t(e,i,r-1)};const dU=function(t,e,n,r,i){var o,a,s,l,c=(o=t,a=e,[Object.keys(o),Object.keys(a)].reduce((function(t,e){return t.filter((function(t){return e.includes(t)}))}))),u=c.reduce((function(n,r){return iU(iU({},n),{},oU({},r,[t[r],e[r]]))}),{}),h=c.reduce((function(n,r){return iU(iU({},n),{},oU({},r,{from:t[r],velocity:0,to:e[r]}))}),{}),d=-1,f=function(){return null};return f=n.isStepper?function(r){s||(s=r);var o=(r-s)/n.dt;h=hU(n,h,o),i(iU(iU(iU({},t),e),WN((function(t,e){return e.from}),h))),s=r,Object.values(h).filter(uU).length&&(d=requestAnimationFrame(f))}:function(o){l||(l=o);var a=(o-l)/r,s=WN((function(t,e){return cU.apply(void 0,nU(e).concat([n(a)]))}),u);if(i(iU(iU(iU({},t),e),s)),a<1)d=requestAnimationFrame(f);else{var c=WN((function(t,e){return cU.apply(void 0,nU(e).concat([n(1)]))}),u);i(iU(iU(iU({},t),e),c))}},function(){return requestAnimationFrame(f),function(){cancelAnimationFrame(d)}}};function fU(t){return fU="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},fU(t)}var pU=["children","begin","duration","attributeName","easing","isActive","steps","from","to","canBegin","onAnimationEnd","shouldReAnimate","onAnimationReStart"];function mU(t,e){if(null==t)return{};var n,r,i=function(t,e){if(null==t)return{};var n,r,i={},o=Object.keys(t);for(r=0;r<o.length;r++)n=o[r],e.indexOf(n)>=0||(i[n]=t[n]);return i}(t,e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(r=0;r<o.length;r++)n=o[r],e.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function gU(t){return function(t){if(Array.isArray(t))return yU(t)}(t)||function(t){if("undefined"!==typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"===typeof t)return yU(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return yU(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function yU(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function vU(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function _U(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?vU(Object(n),!0).forEach((function(e){bU(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):vU(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function bU(t,e,n){return(e=wU(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function xU(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,wU(r.key),r)}}function wU(t){var e=function(t,e){if("object"!==fU(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!==fU(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===fU(e)?e:String(e)}function SU(t,e){return SU=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},SU(t,e)}function EU(t){var e=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(pbt){return!1}}();return function(){var n,r=AU(t);if(e){var i=AU(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return TU(this,n)}}function TU(t,e){if(e&&("object"===fU(e)||"function"===typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return MU(t)}function MU(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function AU(t){return AU=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},AU(t)}var CU=function(t){!function(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&SU(t,e)}(a,t);var e,n,i,o=EU(a);function a(t,e){var n;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,a);var r=(n=o.call(this,t,e)).props,i=r.isActive,s=r.attributeName,l=r.from,c=r.to,u=r.steps,h=r.children,d=r.duration;if(n.handleStyleChange=n.handleStyleChange.bind(MU(n)),n.changeStyle=n.changeStyle.bind(MU(n)),!i||d<=0)return n.state={style:{}},"function"===typeof h&&(n.state={style:c}),TU(n);if(u&&u.length)n.state={style:u[0].style};else if(l){if("function"===typeof h)return n.state={style:l},TU(n);n.state={style:s?bU({},s,l):l}}else n.state={style:{}};return n}return e=a,n=[{key:"componentDidMount",value:function(){var t=this.props,e=t.isActive,n=t.canBegin;this.mounted=!0,e&&n&&this.runAnimation(this.props)}},{key:"componentDidUpdate",value:function(t){var e=this.props,n=e.isActive,r=e.canBegin,i=e.attributeName,o=e.shouldReAnimate,a=e.to,s=e.from,l=this.state.style;if(r)if(n){if(!(IN(t.to,a)&&t.canBegin&&t.isActive)){var c=!t.canBegin||!t.isActive;this.manager&&this.manager.stop(),this.stopJSAnimation&&this.stopJSAnimation();var u=c||o?s:t.to;if(this.state&&l){var h={style:i?bU({},i,u):u};(i&&l[i]!==u||!i&&l!==u)&&this.setState(h)}this.runAnimation(_U(_U({},this.props),{},{from:u,begin:0}))}}else{var d={style:i?bU({},i,a):a};this.state&&l&&(i&&l[i]!==a||!i&&l!==a)&&this.setState(d)}}},{key:"componentWillUnmount",value:function(){this.mounted=!1;var t=this.props.onAnimationEnd;this.unSubscribe&&this.unSubscribe(),this.manager&&(this.manager.stop(),this.manager=null),this.stopJSAnimation&&this.stopJSAnimation(),t&&t()}},{key:"handleStyleChange",value:function(t){this.changeStyle(t)}},{key:"changeStyle",value:function(t){this.mounted&&this.setState({style:t})}},{key:"runJSAnimation",value:function(t){var e=this,n=t.from,r=t.to,i=t.duration,o=t.easing,a=t.begin,s=t.onAnimationEnd,l=t.onAnimationStart,c=dU(n,r,tU(o),i,this.changeStyle);this.manager.start([l,a,function(){e.stopJSAnimation=c()},i,s])}},{key:"runStepAnimation",value:function(t){var e=this,n=t.steps,r=t.begin,i=t.onAnimationStart,o=n[0],a=o.style,s=o.duration,l=void 0===s?0:s;return this.manager.start([i].concat(gU(n.reduce((function(t,r,i){if(0===i)return t;var o=r.duration,a=r.easing,s=void 0===a?"ease":a,l=r.style,c=r.properties,u=r.onAnimationEnd,h=i>0?n[i-1]:r,d=c||Object.keys(l);if("function"===typeof s||"spring"===s)return[].concat(gU(t),[e.runJSAnimation.bind(e,{from:h.style,to:l,duration:o,easing:s}),o]);var f=GN(d,o,s),p=_U(_U(_U({},h.style),l),{},{transition:f});return[].concat(gU(t),[p,o,u]).filter(VN)}),[a,Math.max(l,r)])),[t.onAnimationEnd]))}},{key:"runAnimation",value:function(t){this.manager||(this.manager=DN());var e=t.begin,n=t.duration,r=t.attributeName,i=t.to,o=t.easing,a=t.onAnimationStart,s=t.onAnimationEnd,l=t.steps,c=t.children,u=this.manager;if(this.unSubscribe=u.subscribe(this.handleStyleChange),"function"!==typeof o&&"function"!==typeof c&&"spring"!==o)if(l.length>1)this.runStepAnimation(t);else{var h=r?bU({},r,i):i,d=GN(Object.keys(h),n,o);u.start([a,e,_U(_U({},h),{},{transition:d}),n,s])}else this.runJSAnimation(t)}},{key:"render",value:function(){var t=this.props,e=t.children,n=(t.begin,t.duration),i=(t.attributeName,t.easing,t.isActive),o=(t.steps,t.from,t.to,t.canBegin,t.onAnimationEnd,t.shouldReAnimate,t.onAnimationReStart,mU(t,pU)),a=r.Children.count(e),s=this.state.style;if("function"===typeof e)return e(s);if(!i||0===a||n<=0)return e;var l=function(t){var e=t.props,n=e.style,i=void 0===n?{}:n,a=e.className;return(0,r.cloneElement)(t,_U(_U({},o),{},{style:_U(_U({},i),s),className:a}))};return 1===a?l(r.Children.only(e)):r.createElement("div",null,r.Children.map(e,(function(t){return l(t)})))}}],n&&xU(e.prototype,n),i&&xU(e,i),Object.defineProperty(e,"prototype",{writable:!1}),a}(r.PureComponent);CU.displayName="Animate",CU.defaultProps={begin:0,duration:1e3,from:"",to:"",attributeName:"",easing:"ease",isActive:!0,canBegin:!0,steps:[],onAnimationEnd:function(){},onAnimationStart:function(){}},CU.propTypes={from:$F().oneOfType([$F().object,$F().string]),to:$F().oneOfType([$F().object,$F().string]),attributeName:$F().string,duration:$F().number,begin:$F().number,easing:$F().oneOfType([$F().string,$F().func]),steps:$F().arrayOf($F().shape({duration:$F().number.isRequired,style:$F().object.isRequired,easing:$F().oneOfType([$F().oneOf(["ease","ease-in","ease-out","ease-in-out","linear"]),$F().func]),properties:$F().arrayOf("string"),onAnimationEnd:$F().func})),children:$F().oneOfType([$F().node,$F().func]),isActive:$F().bool,canBegin:$F().bool,onAnimationEnd:$F().func,shouldReAnimate:$F().bool,onAnimationStart:$F().func,onAnimationReStart:$F().func};const PU=CU;function kU(t,e){if(null==t)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function IU(t,e){return IU=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},IU(t,e)}function OU(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,IU(t,e)}const LU=r.createContext(null);function jU(t,e){var n=Object.create(null);return t&&r.Children.map(t,(function(t){return t})).forEach((function(t){n[t.key]=function(t){return e&&(0,r.isValidElement)(t)?e(t):t}(t)})),n}function zU(t,e,n){return null!=n[e]?n[e]:t.props[e]}function RU(t,e,n){var i=jU(t.children),o=function(t,e){function n(n){return n in e?e[n]:t[n]}t=t||{},e=e||{};var r,i=Object.create(null),o=[];for(var a in t)a in e?o.length&&(i[a]=o,o=[]):o.push(a);var s={};for(var l in e){if(i[l])for(r=0;r<i[l].length;r++){var c=i[l][r];s[i[l][r]]=n(c)}s[l]=n(l)}for(r=0;r<o.length;r++)s[o[r]]=n(o[r]);return s}(e,i);return Object.keys(o).forEach((function(a){var s=o[a];if((0,r.isValidElement)(s)){var l=a in e,c=a in i,u=e[a],h=(0,r.isValidElement)(u)&&!u.props.in;!c||l&&!h?c||!l||h?c&&l&&(0,r.isValidElement)(u)&&(o[a]=(0,r.cloneElement)(s,{onExited:n.bind(null,s),in:u.props.in,exit:zU(s,"exit",t),enter:zU(s,"enter",t)})):o[a]=(0,r.cloneElement)(s,{in:!1}):o[a]=(0,r.cloneElement)(s,{onExited:n.bind(null,s),in:!0,exit:zU(s,"exit",t),enter:zU(s,"enter",t)})}})),o}var DU=Object.values||function(t){return Object.keys(t).map((function(e){return t[e]}))},BU=function(t){function e(e,n){var r,i=(r=t.call(this,e,n)||this).handleExited.bind(function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(r));return r.state={contextValue:{isMounting:!0},handleExited:i,firstRender:!0},r}OU(e,t);var n=e.prototype;return n.componentDidMount=function(){this.mounted=!0,this.setState({contextValue:{isMounting:!1}})},n.componentWillUnmount=function(){this.mounted=!1},e.getDerivedStateFromProps=function(t,e){var n,i,o=e.children,a=e.handleExited;return{children:e.firstRender?(n=t,i=a,jU(n.children,(function(t){return(0,r.cloneElement)(t,{onExited:i.bind(null,t),in:!0,appear:zU(t,"appear",n),enter:zU(t,"enter",n),exit:zU(t,"exit",n)})}))):RU(t,o,a),firstRender:!1}},n.handleExited=function(t,e){var n=jU(this.props.children);t.key in n||(t.props.onExited&&t.props.onExited(e),this.mounted&&this.setState((function(e){var n=Dn({},e.children);return delete n[t.key],{children:n}})))},n.render=function(){var t=this.props,e=t.component,n=t.childFactory,i=kU(t,["component","childFactory"]),o=this.state.contextValue,a=DU(this.state.children).map(n);return delete i.appear,delete i.enter,delete i.exit,null===e?r.createElement(LU.Provider,{value:o},a):r.createElement(LU.Provider,{value:o},r.createElement(e,i,a))},e}(r.Component);BU.propTypes={},BU.defaultProps={component:"div",childFactory:function(t){return t}};const FU=BU,NU=!1;var UU="unmounted",VU="exited",WU="entering",GU="entered",qU="exiting",HU=function(t){function e(e,n){var r;r=t.call(this,e,n)||this;var i,o=n&&!n.isMounting?e.enter:e.appear;return r.appearStatus=null,e.in?o?(i=VU,r.appearStatus=WU):i=GU:i=e.unmountOnExit||e.mountOnEnter?UU:VU,r.state={status:i},r.nextCallback=null,r}OU(e,t),e.getDerivedStateFromProps=function(t,e){return t.in&&e.status===UU?{status:VU}:null};var n=e.prototype;return n.componentDidMount=function(){this.updateStatus(!0,this.appearStatus)},n.componentDidUpdate=function(t){var e=null;if(t!==this.props){var n=this.state.status;this.props.in?n!==WU&&n!==GU&&(e=WU):n!==WU&&n!==GU||(e=qU)}this.updateStatus(!1,e)},n.componentWillUnmount=function(){this.cancelNextCallback()},n.getTimeouts=function(){var t,e,n,r=this.props.timeout;return t=e=n=r,null!=r&&"number"!==typeof r&&(t=r.exit,e=r.enter,n=void 0!==r.appear?r.appear:e),{exit:t,enter:e,appear:n}},n.updateStatus=function(t,e){if(void 0===t&&(t=!1),null!==e)if(this.cancelNextCallback(),e===WU){if(this.props.unmountOnExit||this.props.mountOnEnter){var n=this.props.nodeRef?this.props.nodeRef.current:a.findDOMNode(this);n&&function(t){t.scrollTop}(n)}this.performEnter(t)}else this.performExit();else this.props.unmountOnExit&&this.state.status===VU&&this.setState({status:UU})},n.performEnter=function(t){var e=this,n=this.props.enter,r=this.context?this.context.isMounting:t,i=this.props.nodeRef?[r]:[a.findDOMNode(this),r],o=i[0],s=i[1],l=this.getTimeouts(),c=r?l.appear:l.enter;!t&&!n||NU?this.safeSetState({status:GU},(function(){e.props.onEntered(o)})):(this.props.onEnter(o,s),this.safeSetState({status:WU},(function(){e.props.onEntering(o,s),e.onTransitionEnd(c,(function(){e.safeSetState({status:GU},(function(){e.props.onEntered(o,s)}))}))})))},n.performExit=function(){var t=this,e=this.props.exit,n=this.getTimeouts(),r=this.props.nodeRef?void 0:a.findDOMNode(this);e&&!NU?(this.props.onExit(r),this.safeSetState({status:qU},(function(){t.props.onExiting(r),t.onTransitionEnd(n.exit,(function(){t.safeSetState({status:VU},(function(){t.props.onExited(r)}))}))}))):this.safeSetState({status:VU},(function(){t.props.onExited(r)}))},n.cancelNextCallback=function(){null!==this.nextCallback&&(this.nextCallback.cancel(),this.nextCallback=null)},n.safeSetState=function(t,e){e=this.setNextCallback(e),this.setState(t,e)},n.setNextCallback=function(t){var e=this,n=!0;return this.nextCallback=function(r){n&&(n=!1,e.nextCallback=null,t(r))},this.nextCallback.cancel=function(){n=!1},this.nextCallback},n.onTransitionEnd=function(t,e){this.setNextCallback(e);var n=this.props.nodeRef?this.props.nodeRef.current:a.findDOMNode(this),r=null==t&&!this.props.addEndListener;if(n&&!r){if(this.props.addEndListener){var i=this.props.nodeRef?[this.nextCallback]:[n,this.nextCallback],o=i[0],s=i[1];this.props.addEndListener(o,s)}null!=t&&setTimeout(this.nextCallback,t)}else setTimeout(this.nextCallback,0)},n.render=function(){var t=this.state.status;if(t===UU)return null;var e=this.props,n=e.children,i=(e.in,e.mountOnEnter,e.unmountOnExit,e.appear,e.enter,e.exit,e.timeout,e.addEndListener,e.onEnter,e.onEntering,e.onEntered,e.onExit,e.onExiting,e.onExited,e.nodeRef,kU(e,["children","in","mountOnEnter","unmountOnExit","appear","enter","exit","timeout","addEndListener","onEnter","onEntering","onEntered","onExit","onExiting","onExited","nodeRef"]));return r.createElement(LU.Provider,{value:null},"function"===typeof n?n(t,i):r.cloneElement(r.Children.only(n),i))},e}(r.Component);function ZU(){}HU.contextType=LU,HU.propTypes={},HU.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1,enter:!0,exit:!0,onEnter:ZU,onEntering:ZU,onEntered:ZU,onExit:ZU,onExiting:ZU,onExited:ZU},HU.UNMOUNTED=UU,HU.EXITED=VU,HU.ENTERING=WU,HU.ENTERED=GU,HU.EXITING=qU;const XU=HU;var YU=["children","appearOptions","enterOptions","leaveOptions"];function KU(t){return KU="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},KU(t)}function $U(){return $U=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},$U.apply(this,arguments)}function JU(t,e){if(null==t)return{};var n,r,i=function(t,e){if(null==t)return{};var n,r,i={},o=Object.keys(t);for(r=0;r<o.length;r++)n=o[r],e.indexOf(n)>=0||(i[n]=t[n]);return i}(t,e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(r=0;r<o.length;r++)n=o[r],e.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function QU(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function tV(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?QU(Object(n),!0).forEach((function(e){aV(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):QU(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function eV(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,sV(r.key),r)}}function nV(t,e){return nV=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},nV(t,e)}function rV(t){var e=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(pbt){return!1}}();return function(){var n,r=oV(t);if(e){var i=oV(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return function(t,e){if(e&&("object"===KU(e)||"function"===typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return iV(t)}(this,n)}}function iV(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function oV(t){return oV=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},oV(t)}function aV(t,e,n){return(e=sV(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function sV(t){var e=function(t,e){if("object"!==KU(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!==KU(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===KU(e)?e:String(e)}var lV=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.steps,n=t.duration;return e&&e.length?e.reduce((function(t,e){return t+(Number.isFinite(e.duration)&&e.duration>0?e.duration:0)}),0):Number.isFinite(n)?n:0},cV=function(t){!function(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&nV(t,e)}(a,t);var e,n,i,o=rV(a);function a(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,a),aV(iV(t=o.call(this)),"handleEnter",(function(e,n){var r=t.props,i=r.appearOptions,o=r.enterOptions;t.handleStyleActive(n?i:o)})),aV(iV(t),"handleExit",(function(){var e=t.props.leaveOptions;t.handleStyleActive(e)})),t.state={isActive:!1},t}return e=a,n=[{key:"handleStyleActive",value:function(t){if(t){var e=t.onAnimationEnd?function(){t.onAnimationEnd()}:null;this.setState(tV(tV({},t),{},{onAnimationEnd:e,isActive:!0}))}}},{key:"parseTimeout",value:function(){var t=this.props,e=t.appearOptions,n=t.enterOptions,r=t.leaveOptions;return lV(e)+lV(n)+lV(r)}},{key:"render",value:function(){var t=this,e=this.props,n=e.children,i=(e.appearOptions,e.enterOptions,e.leaveOptions,JU(e,YU));return r.createElement(XU,$U({},i,{onEnter:this.handleEnter,onExit:this.handleExit,timeout:this.parseTimeout()}),(function(){return r.createElement(PU,t.state,r.Children.only(n))}))}}],n&&eV(e.prototype,n),i&&eV(e,i),Object.defineProperty(e,"prototype",{writable:!1}),a}(r.Component);cV.propTypes={appearOptions:$F().object,enterOptions:$F().object,leaveOptions:$F().object,children:$F().element};const uV=cV;function hV(t){var e=t.component,n=t.children,i=t.appear,o=t.enter,a=t.leave;return r.createElement(FU,{component:e},r.Children.map(n,(function(t,e){return r.createElement(uV,{appearOptions:i,enterOptions:o,leaveOptions:a,key:"child-".concat(e)},t)})))}hV.propTypes={appear:$F().object,enter:$F().object,leave:$F().object,children:$F().oneOfType([$F().array,$F().element]),component:$F().any},hV.defaultProps={component:"span"};const dV=PU;function fV(t){return fV="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},fV(t)}function pV(){return pV=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},pV.apply(this,arguments)}function mV(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,i,o,a,s=[],l=!0,c=!1;try{if(o=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=o.call(n)).done)&&(s.push(r.value),s.length!==e);l=!0);}catch(t){c=!0,i=t}finally{try{if(!l&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw i}}return s}}(t,e)||function(t,e){if(!t)return;if("string"===typeof t)return gV(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return gV(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function gV(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function yV(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function vV(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?yV(Object(n),!0).forEach((function(e){_V(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):yV(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function _V(t,e,n){return e=function(t){var e=function(t,e){if("object"!=fV(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=fV(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==fV(e)?e:String(e)}(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var bV=function(t,e,n,r,i){var o,a=Math.min(Math.abs(n)/2,Math.abs(r)/2),s=r>=0?1:-1,l=n>=0?1:-1,c=r>=0&&n>=0||r<0&&n<0?1:0;if(a>0&&i instanceof Array){for(var u=[0,0,0,0],h=0;h<4;h++)u[h]=i[h]>a?a:i[h];o="M".concat(t,",").concat(e+s*u[0]),u[0]>0&&(o+="A ".concat(u[0],",").concat(u[0],",0,0,").concat(c,",").concat(t+l*u[0],",").concat(e)),o+="L ".concat(t+n-l*u[1],",").concat(e),u[1]>0&&(o+="A ".concat(u[1],",").concat(u[1],",0,0,").concat(c,",\n        ").concat(t+n,",").concat(e+s*u[1])),o+="L ".concat(t+n,",").concat(e+r-s*u[2]),u[2]>0&&(o+="A ".concat(u[2],",").concat(u[2],",0,0,").concat(c,",\n        ").concat(t+n-l*u[2],",").concat(e+r)),o+="L ".concat(t+l*u[3],",").concat(e+r),u[3]>0&&(o+="A ".concat(u[3],",").concat(u[3],",0,0,").concat(c,",\n        ").concat(t,",").concat(e+r-s*u[3])),o+="Z"}else if(a>0&&i===+i&&i>0){var d=Math.min(a,i);o="M ".concat(t,",").concat(e+s*d,"\n            A ").concat(d,",").concat(d,",0,0,").concat(c,",").concat(t+l*d,",").concat(e,"\n            L ").concat(t+n-l*d,",").concat(e,"\n            A ").concat(d,",").concat(d,",0,0,").concat(c,",").concat(t+n,",").concat(e+s*d,"\n            L ").concat(t+n,",").concat(e+r-s*d,"\n            A ").concat(d,",").concat(d,",0,0,").concat(c,",").concat(t+n-l*d,",").concat(e+r,"\n            L ").concat(t+l*d,",").concat(e+r,"\n            A ").concat(d,",").concat(d,",0,0,").concat(c,",").concat(t,",").concat(e+r-s*d," Z")}else o="M ".concat(t,",").concat(e," h ").concat(n," v ").concat(r," h ").concat(-n," Z");return o},xV=function(t,e){if(!t||!e)return!1;var n=t.x,r=t.y,i=e.x,o=e.y,a=e.width,s=e.height;if(Math.abs(a)>0&&Math.abs(s)>0){var l=Math.min(i,i+a),c=Math.max(i,i+a),u=Math.min(o,o+s),h=Math.max(o,o+s);return n>=l&&n<=c&&r>=u&&r<=h}return!1},wV={x:0,y:0,width:0,height:0,radius:0,isAnimationActive:!1,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},SV=function(t){var e=vV(vV({},wV),t),n=(0,r.useRef)(),i=mV((0,r.useState)(-1),2),o=i[0],a=i[1];(0,r.useEffect)((function(){if(n.current&&n.current.getTotalLength)try{var t=n.current.getTotalLength();t&&a(t)}catch(e){}}),[]);var s=e.x,l=e.y,c=e.width,u=e.height,h=e.radius,d=e.className,f=e.animationEasing,p=e.animationDuration,m=e.animationBegin,g=e.isAnimationActive,y=e.isUpdateAnimationActive;if(s!==+s||l!==+l||c!==+c||u!==+u||0===c||0===u)return null;var v=cR("recharts-rectangle",d);return y?r.createElement(dV,{canBegin:o>0,from:{width:c,height:u,x:s,y:l},to:{width:c,height:u,x:s,y:l},duration:p,animationEasing:f,isActive:y},(function(t){var i=t.width,a=t.height,s=t.x,l=t.y;return r.createElement(dV,{canBegin:o>0,from:"0px ".concat(-1===o?1:o,"px"),to:"".concat(o,"px 0px"),attributeName:"strokeDasharray",begin:m,duration:p,isActive:g,easing:f},r.createElement("path",pV({},fD(e,!0),{className:v,d:bV(s,l,i,a,h),ref:n})))})):r.createElement("path",pV({},fD(e,!0),{className:v,d:bV(s,l,c,u,h)}))};function EV(t){return EV="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},EV(t)}function TV(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function MV(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?TV(Object(n),!0).forEach((function(e){AV(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):TV(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function AV(t,e,n){return e=function(t){var e=function(t,e){if("object"!=EV(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=EV(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==EV(e)?e:String(e)}(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var CV={widthCache:{},cacheCount:0},PV={position:"absolute",top:"-20000px",left:0,padding:0,margin:0,border:"none",whiteSpace:"pre"},kV="recharts_measurement_span";var IV=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(void 0===t||null===t||nB.isSsr)return{width:0,height:0};var n=function(t){var e=MV({},t);return Object.keys(e).forEach((function(t){e[t]||delete e[t]})),e}(e),r=JSON.stringify({text:t,copyStyle:n});if(CV.widthCache[r])return CV.widthCache[r];try{var i=document.getElementById(kV);i||((i=document.createElement("span")).setAttribute("id",kV),i.setAttribute("aria-hidden","true"),document.body.appendChild(i));var o=MV(MV({},PV),n);Object.assign(i.style,o),i.textContent="".concat(t);var a=i.getBoundingClientRect(),s={width:a.width,height:a.height};return CV.widthCache[r]=s,++CV.cacheCount>2e3&&(CV.cacheCount=0,CV.widthCache={}),s}catch(pbt){return{width:0,height:0}}};function OV(t){return OV="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},OV(t)}function LV(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,i,o,a,s=[],l=!0,c=!1;try{if(o=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=o.call(n)).done)&&(s.push(r.value),s.length!==e);l=!0);}catch(t){c=!0,i=t}finally{try{if(!l&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw i}}return s}}(t,e)||function(t,e){if(!t)return;if("string"===typeof t)return jV(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return jV(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function jV(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function zV(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,RV(r.key),r)}}function RV(t){var e=function(t,e){if("object"!=OV(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=OV(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==OV(e)?e:String(e)}var DV=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([*/])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,BV=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([+-])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,FV=/^px|cm|vh|vw|em|rem|%|mm|in|pt|pc|ex|ch|vmin|vmax|Q$/,NV=/(-?\d+(?:\.\d+)?)([a-zA-Z%]+)?/,UV={cm:96/2.54,mm:96/25.4,pt:96/72,pc:16,in:96,Q:96/101.6,px:1},VV=Object.keys(UV),WV="NaN";var GV=function(){function t(e,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.num=e,this.unit=n,this.num=e,this.unit=n,Number.isNaN(e)&&(this.unit=""),""===n||FV.test(n)||(this.num=NaN,this.unit=""),VV.includes(n)&&(this.num=function(t,e){return t*UV[e]}(e,n),this.unit="px")}var e,n,r;return e=t,r=[{key:"parse",value:function(e){var n,r=LV(null!==(n=NV.exec(e))&&void 0!==n?n:[],3),i=r[1],o=r[2];return new t(parseFloat(i),null!==o&&void 0!==o?o:"")}}],(n=[{key:"add",value:function(e){return this.unit!==e.unit?new t(NaN,""):new t(this.num+e.num,this.unit)}},{key:"subtract",value:function(e){return this.unit!==e.unit?new t(NaN,""):new t(this.num-e.num,this.unit)}},{key:"multiply",value:function(e){return""!==this.unit&&""!==e.unit&&this.unit!==e.unit?new t(NaN,""):new t(this.num*e.num,this.unit||e.unit)}},{key:"divide",value:function(e){return""!==this.unit&&""!==e.unit&&this.unit!==e.unit?new t(NaN,""):new t(this.num/e.num,this.unit||e.unit)}},{key:"toString",value:function(){return"".concat(this.num).concat(this.unit)}},{key:"isNaN",value:function(){return Number.isNaN(this.num)}}])&&zV(e.prototype,n),r&&zV(e,r),Object.defineProperty(e,"prototype",{writable:!1}),t}();function qV(t){if(t.includes(WV))return WV;for(var e=t;e.includes("*")||e.includes("/");){var n,r=LV(null!==(n=DV.exec(e))&&void 0!==n?n:[],4),i=r[1],o=r[2],a=r[3],s=GV.parse(null!==i&&void 0!==i?i:""),l=GV.parse(null!==a&&void 0!==a?a:""),c="*"===o?s.multiply(l):s.divide(l);if(c.isNaN())return WV;e=e.replace(DV,c.toString())}for(;e.includes("+")||/.-\d+(?:\.\d+)?/.test(e);){var u,h=LV(null!==(u=BV.exec(e))&&void 0!==u?u:[],4),d=h[1],f=h[2],p=h[3],m=GV.parse(null!==d&&void 0!==d?d:""),g=GV.parse(null!==p&&void 0!==p?p:""),y="+"===f?m.add(g):m.subtract(g);if(y.isNaN())return WV;e=e.replace(BV,y.toString())}return e}var HV=/\(([^()]*)\)/;function ZV(t){var e=t.replace(/\s+/g,"");return e=function(t){for(var e=t;e.includes("(");){var n=LV(HV.exec(e),2)[1];e=e.replace(HV,qV(n))}return e}(e),e=qV(e)}function XV(t){var e=function(t){try{return ZV(t)}catch(pbt){return WV}}(t.slice(5,-1));return e===WV?"":e}var YV=["x","y","lineHeight","capHeight","scaleToFit","textAnchor","verticalAnchor","fill"],KV=["dx","dy","angle","className","breakAll"];function $V(){return $V=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},$V.apply(this,arguments)}function JV(t,e){if(null==t)return{};var n,r,i=function(t,e){if(null==t)return{};var n,r,i={},o=Object.keys(t);for(r=0;r<o.length;r++)n=o[r],e.indexOf(n)>=0||(i[n]=t[n]);return i}(t,e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(r=0;r<o.length;r++)n=o[r],e.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function QV(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,i,o,a,s=[],l=!0,c=!1;try{if(o=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=o.call(n)).done)&&(s.push(r.value),s.length!==e);l=!0);}catch(t){c=!0,i=t}finally{try{if(!l&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw i}}return s}}(t,e)||function(t,e){if(!t)return;if("string"===typeof t)return tW(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return tW(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function tW(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var eW=/[ \f\n\r\t\v\u2028\u2029]+/,nW=function(t){var e=t.children,n=t.breakAll,r=t.style;try{var i=[];return sR()(e)||(i=n?e.toString().split(""):e.toString().split(eW)),{wordsWithComputedWidth:i.map((function(t){return{word:t,width:IV(t,r).width}})),spaceWidth:n?0:IV("\xa0",r).width}}catch(pbt){return null}},rW=function(t){return[{words:sR()(t)?[]:t.toString().split(eW)}]},iW=function(t){var e=t.width,n=t.scaleToFit,r=t.children,i=t.style,o=t.breakAll,a=t.maxLines;if((e||n)&&!nB.isSsr){var s=nW({breakAll:o,children:r,style:i});return s?function(t,e,n,r,i){var o=t.maxLines,a=t.children,s=t.style,l=t.breakAll,c=bR(o),u=a,h=function(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]).reduce((function(t,e){var o=e.word,a=e.width,s=t[t.length-1];if(s&&(null==r||i||s.width+a+n<Number(r)))s.words.push(o),s.width+=a+n;else{var l={words:[o],width:a};t.push(l)}return t}),[])},d=h(e);if(!c)return d;for(var f,p=function(t){var e=u.slice(0,t),n=nW({breakAll:l,style:s,children:e+"\u2026"}).wordsWithComputedWidth,i=h(n),a=i.length>o||function(t){return t.reduce((function(t,e){return t.width>e.width?t:e}))}(i).width>Number(r);return[a,i]},m=0,g=u.length-1,y=0;m<=g&&y<=u.length-1;){var v=Math.floor((m+g)/2),_=QV(p(v-1),2),b=_[0],x=_[1],w=QV(p(v),1)[0];if(b||w||(m=v+1),b&&w&&(g=v-1),!b&&w){f=x;break}y++}return f||d}({breakAll:o,children:r,maxLines:a,style:i},s.wordsWithComputedWidth,s.spaceWidth,e,n):rW(r)}return rW(r)},oW="#808080",aW=function(t){var e=t.x,n=void 0===e?0:e,i=t.y,o=void 0===i?0:i,a=t.lineHeight,s=void 0===a?"1em":a,l=t.capHeight,c=void 0===l?"0.71em":l,u=t.scaleToFit,h=void 0!==u&&u,d=t.textAnchor,f=void 0===d?"start":d,p=t.verticalAnchor,m=void 0===p?"end":p,g=t.fill,y=void 0===g?oW:g,v=JV(t,YV),_=(0,r.useMemo)((function(){return iW({breakAll:v.breakAll,children:v.children,maxLines:v.maxLines,scaleToFit:h,style:v.style,width:v.width})}),[v.breakAll,v.children,v.maxLines,h,v.style,v.width]),b=v.dx,x=v.dy,w=v.angle,S=v.className,E=v.breakAll,T=JV(v,KV);if(!xR(n)||!xR(o))return null;var M,A=n+(bR(b)?b:0),C=o+(bR(x)?x:0);switch(m){case"start":M=XV("calc(".concat(c,")"));break;case"middle":M=XV("calc(".concat((_.length-1)/2," * -").concat(s," + (").concat(c," / 2))"));break;default:M=XV("calc(".concat(_.length-1," * -").concat(s,")"))}var P=[];if(h){var k=_[0].width,I=v.width;P.push("scale(".concat((bR(I)?I/k:1)/k,")"))}return w&&P.push("rotate(".concat(w,", ").concat(A,", ").concat(C,")")),P.length&&(T.transform=P.join(" ")),r.createElement("text",$V({},fD(T,!0),{x:A,y:C,className:cR("recharts-text",S),textAnchor:f,fill:y.includes("url")?oW:y}),_.map((function(t,e){var n=t.words.join(E?"":" ");return r.createElement("tspan",{x:A,dy:0===e?M:s,key:n},n)})))};function sW(t,e){if((i=t.length)>1)for(var n,r,i,o=1,a=t[e[0]],s=a.length;o<i;++o)for(r=a,a=t[e[o]],n=0;n<s;++n)a[n][1]+=a[n][0]=isNaN(r[n][1])?r[n][0]:r[n][1]}Array.prototype.slice;function lW(t){return"object"===typeof t&&"length"in t?t:Array.from(t)}function cW(t){for(var e=t.length,n=new Array(e);--e>=0;)n[e]=e;return n}function uW(t,e){return t[e]}function hW(t){const e=[];return e.key=t,e}var dW=n(539),fW=n.n(dW),pW=n(6745),mW=n.n(pW),gW=n(3538),yW=n.n(gW),vW=n(9853),_W=n.n(vW),bW=n(8210),xW=n.n(bW);function wW(t){return function(t){if(Array.isArray(t))return SW(t)}(t)||function(t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"===typeof t)return SW(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return SW(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function SW(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var EW=function(t){return t},TW={"@@functional/placeholder":!0},MW=function(t){return t===TW},AW=function(t){return function e(){return 0===arguments.length||1===arguments.length&&MW(arguments.length<=0?void 0:arguments[0])?e:t.apply(void 0,arguments)}},CW=function t(e,n){return 1===e?n:AW((function(){for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];var a=i.filter((function(t){return t!==TW})).length;return a>=e?n.apply(void 0,i):t(e-a,AW((function(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];var o=i.map((function(t){return MW(t)?e.shift():t}));return n.apply(void 0,wW(o).concat(e))})))}))},PW=function(t){return CW(t.length,t)},kW=function(t,e){for(var n=[],r=t;r<e;++r)n[r-t]=r;return n},IW=PW((function(t,e){return Array.isArray(e)?e.map(t):Object.keys(e).map((function(t){return e[t]})).map(t)})),OW=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];if(!e.length)return EW;var r=e.reverse(),i=r[0],o=r.slice(1);return function(){return o.reduce((function(t,e){return e(t)}),i.apply(void 0,arguments))}},LW=function(t){return Array.isArray(t)?t.reverse():t.split("").reverse.join("")},jW=function(t){var e=null,n=null;return function(){for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return e&&i.every((function(t,n){return t===e[n]}))?n:(e=i,n=t.apply(void 0,i))}};var zW=PW((function(t,e,n){var r=+t;return r+n*(+e-r)})),RW=PW((function(t,e,n){var r=e-+t;return(n-t)/(r=r||1/0)})),DW=PW((function(t,e,n){var r=e-+t;return r=r||1/0,Math.max(0,Math.min(1,(n-t)/r))}));const BW={rangeStep:function(t,e,n){for(var r=new(xW())(t),i=0,o=[];r.lt(e)&&i<1e5;)o.push(r.toNumber()),r=r.add(n),i++;return o},getDigitCount:function(t){return 0===t?1:Math.floor(new(xW())(t).abs().log(10).toNumber())+1},interpolateNumber:zW,uninterpolateNumber:RW,uninterpolateTruncation:DW};function FW(t){return function(t){if(Array.isArray(t))return VW(t)}(t)||function(t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||UW(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function NW(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(t)))return;var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!e||n.length!==e);r=!0);}catch(l){i=!0,o=l}finally{try{r||null==s.return||s.return()}finally{if(i)throw o}}return n}(t,e)||UW(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function UW(t,e){if(t){if("string"===typeof t)return VW(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?VW(t,e):void 0}}function VW(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function WW(t){var e=NW(t,2),n=e[0],r=e[1],i=n,o=r;return n>r&&(i=r,o=n),[i,o]}function GW(t,e,n){if(t.lte(0))return new(xW())(0);var r=BW.getDigitCount(t.toNumber()),i=new(xW())(10).pow(r),o=t.div(i),a=1!==r?.05:.1,s=new(xW())(Math.ceil(o.div(a).toNumber())).add(n).mul(a).mul(i);return e?s:new(xW())(Math.ceil(s))}function qW(t,e,n){var r=1,i=new(xW())(t);if(!i.isint()&&n){var o=Math.abs(t);o<1?(r=new(xW())(10).pow(BW.getDigitCount(t)-1),i=new(xW())(Math.floor(i.div(r).toNumber())).mul(r)):o>1&&(i=new(xW())(Math.floor(t)))}else 0===t?i=new(xW())(Math.floor((e-1)/2)):n||(i=new(xW())(Math.floor(t)));var a=Math.floor((e-1)/2);return OW(IW((function(t){return i.add(new(xW())(t-a).mul(r)).toNumber()})),kW)(0,e)}function HW(t,e,n,r){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0;if(!Number.isFinite((e-t)/(n-1)))return{step:new(xW())(0),tickMin:new(xW())(0),tickMax:new(xW())(0)};var o,a=GW(new(xW())(e).sub(t).div(n-1),r,i);o=t<=0&&e>=0?new(xW())(0):(o=new(xW())(t).add(e).div(2)).sub(new(xW())(o).mod(a));var s=Math.ceil(o.sub(t).div(a).toNumber()),l=Math.ceil(new(xW())(e).sub(o).div(a).toNumber()),c=s+l+1;return c>n?HW(t,e,n,r,i+1):(c<n&&(l=e>0?l+(n-c):l,s=e>0?s:s+(n-c)),{step:a,tickMin:o.sub(new(xW())(s).mul(a)),tickMax:o.add(new(xW())(l).mul(a))})}var ZW=jW((function(t){var e=NW(t,2),n=e[0],r=e[1],i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:6,o=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],a=Math.max(i,2),s=NW(WW([n,r]),2),l=s[0],c=s[1];if(l===-1/0||c===1/0){var u=c===1/0?[l].concat(FW(kW(0,i-1).map((function(){return 1/0})))):[].concat(FW(kW(0,i-1).map((function(){return-1/0}))),[c]);return n>r?LW(u):u}if(l===c)return qW(l,i,o);var h=HW(l,c,a,o),d=h.step,f=h.tickMin,p=h.tickMax,m=BW.rangeStep(f,p.add(new(xW())(.1).mul(d)),d);return n>r?LW(m):m})),XW=(jW((function(t){var e=NW(t,2),n=e[0],r=e[1],i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:6,o=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],a=Math.max(i,2),s=NW(WW([n,r]),2),l=s[0],c=s[1];if(l===-1/0||c===1/0)return[n,r];if(l===c)return qW(l,i,o);var u=GW(new(xW())(c).sub(l).div(a-1),o,0),h=OW(IW((function(t){return new(xW())(l).add(new(xW())(t).mul(u)).toNumber()})),kW)(0,a).filter((function(t){return t>=l&&t<=c}));return n>r?LW(h):h})),jW((function(t,e){var n=NW(t,2),r=n[0],i=n[1],o=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],a=NW(WW([r,i]),2),s=a[0],l=a[1];if(s===-1/0||l===1/0)return[r,i];if(s===l)return[s];var c=Math.max(e,2),u=GW(new(xW())(l).sub(s).div(c-1),o,0),h=[].concat(FW(BW.rangeStep(new(xW())(s),new(xW())(l).sub(new(xW())(.99).mul(u)),u)),[l]);return r>i?LW(h):h}))),YW=["offset","layout","width","dataKey","data","dataPointFormatter","xAxis","yAxis"];function KW(){return KW=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},KW.apply(this,arguments)}function $W(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,i,o,a,s=[],l=!0,c=!1;try{if(o=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=o.call(n)).done)&&(s.push(r.value),s.length!==e);l=!0);}catch(t){c=!0,i=t}finally{try{if(!l&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw i}}return s}}(t,e)||function(t,e){if(!t)return;if("string"===typeof t)return JW(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return JW(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function JW(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function QW(t,e){if(null==t)return{};var n,r,i=function(t,e){if(null==t)return{};var n,r,i={},o=Object.keys(t);for(r=0;r<o.length;r++)n=o[r],e.indexOf(n)>=0||(i[n]=t[n]);return i}(t,e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(r=0;r<o.length;r++)n=o[r],e.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function tG(t){var e=t.offset,n=t.layout,i=t.width,o=t.dataKey,a=t.data,s=t.dataPointFormatter,l=t.xAxis,c=t.yAxis,u=QW(t,YW),h=fD(u,!1);"x"===t.direction&&"number"!==l.type&&PD(!1);var d=a.map((function(t){var a=s(t,o),u=a.x,d=a.y,f=a.value,p=a.errorVal;if(!p)return null;var m,g,y=[];if(Array.isArray(p)){var v=$W(p,2);m=v[0],g=v[1]}else m=g=p;if("vertical"===n){var _=l.scale,b=d+e,x=b+i,w=b-i,S=_(f-m),E=_(f+g);y.push({x1:E,y1:x,x2:E,y2:w}),y.push({x1:S,y1:b,x2:E,y2:b}),y.push({x1:S,y1:x,x2:S,y2:w})}else if("horizontal"===n){var T=c.scale,M=u+e,A=M-i,C=M+i,P=T(f-m),k=T(f+g);y.push({x1:A,y1:k,x2:C,y2:k}),y.push({x1:M,y1:P,x2:M,y2:k}),y.push({x1:A,y1:P,x2:C,y2:P})}return r.createElement(DD,KW({className:"recharts-errorBar",key:"bar-".concat(y.map((function(t){return"".concat(t.x1,"-").concat(t.x2,"-").concat(t.y1,"-").concat(t.y2)})))},h),y.map((function(t){return r.createElement("line",KW({},t,{key:"line-".concat(t.x1,"-").concat(t.x2,"-").concat(t.y1,"-").concat(t.y2)}))})))}));return r.createElement(DD,{className:"recharts-errorBars"},d)}function eG(t){return eG="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},eG(t)}function nG(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function rG(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?nG(Object(n),!0).forEach((function(e){iG(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):nG(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function iG(t,e,n){return e=function(t){var e=function(t,e){if("object"!=eG(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=eG(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==eG(e)?e:String(e)}(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}tG.defaultProps={stroke:"black",strokeWidth:1.5,width:5,offset:0,layout:"horizontal"},tG.displayName="ErrorBar";var oG=function(t){var e,n=t.children,r=t.formattedGraphicalItems,i=t.legendWidth,o=t.legendContent,a=cD(n,ZF);return a?(e=a.props&&a.props.payload?a.props&&a.props.payload:"children"===o?(r||[]).reduce((function(t,e){var n=e.item,r=e.props,i=r.sectors||r.data||[];return t.concat(i.map((function(t){return{type:a.props.iconType||n.props.legendType,value:t.name,color:t.fill,payload:t}})))}),[]):(r||[]).map((function(t){var e=t.item,n=e.props,r=n.dataKey,i=n.name,o=n.legendType;return{inactive:n.hide,dataKey:r,type:a.props.iconType||o||"square",color:pG(e),value:i||r,payload:e.props}})),rG(rG(rG({},a.props),ZF.getWithHeight(a,i)),{},{payload:e,item:a})):null};function aG(t){return aG="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},aG(t)}function sG(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function lG(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?sG(Object(n),!0).forEach((function(e){cG(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):sG(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function cG(t,e,n){return e=function(t){var e=function(t,e){if("object"!=aG(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=aG(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==aG(e)?e:String(e)}(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function uG(t){return function(t){if(Array.isArray(t))return hG(t)}(t)||function(t){if("undefined"!==typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"===typeof t)return hG(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return hG(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function hG(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function dG(t,e,n){return sR()(t)||sR()(e)?n:xR(e)?mR()(t,e,n):VR()(e)?e(t):n}function fG(t,e,n,r){var i=yW()(t,(function(t){return dG(t,e)}));if("number"===n){var o=i.filter((function(t){return bR(t)||parseFloat(t)}));return o.length?[mW()(o),fW()(o)]:[1/0,-1/0]}return(r?i.filter((function(t){return!sR()(t)})):i).map((function(t){return xR(t)||t instanceof Date?t:""}))}var pG=function(t){var e,n=t.type.displayName,r=t.props,i=r.stroke,o=r.fill;switch(n){case"Line":e=i;break;case"Area":case"Radar":e=i&&"none"!==i?i:o;break;default:e=o}return e},mG=function(t,e,n,r,i){var o=lD(e.props.children,tG).filter((function(t){return function(t,e,n){return!!sR()(e)||("horizontal"===t?"yAxis"===e:"vertical"===t||"x"===n?"xAxis"===e:"y"!==n||"yAxis"===e)}(r,i,t.props.direction)}));if(o&&o.length){var a=o.map((function(t){return t.props.dataKey}));return t.reduce((function(t,e){var r=dG(e,n);if(sR()(r))return t;var i=Array.isArray(r)?[mW()(r),fW()(r)]:[r,r],o=a.reduce((function(t,n){var r=dG(e,n,0),o=i[0]-Math.abs(Array.isArray(r)?r[0]:r),a=i[1]+Math.abs(Array.isArray(r)?r[1]:r);return[Math.min(o,t[0]),Math.max(a,t[1])]}),[1/0,-1/0]);return[Math.min(o[0],t[0]),Math.max(o[1],t[1])]}),[1/0,-1/0])}return null},gG=function(t,e,n,r,i){var o=e.map((function(e){var o=e.props.dataKey;return"number"===n&&o&&mG(t,e,o,r)||fG(t,o,n,i)}));if("number"===n)return o.reduce((function(t,e){return[Math.min(t[0],e[0]),Math.max(t[1],e[1])]}),[1/0,-1/0]);var a={};return o.reduce((function(t,e){for(var n=0,r=e.length;n<r;n++)a[e[n]]||(a[e[n]]=!0,t.push(e[n]));return t}),[])},yG=function(t,e){return"horizontal"===t&&"xAxis"===e||"vertical"===t&&"yAxis"===e||"centric"===t&&"angleAxis"===e||"radial"===t&&"radiusAxis"===e},vG=function(t,e,n){if(!t)return null;var r=t.scale,i=t.duplicateDomain,o=t.type,a=t.range,s="scaleBand"===t.realScaleType?r.bandwidth()/2:2,l=(e||n)&&"category"===o&&r.bandwidth?r.bandwidth()/s:0;return l="angleAxis"===t.axisType&&(null===a||void 0===a?void 0:a.length)>=2?2*vR(a[0]-a[1])*l:l,e&&(t.ticks||t.niceTicks)?(t.ticks||t.niceTicks).map((function(t){var e=i?i.indexOf(t):t;return{coordinate:r(e)+l,value:t,offset:l}})).filter((function(t){return!fR()(t.coordinate)})):t.isCategorical&&t.categoricalDomain?t.categoricalDomain.map((function(t,e){return{coordinate:r(t)+l,value:t,index:e,offset:l}})):r.ticks&&!n?r.ticks(t.tickCount).map((function(t){return{coordinate:r(t)+l,value:t,offset:l}})):r.domain().map((function(t,e){return{coordinate:r(t)+l,value:i?i[t]:t,index:e,offset:l}}))},_G=new WeakMap,bG=function(t,e){if("function"!==typeof e)return t;_G.has(t)||_G.set(t,new WeakMap);var n=_G.get(t);if(n.has(e))return n.get(e);var r=function(){t.apply(void 0,arguments),e.apply(void 0,arguments)};return n.set(e,r),r},xG=1e-4,wG={sign:function(t){var e=t.length;if(!(e<=0))for(var n=0,r=t[0].length;n<r;++n)for(var i=0,o=0,a=0;a<e;++a){var s=fR()(t[a][n][1])?t[a][n][0]:t[a][n][1];s>=0?(t[a][n][0]=i,t[a][n][1]=i+s,i=t[a][n][1]):(t[a][n][0]=o,t[a][n][1]=o+s,o=t[a][n][1])}},expand:function(t,e){if((r=t.length)>0){for(var n,r,i,o=0,a=t[0].length;o<a;++o){for(i=n=0;n<r;++n)i+=t[n][o][1]||0;if(i)for(n=0;n<r;++n)t[n][o][1]/=i}sW(t,e)}},none:sW,silhouette:function(t,e){if((n=t.length)>0){for(var n,r=0,i=t[e[0]],o=i.length;r<o;++r){for(var a=0,s=0;a<n;++a)s+=t[a][r][1]||0;i[r][1]+=i[r][0]=-s/2}sW(t,e)}},wiggle:function(t,e){if((i=t.length)>0&&(r=(n=t[e[0]]).length)>0){for(var n,r,i,o=0,a=1;a<r;++a){for(var s=0,l=0,c=0;s<i;++s){for(var u=t[e[s]],h=u[a][1]||0,d=(h-(u[a-1][1]||0))/2,f=0;f<s;++f){var p=t[e[f]];d+=(p[a][1]||0)-(p[a-1][1]||0)}l+=h,c+=d*h}n[a-1][1]+=n[a-1][0]=o,l&&(o-=c/l)}n[a-1][1]+=n[a-1][0]=o,sW(t,e)}},positive:function(t){var e=t.length;if(!(e<=0))for(var n=0,r=t[0].length;n<r;++n)for(var i=0,o=0;o<e;++o){var a=fR()(t[o][n][1])?t[o][n][0]:t[o][n][1];a>=0?(t[o][n][0]=i,t[o][n][1]=i+a,i=t[o][n][1]):(t[o][n][0]=0,t[o][n][1]=0)}}},SG=function(t,e,n){var r=e.map((function(t){return t.props.dataKey})),i=wG[n],o=function(){var t=VB([]),e=cW,n=sW,r=uW;function i(i){var o,a,s=Array.from(t.apply(this,arguments),hW),l=s.length,c=-1;for(const t of i)for(o=0,++c;o<l;++o)(s[o][c]=[0,+r(t,s[o].key,c,i)]).data=t;for(o=0,a=lW(e(s));o<l;++o)s[a[o]].index=o;return n(s,a),s}return i.keys=function(e){return arguments.length?(t="function"===typeof e?e:VB(Array.from(e)),i):t},i.value=function(t){return arguments.length?(r="function"===typeof t?t:VB(+t),i):r},i.order=function(t){return arguments.length?(e=null==t?cW:"function"===typeof t?t:VB(Array.from(t)),i):e},i.offset=function(t){return arguments.length?(n=null==t?sW:t,i):n},i}().keys(r).value((function(t,e){return+dG(t,e,0)})).order(cW).offset(i);return o(t)};function EG(t){var e=t.axis,n=t.ticks,r=t.bandSize,i=t.entry,o=t.index,a=t.dataKey;if("category"===e.type){if(!e.allowDuplicatedCategory&&e.dataKey&&!sR()(i[e.dataKey])){var s=AR(n,"value",i[e.dataKey]);if(s)return s.coordinate+r/2}return n[o]?n[o].coordinate+r/2:null}var l=dG(i,sR()(a)?e.dataKey:a);return sR()(l)?null:e.scale(l)}var TG=function(t){var e=t.axis,n=t.ticks,r=t.offset,i=t.bandSize,o=t.entry,a=t.index;if("category"===e.type)return n[a]?n[a].coordinate+r:null;var s=dG(o,e.dataKey,e.domain[a]);return sR()(s)?null:e.scale(s)-i/2+r},MG=function(t,e,n){return Object.keys(t).reduce((function(r,i){var o=t[i].stackedData.reduce((function(t,r){var i=function(t){return t.reduce((function(t,e){return[mW()(e.concat([t[0]]).filter(bR)),fW()(e.concat([t[1]]).filter(bR))]}),[1/0,-1/0])}(r.slice(e,n+1));return[Math.min(t[0],i[0]),Math.max(t[1],i[1])]}),[1/0,-1/0]);return[Math.min(o[0],r[0]),Math.max(o[1],r[1])]}),[1/0,-1/0]).map((function(t){return t===1/0||t===-1/0?0:t}))},AG=/^dataMin[\s]*-[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,CG=/^dataMax[\s]*\+[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,PG=function(t,e,n){if(VR()(t))return t(e,n);if(!Array.isArray(t))return e;var r=[];if(bR(t[0]))r[0]=n?t[0]:Math.min(t[0],e[0]);else if(AG.test(t[0])){var i=+AG.exec(t[0])[1];r[0]=e[0]-i}else VR()(t[0])?r[0]=t[0](e[0]):r[0]=e[0];if(bR(t[1]))r[1]=n?t[1]:Math.max(t[1],e[1]);else if(CG.test(t[1])){var o=+CG.exec(t[1])[1];r[1]=e[1]+o}else VR()(t[1])?r[1]=t[1](e[1]):r[1]=e[1];return r},kG=function(t,e,n){if(t&&t.scale&&t.scale.bandwidth){var r=t.scale.bandwidth();if(!n||r>0)return r}if(t&&e&&e.length>=2){for(var i=oR()(e,(function(t){return t.coordinate})),o=1/0,a=1,s=i.length;a<s;a++){var l=i[a],c=i[a-1];o=Math.min((l.coordinate||0)-(c.coordinate||0),o)}return o===1/0?0:o}return n?void 0:0},IG=function(t,e,n){return t&&t.length?_W()(t,mR()(n,"type.defaultProps.domain"))?e:t:e},OG=function(t,e){var n=t.props,r=n.dataKey,i=n.name,o=n.unit,a=n.formatter,s=n.tooltipType,l=n.chartType,c=n.hide;return lG(lG({},fD(t,!1)),{},{dataKey:r,unit:o,formatter:a,name:i||r,color:pG(t),value:dG(e,r),type:s,payload:e,chartType:l,hide:c})};function LG(t){return LG="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},LG(t)}function jG(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function zG(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?jG(Object(n),!0).forEach((function(e){RG(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):jG(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function RG(t,e,n){return e=function(t){var e=function(t,e){if("object"!=LG(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=LG(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==LG(e)?e:String(e)}(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var DG=["Webkit","Moz","O","ms"];function BG(t){return BG="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},BG(t)}function FG(){return FG=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},FG.apply(this,arguments)}function NG(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function UG(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?NG(Object(n),!0).forEach((function(e){XG(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):NG(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function VG(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,YG(r.key),r)}}function WG(t,e,n){return e=qG(e),function(t,e){if(e&&("object"===BG(e)||"function"===typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return HG(t)}(t,GG()?Reflect.construct(e,n||[],qG(t).constructor):e.apply(t,n))}function GG(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(GG=function(){return!!t})()}function qG(t){return qG=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},qG(t)}function HG(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function ZG(t,e){return ZG=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},ZG(t,e)}function XG(t,e,n){return(e=YG(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function YG(t){var e=function(t,e){if("object"!=BG(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=BG(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==BG(e)?e:String(e)}var KG=function(t){return t.changedTouches&&!!t.changedTouches.length},$G=function(t){function e(t){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),XG(HG(n=WG(this,e,[t])),"handleDrag",(function(t){n.leaveTimer&&(clearTimeout(n.leaveTimer),n.leaveTimer=null),n.state.isTravellerMoving?n.handleTravellerMove(t):n.state.isSlideMoving&&n.handleSlideDrag(t)})),XG(HG(n),"handleTouchMove",(function(t){null!=t.changedTouches&&t.changedTouches.length>0&&n.handleDrag(t.changedTouches[0])})),XG(HG(n),"handleDragEnd",(function(){n.setState({isTravellerMoving:!1,isSlideMoving:!1},(function(){var t=n.props,e=t.endIndex,r=t.onDragEnd,i=t.startIndex;null===r||void 0===r||r({endIndex:e,startIndex:i})})),n.detachDragEndListener()})),XG(HG(n),"handleLeaveWrapper",(function(){(n.state.isTravellerMoving||n.state.isSlideMoving)&&(n.leaveTimer=window.setTimeout(n.handleDragEnd,n.props.leaveTimeOut))})),XG(HG(n),"handleEnterSlideOrTraveller",(function(){n.setState({isTextActive:!0})})),XG(HG(n),"handleLeaveSlideOrTraveller",(function(){n.setState({isTextActive:!1})})),XG(HG(n),"handleSlideDragStart",(function(t){var e=KG(t)?t.changedTouches[0]:t;n.setState({isTravellerMoving:!1,isSlideMoving:!0,slideMoveStartX:e.pageX}),n.attachDragEndListener()})),n.travellerDragStartHandlers={startX:n.handleTravellerDragStart.bind(HG(n),"startX"),endX:n.handleTravellerDragStart.bind(HG(n),"endX")},n.state={},n}var n,i,o;return function(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&ZG(t,e)}(e,t),n=e,i=[{key:"componentWillUnmount",value:function(){this.leaveTimer&&(clearTimeout(this.leaveTimer),this.leaveTimer=null),this.detachDragEndListener()}},{key:"getIndex",value:function(t){var n=t.startX,r=t.endX,i=this.state.scaleValues,o=this.props,a=o.gap,s=o.data.length-1,l=Math.min(n,r),c=Math.max(n,r),u=e.getIndexInRange(i,l),h=e.getIndexInRange(i,c);return{startIndex:u-u%a,endIndex:h===s?s:h-h%a}}},{key:"getTextOfTick",value:function(t){var e=this.props,n=e.data,r=e.tickFormatter,i=e.dataKey,o=dG(n[t],i,t);return VR()(r)?r(o,t):o}},{key:"attachDragEndListener",value:function(){window.addEventListener("mouseup",this.handleDragEnd,!0),window.addEventListener("touchend",this.handleDragEnd,!0),window.addEventListener("mousemove",this.handleDrag,!0)}},{key:"detachDragEndListener",value:function(){window.removeEventListener("mouseup",this.handleDragEnd,!0),window.removeEventListener("touchend",this.handleDragEnd,!0),window.removeEventListener("mousemove",this.handleDrag,!0)}},{key:"handleSlideDrag",value:function(t){var e=this.state,n=e.slideMoveStartX,r=e.startX,i=e.endX,o=this.props,a=o.x,s=o.width,l=o.travellerWidth,c=o.startIndex,u=o.endIndex,h=o.onChange,d=t.pageX-n;d>0?d=Math.min(d,a+s-l-i,a+s-l-r):d<0&&(d=Math.max(d,a-r,a-i));var f=this.getIndex({startX:r+d,endX:i+d});f.startIndex===c&&f.endIndex===u||!h||h(f),this.setState({startX:r+d,endX:i+d,slideMoveStartX:t.pageX})}},{key:"handleTravellerDragStart",value:function(t,e){var n=KG(e)?e.changedTouches[0]:e;this.setState({isSlideMoving:!1,isTravellerMoving:!0,movingTravellerId:t,brushMoveStartX:n.pageX}),this.attachDragEndListener()}},{key:"handleTravellerMove",value:function(t){var e=this.state,n=e.brushMoveStartX,r=e.movingTravellerId,i=e.endX,o=e.startX,a=this.state[r],s=this.props,l=s.x,c=s.width,u=s.travellerWidth,h=s.onChange,d=s.gap,f=s.data,p={startX:this.state.startX,endX:this.state.endX},m=t.pageX-n;m>0?m=Math.min(m,l+c-u-a):m<0&&(m=Math.max(m,l-a)),p[r]=a+m;var g=this.getIndex(p),y=g.startIndex,v=g.endIndex;this.setState(XG(XG({},r,a+m),"brushMoveStartX",t.pageX),(function(){h&&function(){var t=f.length-1;return"startX"===r&&(i>o?y%d===0:v%d===0)||i<o&&v===t||"endX"===r&&(i>o?v%d===0:y%d===0)||i>o&&v===t}()&&h(g)}))}},{key:"handleTravellerMoveKeyboard",value:function(t,e){var n=this,r=this.state,i=r.scaleValues,o=r.startX,a=r.endX,s=this.state[e],l=i.indexOf(s);if(-1!==l){var c=l+t;if(!(-1===c||c>=i.length)){var u=i[c];"startX"===e&&u>=a||"endX"===e&&u<=o||this.setState(XG({},e,u),(function(){n.props.onChange(n.getIndex({startX:n.state.startX,endX:n.state.endX}))}))}}}},{key:"renderBackground",value:function(){var t=this.props,e=t.x,n=t.y,i=t.width,o=t.height,a=t.fill,s=t.stroke;return r.createElement("rect",{stroke:s,fill:a,x:e,y:n,width:i,height:o})}},{key:"renderPanorama",value:function(){var t=this.props,e=t.x,n=t.y,i=t.width,o=t.height,a=t.data,s=t.children,l=t.padding,c=r.Children.only(s);return c?r.cloneElement(c,{x:e,y:n,width:i,height:o,margin:l,compact:!0,data:a}):null}},{key:"renderTravellerLayer",value:function(t,n){var i,o,a=this,s=this.props,l=s.y,c=s.travellerWidth,u=s.height,h=s.traveller,d=s.ariaLabel,f=s.data,p=s.startIndex,m=s.endIndex,g=Math.max(t,this.props.x),y=UG(UG({},fD(this.props,!1)),{},{x:g,y:l,width:c,height:u}),v=d||"Min value: ".concat(null===(i=f[p])||void 0===i?void 0:i.name,", Max value: ").concat(null===(o=f[m])||void 0===o?void 0:o.name);return r.createElement(DD,{tabIndex:0,role:"slider","aria-label":v,"aria-valuenow":t,className:"recharts-brush-traveller",onMouseEnter:this.handleEnterSlideOrTraveller,onMouseLeave:this.handleLeaveSlideOrTraveller,onMouseDown:this.travellerDragStartHandlers[n],onTouchStart:this.travellerDragStartHandlers[n],onKeyDown:function(t){["ArrowLeft","ArrowRight"].includes(t.key)&&(t.preventDefault(),t.stopPropagation(),a.handleTravellerMoveKeyboard("ArrowRight"===t.key?1:-1,n))},onFocus:function(){a.setState({isTravellerFocused:!0})},onBlur:function(){a.setState({isTravellerFocused:!1})},style:{cursor:"col-resize"}},e.renderTraveller(h,y))}},{key:"renderSlide",value:function(t,e){var n=this.props,i=n.y,o=n.height,a=n.stroke,s=n.travellerWidth,l=Math.min(t,e)+s,c=Math.max(Math.abs(e-t)-s,0);return r.createElement("rect",{className:"recharts-brush-slide",onMouseEnter:this.handleEnterSlideOrTraveller,onMouseLeave:this.handleLeaveSlideOrTraveller,onMouseDown:this.handleSlideDragStart,onTouchStart:this.handleSlideDragStart,style:{cursor:"move"},stroke:"none",fill:a,fillOpacity:.2,x:l,y:i,width:c,height:o})}},{key:"renderText",value:function(){var t=this.props,e=t.startIndex,n=t.endIndex,i=t.y,o=t.height,a=t.travellerWidth,s=t.stroke,l=this.state,c=l.startX,u=l.endX,h={pointerEvents:"none",fill:s};return r.createElement(DD,{className:"recharts-brush-texts"},r.createElement(aW,FG({textAnchor:"end",verticalAnchor:"middle",x:Math.min(c,u)-5,y:i+o/2},h),this.getTextOfTick(e)),r.createElement(aW,FG({textAnchor:"start",verticalAnchor:"middle",x:Math.max(c,u)+a+5,y:i+o/2},h),this.getTextOfTick(n)))}},{key:"render",value:function(){var t=this.props,e=t.data,n=t.className,i=t.children,o=t.x,a=t.y,s=t.width,l=t.height,c=t.alwaysShowText,u=this.state,h=u.startX,d=u.endX,f=u.isTextActive,p=u.isSlideMoving,m=u.isTravellerMoving,g=u.isTravellerFocused;if(!e||!e.length||!bR(o)||!bR(a)||!bR(s)||!bR(l)||s<=0||l<=0)return null;var y=cR("recharts-brush",n),v=1===r.Children.count(i),_=function(t,e){if(!t)return null;var n=t.replace(/(\w)/,(function(t){return t.toUpperCase()})),r=DG.reduce((function(t,r){return zG(zG({},t),{},RG({},r+n,e))}),{});return r[t]=e,r}("userSelect","none");return r.createElement(DD,{className:y,onMouseLeave:this.handleLeaveWrapper,onTouchMove:this.handleTouchMove,style:_},this.renderBackground(),v&&this.renderPanorama(),this.renderSlide(h,d),this.renderTravellerLayer(h,"startX"),this.renderTravellerLayer(d,"endX"),(f||p||m||g||c)&&this.renderText())}}],o=[{key:"renderDefaultTraveller",value:function(t){var e=t.x,n=t.y,i=t.width,o=t.height,a=t.stroke,s=Math.floor(n+o/2)-1;return r.createElement(r.Fragment,null,r.createElement("rect",{x:e,y:n,width:i,height:o,fill:a,stroke:"none"}),r.createElement("line",{x1:e+1,y1:s,x2:e+i-1,y2:s,fill:"none",stroke:"#fff"}),r.createElement("line",{x1:e+1,y1:s+2,x2:e+i-1,y2:s+2,fill:"none",stroke:"#fff"}))}},{key:"renderTraveller",value:function(t,n){return r.isValidElement(t)?r.cloneElement(t,n):VR()(t)?t(n):e.renderDefaultTraveller(n)}},{key:"getDerivedStateFromProps",value:function(t,e){var n=t.data,r=t.width,i=t.x,o=t.travellerWidth,a=t.updateId,s=t.startIndex,l=t.endIndex;if(n!==e.prevData||a!==e.prevUpdateId)return UG({prevData:n,prevTravellerWidth:o,prevUpdateId:a,prevX:i,prevWidth:r},n&&n.length?function(t){var e=t.data,n=t.startIndex,r=t.endIndex,i=t.x,o=t.width,a=t.travellerWidth;if(!e||!e.length)return{};var s=e.length,l=Lv().domain(MD()(0,s)).range([i,i+o-a]),c=l.domain().map((function(t){return l(t)}));return{isTextActive:!1,isSlideMoving:!1,isTravellerMoving:!1,isTravellerFocused:!1,startX:l(n),endX:l(r),scale:l,scaleValues:c}}({data:n,width:r,x:i,travellerWidth:o,startIndex:s,endIndex:l}):{scale:null,scaleValues:null});if(e.scale&&(r!==e.prevWidth||i!==e.prevX||o!==e.prevTravellerWidth)){e.scale.range([i,i+r-o]);var c=e.scale.domain().map((function(t){return e.scale(t)}));return{prevData:n,prevTravellerWidth:o,prevUpdateId:a,prevX:i,prevWidth:r,startX:e.scale(t.startIndex),endX:e.scale(t.endIndex),scaleValues:c}}return null}},{key:"getIndexInRange",value:function(t,e){for(var n=0,r=t.length-1;r-n>1;){var i=Math.floor((n+r)/2);t[i]>e?r=i:n=i}return e>=t[r]?r:n}}],i&&VG(n.prototype,i),o&&VG(n,o),Object.defineProperty(n,"prototype",{writable:!1}),e}(r.PureComponent);function JG(t){return JG="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},JG(t)}function QG(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function tq(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?QG(Object(n),!0).forEach((function(e){eq(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):QG(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function eq(t,e,n){return e=function(t){var e=function(t,e){if("object"!=JG(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=JG(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==JG(e)?e:String(e)}(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}XG($G,"displayName","Brush"),XG($G,"defaultProps",{height:40,travellerWidth:5,gap:1,fill:"#fff",stroke:"#666",padding:{top:1,right:1,bottom:1,left:1},leaveTimeOut:1e3,alwaysShowText:!1});var nq=Math.PI/180,rq=function(t){return 180*t/Math.PI},iq=function(t,e,n,r){return{x:t+Math.cos(-nq*r)*n,y:e+Math.sin(-nq*r)*n}},oq=function(t,e){var n=t.x,r=t.y,i=e.cx,o=e.cy,a=function(t,e){var n=t.x,r=t.y,i=e.x,o=e.y;return Math.sqrt(Math.pow(n-i,2)+Math.pow(r-o,2))}({x:n,y:r},{x:i,y:o});if(a<=0)return{radius:a};var s=(n-i)/a,l=Math.acos(s);return r>o&&(l=2*Math.PI-l),{radius:a,angle:rq(l),angleInRadian:l}},aq=function(t,e){var n=e.startAngle,r=e.endAngle,i=Math.floor(n/360),o=Math.floor(r/360);return t+360*Math.min(i,o)},sq=function(t,e){var n=t.x,r=t.y,i=oq({x:n,y:r},e),o=i.radius,a=i.angle,s=e.innerRadius,l=e.outerRadius;if(o<s||o>l)return!1;if(0===o)return!0;var c,u=function(t){var e=t.startAngle,n=t.endAngle,r=Math.floor(e/360),i=Math.floor(n/360),o=Math.min(r,i);return{startAngle:e-360*o,endAngle:n-360*o}}(e),h=u.startAngle,d=u.endAngle,f=a;if(h<=d){for(;f>d;)f-=360;for(;f<h;)f+=360;c=f>=h&&f<=d}else{for(;f>h;)f-=360;for(;f<d;)f+=360;c=f>=d&&f<=h}return c?tq(tq({},e),{},{radius:o,angle:aq(f,e)}):null};function lq(t){return lq="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},lq(t)}var cq=["offset"];function uq(t){return function(t){if(Array.isArray(t))return hq(t)}(t)||function(t){if("undefined"!==typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"===typeof t)return hq(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return hq(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function hq(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function dq(t,e){if(null==t)return{};var n,r,i=function(t,e){if(null==t)return{};var n,r,i={},o=Object.keys(t);for(r=0;r<o.length;r++)n=o[r],e.indexOf(n)>=0||(i[n]=t[n]);return i}(t,e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(r=0;r<o.length;r++)n=o[r],e.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function fq(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function pq(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?fq(Object(n),!0).forEach((function(e){mq(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):fq(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function mq(t,e,n){return e=function(t){var e=function(t,e){if("object"!=lq(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=lq(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==lq(e)?e:String(e)}(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function gq(){return gq=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},gq.apply(this,arguments)}var yq=function(t){var e=t.value,n=t.formatter,r=sR()(t.children)?e:t.children;return VR()(n)?n(r):r},vq=function(t,e,n){var i,o,a=t.position,s=t.viewBox,l=t.offset,c=t.className,u=s,h=u.cx,d=u.cy,f=u.innerRadius,p=u.outerRadius,m=u.startAngle,g=u.endAngle,y=u.clockWise,v=(f+p)/2,_=function(t,e){return vR(e-t)*Math.min(Math.abs(e-t),360)}(m,g),b=_>=0?1:-1;"insideStart"===a?(i=m+b*l,o=y):"insideEnd"===a?(i=g-b*l,o=!y):"end"===a&&(i=g+b*l,o=y),o=_<=0?o:!o;var x=iq(h,d,v,i),w=iq(h,d,v,i+359*(o?1:-1)),S="M".concat(x.x,",").concat(x.y,"\n    A").concat(v,",").concat(v,",0,1,").concat(o?0:1,",\n    ").concat(w.x,",").concat(w.y),E=sR()(t.id)?SR("recharts-radial-line-"):t.id;return r.createElement("text",gq({},n,{dominantBaseline:"central",className:cR("recharts-radial-bar-label",c)}),r.createElement("defs",null,r.createElement("path",{id:E,d:S})),r.createElement("textPath",{xlinkHref:"#".concat(E)},e))},_q=function(t){var e=t.viewBox,n=t.offset,r=t.position,i=e,o=i.cx,a=i.cy,s=i.innerRadius,l=i.outerRadius,c=(i.startAngle+i.endAngle)/2;if("outside"===r){var u=iq(o,a,l+n,c),h=u.x;return{x:h,y:u.y,textAnchor:h>=o?"start":"end",verticalAnchor:"middle"}}if("center"===r)return{x:o,y:a,textAnchor:"middle",verticalAnchor:"middle"};if("centerTop"===r)return{x:o,y:a,textAnchor:"middle",verticalAnchor:"start"};if("centerBottom"===r)return{x:o,y:a,textAnchor:"middle",verticalAnchor:"end"};var d=iq(o,a,(s+l)/2,c);return{x:d.x,y:d.y,textAnchor:"middle",verticalAnchor:"middle"}},bq=function(t){var e=t.viewBox,n=t.parentViewBox,r=t.offset,i=t.position,o=e,a=o.x,s=o.y,l=o.width,c=o.height,u=c>=0?1:-1,h=u*r,d=u>0?"end":"start",f=u>0?"start":"end",p=l>=0?1:-1,m=p*r,g=p>0?"end":"start",y=p>0?"start":"end";if("top"===i)return pq(pq({},{x:a+l/2,y:s-u*r,textAnchor:"middle",verticalAnchor:d}),n?{height:Math.max(s-n.y,0),width:l}:{});if("bottom"===i)return pq(pq({},{x:a+l/2,y:s+c+h,textAnchor:"middle",verticalAnchor:f}),n?{height:Math.max(n.y+n.height-(s+c),0),width:l}:{});if("left"===i){var v={x:a-m,y:s+c/2,textAnchor:g,verticalAnchor:"middle"};return pq(pq({},v),n?{width:Math.max(v.x-n.x,0),height:c}:{})}if("right"===i){var _={x:a+l+m,y:s+c/2,textAnchor:y,verticalAnchor:"middle"};return pq(pq({},_),n?{width:Math.max(n.x+n.width-_.x,0),height:c}:{})}var b=n?{width:l,height:c}:{};return"insideLeft"===i?pq({x:a+m,y:s+c/2,textAnchor:y,verticalAnchor:"middle"},b):"insideRight"===i?pq({x:a+l-m,y:s+c/2,textAnchor:g,verticalAnchor:"middle"},b):"insideTop"===i?pq({x:a+l/2,y:s+h,textAnchor:"middle",verticalAnchor:f},b):"insideBottom"===i?pq({x:a+l/2,y:s+c-h,textAnchor:"middle",verticalAnchor:d},b):"insideTopLeft"===i?pq({x:a+m,y:s+h,textAnchor:y,verticalAnchor:f},b):"insideTopRight"===i?pq({x:a+l-m,y:s+h,textAnchor:g,verticalAnchor:f},b):"insideBottomLeft"===i?pq({x:a+m,y:s+c-h,textAnchor:y,verticalAnchor:d},b):"insideBottomRight"===i?pq({x:a+l-m,y:s+c-h,textAnchor:g,verticalAnchor:d},b):GR()(i)&&(bR(i.x)||_R(i.x))&&(bR(i.y)||_R(i.y))?pq({x:a+ER(i.x,l),y:s+ER(i.y,c),textAnchor:"end",verticalAnchor:"end"},b):pq({x:a+l/2,y:s+c/2,textAnchor:"middle",verticalAnchor:"middle"},b)},xq=function(t){return"cx"in t&&bR(t.cx)};function wq(t){var e,n=t.offset,i=pq({offset:void 0===n?5:n},dq(t,cq)),o=i.viewBox,a=i.position,s=i.value,l=i.children,c=i.content,u=i.className,h=void 0===u?"":u,d=i.textBreakAll;if(!o||sR()(s)&&sR()(l)&&!(0,r.isValidElement)(c)&&!VR()(c))return null;if((0,r.isValidElement)(c))return(0,r.cloneElement)(c,i);if(VR()(c)){if(e=(0,r.createElement)(c,i),(0,r.isValidElement)(e))return e}else e=yq(i);var f=xq(o),p=fD(i,!0);if(f&&("insideStart"===a||"insideEnd"===a||"end"===a))return vq(i,e,p);var m=f?_q(i):bq(i);return r.createElement(aW,gq({className:cR("recharts-label",h)},p,m,{breakAll:d}),e)}wq.displayName="Label";var Sq=function(t){var e=t.cx,n=t.cy,r=t.angle,i=t.startAngle,o=t.endAngle,a=t.r,s=t.radius,l=t.innerRadius,c=t.outerRadius,u=t.x,h=t.y,d=t.top,f=t.left,p=t.width,m=t.height,g=t.clockWise,y=t.labelViewBox;if(y)return y;if(bR(p)&&bR(m)){if(bR(u)&&bR(h))return{x:u,y:h,width:p,height:m};if(bR(d)&&bR(f))return{x:d,y:f,width:p,height:m}}return bR(u)&&bR(h)?{x:u,y:h,width:0,height:0}:bR(e)&&bR(n)?{cx:e,cy:n,startAngle:i||r||0,endAngle:o||r||0,innerRadius:l||0,outerRadius:c||s||a||0,clockWise:g}:t.viewBox?t.viewBox:{}};wq.parseViewBox=Sq,wq.renderCallByParent=function(t,e){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(!t||!t.children&&n&&!t.label)return null;var i=t.children,o=Sq(t),a=lD(i,wq).map((function(t,n){return(0,r.cloneElement)(t,{viewBox:e||o,key:"label-".concat(n)})}));if(!n)return a;var s=function(t,e){return t?!0===t?r.createElement(wq,{key:"label-implicit",viewBox:e}):xR(t)?r.createElement(wq,{key:"label-implicit",viewBox:e,value:t}):(0,r.isValidElement)(t)?t.type===wq?(0,r.cloneElement)(t,{key:"label-implicit",viewBox:e}):r.createElement(wq,{key:"label-implicit",content:t,viewBox:e}):VR()(t)?r.createElement(wq,{key:"label-implicit",content:t,viewBox:e}):GR()(t)?r.createElement(wq,gq({viewBox:e},t,{key:"label-implicit"})):null:null}(t.label,e||o);return[s].concat(uq(a))};var Eq=function(t,e){var n=t.alwaysShow,r=t.ifOverflow;return n&&(r="extendDomain"),r===e},Tq=n(1733),Mq=n.n(Tq),Aq=n(7002),Cq=n.n(Aq),Pq=function(t){return null};Pq.displayName="Cell";var kq=n(4065),Iq=n.n(kq);function Oq(t){return Oq="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Oq(t)}var Lq=["valueAccessor"],jq=["data","dataKey","clockWise","id","textBreakAll"];function zq(t){return function(t){if(Array.isArray(t))return Rq(t)}(t)||function(t){if("undefined"!==typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"===typeof t)return Rq(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Rq(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Rq(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function Dq(){return Dq=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Dq.apply(this,arguments)}function Bq(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function Fq(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Bq(Object(n),!0).forEach((function(e){Nq(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Bq(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function Nq(t,e,n){return e=function(t){var e=function(t,e){if("object"!=Oq(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=Oq(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Oq(e)?e:String(e)}(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Uq(t,e){if(null==t)return{};var n,r,i=function(t,e){if(null==t)return{};var n,r,i={},o=Object.keys(t);for(r=0;r<o.length;r++)n=o[r],e.indexOf(n)>=0||(i[n]=t[n]);return i}(t,e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(r=0;r<o.length;r++)n=o[r],e.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}var Vq=function(t){return Array.isArray(t.value)?Iq()(t.value):t.value};function Wq(t){var e=t.valueAccessor,n=void 0===e?Vq:e,i=Uq(t,Lq),o=i.data,a=i.dataKey,s=i.clockWise,l=i.id,c=i.textBreakAll,u=Uq(i,jq);return o&&o.length?r.createElement(DD,{className:"recharts-label-list"},o.map((function(t,e){var i=sR()(a)?n(t,e):dG(t&&t.payload,a),o=sR()(l)?{}:{id:"".concat(l,"-").concat(e)};return r.createElement(wq,Dq({},fD(t,!0),u,o,{parentViewBox:t.parentViewBox,value:i,textBreakAll:c,viewBox:wq.parseViewBox(sR()(s)?t:Fq(Fq({},t),{},{clockWise:s})),key:"label-".concat(e),index:e}))}))):null}Wq.displayName="LabelList",Wq.renderCallByParent=function(t,e){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(!t||!t.children&&n&&!t.label)return null;var i=lD(t.children,Wq).map((function(t,n){return(0,r.cloneElement)(t,{data:e,key:"labelList-".concat(n)})}));if(!n)return i;var o=function(t,e){return t?!0===t?r.createElement(Wq,{key:"labelList-implicit",data:e}):r.isValidElement(t)||VR()(t)?r.createElement(Wq,{key:"labelList-implicit",data:e,content:t}):GR()(t)?r.createElement(Wq,Dq({data:e},t,{key:"labelList-implicit"})):null:null}(t.label,e);return[o].concat(zq(i))};var Gq=n(2322),qq=n.n(Gq),Hq=n(6361),Zq=n.n(Hq);function Xq(t){return Xq="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Xq(t)}function Yq(){return Yq=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Yq.apply(this,arguments)}function Kq(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,i,o,a,s=[],l=!0,c=!1;try{if(o=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=o.call(n)).done)&&(s.push(r.value),s.length!==e);l=!0);}catch(t){c=!0,i=t}finally{try{if(!l&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw i}}return s}}(t,e)||function(t,e){if(!t)return;if("string"===typeof t)return $q(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return $q(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function $q(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function Jq(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function Qq(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Jq(Object(n),!0).forEach((function(e){tH(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Jq(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function tH(t,e,n){return e=function(t){var e=function(t,e){if("object"!=Xq(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=Xq(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Xq(e)?e:String(e)}(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var eH=function(t,e,n,r,i){var o,a=n-r;return o="M ".concat(t,",").concat(e),o+="L ".concat(t+n,",").concat(e),o+="L ".concat(t+n-a/2,",").concat(e+i),o+="L ".concat(t+n-a/2-r,",").concat(e+i),o+="L ".concat(t,",").concat(e," Z")},nH={x:0,y:0,upperWidth:0,lowerWidth:0,height:0,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},rH=function(t){var e=Qq(Qq({},nH),t),n=(0,r.useRef)(),i=Kq((0,r.useState)(-1),2),o=i[0],a=i[1];(0,r.useEffect)((function(){if(n.current&&n.current.getTotalLength)try{var t=n.current.getTotalLength();t&&a(t)}catch(e){}}),[]);var s=e.x,l=e.y,c=e.upperWidth,u=e.lowerWidth,h=e.height,d=e.className,f=e.animationEasing,p=e.animationDuration,m=e.animationBegin,g=e.isUpdateAnimationActive;if(s!==+s||l!==+l||c!==+c||u!==+u||h!==+h||0===c&&0===u||0===h)return null;var y=cR("recharts-trapezoid",d);return g?r.createElement(dV,{canBegin:o>0,from:{upperWidth:0,lowerWidth:0,height:h,x:s,y:l},to:{upperWidth:c,lowerWidth:u,height:h,x:s,y:l},duration:p,animationEasing:f,isActive:g},(function(t){var i=t.upperWidth,a=t.lowerWidth,s=t.height,l=t.x,c=t.y;return r.createElement(dV,{canBegin:o>0,from:"0px ".concat(-1===o?1:o,"px"),to:"".concat(o,"px 0px"),attributeName:"strokeDasharray",begin:m,duration:p,easing:f},r.createElement("path",Yq({},fD(e,!0),{className:y,d:eH(l,c,i,a,s),ref:n})))})):r.createElement("g",null,r.createElement("path",Yq({},fD(e,!0),{className:y,d:eH(s,l,c,u,h)})))};function iH(t){return iH="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},iH(t)}function oH(){return oH=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},oH.apply(this,arguments)}function aH(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function sH(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?aH(Object(n),!0).forEach((function(e){lH(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):aH(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function lH(t,e,n){return e=function(t){var e=function(t,e){if("object"!=iH(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=iH(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==iH(e)?e:String(e)}(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var cH=function(t){var e=t.cx,n=t.cy,r=t.radius,i=t.angle,o=t.sign,a=t.isExternal,s=t.cornerRadius,l=t.cornerIsExternal,c=s*(a?1:-1)+r,u=Math.asin(s/c)/nq,h=l?i:i+o*u,d=l?i-o*u:i;return{center:iq(e,n,c,h),circleTangency:iq(e,n,r,h),lineTangency:iq(e,n,c*Math.cos(u*nq),d),theta:u}},uH=function(t){var e=t.cx,n=t.cy,r=t.innerRadius,i=t.outerRadius,o=t.startAngle,a=function(t,e){return vR(e-t)*Math.min(Math.abs(e-t),359.999)}(o,t.endAngle),s=o+a,l=iq(e,n,i,o),c=iq(e,n,i,s),u="M ".concat(l.x,",").concat(l.y,"\n    A ").concat(i,",").concat(i,",0,\n    ").concat(+(Math.abs(a)>180),",").concat(+(o>s),",\n    ").concat(c.x,",").concat(c.y,"\n  ");if(r>0){var h=iq(e,n,r,o),d=iq(e,n,r,s);u+="L ".concat(d.x,",").concat(d.y,"\n            A ").concat(r,",").concat(r,",0,\n            ").concat(+(Math.abs(a)>180),",").concat(+(o<=s),",\n            ").concat(h.x,",").concat(h.y," Z")}else u+="L ".concat(e,",").concat(n," Z");return u},hH={cx:0,cy:0,innerRadius:0,outerRadius:0,startAngle:0,endAngle:0,cornerRadius:0,forceCornerRadius:!1,cornerIsExternal:!1},dH=function(t){var e=sH(sH({},hH),t),n=e.cx,i=e.cy,o=e.innerRadius,a=e.outerRadius,s=e.cornerRadius,l=e.forceCornerRadius,c=e.cornerIsExternal,u=e.startAngle,h=e.endAngle,d=e.className;if(a<o||u===h)return null;var f,p=cR("recharts-sector",d),m=a-o,g=ER(s,m,0,!0);return f=g>0&&Math.abs(u-h)<360?function(t){var e=t.cx,n=t.cy,r=t.innerRadius,i=t.outerRadius,o=t.cornerRadius,a=t.forceCornerRadius,s=t.cornerIsExternal,l=t.startAngle,c=t.endAngle,u=vR(c-l),h=cH({cx:e,cy:n,radius:i,angle:l,sign:u,cornerRadius:o,cornerIsExternal:s}),d=h.circleTangency,f=h.lineTangency,p=h.theta,m=cH({cx:e,cy:n,radius:i,angle:c,sign:-u,cornerRadius:o,cornerIsExternal:s}),g=m.circleTangency,y=m.lineTangency,v=m.theta,_=s?Math.abs(l-c):Math.abs(l-c)-p-v;if(_<0)return a?"M ".concat(f.x,",").concat(f.y,"\n        a").concat(o,",").concat(o,",0,0,1,").concat(2*o,",0\n        a").concat(o,",").concat(o,",0,0,1,").concat(2*-o,",0\n      "):uH({cx:e,cy:n,innerRadius:r,outerRadius:i,startAngle:l,endAngle:c});var b="M ".concat(f.x,",").concat(f.y,"\n    A").concat(o,",").concat(o,",0,0,").concat(+(u<0),",").concat(d.x,",").concat(d.y,"\n    A").concat(i,",").concat(i,",0,").concat(+(_>180),",").concat(+(u<0),",").concat(g.x,",").concat(g.y,"\n    A").concat(o,",").concat(o,",0,0,").concat(+(u<0),",").concat(y.x,",").concat(y.y,"\n  ");if(r>0){var x=cH({cx:e,cy:n,radius:r,angle:l,sign:u,isExternal:!0,cornerRadius:o,cornerIsExternal:s}),w=x.circleTangency,S=x.lineTangency,E=x.theta,T=cH({cx:e,cy:n,radius:r,angle:c,sign:-u,isExternal:!0,cornerRadius:o,cornerIsExternal:s}),M=T.circleTangency,A=T.lineTangency,C=T.theta,P=s?Math.abs(l-c):Math.abs(l-c)-E-C;if(P<0&&0===o)return"".concat(b,"L").concat(e,",").concat(n,"Z");b+="L".concat(A.x,",").concat(A.y,"\n      A").concat(o,",").concat(o,",0,0,").concat(+(u<0),",").concat(M.x,",").concat(M.y,"\n      A").concat(r,",").concat(r,",0,").concat(+(P>180),",").concat(+(u>0),",").concat(w.x,",").concat(w.y,"\n      A").concat(o,",").concat(o,",0,0,").concat(+(u<0),",").concat(S.x,",").concat(S.y,"Z")}else b+="L".concat(e,",").concat(n,"Z");return b}({cx:n,cy:i,innerRadius:o,outerRadius:a,cornerRadius:Math.min(g,m/2),forceCornerRadius:l,cornerIsExternal:c,startAngle:u,endAngle:h}):uH({cx:n,cy:i,innerRadius:o,outerRadius:a,startAngle:u,endAngle:h}),r.createElement("path",oH({},fD(e,!0),{className:p,d:f,role:"img"}))},fH=["option","shapeType","propTransformer","activeClassName","isActive"];function pH(t){return pH="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},pH(t)}function mH(t,e){if(null==t)return{};var n,r,i=function(t,e){if(null==t)return{};var n,r,i={},o=Object.keys(t);for(r=0;r<o.length;r++)n=o[r],e.indexOf(n)>=0||(i[n]=t[n]);return i}(t,e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(r=0;r<o.length;r++)n=o[r],e.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function gH(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function yH(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?gH(Object(n),!0).forEach((function(e){vH(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):gH(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function vH(t,e,n){return e=function(t){var e=function(t,e){if("object"!=pH(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=pH(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==pH(e)?e:String(e)}(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function _H(t,e){return yH(yH({},e),t)}function bH(t){var e=t.shapeType,n=t.elementProps;switch(e){case"rectangle":return r.createElement(SV,n);case"trapezoid":return r.createElement(rH,n);case"sector":return r.createElement(dH,n);case"symbols":if(function(t,e){return"symbols"===t}(e))return r.createElement(bF,n);break;default:return null}}function xH(t){var e,n=t.option,i=t.shapeType,o=t.propTransformer,a=void 0===o?_H:o,s=t.activeClassName,l=void 0===s?"recharts-active-shape":s,c=t.isActive,u=mH(t,fH);if((0,r.isValidElement)(n))e=(0,r.cloneElement)(n,yH(yH({},u),function(t){return(0,r.isValidElement)(t)?t.props:t}(n)));else if(VR()(n))e=n(u);else if(qq()(n)&&!Zq()(n)){var h=a(n,u);e=r.createElement(bH,{shapeType:i,elementProps:h})}else{var d=u;e=r.createElement(bH,{shapeType:i,elementProps:d})}return c?r.createElement(DD,{className:l},e):e}function wH(t,e){return null!=e&&"trapezoids"in t.props}function SH(t,e){return null!=e&&"sectors"in t.props}function EH(t,e){return null!=e&&"points"in t.props}function TH(t,e){var n,r,i=t.x===(null===e||void 0===e||null===(n=e.labelViewBox)||void 0===n?void 0:n.x)||t.x===e.x,o=t.y===(null===e||void 0===e||null===(r=e.labelViewBox)||void 0===r?void 0:r.y)||t.y===e.y;return i&&o}function MH(t,e){var n=t.endAngle===e.endAngle,r=t.startAngle===e.startAngle;return n&&r}function AH(t,e){var n=t.x===e.x,r=t.y===e.y,i=t.z===e.z;return n&&r&&i}function CH(t){var e=t.activeTooltipItem,n=t.graphicalItem,r=t.itemData,i=function(t,e){var n;return wH(t,e)?n="trapezoids":SH(t,e)?n="sectors":EH(t,e)&&(n="points"),n}(n,e),o=function(t,e){var n,r;return wH(t,e)?null===(n=e.tooltipPayload)||void 0===n||null===(n=n[0])||void 0===n||null===(n=n.payload)||void 0===n?void 0:n.payload:SH(t,e)?null===(r=e.tooltipPayload)||void 0===r||null===(r=r[0])||void 0===r||null===(r=r.payload)||void 0===r?void 0:r.payload:EH(t,e)?e.payload:{}}(n,e),a=r.filter((function(t,r){var a=_W()(o,t),s=n.props[i].filter((function(t){var r=function(t,e){var n;return wH(t,e)?n=TH:SH(t,e)?n=MH:EH(t,e)&&(n=AH),n}(n,e);return r(t,e)})),l=n.props[i].indexOf(s[s.length-1]);return a&&r===l}));return r.indexOf(a[a.length-1])}var PH=["x","y"];function kH(t){return kH="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},kH(t)}function IH(){return IH=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},IH.apply(this,arguments)}function OH(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function LH(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?OH(Object(n),!0).forEach((function(e){jH(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):OH(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function jH(t,e,n){return e=function(t){var e=function(t,e){if("object"!=kH(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=kH(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==kH(e)?e:String(e)}(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function zH(t,e){if(null==t)return{};var n,r,i=function(t,e){if(null==t)return{};var n,r,i={},o=Object.keys(t);for(r=0;r<o.length;r++)n=o[r],e.indexOf(n)>=0||(i[n]=t[n]);return i}(t,e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(r=0;r<o.length;r++)n=o[r],e.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function RH(t,e){var n=t.x,r=t.y,i=zH(t,PH),o="".concat(n),a=parseInt(o,10),s="".concat(r),l=parseInt(s,10),c="".concat(e.height||i.height),u=parseInt(c,10),h="".concat(e.width||i.width),d=parseInt(h,10);return LH(LH(LH(LH(LH({},e),i),a?{x:a}:{}),l?{y:l}:{}),{},{height:u,width:d,name:e.name,radius:e.radius})}function DH(t){return r.createElement(xH,IH({shapeType:"rectangle",propTransformer:RH,activeClassName:"recharts-active-bar"},t))}var BH,FH=["value","background"];function NH(t){return NH="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},NH(t)}function UH(t,e){if(null==t)return{};var n,r,i=function(t,e){if(null==t)return{};var n,r,i={},o=Object.keys(t);for(r=0;r<o.length;r++)n=o[r],e.indexOf(n)>=0||(i[n]=t[n]);return i}(t,e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(r=0;r<o.length;r++)n=o[r],e.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function VH(){return VH=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},VH.apply(this,arguments)}function WH(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function GH(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?WH(Object(n),!0).forEach((function(e){$H(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):WH(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function qH(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,JH(r.key),r)}}function HH(t,e,n){return e=XH(e),function(t,e){if(e&&("object"===NH(e)||"function"===typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return YH(t)}(t,ZH()?Reflect.construct(e,n||[],XH(t).constructor):e.apply(t,n))}function ZH(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(ZH=function(){return!!t})()}function XH(t){return XH=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},XH(t)}function YH(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function KH(t,e){return KH=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},KH(t,e)}function $H(t,e,n){return(e=JH(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function JH(t){var e=function(t,e){if("object"!=NH(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=NH(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==NH(e)?e:String(e)}var QH=function(t){function e(){var t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return $H(YH(t=HH(this,e,[].concat(r))),"state",{isAnimationFinished:!1}),$H(YH(t),"id",SR("recharts-bar-")),$H(YH(t),"handleAnimationEnd",(function(){var e=t.props.onAnimationEnd;t.setState({isAnimationFinished:!0}),e&&e()})),$H(YH(t),"handleAnimationStart",(function(){var e=t.props.onAnimationStart;t.setState({isAnimationFinished:!1}),e&&e()})),t}var n,i,o;return function(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&KH(t,e)}(e,t),n=e,i=[{key:"renderRectanglesStatically",value:function(t){var e=this,n=this.props,i=n.shape,o=n.dataKey,a=n.activeIndex,s=n.activeBar,l=fD(this.props,!1);return t&&t.map((function(t,n){var c=n===a,u=c?s:i,h=GH(GH(GH({},l),t),{},{isActive:c,option:u,index:n,dataKey:o,onAnimationStart:e.handleAnimationStart,onAnimationEnd:e.handleAnimationEnd});return r.createElement(DD,VH({className:"recharts-bar-rectangle"},JR(e.props,t,n),{key:"rectangle-".concat(null===t||void 0===t?void 0:t.x,"-").concat(null===t||void 0===t?void 0:t.y,"-").concat(null===t||void 0===t?void 0:t.value)}),r.createElement(DH,h))}))}},{key:"renderRectanglesWithAnimation",value:function(){var t=this,e=this.props,n=e.data,i=e.layout,o=e.isAnimationActive,a=e.animationBegin,s=e.animationDuration,l=e.animationEasing,c=e.animationId,u=this.state.prevData;return r.createElement(dV,{begin:a,duration:s,isActive:o,easing:l,from:{t:0},to:{t:1},key:"bar-".concat(c),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},(function(e){var o=e.t,a=n.map((function(t,e){var n=u&&u[e];if(n){var r=MR(n.x,t.x),a=MR(n.y,t.y),s=MR(n.width,t.width),l=MR(n.height,t.height);return GH(GH({},t),{},{x:r(o),y:a(o),width:s(o),height:l(o)})}if("horizontal"===i){var c=MR(0,t.height)(o);return GH(GH({},t),{},{y:t.y+t.height-c,height:c})}var h=MR(0,t.width)(o);return GH(GH({},t),{},{width:h})}));return r.createElement(DD,null,t.renderRectanglesStatically(a))}))}},{key:"renderRectangles",value:function(){var t=this.props,e=t.data,n=t.isAnimationActive,r=this.state.prevData;return!(n&&e&&e.length)||r&&_W()(r,e)?this.renderRectanglesStatically(e):this.renderRectanglesWithAnimation()}},{key:"renderBackground",value:function(){var t=this,e=this.props,n=e.data,i=e.dataKey,o=e.activeIndex,a=fD(this.props.background,!1);return n.map((function(e,n){e.value;var s=e.background,l=UH(e,FH);if(!s)return null;var c=GH(GH(GH(GH(GH({},l),{},{fill:"#eee"},s),a),JR(t.props,e,n)),{},{onAnimationStart:t.handleAnimationStart,onAnimationEnd:t.handleAnimationEnd,dataKey:i,index:n,key:"background-bar-".concat(n),className:"recharts-bar-background-rectangle"});return r.createElement(DH,VH({option:t.props.background,isActive:n===o},c))}))}},{key:"renderErrorBar",value:function(t,e){if(this.props.isAnimationActive&&!this.state.isAnimationFinished)return null;var n=this.props,i=n.data,o=n.xAxis,a=n.yAxis,s=n.layout,l=lD(n.children,tG);if(!l)return null;var c="vertical"===s?i[0].height/2:i[0].width/2,u=function(t,e){var n=Array.isArray(t.value)?t.value[1]:t.value;return{x:t.x,y:t.y,value:n,errorVal:dG(t,e)}},h={clipPath:t?"url(#clipPath-".concat(e,")"):null};return r.createElement(DD,h,l.map((function(t){return r.cloneElement(t,{key:"error-bar-".concat(e,"-").concat(t.props.dataKey),data:i,xAxis:o,yAxis:a,layout:s,offset:c,dataPointFormatter:u})})))}},{key:"render",value:function(){var t=this.props,e=t.hide,n=t.data,i=t.className,o=t.xAxis,a=t.yAxis,s=t.left,l=t.top,c=t.width,u=t.height,h=t.isAnimationActive,d=t.background,f=t.id;if(e||!n||!n.length)return null;var p=this.state.isAnimationFinished,m=cR("recharts-bar",i),g=o&&o.allowDataOverflow,y=a&&a.allowDataOverflow,v=g||y,_=sR()(f)?this.id:f;return r.createElement(DD,{className:m},g||y?r.createElement("defs",null,r.createElement("clipPath",{id:"clipPath-".concat(_)},r.createElement("rect",{x:g?s:s-c/2,y:y?l:l-u/2,width:g?c:2*c,height:y?u:2*u}))):null,r.createElement(DD,{className:"recharts-bar-rectangles",clipPath:v?"url(#clipPath-".concat(_,")"):null},d?this.renderBackground():null,this.renderRectangles()),this.renderErrorBar(v,_),(!h||p)&&Wq.renderCallByParent(this.props,n))}}],o=[{key:"getDerivedStateFromProps",value:function(t,e){return t.animationId!==e.prevAnimationId?{prevAnimationId:t.animationId,curData:t.data,prevData:e.curData}:t.data!==e.curData?{curData:t.data}:null}}],i&&qH(n.prototype,i),o&&qH(n,o),Object.defineProperty(n,"prototype",{writable:!1}),e}(r.PureComponent);function tZ(t){return tZ="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},tZ(t)}function eZ(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,oZ(r.key),r)}}function nZ(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function rZ(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?nZ(Object(n),!0).forEach((function(e){iZ(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):nZ(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function iZ(t,e,n){return(e=oZ(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function oZ(t){var e=function(t,e){if("object"!=tZ(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=tZ(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==tZ(e)?e:String(e)}BH=QH,$H(QH,"displayName","Bar"),$H(QH,"defaultProps",{xAxisId:0,yAxisId:0,legendType:"rect",minPointSize:0,hide:!1,data:[],layout:"vertical",activeBar:!1,isAnimationActive:!nB.isSsr,animationBegin:0,animationDuration:400,animationEasing:"ease"}),$H(QH,"getComposedData",(function(t){var e=t.props,n=t.item,r=t.barPosition,i=t.bandSize,o=t.xAxis,a=t.yAxis,s=t.xAxisTicks,l=t.yAxisTicks,c=t.stackedData,u=t.dataStartIndex,h=t.displayedData,d=t.offset,f=function(t,e){if(!t)return null;for(var n=0,r=t.length;n<r;n++)if(t[n].item===e)return t[n].position;return null}(r,n);if(!f)return null;var p=e.layout,m=n.props,g=m.dataKey,y=m.children,v=m.minPointSize,_="horizontal"===p?a:o,b=c?_.scale.domain():null,x=function(t){var e=t.numericAxis,n=e.scale.domain();if("number"===e.type){var r=Math.min(n[0],n[1]),i=Math.max(n[0],n[1]);return r<=0&&i>=0?0:i<0?i:r}return n[0]}({numericAxis:_}),w=lD(y,Pq),S=h.map((function(t,e){var r,h,d,m,y,_;c?r=function(t,e){if(!e||2!==e.length||!bR(e[0])||!bR(e[1]))return t;var n=Math.min(e[0],e[1]),r=Math.max(e[0],e[1]),i=[t[0],t[1]];return(!bR(t[0])||t[0]<n)&&(i[0]=n),(!bR(t[1])||t[1]>r)&&(i[1]=r),i[0]>r&&(i[0]=r),i[1]<n&&(i[1]=n),i}(c[u+e],b):(r=dG(t,g),Array.isArray(r)||(r=[x,r]));var S=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return function(n,r){if("number"===typeof t)return t;var i="number"===typeof n;return i?t(n,r):(i||PD(!1),e)}}(v,BH.defaultProps.minPointSize)(r[1],e);if("horizontal"===p){var E,T=[a.scale(r[0]),a.scale(r[1])],M=T[0],A=T[1];h=TG({axis:o,ticks:s,bandSize:i,offset:f.offset,entry:t,index:e}),d=null!==(E=null!==A&&void 0!==A?A:M)&&void 0!==E?E:void 0,m=f.size;var C=M-A;if(y=Number.isNaN(C)?0:C,_={x:h,y:a.y,width:m,height:a.height},Math.abs(S)>0&&Math.abs(y)<Math.abs(S)){var P=vR(y||S)*(Math.abs(S)-Math.abs(y));d-=P,y+=P}}else{var k=[o.scale(r[0]),o.scale(r[1])],I=k[0],O=k[1];if(h=I,d=TG({axis:a,ticks:l,bandSize:i,offset:f.offset,entry:t,index:e}),m=O-I,y=f.size,_={x:o.x,y:d,width:o.width,height:y},Math.abs(S)>0&&Math.abs(m)<Math.abs(S))m+=vR(m||S)*(Math.abs(S)-Math.abs(m))}return GH(GH(GH({},t),{},{x:h,y:d,width:m,height:y,value:c?r:r[1],payload:t,background:_},w&&w[e]&&w[e].props),{},{tooltipPayload:[OG(n,t)],tooltipPosition:{x:h+m/2,y:d+y/2}})}));return GH({data:S,layout:p},d)}));var aZ=function(e,n,r,i,o){var a=e.width,s=e.height,l=e.layout,c=e.children,u=Object.keys(n),h={left:r.left,leftMirror:r.left,right:a-r.right,rightMirror:a-r.right,top:r.top,topMirror:r.top,bottom:s-r.bottom,bottomMirror:s-r.bottom},d=!!cD(c,QH);return u.reduce((function(a,s){var c,u,f,p,m,g=n[s],y=g.orientation,v=g.domain,_=g.padding,b=void 0===_?{}:_,x=g.mirror,w=g.reversed,S="".concat(y).concat(x?"Mirror":"");if("number"===g.type&&("gap"===g.padding||"no-gap"===g.padding)){var E=v[1]-v[0],T=1/0,M=g.categoricalDomain.sort();if(M.forEach((function(t,e){e>0&&(T=Math.min((t||0)-(M[e-1]||0),T))})),Number.isFinite(T)){var A=T/E,C="vertical"===g.layout?r.height:r.width;if("gap"===g.padding&&(c=A*C/2),"no-gap"===g.padding){var P=ER(e.barCategoryGap,A*C),k=A*C/2;c=k-P-(k-P)/C*P}}}u="xAxis"===i?[r.left+(b.left||0)+(c||0),r.left+r.width-(b.right||0)-(c||0)]:"yAxis"===i?"horizontal"===l?[r.top+r.height-(b.bottom||0),r.top+(b.top||0)]:[r.top+(b.top||0)+(c||0),r.top+r.height-(b.bottom||0)-(c||0)]:g.range,w&&(u=[u[1],u[0]]);var I=function(e,n,r){var i=e.scale,o=e.type,a=e.layout,s=e.axisType;if("auto"===i)return"radial"===a&&"radiusAxis"===s?{scale:Iv(),realScaleType:"band"}:"radial"===a&&"angleAxis"===s?{scale:s_(),realScaleType:"linear"}:"category"===o&&n&&(n.indexOf("LineChart")>=0||n.indexOf("AreaChart")>=0||n.indexOf("ComposedChart")>=0&&!r)?{scale:Lv(),realScaleType:"point"}:"category"===o?{scale:Iv(),realScaleType:"band"}:{scale:s_(),realScaleType:"linear"};if(hR()(i)){var l="scale".concat(_B()(i));return{scale:(t[l]||Lv)(),realScaleType:t[l]?l:"point"}}return VR()(i)?{scale:i}:{scale:Lv(),realScaleType:"point"}}(g,o,d),O=I.scale,L=I.realScaleType;O.domain(v).range(u),function(t){var e=t.domain();if(e&&!(e.length<=2)){var n=e.length,r=t.range(),i=Math.min(r[0],r[1])-xG,o=Math.max(r[0],r[1])+xG,a=t(e[0]),s=t(e[n-1]);(a<i||a>o||s<i||s>o)&&t.domain([e[0],e[n-1]])}}(O);var j=function(t,e){var n=e.realScaleType,r=e.type,i=e.tickCount,o=e.originalDomain,a=e.allowDecimals,s=n||e.scale;if("auto"!==s&&"linear"!==s)return null;if(i&&"number"===r&&o&&("auto"===o[0]||"auto"===o[1])){var l=t.domain();if(!l.length)return null;var c=ZW(l,i,a);return t.domain([mW()(c),fW()(c)]),{niceTicks:c}}if(i&&"number"===r){var u=t.domain();return{niceTicks:XW(u,i,a)}}return null}(O,rZ(rZ({},g),{},{realScaleType:L}));"xAxis"===i?(m="top"===y&&!x||"bottom"===y&&x,f=r.left,p=h[S]-m*g.height):"yAxis"===i&&(m="left"===y&&!x||"right"===y&&x,f=h[S]-m*g.width,p=r.top);var z=rZ(rZ(rZ({},g),j),{},{realScaleType:L,x:f,y:p,scale:O,width:"xAxis"===i?r.width:g.width,height:"yAxis"===i?r.height:g.height});return z.bandSize=kG(z,j),g.hide||"xAxis"!==i?g.hide||(h[S]+=(m?-1:1)*z.width):h[S]+=(m?-1:1)*z.height,rZ(rZ({},a),{},iZ({},s,z))}),{})},sZ=function(t,e){var n=t.x,r=t.y,i=e.x,o=e.y;return{x:Math.min(n,i),y:Math.min(r,o),width:Math.abs(i-n),height:Math.abs(o-r)}},lZ=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.scale=e}var e,n,r;return e=t,n=[{key:"domain",get:function(){return this.scale.domain}},{key:"range",get:function(){return this.scale.range}},{key:"rangeMin",get:function(){return this.range()[0]}},{key:"rangeMax",get:function(){return this.range()[1]}},{key:"bandwidth",get:function(){return this.scale.bandwidth}},{key:"apply",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.bandAware,r=e.position;if(void 0!==t){if(r)switch(r){case"start":default:return this.scale(t);case"middle":var i=this.bandwidth?this.bandwidth()/2:0;return this.scale(t)+i;case"end":var o=this.bandwidth?this.bandwidth():0;return this.scale(t)+o}if(n){var a=this.bandwidth?this.bandwidth()/2:0;return this.scale(t)+a}return this.scale(t)}}},{key:"isInRange",value:function(t){var e=this.range(),n=e[0],r=e[e.length-1];return n<=r?t>=n&&t<=r:t>=r&&t<=n}}],r=[{key:"create",value:function(e){return new t(e)}}],n&&eZ(e.prototype,n),r&&eZ(e,r),Object.defineProperty(e,"prototype",{writable:!1}),t}();iZ(lZ,"EPS",1e-4);var cZ=function(t){var e=Object.keys(t).reduce((function(e,n){return rZ(rZ({},e),{},iZ({},n,lZ.create(t[n])))}),{});return rZ(rZ({},e),{},{apply:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=n.bandAware,i=n.position;return Mq()(t,(function(t,n){return e[n].apply(t,{bandAware:r,position:i})}))},isInRange:function(t){return Cq()(t,(function(t,n){return e[n].isInRange(t)}))}})};var uZ=function(t){var e=t.width,n=t.height,r=function(t){return(t%180+180)%180}(arguments.length>1&&void 0!==arguments[1]?arguments[1]:0),i=r*Math.PI/180,o=Math.atan(n/e),a=i>o&&i<Math.PI-o?n/Math.sin(i):e/Math.cos(i);return Math.abs(a)};function hZ(t){return hZ="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},hZ(t)}function dZ(){return dZ=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},dZ.apply(this,arguments)}function fZ(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function pZ(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?fZ(Object(n),!0).forEach((function(e){mZ(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):fZ(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function mZ(t,e,n){return e=function(t){var e=function(t,e){if("object"!=hZ(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=hZ(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==hZ(e)?e:String(e)}(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function gZ(t){var e=t.x,n=t.y,i=t.r,o=t.alwaysShow,a=t.clipPathId,s=xR(e),l=xR(n);if(NR(void 0===o,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.'),!s||!l)return null;var c=function(t){var e=t.x,n=t.y,r=t.xAxis,i=t.yAxis,o=cZ({x:r.scale,y:i.scale}),a=o.apply({x:e,y:n},{bandAware:!0});return Eq(t,"discard")&&!o.isInRange(a)?null:a}(t);if(!c)return null;var u=c.x,h=c.y,d=t.shape,f=t.className,p=pZ(pZ({clipPath:Eq(t,"hidden")?"url(#".concat(a,")"):void 0},fD(t,!0)),{},{cx:u,cy:h});return r.createElement(DD,{className:cR("recharts-reference-dot",f)},gZ.renderDot(d,p),wq.renderCallByParent(t,{x:u-i,y:h-i,width:2*i,height:2*i}))}gZ.displayName="ReferenceDot",gZ.defaultProps={isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,r:10,fill:"#fff",stroke:"#ccc",fillOpacity:1,strokeWidth:1},gZ.renderDot=function(t,e){return r.isValidElement(t)?r.cloneElement(t,e):VR()(t)?t(e):r.createElement(YF,dZ({},e,{cx:e.cx,cy:e.cy,className:"recharts-reference-dot-dot"}))};var yZ=n(4597),vZ=n.n(yZ),_Z=(n(8990),n(5797)),bZ=n.n(_Z)()((function(t){return{x:t.left,y:t.top,width:t.width,height:t.height}}),(function(t){return["l",t.left,"t",t.top,"w",t.width,"h",t.height].join("")}));var xZ=(0,r.createContext)(void 0),wZ=(0,r.createContext)(void 0),SZ=(0,r.createContext)(void 0),EZ=(0,r.createContext)({}),TZ=(0,r.createContext)(void 0),MZ=(0,r.createContext)(0),AZ=(0,r.createContext)(0),CZ=function(t){var e=t.state,n=e.xAxisMap,i=e.yAxisMap,o=e.offset,a=t.clipPathId,s=t.children,l=t.width,c=t.height,u=bZ(o);return r.createElement(xZ.Provider,{value:n},r.createElement(wZ.Provider,{value:i},r.createElement(EZ.Provider,{value:o},r.createElement(SZ.Provider,{value:u},r.createElement(TZ.Provider,{value:a},r.createElement(MZ.Provider,{value:c},r.createElement(AZ.Provider,{value:l},s)))))))};var PZ=function(t){var e=(0,r.useContext)(xZ);null==e&&PD(!1);var n=e[t];return null==n&&PD(!1),n},kZ=function(t){var e=(0,r.useContext)(wZ);null==e&&PD(!1);var n=e[t];return null==n&&PD(!1),n},IZ=function(){return(0,r.useContext)(AZ)},OZ=function(){return(0,r.useContext)(MZ)};function LZ(t){return LZ="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},LZ(t)}function jZ(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function zZ(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?jZ(Object(n),!0).forEach((function(e){RZ(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):jZ(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function RZ(t,e,n){return e=function(t){var e=function(t,e){if("object"!=LZ(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=LZ(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==LZ(e)?e:String(e)}(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function DZ(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,i,o,a,s=[],l=!0,c=!1;try{if(o=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=o.call(n)).done)&&(s.push(r.value),s.length!==e);l=!0);}catch(t){c=!0,i=t}finally{try{if(!l&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw i}}return s}}(t,e)||function(t,e){if(!t)return;if("string"===typeof t)return BZ(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return BZ(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function BZ(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function FZ(){return FZ=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},FZ.apply(this,arguments)}function NZ(t){var e=t.x,n=t.y,i=t.segment,o=t.xAxisId,a=t.yAxisId,s=t.shape,l=t.className,c=t.alwaysShow,u=(0,r.useContext)(TZ),h=PZ(o),d=kZ(a),f=(0,r.useContext)(SZ);if(!u||!f)return null;NR(void 0===c,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.');var p=function(t,e,n,r,i,o,a,s,l){var c=i.x,u=i.y,h=i.width,d=i.height;if(n){var f=l.y,p=t.y.apply(f,{position:o});if(Eq(l,"discard")&&!t.y.isInRange(p))return null;var m=[{x:c+h,y:p},{x:c,y:p}];return"left"===s?m.reverse():m}if(e){var g=l.x,y=t.x.apply(g,{position:o});if(Eq(l,"discard")&&!t.x.isInRange(y))return null;var v=[{x:y,y:u+d},{x:y,y:u}];return"top"===a?v.reverse():v}if(r){var _=l.segment.map((function(e){return t.apply(e,{position:o})}));return Eq(l,"discard")&&vZ()(_,(function(e){return!t.isInRange(e)}))?null:_}return null}(cZ({x:h.scale,y:d.scale}),xR(e),xR(n),i&&2===i.length,f,t.position,h.orientation,d.orientation,t);if(!p)return null;var m=DZ(p,2),g=m[0],y=g.x,v=g.y,_=m[1],b=_.x,x=_.y,w=zZ(zZ({clipPath:Eq(t,"hidden")?"url(#".concat(u,")"):void 0},fD(t,!0)),{},{x1:y,y1:v,x2:b,y2:x});return r.createElement(DD,{className:cR("recharts-reference-line",l)},function(t,e){return r.isValidElement(t)?r.cloneElement(t,e):VR()(t)?t(e):r.createElement("line",FZ({},e,{className:"recharts-reference-line-line"}))}(s,w),wq.renderCallByParent(t,function(t){var e=t.x1,n=t.y1,r=t.x2,i=t.y2;return sZ({x:e,y:n},{x:r,y:i})}({x1:y,y1:v,x2:b,y2:x})))}function UZ(t){return UZ="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},UZ(t)}function VZ(){return VZ=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},VZ.apply(this,arguments)}function WZ(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function GZ(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?WZ(Object(n),!0).forEach((function(e){qZ(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):WZ(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function qZ(t,e,n){return e=function(t){var e=function(t,e){if("object"!=UZ(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=UZ(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==UZ(e)?e:String(e)}(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}NZ.displayName="ReferenceLine",NZ.defaultProps={isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,fill:"none",stroke:"#ccc",fillOpacity:1,strokeWidth:1,position:"middle"};function HZ(t){var e=t.x1,n=t.x2,i=t.y1,o=t.y2,a=t.className,s=t.alwaysShow,l=t.clipPathId;NR(void 0===s,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.');var c=xR(e),u=xR(n),h=xR(i),d=xR(o),f=t.shape;if(!c&&!u&&!h&&!d&&!f)return null;var p=function(t,e,n,r,i){var o=i.x1,a=i.x2,s=i.y1,l=i.y2,c=i.xAxis,u=i.yAxis;if(!c||!u)return null;var h=cZ({x:c.scale,y:u.scale}),d={x:t?h.x.apply(o,{position:"start"}):h.x.rangeMin,y:n?h.y.apply(s,{position:"start"}):h.y.rangeMin},f={x:e?h.x.apply(a,{position:"end"}):h.x.rangeMax,y:r?h.y.apply(l,{position:"end"}):h.y.rangeMax};return!Eq(i,"discard")||h.isInRange(d)&&h.isInRange(f)?sZ(d,f):null}(c,u,h,d,t);if(!p&&!f)return null;var m=Eq(t,"hidden")?"url(#".concat(l,")"):void 0;return r.createElement(DD,{className:cR("recharts-reference-area",a)},HZ.renderRect(f,GZ(GZ({clipPath:m},fD(t,!0)),p)),wq.renderCallByParent(t,p))}function ZZ(t){return function(t){if(Array.isArray(t))return XZ(t)}(t)||function(t){if("undefined"!==typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"===typeof t)return XZ(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return XZ(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function XZ(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}HZ.displayName="ReferenceArea",HZ.defaultProps={isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,r:10,fill:"#ccc",fillOpacity:.5,stroke:"none",strokeWidth:1},HZ.renderRect=function(t,e){return r.isValidElement(t)?r.cloneElement(t,e):VR()(t)?t(e):r.createElement(SV,VZ({},e,{className:"recharts-reference-area-rect"}))};var YZ=function(t,e,n,r,i){var o=lD(t,NZ),a=lD(t,gZ),s=[].concat(ZZ(o),ZZ(a)),l=lD(t,HZ),c="".concat(r,"Id"),u=r[0],h=e;if(s.length&&(h=s.reduce((function(t,e){if(e.props[c]===n&&Eq(e.props,"extendDomain")&&bR(e.props[u])){var r=e.props[u];return[Math.min(t[0],r),Math.max(t[1],r)]}return t}),h)),l.length){var d="".concat(u,"1"),f="".concat(u,"2");h=l.reduce((function(t,e){if(e.props[c]===n&&Eq(e.props,"extendDomain")&&bR(e.props[d])&&bR(e.props[f])){var r=e.props[d],i=e.props[f];return[Math.min(t[0],r,i),Math.max(t[1],r,i)]}return t}),h)}return i&&i.length&&(h=i.reduce((function(t,e){return bR(e)?[Math.min(t[0],e),Math.max(t[1],e)]:t}),h)),h},KZ=n(7283),$Z=new(n.n(KZ)()),JZ="recharts.syncMouseEvents";function QZ(t){return QZ="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},QZ(t)}function tX(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,nX(r.key),r)}}function eX(t,e,n){return(e=nX(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function nX(t){var e=function(t,e){if("object"!=QZ(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=QZ(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==QZ(e)?e:String(e)}var rX=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),eX(this,"activeIndex",0),eX(this,"coordinateList",[]),eX(this,"layout","horizontal")}var e,n,r;return e=t,n=[{key:"setDetails",value:function(t){var e,n=t.coordinateList,r=void 0===n?null:n,i=t.container,o=void 0===i?null:i,a=t.layout,s=void 0===a?null:a,l=t.offset,c=void 0===l?null:l,u=t.mouseHandlerCallback,h=void 0===u?null:u;this.coordinateList=null!==(e=null!==r&&void 0!==r?r:this.coordinateList)&&void 0!==e?e:[],this.container=null!==o&&void 0!==o?o:this.container,this.layout=null!==s&&void 0!==s?s:this.layout,this.offset=null!==c&&void 0!==c?c:this.offset,this.mouseHandlerCallback=null!==h&&void 0!==h?h:this.mouseHandlerCallback,this.activeIndex=Math.min(Math.max(this.activeIndex,0),this.coordinateList.length-1)}},{key:"focus",value:function(){this.spoofMouse()}},{key:"keyboardEvent",value:function(t){if(0!==this.coordinateList.length)switch(t.key){case"ArrowRight":if("horizontal"!==this.layout)return;this.activeIndex=Math.min(this.activeIndex+1,this.coordinateList.length-1),this.spoofMouse();break;case"ArrowLeft":if("horizontal"!==this.layout)return;this.activeIndex=Math.max(this.activeIndex-1,0),this.spoofMouse()}}},{key:"setIndex",value:function(t){this.activeIndex=t}},{key:"spoofMouse",value:function(){var t,e;if("horizontal"===this.layout&&0!==this.coordinateList.length){var n=this.container.getBoundingClientRect(),r=n.x,i=n.y,o=n.height,a=this.coordinateList[this.activeIndex].coordinate,s=(null===(t=window)||void 0===t?void 0:t.scrollX)||0,l=(null===(e=window)||void 0===e?void 0:e.scrollY)||0,c=r+a+s,u=i+this.offset.top+o/2+l;this.mouseHandlerCallback({pageX:c,pageY:u})}}}],n&&tX(e.prototype,n),r&&tX(e,r),Object.defineProperty(e,"prototype",{writable:!1}),t}();function iX(){}function oX(t,e,n){t._context.bezierCurveTo((2*t._x0+t._x1)/3,(2*t._y0+t._y1)/3,(t._x0+2*t._x1)/3,(t._y0+2*t._y1)/3,(t._x0+4*t._x1+e)/6,(t._y0+4*t._y1+n)/6)}function aX(t){this._context=t}function sX(t){this._context=t}function lX(t){this._context=t}aX.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:oX(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:oX(this,t,e)}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}},sX.prototype={areaStart:iX,areaEnd:iX,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x2,this._y2),this._context.closePath();break;case 2:this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break;case 3:this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4)}},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._x2=t,this._y2=e;break;case 1:this._point=2,this._x3=t,this._y3=e;break;case 2:this._point=3,this._x4=t,this._y4=e,this._context.moveTo((this._x0+4*this._x1+t)/6,(this._y0+4*this._y1+e)/6);break;default:oX(this,t,e)}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}},lX.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var n=(this._x0+4*this._x1+t)/6,r=(this._y0+4*this._y1+e)/6;this._line?this._context.lineTo(n,r):this._context.moveTo(n,r);break;case 3:this._point=4;default:oX(this,t,e)}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};class cX{constructor(t,e){this._context=t,this._x=e}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line}point(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:this._x?this._context.bezierCurveTo(this._x0=(this._x0+t)/2,this._y0,this._x0,e,t,e):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+e)/2,t,this._y0,t,e)}this._x0=t,this._y0=e}}function uX(t){this._context=t}function hX(t){this._context=t}function dX(t){return new hX(t)}function fX(t){return t<0?-1:1}function pX(t,e,n){var r=t._x1-t._x0,i=e-t._x1,o=(t._y1-t._y0)/(r||i<0&&-0),a=(n-t._y1)/(i||r<0&&-0),s=(o*i+a*r)/(r+i);return(fX(o)+fX(a))*Math.min(Math.abs(o),Math.abs(a),.5*Math.abs(s))||0}function mX(t,e){var n=t._x1-t._x0;return n?(3*(t._y1-t._y0)/n-e)/2:e}function gX(t,e,n){var r=t._x0,i=t._y0,o=t._x1,a=t._y1,s=(o-r)/3;t._context.bezierCurveTo(r+s,i+s*e,o-s,a-s*n,o,a)}function yX(t){this._context=t}function vX(t){this._context=new _X(t)}function _X(t){this._context=t}function bX(t){this._context=t}function xX(t){var e,n,r=t.length-1,i=new Array(r),o=new Array(r),a=new Array(r);for(i[0]=0,o[0]=2,a[0]=t[0]+2*t[1],e=1;e<r-1;++e)i[e]=1,o[e]=4,a[e]=4*t[e]+2*t[e+1];for(i[r-1]=2,o[r-1]=7,a[r-1]=8*t[r-1]+t[r],e=1;e<r;++e)n=i[e]/o[e-1],o[e]-=n,a[e]-=n*a[e-1];for(i[r-1]=a[r-1]/o[r-1],e=r-2;e>=0;--e)i[e]=(a[e]-i[e+1])/o[e];for(o[r-1]=(t[r]+i[r-1])/2,e=0;e<r-1;++e)o[e]=2*t[e+1]-i[e+1];return[i,o]}function wX(t,e){this._context=t,this._t=e}function SX(t){return t[0]}function EX(t){return t[1]}function TX(t,e){var n=VB(!0),r=null,i=dX,o=null,a=uF(s);function s(s){var l,c,u,h=(s=lW(s)).length,d=!1;for(null==r&&(o=i(u=a())),l=0;l<=h;++l)!(l<h&&n(c=s[l],l,s))===d&&((d=!d)?o.lineStart():o.lineEnd()),d&&o.point(+t(c,l,s),+e(c,l,s));if(u)return o=null,u+""||null}return t="function"===typeof t?t:void 0===t?SX:VB(t),e="function"===typeof e?e:void 0===e?EX:VB(e),s.x=function(e){return arguments.length?(t="function"===typeof e?e:VB(+e),s):t},s.y=function(t){return arguments.length?(e="function"===typeof t?t:VB(+t),s):e},s.defined=function(t){return arguments.length?(n="function"===typeof t?t:VB(!!t),s):n},s.curve=function(t){return arguments.length?(i=t,null!=r&&(o=i(r)),s):i},s.context=function(t){return arguments.length?(null==t?r=o=null:o=i(r=t),s):r},s}function MX(t,e,n){var r=null,i=VB(!0),o=null,a=dX,s=null,l=uF(c);function c(c){var u,h,d,f,p,m=(c=lW(c)).length,g=!1,y=new Array(m),v=new Array(m);for(null==o&&(s=a(p=l())),u=0;u<=m;++u){if(!(u<m&&i(f=c[u],u,c))===g)if(g=!g)h=u,s.areaStart(),s.lineStart();else{for(s.lineEnd(),s.lineStart(),d=u-1;d>=h;--d)s.point(y[d],v[d]);s.lineEnd(),s.areaEnd()}g&&(y[u]=+t(f,u,c),v[u]=+e(f,u,c),s.point(r?+r(f,u,c):y[u],n?+n(f,u,c):v[u]))}if(p)return s=null,p+""||null}function u(){return TX().defined(i).curve(a).context(o)}return t="function"===typeof t?t:void 0===t?SX:VB(+t),e="function"===typeof e?e:VB(void 0===e?0:+e),n="function"===typeof n?n:void 0===n?EX:VB(+n),c.x=function(e){return arguments.length?(t="function"===typeof e?e:VB(+e),r=null,c):t},c.x0=function(e){return arguments.length?(t="function"===typeof e?e:VB(+e),c):t},c.x1=function(t){return arguments.length?(r=null==t?null:"function"===typeof t?t:VB(+t),c):r},c.y=function(t){return arguments.length?(e="function"===typeof t?t:VB(+t),n=null,c):e},c.y0=function(t){return arguments.length?(e="function"===typeof t?t:VB(+t),c):e},c.y1=function(t){return arguments.length?(n=null==t?null:"function"===typeof t?t:VB(+t),c):n},c.lineX0=c.lineY0=function(){return u().x(t).y(e)},c.lineY1=function(){return u().x(t).y(n)},c.lineX1=function(){return u().x(r).y(e)},c.defined=function(t){return arguments.length?(i="function"===typeof t?t:VB(!!t),c):i},c.curve=function(t){return arguments.length?(a=t,null!=o&&(s=a(o)),c):a},c.context=function(t){return arguments.length?(null==t?o=s=null:s=a(o=t),c):o},c}function AX(t){return AX="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},AX(t)}function CX(){return CX=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},CX.apply(this,arguments)}function PX(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function kX(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?PX(Object(n),!0).forEach((function(e){IX(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):PX(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function IX(t,e,n){return e=function(t){var e=function(t,e){if("object"!=AX(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=AX(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==AX(e)?e:String(e)}(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}uX.prototype={areaStart:iX,areaEnd:iX,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(t,e){t=+t,e=+e,this._point?this._context.lineTo(t,e):(this._point=1,this._context.moveTo(t,e))}},hX.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:this._context.lineTo(t,e)}}},yX.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:gX(this,this._t0,mX(this,this._t0))}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){var n=NaN;if(e=+e,(t=+t)!==this._x1||e!==this._y1){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,gX(this,mX(this,n=pX(this,t,e)),n);break;default:gX(this,this._t0,n=pX(this,t,e))}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e,this._t0=n}}},(vX.prototype=Object.create(yX.prototype)).point=function(t,e){yX.prototype.point.call(this,e,t)},_X.prototype={moveTo:function(t,e){this._context.moveTo(e,t)},closePath:function(){this._context.closePath()},lineTo:function(t,e){this._context.lineTo(e,t)},bezierCurveTo:function(t,e,n,r,i,o){this._context.bezierCurveTo(e,t,r,n,o,i)}},bX.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var t=this._x,e=this._y,n=t.length;if(n)if(this._line?this._context.lineTo(t[0],e[0]):this._context.moveTo(t[0],e[0]),2===n)this._context.lineTo(t[1],e[1]);else for(var r=xX(t),i=xX(e),o=0,a=1;a<n;++o,++a)this._context.bezierCurveTo(r[0][o],i[0][o],r[1][o],i[1][o],t[a],e[a]);(this._line||0!==this._line&&1===n)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(t,e){this._x.push(+t),this._y.push(+e)}},wX.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&2===this._point&&this._context.lineTo(this._x,this._y),(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:if(this._t<=0)this._context.lineTo(this._x,e),this._context.lineTo(t,e);else{var n=this._x*(1-this._t)+t*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,e)}}this._x=t,this._y=e}};var OX={curveBasisClosed:function(t){return new sX(t)},curveBasisOpen:function(t){return new lX(t)},curveBasis:function(t){return new aX(t)},curveBumpX:function(t){return new cX(t,!0)},curveBumpY:function(t){return new cX(t,!1)},curveLinearClosed:function(t){return new uX(t)},curveLinear:dX,curveMonotoneX:function(t){return new yX(t)},curveMonotoneY:function(t){return new vX(t)},curveNatural:function(t){return new bX(t)},curveStep:function(t){return new wX(t,.5)},curveStepAfter:function(t){return new wX(t,1)},curveStepBefore:function(t){return new wX(t,0)}},LX=function(t){return t.x===+t.x&&t.y===+t.y},jX=function(t){return t.x},zX=function(t){return t.y},RX=function(t){var e,n=t.type,r=void 0===n?"linear":n,i=t.points,o=void 0===i?[]:i,a=t.baseLine,s=t.layout,l=t.connectNulls,c=void 0!==l&&l,u=function(t,e){if(VR()(t))return t;var n="curve".concat(_B()(t));return"curveMonotone"!==n&&"curveBump"!==n||!e?OX[n]||dX:OX["".concat(n).concat("vertical"===e?"Y":"X")]}(r,s),h=c?o.filter((function(t){return LX(t)})):o;if(Array.isArray(a)){var d=c?a.filter((function(t){return LX(t)})):a,f=h.map((function(t,e){return kX(kX({},t),{},{base:d[e]})}));return(e="vertical"===s?MX().y(zX).x1(jX).x0((function(t){return t.base.x})):MX().x(jX).y1(zX).y0((function(t){return t.base.y}))).defined(LX).curve(u),e(f)}return(e="vertical"===s&&bR(a)?MX().y(zX).x1(jX).x0(a):bR(a)?MX().x(jX).y1(zX).y0(a):TX().x(jX).y(zX)).defined(LX).curve(u),e(h)},DX=function(t){var e=t.className,n=t.points,i=t.path,o=t.pathRef;if((!n||!n.length)&&!i)return null;var a=n&&n.length?RX(t):i;return r.createElement("path",CX({},fD(t,!1),$R(t),{className:cR("recharts-curve",e),d:a,ref:o}))};function BX(t){return BX="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},BX(t)}var FX=["x","y","top","left","width","height","className"];function NX(){return NX=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},NX.apply(this,arguments)}function UX(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function VX(t,e,n){return e=function(t){var e=function(t,e){if("object"!=BX(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=BX(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==BX(e)?e:String(e)}(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function WX(t,e){if(null==t)return{};var n,r,i=function(t,e){if(null==t)return{};var n,r,i={},o=Object.keys(t);for(r=0;r<o.length;r++)n=o[r],e.indexOf(n)>=0||(i[n]=t[n]);return i}(t,e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(r=0;r<o.length;r++)n=o[r],e.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}var GX=function(t,e,n,r,i,o){return"M".concat(t,",").concat(i,"v").concat(r,"M").concat(o,",").concat(e,"h").concat(n)},qX=function(t){var e=t.x,n=void 0===e?0:e,i=t.y,o=void 0===i?0:i,a=t.top,s=void 0===a?0:a,l=t.left,c=void 0===l?0:l,u=t.width,h=void 0===u?0:u,d=t.height,f=void 0===d?0:d,p=t.className,m=function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?UX(Object(n),!0).forEach((function(e){VX(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):UX(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}({x:n,y:o,top:s,left:c,width:h,height:f},WX(t,FX));return bR(n)&&bR(o)&&bR(h)&&bR(f)&&bR(s)&&bR(c)?r.createElement("path",NX({},fD(m,!0),{className:cR("recharts-cross",p),d:GX(n,o,h,f,s,c)})):null};function HX(t){var e=t.cx,n=t.cy,r=t.radius,i=t.startAngle,o=t.endAngle;return{points:[iq(e,n,r,i),iq(e,n,r,o)],cx:e,cy:n,radius:r,startAngle:i,endAngle:o}}function ZX(t,e,n){var r,i,o,a;if("horizontal"===t)o=r=e.x,i=n.top,a=n.top+n.height;else if("vertical"===t)a=i=e.y,r=n.left,o=n.left+n.width;else if(null!=e.cx&&null!=e.cy){if("centric"!==t)return HX(e);var s=e.cx,l=e.cy,c=e.innerRadius,u=e.outerRadius,h=e.angle,d=iq(s,l,c,h),f=iq(s,l,u,h);r=d.x,i=d.y,o=f.x,a=f.y}return[{x:r,y:i},{x:o,y:a}]}function XX(t){return XX="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},XX(t)}function YX(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function KX(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?YX(Object(n),!0).forEach((function(e){$X(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):YX(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function $X(t,e,n){return e=function(t){var e=function(t,e){if("object"!=XX(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=XX(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==XX(e)?e:String(e)}(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function JX(t){var e,n=t.element,i=t.tooltipEventType,o=t.isActive,a=t.activeCoordinate,s=t.activePayload,l=t.offset,c=t.activeTooltipIndex,u=t.tooltipAxisBandSize,h=t.layout,d=t.chartName;if(!n||!n.props.cursor||!o||!a||"ScatterChart"!==d&&"axis"!==i)return null;var f=DX;if("ScatterChart"===d)e=a,f=qX;else if("BarChart"===d)e=function(t,e,n,r){var i=r/2;return{stroke:"none",fill:"#ccc",x:"horizontal"===t?e.x-i:n.left+.5,y:"horizontal"===t?n.top+.5:e.y-i,width:"horizontal"===t?r:n.width-1,height:"horizontal"===t?n.height-1:r}}(h,a,l,u),f=SV;else if("radial"===h){var p=HX(a),m=p.cx,g=p.cy,y=p.radius;e={cx:m,cy:g,startAngle:p.startAngle,endAngle:p.endAngle,innerRadius:y,outerRadius:y},f=dH}else e={points:ZX(h,a,l)},f=DX;var v=KX(KX(KX(KX({stroke:"#ccc",pointerEvents:"none"},l),e),fD(n.props.cursor,!1)),{},{payload:s,payloadIndex:c,className:cR("recharts-tooltip-cursor",n.props.cursor.className)});return(0,r.isValidElement)(n.props.cursor)?(0,r.cloneElement)(n.props.cursor,v):(0,r.createElement)(f,v)}var QX=["item"],tY=["children","className","width","height","style","compact","title","desc"];function eY(t){return eY="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},eY(t)}function nY(){return nY=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},nY.apply(this,arguments)}function rY(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,i,o,a,s=[],l=!0,c=!1;try{if(o=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=o.call(n)).done)&&(s.push(r.value),s.length!==e);l=!0);}catch(t){c=!0,i=t}finally{try{if(!l&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw i}}return s}}(t,e)||dY(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function iY(t,e){if(null==t)return{};var n,r,i=function(t,e){if(null==t)return{};var n,r,i={},o=Object.keys(t);for(r=0;r<o.length;r++)n=o[r],e.indexOf(n)>=0||(i[n]=t[n]);return i}(t,e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(r=0;r<o.length;r++)n=o[r],e.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function oY(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,yY(r.key),r)}}function aY(t,e,n){return e=lY(e),function(t,e){if(e&&("object"===eY(e)||"function"===typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return cY(t)}(t,sY()?Reflect.construct(e,n||[],lY(t).constructor):e.apply(t,n))}function sY(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(sY=function(){return!!t})()}function lY(t){return lY=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},lY(t)}function cY(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function uY(t,e){return uY=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},uY(t,e)}function hY(t){return function(t){if(Array.isArray(t))return fY(t)}(t)||function(t){if("undefined"!==typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||dY(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function dY(t,e){if(t){if("string"===typeof t)return fY(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?fY(t,e):void 0}}function fY(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function pY(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function mY(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?pY(Object(n),!0).forEach((function(e){gY(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):pY(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function gY(t,e,n){return(e=yY(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function yY(t){var e=function(t,e){if("object"!=eY(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=eY(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==eY(e)?e:String(e)}var vY={xAxis:["bottom","top"],yAxis:["left","right"]},_Y={width:"100%",height:"100%"},bY={x:0,y:0};function xY(t){return t}var wY=function(t,e){var n=e.graphicalItems,r=e.dataStartIndex,i=e.dataEndIndex,o=(null!==n&&void 0!==n?n:[]).reduce((function(t,e){var n=e.props.data;return n&&n.length?[].concat(hY(t),hY(n)):t}),[]);return o.length>0?o:t&&t.length&&bR(r)&&bR(i)?t.slice(r,i+1):[]};function SY(t){return"number"===t?[0,"auto"]:void 0}var EY=function(t,e,n,r){var i=t.graphicalItems,o=t.tooltipAxis,a=wY(e,t);return n<0||!i||!i.length||n>=a.length?null:i.reduce((function(i,s){var l,c,u=null!==(l=s.props.data)&&void 0!==l?l:e;(u&&t.dataStartIndex+t.dataEndIndex!==0&&(u=u.slice(t.dataStartIndex,t.dataEndIndex+1)),o.dataKey&&!o.allowDuplicatedCategory)?c=AR(void 0===u?a:u,o.dataKey,r):c=u&&u[n]||a[n];return c?[].concat(hY(i),[OG(s,c)]):i}),[])},TY=function(t,e,n,r){var i=r||{x:t.chartX,y:t.chartY},o=function(t,e){return"horizontal"===e?t.x:"vertical"===e?t.y:"centric"===e?t.angle:t.radius}(i,n),a=t.orderedTooltipTicks,s=t.tooltipAxis,l=t.tooltipTicks,c=function(t){var e,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=arguments.length>2?arguments[2]:void 0,i=arguments.length>3?arguments[3]:void 0,o=-1,a=null!==(e=null===n||void 0===n?void 0:n.length)&&void 0!==e?e:0;if(a<=1)return 0;if(i&&"angleAxis"===i.axisType&&Math.abs(Math.abs(i.range[1]-i.range[0])-360)<=1e-6)for(var s=i.range,l=0;l<a;l++){var c=l>0?r[l-1].coordinate:r[a-1].coordinate,u=r[l].coordinate,h=l>=a-1?r[0].coordinate:r[l+1].coordinate,d=void 0;if(vR(u-c)!==vR(h-u)){var f=[];if(vR(h-u)===vR(s[1]-s[0])){d=h;var p=u+s[1]-s[0];f[0]=Math.min(p,(p+c)/2),f[1]=Math.max(p,(p+c)/2)}else{d=c;var m=h+s[1]-s[0];f[0]=Math.min(u,(m+u)/2),f[1]=Math.max(u,(m+u)/2)}var g=[Math.min(u,(d+u)/2),Math.max(u,(d+u)/2)];if(t>g[0]&&t<=g[1]||t>=f[0]&&t<=f[1]){o=r[l].index;break}}else{var y=Math.min(c,h),v=Math.max(c,h);if(t>(y+u)/2&&t<=(v+u)/2){o=r[l].index;break}}}else for(var _=0;_<a;_++)if(0===_&&t<=(n[_].coordinate+n[_+1].coordinate)/2||_>0&&_<a-1&&t>(n[_].coordinate+n[_-1].coordinate)/2&&t<=(n[_].coordinate+n[_+1].coordinate)/2||_===a-1&&t>(n[_].coordinate+n[_-1].coordinate)/2){o=n[_].index;break}return o}(o,a,l,s);if(c>=0&&l){var u=l[c]&&l[c].value,h=EY(t,e,c,u),d=function(t,e,n,r){var i=e.find((function(t){return t&&t.index===n}));if(i){if("horizontal"===t)return{x:i.coordinate,y:r.y};if("vertical"===t)return{x:r.x,y:i.coordinate};if("centric"===t){var o=i.coordinate,a=r.radius;return mY(mY(mY({},r),iq(r.cx,r.cy,a,o)),{},{angle:o,radius:a})}var s=i.coordinate,l=r.angle;return mY(mY(mY({},r),iq(r.cx,r.cy,s,l)),{},{angle:l,radius:s})}return bY}(n,a,c,i);return{activeTooltipIndex:c,activeLabel:u,activePayload:h,activeCoordinate:d}}return null},MY=function(t,e){var n=e.axes,r=e.graphicalItems,i=e.axisType,o=e.axisIdKey,a=e.stackGroups,s=e.dataStartIndex,l=e.dataEndIndex,c=t.layout,u=t.children,h=t.stackOffset,d=yG(c,i);return n.reduce((function(e,n){var f,p=n.props,m=p.type,g=p.dataKey,y=p.allowDataOverflow,v=p.allowDuplicatedCategory,_=p.scale,b=p.ticks,x=p.includeHidden,w=n.props[o];if(e[w])return e;var S,E,T,M=wY(t.data,{graphicalItems:r.filter((function(t){return t.props[o]===w})),dataStartIndex:s,dataEndIndex:l}),A=M.length;(function(t,e,n){if("number"===n&&!0===e&&Array.isArray(t)){var r=null===t||void 0===t?void 0:t[0],i=null===t||void 0===t?void 0:t[1];if(r&&i&&bR(r)&&bR(i))return!0}return!1})(n.props.domain,y,m)&&(S=PG(n.props.domain,null,y),!d||"number"!==m&&"auto"===_||(T=fG(M,g,"category")));var C=SY(m);if(!S||0===S.length){var P,k=null!==(P=n.props.domain)&&void 0!==P?P:C;if(g){if(S=fG(M,g,m),"category"===m&&d){var I=function(t){if(!Array.isArray(t))return!1;for(var e=t.length,n={},r=0;r<e;r++){if(n[t[r]])return!0;n[t[r]]=!0}return!1}(S);v&&I?(E=S,S=MD()(0,A)):v||(S=IG(k,S,n).reduce((function(t,e){return t.indexOf(e)>=0?t:[].concat(hY(t),[e])}),[]))}else if("category"===m)S=v?S.filter((function(t){return""!==t&&!sR()(t)})):IG(k,S,n).reduce((function(t,e){return t.indexOf(e)>=0||""===e||sR()(e)?t:[].concat(hY(t),[e])}),[]);else if("number"===m){var O=function(t,e,n,r,i){var o=e.map((function(e){return mG(t,e,n,i,r)})).filter((function(t){return!sR()(t)}));return o&&o.length?o.reduce((function(t,e){return[Math.min(t[0],e[0]),Math.max(t[1],e[1])]}),[1/0,-1/0]):null}(M,r.filter((function(t){return t.props[o]===w&&(x||!t.props.hide)})),g,i,c);O&&(S=O)}!d||"number"!==m&&"auto"===_||(T=fG(M,g,"category"))}else S=d?MD()(0,A):a&&a[w]&&a[w].hasStack&&"number"===m?"expand"===h?[0,1]:MG(a[w].stackGroups,s,l):gG(M,r.filter((function(t){return t.props[o]===w&&(x||!t.props.hide)})),m,c,!0);if("number"===m)S=YZ(u,S,w,i,b),k&&(S=PG(k,S,y));else if("category"===m&&k){var L=k;S.every((function(t){return L.indexOf(t)>=0}))&&(S=L)}}return mY(mY({},e),{},gY({},w,mY(mY({},n.props),{},{axisType:i,domain:S,categoricalDomain:T,duplicateDomain:E,originalDomain:null!==(f=n.props.domain)&&void 0!==f?f:C,isCategorical:d,layout:c})))}),{})},AY=function(t,e){var n=e.axisType,r=void 0===n?"xAxis":n,i=e.AxisComp,o=e.graphicalItems,a=e.stackGroups,s=e.dataStartIndex,l=e.dataEndIndex,c=t.children,u="".concat(r,"Id"),h=lD(c,i),d={};return h&&h.length?d=MY(t,{axes:h,graphicalItems:o,axisType:r,axisIdKey:u,stackGroups:a,dataStartIndex:s,dataEndIndex:l}):o&&o.length&&(d=function(t,e){var n=e.graphicalItems,r=e.Axis,i=e.axisType,o=e.axisIdKey,a=e.stackGroups,s=e.dataStartIndex,l=e.dataEndIndex,c=t.layout,u=t.children,h=wY(t.data,{graphicalItems:n,dataStartIndex:s,dataEndIndex:l}),d=h.length,f=yG(c,i),p=-1;return n.reduce((function(t,e){var m,g=e.props[o],y=SY("number");return t[g]?t:(p++,f?m=MD()(0,d):a&&a[g]&&a[g].hasStack?(m=MG(a[g].stackGroups,s,l),m=YZ(u,m,g,i)):(m=PG(y,gG(h,n.filter((function(t){return t.props[o]===g&&!t.props.hide})),"number",c),r.defaultProps.allowDataOverflow),m=YZ(u,m,g,i)),mY(mY({},t),{},gY({},g,mY(mY({axisType:i},r.defaultProps),{},{hide:!0,orientation:mR()(vY,"".concat(i,".").concat(p%2),null),domain:m,originalDomain:y,isCategorical:f,layout:c}))))}),{})}(t,{Axis:i,graphicalItems:o,axisType:r,axisIdKey:u,stackGroups:a,dataStartIndex:s,dataEndIndex:l})),d},CY=function(t){var e=t.children,n=t.defaultShowTooltip,r=cD(e,$G),i=0,o=0;return t.data&&0!==t.data.length&&(o=t.data.length-1),r&&r.props&&(r.props.startIndex>=0&&(i=r.props.startIndex),r.props.endIndex>=0&&(o=r.props.endIndex)),{chartX:0,chartY:0,dataStartIndex:i,dataEndIndex:o,activeTooltipIndex:-1,isTooltipActive:Boolean(n)}},PY=function(t){return"horizontal"===t?{numericAxisName:"yAxis",cateAxisName:"xAxis"}:"vertical"===t?{numericAxisName:"xAxis",cateAxisName:"yAxis"}:"centric"===t?{numericAxisName:"radiusAxis",cateAxisName:"angleAxis"}:{numericAxisName:"angleAxis",cateAxisName:"radiusAxis"}},kY=function(t,e){var n=t.props,r=(t.graphicalItems,t.xAxisMap),i=void 0===r?{}:r,o=t.yAxisMap,a=void 0===o?{}:o,s=n.width,l=n.height,c=n.children,u=n.margin||{},h=cD(c,$G),d=cD(c,ZF),f=Object.keys(a).reduce((function(t,e){var n=a[e],r=n.orientation;return n.mirror||n.hide?t:mY(mY({},t),{},gY({},r,t[r]+n.width))}),{left:u.left||0,right:u.right||0}),p=Object.keys(i).reduce((function(t,e){var n=i[e],r=n.orientation;return n.mirror||n.hide?t:mY(mY({},t),{},gY({},r,mR()(t,"".concat(r))+n.height))}),{top:u.top||0,bottom:u.bottom||0}),m=mY(mY({},p),f),g=m.bottom;h&&(m.bottom+=h.props.height||$G.defaultProps.height),d&&e&&(m=function(t,e,n,r){var i=n.children,o=n.width,a=n.margin,s=o-(a.left||0)-(a.right||0),l=oG({children:i,legendWidth:s});if(l){var c=r||{},u=c.width,h=c.height,d=l.align,f=l.verticalAlign,p=l.layout;if(("vertical"===p||"horizontal"===p&&"middle"===f)&&"center"!==d&&bR(t[d]))return lG(lG({},t),{},cG({},d,t[d]+(u||0)));if(("horizontal"===p||"vertical"===p&&"center"===d)&&"middle"!==f&&bR(t[f]))return lG(lG({},t),{},cG({},f,t[f]+(h||0)))}return t}(m,0,n,e));var y=s-m.left-m.right,v=l-m.top-m.bottom;return mY(mY({brushBottom:g},m),{},{width:Math.max(y,0),height:Math.max(v,0)})},IY=function(t,e){return"xAxis"===e?t[e].width:"yAxis"===e?t[e].height:void 0},OY=function(t){var e,n=t.chartName,i=t.GraphicalChild,o=t.defaultTooltipEventType,a=void 0===o?"axis":o,s=t.validateTooltipEventTypes,l=void 0===s?["axis"]:s,c=t.axisComponents,u=t.legendContent,h=t.formatAxisMap,d=t.defaultProps,f=function(t,e){var n=e.graphicalItems,r=e.stackGroups,i=e.offset,o=e.updateId,a=e.dataStartIndex,s=e.dataEndIndex,l=t.barSize,u=t.layout,h=t.barGap,d=t.barCategoryGap,f=t.maxBarSize,p=PY(u),m=p.numericAxisName,g=p.cateAxisName,y=function(t){return!(!t||!t.length)&&t.some((function(t){var e=iD(t&&t.type);return e&&e.indexOf("Bar")>=0}))}(n),v=[];return n.forEach((function(n,p){var _=wY(t.data,{graphicalItems:[n],dataStartIndex:a,dataEndIndex:s}),b=n.props,x=b.dataKey,w=b.maxBarSize,S=n.props["".concat(m,"Id")],E=n.props["".concat(g,"Id")],T=c.reduce((function(t,r){var i=e["".concat(r.axisType,"Map")],o=n.props["".concat(r.axisType,"Id")];i&&i[o]||"zAxis"===r.axisType||PD(!1);var a=i[o];return mY(mY({},t),{},gY(gY({},r.axisType,a),"".concat(r.axisType,"Ticks"),vG(a)))}),{}),M=T[g],A=T["".concat(g,"Ticks")],C=r&&r[S]&&r[S].hasStack&&function(t,e){var n=t.props.stackId;if(xR(n)){var r=e[n];if(r){var i=r.items.indexOf(t);return i>=0?r.stackedData[i]:null}}return null}(n,r[S].stackGroups),P=iD(n.type).indexOf("Bar")>=0,k=kG(M,A),I=[],O=y&&function(t){var e=t.barSize,n=t.totalSize,r=t.stackGroups,i=void 0===r?{}:r;if(!i)return{};for(var o={},a=Object.keys(i),s=0,l=a.length;s<l;s++)for(var c=i[a[s]].stackGroups,u=Object.keys(c),h=0,d=u.length;h<d;h++){var f=c[u[h]],p=f.items,m=f.cateAxisId,g=p.filter((function(t){return iD(t.type).indexOf("Bar")>=0}));if(g&&g.length){var y=g[0].props.barSize,v=g[0].props[m];o[v]||(o[v]=[]);var _=sR()(y)?e:y;o[v].push({item:g[0],stackList:g.slice(1),barSize:sR()(_)?void 0:ER(_,n,0)})}}return o}({barSize:l,stackGroups:r,totalSize:IY(T,g)});if(P){var L,j,z=sR()(w)?f:w,R=null!==(L=null!==(j=kG(M,A,!0))&&void 0!==j?j:z)&&void 0!==L?L:0;I=function(t){var e=t.barGap,n=t.barCategoryGap,r=t.bandSize,i=t.sizeList,o=void 0===i?[]:i,a=t.maxBarSize,s=o.length;if(s<1)return null;var l,c=ER(e,r,0,!0),u=[];if(o[0].barSize===+o[0].barSize){var h=!1,d=r/s,f=o.reduce((function(t,e){return t+e.barSize||0}),0);(f+=(s-1)*c)>=r&&(f-=(s-1)*c,c=0),f>=r&&d>0&&(h=!0,f=s*(d*=.9));var p={offset:((r-f)/2|0)-c,size:0};l=o.reduce((function(t,e){var n={item:e.item,position:{offset:p.offset+p.size+c,size:h?d:e.barSize}},r=[].concat(uG(t),[n]);return p=r[r.length-1].position,e.stackList&&e.stackList.length&&e.stackList.forEach((function(t){r.push({item:t,position:p})})),r}),u)}else{var m=ER(n,r,0,!0);r-2*m-(s-1)*c<=0&&(c=0);var g=(r-2*m-(s-1)*c)/s;g>1&&(g>>=0);var y=a===+a?Math.min(g,a):g;l=o.reduce((function(t,e,n){var r=[].concat(uG(t),[{item:e.item,position:{offset:m+(g+c)*n+(g-y)/2,size:y}}]);return e.stackList&&e.stackList.length&&e.stackList.forEach((function(t){r.push({item:t,position:r[r.length-1].position})})),r}),u)}return l}({barGap:h,barCategoryGap:d,bandSize:R!==k?R:k,sizeList:O[E],maxBarSize:z}),R!==k&&(I=I.map((function(t){return mY(mY({},t),{},{position:mY(mY({},t.position),{},{offset:t.position.offset-R/2})})})))}var D=n&&n.type&&n.type.getComposedData;D&&v.push({props:mY(mY({},D(mY(mY({},T),{},{displayedData:_,props:t,dataKey:x,item:n,bandSize:k,barPosition:I,offset:i,stackedData:C,layout:u,dataStartIndex:a,dataEndIndex:s}))),{},gY(gY(gY({key:n.key||"item-".concat(p)},m,T[m]),g,T[g]),"animationId",o)),childIndex:yD(n,t.children),item:n})})),v},p=function(t,e){var r=t.props,o=t.dataStartIndex,a=t.dataEndIndex,s=t.updateId;if(!uD({props:r}))return null;var l=r.children,u=r.layout,d=r.stackOffset,p=r.data,m=r.reverseStackOrder,g=PY(u),y=g.numericAxisName,v=g.cateAxisName,_=lD(l,i),b=function(t,e,n,r,i,o){if(!t)return null;var a=(o?e.reverse():e).reduce((function(t,e){var i=e.props,o=i.stackId;if(i.hide)return t;var a=e.props[n],s=t[a]||{hasStack:!1,stackGroups:{}};if(xR(o)){var l=s.stackGroups[o]||{numericAxisId:n,cateAxisId:r,items:[]};l.items.push(e),s.hasStack=!0,s.stackGroups[o]=l}else s.stackGroups[SR("_stackId_")]={numericAxisId:n,cateAxisId:r,items:[e]};return lG(lG({},t),{},cG({},a,s))}),{});return Object.keys(a).reduce((function(e,o){var s=a[o];return s.hasStack&&(s.stackGroups=Object.keys(s.stackGroups).reduce((function(e,o){var a=s.stackGroups[o];return lG(lG({},e),{},cG({},o,{numericAxisId:n,cateAxisId:r,items:a.items,stackedData:SG(t,a.items,i)}))}),{})),lG(lG({},e),{},cG({},o,s))}),{})}(p,_,"".concat(y,"Id"),"".concat(v,"Id"),d,m),x=c.reduce((function(t,e){var n="".concat(e.axisType,"Map");return mY(mY({},t),{},gY({},n,AY(r,mY(mY({},e),{},{graphicalItems:_,stackGroups:e.axisType===y&&b,dataStartIndex:o,dataEndIndex:a}))))}),{}),w=kY(mY(mY({},x),{},{props:r,graphicalItems:_}),null===e||void 0===e?void 0:e.legendBBox);Object.keys(x).forEach((function(t){x[t]=h(r,x[t],w,t.replace("Map",""),n)}));var S=function(t){var e=TR(t),n=vG(e,!1,!0);return{tooltipTicks:n,orderedTooltipTicks:oR()(n,(function(t){return t.coordinate})),tooltipAxis:e,tooltipAxisBandSize:kG(e,n)}}(x["".concat(v,"Map")]),E=f(r,mY(mY({},x),{},{dataStartIndex:o,dataEndIndex:a,updateId:s,graphicalItems:_,stackGroups:b,offset:w}));return mY(mY({formattedGraphicalItems:E,graphicalItems:_,offset:w,stackGroups:b},S),x)};return e=function(t){function e(t){var i,o,a;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),gY(cY(a=aY(this,e,[t])),"eventEmitterSymbol",Symbol("rechartsEventEmitter")),gY(cY(a),"accessibilityManager",new rX),gY(cY(a),"handleLegendBBoxUpdate",(function(t){if(t){var e=a.state,n=e.dataStartIndex,r=e.dataEndIndex,i=e.updateId;a.setState(mY({legendBBox:t},p({props:a.props,dataStartIndex:n,dataEndIndex:r,updateId:i},mY(mY({},a.state),{},{legendBBox:t}))))}})),gY(cY(a),"handleReceiveSyncEvent",(function(t,e,n){if(a.props.syncId===t){if(n===a.eventEmitterSymbol&&"function"!==typeof a.props.syncMethod)return;a.applySyncEvent(e)}})),gY(cY(a),"handleBrushChange",(function(t){var e=t.startIndex,n=t.endIndex;if(e!==a.state.dataStartIndex||n!==a.state.dataEndIndex){var r=a.state.updateId;a.setState((function(){return mY({dataStartIndex:e,dataEndIndex:n},p({props:a.props,dataStartIndex:e,dataEndIndex:n,updateId:r},a.state))})),a.triggerSyncEvent({dataStartIndex:e,dataEndIndex:n})}})),gY(cY(a),"handleMouseEnter",(function(t){var e=a.getMouseInfo(t);if(e){var n=mY(mY({},e),{},{isTooltipActive:!0});a.setState(n),a.triggerSyncEvent(n);var r=a.props.onMouseEnter;VR()(r)&&r(n,t)}})),gY(cY(a),"triggeredAfterMouseMove",(function(t){var e=a.getMouseInfo(t),n=e?mY(mY({},e),{},{isTooltipActive:!0}):{isTooltipActive:!1};a.setState(n),a.triggerSyncEvent(n);var r=a.props.onMouseMove;VR()(r)&&r(n,t)})),gY(cY(a),"handleItemMouseEnter",(function(t){a.setState((function(){return{isTooltipActive:!0,activeItem:t,activePayload:t.tooltipPayload,activeCoordinate:t.tooltipPosition||{x:t.cx,y:t.cy}}}))})),gY(cY(a),"handleItemMouseLeave",(function(){a.setState((function(){return{isTooltipActive:!1}}))})),gY(cY(a),"handleMouseMove",(function(t){t.persist(),a.throttleTriggeredAfterMouseMove(t)})),gY(cY(a),"handleMouseLeave",(function(t){a.throttleTriggeredAfterMouseMove.cancel();var e={isTooltipActive:!1};a.setState(e),a.triggerSyncEvent(e);var n=a.props.onMouseLeave;VR()(n)&&n(e,t)})),gY(cY(a),"handleOuterEvent",(function(t){var e,n=function(t){var e=t&&t.type;return e&&rD[e]?rD[e]:null}(t),r=mR()(a.props,"".concat(n));n&&VR()(r)&&r(null!==(e=/.*touch.*/i.test(n)?a.getMouseInfo(t.changedTouches[0]):a.getMouseInfo(t))&&void 0!==e?e:{},t)})),gY(cY(a),"handleClick",(function(t){var e=a.getMouseInfo(t);if(e){var n=mY(mY({},e),{},{isTooltipActive:!0});a.setState(n),a.triggerSyncEvent(n);var r=a.props.onClick;VR()(r)&&r(n,t)}})),gY(cY(a),"handleMouseDown",(function(t){var e=a.props.onMouseDown;VR()(e)&&e(a.getMouseInfo(t),t)})),gY(cY(a),"handleMouseUp",(function(t){var e=a.props.onMouseUp;VR()(e)&&e(a.getMouseInfo(t),t)})),gY(cY(a),"handleTouchMove",(function(t){null!=t.changedTouches&&t.changedTouches.length>0&&a.throttleTriggeredAfterMouseMove(t.changedTouches[0])})),gY(cY(a),"handleTouchStart",(function(t){null!=t.changedTouches&&t.changedTouches.length>0&&a.handleMouseDown(t.changedTouches[0])})),gY(cY(a),"handleTouchEnd",(function(t){null!=t.changedTouches&&t.changedTouches.length>0&&a.handleMouseUp(t.changedTouches[0])})),gY(cY(a),"triggerSyncEvent",(function(t){void 0!==a.props.syncId&&$Z.emit(JZ,a.props.syncId,t,a.eventEmitterSymbol)})),gY(cY(a),"applySyncEvent",(function(t){var e=a.props,n=e.layout,r=e.syncMethod,i=a.state.updateId,o=t.dataStartIndex,s=t.dataEndIndex;if(void 0!==t.dataStartIndex||void 0!==t.dataEndIndex)a.setState(mY({dataStartIndex:o,dataEndIndex:s},p({props:a.props,dataStartIndex:o,dataEndIndex:s,updateId:i},a.state)));else if(void 0!==t.activeTooltipIndex){var l=t.chartX,c=t.chartY,u=t.activeTooltipIndex,h=a.state,d=h.offset,f=h.tooltipTicks;if(!d)return;if("function"===typeof r)u=r(f,t);else if("value"===r){u=-1;for(var m=0;m<f.length;m++)if(f[m].value===t.activeLabel){u=m;break}}var g=mY(mY({},d),{},{x:d.left,y:d.top}),y=Math.min(l,g.x+g.width),v=Math.min(c,g.y+g.height),_=f[u]&&f[u].value,b=EY(a.state,a.props.data,u),x=f[u]?{x:"horizontal"===n?f[u].coordinate:y,y:"horizontal"===n?v:f[u].coordinate}:bY;a.setState(mY(mY({},t),{},{activeLabel:_,activeCoordinate:x,activePayload:b,activeTooltipIndex:u}))}else a.setState(t)})),gY(cY(a),"renderCursor",(function(t){var e,i=a.state,o=i.isTooltipActive,s=i.activeCoordinate,l=i.activePayload,c=i.offset,u=i.activeTooltipIndex,h=i.tooltipAxisBandSize,d=a.getTooltipEventType(),f=null!==(e=t.props.active)&&void 0!==e?e:o,p=a.props.layout,m=t.key||"_recharts-cursor";return r.createElement(JX,{key:m,activeCoordinate:s,activePayload:l,activeTooltipIndex:u,chartName:n,element:t,isActive:f,layout:p,offset:c,tooltipAxisBandSize:h,tooltipEventType:d})})),gY(cY(a),"renderPolarAxis",(function(t,e,n){var i=mR()(t,"type.axisType"),o=mR()(a.state,"".concat(i,"Map")),s=o&&o[t.props["".concat(i,"Id")]];return(0,r.cloneElement)(t,mY(mY({},s),{},{className:cR(i,s.className),key:t.key||"".concat(e,"-").concat(n),ticks:vG(s,!0)}))})),gY(cY(a),"renderPolarGrid",(function(t){var e=t.props,n=e.radialLines,i=e.polarAngles,o=e.polarRadius,s=a.state,l=s.radiusAxisMap,c=s.angleAxisMap,u=TR(l),h=TR(c),d=h.cx,f=h.cy,p=h.innerRadius,m=h.outerRadius;return(0,r.cloneElement)(t,{polarAngles:Array.isArray(i)?i:vG(h,!0).map((function(t){return t.coordinate})),polarRadius:Array.isArray(o)?o:vG(u,!0).map((function(t){return t.coordinate})),cx:d,cy:f,innerRadius:p,outerRadius:m,key:t.key||"polar-grid",radialLines:n})})),gY(cY(a),"renderLegend",(function(){var t=a.state.formattedGraphicalItems,e=a.props,n=e.children,i=e.width,o=e.height,s=a.props.margin||{},l=i-(s.left||0)-(s.right||0),c=oG({children:n,formattedGraphicalItems:t,legendWidth:l,legendContent:u});if(!c)return null;var h=c.item,d=iY(c,QX);return(0,r.cloneElement)(h,mY(mY({},d),{},{chartWidth:i,chartHeight:o,margin:s,onBBoxUpdate:a.handleLegendBBoxUpdate}))})),gY(cY(a),"renderTooltip",(function(){var t,e=a.props,n=e.children,i=e.accessibilityLayer,o=cD(n,yB);if(!o)return null;var s=a.state,l=s.isTooltipActive,c=s.activeCoordinate,u=s.activePayload,h=s.activeLabel,d=s.offset,f=null!==(t=o.props.active)&&void 0!==t?t:l;return(0,r.cloneElement)(o,{viewBox:mY(mY({},d),{},{x:d.left,y:d.top}),active:f,label:h,payload:f?u:[],coordinate:c,accessibilityLayer:i})})),gY(cY(a),"renderBrush",(function(t){var e=a.props,n=e.margin,i=e.data,o=a.state,s=o.offset,l=o.dataStartIndex,c=o.dataEndIndex,u=o.updateId;return(0,r.cloneElement)(t,{key:t.key||"_recharts-brush",onChange:bG(a.handleBrushChange,t.props.onChange),data:i,x:bR(t.props.x)?t.props.x:s.left,y:bR(t.props.y)?t.props.y:s.top+s.height+s.brushBottom-(n.bottom||0),width:bR(t.props.width)?t.props.width:s.width,startIndex:l,endIndex:c,updateId:"brush-".concat(u)})})),gY(cY(a),"renderReferenceElement",(function(t,e,n){if(!t)return null;var i=cY(a).clipPathId,o=a.state,s=o.xAxisMap,l=o.yAxisMap,c=o.offset,u=t.props,h=u.xAxisId,d=u.yAxisId;return(0,r.cloneElement)(t,{key:t.key||"".concat(e,"-").concat(n),xAxis:s[h],yAxis:l[d],viewBox:{x:c.left,y:c.top,width:c.width,height:c.height},clipPathId:i})})),gY(cY(a),"renderActivePoints",(function(t){var n=t.item,r=t.activePoint,i=t.basePoint,o=t.childIndex,a=t.isRange,s=[],l=n.props.key,c=n.item.props,u=c.activeDot,h=mY(mY({index:o,dataKey:c.dataKey,cx:r.x,cy:r.y,r:4,fill:pG(n.item),strokeWidth:2,stroke:"#fff",payload:r.payload,value:r.value,key:"".concat(l,"-activePoint-").concat(o)},fD(u,!1)),$R(u));return s.push(e.renderActiveDot(u,h)),i?s.push(e.renderActiveDot(u,mY(mY({},h),{},{cx:i.x,cy:i.y,key:"".concat(l,"-basePoint-").concat(o)}))):a&&s.push(null),s})),gY(cY(a),"renderGraphicChild",(function(t,e,n){var i=a.filterFormatItem(t,e,n);if(!i)return null;var o=a.getTooltipEventType(),s=a.state,l=s.isTooltipActive,c=s.tooltipAxis,u=s.activeTooltipIndex,h=s.activeLabel,d=cD(a.props.children,yB),f=i.props,p=f.points,m=f.isRange,g=f.baseLine,y=i.item.props,v=y.activeDot,_=y.hide,b=y.activeBar,x=y.activeShape,w=Boolean(!_&&l&&d&&(v||b||x)),S={};"axis"!==o&&d&&"click"===d.props.trigger?S={onClick:bG(a.handleItemMouseEnter,t.props.onClick)}:"axis"!==o&&(S={onMouseLeave:bG(a.handleItemMouseLeave,t.props.onMouseLeave),onMouseEnter:bG(a.handleItemMouseEnter,t.props.onMouseEnter)});var E=(0,r.cloneElement)(t,mY(mY({},i.props),S));if(w){if(!(u>=0)){var T,M=(null!==(T=a.getItemByXY(a.state.activeCoordinate))&&void 0!==T?T:{graphicalItem:E}).graphicalItem,A=M.item,C=void 0===A?t:A,P=M.childIndex,k=mY(mY(mY({},i.props),S),{},{activeIndex:P});return[(0,r.cloneElement)(C,k),null,null]}var I,O;if(c.dataKey&&!c.allowDuplicatedCategory){var L="function"===typeof c.dataKey?function(t){return"function"===typeof c.dataKey?c.dataKey(t.payload):null}:"payload.".concat(c.dataKey.toString());I=AR(p,L,h),O=m&&g&&AR(g,L,h)}else I=null===p||void 0===p?void 0:p[u],O=m&&g&&g[u];if(x||b){var j=void 0!==t.props.activeIndex?t.props.activeIndex:u;return[(0,r.cloneElement)(t,mY(mY(mY({},i.props),S),{},{activeIndex:j})),null,null]}if(!sR()(I))return[E].concat(hY(a.renderActivePoints({item:i,activePoint:I,basePoint:O,childIndex:u,isRange:m})))}return m?[E,null,null]:[E,null]})),gY(cY(a),"renderCustomized",(function(t,e,n){return(0,r.cloneElement)(t,mY(mY({key:"recharts-customized-".concat(n)},a.props),a.state))})),gY(cY(a),"renderMap",{CartesianGrid:{handler:xY,once:!0},ReferenceArea:{handler:a.renderReferenceElement},ReferenceLine:{handler:xY},ReferenceDot:{handler:a.renderReferenceElement},XAxis:{handler:xY},YAxis:{handler:xY},Brush:{handler:a.renderBrush,once:!0},Bar:{handler:a.renderGraphicChild},Line:{handler:a.renderGraphicChild},Area:{handler:a.renderGraphicChild},Radar:{handler:a.renderGraphicChild},RadialBar:{handler:a.renderGraphicChild},Scatter:{handler:a.renderGraphicChild},Pie:{handler:a.renderGraphicChild},Funnel:{handler:a.renderGraphicChild},Tooltip:{handler:a.renderCursor,once:!0},PolarGrid:{handler:a.renderPolarGrid,once:!0},PolarAngleAxis:{handler:a.renderPolarAxis},PolarRadiusAxis:{handler:a.renderPolarAxis},Customized:{handler:a.renderCustomized}}),a.clipPathId="".concat(null!==(i=t.id)&&void 0!==i?i:SR("recharts"),"-clip"),a.throttleTriggeredAfterMouseMove=BR()(a.triggeredAfterMouseMove,null!==(o=t.throttleDelay)&&void 0!==o?o:1e3/60),a.state={},a}var i,o,s;return function(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&uY(t,e)}(e,t),i=e,o=[{key:"componentDidMount",value:function(){var t,e;this.addListener(),this.accessibilityManager.setDetails({container:this.container,offset:{left:null!==(t=this.props.margin.left)&&void 0!==t?t:0,top:null!==(e=this.props.margin.top)&&void 0!==e?e:0},coordinateList:this.state.tooltipTicks,mouseHandlerCallback:this.triggeredAfterMouseMove,layout:this.props.layout}),this.displayDefaultTooltip()}},{key:"displayDefaultTooltip",value:function(){var t=this.props,e=t.children,n=t.data,r=t.height,i=t.layout,o=cD(e,yB);if(o){var a=o.props.defaultIndex;if(!("number"!==typeof a||a<0||a>this.state.tooltipTicks.length)){var s=this.state.tooltipTicks[a]&&this.state.tooltipTicks[a].value,l=EY(this.state,n,a,s),c=this.state.tooltipTicks[a].coordinate,u=(this.state.offset.top+r)/2,h="horizontal"===i?{x:c,y:u}:{y:c,x:u},d=this.state.formattedGraphicalItems.find((function(t){return"Scatter"===t.item.type.name}));d&&(h=mY(mY({},h),d.props.points[a].tooltipPosition),l=d.props.points[a].tooltipPayload);var f={activeTooltipIndex:a,isTooltipActive:!0,activeLabel:s,activePayload:l,activeCoordinate:h};this.setState(f),this.renderCursor(o),this.accessibilityManager.setIndex(a)}}}},{key:"getSnapshotBeforeUpdate",value:function(t,e){return this.props.accessibilityLayer?(this.state.tooltipTicks!==e.tooltipTicks&&this.accessibilityManager.setDetails({coordinateList:this.state.tooltipTicks}),this.props.layout!==t.layout&&this.accessibilityManager.setDetails({layout:this.props.layout}),this.props.margin!==t.margin&&this.accessibilityManager.setDetails({offset:{left:null!==(n=this.props.margin.left)&&void 0!==n?n:0,top:null!==(r=this.props.margin.top)&&void 0!==r?r:0}}),null):null;var n,r}},{key:"componentDidUpdate",value:function(t){pD([cD(t.children,yB)],[cD(this.props.children,yB)])||this.displayDefaultTooltip()}},{key:"componentWillUnmount",value:function(){this.removeListener(),this.throttleTriggeredAfterMouseMove.cancel()}},{key:"getTooltipEventType",value:function(){var t=cD(this.props.children,yB);if(t&&"boolean"===typeof t.props.shared){var e=t.props.shared?"axis":"item";return l.indexOf(e)>=0?e:a}return a}},{key:"getMouseInfo",value:function(t){if(!this.container)return null;var e,n=this.container,r=n.getBoundingClientRect(),i={top:(e=r).top+window.scrollY-document.documentElement.clientTop,left:e.left+window.scrollX-document.documentElement.clientLeft},o={chartX:Math.round(t.pageX-i.left),chartY:Math.round(t.pageY-i.top)},a=r.width/n.offsetWidth||1,s=this.inRange(o.chartX,o.chartY,a);if(!s)return null;var l=this.state,c=l.xAxisMap,u=l.yAxisMap;if("axis"!==this.getTooltipEventType()&&c&&u){var h=TR(c).scale,d=TR(u).scale,f=h&&h.invert?h.invert(o.chartX):null,p=d&&d.invert?d.invert(o.chartY):null;return mY(mY({},o),{},{xValue:f,yValue:p})}var m=TY(this.state,this.props.data,this.props.layout,s);return m?mY(mY({},o),m):null}},{key:"inRange",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=this.props.layout,i=t/n,o=e/n;if("horizontal"===r||"vertical"===r){var a=this.state.offset;return i>=a.left&&i<=a.left+a.width&&o>=a.top&&o<=a.top+a.height?{x:i,y:o}:null}var s=this.state,l=s.angleAxisMap,c=s.radiusAxisMap;if(l&&c){var u=TR(l);return sq({x:i,y:o},u)}return null}},{key:"parseEventsOfWrapper",value:function(){var t=this.props.children,e=this.getTooltipEventType(),n=cD(t,yB),r={};return n&&"axis"===e&&(r="click"===n.props.trigger?{onClick:this.handleClick}:{onMouseEnter:this.handleMouseEnter,onMouseMove:this.handleMouseMove,onMouseLeave:this.handleMouseLeave,onTouchMove:this.handleTouchMove,onTouchStart:this.handleTouchStart,onTouchEnd:this.handleTouchEnd}),mY(mY({},$R(this.props,this.handleOuterEvent)),r)}},{key:"addListener",value:function(){$Z.on(JZ,this.handleReceiveSyncEvent)}},{key:"removeListener",value:function(){$Z.removeListener(JZ,this.handleReceiveSyncEvent)}},{key:"filterFormatItem",value:function(t,e,n){for(var r=this.state.formattedGraphicalItems,i=0,o=r.length;i<o;i++){var a=r[i];if(a.item===t||a.props.key===t.key||e===iD(a.item.type)&&n===a.childIndex)return a}return null}},{key:"renderClipPath",value:function(){var t=this.clipPathId,e=this.state.offset,n=e.left,i=e.top,o=e.height,a=e.width;return r.createElement("defs",null,r.createElement("clipPath",{id:t},r.createElement("rect",{x:n,y:i,height:o,width:a})))}},{key:"getXScales",value:function(){var t=this.state.xAxisMap;return t?Object.entries(t).reduce((function(t,e){var n=rY(e,2),r=n[0],i=n[1];return mY(mY({},t),{},gY({},r,i.scale))}),{}):null}},{key:"getYScales",value:function(){var t=this.state.yAxisMap;return t?Object.entries(t).reduce((function(t,e){var n=rY(e,2),r=n[0],i=n[1];return mY(mY({},t),{},gY({},r,i.scale))}),{}):null}},{key:"getXScaleByAxisId",value:function(t){var e;return null===(e=this.state.xAxisMap)||void 0===e||null===(e=e[t])||void 0===e?void 0:e.scale}},{key:"getYScaleByAxisId",value:function(t){var e;return null===(e=this.state.yAxisMap)||void 0===e||null===(e=e[t])||void 0===e?void 0:e.scale}},{key:"getItemByXY",value:function(t){var e=this.state,n=e.formattedGraphicalItems,r=e.activeItem;if(n&&n.length)for(var i=0,o=n.length;i<o;i++){var a=n[i],s=a.props,l=a.item,c=iD(l.type);if("Bar"===c){var u=(s.data||[]).find((function(e){return xV(t,e)}));if(u)return{graphicalItem:a,payload:u}}else if("RadialBar"===c){var h=(s.data||[]).find((function(e){return sq(t,e)}));if(h)return{graphicalItem:a,payload:h}}else if(wH(a,r)||SH(a,r)||EH(a,r)){var d=CH({graphicalItem:a,activeTooltipItem:r,itemData:l.props.data}),f=void 0===l.props.activeIndex?d:l.props.activeIndex;return{graphicalItem:mY(mY({},a),{},{childIndex:f}),payload:EH(a,r)?l.props.data[d]:a.props.data[d]}}}return null}},{key:"render",value:function(){var t=this;if(!uD(this))return null;var e,n,i=this.props,o=i.children,a=i.className,s=i.width,l=i.height,c=i.style,u=i.compact,h=i.title,d=i.desc,f=iY(i,tY),p=fD(f,!1);if(u)return r.createElement(CZ,{state:this.state,width:this.props.width,height:this.props.height,clipPathId:this.clipPathId},r.createElement(LD,nY({},p,{width:s,height:l,title:h,desc:d}),this.renderClipPath(),gD(o,this.renderMap)));this.props.accessibilityLayer&&(p.tabIndex=null!==(e=this.props.tabIndex)&&void 0!==e?e:0,p.role=null!==(n=this.props.role)&&void 0!==n?n:"application",p.onKeyDown=function(e){t.accessibilityManager.keyboardEvent(e)},p.onFocus=function(){t.accessibilityManager.focus()});var m=this.parseEventsOfWrapper();return r.createElement(CZ,{state:this.state,width:this.props.width,height:this.props.height,clipPathId:this.clipPathId},r.createElement("div",nY({className:cR("recharts-wrapper",a),style:mY({position:"relative",cursor:"default",width:s,height:l},c)},m,{ref:function(e){t.container=e}}),r.createElement(LD,nY({},p,{width:s,height:l,title:h,desc:d,style:_Y}),this.renderClipPath(),gD(o,this.renderMap)),this.renderLegend(),this.renderTooltip()))}}],o&&oY(i.prototype,o),s&&oY(i,s),Object.defineProperty(i,"prototype",{writable:!1}),e}(r.Component),gY(e,"displayName",n),gY(e,"defaultProps",mY({layout:"horizontal",stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:{top:5,right:5,bottom:5,left:5},reverseStackOrder:!1,syncMethod:"index"},d)),gY(e,"getDerivedStateFromProps",(function(t,e){var n=t.dataKey,r=t.data,i=t.children,o=t.width,a=t.height,s=t.layout,l=t.stackOffset,c=t.margin,u=e.dataStartIndex,h=e.dataEndIndex;if(void 0===e.updateId){var d=CY(t);return mY(mY(mY({},d),{},{updateId:0},p(mY(mY({props:t},d),{},{updateId:0}),e)),{},{prevDataKey:n,prevData:r,prevWidth:o,prevHeight:a,prevLayout:s,prevStackOffset:l,prevMargin:c,prevChildren:i})}if(n!==e.prevDataKey||r!==e.prevData||o!==e.prevWidth||a!==e.prevHeight||s!==e.prevLayout||l!==e.prevStackOffset||!qR(c,e.prevMargin)){var f=CY(t),m={chartX:e.chartX,chartY:e.chartY,isTooltipActive:e.isTooltipActive},g=mY(mY({},TY(e,r,s)),{},{updateId:e.updateId+1}),y=mY(mY(mY({},f),m),g);return mY(mY(mY({},y),p(mY({props:t},y),e)),{},{prevDataKey:n,prevData:r,prevWidth:o,prevHeight:a,prevLayout:s,prevStackOffset:l,prevMargin:c,prevChildren:i})}if(!pD(i,e.prevChildren)){var v,_,b,x,w=cD(i,$G),S=w&&null!==(v=null===(_=w.props)||void 0===_?void 0:_.startIndex)&&void 0!==v?v:u,E=w&&null!==(b=null===(x=w.props)||void 0===x?void 0:x.endIndex)&&void 0!==b?b:h,T=S!==u||E!==h,M=!sR()(r)&&!T?e.updateId:e.updateId+1;return mY(mY({updateId:M},p(mY(mY({props:t},e),{},{updateId:M,dataStartIndex:S,dataEndIndex:E}),e)),{},{prevChildren:i,dataStartIndex:S,dataEndIndex:E})}return null})),gY(e,"renderActiveDot",(function(t,e){var n;return n=(0,r.isValidElement)(t)?(0,r.cloneElement)(t,e):VR()(t)?t(e):r.createElement(YF,e),r.createElement(DD,{className:"recharts-active-dot",key:e.key},n)})),e};function LY(t,e,n){if(e<1)return[];if(1===e&&void 0===n)return t;for(var r=[],i=0;i<t.length;i+=e){if(void 0!==n&&!0!==n(t[i]))return;r.push(t[i])}return r}function jY(t,e,n,r,i){if(t*e<t*r||t*e>t*i)return!1;var o=n();return t*(e-t*o/2-r)>=0&&t*(e+t*o/2-i)<=0}function zY(t){return zY="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},zY(t)}function RY(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function DY(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?RY(Object(n),!0).forEach((function(e){BY(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):RY(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function BY(t,e,n){return e=function(t){var e=function(t,e){if("object"!=zY(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=zY(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==zY(e)?e:String(e)}(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function FY(t,e,n){var r=t.tick,i=t.ticks,o=t.viewBox,a=t.minTickGap,s=t.orientation,l=t.interval,c=t.tickFormatter,u=t.unit,h=t.angle;if(!i||!i.length||!r)return[];if(bR(l)||nB.isSsr)return function(t,e){return LY(t,e+1)}(i,"number"===typeof l&&bR(l)?l:0);var d=[],f="top"===s||"bottom"===s?"width":"height",p=u&&"width"===f?IV(u,{fontSize:e,letterSpacing:n}):{width:0,height:0},m=function(t,r){var i=VR()(c)?c(t.value,r):t.value;return"width"===f?function(t,e,n){var r={width:t.width+e.width,height:t.height+e.height};return uZ(r,n)}(IV(i,{fontSize:e,letterSpacing:n}),p,h):IV(i,{fontSize:e,letterSpacing:n})[f]},g=i.length>=2?vR(i[1].coordinate-i[0].coordinate):1,y=function(t,e,n){var r="width"===n,i=t.x,o=t.y,a=t.width,s=t.height;return 1===e?{start:r?i:o,end:r?i+a:o+s}:{start:r?i+a:o+s,end:r?i:o}}(o,g,f);return"equidistantPreserveStart"===l?function(t,e,n,r,i){for(var o,a=(r||[]).slice(),s=e.start,l=e.end,c=0,u=1,h=s,d=function(){var e=null===r||void 0===r?void 0:r[c];if(void 0===e)return{v:LY(r,u)};var o,a=c,d=function(){return void 0===o&&(o=n(e,a)),o},f=e.coordinate,p=0===c||jY(t,f,d,h,l);p||(c=0,h=s,u+=1),p&&(h=f+t*(d()/2+i),c+=u)};u<=a.length;)if(o=d())return o.v;return[]}(g,y,m,i,a):(d="preserveStart"===l||"preserveStartEnd"===l?function(t,e,n,r,i,o){var a=(r||[]).slice(),s=a.length,l=e.start,c=e.end;if(o){var u=r[s-1],h=n(u,s-1),d=t*(u.coordinate+t*h/2-c);a[s-1]=u=DY(DY({},u),{},{tickCoord:d>0?u.coordinate-d*t:u.coordinate}),jY(t,u.tickCoord,(function(){return h}),l,c)&&(c=u.tickCoord-t*(h/2+i),a[s-1]=DY(DY({},u),{},{isShow:!0}))}for(var f=o?s-1:s,p=function(e){var r,o=a[e],s=function(){return void 0===r&&(r=n(o,e)),r};if(0===e){var u=t*(o.coordinate-t*s()/2-l);a[e]=o=DY(DY({},o),{},{tickCoord:u<0?o.coordinate-u*t:o.coordinate})}else a[e]=o=DY(DY({},o),{},{tickCoord:o.coordinate});jY(t,o.tickCoord,s,l,c)&&(l=o.tickCoord+t*(s()/2+i),a[e]=DY(DY({},o),{},{isShow:!0}))},m=0;m<f;m++)p(m);return a}(g,y,m,i,a,"preserveStartEnd"===l):function(t,e,n,r,i){for(var o=(r||[]).slice(),a=o.length,s=e.start,l=e.end,c=function(e){var r,c=o[e],u=function(){return void 0===r&&(r=n(c,e)),r};if(e===a-1){var h=t*(c.coordinate+t*u()/2-l);o[e]=c=DY(DY({},c),{},{tickCoord:h>0?c.coordinate-h*t:c.coordinate})}else o[e]=c=DY(DY({},c),{},{tickCoord:c.coordinate});jY(t,c.tickCoord,u,s,l)&&(l=c.tickCoord-t*(u()/2+i),o[e]=DY(DY({},c),{},{isShow:!0}))},u=a-1;u>=0;u--)c(u);return o}(g,y,m,i,a),d.filter((function(t){return t.isShow})))}var NY=["viewBox"],UY=["viewBox"],VY=["ticks"];function WY(t){return WY="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},WY(t)}function GY(){return GY=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},GY.apply(this,arguments)}function qY(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function HY(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?qY(Object(n),!0).forEach((function(e){QY(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):qY(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function ZY(t,e){if(null==t)return{};var n,r,i=function(t,e){if(null==t)return{};var n,r,i={},o=Object.keys(t);for(r=0;r<o.length;r++)n=o[r],e.indexOf(n)>=0||(i[n]=t[n]);return i}(t,e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(r=0;r<o.length;r++)n=o[r],e.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function XY(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,tK(r.key),r)}}function YY(t,e,n){return e=$Y(e),function(t,e){if(e&&("object"===WY(e)||"function"===typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,KY()?Reflect.construct(e,n||[],$Y(t).constructor):e.apply(t,n))}function KY(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(KY=function(){return!!t})()}function $Y(t){return $Y=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},$Y(t)}function JY(t,e){return JY=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},JY(t,e)}function QY(t,e,n){return(e=tK(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function tK(t){var e=function(t,e){if("object"!=WY(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=WY(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==WY(e)?e:String(e)}var eK=function(t){function e(t){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=YY(this,e,[t])).state={fontSize:"",letterSpacing:""},n}var n,i,o;return function(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&JY(t,e)}(e,t),n=e,i=[{key:"shouldComponentUpdate",value:function(t,e){var n=t.viewBox,r=ZY(t,NY),i=this.props,o=i.viewBox,a=ZY(i,UY);return!qR(n,o)||!qR(r,a)||!qR(e,this.state)}},{key:"componentDidMount",value:function(){var t=this.layerReference;if(t){var e=t.getElementsByClassName("recharts-cartesian-axis-tick-value")[0];e&&this.setState({fontSize:window.getComputedStyle(e).fontSize,letterSpacing:window.getComputedStyle(e).letterSpacing})}}},{key:"getTickLineCoord",value:function(t){var e,n,r,i,o,a,s=this.props,l=s.x,c=s.y,u=s.width,h=s.height,d=s.orientation,f=s.tickSize,p=s.mirror,m=s.tickMargin,g=p?-1:1,y=t.tickSize||f,v=bR(t.tickCoord)?t.tickCoord:t.coordinate;switch(d){case"top":e=n=t.coordinate,a=(r=(i=c+ +!p*h)-g*y)-g*m,o=v;break;case"left":r=i=t.coordinate,o=(e=(n=l+ +!p*u)-g*y)-g*m,a=v;break;case"right":r=i=t.coordinate,o=(e=(n=l+ +p*u)+g*y)+g*m,a=v;break;default:e=n=t.coordinate,a=(r=(i=c+ +p*h)+g*y)+g*m,o=v}return{line:{x1:e,y1:r,x2:n,y2:i},tick:{x:o,y:a}}}},{key:"getTickTextAnchor",value:function(){var t,e=this.props,n=e.orientation,r=e.mirror;switch(n){case"left":t=r?"start":"end";break;case"right":t=r?"end":"start";break;default:t="middle"}return t}},{key:"getTickVerticalAnchor",value:function(){var t=this.props,e=t.orientation,n=t.mirror,r="end";switch(e){case"left":case"right":r="middle";break;case"top":r=n?"start":"end";break;default:r=n?"end":"start"}return r}},{key:"renderAxisLine",value:function(){var t=this.props,e=t.x,n=t.y,i=t.width,o=t.height,a=t.orientation,s=t.mirror,l=t.axisLine,c=HY(HY(HY({},fD(this.props,!1)),fD(l,!1)),{},{fill:"none"});if("top"===a||"bottom"===a){var u=+("top"===a&&!s||"bottom"===a&&s);c=HY(HY({},c),{},{x1:e,y1:n+u*o,x2:e+i,y2:n+u*o})}else{var h=+("left"===a&&!s||"right"===a&&s);c=HY(HY({},c),{},{x1:e+h*i,y1:n,x2:e+h*i,y2:n+o})}return r.createElement("line",GY({},c,{className:cR("recharts-cartesian-axis-line",mR()(l,"className"))}))}},{key:"renderTicks",value:function(t,n,i){var o=this,a=this.props,s=a.tickLine,l=a.stroke,c=a.tick,u=a.tickFormatter,h=a.unit,d=FY(HY(HY({},this.props),{},{ticks:t}),n,i),f=this.getTickTextAnchor(),p=this.getTickVerticalAnchor(),m=fD(this.props,!1),g=fD(c,!1),y=HY(HY({},m),{},{fill:"none"},fD(s,!1)),v=d.map((function(t,n){var i=o.getTickLineCoord(t),a=i.line,v=i.tick,_=HY(HY(HY(HY({textAnchor:f,verticalAnchor:p},m),{},{stroke:"none",fill:l},g),v),{},{index:n,payload:t,visibleTicksCount:d.length,tickFormatter:u});return r.createElement(DD,GY({className:"recharts-cartesian-axis-tick",key:"tick-".concat(t.value,"-").concat(t.coordinate,"-").concat(t.tickCoord)},JR(o.props,t,n)),s&&r.createElement("line",GY({},y,a,{className:cR("recharts-cartesian-axis-tick-line",mR()(s,"className"))})),c&&e.renderTickItem(c,_,"".concat(VR()(u)?u(t.value,n):t.value).concat(h||"")))}));return r.createElement("g",{className:"recharts-cartesian-axis-ticks"},v)}},{key:"render",value:function(){var t=this,e=this.props,n=e.axisLine,i=e.width,o=e.height,a=e.ticksGenerator,s=e.className;if(e.hide)return null;var l=this.props,c=l.ticks,u=ZY(l,VY),h=c;return VR()(a)&&(h=c&&c.length>0?a(this.props):a(u)),i<=0||o<=0||!h||!h.length?null:r.createElement(DD,{className:cR("recharts-cartesian-axis",s),ref:function(e){t.layerReference=e}},n&&this.renderAxisLine(),this.renderTicks(h,this.state.fontSize,this.state.letterSpacing),wq.renderCallByParent(this.props))}}],o=[{key:"renderTickItem",value:function(t,e,n){return r.isValidElement(t)?r.cloneElement(t,e):VR()(t)?t(e):r.createElement(aW,GY({},e,{className:"recharts-cartesian-axis-tick-value"}),n)}}],i&&XY(n.prototype,i),o&&XY(n,o),Object.defineProperty(n,"prototype",{writable:!1}),e}(r.Component);function nK(){return nK=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},nK.apply(this,arguments)}QY(eK,"displayName","CartesianAxis"),QY(eK,"defaultProps",{x:0,y:0,width:0,height:0,viewBox:{x:0,y:0,width:0,height:0},orientation:"bottom",ticks:[],stroke:"#666",tickLine:!0,axisLine:!0,tick:!0,mirror:!1,minTickGap:5,tickSize:6,tickMargin:2,interval:"preserveEnd"});var rK=function(t){var e=t.xAxisId,n=IZ(),i=OZ(),o=PZ(e);return null==o?null:r.createElement(eK,nK({},o,{className:cR("recharts-".concat(o.axisType," ").concat(o.axisType),o.className),viewBox:{x:0,y:0,width:n,height:i},ticksGenerator:function(t){return vG(t,!0)}}))};function iK(){return iK=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},iK.apply(this,arguments)}rK.displayName="XAxis",rK.defaultProps={allowDecimals:!0,hide:!1,orientation:"bottom",width:0,height:30,mirror:!1,xAxisId:0,tickCount:5,type:"category",padding:{left:0,right:0},allowDataOverflow:!1,scale:"auto",reversed:!1,allowDuplicatedCategory:!0};var oK=function(t){var e=t.yAxisId,n=IZ(),i=OZ(),o=kZ(e);return null==o?null:r.createElement(eK,iK({},o,{className:cR("recharts-".concat(o.axisType," ").concat(o.axisType),o.className),viewBox:{x:0,y:0,width:n,height:i},ticksGenerator:function(t){return vG(t,!0)}}))};oK.displayName="YAxis",oK.defaultProps={allowDuplicatedCategory:!0,allowDecimals:!0,hide:!1,orientation:"left",width:60,height:0,mirror:!1,yAxisId:0,tickCount:5,type:"number",padding:{top:0,bottom:0},allowDataOverflow:!1,scale:"auto",reversed:!1};var aK=OY({chartName:"BarChart",GraphicalChild:QH,defaultTooltipEventType:"axis",validateTooltipEventTypes:["axis","item"],axisComponents:[{axisType:"xAxis",AxisComp:rK},{axisType:"yAxis",AxisComp:oK}],formatAxisMap:aZ}),sK=n(3536),lK=n.n(sK);const cK={"San Pedro Garza Garc\xeda":"San Pedro","San Nicol\xe1s de los Garza":"San Nicolas","Ci\xe9nega de Flores":"Cienega","General Escobedo":"Escobedo","General Zuazua":"Zuazua","Salinas Victoria":"Salinas","Cadereyta Jim\xe9nez":"Cadereyta",Monterrey:"Monterrey","Ju\xe1rez":"Juarez",Apodaca:"Apodaca","Garc\xeda":"Garcia","Santa Catarina":"Santa Catarina",Guadalupe:"Guadalupe","Pesquer\xeda":"Pesqueria",Santiago:"Santiago","El Carmen":"El Carmen",Hidalgo:"Hidalgo"},uK={population_change:"Cambio de poblaci\xf3n",creditos:"Cr\xe9ditos acumulados",per_ocu:"N\xfamero de empleos",TiempoTraslado:"Tiempo de traslado",ratio_pob05:"Poblaci\xf3n de 0 a 5 a\xf1os",income_pc:"Ingreso per c\xe1pita",num_crimen:"N\xfamero de delitos",violencia_familiar:"Casos de violencia familiar",robo_transeunte:"Casos de robo a transe\xfante",robo_negocio:"Casos de robo a negocio",robo_casa:"Casos de robo a casa",muy_caliente:"Clima muy caliente",caliente:"Clima caliente",ligeramente_calido:"Clima ligeramente c\xe1lido",templado:"Clima templado",frio:"Clima fr\xedo",muy_frio:"Clima muy fr\xedo",acelerada:"Crecimiento acelerado",inercial:"Crecimiento inercial",controlada:"Crecimiento controlado"},hK=(0,r.memo)((t=>{const[e]=ki("(max-width: 800px)"),{x:n,y:r,width:i,height:o,index:a,data:s,columnKey:l}=t,c=s[a],u=cK[c[l]]||c[l],h=document.createElement("canvas").getContext("2d");h.font="min(0.6dvw, 1.2dvh)";const d=i>2*h.measureText(u).width,f=n+i-5,p=n+i+5;return(0,Si.jsx)("text",{x:i<=0?n+5:d?f:p,y:r+o/2,fill:d&&!t.inverse?"white":"#363636",textAnchor:d?"end":"start",dominantBaseline:"middle",style:{fontSize:e?"0.6rem":"min(0.6dvw, 1.2dvh)",cursor:"pointer",zIndex:1,pointerEvents:"none"},children:u},"label-".concat(a))})),dK=t=>{if(!t.active||!t.payload||0===t.payload.length)return null;for(let e=0;e<t.payload.length;e++)t.payload[e].name=uK[t.payload[e].name]||t.payload[e].name;return(0,Si.jsx)(RR,{...t})},fK=t=>{let{data:e,title:n,column:i,columnKey:o,formatter:a,reducer:s,filtering:l,domain:c}=t;const[u]=ki("(max-width: 800px)"),{setOutline:h,color:d}=olt(),[f]=Fi("colors",["".concat(d,".400")]),[p]=Fi("colors",["".concat(d,".600")]),{data:m}=wat("".concat(Fot,"/div-municipal.geojson"),{features:[]});let g=(0,r.useMemo)((()=>lK()(e||[]).filter((t=>cK[t[o]])).filter((t=>!l||l(t))).groupBy(o).map(((t,e)=>({[o]:e,[i]:(s||lK().sumBy)(t,i)}))).value().sort(((t,e)=>e[i]-t[i]))),[e,o,i,s,l]);const[y,v]=(0,r.useState)(null),_=(0,r.useCallback)((t=>{h({type:zz,props:{id:"municipality-highlight-layer",data:m.features.filter((e=>e.properties.NOMGEO===t)),getFillColor:[255,174,0,80],getLineColor:[255,174,0,0],getLineWidth:120}}),v(t)}),[e]);return(0,Si.jsx)("div",{style:u?{height:"200px",width:"100%"}:{height:"min(50dvw, 25dvh)",bottom:"0px",position:"absolute",width:"100%"},children:(0,Si.jsx)(ED,{width:"100%",height:"100%",children:(0,Si.jsxs)(aK,{layout:"vertical",data:g,barCategoryGap:0,stroke:"none",children:[(0,Si.jsx)(yB,{content:(0,Si.jsx)(dK,{}),formatter:a,labelStyle:{fontSize:u?"10px":"0.9dvw",fontWeight:"bold",color:"#363636"},itemStyle:{fontSize:u?"10px":"0.9dvw",padding:"0px"},contentStyle:{borderColor:f,borderRadius:"6px",padding:"5px 10px"}}),(0,Si.jsx)(rK,{tickFormatter:a,type:"number",dataKey:i,style:{fontSize:u?"0.6rem":"min(1dvw, 1.2dvh)"},domain:c,tickCount:8,children:(0,Si.jsx)(wq,{value:n,position:"insideBottom",style:{fontWeight:"bold",fontSize:u?"8px":"min(0.8dvw, 1.4dvh)",transform:"translateY(min(0.4dvw, 0.7dvh))"}})}),(0,Si.jsx)(oK,{type:"category",dataKey:o,hide:!0}),(0,Si.jsxs)(QH,{isAnimationActive:!1,background:{fill:"white",strokeWidth:1,stroke:"white"},dataKey:i,style:{cursor:"pointer",pointerEvents:"none"},children:[(0,Si.jsx)(Wq,{content:(0,Si.jsx)(hK,{columnKey:o,data:g})}),g.map(((t,e)=>(0,Si.jsx)(Pq,{onMouseEnter:()=>_(t[o]),onMouseLeave:()=>{h(null),v(null)},fill:y===t[o]?p:f,style:{cursor:"pointer",transition:"fill 0.05s ease"}},"cell-".concat(t[o]))))]})]})})})};var pK=t=>t?"":void 0,mK=t=>!!t||void 0,gK=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return e.filter(Boolean).join(" ")};function yK(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return function(t){e.some((e=>(null==e||e(t),null==t?void 0:t.defaultPrevented)))}}function vK(t){const{orientation:e,vertical:n,horizontal:r}=t;return"vertical"===e?n:r}var _K={width:0,height:0},bK=t=>t||_K;function xK(t){const e=function(t){var e;return null!=(e=t.view)?e:window}(t);return"undefined"!==typeof e.PointerEvent&&t instanceof e.PointerEvent?!("mouse"!==t.pointerType):t instanceof e.MouseEvent}function wK(t){return!!t.touches}function SK(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"page";return wK(t)?function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"page";const n=t.touches[0]||t.changedTouches[0];return{x:n["".concat(e,"X")],y:n["".concat(e,"Y")]}}(t,e):function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"page";return{x:t["".concat(e,"X")],y:t["".concat(e,"Y")]}}(t,e)}function EK(t){function e(e){t(e,{point:SK(e)})}const n=arguments.length>1&&void 0!==arguments[1]&&arguments[1]?function(t){return e=>{const n=xK(e);(!n||n&&0===e.button)&&t(e)}}(e):e;return n}function TK(t,e,n,r){return function(t,e,n,r){return t.addEventListener(e,n,r),()=>{t.removeEventListener(e,n,r)}}(t,e,EK(n,"pointerdown"===e),r)}const MK=1/60*1e3,AK="undefined"!==typeof performance?()=>performance.now():()=>Date.now(),CK="undefined"!==typeof window?t=>window.requestAnimationFrame(t):t=>setTimeout((()=>t(AK())),MK);let PK=!0,kK=!1,IK=!1;const OK={delta:0,timestamp:0},LK=["read","update","preRender","render","postRender"],jK=LK.reduce(((t,e)=>(t[e]=function(t){let e=[],n=[],r=0,i=!1,o=!1;const a=new WeakSet,s={schedule:function(t){const o=arguments.length>2&&void 0!==arguments[2]&&arguments[2]&&i,s=o?e:n;return arguments.length>1&&void 0!==arguments[1]&&arguments[1]&&a.add(t),-1===s.indexOf(t)&&(s.push(t),o&&i&&(r=e.length)),t},cancel:t=>{const e=n.indexOf(t);-1!==e&&n.splice(e,1),a.delete(t)},process:l=>{if(i)o=!0;else{if(i=!0,[e,n]=[n,e],n.length=0,r=e.length,r)for(let n=0;n<r;n++){const r=e[n];r(l),a.has(r)&&(s.schedule(r),t())}i=!1,o&&(o=!1,s.process(l))}}};return s}((()=>kK=!0)),t)),{}),zK=LK.reduce(((t,e)=>{const n=jK[e];return t[e]=function(t){let e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return kK||FK(),n.schedule(t,e,r)},t}),{}),RK=LK.reduce(((t,e)=>(t[e]=jK[e].cancel,t)),{}),DK=(LK.reduce(((t,e)=>(t[e]=()=>jK[e].process(OK),t)),{}),t=>jK[t].process(OK)),BK=t=>{kK=!1,OK.delta=PK?MK:Math.max(Math.min(t-OK.timestamp,40),1),OK.timestamp=t,IK=!0,LK.forEach(DK),IK=!1,kK&&(PK=!1,CK(BK))},FK=()=>{kK=!0,PK=!0,IK||CK(BK)},NK=()=>OK,UK=zK;var VK=Object.defineProperty,WK=(t,e,n)=>(((t,e,n)=>{e in t?VK(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n})(t,"symbol"!==typeof e?e+"":e,n),n),GK=class{constructor(t,e,n){var r;if(WK(this,"history",[]),WK(this,"startEvent",null),WK(this,"lastEvent",null),WK(this,"lastEventInfo",null),WK(this,"handlers",{}),WK(this,"removeListeners",(()=>{})),WK(this,"threshold",3),WK(this,"win"),WK(this,"updatePoint",(()=>{if(!this.lastEvent||!this.lastEventInfo)return;const t=HK(this.lastEventInfo,this.history),e=null!==this.startEvent,n=function(t,e){if("number"===typeof t&&"number"===typeof e)return YK(t,e);if(KK(t)&&KK(e)){const n=YK(t.x,e.x),r=YK(t.y,e.y);return Math.sqrt(n**2+r**2)}return 0}(t.offset,{x:0,y:0})>=this.threshold;if(!e&&!n)return;const{timestamp:r}=NK();this.history.push({...t.point,timestamp:r});const{onStart:i,onMove:o}=this.handlers;e||(null==i||i(this.lastEvent,t),this.startEvent=this.lastEvent),null==o||o(this.lastEvent,t)})),WK(this,"onPointerMove",((t,e)=>{this.lastEvent=t,this.lastEventInfo=e,UK.update(this.updatePoint,!0)})),WK(this,"onPointerUp",((t,e)=>{const n=HK(e,this.history),{onEnd:r,onSessionEnd:i}=this.handlers;null==i||i(t,n),this.end(),r&&this.startEvent&&(null==r||r(t,n))})),this.win=null!=(r=t.view)?r:window,function(t){return wK(t)&&t.touches.length>1}(t))return;this.handlers=e,n&&(this.threshold=n),t.stopPropagation(),t.preventDefault();const i={point:SK(t)},{timestamp:o}=NK();this.history=[{...i.point,timestamp:o}];const{onSessionStart:a}=e;null==a||a(t,HK(i,this.history)),this.removeListeners=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return t=>e.reduce(((t,e)=>e(t)),t)}(TK(this.win,"pointermove",this.onPointerMove),TK(this.win,"pointerup",this.onPointerUp),TK(this.win,"pointercancel",this.onPointerUp))}updateHandlers(t){this.handlers=t}end(){var t;null==(t=this.removeListeners)||t.call(this),RK.update(this.updatePoint)}};function qK(t,e){return{x:t.x-e.x,y:t.y-e.y}}function HK(t,e){return{point:t.point,delta:qK(t.point,e[e.length-1]),offset:qK(t.point,e[0]),velocity:XK(e,.1)}}var ZK=t=>1e3*t;function XK(t,e){if(t.length<2)return{x:0,y:0};let n=t.length-1,r=null;const i=t[t.length-1];for(;n>=0&&(r=t[n],!(i.timestamp-r.timestamp>ZK(e)));)n--;if(!r)return{x:0,y:0};const o=(i.timestamp-r.timestamp)/1e3;if(0===o)return{x:0,y:0};const a={x:(i.x-r.x)/o,y:(i.y-r.y)/o};return a.x===1/0&&(a.x=0),a.y===1/0&&(a.y=0),a}function YK(t,e){return Math.abs(t-e)}function KK(t){return"x"in t&&"y"in t}function $K(t){const e=(0,r.useRef)(null);return e.current=t,e}function JK(t,e){const n=(0,r.useRef)(!1),i=(0,r.useRef)(!1);(0,r.useEffect)((()=>{if(n.current&&i.current)return t();i.current=!0}),e),(0,r.useEffect)((()=>(n.current=!0,()=>{n.current=!1})),[])}function QK(t){const{value:e,defaultValue:n,onChange:i,shouldUpdate:o=((t,e)=>t!==e)}=t,a=Ga(i),s=Ga(o),[l,c]=(0,r.useState)(n),u=void 0!==e,h=u?e:l,d=Ga((t=>{const e="function"===typeof t?t(h):t;s(h,e)&&(u||c(e),a(e))}),[u,a,h,s]);return[h,d]}var t$=Boolean(null==globalThis?void 0:globalThis.document)?r.useLayoutEffect:r.useEffect;function e$(t){let{getNodes:e,observeMutation:n=!0}=t;const[i,o]=(0,r.useState)([]),[a,s]=(0,r.useState)(0);return t$((()=>{const t=e(),r=t.map(((t,e)=>function(t,e){var n;if(!t)return void e(void 0);e({width:t.offsetWidth,height:t.offsetHeight});const r=new(null!==(n=t.ownerDocument.defaultView)&&void 0!==n?n:window).ResizeObserver((n=>{if(!Array.isArray(n)||!n.length)return;const[r]=n;let i,o;if("borderBoxSize"in r){const t=r.borderBoxSize,e=Array.isArray(t)?t[0]:t;i=e.inlineSize,o=e.blockSize}else i=t.offsetWidth,o=t.offsetHeight;e({width:i,height:o})}));return r.observe(t,{box:"border-box"}),()=>r.unobserve(t)}(t,(t=>{o((n=>[...n.slice(0,e),t,...n.slice(e+1)]))}))));if(n){const e=t[0];r.push(function(t,e){var n,r;if(!t||!t.parentElement)return;const i=new(null!=(r=null==(n=t.ownerDocument)?void 0:n.defaultView)?r:window).MutationObserver((()=>{e()}));return i.observe(t.parentElement,{childList:!0}),()=>{i.disconnect()}}(e,(()=>{s((t=>t+1))})))}return()=>{r.forEach((t=>{null==t||t()}))}}),[a]),i}function n$(t,e){let n=function(t){const e=parseFloat(t);return"number"!==typeof e||Number.isNaN(e)?0:e}(t);const r=10**(null!=e?e:10);return n=Math.round(n*r)/r,e?n.toFixed(e):n.toString()}function r$(t,e,n){return 100*(t-e)/(n-e)}function i$(t,e,n){const r=Math.round((t-e)/n)*n+e,i=function(t){if(!Number.isFinite(t))return 0;let e=1,n=0;for(;Math.round(t*e)/e!==t;)e*=10,n+=1;return n}(n);return n$(r,i)}function o$(t,e,n){return null==t?t:(n<e&&console.warn("clamp: max cannot be less than min"),Math.min(Math.max(t,e),n))}function a$(t){var e;const{min:n=0,max:i=100,onChange:o,value:a,defaultValue:s,isReversed:l,direction:c="ltr",orientation:u="horizontal",id:h,isDisabled:d,isReadOnly:f,onChangeStart:p,onChangeEnd:m,step:g=1,getAriaValueText:y,"aria-valuetext":v,"aria-label":_,"aria-labelledby":b,name:x,focusThumbOnChange:w=!0,...S}=t,E=Ga(p),T=Ga(m),M=Ga(y),A=function(t){const{isReversed:e,direction:n,orientation:r}=t;return"ltr"===n||"vertical"===r?e:!e}({isReversed:l,direction:c,orientation:u}),[C,P]=QK({value:a,defaultValue:null!=s?s:l$(n,i),onChange:o}),[k,I]=(0,r.useState)(!1),[O,L]=(0,r.useState)(!1),j=!(d||f),z=(i-n)/10,R=g||(i-n)/100,D=o$(C,n,i),B=r$(A?i-D+n:D,n,i),F="vertical"===u,N=$K({min:n,max:i,step:g,isDisabled:d,value:D,isInteractive:j,isReversed:A,isVertical:F,eventSource:null,focusThumbOnChange:w,orientation:u}),U=(0,r.useRef)(null),V=(0,r.useRef)(null),W=(0,r.useRef)(null),G=(0,r.useId)(),q=null!=h?h:G,[H,Z]=["slider-thumb-".concat(q),"slider-track-".concat(q)],X=(0,r.useCallback)((t=>{var e,n;if(!U.current)return;const r=N.current;r.eventSource="pointer";const i=U.current.getBoundingClientRect(),{clientX:o,clientY:a}=null!=(n=null==(e=t.touches)?void 0:e[0])?n:t;let s=(F?i.bottom-a:o-i.left)/(F?i.height:i.width);A&&(s=1-s);let l=function(t,e,n){return(n-e)*t+e}(s,r.min,r.max);return r.step&&(l=parseFloat(i$(l,r.min,r.step))),l=o$(l,r.min,r.max),l}),[F,A,N]),Y=(0,r.useCallback)((t=>{const e=N.current;e.isInteractive&&(t=o$(t=parseFloat(i$(t,e.min,R)),e.min,e.max),P(t))}),[R,P,N]),K=(0,r.useMemo)((()=>({stepUp(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:R;Y(A?D-t:D+t)},stepDown(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:R;Y(A?D+t:D-t)},reset(){Y(s||0)},stepTo(t){Y(t)}})),[Y,A,D,R,s]),$=(0,r.useCallback)((t=>{const e=N.current,n={ArrowRight:()=>K.stepUp(),ArrowUp:()=>K.stepUp(),ArrowLeft:()=>K.stepDown(),ArrowDown:()=>K.stepDown(),PageUp:()=>K.stepUp(z),PageDown:()=>K.stepDown(z),Home:()=>Y(e.min),End:()=>Y(e.max)}[t.key];n&&(t.preventDefault(),t.stopPropagation(),n(t),e.eventSource="keyboard")}),[K,Y,z,N]),J=null!=(e=null==M?void 0:M(D))?e:v,Q=function(t){const[e]=e$({observeMutation:!1,getNodes(){var e;return["object"===typeof(e=t)&&null!==e&&"current"in e?t.current:t]}});return e}(V),{getThumbStyle:tt,rootStyle:et,trackStyle:nt,innerTrackStyle:rt}=(0,r.useMemo)((()=>{const t=N.current,e=null!=Q?Q:{width:0,height:0};return function(t){const{orientation:e,thumbPercents:n,thumbRects:r,isReversed:i}=t,o="vertical"===e?r.reduce(((t,e)=>bK(t).height>bK(e).height?t:e),_K):r.reduce(((t,e)=>bK(t).width>bK(e).width?t:e),_K),a={position:"relative",touchAction:"none",WebkitTapHighlightColor:"rgba(0,0,0,0)",userSelect:"none",outline:0,...vK({orientation:e,vertical:o?{paddingLeft:o.width/2,paddingRight:o.width/2}:{},horizontal:o?{paddingTop:o.height/2,paddingBottom:o.height/2}:{}})},s={position:"absolute",...vK({orientation:e,vertical:{left:"50%",transform:"translateX(-50%)",height:"100%"},horizontal:{top:"50%",transform:"translateY(-50%)",width:"100%"}})},l=1===n.length,c=[0,i?100-n[0]:n[0]],u=l?c:n;let h=u[0];!l&&i&&(h=100-h);const d=Math.abs(u[u.length-1]-u[0]);return{trackStyle:s,innerTrackStyle:{...s,...vK({orientation:e,vertical:i?{height:"".concat(d,"%"),top:"".concat(h,"%")}:{height:"".concat(d,"%"),bottom:"".concat(h,"%")},horizontal:i?{width:"".concat(d,"%"),right:"".concat(h,"%")}:{width:"".concat(d,"%"),left:"".concat(h,"%")}})},rootStyle:a,getThumbStyle:t=>{var i;const o=null!=(i=r[t])?i:_K;return{position:"absolute",userSelect:"none",WebkitUserSelect:"none",MozUserSelect:"none",msUserSelect:"none",touchAction:"none",...vK({orientation:e,vertical:{bottom:"calc(".concat(n[t],"% - ").concat(o.height/2,"px)")},horizontal:{left:"calc(".concat(n[t],"% - ").concat(o.width/2,"px)")}})}}}}({isReversed:A,orientation:t.orientation,thumbRects:[e],thumbPercents:[B]})}),[A,Q,B,N]),it=(0,r.useCallback)((()=>{N.current.focusThumbOnChange&&setTimeout((()=>{var t;return null==(t=V.current)?void 0:t.focus()}))}),[N]);function ot(t){const e=X(t);null!=e&&e!==N.current.value&&P(e)}JK((()=>{const t=N.current;it(),"keyboard"===t.eventSource&&(null==T||T(t.value))}),[D,T]),function(t,e){const{onPan:n,onPanStart:i,onPanEnd:o,onPanSessionStart:a,onPanSessionEnd:s,threshold:l}=e,c=Boolean(n||i||o||a||s),u=(0,r.useRef)(null),h=$K({onSessionStart:a,onSessionEnd:s,onStart:i,onMove:n,onEnd(t,e){u.current=null,null==o||o(t,e)}});(0,r.useEffect)((()=>{var t;null==(t=u.current)||t.updateHandlers(h.current)})),(0,r.useEffect)((()=>{const e=t.current;if(e&&c)return TK(e,"pointerdown",(function(t){u.current=new GK(t,h.current,l)}))}),[t,c,h,l]),(0,r.useEffect)((()=>()=>{var t;null==(t=u.current)||t.end(),u.current=null}),[])}(W,{onPanSessionStart(t){const e=N.current;e.isInteractive&&(I(!0),it(),ot(t),null==E||E(e.value))},onPanSessionEnd(){const t=N.current;t.isInteractive&&(I(!1),null==T||T(t.value))},onPan(t){N.current.isInteractive&&ot(t)}});const at=(0,r.useCallback)((function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return{...t,...S,ref:Xi(e,W),tabIndex:-1,"aria-disabled":mK(d),"data-focused":pK(O),style:{...t.style,...et}}}),[S,d,O,et]),st=(0,r.useCallback)((function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return{...t,ref:Xi(e,U),id:Z,"data-disabled":pK(d),style:{...t.style,...nt}}}),[d,Z,nt]),lt=(0,r.useCallback)((function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return{...t,ref:e,style:{...t.style,...rt}}}),[rt]),ct=(0,r.useCallback)((function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return{...t,ref:Xi(e,V),role:"slider",tabIndex:j?0:void 0,id:H,"data-active":pK(k),"aria-valuetext":J,"aria-valuemin":n,"aria-valuemax":i,"aria-valuenow":D,"aria-orientation":u,"aria-disabled":mK(d),"aria-readonly":mK(f),"aria-label":_,"aria-labelledby":_?void 0:b,style:{...t.style,...tt(0)},onKeyDown:yK(t.onKeyDown,$),onFocus:yK(t.onFocus,(()=>L(!0))),onBlur:yK(t.onBlur,(()=>L(!1)))}}),[j,H,k,J,n,i,D,u,d,f,_,b,tt,$]),ut=(0,r.useCallback)((function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;const r=!(t.value<n||t.value>i),o=D>=t.value,a=r$(t.value,n,i),s={position:"absolute",pointerEvents:"none",...s$({orientation:u,vertical:{bottom:"".concat(A?100-a:a,"%")},horizontal:{left:"".concat(A?100-a:a,"%")}})};return{...t,ref:e,role:"presentation","aria-hidden":!0,"data-disabled":pK(d),"data-invalid":pK(!r),"data-highlighted":pK(o),style:{...t.style,...s}}}),[d,A,i,n,u,D]),ht=(0,r.useCallback)((function(){return{...arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},ref:arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,type:"hidden",value:D,name:x}}),[x,D]);return{state:{value:D,isFocused:O,isDragging:k},actions:K,getRootProps:at,getTrackProps:st,getInnerTrackProps:lt,getThumbProps:ct,getMarkerProps:ut,getInputProps:ht}}function s$(t){const{orientation:e,vertical:n,horizontal:r}=t;return"vertical"===e?n:r}function l$(t,e){return e<t?t:t+(e-t)/2}var[c$,u$]=Ii({name:"SliderContext",hookName:"useSliderContext",providerName:"<Slider />"}),[h$,d$]=Ii({name:"SliderStylesContext",hookName:"useSliderStyles",providerName:"<Slider />"}),f$=wi(((t,e)=>{var n;const r={...t,orientation:null!=(n=null==t?void 0:t.orientation)?n:"horizontal"},i=Gi("Slider",r),o=Mn(r),{direction:a}=Bi();o.direction=a;const{getInputProps:s,getRootProps:l,...c}=a$(o),u=l(),h=s({},e);return(0,Si.jsx)(c$,{value:c,children:(0,Si.jsx)(h$,{value:i,children:(0,Si.jsxs)(xi.div,{...u,className:gK("chakra-slider",r.className),__css:i.container,children:[r.children,(0,Si.jsx)("input",{...h})]})})})}));f$.displayName="Slider";var p$=wi(((t,e)=>{const{getThumbProps:n}=u$(),r=d$(),i=n(t,e);return(0,Si.jsx)(xi.div,{...i,className:gK("chakra-slider__thumb",t.className),__css:r.thumb})}));p$.displayName="SliderThumb";var m$=wi(((t,e)=>{const{getTrackProps:n}=u$(),r=d$(),i=n(t,e);return(0,Si.jsx)(xi.div,{...i,className:gK("chakra-slider__track",t.className),__css:r.track})}));m$.displayName="SliderTrack";var g$=wi(((t,e)=>{const{getInnerTrackProps:n}=u$(),r=d$(),i=n(t,e);return(0,Si.jsx)(xi.div,{...i,className:gK("chakra-slider__filled-track",t.className),__css:r.filledTrack})}));g$.displayName="SliderFilledTrack";var y$=wi(((t,e)=>{const{getMarkerProps:n}=u$(),r=d$(),i=n(t,e);return(0,Si.jsx)(xi.div,{...i,className:gK("chakra-slider__marker",t.className),__css:r.mark})}));function v$(t){let{time:e,min:n,max:r,step:i,defaultValue:o,togglePlay:a,isPlaying:s,handleSliderChange:l,marks:c}=t;const{color:u}=olt(),[h]=ki("(max-width: 800px)");return(0,Si.jsx)("div",{style:{position:"relative",bottom:h?"60px":"min(6dvh, 4dvw)",left:0,width:"100%",padding:"0 20px"},children:(0,Si.jsxs)(Ei,{bgColor:"".concat(u,".100"),borderWidth:1,borderColor:"".concat(u,".200"),style:{display:"flex",width:"100%"},borderRadius:h?"25px":"min(3dvh, 2dvw)",children:[(0,Si.jsx)(kp,{minW:h?"25px":"min(3dvh, 2dvw)",minH:h?"25px":"min(3dvh, 2dvw)",maxW:h?"25px":"min(3dvh, 2dvw)",maxH:h?"25px":"min(3dvh, 2dvw)",fontSize:h?"12px":"min(1.8dvh, 0.9dvw)",colorScheme:u,textColor:"white",isRound:!0,onClick:a,icon:s?(0,Si.jsx)(Wz,{}):(0,Si.jsx)(Gz,{})}),(0,Si.jsxs)(f$,{"aria-label":"slider-ex-1",id:"slider",defaultValue:o||n,min:n,step:i,max:r,value:e,onChange:t=>l(t),mr:"4",ml:"3",children:[c.map(((t,e)=>{let{value:n,label:r}=t;return(0,Si.jsx)(y$,{value:n,mt:h?"5":"min(2.5dvh, 1.7dvw)",style:{textWrap:"nowrap",fontSize:h?"8px":"min(1.8dvh, 0.9dvw)",transform:0==e?"translateX(0%)":e==c.length-1?"translateX(-90%)":"translateX(-50%)",color:"#464646"},children:r},n)})),(0,Si.jsx)(m$,{bg:"".concat(u,".200"),children:(0,Si.jsx)(g$,{bg:"".concat(u,".500")})}),(0,Si.jsx)(p$,{boxSize:3,bgColor:"".concat(u,".600")})]})]})})}function _$(t,e,n){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,o=arguments.length>4?arguments[4]:void 0,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:void 0,s=arguments.length>6&&void 0!==arguments[6]&&arguments[6];const[l,c]=(0,r.useState)(a||t),[u,h]=(0,r.useState)(s),d=(0,r.useRef)(performance.now());(0,r.useEffect)((()=>{let r;const a=o=>{const s=o-d.current,l=n*s/i;c((n=>{const r=n+l;return r>e?t:r<t?e:r})),d.current=o,r=requestAnimationFrame(a)},s=()=>{c((r=>{const i=r+n;return i>e?t:i})),r=setTimeout((()=>{requestAnimationFrame(s)}),i)};return u?o?r=requestAnimationFrame(a):s():(cancelAnimationFrame(r),clearTimeout(r)),()=>{cancelAnimationFrame(r),clearTimeout(r)}}),[u,t,e,n,i,o]);return{time:l,isPlaying:u,handleSliderChange:t=>{c(t)},togglePlay:()=>{h(!u)}}}y$.displayName="SliderMark";var b$=wi(((t,e)=>{var n;const{overflow:r,overflowX:i,className:o,...a}=t;return(0,Si.jsx)(xi.div,{ref:e,className:kt("chakra-table__container",o),...a,__css:{display:"block",whiteSpace:"nowrap",WebkitOverflowScrolling:"touch",overflowX:null!=(n=null!=r?r:i)?n:"auto",overflowY:"hidden",maxWidth:"100%"}})})),[x$,w$]=Ii({name:"TableStylesContext",errorMessage:"useTableStyles returned is 'undefined'. Seems you forgot to wrap the components in \"<Table />\" "}),S$=wi(((t,e)=>{const n=Gi("Table",t),{className:r,layout:i,...o}=Mn(t);return(0,Si.jsx)(x$,{value:n,children:(0,Si.jsx)(xi.table,{ref:e,__css:{tableLayout:i,...n.table},className:kt("chakra-table",r),...o})})}));S$.displayName="Table";var E$=wi(((t,e)=>{const n=w$();return(0,Si.jsx)(xi.tbody,{...t,ref:e,__css:n.tbody})})),T$=wi(((t,e)=>{const n=w$();return(0,Si.jsx)(xi.tr,{...t,ref:e,__css:n.tr})})),M$=wi(((t,e)=>{let{isNumeric:n,...r}=t;const i=w$();return(0,Si.jsx)(xi.td,{...r,ref:e,__css:i.td,"data-is-numeric":n})}));function A$(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{strict:e=!0,errorMessage:n="useContext: `context` is undefined. Seems you forgot to wrap component within the Provider",name:i}=t,o=(0,r.createContext)(void 0);return o.displayName=i,[o.Provider,function t(){var i;const a=(0,r.useContext)(o);if(!a&&e){const e=new Error(n);throw e.name="ContextError",null==(i=Error.captureStackTrace)||i.call(Error,e,t),e}return a},o]}function C$(t){const{cssVarsRoot:e,theme:n,children:i}=t,o=(0,r.useMemo)((()=>dn(n)),[n]);return(0,Si.jsxs)(li,{theme:o,children:[(0,Si.jsx)(P$,{root:e}),i]})}function P$(t){let{root:e=":host, :root"}=t;const n=[e,"[data-theme]"].join(",");return(0,Si.jsx)(zi,{styles:t=>({[n]:t.__cssVars})})}var[k$,I$]=A$({name:"StylesContext",errorMessage:"useStyles: `styles` is undefined. Seems you forgot to wrap the components in `<StylesProvider />` "});function O$(){const{colorMode:t}=In();return(0,Si.jsx)(zi,{styles:e=>{const n=zn(On(e,"styles.global"),{theme:e,colorMode:t});if(!n)return;return wn(n)(e)}})}var L$,[j$,z$]=A$({name:"".concat(L$="Card","StylesContext"),errorMessage:'useStyles: "styles" is undefined. Seems you forgot to wrap the components in "<'.concat(L$,' />" ')}),R$=wi((function(t,e){const{className:n,children:r,direction:i="column",justify:o,align:a,...s}=Mn(t),l=Gi("Card",t);return(0,Si.jsx)(xi.div,{ref:e,className:kt("chakra-card",n),__css:{display:"flex",flexDirection:i,justifyContent:o,alignItems:a,position:"relative",minWidth:0,wordWrap:"break-word",...l.container},...s,children:(0,Si.jsx)(j$,{value:l,children:r})})})),D$="http://www.w3.org/1999/xhtml";const B$={svg:"http://www.w3.org/2000/svg",xhtml:D$,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function F$(t){var e=t+="",n=e.indexOf(":");return n>=0&&"xmlns"!==(e=t.slice(0,n))&&(t=t.slice(n+1)),B$.hasOwnProperty(e)?{space:B$[e],local:t}:t}function N$(t){return function(){var e=this.ownerDocument,n=this.namespaceURI;return n===D$&&e.documentElement.namespaceURI===D$?e.createElement(t):e.createElementNS(n,t)}}function U$(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}function V$(t){var e=F$(t);return(e.local?U$:N$)(e)}var W$=0;function G$(){this._="@"+(++W$).toString(36)}G$.prototype=function(){return new G$}.prototype={constructor:G$,get:function(t){for(var e=this._;!(e in t);)if(!(t=t.parentNode))return;return t[e]},set:function(t,e){return t[this._]=e},remove:function(t){return this._ in t&&delete t[this._]},toString:function(){return this._}};var q$=function(t){return function(){return this.matches(t)}};if("undefined"!==typeof document){var H$=document.documentElement;if(!H$.matches){var Z$=H$.webkitMatchesSelector||H$.msMatchesSelector||H$.mozMatchesSelector||H$.oMatchesSelector;q$=function(t){return function(){return Z$.call(this,t)}}}}const X$=q$;var Y$={},K$=null;"undefined"!==typeof document&&("onmouseenter"in document.documentElement||(Y$={mouseenter:"mouseover",mouseleave:"mouseout"}));function $$(t,e,n){return t=J$(t,e,n),function(e){var n=e.relatedTarget;n&&(n===this||8&n.compareDocumentPosition(this))||t.call(this,e)}}function J$(t,e,n){return function(r){var i=K$;K$=r;try{t.call(this,this.__data__,e,n)}finally{K$=i}}}function Q$(t){return function(){var e=this.__on;if(e){for(var n,r=0,i=-1,o=e.length;r<o;++r)n=e[r],t.type&&n.type!==t.type||n.name!==t.name?e[++i]=n:this.removeEventListener(n.type,n.listener,n.capture);++i?e.length=i:delete this.__on}}}function tJ(t,e,n){var r=Y$.hasOwnProperty(t.type)?$$:J$;return function(i,o,a){var s,l=this.__on,c=r(e,o,a);if(l)for(var u=0,h=l.length;u<h;++u)if((s=l[u]).type===t.type&&s.name===t.name)return this.removeEventListener(s.type,s.listener,s.capture),this.addEventListener(s.type,s.listener=c,s.capture=n),void(s.value=e);this.addEventListener(t.type,c,n),s={type:t.type,name:t.name,value:e,listener:c,capture:n},l?l.push(s):this.__on=[s]}}function eJ(){}function nJ(t){return null==t?eJ:function(){return this.querySelector(t)}}function rJ(){return[]}function iJ(t){return new Array(t.length)}function oJ(t,e){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=e}oJ.prototype={constructor:oJ,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,e){return this._parent.insertBefore(t,e)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}};var aJ="$";function sJ(t,e,n,r,i,o){for(var a,s=0,l=e.length,c=o.length;s<c;++s)(a=e[s])?(a.__data__=o[s],r[s]=a):n[s]=new oJ(t,o[s]);for(;s<l;++s)(a=e[s])&&(i[s]=a)}function lJ(t,e,n,r,i,o,a){var s,l,c,u={},h=e.length,d=o.length,f=new Array(h);for(s=0;s<h;++s)(l=e[s])&&(f[s]=c=aJ+a.call(l,l.__data__,s,e),c in u?i[s]=l:u[c]=l);for(s=0;s<d;++s)(l=u[c=aJ+a.call(t,o[s],s,o)])?(r[s]=l,l.__data__=o[s],u[c]=null):n[s]=new oJ(t,o[s]);for(s=0;s<h;++s)(l=e[s])&&u[f[s]]===l&&(i[s]=l)}function cJ(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}function uJ(t){return function(){this.removeAttribute(t)}}function hJ(t){return function(){this.removeAttributeNS(t.space,t.local)}}function dJ(t,e){return function(){this.setAttribute(t,e)}}function fJ(t,e){return function(){this.setAttributeNS(t.space,t.local,e)}}function pJ(t,e){return function(){var n=e.apply(this,arguments);null==n?this.removeAttribute(t):this.setAttribute(t,n)}}function mJ(t,e){return function(){var n=e.apply(this,arguments);null==n?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,n)}}function gJ(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView}function yJ(t){return function(){this.style.removeProperty(t)}}function vJ(t,e,n){return function(){this.style.setProperty(t,e,n)}}function _J(t,e,n){return function(){var r=e.apply(this,arguments);null==r?this.style.removeProperty(t):this.style.setProperty(t,r,n)}}function bJ(t){return function(){delete this[t]}}function xJ(t,e){return function(){this[t]=e}}function wJ(t,e){return function(){var n=e.apply(this,arguments);null==n?delete this[t]:this[t]=n}}function SJ(t){return t.trim().split(/^|\s+/)}function EJ(t){return t.classList||new TJ(t)}function TJ(t){this._node=t,this._names=SJ(t.getAttribute("class")||"")}function MJ(t,e){for(var n=EJ(t),r=-1,i=e.length;++r<i;)n.add(e[r])}function AJ(t,e){for(var n=EJ(t),r=-1,i=e.length;++r<i;)n.remove(e[r])}function CJ(t){return function(){MJ(this,t)}}function PJ(t){return function(){AJ(this,t)}}function kJ(t,e){return function(){(e.apply(this,arguments)?MJ:AJ)(this,t)}}function IJ(){this.textContent=""}function OJ(t){return function(){this.textContent=t}}function LJ(t){return function(){var e=t.apply(this,arguments);this.textContent=null==e?"":e}}function jJ(){this.innerHTML=""}function zJ(t){return function(){this.innerHTML=t}}function RJ(t){return function(){var e=t.apply(this,arguments);this.innerHTML=null==e?"":e}}function DJ(){this.nextSibling&&this.parentNode.appendChild(this)}function BJ(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function FJ(){return null}function NJ(){var t=this.parentNode;t&&t.removeChild(this)}function UJ(t,e,n){var r=gJ(t),i=r.CustomEvent;i?i=new i(e,n):(i=r.document.createEvent("Event"),n?(i.initEvent(e,n.bubbles,n.cancelable),i.detail=n.detail):i.initEvent(e,!1,!1)),t.dispatchEvent(i)}function VJ(t,e){return function(){return UJ(this,t,e)}}function WJ(t,e){return function(){return UJ(this,t,e.apply(this,arguments))}}TJ.prototype={add:function(t){this._names.indexOf(t)<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){var e=this._names.indexOf(t);e>=0&&(this._names.splice(e,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return this._names.indexOf(t)>=0}};var GJ=[null];function qJ(t,e){this._groups=t,this._parents=e}function HJ(){return new qJ([[document.documentElement]],GJ)}qJ.prototype=HJ.prototype={constructor:qJ,select:function(t){"function"!==typeof t&&(t=nJ(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var o,a,s=e[i],l=s.length,c=r[i]=new Array(l),u=0;u<l;++u)(o=s[u])&&(a=t.call(o,o.__data__,u,s))&&("__data__"in o&&(a.__data__=o.__data__),c[u]=a);return new qJ(r,this._parents)},selectAll:function(t){"function"!==typeof t&&(t=function(t){return null==t?rJ:function(){return this.querySelectorAll(t)}}(t));for(var e=this._groups,n=e.length,r=[],i=[],o=0;o<n;++o)for(var a,s=e[o],l=s.length,c=0;c<l;++c)(a=s[c])&&(r.push(t.call(a,a.__data__,c,s)),i.push(a));return new qJ(r,i)},filter:function(t){"function"!==typeof t&&(t=X$(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var o,a=e[i],s=a.length,l=r[i]=[],c=0;c<s;++c)(o=a[c])&&t.call(o,o.__data__,c,a)&&l.push(o);return new qJ(r,this._parents)},data:function(t,e){if(!t)return p=new Array(this.size()),u=-1,this.each((function(t){p[++u]=t})),p;var n,r=e?lJ:sJ,i=this._parents,o=this._groups;"function"!==typeof t&&(n=t,t=function(){return n});for(var a=o.length,s=new Array(a),l=new Array(a),c=new Array(a),u=0;u<a;++u){var h=i[u],d=o[u],f=d.length,p=t.call(h,h&&h.__data__,u,i),m=p.length,g=l[u]=new Array(m),y=s[u]=new Array(m);r(h,d,g,y,c[u]=new Array(f),p,e);for(var v,_,b=0,x=0;b<m;++b)if(v=g[b]){for(b>=x&&(x=b+1);!(_=y[x])&&++x<m;);v._next=_||null}}return(s=new qJ(s,i))._enter=l,s._exit=c,s},enter:function(){return new qJ(this._enter||this._groups.map(iJ),this._parents)},exit:function(){return new qJ(this._exit||this._groups.map(iJ),this._parents)},merge:function(t){for(var e=this._groups,n=t._groups,r=e.length,i=n.length,o=Math.min(r,i),a=new Array(r),s=0;s<o;++s)for(var l,c=e[s],u=n[s],h=c.length,d=a[s]=new Array(h),f=0;f<h;++f)(l=c[f]||u[f])&&(d[f]=l);for(;s<r;++s)a[s]=e[s];return new qJ(a,this._parents)},order:function(){for(var t=this._groups,e=-1,n=t.length;++e<n;)for(var r,i=t[e],o=i.length-1,a=i[o];--o>=0;)(r=i[o])&&(a&&a!==r.nextSibling&&a.parentNode.insertBefore(r,a),a=r);return this},sort:function(t){function e(e,n){return e&&n?t(e.__data__,n.__data__):!e-!n}t||(t=cJ);for(var n=this._groups,r=n.length,i=new Array(r),o=0;o<r;++o){for(var a,s=n[o],l=s.length,c=i[o]=new Array(l),u=0;u<l;++u)(a=s[u])&&(c[u]=a);c.sort(e)}return new qJ(i,this._parents).order()},call:function(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this},nodes:function(){var t=new Array(this.size()),e=-1;return this.each((function(){t[++e]=this})),t},node:function(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var r=t[e],i=0,o=r.length;i<o;++i){var a=r[i];if(a)return a}return null},size:function(){var t=0;return this.each((function(){++t})),t},empty:function(){return!this.node()},each:function(t){for(var e=this._groups,n=0,r=e.length;n<r;++n)for(var i,o=e[n],a=0,s=o.length;a<s;++a)(i=o[a])&&t.call(i,i.__data__,a,o);return this},attr:function(t,e){var n=F$(t);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((null==e?n.local?hJ:uJ:"function"===typeof e?n.local?mJ:pJ:n.local?fJ:dJ)(n,e))},style:function(t,e,n){var r;return arguments.length>1?this.each((null==e?yJ:"function"===typeof e?_J:vJ)(t,e,null==n?"":n)):gJ(r=this.node()).getComputedStyle(r,null).getPropertyValue(t)},property:function(t,e){return arguments.length>1?this.each((null==e?bJ:"function"===typeof e?wJ:xJ)(t,e)):this.node()[t]},classed:function(t,e){var n=SJ(t+"");if(arguments.length<2){for(var r=EJ(this.node()),i=-1,o=n.length;++i<o;)if(!r.contains(n[i]))return!1;return!0}return this.each(("function"===typeof e?kJ:e?CJ:PJ)(n,e))},text:function(t){return arguments.length?this.each(null==t?IJ:("function"===typeof t?LJ:OJ)(t)):this.node().textContent},html:function(t){return arguments.length?this.each(null==t?jJ:("function"===typeof t?RJ:zJ)(t)):this.node().innerHTML},raise:function(){return this.each(DJ)},lower:function(){return this.each(BJ)},append:function(t){var e="function"===typeof t?t:V$(t);return this.select((function(){return this.appendChild(e.apply(this,arguments))}))},insert:function(t,e){var n="function"===typeof t?t:V$(t),r=null==e?FJ:"function"===typeof e?e:nJ(e);return this.select((function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)}))},remove:function(){return this.each(NJ)},datum:function(t){return arguments.length?this.property("__data__",t):this.node().__data__},on:function(t,e,n){var r,i,o=function(t){return t.trim().split(/^|\s+/).map((function(t){var e="",n=t.indexOf(".");return n>=0&&(e=t.slice(n+1),t=t.slice(0,n)),{type:t,name:e}}))}(t+""),a=o.length;if(!(arguments.length<2)){for(s=e?tJ:Q$,null==n&&(n=!1),r=0;r<a;++r)this.each(s(o[r],e,n));return this}var s=this.node().__on;if(s)for(var l,c=0,u=s.length;c<u;++c)for(r=0,l=s[c];r<a;++r)if((i=o[r]).type===l.type&&i.name===l.name)return l.value},dispatch:function(t,e){return this.each(("function"===typeof e?WJ:VJ)(t,e))}};function ZJ(t,e){if((n=(t=e?t.toExponential(e-1):t.toExponential()).indexOf("e"))<0)return null;var n,r=t.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+t.slice(n+1)]}function XJ(t){return(t=ZJ(Math.abs(t)))?t[1]:NaN}var YJ;function KJ(t,e){var n=ZJ(t,e);if(!n)return t+"";var r=n[0],i=n[1];return i<0?"0."+new Array(-i).join("0")+r:r.length>i+1?r.slice(0,i+1)+"."+r.slice(i+1):r+new Array(i-r.length+2).join("0")}const $J={"":function(t,e){t:for(var n,r=(t=t.toPrecision(e)).length,i=1,o=-1;i<r;++i)switch(t[i]){case".":o=n=i;break;case"0":0===o&&(o=i),n=i;break;case"e":break t;default:o>0&&(o=0)}return o>0?t.slice(0,o)+t.slice(n+1):t},"%":function(t,e){return(100*t).toFixed(e)},b:function(t){return Math.round(t).toString(2)},c:function(t){return t+""},d:function(t){return Math.round(t).toString(10)},e:function(t,e){return t.toExponential(e)},f:function(t,e){return t.toFixed(e)},g:function(t,e){return t.toPrecision(e)},o:function(t){return Math.round(t).toString(8)},p:function(t,e){return KJ(100*t,e)},r:KJ,s:function(t,e){var n=ZJ(t,e);if(!n)return t+"";var r=n[0],i=n[1],o=i-(YJ=3*Math.max(-8,Math.min(8,Math.floor(i/3))))+1,a=r.length;return o===a?r:o>a?r+new Array(o-a+1).join("0"):o>0?r.slice(0,o)+"."+r.slice(o):"0."+new Array(1-o).join("0")+ZJ(t,Math.max(0,e+o-1))[0]},X:function(t){return Math.round(t).toString(16).toUpperCase()},x:function(t){return Math.round(t).toString(16)}};var JJ=/^(?:(.)?([<>=^]))?([+\-\( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?([a-z%])?$/i;function QJ(t){return new tQ(t)}function tQ(t){if(!(e=JJ.exec(t)))throw new Error("invalid format: "+t);var e,n=e[1]||" ",r=e[2]||">",i=e[3]||"-",o=e[4]||"",a=!!e[5],s=e[6]&&+e[6],l=!!e[7],c=e[8]&&+e[8].slice(1),u=e[9]||"";"n"===u?(l=!0,u="g"):$J[u]||(u=""),(a||"0"===n&&"="===r)&&(a=!0,n="0",r="="),this.fill=n,this.align=r,this.sign=i,this.symbol=o,this.zero=a,this.width=s,this.comma=l,this.precision=c,this.type=u}tQ.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(null==this.width?"":Math.max(1,0|this.width))+(this.comma?",":"")+(null==this.precision?"":"."+Math.max(0,0|this.precision))+this.type};var eQ,nQ,rQ,iQ=["y","z","a","f","p","n","\xb5","m","","k","M","G","T","P","E","Z","Y"];function oQ(t){return t}function aQ(t){var e,n,r=t.grouping&&t.thousands?(e=t.grouping,n=t.thousands,function(t,r){for(var i=t.length,o=[],a=0,s=e[0],l=0;i>0&&s>0&&(l+s+1>r&&(s=Math.max(1,r-l)),o.push(t.substring(i-=s,i+s)),!((l+=s+1)>r));)s=e[a=(a+1)%e.length];return o.reverse().join(n)}):oQ,i=t.currency,o=t.decimal;function a(t){var e=(t=QJ(t)).fill,n=t.align,a=t.sign,s=t.symbol,l=t.zero,c=t.width,u=t.comma,h=t.precision,d=t.type,f="$"===s?i[0]:"#"===s&&/[boxX]/.test(d)?"0"+d.toLowerCase():"",p="$"===s?i[1]:/[%p]/.test(d)?"%":"",m=$J[d],g=!d||/[defgprs%]/.test(d);function y(t){var i,s,y,v=f,_=p;if("c"===d)_=m(t)+_,t="";else{var b=((t=+t)<0||1/t<0)&&(t*=-1,!0);if(t=m(t,h),b)for(i=-1,s=t.length,b=!1;++i<s;)if(48<(y=t.charCodeAt(i))&&y<58||"x"===d&&96<y&&y<103||"X"===d&&64<y&&y<71){b=!0;break}if(v=(b?"("===a?a:"-":"-"===a||"("===a?"":a)+v,_=_+("s"===d?iQ[8+YJ/3]:"")+(b&&"("===a?")":""),g)for(i=-1,s=t.length;++i<s;)if(48>(y=t.charCodeAt(i))||y>57){_=(46===y?o+t.slice(i+1):t.slice(i))+_,t=t.slice(0,i);break}}u&&!l&&(t=r(t,1/0));var x=v.length+t.length+_.length,w=x<c?new Array(c-x+1).join(e):"";switch(u&&l&&(t=r(w+t,w.length?c-_.length:1/0),w=""),n){case"<":return v+t+_+w;case"=":return v+w+t+_;case"^":return w.slice(0,x=w.length>>1)+v+t+_+w.slice(x)}return w+v+t+_}return h=null==h?d?6:12:/[gprs]/.test(d)?Math.max(1,Math.min(21,h)):Math.max(0,Math.min(20,h)),y.toString=function(){return t+""},y}return{format:a,formatPrefix:function(t,e){var n=a(((t=QJ(t)).type="f",t)),r=3*Math.max(-8,Math.min(8,Math.floor(XJ(e)/3))),i=Math.pow(10,-r),o=iQ[8+r/3];return function(t){return n(i*t)+o}}}}!function(t){eQ=aQ(t),nQ=eQ.format,rQ=eQ.formatPrefix}({decimal:".",thousands:",",grouping:[3],currency:["$",""]});var sQ={value:function(){}};function lQ(){for(var t,e=0,n=arguments.length,r={};e<n;++e){if(!(t=arguments[e]+"")||t in r)throw new Error("illegal type: "+t);r[t]=[]}return new cQ(r)}function cQ(t){this._=t}function uQ(t,e){for(var n,r=0,i=t.length;r<i;++r)if((n=t[r]).name===e)return n.value}function hQ(t,e,n){for(var r=0,i=t.length;r<i;++r)if(t[r].name===e){t[r]=sQ,t=t.slice(0,r).concat(t.slice(r+1));break}return null!=n&&t.push({name:e,value:n}),t}cQ.prototype=lQ.prototype={constructor:cQ,on:function(t,e){var n,r=this._,i=function(t,e){return t.trim().split(/^|\s+/).map((function(t){var n="",r=t.indexOf(".");if(r>=0&&(n=t.slice(r+1),t=t.slice(0,r)),t&&!e.hasOwnProperty(t))throw new Error("unknown type: "+t);return{type:t,name:n}}))}(t+"",r),o=-1,a=i.length;if(!(arguments.length<2)){if(null!=e&&"function"!==typeof e)throw new Error("invalid callback: "+e);for(;++o<a;)if(n=(t=i[o]).type)r[n]=hQ(r[n],t.name,e);else if(null==e)for(n in r)r[n]=hQ(r[n],t.name,null);return this}for(;++o<a;)if((n=(t=i[o]).type)&&(n=uQ(r[n],t.name)))return n},copy:function(){var t={},e=this._;for(var n in e)t[n]=e[n].slice();return new cQ(t)},call:function(t,e){if((n=arguments.length-2)>0)for(var n,r,i=new Array(n),o=0;o<n;++o)i[o]=arguments[o+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(o=0,n=(r=this._[t]).length;o<n;++o)r[o].value.apply(e,i)},apply:function(t,e,n){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var r=this._[t],i=0,o=r.length;i<o;++i)r[i].value.apply(e,n)}};const dQ=lQ;function fQ(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}var pQ=function(t){var e;return 1===t.length&&(e=t,t=function(t,n){return fQ(e(t),n)}),{left:function(e,n,r,i){for(null==r&&(r=0),null==i&&(i=e.length);r<i;){var o=r+i>>>1;t(e[o],n)<0?r=o+1:i=o}return r},right:function(e,n,r,i){for(null==r&&(r=0),null==i&&(i=e.length);r<i;){var o=r+i>>>1;t(e[o],n)>0?i=o:r=o+1}return r}}}(fQ),mQ=pQ.right;pQ.left;const gQ=mQ;var yQ=Array.prototype;yQ.slice,yQ.map;var vQ=Math.sqrt(50),_Q=Math.sqrt(10),bQ=Math.sqrt(2);function xQ(t,e,n){var r=wQ(t,e,n);return function(t,e,n){t=+t,e=+e,n=(i=arguments.length)<2?(e=t,t=0,1):i<3?1:+n;for(var r=-1,i=0|Math.max(0,Math.ceil((e-t)/n)),o=new Array(i);++r<i;)o[r]=t+r*n;return o}(Math.ceil(t/r)*r,Math.floor(e/r)*r+r/2,r)}function wQ(t,e,n){var r=Math.abs(e-t)/Math.max(0,n),i=Math.pow(10,Math.floor(Math.log(r)/Math.LN10)),o=r/i;return o>=vQ?i*=10:o>=_Q?i*=5:o>=bQ&&(i*=2),e<t?-i:i}function SQ(t,e){var n,r=0,i=t.length,o=-1;if(null==e)for(;++o<i;)(n=+t[o])&&(r+=n);else for(;++o<i;)(n=+e(t[o],o,t))&&(r+=n);return r}var EQ="$";function TQ(){}function MQ(t,e){var n=new TQ;if(t instanceof TQ)t.each((function(t,e){n.set(e,t)}));else if(Array.isArray(t)){var r,i=-1,o=t.length;if(null==e)for(;++i<o;)n.set(i,t[i]);else for(;++i<o;)n.set(e(r=t[i],i,t),r)}else if(t)for(var a in t)n.set(a,t[a]);return n}TQ.prototype=MQ.prototype={constructor:TQ,has:function(t){return EQ+t in this},get:function(t){return this[EQ+t]},set:function(t,e){return this[EQ+t]=e,this},remove:function(t){var e=EQ+t;return e in this&&delete this[e]},clear:function(){for(var t in this)t[0]===EQ&&delete this[t]},keys:function(){var t=[];for(var e in this)e[0]===EQ&&t.push(e.slice(1));return t},values:function(){var t=[];for(var e in this)e[0]===EQ&&t.push(this[e]);return t},entries:function(){var t=[];for(var e in this)e[0]===EQ&&t.push({key:e.slice(1),value:this[e]});return t},size:function(){var t=0;for(var e in this)e[0]===EQ&&++t;return t},empty:function(){for(var t in this)if(t[0]===EQ)return!1;return!0},each:function(t){for(var e in this)e[0]===EQ&&t(this[e],e.slice(1),this)}};function AQ(){}var CQ=MQ.prototype;function PQ(t,e){var n=new AQ;if(t instanceof AQ)t.each((function(t){n.add(t)}));else if(t){var r=-1,i=t.length;if(null==e)for(;++r<i;)n.add(t[r]);else for(;++r<i;)n.add(e(t[r],r,t))}return n}AQ.prototype=PQ.prototype={constructor:AQ,has:CQ.has,add:function(t){return this[EQ+(t+="")]=t,this},remove:CQ.remove,clear:CQ.clear,values:CQ.keys,size:CQ.size,empty:CQ.empty,each:CQ.each};var kQ=Array.prototype,IQ=kQ.map,OQ=kQ.slice;function LQ(t,e){return t=+t,e=+e,function(n){return t*(1-n)+e*n}}function jQ(t,e,n){t.prototype=e.prototype=n,n.constructor=t}function zQ(t,e){var n=Object.create(t.prototype);for(var r in e)n[r]=e[r];return n}function RQ(){}var DQ=.7,BQ=1/DQ,FQ="\\s*([+-]?\\d+)\\s*",NQ="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*",UQ="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*",VQ=/^#([0-9a-f]{3,8})$/,WQ=new RegExp("^rgb\\("+[FQ,FQ,FQ]+"\\)$"),GQ=new RegExp("^rgb\\("+[UQ,UQ,UQ]+"\\)$"),qQ=new RegExp("^rgba\\("+[FQ,FQ,FQ,NQ]+"\\)$"),HQ=new RegExp("^rgba\\("+[UQ,UQ,UQ,NQ]+"\\)$"),ZQ=new RegExp("^hsl\\("+[NQ,UQ,UQ]+"\\)$"),XQ=new RegExp("^hsla\\("+[NQ,UQ,UQ,NQ]+"\\)$"),YQ={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function KQ(){return this.rgb().formatHex()}function $Q(){return this.rgb().formatRgb()}function JQ(t){var e,n;return t=(t+"").trim().toLowerCase(),(e=VQ.exec(t))?(n=e[1].length,e=parseInt(e[1],16),6===n?QQ(e):3===n?new r0(e>>8&15|e>>4&240,e>>4&15|240&e,(15&e)<<4|15&e,1):8===n?t0(e>>24&255,e>>16&255,e>>8&255,(255&e)/255):4===n?t0(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|240&e,((15&e)<<4|15&e)/255):null):(e=WQ.exec(t))?new r0(e[1],e[2],e[3],1):(e=GQ.exec(t))?new r0(255*e[1]/100,255*e[2]/100,255*e[3]/100,1):(e=qQ.exec(t))?t0(e[1],e[2],e[3],e[4]):(e=HQ.exec(t))?t0(255*e[1]/100,255*e[2]/100,255*e[3]/100,e[4]):(e=ZQ.exec(t))?s0(e[1],e[2]/100,e[3]/100,1):(e=XQ.exec(t))?s0(e[1],e[2]/100,e[3]/100,e[4]):YQ.hasOwnProperty(t)?QQ(YQ[t]):"transparent"===t?new r0(NaN,NaN,NaN,0):null}function QQ(t){return new r0(t>>16&255,t>>8&255,255&t,1)}function t0(t,e,n,r){return r<=0&&(t=e=n=NaN),new r0(t,e,n,r)}function e0(t){return t instanceof RQ||(t=JQ(t)),t?new r0((t=t.rgb()).r,t.g,t.b,t.opacity):new r0}function n0(t,e,n,r){return 1===arguments.length?e0(t):new r0(t,e,n,null==r?1:r)}function r0(t,e,n,r){this.r=+t,this.g=+e,this.b=+n,this.opacity=+r}function i0(){return"#"+a0(this.r)+a0(this.g)+a0(this.b)}function o0(){var t=this.opacity;return(1===(t=isNaN(t)?1:Math.max(0,Math.min(1,t)))?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(1===t?")":", "+t+")")}function a0(t){return((t=Math.max(0,Math.min(255,Math.round(t)||0)))<16?"0":"")+t.toString(16)}function s0(t,e,n,r){return r<=0?t=e=n=NaN:n<=0||n>=1?t=e=NaN:e<=0&&(t=NaN),new c0(t,e,n,r)}function l0(t){if(t instanceof c0)return new c0(t.h,t.s,t.l,t.opacity);if(t instanceof RQ||(t=JQ(t)),!t)return new c0;if(t instanceof c0)return t;var e=(t=t.rgb()).r/255,n=t.g/255,r=t.b/255,i=Math.min(e,n,r),o=Math.max(e,n,r),a=NaN,s=o-i,l=(o+i)/2;return s?(a=e===o?(n-r)/s+6*(n<r):n===o?(r-e)/s+2:(e-n)/s+4,s/=l<.5?o+i:2-o-i,a*=60):s=l>0&&l<1?0:a,new c0(a,s,l,t.opacity)}function c0(t,e,n,r){this.h=+t,this.s=+e,this.l=+n,this.opacity=+r}function u0(t,e,n){return 255*(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)}function h0(t,e,n,r,i){var o=t*t,a=o*t;return((1-3*t+3*o-a)*e+(4-6*o+3*a)*n+(1+3*t+3*o-3*a)*r+a*i)/6}function d0(t){return function(){return t}}function f0(t,e){return function(n){return t+n*e}}function p0(t){return 1===(t=+t)?m0:function(e,n){return n-e?function(t,e,n){return t=Math.pow(t,n),e=Math.pow(e,n)-t,n=1/n,function(r){return Math.pow(t+r*e,n)}}(e,n,t):d0(isNaN(e)?n:e)}}function m0(t,e){var n=e-t;return n?f0(t,n):d0(isNaN(t)?e:t)}jQ(RQ,JQ,{copy:function(t){return Object.assign(new this.constructor,this,t)},displayable:function(){return this.rgb().displayable()},hex:KQ,formatHex:KQ,formatHsl:function(){return l0(this).formatHsl()},formatRgb:$Q,toString:$Q}),jQ(r0,n0,zQ(RQ,{brighter:function(t){return t=null==t?BQ:Math.pow(BQ,t),new r0(this.r*t,this.g*t,this.b*t,this.opacity)},darker:function(t){return t=null==t?DQ:Math.pow(DQ,t),new r0(this.r*t,this.g*t,this.b*t,this.opacity)},rgb:function(){return this},displayable:function(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:i0,formatHex:i0,formatRgb:o0,toString:o0})),jQ(c0,(function(t,e,n,r){return 1===arguments.length?l0(t):new c0(t,e,n,null==r?1:r)}),zQ(RQ,{brighter:function(t){return t=null==t?BQ:Math.pow(BQ,t),new c0(this.h,this.s,this.l*t,this.opacity)},darker:function(t){return t=null==t?DQ:Math.pow(DQ,t),new c0(this.h,this.s,this.l*t,this.opacity)},rgb:function(){var t=this.h%360+360*(this.h<0),e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*e,i=2*n-r;return new r0(u0(t>=240?t-240:t+120,i,r),u0(t,i,r),u0(t<120?t+240:t-120,i,r),this.opacity)},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl:function(){var t=this.opacity;return(1===(t=isNaN(t)?1:Math.max(0,Math.min(1,t)))?"hsl(":"hsla(")+(this.h||0)+", "+100*(this.s||0)+"%, "+100*(this.l||0)+"%"+(1===t?")":", "+t+")")}}));const g0=function t(e){var n=p0(e);function r(t,e){var r=n((t=n0(t)).r,(e=n0(e)).r),i=n(t.g,e.g),o=n(t.b,e.b),a=m0(t.opacity,e.opacity);return function(e){return t.r=r(e),t.g=i(e),t.b=o(e),t.opacity=a(e),t+""}}return r.gamma=t,r}(1);function y0(t){return function(e){var n,r,i=e.length,o=new Array(i),a=new Array(i),s=new Array(i);for(n=0;n<i;++n)r=n0(e[n]),o[n]=r.r||0,a[n]=r.g||0,s[n]=r.b||0;return o=t(o),a=t(a),s=t(s),r.opacity=1,function(t){return r.r=o(t),r.g=a(t),r.b=s(t),r+""}}}y0((function(t){var e=t.length-1;return function(n){var r=n<=0?n=0:n>=1?(n=1,e-1):Math.floor(n*e),i=t[r],o=t[r+1],a=r>0?t[r-1]:2*i-o,s=r<e-1?t[r+2]:2*o-i;return h0((n-r/e)*e,a,i,o,s)}})),y0((function(t){var e=t.length;return function(n){var r=Math.floor(((n%=1)<0?++n:n)*e),i=t[(r+e-1)%e],o=t[r%e],a=t[(r+1)%e],s=t[(r+2)%e];return h0((n-r/e)*e,i,o,a,s)}}));function v0(t,e){var n,r=e?e.length:0,i=t?Math.min(r,t.length):0,o=new Array(i),a=new Array(r);for(n=0;n<i;++n)o[n]=T0(t[n],e[n]);for(;n<r;++n)a[n]=e[n];return function(t){for(n=0;n<i;++n)a[n]=o[n](t);return a}}function _0(t,e){var n=new Date;return t=+t,e=+e,function(r){return n.setTime(t*(1-r)+e*r),n}}function b0(t,e){var n,r={},i={};for(n in null!==t&&"object"===typeof t||(t={}),null!==e&&"object"===typeof e||(e={}),e)n in t?r[n]=T0(t[n],e[n]):i[n]=e[n];return function(t){for(n in r)i[n]=r[n](t);return i}}var x0=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,w0=new RegExp(x0.source,"g");function S0(t,e){var n,r,i,o=x0.lastIndex=w0.lastIndex=0,a=-1,s=[],l=[];for(t+="",e+="";(n=x0.exec(t))&&(r=w0.exec(e));)(i=r.index)>o&&(i=e.slice(o,i),s[a]?s[a]+=i:s[++a]=i),(n=n[0])===(r=r[0])?s[a]?s[a]+=r:s[++a]=r:(s[++a]=null,l.push({i:a,x:LQ(n,r)})),o=w0.lastIndex;return o<e.length&&(i=e.slice(o),s[a]?s[a]+=i:s[++a]=i),s.length<2?l[0]?function(t){return function(e){return t(e)+""}}(l[0].x):function(t){return function(){return t}}(e):(e=l.length,function(t){for(var n,r=0;r<e;++r)s[(n=l[r]).i]=n.x(t);return s.join("")})}function E0(t,e){e||(e=[]);var n,r=t?Math.min(e.length,t.length):0,i=e.slice();return function(o){for(n=0;n<r;++n)i[n]=t[n]*(1-o)+e[n]*o;return i}}function T0(t,e){var n,r,i=typeof e;return null==e||"boolean"===i?d0(e):("number"===i?LQ:"string"===i?(n=JQ(e))?(e=n,g0):S0:e instanceof JQ?g0:e instanceof Date?_0:(r=e,!ArrayBuffer.isView(r)||r instanceof DataView?Array.isArray(e)?v0:"function"!==typeof e.valueOf&&"function"!==typeof e.toString||isNaN(e)?b0:LQ:E0))(t,e)}function M0(t,e){return t=+t,e=+e,function(n){return Math.round(t*(1-n)+e*n)}}function A0(t){return+t}var C0=[0,1];function P0(t,e){return(e-=t=+t)?function(n){return(n-t)/e}:(n=e,function(){return n});var n}function k0(t,e,n,r){var i=t[0],o=t[1],a=e[0],s=e[1];return o<i?(i=n(o,i),a=r(s,a)):(i=n(i,o),a=r(a,s)),function(t){return a(i(t))}}function I0(t,e,n,r){var i=Math.min(t.length,e.length)-1,o=new Array(i),a=new Array(i),s=-1;for(t[i]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());++s<i;)o[s]=n(t[s],t[s+1]),a[s]=r(e[s],e[s+1]);return function(e){var n=gQ(t,e,1,i)-1;return a[n](o[n](e))}}function O0(t,e,n){var r,i=t[0],o=t[t.length-1],a=wQ(i,o,null==e?10:e);switch((n=QJ(null==n?",f":n)).type){case"s":var s=Math.max(Math.abs(i),Math.abs(o));return null!=n.precision||isNaN(r=function(t,e){return Math.max(0,3*Math.max(-8,Math.min(8,Math.floor(XJ(e)/3)))-XJ(Math.abs(t)))}(a,s))||(n.precision=r),rQ(n,s);case"":case"e":case"g":case"p":case"r":null!=n.precision||isNaN(r=function(t,e){return t=Math.abs(t),e=Math.abs(e)-t,Math.max(0,XJ(e)-XJ(t))+1}(a,Math.max(Math.abs(i),Math.abs(o))))||(n.precision=r-("e"===n.type));break;case"f":case"%":null!=n.precision||isNaN(r=function(t){return Math.max(0,-XJ(Math.abs(t)))}(a))||(n.precision=r-2*("%"===n.type))}return nQ(n)}function L0(){var t=function(t,e){var n,r,i,o=C0,a=C0,s=T0,l=!1;function c(){return n=Math.min(o.length,a.length)>2?I0:k0,r=i=null,u}function u(e){return(r||(r=n(o,a,l?function(t){return function(e,n){var r=t(e=+e,n=+n);return function(t){return t<=e?0:t>=n?1:r(t)}}}(t):t,s)))(+e)}return u.invert=function(t){return(i||(i=n(a,o,P0,l?function(t){return function(e,n){var r=t(e=+e,n=+n);return function(t){return t<=0?e:t>=1?n:r(t)}}}(e):e)))(+t)},u.domain=function(t){return arguments.length?(o=IQ.call(t,A0),c()):o.slice()},u.range=function(t){return arguments.length?(a=OQ.call(t),c()):a.slice()},u.rangeRound=function(t){return a=OQ.call(t),s=M0,c()},u.clamp=function(t){return arguments.length?(l=!!t,c()):l},u.interpolate=function(t){return arguments.length?(s=t,c()):s},c()}(P0,LQ);return t.copy=function(){return function(t,e){return e.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp())}(t,L0())},function(t){var e=t.domain;return t.ticks=function(t){var n=e();return xQ(n[0],n[n.length-1],null==t?10:t)},t.tickFormat=function(t,n){return O0(e(),t,n)},t.nice=function(n){var r=e(),i=r.length-1,o=null==n?10:n,a=r[0],s=r[i],l=wQ(a,s,o);return l&&(l=wQ(Math.floor(a/l)*l,Math.ceil(s/l)*l,o),r[0]=Math.floor(a/l)*l,r[i]=Math.ceil(s/l)*l,e(r)),t},t}(t)}function j0(t){return t.match(/.{6}/g).map((function(t){return"#"+t}))}j0("1f77b4ff7f0e2ca02cd627289467bd8c564be377c27f7f7fbcbd2217becf"),j0("393b795254a36b6ecf9c9ede6379398ca252b5cf6bcedb9c8c6d31bd9e39e7ba52e7cb94843c39ad494ad6616be7969c7b4173a55194ce6dbdde9ed6"),j0("3182bd6baed69ecae1c6dbefe6550dfd8d3cfdae6bfdd0a231a35474c476a1d99bc7e9c0756bb19e9ac8bcbddcdadaeb636363969696bdbdbdd9d9d9"),j0("1f77b4aec7e8ff7f0effbb782ca02c98df8ad62728ff98969467bdc5b0d58c564bc49c94e377c2f7b6d27f7f7fc7c7c7bcbd22dbdb8d17becf9edae5");var z0=Math.PI/180,R0=180/Math.PI,D0=-.14861,B0=1.78277,F0=-.29227,N0=-.90649,U0=1.97294,V0=U0*N0,W0=U0*B0,G0=B0*F0-N0*D0;function q0(t,e,n,r){return 1===arguments.length?function(t){if(t instanceof H0)return new H0(t.h,t.s,t.l,t.opacity);t instanceof r0||(t=e0(t));var e=t.r/255,n=t.g/255,r=t.b/255,i=(G0*r+V0*e-W0*n)/(G0+V0-W0),o=r-i,a=(U0*(n-i)-F0*o)/N0,s=Math.sqrt(a*a+o*o)/(U0*i*(1-i)),l=s?Math.atan2(a,o)*R0-120:NaN;return new H0(l<0?l+360:l,s,i,t.opacity)}(t):new H0(t,e,n,null==r?1:r)}function H0(t,e,n,r){this.h=+t,this.s=+e,this.l=+n,this.opacity=+r}function Z0(t){return function e(n){function r(e,r){var i=t((e=q0(e)).h,(r=q0(r)).h),o=m0(e.s,r.s),a=m0(e.l,r.l),s=m0(e.opacity,r.opacity);return function(t){return e.h=i(t),e.s=o(t),e.l=a(Math.pow(t,n)),e.opacity=s(t),e+""}}return n=+n,r.gamma=e,r}(1)}jQ(H0,q0,zQ(RQ,{brighter:function(t){return t=null==t?BQ:Math.pow(BQ,t),new H0(this.h,this.s,this.l*t,this.opacity)},darker:function(t){return t=null==t?DQ:Math.pow(DQ,t),new H0(this.h,this.s,this.l*t,this.opacity)},rgb:function(){var t=isNaN(this.h)?0:(this.h+120)*z0,e=+this.l,n=isNaN(this.s)?0:this.s*e*(1-e),r=Math.cos(t),i=Math.sin(t);return new r0(255*(e+n*(D0*r+B0*i)),255*(e+n*(F0*r+N0*i)),255*(e+n*(U0*r)),this.opacity)}}));Z0((function(t,e){var n=e-t;return n?f0(t,n>180||n<-180?n-360*Math.round(n/360):n):d0(isNaN(t)?e:t)}));var X0=Z0(m0);X0(q0(300,.5,0),q0(-240,.5,1));X0(q0(-100,.75,.35),q0(80,1.5,.8)),X0(q0(260,.75,.35),q0(80,1.5,.8)),q0();function Y0(t){var e=t.length;return function(n){return t[Math.max(0,Math.min(e-1,Math.floor(n*e)))]}}Y0(j0("44015444025645045745055946075a46085c460a5d460b5e470d60470e6147106347116447136548146748166848176948186a481a6c481b6d481c6e481d6f481f70482071482173482374482475482576482677482878482979472a7a472c7a472d7b472e7c472f7d46307e46327e46337f463480453581453781453882443983443a83443b84433d84433e85423f854240864241864142874144874045884046883f47883f48893e49893e4a893e4c8a3d4d8a3d4e8a3c4f8a3c508b3b518b3b528b3a538b3a548c39558c39568c38588c38598c375a8c375b8d365c8d365d8d355e8d355f8d34608d34618d33628d33638d32648e32658e31668e31678e31688e30698e306a8e2f6b8e2f6c8e2e6d8e2e6e8e2e6f8e2d708e2d718e2c718e2c728e2c738e2b748e2b758e2a768e2a778e2a788e29798e297a8e297b8e287c8e287d8e277e8e277f8e27808e26818e26828e26828e25838e25848e25858e24868e24878e23888e23898e238a8d228b8d228c8d228d8d218e8d218f8d21908d21918c20928c20928c20938c1f948c1f958b1f968b1f978b1f988b1f998a1f9a8a1e9b8a1e9c891e9d891f9e891f9f881fa0881fa1881fa1871fa28720a38620a48621a58521a68522a78522a88423a98324aa8325ab8225ac8226ad8127ad8128ae8029af7f2ab07f2cb17e2db27d2eb37c2fb47c31b57b32b67a34b67935b77937b87838b9773aba763bbb753dbc743fbc7340bd7242be7144bf7046c06f48c16e4ac16d4cc26c4ec36b50c46a52c56954c56856c66758c7655ac8645cc8635ec96260ca6063cb5f65cb5e67cc5c69cd5b6ccd5a6ece5870cf5773d05675d05477d1537ad1517cd2507fd34e81d34d84d44b86d54989d5488bd6468ed64590d74393d74195d84098d83e9bd93c9dd93ba0da39a2da37a5db36a8db34aadc32addc30b0dd2fb2dd2db5de2bb8de29bade28bddf26c0df25c2df23c5e021c8e020cae11fcde11dd0e11cd2e21bd5e21ad8e219dae319dde318dfe318e2e418e5e419e7e419eae51aece51befe51cf1e51df4e61ef6e620f8e621fbe723fde725"));Y0(j0("00000401000501010601010802010902020b02020d03030f03031204041405041606051806051a07061c08071e0907200a08220b09240c09260d0a290e0b2b100b2d110c2f120d31130d34140e36150e38160f3b180f3d19103f1a10421c10441d11471e114920114b21114e22115024125325125527125829115a2a115c2c115f2d11612f116331116533106734106936106b38106c390f6e3b0f703d0f713f0f72400f74420f75440f764510774710784910784a10794c117a4e117b4f127b51127c52137c54137d56147d57157e59157e5a167e5c167f5d177f5f187f601880621980641a80651a80671b80681c816a1c816b1d816d1d816e1e81701f81721f817320817521817621817822817922827b23827c23827e24828025828125818326818426818627818827818928818b29818c29818e2a81902a81912b81932b80942c80962c80982d80992d809b2e7f9c2e7f9e2f7fa02f7fa1307ea3307ea5317ea6317da8327daa337dab337cad347cae347bb0357bb2357bb3367ab5367ab73779b83779ba3878bc3978bd3977bf3a77c03a76c23b75c43c75c53c74c73d73c83e73ca3e72cc3f71cd4071cf4070d0416fd2426fd3436ed5446dd6456cd8456cd9466bdb476adc4869de4968df4a68e04c67e24d66e34e65e44f64e55064e75263e85362e95462ea5661eb5760ec5860ed5a5fee5b5eef5d5ef05f5ef1605df2625df2645cf3655cf4675cf4695cf56b5cf66c5cf66e5cf7705cf7725cf8745cf8765cf9785df9795df97b5dfa7d5efa7f5efa815ffb835ffb8560fb8761fc8961fc8a62fc8c63fc8e64fc9065fd9266fd9467fd9668fd9869fd9a6afd9b6bfe9d6cfe9f6dfea16efea36ffea571fea772fea973feaa74feac76feae77feb078feb27afeb47bfeb67cfeb77efeb97ffebb81febd82febf84fec185fec287fec488fec68afec88cfeca8dfecc8ffecd90fecf92fed194fed395fed597fed799fed89afdda9cfddc9efddea0fde0a1fde2a3fde3a5fde5a7fde7a9fde9aafdebacfcecaefceeb0fcf0b2fcf2b4fcf4b6fcf6b8fcf7b9fcf9bbfcfbbdfcfdbf")),Y0(j0("00000401000501010601010802010a02020c02020e03021004031204031405041706041907051b08051d09061f0a07220b07240c08260d08290e092b10092d110a30120a32140b34150b37160b39180c3c190c3e1b0c411c0c431e0c451f0c48210c4a230c4c240c4f260c51280b53290b552b0b572d0b592f0a5b310a5c320a5e340a5f3609613809623909633b09643d09653e0966400a67420a68440a68450a69470b6a490b6a4a0c6b4c0c6b4d0d6c4f0d6c510e6c520e6d540f6d550f6d57106e59106e5a116e5c126e5d126e5f136e61136e62146e64156e65156e67166e69166e6a176e6c186e6d186e6f196e71196e721a6e741a6e751b6e771c6d781c6d7a1d6d7c1d6d7d1e6d7f1e6c801f6c82206c84206b85216b87216b88226a8a226a8c23698d23698f24699025689225689326679526679727669827669a28659b29649d29649f2a63a02a63a22b62a32c61a52c60a62d60a82e5fa92e5eab2f5ead305dae305cb0315bb1325ab3325ab43359b63458b73557b93556ba3655bc3754bd3853bf3952c03a51c13a50c33b4fc43c4ec63d4dc73e4cc83f4bca404acb4149cc4248ce4347cf4446d04545d24644d34743d44842d54a41d74b3fd84c3ed94d3dda4e3cdb503bdd513ade5238df5337e05536e15635e25734e35933e45a31e55c30e65d2fe75e2ee8602de9612bea632aeb6429eb6628ec6726ed6925ee6a24ef6c23ef6e21f06f20f1711ff1731df2741cf3761bf37819f47918f57b17f57d15f67e14f68013f78212f78410f8850ff8870ef8890cf98b0bf98c0af98e09fa9008fa9207fa9407fb9606fb9706fb9906fb9b06fb9d07fc9f07fca108fca309fca50afca60cfca80dfcaa0ffcac11fcae12fcb014fcb216fcb418fbb61afbb81dfbba1ffbbc21fbbe23fac026fac228fac42afac62df9c72ff9c932f9cb35f8cd37f8cf3af7d13df7d340f6d543f6d746f5d949f5db4cf4dd4ff4df53f4e156f3e35af3e55df2e661f2e865f2ea69f1ec6df1ed71f1ef75f1f179f2f27df2f482f3f586f3f68af4f88ef5f992f6fa96f8fb9af9fc9dfafda1fcffa4")),Y0(j0("0d088710078813078916078a19068c1b068d1d068e20068f2206902406912605912805922a05932c05942e05952f059631059733059735049837049938049a3a049a3c049b3e049c3f049c41049d43039e44039e46039f48039f4903a04b03a14c02a14e02a25002a25102a35302a35502a45601a45801a45901a55b01a55c01a65e01a66001a66100a76300a76400a76600a76700a86900a86a00a86c00a86e00a86f00a87100a87201a87401a87501a87701a87801a87a02a87b02a87d03a87e03a88004a88104a78305a78405a78606a68707a68808a68a09a58b0aa58d0ba58e0ca48f0da4910ea3920fa39410a29511a19613a19814a099159f9a169f9c179e9d189d9e199da01a9ca11b9ba21d9aa31e9aa51f99a62098a72197a82296aa2395ab2494ac2694ad2793ae2892b02991b12a90b22b8fb32c8eb42e8db52f8cb6308bb7318ab83289ba3388bb3488bc3587bd3786be3885bf3984c03a83c13b82c23c81c33d80c43e7fc5407ec6417dc7427cc8437bc9447aca457acb4679cc4778cc4977cd4a76ce4b75cf4c74d04d73d14e72d24f71d35171d45270d5536fd5546ed6556dd7566cd8576bd9586ada5a6ada5b69db5c68dc5d67dd5e66de5f65de6164df6263e06363e16462e26561e26660e3685fe4695ee56a5de56b5de66c5ce76e5be76f5ae87059e97158e97257ea7457eb7556eb7655ec7754ed7953ed7a52ee7b51ef7c51ef7e50f07f4ff0804ef1814df1834cf2844bf3854bf3874af48849f48948f58b47f58c46f68d45f68f44f79044f79143f79342f89441f89540f9973ff9983ef99a3efa9b3dfa9c3cfa9e3bfb9f3afba139fba238fca338fca537fca636fca835fca934fdab33fdac33fdae32fdaf31fdb130fdb22ffdb42ffdb52efeb72dfeb82cfeba2cfebb2bfebd2afebe2afec029fdc229fdc328fdc527fdc627fdc827fdca26fdcb26fccd25fcce25fcd025fcd225fbd324fbd524fbd724fad824fada24f9dc24f9dd25f8df25f8e125f7e225f7e425f6e626f6e826f5e926f5eb27f4ed27f3ee27f3f027f2f227f1f426f1f525f0f724f0f921"));var K0="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},$0=function(t){return t},J0=function(t){for(var e=[],n=0,r=t.length;n<r;n++)e[n]=t[r-n-1];return e},Q0=function(t,e){t.each((function(){for(var t,n=function(t){return"string"===typeof t?new qJ([[document.querySelector(t)]],[document.documentElement]):new qJ([[t]],GJ)}(this),r=n.text().split(/\s+/).reverse(),i=[],o=(n.attr("y"),parseFloat(n.attr("dy"))||0),a=n.text(null).append("tspan").attr("x",0).attr("dy",o+"em");t=r.pop();)i.push(t),a.text(i.join(" ")),a.node().getComputedTextLength()>e&&i.length>1&&(i.pop(),a.text(i.join(" ")),i=[t],a=n.append("tspan").attr("x",0).attr("dy",1.2+o+"em").text(t))}))},t1={d3_drawShapes:function(t,e,n,r,i,o){"rect"===t?e.attr("height",n).attr("width",r):"circle"===t?e.attr("r",i):"line"===t?e.attr("x1",0).attr("x2",r).attr("y1",0).attr("y2",0):"path"===t&&e.attr("d",o)},d3_addText:function(t,e,n,r,i){e.append("text").attr("class",r+"label");var o=t.selectAll("g."+r+"cell text."+r+"label").data(n).text($0);return i&&t.selectAll("g."+r+"cell text."+r+"label").call(Q0,i),o},d3_calcType:function(t,e,n,r,i,o){var a=t.invertExtent?function(t,e,n){var r=t.range().map((function(r){var i=t.invertExtent(r);return e(i[0])+" "+n+" "+e(i[1])}));return{data:t.range(),labels:r,feature:$0}}(t,i,o):t.ticks?function(t,e,n){var r=[];if(e.length>1)r=e;else for(var i=t.domain(),o=(i[i.length-1]-i[0])/(e-1),a=0;a<e;a++)r.push(i[0]+a*o);var s=r.map(n);return{data:r,labels:s,feature:function(e){return t(e)}}}(t,n,i):function(t){return{data:t.domain(),labels:t.domain(),feature:function(e){return t(e)}}}(t),s=t.range&&t.range()||t.domain();return a.labels=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments[1],n=arguments[2],r=arguments[3],i=arguments[4];if("object"===("undefined"===typeof e?"undefined":K0(e))){if(0===e.length)return t;for(var o=e.length;o<t.length;o++)e.push(t[o]);return e}if("function"===typeof e){for(var a=[],s=t.length,l=0;l<s;l++)a.push(e({i:l,genLength:s,generatedLabels:t,domain:n,range:r,labelDelimiter:i}));return a}return t}(a.labels,r,t.domain(),s,o),e&&(a.labels=J0(a.labels),a.data=J0(a.data)),a},d3_filterCells:function(t,e){var n=t.data.map((function(e,n){return{data:e,label:t.labels[n]}})).filter(e),r=n.map((function(t){return t.data})),i=n.map((function(t){return t.label}));return t.data=t.data.filter((function(t){return-1!==r.indexOf(t)})),t.labels=t.labels.filter((function(t){return-1!==i.indexOf(t)})),t},d3_placement:function(t,e,n,r,i,o){e.attr("transform",n),r.attr("transform",i),"horizontal"===t&&r.style("text-anchor",o)},d3_addEvents:function(t,e){t.on("mouseover.legend",(function(t){!function(t,e,n){t.call("cellover",n,e)}(e,t,this)})).on("mouseout.legend",(function(t){!function(t,e,n){t.call("cellout",n,e)}(e,t,this)})).on("click.legend",(function(t){!function(t,e,n){t.call("cellclick",n,e)}(e,t,this)}))},d3_title:function(t,e,n,r){if(""!==e){t.selectAll("text."+n+"legendTitle").data([e]).enter().append("text").attr("class",n+"legendTitle"),t.selectAll("text."+n+"legendTitle").text(e),r&&t.selectAll("text."+n+"legendTitle").call(Q0,r);var i=t.select("."+n+"legendCells"),o=t.select("."+n+"legendTitle").nodes().map((function(t){return t.getBBox().height}))[0],a=-i.nodes().map((function(t){return t.getBBox().x}))[0];i.attr("transform","translate("+a+","+o+")")}},d3_defaultLocale:{format:nQ,formatPrefix:rQ},d3_defaultFormatSpecifier:".01f",d3_defaultDelimiter:"to"};function e1(){var t=L0(),e="rect",n=15,r=15,i=10,o=2,a=[5],s=void 0,l=[],c="",u=!1,h="",d=t1.d3_defaultLocale,f=t1.d3_defaultFormatSpecifier,p=10,m="middle",g=t1.d3_defaultDelimiter,y=void 0,v="vertical",_=!1,b=void 0,x=void 0,w=dQ("cellover","cellout","cellclick");function S(S){var E=t1.d3_calcType(t,_,a,l,d.format(f),g);S.selectAll("g").data([t]).enter().append("g").attr("class",c+"legendCells"),s&&t1.d3_filterCells(E,s);var T=S.select("."+c+"legendCells").selectAll("."+c+"cell").data(E.data),M=T.enter().append("g").attr("class",c+"cell");M.append(e).attr("class",c+"swatch");var A=S.selectAll("g."+c+"cell "+e+"."+c+"swatch").data(E.data);t1.d3_addEvents(M,w),T.exit().transition().style("opacity",0).remove(),A.exit().transition().style("opacity",0).remove(),A=A.merge(A),t1.d3_drawShapes(e,A,r,n,i,b);var C=t1.d3_addText(S,M,E.labels,c,y);T=M.merge(T);var P=C.nodes().map((function(t){return t.getBBox()})),k=A.nodes().map((function(t){return t.getBBox()}));u?A.attr("class",(function(t){return c+"swatch "+E.feature(t)})):"line"==e?A.style("stroke",E.feature):A.style("fill",E.feature);var I=void 0,O=void 0,L="start"==m?0:"middle"==m?.5:1;"vertical"===v?function(){var t=P.map((function(t,e){return Math.max(t.height,k[e].height)}));I=function(e,n){return"translate(0, "+(SQ(t.slice(0,n))+n*o)+")"},O=function(t,e){return"translate( "+(k[e].width+k[e].x+p)+", "+(k[e].y+k[e].height/2+5)+")"}}():"horizontal"===v&&(I=function(t,e){return"translate("+e*(k[e].width+o)+",0)"},O=function(t,e){return"translate("+(k[e].width*L+k[e].x)+",\n          "+(k[e].height+k[e].y+p+8)+")"}),t1.d3_placement(v,T,I,C,O,m),t1.d3_title(S,h,c,x),T.transition().style("opacity",1)}return S.scale=function(e){return arguments.length?(t=e,S):t},S.cells=function(t){return arguments.length?((t.length>1||t>=2)&&(a=t),S):a},S.cellFilter=function(t){return arguments.length?(s=t,S):s},S.shape=function(t,n){return arguments.length?(("rect"==t||"circle"==t||"line"==t||"path"==t&&"string"===typeof n)&&(e=t,b=n),S):e},S.shapeWidth=function(t){return arguments.length?(n=+t,S):n},S.shapeHeight=function(t){return arguments.length?(r=+t,S):r},S.shapeRadius=function(t){return arguments.length?(i=+t,S):i},S.shapePadding=function(t){return arguments.length?(o=+t,S):o},S.labels=function(t){return arguments.length?(l=t,S):l},S.labelAlign=function(t){return arguments.length?("start"!=t&&"end"!=t&&"middle"!=t||(m=t),S):m},S.locale=function(t){return arguments.length?(d=aQ(t),S):d},S.labelFormat=function(t){return arguments.length?(f=QJ(t),S):S.locale().format(f)},S.labelOffset=function(t){return arguments.length?(p=+t,S):p},S.labelDelimiter=function(t){return arguments.length?(g=t,S):g},S.labelWrap=function(t){return arguments.length?(y=t,S):y},S.useClass=function(t){return arguments.length?(!0!==t&&!1!==t||(u=t),S):u},S.orient=function(t){return arguments.length?("horizontal"!=(t=t.toLowerCase())&&"vertical"!=t||(v=t),S):v},S.ascending=function(t){return arguments.length?(_=!!t,S):_},S.classPrefix=function(t){return arguments.length?(c=t,S):c},S.title=function(t){return arguments.length?(h=t,S):h},S.titleWidth=function(t){return arguments.length?(x=t,S):x},S.textWrap=function(t){return arguments.length?(textWrap=t,S):textWrap},S.on=function(){var t=w.on.apply(w,arguments);return t===w?S:t},S}const n1=t=>{let{title:e,legendItems:n,formatting:i}=t;const o=(0,r.useRef)();return(0,r.useEffect)((()=>{if(0==n.length)return;const t=n.map((t=>parseFloat(t.item2))),e=n.map((t=>t.color)),r=s_().domain(t).range(e),a=function(t){return"string"===typeof t?new Um([[document.querySelector(t)]],[document.documentElement]):new Um([[t]],Nm)}(o.current);a.selectAll(".legendLinear").remove();const s=.8*a.node().getBoundingClientRect().height/n.length,l=e1().shapeWidth(5).shapeHeight(s).shapePadding(2).labelOffset(5).labelFormat(i).orient("vertical").scale(r).cells(t);a.append("g").attr("class","legendLinear").attr("transform","translate(10,10)").call(l).selectAll(".label").attr("transform",((t,e)=>"translate(10, ".concat(e+s,")")))}),[n,e]),(0,Si.jsxs)("div",{style:{height:"40dvh",position:"absolute",display:"flex",flexDirection:"column",margin:"auto",left:"0px",top:"0px",bottom:"0px",pointerEvents:"none"},children:[(0,Si.jsx)("svg",{style:{height:"100%"},ref:o,width:110}),(0,Si.jsx)("div",{style:{display:"flex",marginLeft:"10px"},children:(0,Si.jsx)(Yz,{color:"gray.700",fontSize:"10px",style:{width:"30dvw"},children:e})})]})},r1=t=>{let{title:e,legendItems:n,color:r,description:i,formatter:o}=t;const a=o||dv(",.0f"),[s]=ki("(max-width: 800px)");return s?(0,Si.jsx)(n1,{title:e,legendItems:n,color:r,formatting:a}):(0,Si.jsxs)(Ei,{borderRadius:"md",borderColor:"".concat(r,".200"),className:"legend-container",bottom:"10dvh",children:[(0,Si.jsx)("div",{style:{width:"100%",display:"flex",justifyContent:"space-between",alignItems:"start",marginBottom:"5px",marginTop:"5px"},children:(0,Si.jsx)(Pp,{label:i,placement:"top",hasArrow:!0,gutter:12,children:(0,Si.jsx)(Yz,{color:"gray.700",fontSize:"min(1.8dvh, 0.9dvw)",children:e})})}),(0,Si.jsx)(b$,{children:(0,Si.jsx)(S$,{size:"xs",variant:"unstyled",children:(0,Si.jsx)(E$,{children:n.map(((t,e)=>(0,Si.jsxs)(T$,{fontSize:"min(0.7dvw, 0.7dvh)",children:[(0,Si.jsx)(M$,{children:(0,Si.jsx)(R$,{className:"legend-color",bg:t.color,borderRadius:"15%",h:s?"10px":"min(1.6dvh, 0.8dvw)",w:s?"10px":"min(1.6dvh, 0.8dvw)"})}),(0,Si.jsx)(M$,{className:"legend-label",children:a(t.item1)}),(0,Si.jsx)(M$,{className:"legend-dash",children:"\u2014"}),(0,Si.jsx)(M$,{className:"legend-label",children:a(t.item2)})]},"legend-item-".concat(e))))})})})]})};let i1=1,o1=1;class a1{constructor(){this.time=0,this.channels=new Map,this.animations=new Map,this.playing=!1,this.lastEngineTime=-1}addChannel(t){const{delay:e=0,duration:n=Number.POSITIVE_INFINITY,rate:r=1,repeat:i=1}=t,o=i1++,a={time:0,delay:e,duration:n,rate:r,repeat:i};return this._setChannelTime(a,this.time),this.channels.set(o,a),o}removeChannel(t){this.channels.delete(t);for(const[e,n]of this.animations)n.channel===t&&this.detachAnimation(e)}isFinished(t){const e=this.channels.get(t);return void 0!==e&&this.time>=e.delay+e.duration*e.repeat}getTime(t){if(void 0===t)return this.time;const e=this.channels.get(t);return void 0===e?-1:e.time}setTime(t){this.time=Math.max(0,t);const e=this.channels.values();for(const r of e)this._setChannelTime(r,this.time);const n=this.animations.values();for(const r of n){const{animation:t,channel:e}=r;t.setTime(this.getTime(e))}}play(){this.playing=!0}pause(){this.playing=!1,this.lastEngineTime=-1}reset(){this.setTime(0)}attachAnimation(t,e){const n=o1++;return this.animations.set(n,{animation:t,channel:e}),t.setTime(this.getTime(e)),n}detachAnimation(t){this.animations.delete(t)}update(t){this.playing&&(-1===this.lastEngineTime&&(this.lastEngineTime=t),this.setTime(this.time+(t-this.lastEngineTime)),this.lastEngineTime=t)}_setChannelTime(t,e){const n=e-t.delay;n>=t.duration*t.repeat?t.time=t.duration*t.rate:(t.time=Math.max(0,n)%t.duration,t.time*=t.rate)}}class s1{constructor(t,e,n){ww(this,"id",void 0),ww(this,"context",void 0),ww(this,"isLoaded",void 0),ww(this,"persistent",void 0),ww(this,"_loadCount",0),ww(this,"_subscribers",new Set),ww(this,"_data",void 0),ww(this,"_loader",void 0),ww(this,"_error",void 0),ww(this,"_content",void 0),this.id=t,this.context=n,this.setData(e)}subscribe(t){this._subscribers.add(t)}unsubscribe(t){this._subscribers.delete(t)}inUse(){return this._subscribers.size>0}delete(){}getData(){return this.isLoaded?this._error?Promise.reject(this._error):this._content:this._loader.then((()=>this.getData()))}setData(t,e){if(t===this._data&&!e)return;this._data=t;const n=++this._loadCount;let r=t;"string"===typeof t&&(r=sL(t)),r instanceof Promise?(this.isLoaded=!1,this._loader=r.then((t=>{this._loadCount===n&&(this.isLoaded=!0,this._error=void 0,this._content=t)})).catch((t=>{this._loadCount===n&&(this.isLoaded=!0,this._error=t||!0)}))):(this.isLoaded=!0,this._error=void 0,this._content=t);for(const i of this._subscribers)i.onChange(this.getData())}}class l1{constructor(t){let{gl:e,protocol:n}=t;ww(this,"protocol",void 0),ww(this,"_context",void 0),ww(this,"_resources",void 0),ww(this,"_consumers",void 0),ww(this,"_pruneRequest",void 0),this.protocol=n||"resource://",this._context={gl:e,resourceManager:this},this._resources={},this._consumers={},this._pruneRequest=null}contains(t){return!!t.startsWith(this.protocol)||t in this._resources}add(t){let{resourceId:e,data:n,forceUpdate:r=!1,persistent:i=!0}=t,o=this._resources[e];o?o.setData(n,r):(o=new s1(e,n,this._context),this._resources[e]=o),o.persistent=i}remove(t){const e=this._resources[t];e&&(e.delete(),delete this._resources[t])}unsubscribe(t){let{consumerId:e}=t;const n=this._consumers[e];if(n){for(const t in n){const e=n[t],r=this._resources[e.resourceId];r&&r.unsubscribe(e)}delete this._consumers[e],this.prune()}}subscribe(t){let{resourceId:e,onChange:n,consumerId:r,requestId:i="default"}=t;const{_resources:o,protocol:a}=this;e.startsWith(a)&&(e=e.replace(a,""),o[e]||this.add({resourceId:e,data:null,persistent:!1}));const s=o[e];if(this._track(r,i,s,n),s)return s.getData()}prune(){this._pruneRequest||(this._pruneRequest=setTimeout((()=>this._prune()),0))}finalize(){for(const t in this._resources)this._resources[t].delete()}_track(t,e,n,r){const i=this._consumers,o=i[t]=i[t]||{},a=o[e]||{},s=a.resourceId&&this._resources[a.resourceId];s&&(s.unsubscribe(a),this.prune()),n&&(o[e]=a,a.onChange=r,a.resourceId=n.id,n.subscribe(a))}_prune(){this._pruneRequest=null;for(const t of Object.keys(this._resources)){const e=this._resources[t];e.persistent||e.inUse()||(e.delete(),delete this._resources[t])}}}const c1=[EL],u1=["vs:DECKGL_FILTER_SIZE(inout vec3 size, VertexGeometry geometry)","vs:DECKGL_FILTER_GL_POSITION(inout vec4 position, VertexGeometry geometry)","vs:DECKGL_FILTER_COLOR(inout vec4 color, VertexGeometry geometry)","fs:DECKGL_FILTER_COLOR(inout vec4 color, FragmentGeometry geometry)"];function h1(t){const e=eP.getDefaultProgramManager(t);for(const n of c1)e.addDefaultModule(n);for(const n of u1)e.addShaderHook(n);return e}class d1{constructor(t){let{deck:e,stats:n,viewport:r,timeline:i}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};ww(this,"layers",void 0),ww(this,"context",void 0),ww(this,"resourceManager",void 0),ww(this,"_lastRenderedLayers",[]),ww(this,"_needsRedraw",!1),ww(this,"_needsUpdate",!1),ww(this,"_nextLayers",null),ww(this,"_debug",!1),ww(this,"activateViewport",(t=>{OM("layerManager.activateViewport",this,t),t&&(this.context.viewport=t)})),this.layers=[],this.resourceManager=new l1({gl:t,protocol:"deck://"}),this.context={mousePosition:null,userData:{},layerManager:this,gl:t,deck:e,programManager:t&&h1(t),stats:n||new rE({id:"deck.gl"}),viewport:r||new uI({id:"DEFAULT-INITIAL-VIEWPORT"}),timeline:i||new a1,resourceManager:this.resourceManager,onError:void 0},Object.seal(this)}finalize(){this.resourceManager.finalize();for(const t of this.layers)this._finalizeLayer(t)}needsRedraw(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{clearRedrawFlags:!1},e=this._needsRedraw;t.clearRedrawFlags&&(this._needsRedraw=!1);for(const n of this.layers){const r=n.getNeedsRedraw(t);e=e||r}return e}needsUpdate(){return this._nextLayers&&this._nextLayers!==this._lastRenderedLayers?"layers changed":this._needsUpdate}setNeedsRedraw(t){this._needsRedraw=this._needsRedraw||t}setNeedsUpdate(t){this._needsUpdate=this._needsUpdate||t}getLayers(){let{layerIds:t}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return t?this.layers.filter((e=>t.find((t=>0===e.id.indexOf(t))))):this.layers}setProps(t){"debug"in t&&(this._debug=t.debug),"userData"in t&&(this.context.userData=t.userData),"layers"in t&&(this._nextLayers=t.layers),"onError"in t&&(this.context.onError=t.onError)}setLayers(t,e){OM("layerManager.setLayers",this,e,t),this._lastRenderedLayers=t;const n=pM(t,Boolean);for(const r of n)r.context=this.context;this._updateLayers(this.layers,n)}updateLayers(){const t=this.needsUpdate();t&&(this.setNeedsRedraw("updating layers: ".concat(t)),this.setLayers(this._nextLayers||this._lastRenderedLayers,t)),this._nextLayers=null}_handleError(t,e,n){n.raiseError(e,"".concat(t," of ").concat(n))}_updateLayers(t,e){const n={};for(const o of t)n[o.id]?Gw.warn("Multiple old layers with same id ".concat(o.id))():n[o.id]=o;const r=[];this._updateSublayersRecursively(e,n,r),this._finalizeOldLayers(n);let i=!1;for(const o of r)if(o.hasUniformTransition()){i="Uniform transition in ".concat(o);break}this._needsUpdate=i,this.layers=r}_updateSublayersRecursively(t,e,n){for(const i of t){i.context=this.context;const t=e[i.id];null===t&&Gw.warn("Multiple new layers with same id ".concat(i.id))(),e[i.id]=null;let o=null;try{this._debug&&t!==i&&i.validateProps(),t?(this._transferLayerState(t,i),this._updateLayer(i)):this._initializeLayer(i),n.push(i),o=i.isComposite?i.getSubLayers():null}catch(r){this._handleError("matching",r,i)}o&&this._updateSublayersRecursively(o,e,n)}}_finalizeOldLayers(t){for(const e in t){const n=t[e];n&&this._finalizeLayer(n)}}_initializeLayer(t){try{t._initialize(),t.lifecycle=RP}catch(e){this._handleError("initialization",e,t)}}_transferLayerState(t,e){e._transferState(t),e.lifecycle=zP,e!==t&&(t.lifecycle=DP)}_updateLayer(t){try{t._update()}catch(e){this._handleError("update",e,t)}}_finalizeLayer(t){this._needsRedraw=this._needsRedraw||"finalized ".concat(t),t.lifecycle=BP;try{t._finalize(),t.lifecycle=FP}catch(e){this._handleError("finalization",e,t)}}}class f1{constructor(t){ww(this,"width",void 0),ww(this,"height",void 0),ww(this,"views",void 0),ww(this,"viewState",void 0),ww(this,"controllers",void 0),ww(this,"timeline",void 0),ww(this,"_viewports",void 0),ww(this,"_viewportMap",void 0),ww(this,"_isUpdating",void 0),ww(this,"_needsRedraw",void 0),ww(this,"_needsUpdate",void 0),ww(this,"_eventManager",void 0),ww(this,"_eventCallbacks",void 0),this.views=[],this.width=100,this.height=100,this.viewState={},this.controllers={},this.timeline=t.timeline,this._viewports=[],this._viewportMap={},this._isUpdating=!1,this._needsRedraw="First render",this._needsUpdate="Initialize",this._eventManager=t.eventManager,this._eventCallbacks={onViewStateChange:t.onViewStateChange,onInteractionStateChange:t.onInteractionStateChange},Object.seal(this),this.setProps(t)}finalize(){for(const t in this.controllers){const e=this.controllers[t];e&&e.finalize()}this.controllers={}}needsRedraw(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{clearRedrawFlags:!1};const e=this._needsRedraw;return t.clearRedrawFlags&&(this._needsRedraw=!1),e}setNeedsUpdate(t){this._needsUpdate=this._needsUpdate||t,this._needsRedraw=this._needsRedraw||t}updateViewStates(){for(const t in this.controllers){const e=this.controllers[t];e&&e.updateTransition()}}getViewports(t){return t?this._viewports.filter((e=>e.containsPixel(t))):this._viewports}getViews(){const t={};return this.views.forEach((e=>{t[e.id]=e})),t}getView(t){return this.views.find((e=>e.id===t))}getViewState(t){const e="string"===typeof t?this.getView(t):t,n=e&&this.viewState[e.getViewStateId()]||this.viewState;return e?e.filterViewState(n):n}getViewport(t){return this._viewportMap[t]}unproject(t,e){const n=this.getViewports(),r={x:t[0],y:t[1]};for(let i=n.length-1;i>=0;--i){const o=n[i];if(o.containsPixel(r)){const n=t.slice();return n[0]-=o.x,n[1]-=o.y,o.unproject(n,e)}}return null}setProps(t){t.views&&this._setViews(t.views),t.viewState&&this._setViewState(t.viewState),("width"in t||"height"in t)&&this._setSize(t.width,t.height),this._isUpdating||this._update()}_update(){this._isUpdating=!0,this._needsUpdate&&(this._needsUpdate=!1,this._rebuildViewports()),this._needsUpdate&&(this._needsUpdate=!1,this._rebuildViewports()),this._isUpdating=!1}_setSize(t,e){t===this.width&&e===this.height||(this.width=t,this.height=e,this.setNeedsUpdate("Size changed"))}_setViews(t){t=pM(t,Boolean);this._diffViews(t,this.views)&&this.setNeedsUpdate("views changed"),this.views=t}_setViewState(t){if(t){!vI(t,this.viewState,3)&&this.setNeedsUpdate("viewState changed"),this.viewState=t}else Gw.warn("missing `viewState` or `initialViewState`")()}_onViewStateChange(t,e){this._eventCallbacks.onViewStateChange&&this._eventCallbacks.onViewStateChange({...e,viewId:t})}_createController(t,e){return new(0,e.type)({timeline:this.timeline,eventManager:this._eventManager,onViewStateChange:this._onViewStateChange.bind(this,e.id),onStateChange:this._eventCallbacks.onInteractionStateChange,makeViewport:e=>{var n;return null===(n=this.getView(t.id))||void 0===n?void 0:n.makeViewport({viewState:e,width:this.width,height:this.height})}})}_updateController(t,e,n,r){const i=t.controller;if(i&&n){const o={...e,...i,id:t.id,x:n.x,y:n.y,width:n.width,height:n.height};return r&&r.constructor===i.type||(r=this._createController(t,o)),r&&r.setProps(o),r}return null}_rebuildViewports(){const{views:t}=this,e=this.controllers;this._viewports=[],this.controllers={};let n=!1;for(let r=t.length;r--;){const i=t[r],o=this.getViewState(i),a=i.makeViewport({viewState:o,width:this.width,height:this.height});let s=e[i.id];const l=Boolean(i.controller);l&&!s&&(n=!0),!n&&l||!s||(s.finalize(),s=null),this.controllers[i.id]=this._updateController(i,o,a,s),a&&this._viewports.unshift(a)}for(const r in e){const t=e[r];t&&!this.controllers[r]&&t.finalize()}this._buildViewportMap()}_buildViewportMap(){this._viewportMap={},this._viewports.forEach((t=>{t.id&&(this._viewportMap[t.id]=this._viewportMap[t.id]||t)}))}_diffViews(t,e){return t.length!==e.length||t.some(((n,r)=>!t[r].equals(e[r])))}}const p1=/([0-9]+\.?[0-9]*)(%|px)/;function m1(t){switch(typeof t){case"number":return{position:t,relative:!1};case"string":const e=p1.exec(t);if(e&&e.length>=3){const t="%"===e[2],n=parseFloat(e[1]);return{position:t?n/100:n,relative:t}}default:throw new Error("Could not parse position string ".concat(t))}}function g1(t,e){return t.relative?Math.round(t.position*e):t.position}class y1{constructor(t){ww(this,"id",void 0),ww(this,"viewportInstance",void 0),ww(this,"_x",void 0),ww(this,"_y",void 0),ww(this,"_width",void 0),ww(this,"_height",void 0),ww(this,"_padding",void 0),ww(this,"props",void 0);const{id:e,x:n=0,y:r=0,width:i="100%",height:o="100%",padding:a=null,viewportInstance:s}=t||{};lM(!s||s instanceof uI),this.viewportInstance=s,this.id=e||this.constructor.displayName||"view",this.props={...t,id:this.id},this._x=m1(n),this._y=m1(r),this._width=m1(i),this._height=m1(o),this._padding=a&&{left:m1(a.left||0),right:m1(a.right||0),top:m1(a.top||0),bottom:m1(a.bottom||0)},this.equals=this.equals.bind(this),Object.seal(this)}equals(t){return this===t||(this.viewportInstance?!!t.viewportInstance&&this.viewportInstance.equals(t.viewportInstance):this.ViewportType===t.ViewportType&&vI(this.props,t.props,2))}makeViewport(t){let{width:e,height:n,viewState:r}=t;if(this.viewportInstance)return this.viewportInstance;r=this.filterViewState(r);const i=this.getDimensions({width:e,height:n});return i.height&&i.width?new this.ViewportType({...r,...this.props,...i}):null}getViewStateId(){const{viewState:t}=this.props;return"string"===typeof t?t:(null===t||void 0===t?void 0:t.id)||this.id}filterViewState(t){if(this.props.viewState&&"object"===typeof this.props.viewState){if(!this.props.viewState.id)return this.props.viewState;const e={...t};for(const t in this.props.viewState)"id"!==t&&(e[t]=this.props.viewState[t]);return e}return t}getDimensions(t){let{width:e,height:n}=t;const r={x:g1(this._x,e),y:g1(this._y,n),width:g1(this._width,e),height:g1(this._height,n)};return this._padding&&(r.padding={left:g1(this._padding.left,e),top:g1(this._padding.top,n),right:g1(this._padding.right,e),bottom:g1(this._padding.bottom,n)}),r}get controller(){const t=this.props.controller;return t?!0===t?{type:this.ControllerType}:"function"===typeof t?{type:t}:{type:this.ControllerType,...t}:null}}const v1=()=>{},_1=2,b1=3,x1=t=>t,w1=1;class S1{constructor(t){ww(this,"getControllerState",void 0),ww(this,"props",void 0),ww(this,"propsInTransition",void 0),ww(this,"transition",void 0),ww(this,"onViewStateChange",void 0),ww(this,"onStateChange",void 0),ww(this,"_onTransitionUpdate",(t=>{const{time:e,settings:{interpolator:n,startProps:r,endProps:i,duration:o,easing:a}}=t,s=a(e/o),l=n.interpolateProps(r,i,s);this.propsInTransition=this.getControllerState({...this.props,...l}).getViewportProps(),this.onViewStateChange({viewState:this.propsInTransition,oldViewState:this.props})})),this.getControllerState=t.getControllerState,this.propsInTransition=null,this.transition=new SP(t.timeline),this.onViewStateChange=t.onViewStateChange||v1,this.onStateChange=t.onStateChange||v1}finalize(){this.transition.cancel()}getViewportInTransition(){return this.propsInTransition}processViewStateChange(t){let e=!1;const n=this.props;if(this.props=t,!n||this._shouldIgnoreViewportChange(n,t))return!1;if(this._isTransitionEnabled(t)){let r=n;if(this.transition.inProgress){const{interruption:t,endProps:e}=this.transition.settings;r={...n,...t===_1?e:this.propsInTransition||n}}this._triggerTransition(r,t),e=!0}else this.transition.cancel();return e}updateTransition(){this.transition.update()}_isTransitionEnabled(t){const{transitionDuration:e,transitionInterpolator:n}=t;return(e>0||"auto"===e)&&Boolean(n)}_isUpdateDueToCurrentTransition(t){return!(!this.transition.inProgress||!this.propsInTransition)&&this.transition.settings.interpolator.arePropsEqual(t,this.propsInTransition)}_shouldIgnoreViewportChange(t,e){return this.transition.inProgress?this.transition.settings.interruption===b1||this._isUpdateDueToCurrentTransition(e):!this._isTransitionEnabled(e)||e.transitionInterpolator.arePropsEqual(t,e)}_triggerTransition(t,e){const n=this.getControllerState(t),r=this.getControllerState(e).shortestPathFrom(n),i=e.transitionInterpolator,o=i.getDuration?i.getDuration(t,e):e.transitionDuration;if(0===o)return;const a=i.initializeProps(t,r);this.propsInTransition={};const s={duration:o,easing:e.transitionEasing||x1,interpolator:i,interruption:e.transitionInterruption||w1,startProps:a.start,endProps:a.end,onStart:e.onTransitionStart,onUpdate:this._onTransitionUpdate,onInterrupt:this._onTransitionEnd(e.onTransitionInterrupt),onEnd:this._onTransitionEnd(e.onTransitionEnd)};this.transition.start(s),this.onStateChange({inTransition:!0}),this.updateTransition()}_onTransitionEnd(t){return e=>{this.propsInTransition=null,this.onStateChange({inTransition:!1,isZooming:!1,isPanning:!1,isRotating:!1}),null===t||void 0===t||t(e)}}}class E1{constructor(t){ww(this,"_propsToCompare",void 0),ww(this,"_propsToExtract",void 0),ww(this,"_requiredProps",void 0);const{compare:e,extract:n,required:r}=t;this._propsToCompare=e,this._propsToExtract=n||e,this._requiredProps=r}arePropsEqual(t,e){for(const n of this._propsToCompare)if(!(n in t)||!(n in e)||!kT(t[n],e[n]))return!1;return!0}initializeProps(t,e){const n={},r={};for(const i of this._propsToExtract)(i in t||i in e)&&(n[i]=t[i],r[i]=e[i]);return this._checkRequiredProps(n),this._checkRequiredProps(r),{start:n,end:r}}getDuration(t,e){return e.transitionDuration}_checkRequiredProps(t){this._requiredProps&&this._requiredProps.forEach((e=>{const n=t[e];lM(Number.isFinite(n)||Array.isArray(n),"".concat(e," is required for transition"))}))}}const T1=["longitude","latitude","zoom","bearing","pitch"],M1=["longitude","latitude","zoom"];class A1 extends E1{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const e=Array.isArray(t)?t:t.transitionProps,n=Array.isArray(t)?{}:t;n.transitionProps=Array.isArray(e)?{compare:e,required:e}:e||{compare:T1,required:M1},super(n.transitionProps),ww(this,"opts",void 0),this.opts=n}initializeProps(t,e){const n=super.initializeProps(t,e),{makeViewport:r,around:i}=this.opts;if(r&&i){const o=r(t),a=r(e),s=o.unproject(i);n.start.around=i,Object.assign(n.end,{around:a.project(s),aroundPosition:s,width:e.width,height:e.height})}return n}interpolateProps(t,e,n){const r={};for(const i of this._propsToExtract)r[i]=PT(t[i]||0,e[i]||0,n);if(e.aroundPosition&&this.opts.makeViewport){const i=this.opts.makeViewport({...e,...r});Object.assign(r,i.panByPosition(e.aroundPosition,PT(t.around,e.around,n)))}return r}}const C1={transitionDuration:0},P1=t=>1-(1-t)*(1-t),k1=["wheel"],I1=["panstart","panmove","panend"],O1=["pinchstart","pinchmove","pinchend"],L1=["tripanstart","tripanmove","tripanend"],j1=["doubletap"],z1=["keydown"],R1={};class D1{constructor(t){ww(this,"props",void 0),ww(this,"state",{}),ww(this,"transitionManager",void 0),ww(this,"eventManager",void 0),ww(this,"onViewStateChange",void 0),ww(this,"onStateChange",void 0),ww(this,"makeViewport",void 0),ww(this,"_controllerState",void 0),ww(this,"_events",{}),ww(this,"_interactionState",{isDragging:!1}),ww(this,"_customEvents",[]),ww(this,"_eventStartBlocked",null),ww(this,"_panMove",!1),ww(this,"invertPan",!1),ww(this,"dragMode","rotate"),ww(this,"inertia",0),ww(this,"scrollZoom",!0),ww(this,"dragPan",!0),ww(this,"dragRotate",!0),ww(this,"doubleClickZoom",!0),ww(this,"touchZoom",!0),ww(this,"touchRotate",!1),ww(this,"keyboard",!0),this.transitionManager=new S1({...t,getControllerState:t=>new this.ControllerState(t),onViewStateChange:this._onTransition.bind(this),onStateChange:this._setInteractionState.bind(this)}),this.handleEvent=this.handleEvent.bind(this),this.eventManager=t.eventManager,this.onViewStateChange=t.onViewStateChange||(()=>{}),this.onStateChange=t.onStateChange||(()=>{}),this.makeViewport=t.makeViewport}set events(t){this.toggleEvents(this._customEvents,!1),this.toggleEvents(t,!0),this._customEvents=t,this.props&&this.setProps(this.props)}finalize(){for(const e in this._events){var t;if(this._events[e])null===(t=this.eventManager)||void 0===t||t.off(e,this.handleEvent)}this.transitionManager.finalize()}handleEvent(t){this._controllerState=void 0;const e=this._eventStartBlocked;switch(t.type){case"panstart":return!e&&this._onPanStart(t);case"panmove":return this._onPan(t);case"panend":return this._onPanEnd(t);case"pinchstart":return!e&&this._onPinchStart(t);case"pinchmove":return this._onPinch(t);case"pinchend":return this._onPinchEnd(t);case"tripanstart":return!e&&this._onTriplePanStart(t);case"tripanmove":return this._onTriplePan(t);case"tripanend":return this._onTriplePanEnd(t);case"doubletap":return this._onDoubleTap(t);case"wheel":return this._onWheel(t);case"keydown":return this._onKeyDown(t);default:return!1}}get controllerState(){return this._controllerState=this._controllerState||new this.ControllerState({makeViewport:this.makeViewport,...this.props,...this.state}),this._controllerState}getCenter(t){const{x:e,y:n}=this.props,{offsetCenter:r}=t;return[r.x-e,r.y-n]}isPointInBounds(t,e){const{width:n,height:r}=this.props;if(e&&e.handled)return!1;const i=t[0]>=0&&t[0]<=n&&t[1]>=0&&t[1]<=r;return i&&e&&e.stopPropagation(),i}isFunctionKeyPressed(t){const{srcEvent:e}=t;return Boolean(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}isDragging(){return this._interactionState.isDragging||!1}blockEvents(t){const e=setTimeout((()=>{this._eventStartBlocked===e&&(this._eventStartBlocked=null)}),t);this._eventStartBlocked=e}setProps(t){t.dragMode&&(this.dragMode=t.dragMode),this.props=t,"transitionInterpolator"in t||(t.transitionInterpolator=this._getTransitionProps().transitionInterpolator),this.transitionManager.processViewStateChange(t);const{inertia:e}=t;this.inertia=Number.isFinite(e)?e:!0===e?300:0;const{scrollZoom:n=!0,dragPan:r=!0,dragRotate:i=!0,doubleClickZoom:o=!0,touchZoom:a=!0,touchRotate:s=!1,keyboard:l=!0}=t,c=Boolean(this.onViewStateChange);this.toggleEvents(k1,c&&n),this.toggleEvents(I1,c),this.toggleEvents(O1,c&&(a||s)),this.toggleEvents(L1,c&&s),this.toggleEvents(j1,c&&o),this.toggleEvents(z1,c&&l),this.scrollZoom=n,this.dragPan=r,this.dragRotate=i,this.doubleClickZoom=o,this.touchZoom=a,this.touchRotate=s,this.keyboard=l}updateTransition(){this.transitionManager.updateTransition()}toggleEvents(t,e){this.eventManager&&t.forEach((t=>{this._events[t]!==e&&(this._events[t]=e,e?this.eventManager.on(t,this.handleEvent):this.eventManager.off(t,this.handleEvent))}))}updateViewport(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r={...t.getViewportProps(),...e},i=this.controllerState!==t;if(this.state=t.getState(),this._setInteractionState(n),i){const t=this.controllerState&&this.controllerState.getViewportProps();this.onViewStateChange&&this.onViewStateChange({viewState:r,interactionState:this._interactionState,oldViewState:t})}}_onTransition(t){this.onViewStateChange({...t,interactionState:this._interactionState})}_setInteractionState(t){Object.assign(this._interactionState,t),this.onStateChange(this._interactionState)}_onPanStart(t){const e=this.getCenter(t);if(!this.isPointInBounds(e,t))return!1;let n=this.isFunctionKeyPressed(t)||t.rightButton||!1;(this.invertPan||"pan"===this.dragMode)&&(n=!n);const r=this.controllerState[n?"panStart":"rotateStart"]({pos:e});return this._panMove=n,this.updateViewport(r,C1,{isDragging:!0}),!0}_onPan(t){return!!this.isDragging()&&(this._panMove?this._onPanMove(t):this._onPanRotate(t))}_onPanEnd(t){return!!this.isDragging()&&(this._panMove?this._onPanMoveEnd(t):this._onPanRotateEnd(t))}_onPanMove(t){if(!this.dragPan)return!1;const e=this.getCenter(t),n=this.controllerState.pan({pos:e});return this.updateViewport(n,C1,{isDragging:!0,isPanning:!0}),!0}_onPanMoveEnd(t){const{inertia:e}=this;if(this.dragPan&&e&&t.velocity){const n=this.getCenter(t),r=[n[0]+t.velocityX*e/2,n[1]+t.velocityY*e/2],i=this.controllerState.pan({pos:r}).panEnd();this.updateViewport(i,{...this._getTransitionProps(),transitionDuration:e,transitionEasing:P1},{isDragging:!1,isPanning:!0})}else{const t=this.controllerState.panEnd();this.updateViewport(t,null,{isDragging:!1,isPanning:!1})}return!0}_onPanRotate(t){if(!this.dragRotate)return!1;const e=this.getCenter(t),n=this.controllerState.rotate({pos:e});return this.updateViewport(n,C1,{isDragging:!0,isRotating:!0}),!0}_onPanRotateEnd(t){const{inertia:e}=this;if(this.dragRotate&&e&&t.velocity){const n=this.getCenter(t),r=[n[0]+t.velocityX*e/2,n[1]+t.velocityY*e/2],i=this.controllerState.rotate({pos:r}).rotateEnd();this.updateViewport(i,{...this._getTransitionProps(),transitionDuration:e,transitionEasing:P1},{isDragging:!1,isRotating:!0})}else{const t=this.controllerState.rotateEnd();this.updateViewport(t,null,{isDragging:!1,isRotating:!1})}return!0}_onWheel(t){if(!this.scrollZoom)return!1;const e=this.getCenter(t);if(!this.isPointInBounds(e,t))return!1;t.srcEvent.preventDefault();const{speed:n=.01,smooth:r=!1}=!0===this.scrollZoom?{}:this.scrollZoom,{delta:i}=t;let o=2/(1+Math.exp(-Math.abs(i*n)));i<0&&0!==o&&(o=1/o);const a=this.controllerState.zoom({pos:e,scale:o});return this.updateViewport(a,{...this._getTransitionProps({around:e}),transitionDuration:r?250:1},{isZooming:!0,isPanning:!0}),!0}_onTriplePanStart(t){const e=this.getCenter(t);if(!this.isPointInBounds(e,t))return!1;const n=this.controllerState.rotateStart({pos:e});return this.updateViewport(n,C1,{isDragging:!0}),!0}_onTriplePan(t){if(!this.touchRotate)return!1;if(!this.isDragging())return!1;const e=this.getCenter(t);e[0]-=t.deltaX;const n=this.controllerState.rotate({pos:e});return this.updateViewport(n,C1,{isDragging:!0,isRotating:!0}),!0}_onTriplePanEnd(t){if(!this.isDragging())return!1;const{inertia:e}=this;if(this.touchRotate&&e&&t.velocityY){const n=this.getCenter(t),r=[n[0],n[1]+=t.velocityY*e/2],i=this.controllerState.rotate({pos:r});this.updateViewport(i,{...this._getTransitionProps(),transitionDuration:e,transitionEasing:P1},{isDragging:!1,isRotating:!0}),this.blockEvents(e)}else{const t=this.controllerState.rotateEnd();this.updateViewport(t,null,{isDragging:!1,isRotating:!1})}return!0}_onPinchStart(t){const e=this.getCenter(t);if(!this.isPointInBounds(e,t))return!1;const n=this.controllerState.zoomStart({pos:e}).rotateStart({pos:e});return R1._startPinchRotation=t.rotation,R1._lastPinchEvent=t,this.updateViewport(n,C1,{isDragging:!0}),!0}_onPinch(t){if(!this.touchZoom&&!this.touchRotate)return!1;if(!this.isDragging())return!1;let e=this.controllerState;if(this.touchZoom){const{scale:n}=t,r=this.getCenter(t);e=e.zoom({pos:r,scale:n})}if(this.touchRotate){const{rotation:n}=t;e=e.rotate({deltaAngleX:R1._startPinchRotation-n})}return this.updateViewport(e,C1,{isDragging:!0,isPanning:this.touchZoom,isZooming:this.touchZoom,isRotating:this.touchRotate}),R1._lastPinchEvent=t,!0}_onPinchEnd(t){if(!this.isDragging())return!1;const{inertia:e}=this,{_lastPinchEvent:n}=R1;if(this.touchZoom&&e&&n&&t.scale!==n.scale){const r=this.getCenter(t);let i=this.controllerState.rotateEnd();const o=Math.log2(t.scale),a=(o-Math.log2(n.scale))/(t.deltaTime-n.deltaTime),s=Math.pow(2,o+a*e/2);i=i.zoom({pos:r,scale:s}).zoomEnd(),this.updateViewport(i,{...this._getTransitionProps({around:r}),transitionDuration:e,transitionEasing:P1},{isDragging:!1,isPanning:this.touchZoom,isZooming:this.touchZoom,isRotating:!1}),this.blockEvents(e)}else{const t=this.controllerState.zoomEnd().rotateEnd();this.updateViewport(t,null,{isDragging:!1,isPanning:!1,isZooming:!1,isRotating:!1})}return R1._startPinchRotation=null,R1._lastPinchEvent=null,!0}_onDoubleTap(t){if(!this.doubleClickZoom)return!1;const e=this.getCenter(t);if(!this.isPointInBounds(e,t))return!1;const n=this.isFunctionKeyPressed(t),r=this.controllerState.zoom({pos:e,scale:n?.5:2});return this.updateViewport(r,this._getTransitionProps({around:e}),{isZooming:!0,isPanning:!0}),this.blockEvents(100),!0}_onKeyDown(t){if(!this.keyboard)return!1;const e=this.isFunctionKeyPressed(t),{zoomSpeed:n,moveSpeed:r,rotateSpeedX:i,rotateSpeedY:o}=!0===this.keyboard?{}:this.keyboard,{controllerState:a}=this;let s;const l={};switch(t.srcEvent.code){case"Minus":s=e?a.zoomOut(n).zoomOut(n):a.zoomOut(n),l.isZooming=!0;break;case"Equal":s=e?a.zoomIn(n).zoomIn(n):a.zoomIn(n),l.isZooming=!0;break;case"ArrowLeft":e?(s=a.rotateLeft(i),l.isRotating=!0):(s=a.moveLeft(r),l.isPanning=!0);break;case"ArrowRight":e?(s=a.rotateRight(i),l.isRotating=!0):(s=a.moveRight(r),l.isPanning=!0);break;case"ArrowUp":e?(s=a.rotateUp(o),l.isRotating=!0):(s=a.moveUp(r),l.isPanning=!0);break;case"ArrowDown":e?(s=a.rotateDown(o),l.isRotating=!0):(s=a.moveDown(r),l.isPanning=!0);break;default:return!1}return this.updateViewport(s,this._getTransitionProps(),l),!0}_getTransitionProps(t){const{transition:e}=this;return e&&e.transitionInterpolator?t?{...e,transitionInterpolator:new A1({...t,...e.transitionInterpolator.opts,makeViewport:this.controllerState.makeViewport})}:e:C1}}class B1{constructor(t,e){ww(this,"_viewportProps",void 0),ww(this,"_state",void 0),this._viewportProps=this.applyConstraints(t),this._state=e}getViewportProps(){return this._viewportProps}getState(){return this._state}}class F1 extends B1{constructor(t){const{width:e,height:n,latitude:r,longitude:i,zoom:o,bearing:a=0,pitch:s=0,altitude:l=1.5,position:c=[0,0,0],maxZoom:u=20,minZoom:h=0,maxPitch:d=60,minPitch:f=0,startPanLngLat:p,startZoomLngLat:m,startRotatePos:g,startBearing:y,startPitch:v,startZoom:_,normalize:b=!0}=t;lM(Number.isFinite(i)),lM(Number.isFinite(r)),lM(Number.isFinite(o)),super({width:e,height:n,latitude:r,longitude:i,zoom:o,bearing:a,pitch:s,altitude:l,maxZoom:u,minZoom:h,maxPitch:d,minPitch:f,normalize:b,position:c},{startPanLngLat:p,startZoomLngLat:m,startRotatePos:g,startBearing:y,startPitch:v,startZoom:_}),ww(this,"makeViewport",void 0),this.makeViewport=t.makeViewport}panStart(t){let{pos:e}=t;return this._getUpdatedState({startPanLngLat:this._unproject(e)})}pan(t){let{pos:e,startPos:n}=t;const r=this.getState().startPanLngLat||this._unproject(n);if(!r)return this;const i=this.makeViewport(this.getViewportProps()).panByPosition(r,e);return this._getUpdatedState(i)}panEnd(){return this._getUpdatedState({startPanLngLat:null})}rotateStart(t){let{pos:e}=t;return this._getUpdatedState({startRotatePos:e,startBearing:this.getViewportProps().bearing,startPitch:this.getViewportProps().pitch})}rotate(t){let{pos:e,deltaAngleX:n=0,deltaAngleY:r=0}=t;const{startRotatePos:i,startBearing:o,startPitch:a}=this.getState();if(!i||void 0===o||void 0===a)return this;let s;return s=e?this._getNewRotation(e,i,a,o):{bearing:o+n,pitch:a+r},this._getUpdatedState(s)}rotateEnd(){return this._getUpdatedState({startBearing:null,startPitch:null})}zoomStart(t){let{pos:e}=t;return this._getUpdatedState({startZoomLngLat:this._unproject(e),startZoom:this.getViewportProps().zoom})}zoom(t){let{pos:e,startPos:n,scale:r}=t,{startZoom:i,startZoomLngLat:o}=this.getState();if(o||(i=this.getViewportProps().zoom,o=this._unproject(n)||this._unproject(e)),!o)return this;const{maxZoom:a,minZoom:s}=this.getViewportProps();let l=i+Math.log2(r);l=CT(l,s,a);const c=this.makeViewport({...this.getViewportProps(),zoom:l});return this._getUpdatedState({zoom:l,...c.panByPosition(o,e)})}zoomEnd(){return this._getUpdatedState({startZoomLngLat:null,startZoom:null})}zoomIn(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:2;return this._zoomFromCenter(t)}zoomOut(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:2;return this._zoomFromCenter(1/t)}moveLeft(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:100;return this._panFromCenter([t,0])}moveRight(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:100;return this._panFromCenter([-t,0])}moveUp(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:100;return this._panFromCenter([0,t])}moveDown(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:100;return this._panFromCenter([0,-t])}rotateLeft(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:15;return this._getUpdatedState({bearing:this.getViewportProps().bearing-t})}rotateRight(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:15;return this._getUpdatedState({bearing:this.getViewportProps().bearing+t})}rotateUp(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:10;return this._getUpdatedState({pitch:this.getViewportProps().pitch+t})}rotateDown(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:10;return this._getUpdatedState({pitch:this.getViewportProps().pitch-t})}shortestPathFrom(t){const e=t.getViewportProps(),n={...this.getViewportProps()},{bearing:r,longitude:i}=n;return Math.abs(r-e.bearing)>180&&(n.bearing=r<0?r+360:r-360),Math.abs(i-e.longitude)>180&&(n.longitude=i<0?i+360:i-360),n}applyConstraints(t){const{maxZoom:e,minZoom:n,zoom:r}=t;t.zoom=CT(r,n,e);const{maxPitch:i,minPitch:o,pitch:a}=t;t.pitch=CT(a,o,i);const{normalize:s=!0}=t;return s&&Object.assign(t,function(t){const{width:e,height:n,pitch:r=0}=t;let{longitude:i,latitude:o,zoom:a,bearing:s=0}=t;(i<-180||i>180)&&(i=jk(i+180,360)-180),(s<-180||s>180)&&(s=jk(s+180,360)-180);const l=Rk(n/512);if(a<=l)a=l,o=0;else{const t=n/2/Math.pow(2,a),e=Zk([0,t])[1];if(o<e)o=e;else{const e=Zk([0,512-t])[1];o>e&&(o=e)}}return{width:e,height:n,longitude:i,latitude:o,zoom:a,pitch:r,bearing:s}}(t)),t}_zoomFromCenter(t){const{width:e,height:n}=this.getViewportProps();return this.zoom({pos:[e/2,n/2],scale:t})}_panFromCenter(t){const{width:e,height:n}=this.getViewportProps();return this.pan({startPos:[e/2,n/2],pos:[e/2+t[0],n/2+t[1]]})}_getUpdatedState(t){return new this.constructor({makeViewport:this.makeViewport,...this.getViewportProps(),...this.getState(),...t})}_unproject(t){const e=this.makeViewport(this.getViewportProps());return t&&e.unproject(t)}_getNewRotation(t,e,n,r){const i=t[0]-e[0],o=t[1]-e[1],a=t[1],s=e[1],{width:l,height:c}=this.getViewportProps(),u=i/l;let h=0;o>0?Math.abs(c-s)>5&&(h=o/(s-c)*1.2):o<0&&s>5&&(h=1-a/s),h=CT(h,-1,1);const{minPitch:d,maxPitch:f}=this.getViewportProps();let p=n;return h>0?p=n+h*(f-n):h<0&&(p=n-h*(d-n)),{pitch:p,bearing:r+180*u}}}class N1 extends D1{constructor(){super(...arguments),ww(this,"ControllerState",F1),ww(this,"transition",{transitionDuration:300,transitionInterpolator:new A1({transitionProps:{compare:["longitude","latitude","zoom","bearing","pitch","position"],required:["longitude","latitude","zoom"]}})}),ww(this,"dragMode","pan")}setProps(t){t.position=t.position||[0,0,0];const e=this.props;super.setProps(t);(!e||e.height!==t.height)&&this.updateViewport(new this.ControllerState({makeViewport:this.makeViewport,...t,...this.state}))}}class U1 extends y1{get ViewportType(){return hI}get ControllerType(){return N1}}ww(U1,"displayName","MapView");const V1=[255,255,255],W1=1;let G1=0;class q1{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};ww(this,"id",void 0),ww(this,"color",void 0),ww(this,"intensity",void 0),ww(this,"type","ambient");const{color:e=V1}=t,{intensity:n=W1}=t;this.id=t.id||"ambient-".concat(G1++),this.color=e,this.intensity=n}}const H1=[255,255,255],Z1=1,X1=[0,0,-1];let Y1=0;class K1{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};ww(this,"id",void 0),ww(this,"color",void 0),ww(this,"intensity",void 0),ww(this,"type","directional"),ww(this,"direction",void 0),ww(this,"shadow",void 0);const{color:e=H1}=t,{intensity:n=Z1}=t,{direction:r=X1}=t,{_shadow:i=!1}=t;this.id=t.id||"directional-".concat(Y1++),this.color=e,this.intensity=n,this.type="directional",this.direction=new QT(r).normalize().toArray(),this.shadow=i}getProjectedLight(t){return this}}class $1{constructor(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{id:"pass"};ww(this,"id",void 0),ww(this,"gl",void 0),ww(this,"props",void 0);const{id:n}=e;this.id=n,this.gl=t,this.props={...e}}setProps(t){Object.assign(this.props,t)}render(t){}cleanup(){}}class J1 extends $1{constructor(){super(...arguments),ww(this,"_lastRenderIndex",-1)}render(t){return VS(this.gl,{framebuffer:t.target}),this._drawLayers(t)}_drawLayers(t){const{target:e,moduleParameters:n,viewports:r,views:i,onViewportActive:o,clearStack:a=!0,clearCanvas:s=!0}=t;t.pass=t.pass||"unknown";const l=this.gl;s&&function(t,e){const n=e?e.width:t.drawingBufferWidth,r=e?e.height:t.drawingBufferHeight;VS(t,{viewport:[0,0,n,r]}),t.clear(16640)}(l,e),a&&(this._lastRenderIndex=-1);const c=[];for(const u of r){const r=i&&i[u.id];null===o||void 0===o||o(u);const a=this._getDrawLayerParams(u,t),s=u.subViewports||[u];for(const i of s){const o=this._drawLayersInViewport(l,{target:e,moduleParameters:n,viewport:i,view:r,pass:t.pass,layers:t.layers},a);c.push(o)}}return c}_getDrawLayerParams(t,e){let{layers:n,pass:r,isPicking:i=!1,layerFilter:o,cullRect:a,effects:s,moduleParameters:l}=e,c=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const u=[],h=Q1(this._lastRenderIndex+1),d={layer:n[0],viewport:t,isPicking:i,renderPass:r,cullRect:a},f={};for(let p=0;p<n.length;p++){const e=n[p],i=this._shouldDrawLayer(e,d,o,f),a={shouldDrawLayer:i};i&&!c&&(a.layerRenderIndex=h(e,i),a.moduleParameters=this._getModuleParameters(e,s,r,l),a.layerParameters=this.getLayerParameters(e,p,t)),u[p]=a}return u}_drawLayersInViewport(t,e,n){let{layers:r,moduleParameters:i,pass:o,target:a,viewport:s,view:l}=e;const c=function(t,e){let{moduleParameters:n,target:r,viewport:i}=e;const o=r&&"default-framebuffer"!==r.id,a=n&&n.devicePixelRatio||qS(t),s=o?r.height:t.drawingBufferHeight,l=i;return[l.x*a,s-(l.y+l.height)*a,l.width*a,l.height*a]}(t,{moduleParameters:i,target:a,viewport:s});if(l&&l.props.clear){const e=!0===l.props.clear?{color:!0,depth:!0}:l.props.clear;GS(t,{scissorTest:!0,scissor:c},(()=>UE(t,e)))}const u={totalCount:r.length,visibleCount:0,compositeCount:0,pickableCount:0};VS(t,{viewport:c});for(let d=0;d<r.length;d++){const t=r[d],{shouldDrawLayer:e,layerRenderIndex:i,moduleParameters:a,layerParameters:l}=n[d];if(e&&t.props.pickable&&u.pickableCount++,t.isComposite)u.compositeCount++;else if(e){u.visibleCount++,this._lastRenderIndex=Math.max(this._lastRenderIndex,i),a.viewport=s;try{t._drawLayer({moduleParameters:a,uniforms:{layerIndex:i},parameters:l})}catch(h){t.raiseError(h,"drawing ".concat(t," to ").concat(o))}}}return u}shouldDrawLayer(t){return!0}getModuleParameters(t,e){return null}getLayerParameters(t,e,n){return t.props.parameters}_shouldDrawLayer(t,e,n,r){if(!(t.props.visible&&this.shouldDrawLayer(t)))return!1;e.layer=t;let i=t.parent;for(;i;){if(!i.props.visible||!i.filterSubLayer(e))return!1;e.layer=i,i=i.parent}if(n){const t=e.layer.id;if(t in r||(r[t]=n(e)),!r[t])return!1}return t.activateViewport(e.viewport),!0}_getModuleParameters(t,e,n,r){var i;const o=Object.assign(Object.create((null===(i=t.internalState)||void 0===i?void 0:i.propsInTransition)||t.props),{autoWrapLongitude:t.wrapLongitude,viewport:t.context.viewport,mousePosition:t.context.mousePosition,pickingActive:0,devicePixelRatio:qS(this.gl)});if(e)for(const s of e){var a;Object.assign(o,null===(a=s.getModuleParameters)||void 0===a?void 0:a.call(s,t))}return Object.assign(o,this.getModuleParameters(t,e),r)}}function Q1(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n={},r=(i,o)=>{const a=i.props._offset,s=i.id,l=i.parent&&i.parent.id;let c;if(l&&!(l in e)&&r(i.parent,!1),l in n){const t=n[l]=n[l]||Q1(e[l],e);c=t(i,o),n[s]=t}else Number.isFinite(a)?(c=a+(e[l]||0),n[s]=null):c=t;return o&&c>=t&&(t=c+1),e[s]=c,c};return r}class t2 extends J1{constructor(t,e){super(t,e),ww(this,"shadowMap",void 0),ww(this,"depthBuffer",void 0),ww(this,"fbo",void 0),this.shadowMap=new zE(t,{width:1,height:1,parameters:{10241:9729,10240:9729,10242:33071,10243:33071}}),this.depthBuffer=new BE(t,{format:33189,width:1,height:1}),this.fbo=new KE(t,{id:"shadowmap",width:1,height:1,attachments:{36064:this.shadowMap,36096:this.depthBuffer}})}render(t){const e=this.fbo;GS(this.gl,{depthRange:[0,1],depthTest:!0,blend:!1,clearColor:[1,1,1,1]},(()=>{const n=t.viewports[0],r=qS(this.gl),i=n.width*r,o=n.height*r;i===e.width&&o===e.height||e.resize({width:i,height:o}),super.render({...t,target:e,pass:"shadow"})}))}shouldDrawLayer(t){return!1!==t.props.shadowEnabled}getModuleParameters(){return{drawToShadowMap:!0}}delete(){this.fbo&&(this.fbo.delete(),this.fbo=null),this.shadowMap&&(this.shadowMap.delete(),this.shadowMap=null),this.depthBuffer&&(this.depthBuffer.delete(),this.depthBuffer=null)}}const e2=PM((function(t){let{viewport:e,center:n}=t;return new Pk(e.viewProjectionMatrix).invert().transform(n)})),n2=PM((function(t){let{viewport:e,shadowMatrices:n}=t;const r=[],i=e.pixelUnprojectionMatrix,o=e.isGeospatial?void 0:1,a=[[0,0,o],[e.width,0,o],[0,e.height,o],[e.width,e.height,o],[0,0,-1],[e.width,0,-1],[0,e.height,-1],[e.width,e.height,-1]].map((t=>function(t,e){const[n,r,i]=t,o=nI([n,r,i],e);if(Number.isFinite(i))return o;return[o[0],o[1],0]}(t,i)));for(const s of n){const t=s.clone().translate(new QT(e.center).negate()),n=a.map((e=>t.transform(e))),i=(new Pk).ortho({left:Math.min(...n.map((t=>t[0]))),right:Math.max(...n.map((t=>t[0]))),bottom:Math.min(...n.map((t=>t[1]))),top:Math.max(...n.map((t=>t[1]))),near:Math.min(...n.map((t=>-t[2]))),far:Math.max(...n.map((t=>-t[2])))});r.push(i.multiplyRight(s))}return r})),r2=[0,0,0,1],i2=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,0];const o2={name:"shadow",dependencies:[EL],vs:"\nconst int max_lights = 2;\nuniform mat4 shadow_uViewProjectionMatrices[max_lights];\nuniform vec4 shadow_uProjectCenters[max_lights];\nuniform bool shadow_uDrawShadowMap;\nuniform bool shadow_uUseShadowMap;\nuniform int shadow_uLightId;\nuniform float shadow_uLightCount;\n\nvarying vec3 shadow_vPosition[max_lights];\n\nvec4 shadow_setVertexPosition(vec4 position_commonspace) {\n  if (shadow_uDrawShadowMap) {\n    return project_common_position_to_clipspace(position_commonspace, shadow_uViewProjectionMatrices[shadow_uLightId], shadow_uProjectCenters[shadow_uLightId]);\n  }\n  if (shadow_uUseShadowMap) {\n    for (int i = 0; i < max_lights; i++) {\n      if(i < int(shadow_uLightCount)) {\n        vec4 shadowMap_position = project_common_position_to_clipspace(position_commonspace, shadow_uViewProjectionMatrices[i], shadow_uProjectCenters[i]);\n        shadow_vPosition[i] = (shadowMap_position.xyz / shadowMap_position.w + 1.0) / 2.0;\n      }\n    }\n  }\n  return gl_Position;\n}\n",fs:"\nconst int max_lights = 2;\nuniform bool shadow_uDrawShadowMap;\nuniform bool shadow_uUseShadowMap;\nuniform sampler2D shadow_uShadowMap0;\nuniform sampler2D shadow_uShadowMap1;\nuniform vec4 shadow_uColor;\nuniform float shadow_uLightCount;\n\nvarying vec3 shadow_vPosition[max_lights];\n\nconst vec4 bitPackShift = vec4(1.0, 255.0, 65025.0, 16581375.0);\nconst vec4 bitUnpackShift = 1.0 / bitPackShift;\nconst vec4 bitMask = vec4(1.0 / 255.0, 1.0 / 255.0, 1.0 / 255.0,  0.0);\n\nfloat shadow_getShadowWeight(vec3 position, sampler2D shadowMap) {\n  vec4 rgbaDepth = texture2D(shadowMap, position.xy);\n\n  float z = dot(rgbaDepth, bitUnpackShift);\n  return smoothstep(0.001, 0.01, position.z - z);\n}\n\nvec4 shadow_filterShadowColor(vec4 color) {\n  if (shadow_uDrawShadowMap) {\n    vec4 rgbaDepth = fract(gl_FragCoord.z * bitPackShift);\n    rgbaDepth -= rgbaDepth.gbaa * bitMask;\n    return rgbaDepth;\n  }\n  if (shadow_uUseShadowMap) {\n    float shadowAlpha = 0.0;\n    shadowAlpha += shadow_getShadowWeight(shadow_vPosition[0], shadow_uShadowMap0);\n    if(shadow_uLightCount > 1.0) {\n      shadowAlpha += shadow_getShadowWeight(shadow_vPosition[1], shadow_uShadowMap1);\n    }\n    shadowAlpha *= shadow_uColor.a / shadow_uLightCount;\n    float blendedAlpha = shadowAlpha + color.a * (1.0 - shadowAlpha);\n\n    return vec4(\n      mix(color.rgb, shadow_uColor.rgb, shadowAlpha / blendedAlpha),\n      blendedAlpha\n    );\n  }\n  return color;\n}\n",inject:{"vs:DECKGL_FILTER_GL_POSITION":"\n    position = shadow_setVertexPosition(geometry.position);\n    ","fs:DECKGL_FILTER_COLOR":"\n    color = shadow_filterShadowColor(color);\n    "},getUniforms:function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return"viewport"in t&&(t.drawToShadowMap||t.shadowMaps&&t.shadowMaps.length>0)?function(t,e){const{shadowEnabled:n=!0}=t;if(!n||!t.shadowMatrices||!t.shadowMatrices.length)return{shadow_uDrawShadowMap:!1,shadow_uUseShadowMap:!1};const r={shadow_uDrawShadowMap:Boolean(t.drawToShadowMap),shadow_uUseShadowMap:!!t.shadowMaps&&t.shadowMaps.length>0,shadow_uColor:t.shadowColor||r2,shadow_uLightId:t.shadowLightId||0,shadow_uLightCount:t.shadowMatrices.length},i=e2({viewport:t.viewport,center:e.project_uCenter}),o=[],a=n2({shadowMatrices:t.shadowMatrices,viewport:t.viewport}).slice();for(let s=0;s<t.shadowMatrices.length;s++){const n=a[s],r=n.clone().translate(new QT(t.viewport.center).negate());e.project_uCoordinateSystem===qw.LNGLAT&&e.project_uProjectionMode===Hw.WEB_MERCATOR?(a[s]=r,o[s]=i):(a[s]=n.clone().multiplyRight(i2),o[s]=r.transform(i))}for(let s=0;s<a.length;s++)r["shadow_uViewProjectionMatrices[".concat(s,"]")]=a[s],r["shadow_uProjectCenters[".concat(s,"]")]=o[s],t.shadowMaps&&t.shadowMaps.length>0?r["shadow_uShadowMap".concat(s)]=t.shadowMaps[s]:r["shadow_uShadowMap".concat(s)]=t.dummyShadowMap;return r}(t,e):{}}},a2={color:[255,255,255],intensity:1},s2=[{color:[255,255,255],intensity:1,direction:[-1,3,-1]},{color:[255,255,255],intensity:.9,direction:[1,-8,-2.5]}],l2=[0,0,0,200/255];class c2{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};ww(this,"id","lighting-effect"),ww(this,"props",void 0),ww(this,"shadowColor",l2),ww(this,"shadow",void 0),ww(this,"ambientLight",void 0),ww(this,"directionalLights",void 0),ww(this,"pointLights",void 0),ww(this,"shadowPasses",[]),ww(this,"shadowMaps",[]),ww(this,"dummyShadowMap",null),ww(this,"programManager",void 0),ww(this,"shadowMatrices",void 0),this.setProps(t)}setProps(t){this.ambientLight=null,this.directionalLights=[],this.pointLights=[];for(const e in t){const n=t[e];switch(n.type){case"ambient":this.ambientLight=n;break;case"directional":this.directionalLights.push(n);break;case"point":this.pointLights.push(n)}}this._applyDefaultLights(),this.shadow=this.directionalLights.some((t=>t.shadow)),this.props=t}preRender(t,e){let{layers:n,layerFilter:r,viewports:i,onViewportActive:o,views:a}=e;if(this.shadow){this.shadowMatrices=this._calculateMatrices(),0===this.shadowPasses.length&&this._createShadowPasses(t),this.programManager||(this.programManager=eP.getDefaultProgramManager(t),o2&&this.programManager.addDefaultModule(o2)),this.dummyShadowMap||(this.dummyShadowMap=new zE(t,{width:1,height:1}));for(let t=0;t<this.shadowPasses.length;t++){this.shadowPasses[t].render({layers:n,layerFilter:r,viewports:i,onViewportActive:o,views:a,moduleParameters:{shadowLightId:t,dummyShadowMap:this.dummyShadowMap,shadowMatrices:this.shadowMatrices}})}}}getModuleParameters(t){const e=this.shadow?{shadowMaps:this.shadowMaps,dummyShadowMap:this.dummyShadowMap,shadowColor:this.shadowColor,shadowMatrices:this.shadowMatrices}:{};return e.lightSources={ambientLight:this.ambientLight,directionalLights:this.directionalLights.map((e=>e.getProjectedLight({layer:t}))),pointLights:this.pointLights.map((e=>e.getProjectedLight({layer:t})))},e}cleanup(){for(const t of this.shadowPasses)t.delete();this.shadowPasses.length=0,this.shadowMaps.length=0,this.dummyShadowMap&&(this.dummyShadowMap.delete(),this.dummyShadowMap=null),this.shadow&&this.programManager&&(this.programManager.removeDefaultModule(o2),this.programManager=null)}_calculateMatrices(){const t=[];for(const e of this.directionalLights){const n=(new Pk).lookAt({eye:new QT(e.direction).negate()});t.push(n)}return t}_createShadowPasses(t){for(let e=0;e<this.directionalLights.length;e++){const n=new t2(t);this.shadowPasses[e]=n,this.shadowMaps[e]=n.shadowMap}}_applyDefaultLights(){const{ambientLight:t,pointLights:e,directionalLights:n}=this;t||0!==e.length||0!==n.length||(this.ambientLight=new q1(a2),this.directionalLights.push(new K1(s2[0]),new K1(s2[1])))}}const u2=new c2;class h2{constructor(){ww(this,"effects",void 0),ww(this,"_resolvedEffects",[]),ww(this,"_defaultEffects",[]),ww(this,"_needsRedraw",void 0),this.effects=[],this._needsRedraw="Initial render",this._setEffects([])}addDefaultEffect(t){const e=this._defaultEffects;if(!e.find((e=>e.id===t.id))){const n=e.findIndex((e=>function(t,e){var n,r;return(null!==(n=t.order)&&void 0!==n?n:1/0)-(null!==(r=e.order)&&void 0!==r?r:1/0)}(e,t)>0));n<0?e.push(t):e.splice(n,0,t),this._setEffects(this.effects)}}setProps(t){"effects"in t&&(vI(t.effects,this.effects,1)||this._setEffects(t.effects))}needsRedraw(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{clearRedrawFlags:!1};const e=this._needsRedraw;return t.clearRedrawFlags&&(this._needsRedraw=!1),e}getEffects(){return this._resolvedEffects}_setEffects(t){const e={};for(const r of this.effects)e[r.id]=r;const n=[];for(const r of t){const t=e[r.id];t&&t!==r?t.setProps?(t.setProps(r.props),n.push(t)):(t.cleanup(),n.push(r)):n.push(r),delete e[r.id]}for(const r in e)e[r].cleanup();this.effects=n,this._resolvedEffects=n.concat(this._defaultEffects),t.some((t=>t instanceof c2))||this._resolvedEffects.push(u2),this._needsRedraw="effects changed"}finalize(){for(const t of this._resolvedEffects)t.cleanup();this.effects.length=0,this._resolvedEffects.length=0,this._defaultEffects.length=0}}class d2 extends J1{shouldDrawLayer(t){const{operation:e}=t.props;return e.includes("draw")||e.includes("terrain")}}const f2={blendFunc:[1,0,32771,0],blendEquation:32774};class p2 extends J1{constructor(){super(...arguments),ww(this,"pickZ",void 0),ww(this,"_colorEncoderState",null)}render(t){return"pickingFBO"in t?this._drawPickingBuffer(t):super.render(t)}_drawPickingBuffer(t){let{layers:e,layerFilter:n,views:r,viewports:i,onViewportActive:o,pickingFBO:a,deviceRect:{x:s,y:l,width:c,height:u},cullRect:h,effects:d,pass:f="picking",pickZ:p,moduleParameters:m}=t;const g=this.gl;this.pickZ=p;const y=this._resetColorEncoder(p),v=GS(g,{scissorTest:!0,scissor:[s,l,c,u],clearColor:[0,0,0,0],depthMask:!0,depthTest:!0,depthRange:[0,1],colorMask:[!0,!0,!0,!0],...f2,blend:!p},(()=>super.render({target:a,layers:e,layerFilter:n,views:r,viewports:i,onViewportActive:o,cullRect:h,effects:null===d||void 0===d?void 0:d.filter((t=>t.useInPicking)),pass:f,isPicking:!0,moduleParameters:m})));this._colorEncoderState=null;return{decodePickingColor:y&&m2.bind(null,y),stats:v}}shouldDrawLayer(t){const{pickable:e,operation:n}=t.props;return e&&n.includes("draw")||n.includes("terrain")||n.includes("mask")}getModuleParameters(){return{pickingActive:1,pickingAttribute:this.pickZ,lightSources:{}}}getLayerParameters(t,e,n){const r={...t.props.parameters},{pickable:i,operation:o}=t.props;return this._colorEncoderState?i&&o.includes("draw")&&(Object.assign(r,f2),r.blend=!0,r.blendColor=function(t,e,n){const{byLayer:r,byAlpha:i}=t;let o,a=r.get(e);a?(a.viewports.push(n),o=a.a):(o=r.size+1,o<=255?(a={a:o,layer:e,viewports:[n]},r.set(e,a),i[o]=a):(Gw.warn("Too many pickable layers, only picking the first 255")(),o=0));return[0,0,0,o/255]}(this._colorEncoderState,t,n)):r.blend=!1,o.includes("terrain")&&(r.blend=!1),r}_resetColorEncoder(t){return this._colorEncoderState=t?null:{byLayer:new Map,byAlpha:[]},this._colorEncoderState}}function m2(t,e){const n=t.byAlpha[e[3]];return n&&{pickedLayer:n.layer,pickedViewports:n.viewports,pickedObjectIndex:n.layer.decodePickingColor(e)}}class g2{constructor(t){ww(this,"gl",void 0),ww(this,"layerFilter",void 0),ww(this,"drawPickingColors",void 0),ww(this,"drawLayersPass",void 0),ww(this,"pickLayersPass",void 0),ww(this,"renderCount",void 0),ww(this,"_needsRedraw",void 0),ww(this,"renderBuffers",void 0),ww(this,"lastPostProcessEffect",void 0),this.gl=t,this.layerFilter=null,this.drawPickingColors=!1,this.drawLayersPass=new d2(t),this.pickLayersPass=new p2(t),this.renderCount=0,this._needsRedraw="Initial render",this.renderBuffers=[],this.lastPostProcessEffect=null}setProps(t){this.layerFilter!==t.layerFilter&&(this.layerFilter=t.layerFilter,this._needsRedraw="layerFilter changed"),this.drawPickingColors!==t.drawPickingColors&&(this.drawPickingColors=t.drawPickingColors,this._needsRedraw="drawPickingColors changed")}renderLayers(t){if(!t.viewports.length)return;const e=this.drawPickingColors?this.pickLayersPass:this.drawLayersPass,n={layerFilter:this.layerFilter,isPicking:this.drawPickingColors,...t,target:t.target||KE.getDefaultFramebuffer(this.gl)};n.effects&&this._preRender(n.effects,n);const r=this.lastPostProcessEffect?this.renderBuffers[0]:n.target,i=e.render({...n,target:r});n.effects&&this._postRender(n.effects,n),this.renderCount++,OM("deckRenderer.renderLayers",this,i,t)}needsRedraw(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{clearRedrawFlags:!1};const e=this._needsRedraw;return t.clearRedrawFlags&&(this._needsRedraw=!1),e}finalize(){const{renderBuffers:t}=this;for(const e of t)e.delete();t.length=0}_preRender(t,e){this.lastPostProcessEffect=null,e.preRenderStats=e.preRenderStats||{};for(const n of t)e.preRenderStats[n.id]=n.preRender(this.gl,e),n.postRender&&(this.lastPostProcessEffect=n.id);this.lastPostProcessEffect&&this._resizeRenderBuffers()}_resizeRenderBuffers(){const{renderBuffers:t}=this;0===t.length&&t.push(new KE(this.gl),new KE(this.gl));for(const e of t)e.resize()}_postRender(t,e){const{renderBuffers:n}=this,r={...e,inputBuffer:n[0],swapBuffer:n[1],target:null};for(const i of t)if(i.postRender){if(i.id===this.lastPostProcessEffect){r.target=e.target,i.postRender(this.gl,r);break}const t=i.postRender(this.gl,r);r.inputBuffer=t,r.swapBuffer=t===n[0]?n[1]:n[0]}}}const y2={pickedColor:null,pickedObjectIndex:-1};function v2(t){let{pickedColors:e,decodePickingColor:n,deviceX:r,deviceY:i,deviceRadius:o,deviceRect:a}=t;const{x:s,y:l,width:c,height:u}=a;let h=o*o,d=-1,f=0;for(let p=0;p<u;p++){const t=p+l-i,n=t*t;if(n>h)f+=4*c;else for(let i=0;i<c;i++){if(e[f+3]-1>=0){const t=i+s-r,e=t*t+n;e<=h&&(h=e,d=f)}f+=4}}if(d>=0){const t=e.slice(d,d+4),r=n(t);if(r){const e=Math.floor(d/4/c),n=d/4-e*c;return{...r,pickedColor:t,pickedX:s+n,pickedY:l+e}}Gw.error("Picked non-existent layer. Is picking buffer corrupt?")()}return y2}function _2(t){let e,{pickInfo:n,viewports:r,pixelRatio:i,x:o,y:a,z:s}=t,l=r[0];if(r.length>1&&(l=function(t,e){for(let n=t.length-1;n>=0;n--){const r=t[n];if(r.containsPixel(e))return r}return t[0]}((null===n||void 0===n?void 0:n.pickedViewports)||r,{x:o,y:a})),l){const t=[o-l.x,a-l.y];void 0!==s&&(t[2]=s),e=l.unproject(t)}return{color:null,layer:null,viewport:l,index:-1,picked:!1,x:o,y:a,pixel:[o,a],coordinate:e,devicePixel:n&&"pickedX"in n?[n.pickedX,n.pickedY]:void 0,pixelRatio:i}}function b2(t){const{pickInfo:e,lastPickedInfo:n,mode:r,layers:i}=t,{pickedColor:o,pickedLayer:a,pickedObjectIndex:s}=e,l=a?[a]:[];if("hover"===r){const t=n.index,e=n.layerId,r=a?a.props.id:null;if(r!==e||s!==t){if(r!==e){const t=i.find((t=>t.props.id===e));t&&l.unshift(t)}n.layerId=r,n.index=s,n.info=null}}const c=_2(t),u=new Map;return u.set(null,c),l.forEach((t=>{let e={...c};t===a&&(e.color=o,e.index=s,e.picked=!0),e=x2({layer:t,info:e,mode:r});const i=e.layer;t===a&&"hover"===r&&(n.info=e),u.set(i.id,e),"hover"===r&&i.updateAutoHighlight(e)})),u}function x2(t){let{layer:e,info:n,mode:r}=t;for(;e&&n;){const t=n.layer||null;n.sourceLayer=t,n.layer=e,n=e.getPickingInfo({info:n,mode:r,sourceLayer:t}),e=e.parent}return n}class w2{constructor(t){ww(this,"gl",void 0),ww(this,"pickingFBO",void 0),ww(this,"depthFBO",void 0),ww(this,"pickLayersPass",void 0),ww(this,"layerFilter",void 0),ww(this,"lastPickedInfo",void 0),ww(this,"_pickable",!0),this.gl=t,this.pickLayersPass=new p2(t),this.lastPickedInfo={index:-1,layerId:null,info:null}}setProps(t){"layerFilter"in t&&(this.layerFilter=t.layerFilter),"_pickable"in t&&(this._pickable=t._pickable)}finalize(){this.pickingFBO&&this.pickingFBO.delete(),this.depthFBO&&(this.depthFBO.color.delete(),this.depthFBO.delete())}pickObject(t){return this._pickClosestObject(t)}pickObjects(t){return this._pickVisibleObjects(t)}getLastPickedObject(t){let{x:e,y:n,layers:r,viewports:i}=t,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.lastPickedInfo.info;const a=o&&o.layer&&o.layer.id,s=o&&o.viewport&&o.viewport.id,l=a?r.find((t=>t.id===a)):null,c=s&&i.find((t=>t.id===s))||i[0],u=c&&c.unproject([e-c.x,n-c.y]),h={x:e,y:n,viewport:c,coordinate:u,layer:l};return{...o,...h}}_resizeBuffer(){var t,e;const{gl:n}=this;if(!this.pickingFBO&&(this.pickingFBO=new KE(n),KE.isSupported(n,{colorBufferFloat:!0}))){const t=new KE(n);t.attach({36064:new zE(n,{format:tS(n)?34836:6408,type:5126})}),this.depthFBO=t}null===(t=this.pickingFBO)||void 0===t||t.resize({width:n.canvas.width,height:n.canvas.height}),null===(e=this.depthFBO)||void 0===e||e.resize({width:n.canvas.width,height:n.canvas.height})}_getPickable(t){if(!1===this._pickable)return null;const e=t.filter((t=>this.pickLayersPass.shouldDrawLayer(t)&&!t.isComposite));return e.length?e:null}_pickClosestObject(t){let{layers:e,views:n,viewports:r,x:i,y:o,radius:a=0,depth:s=1,mode:l="query",unproject3D:c,onViewportActive:u,effects:h}=t;const d=this._getPickable(e),f=qS(this.gl);if(!d)return{result:[],emptyInfo:_2({viewports:r,x:i,y:o,pixelRatio:f})};this._resizeBuffer();const p=HS(this.gl,[i,o],!0),m=[p.x+Math.floor(p.width/2),p.y+Math.floor(p.height/2)],g=Math.round(a*f),{width:y,height:v}=this.pickingFBO,_=this._getPickingRect({deviceX:m[0],deviceY:m[1],deviceRadius:g,deviceWidth:y,deviceHeight:v}),b={x:i-a,y:o-a,width:2*a+1,height:2*a+1};let x;const w=[],S=new Set;for(let E=0;E<s;E++){let t,e;if(_){t=v2({...this._drawAndSample({layers:d,views:n,viewports:r,onViewportActive:u,deviceRect:_,cullRect:b,effects:h,pass:"picking:".concat(l)}),deviceX:m[0],deviceY:m[1],deviceRadius:g,deviceRect:_})}else t={pickedColor:null,pickedObjectIndex:-1};if(t.pickedLayer&&c&&this.depthFBO){const{pickedColors:i}=this._drawAndSample({layers:[t.pickedLayer],views:n,viewports:r,onViewportActive:u,deviceRect:{x:t.pickedX,y:t.pickedY,width:1,height:1},cullRect:b,effects:h,pass:"picking:".concat(l,":z")},!0);i[3]&&(e=i[0])}t.pickedLayer&&E+1<s&&(S.add(t.pickedLayer),t.pickedLayer.disablePickingIndex(t.pickedObjectIndex)),x=b2({pickInfo:t,lastPickedInfo:this.lastPickedInfo,mode:l,layers:d,viewports:r,x:i,y:o,z:e,pixelRatio:f});for(const n of x.values())n.layer&&w.push(n);if(!t.pickedColor)break}for(const E of S)E.restorePickingColors();return{result:w,emptyInfo:x.get(null)}}_pickVisibleObjects(t){let{layers:e,views:n,viewports:r,x:i,y:o,width:a=1,height:s=1,mode:l="query",maxObjects:c=null,onViewportActive:u,effects:h}=t;const d=this._getPickable(e);if(!d)return[];this._resizeBuffer();const f=qS(this.gl),p=HS(this.gl,[i,o],!0),m=p.x,g=p.y+p.height,y=HS(this.gl,[i+a,o+s],!0),v=y.x+y.width,_=y.y,b={x:m,y:_,width:v-m,height:g-_},x=function(t){let{pickedColors:e,decodePickingColor:n}=t;const r=new Map;if(e)for(let i=0;i<e.length;i+=4)if(e[i+3]-1>=0){const t=e.slice(i,i+4),o=t.join(",");if(!r.has(o)){const e=n(t);e?r.set(o,{...e,color:t}):Gw.error("Picked non-existent layer. Is picking buffer corrupt?")()}}return Array.from(r.values())}(this._drawAndSample({layers:d,views:n,viewports:r,onViewportActive:u,deviceRect:b,cullRect:{x:i,y:o,width:a,height:s},effects:h,pass:"picking:".concat(l)})),w=new Map,S=Number.isFinite(c);for(let T=0;T<x.length;T++){var E;if(S&&c&&w.size>=c)break;const t=x[T];let e={color:t.pickedColor,layer:null,index:t.pickedObjectIndex,picked:!0,x:i,y:o,pixelRatio:f};e=x2({layer:t.pickedLayer,info:e,mode:l});const n=null!==(E=e.object)&&void 0!==E?E:"".concat(e.layer.id,"[").concat(e.index,"]");w.has(n)||w.set(n,e)}return Array.from(w.values())}_drawAndSample(t){let{layers:e,views:n,viewports:r,onViewportActive:i,deviceRect:o,cullRect:a,effects:s,pass:l}=t,c=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const u=c?this.depthFBO:this.pickingFBO,h={layers:e,layerFilter:this.layerFilter,views:n,viewports:r,onViewportActive:i,pickingFBO:u,deviceRect:o,cullRect:a,effects:s,pass:l,pickZ:c,preRenderStats:{}};for(const v of s)v.useInPicking&&(h.preRenderStats[v.id]=v.preRender(this.gl,h));const{decodePickingColor:d}=this.pickLayersPass.render(h),{x:f,y:p,width:m,height:g}=o,y=new(c?Float32Array:Uint8Array)(m*g*4);return HE(u,{sourceX:f,sourceY:p,sourceWidth:m,sourceHeight:g,target:y}),{pickedColors:y,decodePickingColor:d}}_getPickingRect(t){let{deviceX:e,deviceY:n,deviceRadius:r,deviceWidth:i,deviceHeight:o}=t;const a=Math.max(0,e-r),s=Math.max(0,n-r),l=Math.min(i,e+r+1)-a,c=Math.min(o,n+r+1)-s;return l<=0||c<=0?null:{x:a,y:s,width:l,height:c}}}const S2={zIndex:"1",position:"absolute",pointerEvents:"none",color:"#a0a7b4",backgroundColor:"#29323c",padding:"10px",top:"0",left:"0",display:"none"};class E2{constructor(t){ww(this,"el",null),ww(this,"isVisible",!1);const e=t.parentElement;e&&(this.el=document.createElement("div"),this.el.className="deck-tooltip",Object.assign(this.el.style,S2),e.appendChild(this.el))}setTooltip(t,e,n){const r=this.el;if(r){if("string"===typeof t)r.innerText=t;else{if(!t)return this.isVisible=!1,void(r.style.display="none");t.text&&(r.innerText=t.text),t.html&&(r.innerHTML=t.html),t.className&&(r.className=t.className)}this.isVisible=!0,r.style.display="block",r.style.transform="translate(".concat(e,"px, ").concat(n,"px)"),t&&"object"===typeof t&&"style"in t&&Object.assign(r.style,t.style)}}remove(){this.el&&(this.el.remove(),this.el=null)}}const{_parseImageNode:T2}=globalThis,M2="undefined"!==typeof Image,A2="undefined"!==typeof ImageBitmap,C2=Boolean(T2),P2=!!aO||C2;function k2(t){const e=O2(t);if(!e)throw new Error("Not an image");return e}function I2(t){switch(k2(t)){case"data":return t;case"image":case"imagebitmap":const e=document.createElement("canvas"),n=e.getContext("2d");if(!n)throw new Error("getImageData");return e.width=t.width,e.height=t.height,n.drawImage(t,0,0),n.getImageData(0,0,t.width,t.height);default:throw new Error("getImageData")}}function O2(t){return"undefined"!==typeof ImageBitmap&&t instanceof ImageBitmap?"imagebitmap":"undefined"!==typeof Image&&t instanceof Image?"image":t&&"object"===typeof t&&t.data&&t.width&&t.height?"data":null}const L2=/^data:image\/svg\+xml/,j2=/\.svg((\?|#).*)?$/;function z2(t){return t&&(L2.test(t)||j2.test(t))}function R2(t,e){if(z2(e))throw new Error("SVG cannot be parsed directly to imagebitmap");return new Blob([new Uint8Array(t)])}async function D2(t,e,n){const r=function(t,e){if(z2(e)){let e=(new TextDecoder).decode(t);try{"function"===typeof unescape&&"function"===typeof encodeURIComponent&&(e=unescape(encodeURIComponent(e)))}catch(n){throw new Error(n.message)}return"data:image/svg+xml;base64,".concat(btoa(e))}return R2(t,e)}(t,n),i=self.URL||self.webkitURL,o="string"!==typeof r&&i.createObjectURL(r);try{return await async function(t,e){const n=new Image;if(n.src=t,e.image&&e.image.decode&&n.decode)return await n.decode(),n;return await new Promise(((e,r)=>{try{n.onload=()=>e(n),n.onerror=e=>r(new Error("Could not load image ".concat(t,": ").concat(e)))}catch(i){r(i)}}))}(o||r,e)}finally{o&&i.revokeObjectURL(o)}}const B2={};let F2=!0;async function N2(t,e,n){let r;if(z2(n)){r=await D2(t,e,n)}else r=R2(t,n);const i=e&&e.imagebitmap;return await async function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;!function(t){for(const e in t||B2)return!1;return!0}(e)&&F2||(e=null);if(e)try{return await createImageBitmap(t,e)}catch(n){console.warn(n),F2=!1}return await createImageBitmap(t)}(r,i)}function U2(t){return function(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;const r=function(t){return[...t].map((t=>t.charCodeAt(0)))}(e);for(let i=0;i<r.length;++i)if(r[i]!==t[i+n])return!1;return!0}(t,"ftyp",4)?0===(96&t[8])?null:function(t){switch(function(t,e,n){return String.fromCharCode(...t.slice(e,n))}(t,8,12).replace("\0"," ").trim()){case"avif":case"avis":return{extension:"avif",mimeType:"image/avif"};default:return null}}(t):null}const V2=!1,W2=!0;function G2(t){const e=q2(t);return function(t){const e=q2(t),n=e.byteLength>=24&&2303741511===e.getUint32(0,V2);if(!n)return null;return{mimeType:"image/png",width:e.getUint32(16,V2),height:e.getUint32(20,V2)}}(e)||function(t){const e=q2(t),n=e.byteLength>=3&&65496===e.getUint16(0,V2)&&255===e.getUint8(2);if(!n)return null;const{tableMarkers:r,sofMarkers:i}=function(){const t=new Set([65499,65476,65484,65501,65534]);for(let n=65504;n<65520;++n)t.add(n);const e=new Set([65472,65473,65474,65475,65477,65478,65479,65481,65482,65483,65485,65486,65487,65502]);return{tableMarkers:t,sofMarkers:e}}();let o=2;for(;o+9<e.byteLength;){const t=e.getUint16(o,V2);if(i.has(t))return{mimeType:"image/jpeg",height:e.getUint16(o+5,V2),width:e.getUint16(o+7,V2)};if(!r.has(t))return null;o+=2,o+=e.getUint16(o,V2)}return null}(e)||function(t){const e=q2(t),n=e.byteLength>=10&&1195984440===e.getUint32(0,V2);if(!n)return null;return{mimeType:"image/gif",width:e.getUint16(6,W2),height:e.getUint16(8,W2)}}(e)||function(t){const e=q2(t),n=e.byteLength>=14&&16973===e.getUint16(0,V2)&&e.getUint32(2,W2)===e.byteLength;if(!n)return null;return{mimeType:"image/bmp",width:e.getUint32(18,W2),height:e.getUint32(22,W2)}}(e)||function(t){const e=new Uint8Array(t instanceof DataView?t.buffer:t),n=U2(e);if(!n)return null;return{mimeType:n.mimeType,width:0,height:0}}(e)}function q2(t){if(t instanceof DataView)return t;if(ArrayBuffer.isView(t))return new DataView(t.buffer);if(t instanceof ArrayBuffer)return new DataView(t);throw new Error("toDataView")}const H2={id:"image",module:"images",name:"Images",version:"3.4.15",mimeTypes:["image/png","image/jpeg","image/gif","image/webp","image/avif","image/bmp","image/vnd.microsoft.icon","image/svg+xml"],extensions:["png","jpg","jpeg","gif","webp","bmp","ico","svg","avif"],parse:async function(t,e,n){const r=((e=e||{}).image||{}).type||"auto",{url:i}=n||{},o=function(t){switch(t){case"auto":case"data":return function(){if(A2)return"imagebitmap";if(M2)return"image";if(P2)return"data";throw new Error("Install '@loaders.gl/polyfills' to parse images under Node.js")}();default:return function(t){switch(t){case"auto":return A2||M2||P2;case"imagebitmap":return A2;case"image":return M2;case"data":return P2;default:throw new Error("@loaders.gl/images: image ".concat(t," not supported in this environment"))}}(t),t}}(r);let a;switch(o){case"imagebitmap":a=await N2(t,e,i);break;case"image":a=await D2(t,e,i);break;case"data":a=await async function(t,e){const{mimeType:n}=G2(t)||{},r=globalThis._parseImageNode;return GI(r),await r(t,n)}(t);break;default:GI(!1)}return"data"===r&&(a=I2(a)),a},tests:[t=>Boolean(G2(new DataView(t)))],options:{image:{type:"auto",decode:!0}}};const Z2={id:"JSON",name:"JSON",module:"",version:"",options:{},extensions:["json","geojson"],mimeTypes:["application/json","application/geo+json"],testText:function(t){const e=t[0],n=t[t.length-1];return"{"===e&&"}"===n||"["===e&&"]"===n},parseTextSync:JSON.parse};const X2=function(){const t="8.9.36",e=globalThis.deck&&globalThis.deck.VERSION;if(e&&e!==t)throw new Error("deck.gl - multiple versions detected: ".concat(e," vs ").concat(t));return e||(Gw.log(1,"deck.gl ".concat(t))(),globalThis.deck={...globalThis.deck,VERSION:t,version:t,log:Gw,_registerLoggers:IM},function(t){const e=KO();t=Array.isArray(t)?t:[t];for(const n of t){const t=HI(n);e.find((e=>t===e))||e.unshift(t)}}([Z2,[H2,{imagebitmap:{premultiplyAlpha:"none"}}]])),t}();class Y2 extends mE{get[Symbol.toStringTag](){return"Query"}static isSupported(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];const n=tS(t),r=xT(t,QE);let i=n||r;for(const o of e)switch(o){case"queries":i=i&&n;break;case"timers":i=i&&r;break;default:aE(!1)}return i}constructor(t){super(t,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}),this.target=null,this._queryPending=!1,this._pollingPromise=null,Object.seal(this)}beginTimeElapsedQuery(){return this.begin(35007)}beginOcclusionQuery(){let{conservative:t=!1}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.begin(t?36202:35887)}beginTransformFeedbackQuery(){return this.begin(35976)}begin(t){return this._queryPending||(this.target=t,this.gl2.beginQuery(this.target,this.handle)),this}end(){return this._queryPending||this.target&&(this.gl2.endQuery(this.target),this.target=null,this._queryPending=!0),this}isResultAvailable(){if(!this._queryPending)return!1;const t=this.gl2.getQueryParameter(this.handle,34919);return t&&(this._queryPending=!1),t}isTimerDisjoint(){return this.gl2.getParameter(36795)}getResult(){return this.gl2.getQueryParameter(this.handle,34918)}getTimerMilliseconds(){return this.getResult()/1e6}createPoll(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Number.POSITIVE_INFINITY;if(this._pollingPromise)return this._pollingPromise;let e=0;return this._pollingPromise=new Promise(((n,r)=>{const i=()=>{this.isResultAvailable()?(n(this.getResult()),this._pollingPromise=null):e++>t?(r("Timed out"),this._pollingPromise=null):requestAnimationFrame(i)};requestAnimationFrame(i)})),this._pollingPromise}_createHandle(){return Y2.isSupported(this.gl)?this.gl2.createQuery():null}_deleteHandle(){this.gl2.deleteQuery(this.handle)}}const K2=Ew()&&"undefined"!==typeof document;let $2=0;class J2{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{onCreateContext:e=(t=>JS(t)),onAddHTML:n=null,onInitialize:r=(()=>{}),onRender:i=(()=>{}),onFinalize:o=(()=>{}),onError:a,gl:s=null,glOptions:l={},debug:c=!1,createFramebuffer:u=!1,autoResizeViewport:h=!0,autoResizeDrawingBuffer:d=!0,stats:f=oE.get("animation-loop-".concat($2++))}=t;let{useDevicePixels:p=!0}=t;"useDevicePixelRatio"in t&&(Yw.deprecated("useDevicePixelRatio","useDevicePixels")(),p=t.useDevicePixelRatio),this.props={onCreateContext:e,onAddHTML:n,onInitialize:r,onRender:i,onFinalize:o,onError:a,gl:s,glOptions:l,debug:c,createFramebuffer:u},this.gl=s,this.needsRedraw=null,this.timeline=null,this.stats=f,this.cpuTime=this.stats.get("CPU Time"),this.gpuTime=this.stats.get("GPU Time"),this.frameRate=this.stats.get("Frame Rate"),this._initialized=!1,this._running=!1,this._animationFrameId=null,this._nextFramePromise=null,this._resolveNextFrame=null,this._cpuStartTime=0,this.setProps({autoResizeViewport:h,autoResizeDrawingBuffer:d,useDevicePixels:p}),this.start=this.start.bind(this),this.stop=this.stop.bind(this),this._pageLoadPromise=null,this._onMousemove=this._onMousemove.bind(this),this._onMouseleave=this._onMouseleave.bind(this)}delete(){this.stop(),this._setDisplay(null)}setNeedsRedraw(t){return aE("string"===typeof t),this.needsRedraw=this.needsRedraw||t,this}setProps(t){return"autoResizeViewport"in t&&(this.autoResizeViewport=t.autoResizeViewport),"autoResizeDrawingBuffer"in t&&(this.autoResizeDrawingBuffer=t.autoResizeDrawingBuffer),"useDevicePixels"in t&&(this.useDevicePixels=t.useDevicePixels),this}start(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this._running)return this;this._running=!0;const e=this._getPageLoadPromise().then((()=>!this._running||this._initialized?null:(this._createWebGLContext(t),this._createFramebuffer(),this._startEventHandling(),this._initializeCallbackData(),this._updateCallbackData(),this._resizeCanvasDrawingBuffer(),this._resizeViewport(),this._gpuTimeQuery=Y2.isSupported(this.gl,["timers"])?new Y2(this.gl):null,this._initialized=!0,this.onInitialize(this.animationProps)))).then((t=>{this._running&&(this._addCallbackData(t||{}),!1!==t&&this._startLoop())}));return this.props.onError&&e.catch(this.props.onError),this}redraw(){return this.isContextLost()||(this._beginTimers(),this._setupFrame(),this._updateCallbackData(),this._renderFrame(this.animationProps),this._clearNeedsRedraw(),this.offScreen&&this.gl.commit&&this.gl.commit(),this._resolveNextFrame&&(this._resolveNextFrame(this),this._nextFramePromise=null,this._resolveNextFrame=null),this._endTimers()),this}stop(){return this._running&&(this._finalizeCallbackData(),this._cancelAnimationFrame(this._animationFrameId),this._nextFramePromise=null,this._resolveNextFrame=null,this._animationFrameId=null,this._running=!1),this}attachTimeline(t){return this.timeline=t,this.timeline}detachTimeline(){this.timeline=null}waitForRender(){return this.setNeedsRedraw("waitForRender"),this._nextFramePromise||(this._nextFramePromise=new Promise((t=>{this._resolveNextFrame=t}))),this._nextFramePromise}async toDataURL(){return this.setNeedsRedraw("toDataURL"),await this.waitForRender(),this.gl.canvas.toDataURL()}isContextLost(){return this.gl.isContextLost()}onCreateContext(){return this.props.onCreateContext(...arguments)}onInitialize(){return this.props.onInitialize(...arguments)}onRender(){return this.props.onRender(...arguments)}onFinalize(){return this.props.onFinalize(...arguments)}getHTMLControlValue(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;const n=document.getElementById(t);return n?Number(n.value):e}setViewParameters(){return Yw.removed("AnimationLoop.setViewParameters","AnimationLoop.setProps")(),this}_startLoop(){const t=()=>{this._running&&(this.redraw(),this._animationFrameId=this._requestAnimationFrame(t))};this._cancelAnimationFrame(this._animationFrameId),this._animationFrameId=this._requestAnimationFrame(t)}_getPageLoadPromise(){return this._pageLoadPromise||(this._pageLoadPromise=K2?new Promise(((t,e)=>{K2&&"complete"===document.readyState?t(document):window.addEventListener("load",(()=>{t(document)}))})):Promise.resolve({})),this._pageLoadPromise}_setDisplay(t){this.display&&(this.display.delete(),this.display.animationLoop=null),t&&(t.animationLoop=this),this.display=t}_cancelAnimationFrame(t){return this.display&&this.display.cancelAnimationFrame?this.display.cancelAnimationFrame(t):(e=t,"undefined"!==typeof window&&window.cancelAnimationFrame?window.cancelAnimationFrame(e):clearTimeout(e));var e}_requestAnimationFrame(t){if(this._running)return this.display&&this.display.requestAnimationFrame?this.display.requestAnimationFrame(t):(e=t,"undefined"!==typeof window&&window.requestAnimationFrame?window.requestAnimationFrame(e):setTimeout(e,1e3/60));var e}_renderFrame(){this.display?this.display._renderFrame(...arguments):this.onRender(...arguments)}_clearNeedsRedraw(){this.needsRedraw=null}_setupFrame(){this._resizeCanvasDrawingBuffer(),this._resizeViewport(),this._resizeFramebuffer()}_initializeCallbackData(){this.animationProps={gl:this.gl,stop:this.stop,canvas:this.gl.canvas,framebuffer:this.framebuffer,useDevicePixels:this.useDevicePixels,needsRedraw:null,startTime:Date.now(),engineTime:0,tick:0,tock:0,time:0,_timeline:this.timeline,_loop:this,_animationLoop:this,_mousePosition:null}}_updateCallbackData(){const{width:t,height:e,aspect:n}=this._getSizeAndAspect();t===this.animationProps.width&&e===this.animationProps.height||this.setNeedsRedraw("drawing buffer resized"),n!==this.animationProps.aspect&&this.setNeedsRedraw("drawing buffer aspect changed"),this.animationProps.width=t,this.animationProps.height=e,this.animationProps.aspect=n,this.animationProps.needsRedraw=this.needsRedraw,this.animationProps.engineTime=Date.now()-this.animationProps.startTime,this.timeline&&this.timeline.update(this.animationProps.engineTime),this.animationProps.tick=Math.floor(this.animationProps.time/1e3*60),this.animationProps.tock++,this.animationProps.time=this.timeline?this.timeline.getTime():this.animationProps.engineTime,this.animationProps._offScreen=this.offScreen}_finalizeCallbackData(){this.onFinalize(this.animationProps)}_addCallbackData(t){"object"===typeof t&&null!==t&&(this.animationProps=Object.assign({},this.animationProps,t))}_createWebGLContext(t){if(this.offScreen=t.canvas&&"undefined"!==typeof OffscreenCanvas&&t.canvas instanceof OffscreenCanvas,t=Object.assign({},t,this.props.glOptions),this.gl=this.props.gl?QS(this.props.gl,t):this.onCreateContext(t),!Qw(this.gl))throw new Error("AnimationLoop.onCreateContext - illegal context returned");VS(this.gl,ES),this._createInfoDiv()}_createInfoDiv(){if(this.gl.canvas&&this.props.onAddHTML){const t=document.createElement("div");document.body.appendChild(t),t.style.position="relative";const e=document.createElement("div");e.style.position="absolute",e.style.left="10px",e.style.bottom="10px",e.style.width="300px",e.style.background="white",t.appendChild(this.gl.canvas),t.appendChild(e);const n=this.props.onAddHTML(e);n&&(e.innerHTML=n)}}_getSizeAndAspect(){const t=this.gl.drawingBufferWidth,e=this.gl.drawingBufferHeight;let n=1;const{canvas:r}=this.gl;return r&&r.clientHeight?n=r.clientWidth/r.clientHeight:t>0&&e>0&&(n=t/e),{width:t,height:e,aspect:n}}_resizeViewport(){this.autoResizeViewport&&this.gl.viewport(0,0,this.gl.drawingBufferWidth,this.gl.drawingBufferHeight)}_resizeCanvasDrawingBuffer(){this.autoResizeDrawingBuffer&&tE(this.gl,{useDevicePixels:this.useDevicePixels})}_createFramebuffer(){this.props.createFramebuffer&&(this.framebuffer=new KE(this.gl))}_resizeFramebuffer(){this.framebuffer&&this.framebuffer.resize({width:this.gl.drawingBufferWidth,height:this.gl.drawingBufferHeight})}_beginTimers(){this.frameRate.timeEnd(),this.frameRate.timeStart(),this._gpuTimeQuery&&this._gpuTimeQuery.isResultAvailable()&&!this._gpuTimeQuery.isTimerDisjoint()&&this.stats.get("GPU Time").addTime(this._gpuTimeQuery.getTimerMilliseconds()),this._gpuTimeQuery&&this._gpuTimeQuery.beginTimeElapsedQuery(),this.cpuTime.timeStart()}_endTimers(){this.cpuTime.timeEnd(),this._gpuTimeQuery&&this._gpuTimeQuery.end()}_startEventHandling(){const{canvas:t}=this.gl;t&&(t.addEventListener("mousemove",this._onMousemove),t.addEventListener("mouseleave",this._onMouseleave))}_onMousemove(t){this.animationProps._mousePosition=[t.offsetX,t.offsetY]}_onMouseleave(t){this.animationProps._mousePosition=null}}var Q2=n(6895);const t3={mousedown:1,mousemove:2,mouseup:4};!function(t){const e=t.prototype.handler;t.prototype.handler=function(t){const n=this.store;t.button>0&&"pointerdown"===t.type&&(function(t,e){for(let n=0;n<t.length;n++)if(e(t[n]))return!0;return!1}(n,(e=>e.pointerId===t.pointerId))||n.push(t)),e.call(this,t)}}(Q2.PointerEventInput),Q2.MouseInput.prototype.handler=function(t){let e=t3[t.type];1&e&&t.button>=0&&(this.pressed=!0),2&e&&0===t.buttons&&(e=4),this.pressed&&(4&e&&(this.pressed=!1),this.callback(this.manager,e,{pointers:[t],changedPointers:[t],pointerType:"mouse",srcEvent:t}))};const e3=Q2.Manager,n3=Q2;class r3{constructor(t,e,n){this.element=t,this.callback=e,this.options={enable:!0,...n}}}const i3=n3?[[n3.Pan,{event:"tripan",pointers:3,threshold:0,enable:!1}],[n3.Rotate,{enable:!1}],[n3.Pinch,{enable:!1}],[n3.Swipe,{enable:!1}],[n3.Pan,{threshold:0,enable:!1}],[n3.Press,{enable:!1}],[n3.Tap,{event:"doubletap",taps:2,enable:!1}],[n3.Tap,{event:"anytap",enable:!1}],[n3.Tap,{enable:!1}]]:null,o3={tripan:["rotate","pinch","pan"],rotate:["pinch"],pinch:["pan"],pan:["press","doubletap","anytap","tap"],doubletap:["anytap"],anytap:["tap"]},a3={doubletap:["tap"]},s3={pointerdown:"pointerdown",pointermove:"pointermove",pointerup:"pointerup",touchstart:"pointerdown",touchmove:"pointermove",touchend:"pointerup",mousedown:"pointerdown",mousemove:"pointermove",mouseup:"pointerup"},l3={KEY_EVENTS:["keydown","keyup"],MOUSE_EVENTS:["mousedown","mousemove","mouseup","mouseover","mouseout","mouseleave"],WHEEL_EVENTS:["wheel","mousewheel"]},c3={tap:"tap",anytap:"anytap",doubletap:"doubletap",press:"press",pinch:"pinch",pinchin:"pinch",pinchout:"pinch",pinchstart:"pinch",pinchmove:"pinch",pinchend:"pinch",pinchcancel:"pinch",rotate:"rotate",rotatestart:"rotate",rotatemove:"rotate",rotateend:"rotate",rotatecancel:"rotate",tripan:"tripan",tripanstart:"tripan",tripanmove:"tripan",tripanup:"tripan",tripandown:"tripan",tripanleft:"tripan",tripanright:"tripan",tripanend:"tripan",tripancancel:"tripan",pan:"pan",panstart:"pan",panmove:"pan",panup:"pan",pandown:"pan",panleft:"pan",panright:"pan",panend:"pan",pancancel:"pan",swipe:"swipe",swipeleft:"swipe",swiperight:"swipe",swipeup:"swipe",swipedown:"swipe"},u3={click:"tap",anyclick:"anytap",dblclick:"doubletap",mousedown:"pointerdown",mousemove:"pointermove",mouseup:"pointerup",mouseover:"pointerover",mouseout:"pointerout",mouseleave:"pointerleave"},h3="undefined"!==typeof navigator&&navigator.userAgent?navigator.userAgent.toLowerCase():"",d3="undefined"!==typeof window?window:n.g;"undefined"!==typeof n.g?n.g:window,"undefined"!==typeof document&&document;let f3=!1;try{const t={get passive(){return f3=!0,!0}};d3.addEventListener("test",null,t),d3.removeEventListener("test",null)}catch(mbt){f3=!1}const p3=-1!==h3.indexOf("firefox"),{WHEEL_EVENTS:m3}=l3,g3="wheel",y3=4.000244140625;class v3 extends r3{constructor(t,e,n){super(t,e,n),this.handleEvent=t=>{if(!this.options.enable)return;let e=t.deltaY;d3.WheelEvent&&(p3&&t.deltaMode===d3.WheelEvent.DOM_DELTA_PIXEL&&(e/=d3.devicePixelRatio),t.deltaMode===d3.WheelEvent.DOM_DELTA_LINE&&(e*=40)),0!==e&&e%y3===0&&(e=Math.floor(e/y3)),t.shiftKey&&e&&(e*=.25),this.callback({type:g3,center:{x:t.clientX,y:t.clientY},delta:-e,srcEvent:t,pointerType:"mouse",target:t.target})},this.events=(this.options.events||[]).concat(m3),this.events.forEach((e=>t.addEventListener(e,this.handleEvent,!!f3&&{passive:!1})))}destroy(){this.events.forEach((t=>this.element.removeEventListener(t,this.handleEvent)))}enableEventType(t,e){t===g3&&(this.options.enable=e)}}const{MOUSE_EVENTS:_3}=l3,b3="pointermove",x3="pointerover",w3="pointerout",S3="pointerenter",E3="pointerleave";class T3 extends r3{constructor(t,e,n){super(t,e,n),this.handleEvent=t=>{this.handleOverEvent(t),this.handleOutEvent(t),this.handleEnterEvent(t),this.handleLeaveEvent(t),this.handleMoveEvent(t)},this.pressed=!1;const{enable:r}=this.options;this.enableMoveEvent=r,this.enableLeaveEvent=r,this.enableEnterEvent=r,this.enableOutEvent=r,this.enableOverEvent=r,this.events=(this.options.events||[]).concat(_3),this.events.forEach((e=>t.addEventListener(e,this.handleEvent)))}destroy(){this.events.forEach((t=>this.element.removeEventListener(t,this.handleEvent)))}enableEventType(t,e){t===b3&&(this.enableMoveEvent=e),t===x3&&(this.enableOverEvent=e),t===w3&&(this.enableOutEvent=e),t===S3&&(this.enableEnterEvent=e),t===E3&&(this.enableLeaveEvent=e)}handleOverEvent(t){this.enableOverEvent&&"mouseover"===t.type&&this._emit(x3,t)}handleOutEvent(t){this.enableOutEvent&&"mouseout"===t.type&&this._emit(w3,t)}handleEnterEvent(t){this.enableEnterEvent&&"mouseenter"===t.type&&this._emit(S3,t)}handleLeaveEvent(t){this.enableLeaveEvent&&"mouseleave"===t.type&&this._emit(E3,t)}handleMoveEvent(t){if(this.enableMoveEvent)switch(t.type){case"mousedown":t.button>=0&&(this.pressed=!0);break;case"mousemove":0===t.buttons&&(this.pressed=!1),this.pressed||this._emit(b3,t);break;case"mouseup":this.pressed=!1}}_emit(t,e){this.callback({type:t,center:{x:e.clientX,y:e.clientY},srcEvent:e,pointerType:"mouse",target:e.target})}}const{KEY_EVENTS:M3}=l3,A3="keydown",C3="keyup";class P3 extends r3{constructor(t,e,n){super(t,e,n),this.handleEvent=t=>{const e=t.target||t.srcElement;"INPUT"===e.tagName&&"text"===e.type||"TEXTAREA"===e.tagName||(this.enableDownEvent&&"keydown"===t.type&&this.callback({type:A3,srcEvent:t,key:t.key,target:t.target}),this.enableUpEvent&&"keyup"===t.type&&this.callback({type:C3,srcEvent:t,key:t.key,target:t.target}))},this.enableDownEvent=this.options.enable,this.enableUpEvent=this.options.enable,this.events=(this.options.events||[]).concat(M3),t.tabIndex=this.options.tabIndex||0,t.style.outline="none",this.events.forEach((e=>t.addEventListener(e,this.handleEvent)))}destroy(){this.events.forEach((t=>this.element.removeEventListener(t,this.handleEvent)))}enableEventType(t,e){t===A3&&(this.enableDownEvent=e),t===C3&&(this.enableUpEvent=e)}}const k3="contextmenu";class I3 extends r3{constructor(t,e,n){super(t,e,n),this.handleEvent=t=>{this.options.enable&&this.callback({type:k3,center:{x:t.clientX,y:t.clientY},srcEvent:t,pointerType:"mouse",target:t.target})},t.addEventListener("contextmenu",this.handleEvent)}destroy(){this.element.removeEventListener("contextmenu",this.handleEvent)}enableEventType(t,e){t===k3&&(this.options.enable=e)}}const O3={pointerdown:1,pointermove:2,pointerup:4,mousedown:1,mousemove:2,mouseup:4};function L3(t){const e=O3[t.srcEvent.type];if(!e)return null;const{buttons:n,button:r}=t.srcEvent;let i=!1,o=!1,a=!1;return 2===e?(i=Boolean(1&n),o=Boolean(4&n),a=Boolean(2&n)):(i=0===r,o=1===r,a=2===r),{leftButton:i,middleButton:o,rightButton:a}}function j3(t,e){const n=t.center;if(!n)return null;const r=e.getBoundingClientRect(),i=r.width/e.offsetWidth||1,o=r.height/e.offsetHeight||1;return{center:n,offsetCenter:{x:(n.x-r.left-e.clientLeft)/i,y:(n.y-r.top-e.clientTop)/o}}}const z3={srcElement:"root",priority:0};class R3{constructor(t){this.handleEvent=t=>{if(this.isEmpty())return;const e=this._normalizeEvent(t);let n=t.srcEvent.target;for(;n&&n!==e.rootElement;){if(this._emit(e,n),e.handled)return;n=n.parentNode}this._emit(e,"root")},this.eventManager=t,this.handlers=[],this.handlersByElement=new Map,this._active=!1}isEmpty(){return!this._active}add(t,e,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=arguments.length>4&&void 0!==arguments[4]&&arguments[4];const{handlers:o,handlersByElement:a}=this;let s=z3;"string"===typeof n||n&&n.addEventListener?s={...z3,srcElement:n}:n&&(s={...z3,...n});let l=a.get(s.srcElement);l||(l=[],a.set(s.srcElement,l));const c={type:t,handler:e,srcElement:s.srcElement,priority:s.priority};r&&(c.once=!0),i&&(c.passive=!0),o.push(c),this._active=this._active||!c.passive;let u=l.length-1;for(;u>=0&&!(l[u].priority>=c.priority);)u--;l.splice(u+1,0,c)}remove(t,e){const{handlers:n,handlersByElement:r}=this;for(let i=n.length-1;i>=0;i--){const o=n[i];if(o.type===t&&o.handler===e){n.splice(i,1);const t=r.get(o.srcElement);t.splice(t.indexOf(o),1),0===t.length&&r.delete(o.srcElement)}}this._active=n.some((t=>!t.passive))}_emit(t,e){const n=this.handlersByElement.get(e);if(n){let e=!1;const r=()=>{t.handled=!0},i=()=>{t.handled=!0,e=!0},o=[];for(let a=0;a<n.length;a++){const{type:s,handler:l,once:c}=n[a];if(l({...t,type:s,stopPropagation:r,stopImmediatePropagation:i}),c&&o.push(n[a]),e)break}for(let t=0;t<o.length;t++){const{type:e,handler:n}=o[t];this.remove(e,n)}}}_normalizeEvent(t){const e=this.eventManager.getElement();return{...t,...L3(t),...j3(t,e),preventDefault:()=>{t.srcEvent.preventDefault()},stopImmediatePropagation:null,stopPropagation:null,handled:!1,rootElement:e}}}const D3={events:null,recognizers:null,recognizerOptions:{},Manager:e3,touchAction:"none",tabIndex:0};class B3{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,e=arguments.length>1?arguments[1]:void 0;this._onBasicInput=t=>{const{srcEvent:e}=t,n=s3[e.type];n&&this.manager.emit(n,t)},this._onOtherEvent=t=>{this.manager.emit(t.type,t)},this.options={...D3,...e},this.events=new Map,this.setElement(t);const{events:n}=this.options;n&&this.on(n)}getElement(){return this.element}setElement(t){if(this.element&&this.destroy(),this.element=t,!t)return;const{options:e}=this,n=e.Manager;this.manager=new n(t,{touchAction:e.touchAction,recognizers:e.recognizers||i3}).on("hammer.input",this._onBasicInput),e.recognizers||Object.keys(o3).forEach((t=>{const e=this.manager.get(t);e&&o3[t].forEach((t=>{e.recognizeWith(t)}))}));for(const r in e.recognizerOptions){const t=this.manager.get(r);if(t){const n=e.recognizerOptions[r];delete n.enable,t.set(n)}}this.wheelInput=new v3(t,this._onOtherEvent,{enable:!1}),this.moveInput=new T3(t,this._onOtherEvent,{enable:!1}),this.keyInput=new P3(t,this._onOtherEvent,{enable:!1,tabIndex:e.tabIndex}),this.contextmenuInput=new I3(t,this._onOtherEvent,{enable:!1});for(const[r,i]of this.events)i.isEmpty()||(this._toggleRecognizer(i.recognizerName,!0),this.manager.on(r,i.handleEvent))}destroy(){this.element&&(this.wheelInput.destroy(),this.moveInput.destroy(),this.keyInput.destroy(),this.contextmenuInput.destroy(),this.manager.destroy(),this.wheelInput=null,this.moveInput=null,this.keyInput=null,this.contextmenuInput=null,this.manager=null,this.element=null)}on(t,e,n){this._addEventHandler(t,e,n,!1)}once(t,e,n){this._addEventHandler(t,e,n,!0)}watch(t,e,n){this._addEventHandler(t,e,n,!1,!0)}off(t,e){this._removeEventHandler(t,e)}_toggleRecognizer(t,e){const{manager:n}=this;if(!n)return;const r=n.get(t);if(r&&r.options.enable!==e){r.set({enable:e});const i=a3[t];i&&!this.options.recognizers&&i.forEach((i=>{const o=n.get(i);e?(o.requireFailure(t),r.dropRequireFailure(i)):o.dropRequireFailure(t)}))}this.wheelInput.enableEventType(t,e),this.moveInput.enableEventType(t,e),this.keyInput.enableEventType(t,e),this.contextmenuInput.enableEventType(t,e)}_addEventHandler(t,e,n,r,i){if("string"!==typeof t){n=e;for(const e in t)this._addEventHandler(e,t[e],n,r,i);return}const{manager:o,events:a}=this,s=u3[t]||t;let l=a.get(s);l||(l=new R3(this),a.set(s,l),l.recognizerName=c3[s]||s,o&&o.on(s,l.handleEvent)),l.add(t,e,n,r,i),l.isEmpty()||this._toggleRecognizer(l.recognizerName,!0)}_removeEventHandler(t,e){if("string"!==typeof t){for(const e in t)this._removeEventHandler(e,t[e]);return}const{events:n}=this,r=u3[t]||t,i=n.get(r);if(i&&(i.remove(t,e),i.isEmpty())){const{recognizerName:t}=i;let e=!1;for(const r of n.values())if(r.recognizerName===t&&!r.isEmpty()){e=!0;break}e||this._toggleRecognizer(t,!1)}}}function F3(){}const N3={id:"",width:"100%",height:"100%",style:null,viewState:null,initialViewState:null,pickingRadius:0,layerFilter:null,glOptions:{},parameters:{},parent:null,gl:null,canvas:null,layers:[],effects:[],views:null,controller:null,useDevicePixels:!0,touchAction:"none",eventRecognizerOptions:{},_framebuffer:null,_animate:!1,_pickable:!0,_typedArrayManagerProps:{},_customRender:null,onWebGLInitialized:F3,onResize:F3,onViewStateChange:F3,onInteractionStateChange:F3,onBeforeRender:F3,onAfterRender:F3,onLoad:F3,onError:t=>Gw.error(t.message,t.cause)(),onHover:null,onClick:null,onDragStart:null,onDrag:null,onDragEnd:null,_onMetrics:null,getCursor:t=>{let{isDragging:e}=t;return e?"grabbing":"grab"},getTooltip:null,debug:!1,drawPickingColors:!1};class U3{constructor(t){ww(this,"props",void 0),ww(this,"width",0),ww(this,"height",0),ww(this,"userData",{}),ww(this,"canvas",null),ww(this,"viewManager",null),ww(this,"layerManager",null),ww(this,"effectManager",null),ww(this,"deckRenderer",null),ww(this,"deckPicker",null),ww(this,"eventManager",null),ww(this,"tooltip",null),ww(this,"metrics",void 0),ww(this,"animationLoop",void 0),ww(this,"stats",void 0),ww(this,"viewState",void 0),ww(this,"cursorState",void 0),ww(this,"_needsRedraw",void 0),ww(this,"_pickRequest",void 0),ww(this,"_lastPointerDownInfo",null),ww(this,"_metricsCounter",void 0),ww(this,"_onPointerMove",(t=>{const{_pickRequest:e}=this;if("pointerleave"===t.type)e.x=-1,e.y=-1,e.radius=0;else{if(t.leftButton||t.rightButton)return;{const n=t.offsetCenter;if(!n)return;e.x=n.x,e.y=n.y,e.radius=this.props.pickingRadius}}this.layerManager&&(this.layerManager.context.mousePosition={x:e.x,y:e.y}),e.event=t})),ww(this,"_onEvent",(t=>{const e=Xw[t.type],n=t.offsetCenter;if(!e||!n||!this.layerManager)return;const r=this.layerManager.getLayers(),i=this.deckPicker.getLastPickedObject({x:n.x,y:n.y,layers:r,viewports:this.getViewports(n)},this._lastPointerDownInfo),{layer:o}=i,a=o&&(o[e.handler]||o.props[e.handler]),s=this.props[e.handler];let l=!1;a&&(l=a.call(o,i,t)),!l&&s&&s(i,t)})),ww(this,"_onPointerDown",(t=>{const e=t.offsetCenter,n=this._pick("pickObject","pickObject Time",{x:e.x,y:e.y,radius:this.props.pickingRadius});this._lastPointerDownInfo=n.result[0]||n.emptyInfo})),this.props={...N3,...t},t=this.props,this._needsRedraw="Initial render",this._pickRequest={mode:"hover",x:-1,y:-1,radius:0,event:null},this.cursorState={isHovering:!1,isDragging:!1},t.viewState&&t.initialViewState&&Gw.warn("View state tracking is disabled. Use either `initialViewState` for auto update or `viewState` for manual update.")(),"IE"===oP()&&Gw.warn("IE 11 is not supported")(),this.viewState=t.initialViewState,t.gl||"undefined"!==typeof document&&(this.canvas=this._createCanvas(t)),this.animationLoop=this._createAnimationLoop(t),this.stats=new rE({id:"deck.gl"}),this.metrics={fps:0,setPropsTime:0,updateAttributesTime:0,framesRedrawn:0,pickTime:0,pickCount:0,gpuTime:0,gpuTimePerFrame:0,cpuTime:0,cpuTimePerFrame:0,bufferMemory:0,textureMemory:0,renderbufferMemory:0,gpuMemory:0},this._metricsCounter=0,this.setProps(t),t._typedArrayManagerProps&&ET.setOptions(t._typedArrayManagerProps),this.animationLoop.start()}finalize(){var t,e,n,r,i,o,a,s,l;(null===(t=this.animationLoop)||void 0===t||t.stop(),this.animationLoop=null,this._lastPointerDownInfo=null,null===(e=this.layerManager)||void 0===e||e.finalize(),this.layerManager=null,null===(n=this.viewManager)||void 0===n||n.finalize(),this.viewManager=null,null===(r=this.effectManager)||void 0===r||r.finalize(),this.effectManager=null,null===(i=this.deckRenderer)||void 0===i||i.finalize(),this.deckRenderer=null,null===(o=this.deckPicker)||void 0===o||o.finalize(),this.deckPicker=null,null===(a=this.eventManager)||void 0===a||a.destroy(),this.eventManager=null,null===(s=this.tooltip)||void 0===s||s.remove(),this.tooltip=null,this.props.canvas||this.props.gl||!this.canvas)||(null===(l=this.canvas.parentElement)||void 0===l||l.removeChild(this.canvas),this.canvas=null)}setProps(t){this.stats.get("setProps Time").timeStart(),"onLayerHover"in t&&Gw.removed("onLayerHover","onHover")(),"onLayerClick"in t&&Gw.removed("onLayerClick","onClick")(),t.initialViewState&&!vI(this.props.initialViewState,t.initialViewState,3)&&(this.viewState=t.initialViewState),Object.assign(this.props,t),this._setCanvasSize(this.props);const e=Object.create(this.props);Object.assign(e,{views:this._getViews(),width:this.width,height:this.height,viewState:this._getViewState()}),this.animationLoop.setProps(e),this.layerManager&&(this.viewManager.setProps(e),this.layerManager.activateViewport(this.getViewports()[0]),this.layerManager.setProps(e),this.effectManager.setProps(e),this.deckRenderer.setProps(e),this.deckPicker.setProps(e)),this.stats.get("setProps Time").timeEnd()}needsRedraw(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{clearRedrawFlags:!1};if(!this.layerManager)return!1;if(this.props._animate)return"Deck._animate";let e=this._needsRedraw;t.clearRedrawFlags&&(this._needsRedraw=!1);const n=this.viewManager.needsRedraw(t),r=this.layerManager.needsRedraw(t),i=this.effectManager.needsRedraw(t),o=this.deckRenderer.needsRedraw(t);return e=e||n||r||i||o,e}redraw(t){if(!this.layerManager)return;let e=this.needsRedraw({clearRedrawFlags:!0});e=t||e,e&&(this.stats.get("Redraw Count").incrementCount(),this.props._customRender?this.props._customRender(e):this._drawLayers(e))}get isInitialized(){return null!==this.viewManager}getViews(){return lM(this.viewManager),this.viewManager.views}getViewports(t){return lM(this.viewManager),this.viewManager.getViewports(t)}getCanvas(){return this.canvas}pickObject(t){const e=this._pick("pickObject","pickObject Time",t).result;return e.length?e[0]:null}pickMultipleObjects(t){return t.depth=t.depth||10,this._pick("pickObject","pickMultipleObjects Time",t).result}pickObjects(t){return this._pick("pickObjects","pickObjects Time",t)}_addResources(t){let e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];for(const n in t)this.layerManager.resourceManager.add({resourceId:n,data:t[n],forceUpdate:e})}_removeResources(t){for(const e of t)this.layerManager.resourceManager.remove(e)}_addDefaultEffect(t){this.effectManager.addDefaultEffect(t)}_pick(t,e,n){lM(this.deckPicker);const{stats:r}=this;r.get("Pick Count").incrementCount(),r.get(e).timeStart();const i=this.deckPicker[t]({layers:this.layerManager.getLayers(n),views:this.viewManager.getViews(),viewports:this.getViewports(n),onViewportActive:this.layerManager.activateViewport,effects:this.effectManager.getEffects(),...n});return r.get(e).timeEnd(),i}_createCanvas(t){let e=t.canvas;if("string"===typeof e&&(e=document.getElementById(e),lM(e)),!e){e=document.createElement("canvas"),e.id=t.id||"deckgl-overlay";(t.parent||document.body).appendChild(e)}return Object.assign(e.style,t.style),e}_setCanvasSize(t){if(!this.canvas)return;const{width:e,height:n}=t;if(e||0===e){const t=Number.isFinite(e)?"".concat(e,"px"):e;this.canvas.style.width=t}if(n||0===n){var r;const e=Number.isFinite(n)?"".concat(n,"px"):n;this.canvas.style.position=(null===(r=t.style)||void 0===r?void 0:r.position)||"absolute",this.canvas.style.height=e}}_updateCanvasSize(){var t,e;const{canvas:n}=this;if(!n)return;const r=null!==(t=n.clientWidth)&&void 0!==t?t:n.width,i=null!==(e=n.clientHeight)&&void 0!==e?e:n.height;var o,a;r===this.width&&i===this.height||(this.width=r,this.height=i,null===(o=this.viewManager)||void 0===o||o.setProps({width:r,height:i}),null===(a=this.layerManager)||void 0===a||a.activateViewport(this.getViewports()[0]),this.props.onResize({width:r,height:i}))}_createAnimationLoop(t){const{width:e,height:n,gl:r,glOptions:i,debug:o,onError:a,onBeforeRender:s,onAfterRender:l,useDevicePixels:c}=t;return new J2({width:e,height:n,useDevicePixels:c,autoResizeDrawingBuffer:!r,autoResizeViewport:!1,gl:r,onCreateContext:t=>JS({...i,...t,canvas:this.canvas,debug:o,onContextLost:()=>this._onContextLost()}),onInitialize:t=>this._setGLContext(t.gl),onRender:this._onRenderFrame.bind(this),onBeforeRender:s,onAfterRender:l,onError:a})}_getViewState(){return this.props.viewState||this.viewState}_getViews(){let t=this.props.views||[new U1({id:"default-view"})];return t=Array.isArray(t)?t:[t],t.length&&this.props.controller&&(t[0].props.controller=this.props.controller),t}_onContextLost(){const{onError:t}=this.props;this.animationLoop&&t&&t(new Error("WebGL context is lost"))}_pickAndCallback(){const{_pickRequest:t}=this;if(t.event){const{result:n,emptyInfo:r}=this._pick("pickObject","pickObject Time",t);this.cursorState.isHovering=n.length>0;let i=r,o=!1;for(const a of n){var e;i=a,o=(null===(e=a.layer)||void 0===e?void 0:e.onHover(a,t.event))||o}if(!o&&this.props.onHover&&this.props.onHover(i,t.event),this.props.getTooltip&&this.tooltip){const t=this.props.getTooltip(i);this.tooltip.setTooltip(t,i.x,i.y)}t.event=null}}_updateCursor(){const t=this.props.parent||this.canvas;t&&(t.style.cursor=this.props.getCursor(this.cursorState))}_setGLContext(t){if(this.layerManager)return;this.canvas||(this.canvas=t.canvas,QS(t,{enable:!0,copyState:!0})),this.tooltip=new E2(this.canvas),VS(t,{blend:!0,blendFunc:[770,771,1,771],polygonOffsetFill:!0,depthTest:!0,depthFunc:515}),this.props.onWebGLInitialized(t);const e=new a1;e.play(),this.animationLoop.attachTimeline(e),this.eventManager=new B3(this.props.parent||t.canvas,{touchAction:this.props.touchAction,recognizerOptions:this.props.eventRecognizerOptions,events:{pointerdown:this._onPointerDown,pointermove:this._onPointerMove,pointerleave:this._onPointerMove}});for(const r in Xw)this.eventManager.on(r,this._onEvent);this.viewManager=new f1({timeline:e,eventManager:this.eventManager,onViewStateChange:this._onViewStateChange.bind(this),onInteractionStateChange:this._onInteractionStateChange.bind(this),views:this._getViews(),viewState:this._getViewState(),width:this.width,height:this.height});const n=this.viewManager.getViewports()[0];this.layerManager=new d1(t,{deck:this,stats:this.stats,viewport:n,timeline:e}),this.effectManager=new h2,this.deckRenderer=new g2(t),this.deckPicker=new w2(t),this.setProps(this.props),this._updateCanvasSize(),this.props.onLoad()}_drawLayers(t,e){const{gl:n}=this.layerManager.context;VS(n,this.props.parameters),this.props.onBeforeRender({gl:n}),this.deckRenderer.renderLayers({target:this.props._framebuffer,layers:this.layerManager.getLayers(),viewports:this.viewManager.getViewports(),onViewportActive:this.layerManager.activateViewport,views:this.viewManager.getViews(),pass:"screen",effects:this.effectManager.getEffects(),...e}),this.props.onAfterRender({gl:n})}_onRenderFrame(t){this._getFrameStats(),this._metricsCounter++%60===0&&(this._getMetrics(),this.stats.reset(),Gw.table(4,this.metrics)(),this.props._onMetrics&&this.props._onMetrics(this.metrics)),this._updateCanvasSize(),this._updateCursor(),this.tooltip.isVisible&&this.viewManager.needsRedraw()&&this.tooltip.setTooltip(null),this.layerManager.updateLayers(),this._pickAndCallback(),this.redraw(),this.viewManager&&this.viewManager.updateViewStates()}_onViewStateChange(t){const e=this.props.onViewStateChange(t)||t.viewState;this.viewState&&(this.viewState={...this.viewState,[t.viewId]:e},this.props.viewState||this.viewManager&&this.viewManager.setProps({viewState:this.viewState}))}_onInteractionStateChange(t){this.cursorState.isDragging=t.isDragging||!1,this.props.onInteractionStateChange(t)}_getFrameStats(){const{stats:t}=this;t.get("frameRate").timeEnd(),t.get("frameRate").timeStart();const e=this.animationLoop.stats;t.get("GPU Time").addTime(e.get("GPU Time").lastTiming),t.get("CPU Time").addTime(e.get("CPU Time").lastTiming)}_getMetrics(){const{metrics:t,stats:e}=this;t.fps=e.get("frameRate").getHz(),t.setPropsTime=e.get("setProps Time").time,t.updateAttributesTime=e.get("Update Attributes").time,t.framesRedrawn=e.get("Redraw Count").count,t.pickTime=e.get("pickObject Time").time+e.get("pickMultipleObjects Time").time+e.get("pickObjects Time").time,t.pickCount=e.get("Pick Count").count,t.gpuTime=e.get("GPU Time").time,t.cpuTime=e.get("CPU Time").time,t.gpuTimePerFrame=e.get("GPU Time").getAverageTime(),t.cpuTimePerFrame=e.get("CPU Time").getAverageTime();const n=oE.get("Memory Usage");t.bufferMemory=n.get("Buffer Memory").count,t.textureMemory=n.get("Texture Memory").count,t.renderbufferMemory=n.get("Renderbuffer Memory").count,t.gpuMemory=n.get("GPU Memory").count}}ww(U3,"defaultProps",N3),ww(U3,"VERSION",X2);const V3="undefined"!==typeof window?r.useLayoutEffect:r.useEffect;function W3(t,e){for(;t;){if(t===e)return!0;t=Object.getPrototypeOf(t)}return!1}const G3={position:"absolute",zIndex:-1};function q3(t,e){if("function"===typeof t)return t(e);if(Array.isArray(t))return t.map((t=>q3(t,e)));if(H3(t)){if(function(t){var e;return null===(e=t.props)||void 0===e?void 0:e.mapStyle}(t))return e.style=G3,(0,r.cloneElement)(t,e);if(function(t){const e=t.type;return e&&e.deckGLViewProps}(t))return(0,r.cloneElement)(t,e)}return t}function H3(t){return t&&"object"===typeof t&&"type"in t||!1}function Z3(t){if("function"===typeof t)return(0,r.createElement)(y1,{},t);if(Array.isArray(t))return t.map(Z3);if(H3(t)){if(t.type===r.Fragment)return Z3(t.props.children);if(W3(t.type,y1))return t}return t}const X3={mixBlendMode:null};function Y3(t){t.redrawReason&&(t.deck._drawLayers(t.redrawReason),t.redrawReason=null)}const K3=(0,r.forwardRef)(((t,e)=>{const[n,i]=(0,r.useState)(0),o=(0,r.useRef)({control:null,version:n,forceUpdate:()=>i((t=>t+1))}).current,a=(0,r.useRef)(null),s=(0,r.useRef)(null),l=(0,r.useMemo)((()=>function(t){let{children:e,layers:n=[],views:i=null}=t;const o=[],a=[],s={};return r.Children.forEach(Z3(e),(t=>{if(H3(t)){const e=t.type;if(W3(e,fL)){const n=function(t,e){const n={},r=t.defaultProps||{};for(const i in e)r[i]!==e[i]&&(n[i]=e[i]);return new t(n)}(e,t.props);a.push(n)}else o.push(t);if(W3(e,y1)&&e!==y1&&t.props.id){const n=new e(t.props);s[n.id]=n}}else t&&o.push(t)})),Object.keys(s).length>0&&(Array.isArray(i)?i.forEach((t=>{s[t.id]=t})):i&&(s[i.id]=i),i=Object.values(s)),n=a.length>0?[...a,...n]:n,{layers:n,children:o,views:i}}(t)),[t.layers,t.views,t.children]);let c=!0;const u=e=>{var n;return c&&t.viewState?(o.viewStateUpdateRequested=e,null):(o.viewStateUpdateRequested=null,null===(n=t.onViewStateChange)||void 0===n?void 0:n.call(t,e))},h=e=>{var n;c?o.interactionStateUpdateRequested=e:(o.interactionStateUpdateRequested=null,null===(n=t.onInteractionStateChange)||void 0===n||n.call(t,e))},d=(0,r.useMemo)((()=>{const e={...t,style:null,width:"100%",height:"100%",parent:a.current,canvas:s.current,layers:l.layers,views:l.views,onViewStateChange:u,onInteractionStateChange:h};return delete e._customRender,o.deck&&o.deck.setProps(e),e}),[t]);(0,r.useEffect)((()=>{const e=t.Deck||U3;return o.deck=function(t,e,n){const r=new e({...n,_customRender:e=>{t.redrawReason=e;const n=r.getViewports();t.lastRenderedViewports!==n?t.forceUpdate():Y3(t)}});return r}(o,e,{...d,parent:a.current,canvas:s.current}),()=>{var t;return null===(t=o.deck)||void 0===t?void 0:t.finalize()}}),[]),V3((()=>{Y3(o);const{viewStateUpdateRequested:t,interactionStateUpdateRequested:e}=o;t&&u(t),e&&h(e)})),(0,r.useImperativeHandle)(e,(()=>function(t){return{get deck(){return t.deck},pickObject:e=>t.deck.pickObject(e),pickMultipleObjects:e=>t.deck.pickMultipleObjects(e),pickObjects:e=>t.deck.pickObjects(e)}}(o)),[]);const f=o.deck&&o.deck.isInitialized?o.deck.getViewports():void 0,{ContextProvider:p,width:m,height:g,id:y,style:v}=t,{containerStyle:_,canvasStyle:b}=(0,r.useMemo)((()=>function(t){let{width:e,height:n,style:r}=t;const i={position:"absolute",zIndex:0,left:0,top:0,width:e,height:n},o={left:0,top:0};if(r)for(const a in r)a in X3?o[a]=r[a]:i[a]=r[a];return{containerStyle:i,canvasStyle:o}}({width:m,height:g,style:v})),[m,g,v]);if(!o.viewStateUpdateRequested&&o.lastRenderedViewports===f||o.version!==n){o.lastRenderedViewports=f,o.version=n;const t=function(t){let{children:e,deck:n,ContextProvider:i}=t;const{viewManager:o}=n||{};if(!o||!o.views.length)return[];const a={},s=o.views[0].id;for(const r of e){let t=s,e=r;H3(r)&&W3(r.type,y1)&&(t=r.props.id||s,e=r.props.children);const n=o.getViewport(t),i=o.getViewState(t);if(n){i.padding=n.padding;const{x:r,y:o,width:s,height:l}=n;e=q3(e,{x:r,y:o,width:s,height:l,viewport:n,viewState:i}),a[t]||(a[t]={viewport:n,children:[]}),a[t].children.push(e)}}return Object.keys(a).map((t=>{const{viewport:e,children:o}=a[t],{x:s,y:l,width:c,height:u}=e,h={position:"absolute",left:s,top:l,width:c,height:u},d="view-".concat(t),f=(0,r.createElement)("div",{key:d,id:d,style:h},...o);if(i){const o={viewport:e,container:n.canvas.offsetParent,eventManager:n.eventManager,onViewStateChange:e=>{e.viewId=t,n._onViewStateChange(e)}};return(0,r.createElement)(i,{key:d,value:o},f)}return f}))}({children:l.children,deck:o.deck,ContextProvider:p}),e=(0,r.createElement)("canvas",{key:"canvas",id:y||"deckgl-overlay",ref:s,style:b});o.control=(0,r.createElement)("div",{id:"".concat(y||"deckgl","-wrapper"),ref:a,style:_},[e,t])}return c=!1,o.control}));K3.defaultProps=U3.defaultProps;const $3=K3,J3=r.createContext(null);function Q3(t,e){if(t===e)return!0;if(!t||!e)return!1;if(Array.isArray(t)){if(!Array.isArray(e)||t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(!Q3(t[n],e[n]))return!1;return!0}if(Array.isArray(e))return!1;if("object"===typeof t&&"object"===typeof e){const n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(const i of n){if(!e.hasOwnProperty(i))return!1;if(!Q3(t[i],e[i]))return!1}return!0}return!1}function t5(t,e){if(!t.getProjection)return;const n=t.getProjection();Q3(n,e.getProjection())||e.setProjection(n)}function e5(t){return{longitude:t.center.lng,latitude:t.center.lat,zoom:t.zoom,pitch:t.pitch,bearing:t.bearing,padding:t.padding}}function n5(t,e){const n=e.viewState||e;let r=!1;if("longitude"in n&&"latitude"in n){const e=t.center;t.center=new e.constructor(n.longitude,n.latitude),r=r||e!==t.center}if("zoom"in n){const e=t.zoom;t.zoom=n.zoom,r=r||e!==t.zoom}if("bearing"in n){const e=t.bearing;t.bearing=n.bearing,r=r||e!==t.bearing}if("pitch"in n){const e=t.pitch;t.pitch=n.pitch,r=r||e!==t.pitch}return n.padding&&!t.isPaddingEqual(n.padding)&&(r=!0,t.padding=n.padding),r}const r5=["type","source","source-layer","minzoom","maxzoom","filter","layout"];function i5(t){if(!t)return null;if("string"===typeof t)return t;if("toJS"in t&&(t=t.toJS()),!t.layers)return t;const e={};for(const r of t.layers)e[r.id]=r;const n=t.layers.map((t=>{let n=null;"interactive"in t&&(n=Object.assign({},t),delete n.interactive);const r=e[t.ref];if(r){n=n||Object.assign({},t),delete n.ref;for(const t of r5)t in r&&(n[t]=r[t])}return n||t}));return{...t,layers:n}}const o5={version:8,sources:{},layers:[]},a5={mousedown:"onMouseDown",mouseup:"onMouseUp",mouseover:"onMouseOver",mousemove:"onMouseMove",click:"onClick",dblclick:"onDblClick",mouseenter:"onMouseEnter",mouseleave:"onMouseLeave",mouseout:"onMouseOut",contextmenu:"onContextMenu",touchstart:"onTouchStart",touchend:"onTouchEnd",touchmove:"onTouchMove",touchcancel:"onTouchCancel"},s5={movestart:"onMoveStart",move:"onMove",moveend:"onMoveEnd",dragstart:"onDragStart",drag:"onDrag",dragend:"onDragEnd",zoomstart:"onZoomStart",zoom:"onZoom",zoomend:"onZoomEnd",rotatestart:"onRotateStart",rotate:"onRotate",rotateend:"onRotateEnd",pitchstart:"onPitchStart",pitch:"onPitch",pitchend:"onPitchEnd"},l5={wheel:"onWheel",boxzoomstart:"onBoxZoomStart",boxzoomend:"onBoxZoomEnd",boxzoomcancel:"onBoxZoomCancel",resize:"onResize",load:"onLoad",render:"onRender",idle:"onIdle",remove:"onRemove",data:"onData",styledata:"onStyleData",sourcedata:"onSourceData",error:"onError"},c5=["minZoom","maxZoom","minPitch","maxPitch","maxBounds","projection","renderWorldCopies"],u5=["scrollZoom","boxZoom","dragRotate","dragPan","keyboard","doubleClickZoom","touchZoomRotate","touchPitch"];class h5{constructor(t,e,n){this._map=null,this._internalUpdate=!1,this._inRender=!1,this._hoveredFeatures=null,this._deferredEvents={move:!1,zoom:!1,pitch:!1,rotate:!1},this._onEvent=t=>{const e=this.props[l5[t.type]];e?e(t):"error"===t.type&&console.error(t.error)},this._onPointerEvent=t=>{"mousemove"!==t.type&&"mouseout"!==t.type||this._updateHover(t);const e=this.props[a5[t.type]];e&&(this.props.interactiveLayerIds&&"mouseover"!==t.type&&"mouseout"!==t.type&&(t.features=this._hoveredFeatures||this._queryRenderedFeatures(t.point)),e(t),delete t.features)},this._onCameraEvent=t=>{if(!this._internalUpdate){const e=this.props[s5[t.type]];e&&e(t)}t.type in this._deferredEvents&&(this._deferredEvents[t.type]=!1)},this._MapClass=t,this.props=e,this._initialize(n)}get map(){return this._map}get transform(){return this._renderTransform}setProps(t){const e=this.props;this.props=t;const n=this._updateSettings(t,e);n&&this._createShadowTransform(this._map);const r=this._updateSize(t),i=this._updateViewState(t,!0);this._updateStyle(t,e),this._updateStyleComponents(t,e),this._updateHandlers(t,e),(n||r||i&&!this._map.isMoving())&&this.redraw()}static reuse(t,e){const n=h5.savedMaps.pop();if(!n)return null;const r=n.map,i=r.getContainer();for(e.className=i.className;i.childNodes.length>0;)e.appendChild(i.childNodes[0]);r._container=e;const o=r._resizeObserver;o&&(o.disconnect(),o.observe(e)),n.setProps({...t,styleDiffing:!1}),r.resize();const{initialViewState:a}=t;return a&&(a.bounds?r.fitBounds(a.bounds,{...a.fitBoundsOptions,duration:0}):n._updateViewState(a,!1)),r.isStyleLoaded()?r.fire("load"):r.once("styledata",(()=>r.fire("load"))),r._update(),n}_initialize(t){const{props:e}=this,{mapStyle:n=o5}=e,r={...e,...e.initialViewState,accessToken:e.mapboxAccessToken||d5()||null,container:t,style:i5(n)},i=r.initialViewState||r.viewState||r;if(Object.assign(r,{center:[i.longitude||0,i.latitude||0],zoom:i.zoom||0,pitch:i.pitch||0,bearing:i.bearing||0}),e.gl){const t=HTMLCanvasElement.prototype.getContext;HTMLCanvasElement.prototype.getContext=()=>(HTMLCanvasElement.prototype.getContext=t,e.gl)}const o=new this._MapClass(r);i.padding&&o.setPadding(i.padding),e.cursor&&(o.getCanvas().style.cursor=e.cursor),this._createShadowTransform(o);const a=o._render;o._render=t=>{this._inRender=!0,a.call(o,t),this._inRender=!1};const s=o._renderTaskQueue.run;o._renderTaskQueue.run=t=>{s.call(o._renderTaskQueue,t),this._onBeforeRepaint()},o.on("render",(()=>this._onAfterRepaint()));const l=o.fire;o.fire=this._fireEvent.bind(this,l),o.on("resize",(()=>{this._renderTransform.resize(o.transform.width,o.transform.height)})),o.on("styledata",(()=>{this._updateStyleComponents(this.props,{}),t5(o.transform,this._renderTransform)})),o.on("sourcedata",(()=>this._updateStyleComponents(this.props,{})));for(const c in a5)o.on(c,this._onPointerEvent);for(const c in s5)o.on(c,this._onCameraEvent);for(const c in l5)o.on(c,this._onEvent);this._map=o}recycle(){const t=this.map.getContainer().querySelector("[mapboxgl-children]");null===t||void 0===t||t.remove(),h5.savedMaps.push(this)}destroy(){this._map.remove()}redraw(){const t=this._map;!this._inRender&&t.style&&(t._frame&&(t._frame.cancel(),t._frame=null),t._render())}_createShadowTransform(t){const e=function(t){const e=t.clone();return e.pixelsToGLUnits=t.pixelsToGLUnits,e}(t.transform);t.painter.transform=e,this._renderTransform=e}_updateSize(t){const{viewState:e}=t;if(e){const t=this._map;if(e.width!==t.transform.width||e.height!==t.transform.height)return t.resize(),!0}return!1}_updateViewState(t,e){if(this._internalUpdate)return!1;const n=this._map,r=this._renderTransform,{zoom:i,pitch:o,bearing:a}=r,s=n.isMoving();s&&(r.cameraElevationReference="sea");const l=n5(r,{...e5(n.transform),...t});if(s&&(r.cameraElevationReference="ground"),l&&e){const t=this._deferredEvents;t.move=!0,t.zoom||(t.zoom=i!==r.zoom),t.rotate||(t.rotate=a!==r.bearing),t.pitch||(t.pitch=o!==r.pitch)}return s||n5(n.transform,t),l}_updateSettings(t,e){const n=this._map;let r=!1;for(const i of c5)if(i in t&&!Q3(t[i],e[i])){r=!0;const e=n["set".concat(i[0].toUpperCase()).concat(i.slice(1))];null===e||void 0===e||e.call(n,t[i])}return r}_updateStyle(t,e){if(t.cursor!==e.cursor&&(this._map.getCanvas().style.cursor=t.cursor||""),t.mapStyle!==e.mapStyle){const{mapStyle:e=o5,styleDiffing:n=!0}=t,r={diff:n};return"localIdeographFontFamily"in t&&(r.localIdeographFontFamily=t.localIdeographFontFamily),this._map.setStyle(i5(e),r),!0}return!1}_updateStyleComponents(t,e){const n=this._map;let r=!1;return n.isStyleLoaded()&&("light"in t&&n.setLight&&!Q3(t.light,e.light)&&(r=!0,n.setLight(t.light)),"fog"in t&&n.setFog&&!Q3(t.fog,e.fog)&&(r=!0,n.setFog(t.fog)),"terrain"in t&&n.setTerrain&&!Q3(t.terrain,e.terrain)&&(t.terrain&&!n.getSource(t.terrain.source)||(r=!0,n.setTerrain(t.terrain)))),r}_updateHandlers(t,e){var n,r;const i=this._map;let o=!1;for(const a of u5){const s=null===(n=t[a])||void 0===n||n;Q3(s,null===(r=e[a])||void 0===r||r)||(o=!0,s?i[a].enable(s):i[a].disable())}return o}_queryRenderedFeatures(t){const e=this._map,n=e.transform,{interactiveLayerIds:r=[]}=this.props;try{return e.transform=this._renderTransform,e.queryRenderedFeatures(t,{layers:r.filter(e.getLayer.bind(e))})}catch(ci){return[]}finally{e.transform=n}}_updateHover(t){var e;const{props:n}=this;if(n.interactiveLayerIds&&(n.onMouseMove||n.onMouseEnter||n.onMouseLeave)){const n=t.type,r=(null===(e=this._hoveredFeatures)||void 0===e?void 0:e.length)>0,i=this._queryRenderedFeatures(t.point),o=i.length>0;!o&&r&&(t.type="mouseleave",this._onPointerEvent(t)),this._hoveredFeatures=i,o&&!r&&(t.type="mouseenter",this._onPointerEvent(t)),t.type=n}else this._hoveredFeatures=null}_fireEvent(t,e,n){const r=this._map,i=r.transform,o="string"===typeof e?e:e.type;return"move"===o&&this._updateViewState(this.props,!1),o in s5&&("object"===typeof e&&(e.viewState=e5(i)),this._map.isMoving())?(r.transform=this._renderTransform,t.call(r,e,n),r.transform=i,r):(t.call(r,e,n),r)}_onBeforeRepaint(){const t=this._map;this._internalUpdate=!0;for(const n in this._deferredEvents)this._deferredEvents[n]&&t.fire(n);this._internalUpdate=!1;const e=this._map.transform;t.transform=this._renderTransform,this._onAfterRepaint=()=>{t5(this._renderTransform,e),t.transform=e}}}function d5(){let t=null;if("undefined"!==typeof location){const e=/access_token=([^&\/]*)/.exec(location.search);t=e&&e[1]}try{t=t||{NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.MapboxAccessToken}catch(ci){}try{t=t||{NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_MAPBOX_ACCESS_TOKEN}catch(Emt){}return t}h5.savedMaps=[];const f5=["setMaxBounds","setMinZoom","setMaxZoom","setMinPitch","setMaxPitch","setRenderWorldCopies","setProjection","setStyle","addSource","removeSource","addLayer","removeLayer","setLayerZoomRange","setFilter","setPaintProperty","setLayoutProperty","setLight","setTerrain","setFog","remove"];function p5(t){if(!t)return null;const e=t.map,n={getMap:()=>e,getCenter:()=>t.transform.center,getZoom:()=>t.transform.zoom,getBearing:()=>t.transform.bearing,getPitch:()=>t.transform.pitch,getPadding:()=>t.transform.padding,getBounds:()=>t.transform.getBounds(),project:n=>{const r=e.transform;e.transform=t.transform;const i=e.project(n);return e.transform=r,i},unproject:n=>{const r=e.transform;e.transform=t.transform;const i=e.unproject(n);return e.transform=r,i},queryTerrainElevation:(n,r)=>{const i=e.transform;e.transform=t.transform;const o=e.queryTerrainElevation(n,r);return e.transform=i,o},queryRenderedFeatures:(n,r)=>{const i=e.transform;e.transform=t.transform;const o=e.queryRenderedFeatures(n,r);return e.transform=i,o}};for(const r of function(t){const e=new Set;let n=t;for(;n;){for(const r of Object.getOwnPropertyNames(n))"_"!==r[0]&&"function"===typeof t[r]&&"fire"!==r&&"setEventedParent"!==r&&e.add(r);n=Object.getPrototypeOf(n)}return Array.from(e)}(e))r in n||f5.includes(r)||(n[r]=e[r].bind(e));return n}const m5="undefined"!==typeof document?r.useLayoutEffect:r.useEffect,g5=["baseApiUrl","maxParallelImageRequests","workerClass","workerCount","workerUrl"];const y5=r.createContext(null);function v5(t,e,n){const i=(0,r.useContext)(J3),[o,a]=(0,r.useState)(null),s=(0,r.useRef)(),{current:l}=(0,r.useRef)({mapLib:null,map:null});(0,r.useEffect)((()=>{const e=t.mapLib;let r,o=!0;return Promise.resolve(e||n).then((e=>{if(!o)return;if(!e)throw new Error("Invalid mapLib");const n="Map"in e?e:e.default;if(!n.Map)throw new Error("Invalid mapLib");if(function(t,e){for(const r of g5)r in e&&(t[r]=e[r]);const{RTLTextPlugin:n="https://api.mapbox.com/mapbox-gl-js/plugins/mapbox-gl-rtl-text/v0.2.3/mapbox-gl-rtl-text.js"}=e;n&&t.getRTLTextPluginStatus&&"unavailable"===t.getRTLTextPluginStatus()&&t.setRTLTextPlugin(n,(t=>{t&&console.error(t)}),!0)}(n,t),n.supported&&!n.supported(t))throw new Error("Map is not supported by this browser");t.reuseMaps&&(r=h5.reuse(t,s.current)),r||(r=new h5(n.Map,t,s.current)),l.map=p5(r),l.mapLib=n,a(r),null===i||void 0===i||i.onMapMount(l.map,t.id)})).catch((e=>{const{onError:n}=t;n?n({type:"error",target:null,originalEvent:null,error:e}):console.error(e)})),()=>{o=!1,r&&(null===i||void 0===i||i.onMapUnmount(t.id),t.reuseMaps?r.recycle():r.destroy())}}),[]),m5((()=>{o&&o.setProps(t)})),(0,r.useImperativeHandle)(e,(()=>l.map),[o]);const c=(0,r.useMemo)((()=>({position:"relative",width:"100%",height:"100%",...t.style})),[t.style]);return r.createElement("div",{id:t.id,ref:s,style:c},o&&r.createElement(y5.Provider,{value:l},r.createElement("div",{"mapboxgl-children":"",style:{height:"100%"}},t.children)))}const _5=/box|flex|grid|column|lineHeight|fontWeight|opacity|order|tabSize|zIndex/;function b5(t,e){if(!t||!e)return;const n=t.style;for(const r in e){const t=e[r];Number.isFinite(t)&&!_5.test(r)?n[r]="".concat(t,"px"):n[r]=t}}(0,r.memo)((0,r.forwardRef)((function(t,e){const{map:n,mapLib:i}=(0,r.useContext)(y5),o=(0,r.useRef)({props:t});o.current.props=t;const s=(0,r.useMemo)((()=>{let e=!1;r.Children.forEach(t.children,(t=>{t&&(e=!0)}));const n={...t,element:e?document.createElement("div"):null},a=new i.Marker(n);return a.setLngLat([t.longitude,t.latitude]),a.getElement().addEventListener("click",(t=>{var e,n;null===(n=(e=o.current.props).onClick)||void 0===n||n.call(e,{type:"click",target:a,originalEvent:t})})),a.on("dragstart",(t=>{var e,n;const r=t;r.lngLat=s.getLngLat(),null===(n=(e=o.current.props).onDragStart)||void 0===n||n.call(e,r)})),a.on("drag",(t=>{var e,n;const r=t;r.lngLat=s.getLngLat(),null===(n=(e=o.current.props).onDrag)||void 0===n||n.call(e,r)})),a.on("dragend",(t=>{var e,n;const r=t;r.lngLat=s.getLngLat(),null===(n=(e=o.current.props).onDragEnd)||void 0===n||n.call(e,r)})),a}),[]);(0,r.useEffect)((()=>(s.addTo(n.getMap()),()=>{s.remove()})),[]);const{longitude:l,latitude:c,offset:u,style:h,draggable:d=!1,popup:f=null,rotation:p=0,rotationAlignment:m="auto",pitchAlignment:g="auto"}=t;return(0,r.useEffect)((()=>{b5(s.getElement(),h)}),[h]),(0,r.useImperativeHandle)(e,(()=>s),[]),s.getLngLat().lng===l&&s.getLngLat().lat===c||s.setLngLat([l,c]),u&&!function(t,e){const n=Array.isArray(t)?t[0]:t?t.x:0,r=Array.isArray(t)?t[1]:t?t.y:0,i=Array.isArray(e)?e[0]:e?e.x:0,o=Array.isArray(e)?e[1]:e?e.y:0;return n===i&&r===o}(s.getOffset(),u)&&s.setOffset(u),s.isDraggable()!==d&&s.setDraggable(d),s.getRotation()!==p&&s.setRotation(p),s.getRotationAlignment()!==m&&s.setRotationAlignment(m),s.getPitchAlignment()!==g&&s.setPitchAlignment(g),s.getPopup()!==f&&s.setPopup(f),(0,a.createPortal)(t.children,s.getElement())})));function x5(t){return new Set(t?t.trim().split(/\s+/):[])}(0,r.memo)((0,r.forwardRef)((function(t,e){const{map:n,mapLib:i}=(0,r.useContext)(y5),o=(0,r.useMemo)((()=>document.createElement("div")),[]),s=(0,r.useRef)({props:t});s.current.props=t;const l=(0,r.useMemo)((()=>{const e={...t},n=new i.Popup(e);return n.setLngLat([t.longitude,t.latitude]),n.once("open",(t=>{var e,n;null===(n=(e=s.current.props).onOpen)||void 0===n||n.call(e,t)})),n}),[]);if((0,r.useEffect)((()=>{const t=t=>{var e,n;null===(n=(e=s.current.props).onClose)||void 0===n||n.call(e,t)};return l.on("close",t),l.setDOMContent(o).addTo(n.getMap()),()=>{l.off("close",t),l.isOpen()&&l.remove()}}),[]),(0,r.useEffect)((()=>{b5(l.getElement(),t.style)}),[t.style]),(0,r.useImperativeHandle)(e,(()=>l),[]),l.isOpen()&&(l.getLngLat().lng===t.longitude&&l.getLngLat().lat===t.latitude||l.setLngLat([t.longitude,t.latitude]),t.offset&&!Q3(l.options.offset,t.offset)&&l.setOffset(t.offset),l.options.anchor===t.anchor&&l.options.maxWidth===t.maxWidth||(l.options.anchor=t.anchor,l.setMaxWidth(t.maxWidth)),l.options.className!==t.className)){const e=x5(l.options.className),n=x5(t.className);for(const t of e)n.has(t)||l.removeClassName(t);for(const t of n)e.has(t)||l.addClassName(t);l.options.className=t.className}return(0,a.createPortal)(t.children,o)})));const w5=function(t,e,n,i){const o=(0,r.useContext)(y5),a=(0,r.useMemo)((()=>t(o)),[]);return(0,r.useEffect)((()=>{const t=i||n||e,r="function"===typeof e&&"function"===typeof n?e:null,s="function"===typeof n?n:"function"===typeof e?e:null,{map:l}=o;return l.hasControl(a)||(l.addControl(a,null===t||void 0===t?void 0:t.position),r&&r(o)),()=>{s&&s(o),l.hasControl(a)&&l.removeControl(a)}}),[]),a};(0,r.memo)((function(t){const e=w5((e=>{let{mapLib:n}=e;return new n.AttributionControl(t)}),{position:t.position});return(0,r.useEffect)((()=>{b5(e._container,t.style)}),[t.style]),null}));(0,r.memo)((function(t){const e=w5((e=>{let{mapLib:n}=e;return new n.FullscreenControl({container:t.containerId&&document.getElementById(t.containerId)})}),{position:t.position});return(0,r.useEffect)((()=>{b5(e._controlContainer,t.style)}),[t.style]),null}));(0,r.memo)((0,r.forwardRef)((function(t,e){const n=(0,r.useRef)({props:t}),i=w5((e=>{let{mapLib:r}=e;const i=new r.GeolocateControl(t),o=i._setupUI;return i._setupUI=t=>{i._container.hasChildNodes()||o(t)},i.on("geolocate",(t=>{var e,r;null===(r=(e=n.current.props).onGeolocate)||void 0===r||r.call(e,t)})),i.on("error",(t=>{var e,r;null===(r=(e=n.current.props).onError)||void 0===r||r.call(e,t)})),i.on("outofmaxbounds",(t=>{var e,r;null===(r=(e=n.current.props).onOutOfMaxBounds)||void 0===r||r.call(e,t)})),i.on("trackuserlocationstart",(t=>{var e,r;null===(r=(e=n.current.props).onTrackUserLocationStart)||void 0===r||r.call(e,t)})),i.on("trackuserlocationend",(t=>{var e,r;null===(r=(e=n.current.props).onTrackUserLocationEnd)||void 0===r||r.call(e,t)})),i}),{position:t.position});return n.current.props=t,(0,r.useImperativeHandle)(e,(()=>i),[]),(0,r.useEffect)((()=>{b5(i._container,t.style)}),[t.style]),null})));(0,r.memo)((function(t){const e=w5((e=>{let{mapLib:n}=e;return new n.NavigationControl(t)}),{position:t.position});return(0,r.useEffect)((()=>{b5(e._container,t.style)}),[t.style]),null}));(0,r.memo)((function(t){const e=w5((e=>{let{mapLib:n}=e;return new n.ScaleControl(t)}),{position:t.position}),n=(0,r.useRef)(t),i=n.current;n.current=t;const{style:o}=t;return void 0!==t.maxWidth&&t.maxWidth!==i.maxWidth&&(e.options.maxWidth=t.maxWidth),void 0!==t.unit&&t.unit!==i.unit&&e.setUnit(t.unit),(0,r.useEffect)((()=>{b5(e._container,o)}),[o]),null}));const S5=Promise.resolve().then(n.t.bind(n,879,23)),E5=r.forwardRef((function(t,e){return v5(t,e,S5)}));var T5=n(879),M5=n.n(T5);var A5=xi("div",{baseStyle:{boxShadow:"none",backgroundClip:"padding-box",cursor:"default",color:"transparent",pointerEvents:"none",userSelect:"none","&::before, &::after, *":{visibility:"hidden"}}}),C5=Be("skeleton-start-color"),P5=Be("skeleton-end-color"),k5=Di({from:{opacity:0},to:{opacity:1}}),I5=Di({from:{borderColor:C5.reference,background:C5.reference},to:{borderColor:P5.reference,background:P5.reference}}),O5=wi(((t,e)=>{const n={...t,fadeDuration:"number"===typeof t.fadeDuration?t.fadeDuration:.4,speed:"number"===typeof t.speed?t.speed:.8},i=Wi("Skeleton",n),o=function(){const t=(0,r.useRef)(!0);return(0,r.useEffect)((()=>{t.current=!1}),[]),t.current}(),{startColor:a="",endColor:s="",isLoaded:l,fadeDuration:c,speed:u,className:h,fitContent:d,...f}=Mn(n),[p,m]=Fi("colors",[a,s]),g=function(t){const e=(0,r.useRef)();return(0,r.useEffect)((()=>{e.current=t}),[t]),e.current}(l),y=kt("chakra-skeleton",h),v={...p&&{[C5.variable]:p},...m&&{[P5.variable]:m}};if(l){const t=o||g?"none":"".concat(k5," ").concat(c,"s");return(0,Si.jsx)(xi.div,{ref:e,className:y,__css:{animation:t},...f})}return(0,Si.jsx)(A5,{ref:e,className:y,...f,__css:{width:d?"fit-content":void 0,...i,...v,_dark:{...i._dark,...v},animation:"".concat(u,"s linear infinite alternate ").concat(I5)}})}));O5.displayName="Skeleton";const L5=t=>{let{color:e}=t;return(0,Si.jsxs)(Si.Fragment,{children:[(0,Si.jsx)(O5,{height:"100vh",startColor:"white",endColor:"".concat(e,".100")}),(0,Si.jsx)("div",{style:{position:"absolute",top:"50%",left:"50%",transform:"translateX(-50%) translateY(-50%)"},children:(0,Si.jsx)(Hi,{thickness:"4px",speed:"0.65s",size:"xl",color:"".concat(e,".500")})})]})};M5().workerClass=n(6881).A;const j5={touchZoom:!0,keyboard:{moveSpeed:!1},dragMode:"pan"},z5={latitude:25.68,longitude:-100.3,zoom:9.5,transitionDuration:100,pitch:0,bearing:0,minZoom:9,maxZoom:14},R5={latitude:25.65534,longitude:-100.30427,zoom:13.2,transitionDuration:800,pitch:0,bearing:0},D5=[-100.7,-99.9],B5=[25.35,26.01];function F5(t){let{viewState:e,infanciasHover:n,children:i,onHover:o,onDragStart:a}=t;const s=pat(),[l]=ki("(max-width: 800px)"),c=new hI({width:s.width,height:s.height}),{latitude:u,longitude:h,zoom:d}=c.fitBounds([[D5[0],B5[0]],[D5[1],B5[1]]]),[f,p]=(0,r.useState)({...e,zoom:l?.9*e.zoom:d}),[m,g]=(0,r.useState)(null),y=(0,r.useCallback)(((t,e)=>{n&&n(t,e)}),[]),{outline:v,color:_}=((0,r.useCallback)((0,sK.debounce)(y,200),[]),olt()),{data:b}=wat(Uot,{features:[]}),[x]=Fi("colors",["".concat(_,".800")]);return(0,r.useEffect)((()=>{p({...f,zoom:l?.9*e.zoom:e.zoom})}),[l]),b?(0,Si.jsx)(Si.Fragment,{children:(0,Si.jsxs)($3,{style:{position:"relative"},viewState:f,onViewStateChange:t=>{let{viewState:e}=t;e.longitude=Math.min(D5[1],Math.max(D5[0],e.longitude)),e.latitude=Math.min(B5[1],Math.max(B5[0],e.latitude)),p(e)},controller:j5,onHover:o,onDragStart:a,children:[(0,Si.jsx)(E5,{width:"100%",height:"100%",mapStyle:"mapbox://styles/lameouchi/clvboacrd041l01pk9gyf4yve",mapboxAccessToken:"pk.eyJ1IjoibGFtZW91Y2hpIiwiYSI6ImNsa3ZqdHZtMDBjbTQzcXBpNzRyc2ljNGsifQ.287002jl7xT9SBub-dbBbQ"}),i,(0,Si.jsx)(zz,{id:"primary_routes",data:Kot,getLineColor:[100,120,150,255],getLineWidth:50}),(0,Si.jsx)(zz,{id:"municipality-layer",data:b.features,getFillColor:[128,174,0,0],getLineColor:[100,100,100,250],getLineWidth:40}),v?(0,Si.jsx)(zz,{...v.props,getLineWidth:200,getLineColor:[...gat(x),255],getFillColor:[160,160,160,100]}):null,(0,Si.jsx)(yj,{id:"municipios-text-layer",data:b.features,getPosition:t=>[t.properties.longitude,t.properties.latitude],getText:t=>cK[t.properties.NOMGEO],getSize:t=>f.zoom,getColor:[0,0,0,150],fontFamily:"Inter, Courier, monospace"}),n&&m&&(0,Si.jsx)(GL,{id:"circle-layer",data:[{position:m,size:1e3}],pickable:!0,stroked:!0,filled:!0,lineWidthMinPixels:1,getPosition:m,getRadius:1100,getFillColor:[0,0,0,20],getLineWidth:80,getLineColor:[80,80,80]})]})}):(0,Si.jsx)(L5,{})}const N5=t=>{let{hoverInfo:e,children:n}=t;const{color:i}=olt(),o=(0,r.useRef)(null),[a,s]=(0,r.useState)({opacity:0}),[l]=ki("(max-width: 800px)");return(0,r.useLayoutEffect)((()=>{if(o.current&&e){const t=o.current.offsetWidth,n=o.current.offsetHeight;let r,i;l?(r="calc(100% - ".concat(n,"px - 55px)"),i="calc(100% - ".concat(t,"px - 10px)")):(r="calc(".concat(e.y,"px - ").concat(n,"px - 10px)"),i="calc(".concat(e.x,"px - ").concat(t/2,"px)")),s({left:i,top:r,opacity:1,transition:"opacity 0.2s, transform 0.2s"})}else s({opacity:0})}),[e,l]),(0,Si.jsx)(Ei,{ref:o,className:"tooltip-container".concat(l?"-mobile":""),borderColor:"".concat(i,".300"),borderWidth:1,style:{position:"absolute",zIndex:1,pointerEvents:"none",transform:l?"translate(-50%, -10px)":"translateY(-10px)",fontSize:l?"10px":"0.8rem",width:l?"50dvw":"auto",...a},children:n})};function U5(t,e){const n=(0,r.useId)();return(0,r.useMemo)((()=>t||[e,n].filter(Boolean).join("-")),[t,e,n])}function V5(){return!("undefined"===typeof window||!window.document||!window.document.createElement)}var W5=V5()?r.useLayoutEffect:r.useEffect;function G5(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];const n=(0,r.useRef)(t);return W5((()=>{n.current=t})),(0,r.useCallback)((function(){for(var t,e=arguments.length,r=new Array(e),i=0;i<e;i++)r[i]=arguments[i];return null==(t=n.current)?void 0:t.call(n,...r)}),e)}function q5(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{onClose:e,onOpen:n,isOpen:i,id:o}=t,a=G5(n),s=G5(e),[l,c]=(0,r.useState)(t.defaultIsOpen||!1),[u,h]=function(t,e){const n=void 0!==t;return[n,n&&"undefined"!==typeof t?t:e]}(i,l),d=U5(o,"disclosure"),f=(0,r.useCallback)((()=>{u||c(!1),null==s||s()}),[u,s]),p=(0,r.useCallback)((()=>{u||c(!0),null==a||a()}),[u,a]),m=(0,r.useCallback)((()=>{(h?f:p)()}),[h,p,f]);return{isOpen:!!h,onOpen:p,onClose:f,onToggle:m,isControlled:u,getButtonProps:function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{...t,"aria-expanded":h,"aria-controls":d,onClick:Rn(t.onClick,m)}},getDisclosureProps:function(){return{...arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},hidden:!h,id:d}}}}var H5=Object.defineProperty,Z5=(t,e,n)=>(((t,e,n)=>{e in t?H5(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n})(t,"symbol"!==typeof e?e+"":e,n),n),X5=new class{constructor(){Z5(this,"modals"),this.modals=new Map}add(t){return this.modals.set(t,this.modals.size+1),this.modals.size}remove(t){this.modals.delete(t)}isTopModal(t){return!!t&&this.modals.get(t)===this.modals.size}};function Y5(t,e){const[n,i]=(0,r.useState)(0);return(0,r.useEffect)((()=>{const n=t.current;if(n){if(e){const t=X5.add(n);i(t)}return()=>{X5.remove(n),i(0)}}}),[e,t]),n}var K5=function(t){return"undefined"===typeof document?null:(Array.isArray(t)?t[0]:t).ownerDocument.body},$5=new WeakMap,J5=new WeakMap,Q5={},t4=0,e4=function(t){return t&&(t.host||e4(t.parentNode))},n4=function(t,e,n,r){var i=function(t,e){return e.map((function(e){if(t.contains(e))return e;var n=e4(e);return n&&t.contains(n)?n:(console.error("aria-hidden",e,"in not contained inside",t,". Doing nothing"),null)})).filter((function(t){return Boolean(t)}))}(e,Array.isArray(t)?t:[t]);Q5[n]||(Q5[n]=new WeakMap);var o=Q5[n],a=[],s=new Set,l=new Set(i),c=function(t){t&&!s.has(t)&&(s.add(t),c(t.parentNode))};i.forEach(c);var u=function(t){t&&!l.has(t)&&Array.prototype.forEach.call(t.children,(function(t){if(s.has(t))u(t);else try{var e=t.getAttribute(r),i=null!==e&&"false"!==e,l=($5.get(t)||0)+1,c=(o.get(t)||0)+1;$5.set(t,l),o.set(t,c),a.push(t),1===l&&i&&J5.set(t,!0),1===c&&t.setAttribute(n,"true"),i||t.setAttribute(r,"true")}catch(pbt){console.error("aria-hidden: cannot operate on ",t,pbt)}}))};return u(e),s.clear(),t4++,function(){a.forEach((function(t){var e=$5.get(t)-1,i=o.get(t)-1;$5.set(t,e),o.set(t,i),e||(J5.has(t)||t.removeAttribute(r),J5.delete(t)),i||t.removeAttribute(n)})),--t4||($5=new WeakMap,$5=new WeakMap,J5=new WeakMap,Q5={})}},r4=function(t,e,n){void 0===n&&(n="data-aria-hidden");var r=Array.from(Array.isArray(t)?t:[t]),i=e||K5(t);return i?(r.push.apply(r,Array.from(i.querySelectorAll("[aria-live]"))),n4(r,i,n,"aria-hidden")):function(){return null}};function i4(t){const{isOpen:e,onClose:n,id:i,closeOnOverlayClick:o=!0,closeOnEsc:a=!0,useInert:s=!0,onOverlayClick:l,onEsc:c}=t,u=(0,r.useRef)(null),h=(0,r.useRef)(null),[d,f,p]=function(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),i=1;i<e;i++)n[i-1]=arguments[i];const o=(0,r.useId)(),a=t||o;return(0,r.useMemo)((()=>n.map((t=>"".concat(t,"-").concat(a)))),[a,n])}(i,"chakra-modal","chakra-modal--header","chakra-modal--body");!function(t,e){const n=t.current;(0,r.useEffect)((()=>{if(t.current&&e)return r4(t.current)}),[e,t,n])}(u,e&&s);const m=Y5(u,e),g=(0,r.useRef)(null),y=(0,r.useCallback)((t=>{g.current=t.target}),[]),v=(0,r.useCallback)((t=>{"Escape"===t.key&&(t.stopPropagation(),a&&(null==n||n()),null==c||c())}),[a,n,c]),[_,b]=(0,r.useState)(!1),[x,w]=(0,r.useState)(!1),S=(0,r.useCallback)((function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return{role:"dialog",...t,ref:Xi(e,u),id:d,tabIndex:-1,"aria-modal":!0,"aria-labelledby":_?f:void 0,"aria-describedby":x?p:void 0,onClick:Dt(t.onClick,(t=>t.stopPropagation()))}}),[p,x,d,f,_]),E=(0,r.useCallback)((t=>{t.stopPropagation(),g.current===t.target&&X5.isTopModal(u.current)&&(o&&(null==n||n()),null==l||l())}),[n,o,l]),T=(0,r.useCallback)((function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return{...t,ref:Xi(e,h),onClick:Dt(t.onClick,E),onKeyDown:Dt(t.onKeyDown,v),onMouseDown:Dt(t.onMouseDown,y)}}),[v,y,E]);return{isOpen:e,onClose:n,headerId:f,bodyId:p,setBodyMounted:w,setHeaderMounted:b,dialogRef:u,overlayRef:h,getDialogProps:S,getDialogContainerProps:T,index:m}}var[o4,a4]=Ii({name:"ModalStylesContext",errorMessage:"useModalStyles returned is 'undefined'. Seems you forgot to wrap the components in \"<Modal />\" "}),[s4,l4]=Ii({strict:!0,name:"ModalContext",errorMessage:"useModalContext: `context` is undefined. Seems you forgot to wrap modal components in `<Modal />`"}),c4=t=>{const e={scrollBehavior:"outside",autoFocus:!0,trapFocus:!0,returnFocusOnClose:!0,blockScrollOnMount:!0,allowPinchZoom:!1,motionPreset:"scale",lockFocusAcrossFrames:!0,...t},{portalProps:n,children:r,autoFocus:i,trapFocus:o,initialFocusRef:a,finalFocusRef:s,returnFocusOnClose:l,blockScrollOnMount:c,allowPinchZoom:u,preserveScrollBarGap:h,motionPreset:d,lockFocusAcrossFrames:f,onCloseComplete:p}=e,m=Gi("Modal",e),g={...i4(e),autoFocus:i,trapFocus:o,initialFocusRef:a,finalFocusRef:s,returnFocusOnClose:l,blockScrollOnMount:c,allowPinchZoom:u,preserveScrollBarGap:h,motionPreset:d,lockFocusAcrossFrames:f};return(0,Si.jsx)(s4,{value:g,children:(0,Si.jsx)(o4,{value:m,children:(0,Si.jsx)(Ap,{onExitComplete:p,children:g.isOpen&&(0,Si.jsx)(as,{...n,children:r})})})})};c4.displayName="Modal";var u4={ease:[.25,.1,.25,1],easeIn:[.4,0,1,1],easeOut:[0,0,.2,1],easeInOut:[.4,0,.2,1]};var h4={enter:{duration:.2,ease:u4.easeOut},exit:{duration:.1,ease:u4.easeIn}},d4=(t,e)=>({...t,delay:"number"===typeof e?e:null==e?void 0:e.enter}),f4=(t,e)=>({...t,delay:"number"===typeof e?e:null==e?void 0:e.exit}),p4={enter:function(){let{transition:t,transitionEnd:e,delay:n}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};var r;return{opacity:1,transition:null!=(r=null==t?void 0:t.enter)?r:d4(h4.enter,n),transitionEnd:null==e?void 0:e.enter}},exit:function(){let{transition:t,transitionEnd:e,delay:n}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};var r;return{opacity:0,transition:null!=(r=null==t?void 0:t.exit)?r:f4(h4.exit,n),transitionEnd:null==e?void 0:e.exit}}},m4={initial:"exit",animate:"enter",exit:"exit",variants:p4},g4=(0,r.forwardRef)((function(t,e){const{unmountOnExit:n,in:r,className:i,transition:o,transitionEnd:a,delay:s,...l}=t,c=r||n?"enter":"exit",u=!n||r&&n,h={transition:o,transitionEnd:a,delay:s};return(0,Si.jsx)(Ap,{custom:h,children:u&&(0,Si.jsx)(bp.div,{ref:e,className:kt("chakra-fade",i),custom:h,...m4,animate:c,...l})})}));g4.displayName="Fade";var y4=xi(bp.div),v4=wi(((t,e)=>{const{className:n,transition:r,motionProps:i,...o}=t,a=kt("chakra-modal__overlay",n),s={pos:"fixed",left:"0",top:"0",w:"100vw",h:"100vh",...a4().overlay},{motionPreset:l}=l4(),c=i||("none"===l?{}:m4);return(0,Si.jsx)(y4,{...c,__css:s,ref:e,className:a,...o})}));v4.displayName="ModalOverlay";var _4={initial:t=>{let{offsetX:e,offsetY:n,transition:r,transitionEnd:i,delay:o}=t;var a;return{opacity:0,x:e,y:n,transition:null!=(a=null==r?void 0:r.exit)?a:f4(h4.exit,o),transitionEnd:null==i?void 0:i.exit}},enter:t=>{let{transition:e,transitionEnd:n,delay:r}=t;var i;return{opacity:1,x:0,y:0,transition:null!=(i=null==e?void 0:e.enter)?i:d4(h4.enter,r),transitionEnd:null==n?void 0:n.enter}},exit:t=>{let{offsetY:e,offsetX:n,transition:r,transitionEnd:i,reverse:o,delay:a}=t;var s;const l={x:n,y:e};return{opacity:0,transition:null!=(s=null==r?void 0:r.exit)?s:f4(h4.exit,a),...o?{...l,transitionEnd:null==i?void 0:i.exit}:{transitionEnd:{...l,...null==i?void 0:i.exit}}}}},b4={initial:"initial",animate:"enter",exit:"exit",variants:_4},x4=(0,r.forwardRef)((function(t,e){const{unmountOnExit:n,in:r,reverse:i=!0,className:o,offsetX:a=0,offsetY:s=8,transition:l,transitionEnd:c,delay:u,...h}=t,d=!n||r&&n,f=r||n?"enter":"exit",p={offsetX:a,offsetY:s,reverse:i,transition:l,transitionEnd:c,delay:u};return(0,Si.jsx)(Ap,{custom:p,children:d&&(0,Si.jsx)(bp.div,{ref:e,className:kt("chakra-offset-slide",o),custom:p,...b4,animate:f,...h})})}));x4.displayName="SlideFade";var w4={exit:t=>{let{reverse:e,initialScale:n,transition:r,transitionEnd:i,delay:o}=t;var a;return{opacity:0,...e?{scale:n,transitionEnd:null==i?void 0:i.exit}:{transitionEnd:{scale:n,...null==i?void 0:i.exit}},transition:null!=(a=null==r?void 0:r.exit)?a:f4(h4.exit,o)}},enter:t=>{let{transitionEnd:e,transition:n,delay:r}=t;var i;return{opacity:1,scale:1,transition:null!=(i=null==n?void 0:n.enter)?i:d4(h4.enter,r),transitionEnd:null==e?void 0:e.enter}}},S4={initial:"exit",animate:"enter",exit:"exit",variants:w4},E4=(0,r.forwardRef)((function(t,e){const{unmountOnExit:n,in:r,reverse:i=!0,initialScale:o=.95,className:a,transition:s,transitionEnd:l,delay:c,...u}=t,h=!n||r&&n,d=r||n?"enter":"exit",f={initialScale:o,reverse:i,transition:s,transitionEnd:l,delay:c};return(0,Si.jsx)(Ap,{custom:f,children:h&&(0,Si.jsx)(bp.div,{ref:e,className:kt("chakra-offset-slide",a),...S4,animate:d,custom:f,...u})})}));E4.displayName="ScaleFade";var T4={slideInBottom:{...b4,custom:{offsetY:16,reverse:!0}},slideInRight:{...b4,custom:{offsetX:16,reverse:!0}},slideInTop:{...b4,custom:{offsetY:-16,reverse:!0}},slideInLeft:{...b4,custom:{offsetX:-16,reverse:!0}},scale:{...S4,custom:{initialScale:.95,reverse:!0}},none:{}},M4=xi(bp.section),A4=t=>T4[t||"none"],C4=(0,r.forwardRef)(((t,e)=>{const{preset:n,motionProps:r=A4(n),...i}=t;return(0,Si.jsx)(M4,{ref:e,...r,...i})}));C4.displayName="ModalTransition";var P4="data-focus-lock",k4="data-focus-lock-disabled";function I4(t,e){return"function"===typeof t?t(e):t&&(t.current=e),t}var O4="undefined"!==typeof window?r.useLayoutEffect:r.useEffect,L4=new WeakMap;function j4(t,e){var n=function(t,e){var n=(0,r.useState)((function(){return{value:t,callback:e,facade:{get current(){return n.value},set current(t){var e=n.value;e!==t&&(n.value=t,n.callback(t,e))}}}}))[0];return n.callback=e,n.facade}(e||null,(function(e){return t.forEach((function(t){return I4(t,e)}))}));return O4((function(){var e=L4.get(n);if(e){var r=new Set(e),i=new Set(t),o=n.current;r.forEach((function(t){i.has(t)||I4(t,null)})),i.forEach((function(t){r.has(t)||I4(t,o)}))}L4.set(n,t)}),[t]),n}var z4={width:"1px",height:"0px",padding:0,overflow:"hidden",position:"fixed",top:"1px",left:"1px"},R4=function(t){var e=t.children,n=void 0===e?null:e;return r.createElement(r.Fragment,null,r.createElement("div",{key:"guard-first","data-focus-guard":!0,"data-focus-auto-guard":!0,style:z4}),n,n&&r.createElement("div",{key:"guard-last","data-focus-guard":!0,"data-focus-auto-guard":!0,style:z4}))};R4.propTypes={};var D4=function(){return D4=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},D4.apply(this,arguments)};function B4(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n}Object.create;function F4(t,e,n){if(n||2===arguments.length)for(var r,i=0,o=e.length;i<o;i++)!r&&i in e||(r||(r=Array.prototype.slice.call(e,0,i)),r[i]=e[i]);return t.concat(r||Array.prototype.slice.call(e))}Object.create;"function"===typeof SuppressedError&&SuppressedError;function N4(t){return t}function U4(t,e){void 0===e&&(e=N4);var n=[],r=!1,i={read:function(){if(r)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return n.length?n[n.length-1]:t},useMedium:function(t){var i=e(t,r);return n.push(i),function(){n=n.filter((function(t){return t!==i}))}},assignSyncMedium:function(t){for(r=!0;n.length;){var e=n;n=[],e.forEach(t)}n={push:function(e){return t(e)},filter:function(){return n}}},assignMedium:function(t){r=!0;var e=[];if(n.length){var i=n;n=[],i.forEach(t),e=n}var o=function(){var n=e;e=[],n.forEach(t)},a=function(){return Promise.resolve().then(o)};a(),n={push:function(t){e.push(t),a()},filter:function(t){return e=e.filter(t),n}}}};return i}function V4(t,e){return void 0===e&&(e=N4),U4(t,e)}function W4(t){void 0===t&&(t={});var e=U4(null);return e.options=D4({async:!0,ssr:!1},t),e}var G4=V4({},(function(t){return{target:t.target,currentTarget:t.currentTarget}})),q4=V4(),H4=V4(),Z4=W4({async:!0,ssr:"undefined"!==typeof document}),X4=(0,r.createContext)(void 0),Y4=[],K4=r.forwardRef((function(t,e){var n,i=r.useState(),o=i[0],a=i[1],s=r.useRef(),l=r.useRef(!1),c=r.useRef(null),u=r.useState({})[1],h=t.children,d=t.disabled,f=void 0!==d&&d,p=t.noFocusGuards,m=void 0!==p&&p,g=t.persistentFocus,y=void 0!==g&&g,v=t.crossFrame,_=void 0===v||v,b=t.autoFocus,x=void 0===b||b,w=(t.allowTextSelection,t.group),S=t.className,E=t.whiteList,T=t.hasPositiveIndices,M=t.shards,A=void 0===M?Y4:M,C=t.as,P=void 0===C?"div":C,k=t.lockProps,I=void 0===k?{}:k,O=t.sideCar,L=t.returnFocus,j=void 0!==L&&L,z=t.focusOptions,R=t.onActivation,D=t.onDeactivation,B=r.useState({})[0],F=r.useCallback((function(t){var e=t.captureFocusRestore;if(!c.current){var n,r=null==(n=document)?void 0:n.activeElement;c.current=r,r!==document.body&&(c.current=e(r))}s.current&&R&&R(s.current),l.current=!0,u()}),[R]),N=r.useCallback((function(){l.current=!1,D&&D(s.current),u()}),[D]),U=r.useCallback((function(t){var e=c.current;if(e){var n=("function"===typeof e?e():e)||document.body,r="function"===typeof j?j(n):j;if(r){var i="object"===typeof r?r:void 0;c.current=null,t?Promise.resolve().then((function(){return n.focus(i)})):n.focus(i)}}}),[j]),V=r.useCallback((function(t){l.current&&G4.useMedium(t)}),[]),W=q4.useMedium,G=r.useCallback((function(t){s.current!==t&&(s.current=t,a(t))}),[]);var q=Dn(((n={})[k4]=f&&"disabled",n[P4]=w,n),I),H=!0!==m,Z=H&&"tail"!==m,X=j4([e,G]),Y=r.useMemo((function(){return{observed:s,shards:A,enabled:!f,active:l.current}}),[f,l.current,A,o]);return r.createElement(r.Fragment,null,H&&[r.createElement("div",{key:"guard-first","data-focus-guard":!0,tabIndex:f?-1:0,style:z4}),T?r.createElement("div",{key:"guard-nearest","data-focus-guard":!0,tabIndex:f?-1:1,style:z4}):null],!f&&r.createElement(O,{id:B,sideCar:Z4,observed:o,disabled:f,persistentFocus:y,crossFrame:_,autoFocus:x,whiteList:E,shards:A,onActivation:F,onDeactivation:N,returnFocus:U,focusOptions:z}),r.createElement(P,Dn({ref:X},q,{className:S,onBlur:W,onFocus:V}),r.createElement(X4.Provider,{value:Y},h)),Z&&r.createElement("div",{"data-focus-guard":!0,tabIndex:f?-1:0,style:z4}))}));K4.propTypes={};const $4=K4;const J4=function(t,e){return function(n){var i,o=[];function a(){i=t(o.map((function(t){return t.props}))),e(i)}var s=function(t){function e(){return t.apply(this,arguments)||this}OU(e,t),e.peek=function(){return i};var s=e.prototype;return s.componentDidMount=function(){o.push(this),a()},s.componentDidUpdate=function(){a()},s.componentWillUnmount=function(){var t=o.indexOf(this);o.splice(t,1),a()},s.render=function(){return r.createElement(n,this.props)},e}(r.PureComponent);return ww(s,"displayName","SideEffect("+function(t){return t.displayName||t.name||"Component"}(n)+")"),s}};var Q4=function(t){for(var e=Array(t.length),n=0;n<t.length;++n)e[n]=t[n];return e},t6=function(t){return Array.isArray(t)?t:[t]},e6=function(t){return Array.isArray(t)?t[0]:t},n6=function(t){return t.parentNode&&t.parentNode.nodeType===Node.DOCUMENT_FRAGMENT_NODE?t.parentNode.host:t.parentNode},r6=function(t){return t===document||t&&t.nodeType===Node.DOCUMENT_NODE},i6=function(t,e){return!t||r6(t)||!function(t){if(t.nodeType!==Node.ELEMENT_NODE)return!1;var e=window.getComputedStyle(t,null);return!(!e||!e.getPropertyValue)&&("none"===e.getPropertyValue("display")||"hidden"===e.getPropertyValue("visibility"))}(t)&&!function(t){return t.hasAttribute("inert")}(t)&&e(n6(t))},o6=function(t,e){var n=t.get(e);if(void 0!==n)return n;var r=i6(e,o6.bind(void 0,t));return t.set(e,r),r},a6=function(t,e){var n=t.get(e);if(void 0!==n)return n;var r=function(t,e){return!(t&&!r6(t))||!!u6(t)&&e(n6(t))}(e,a6.bind(void 0,t));return t.set(e,r),r},s6=function(t){return t.dataset},l6=function(t){return"INPUT"===t.tagName},c6=function(t){return l6(t)&&"radio"===t.type},u6=function(t){var e=t.getAttribute("data-no-autofocus");return![!0,"true",""].includes(e)},h6=function(t){var e;return Boolean(t&&(null===(e=s6(t))||void 0===e?void 0:e.focusGuard))},d6=function(t){return!h6(t)},f6=function(t){return Boolean(t)},p6=function(t,e){var n=Math.max(0,t.tabIndex),r=Math.max(0,e.tabIndex),i=n-r,o=t.index-e.index;if(i){if(!n)return 1;if(!r)return-1}return i||o},m6=function(t,e,n){return Q4(t).map((function(t,e){var r=function(t){return t.tabIndex<0&&!t.hasAttribute("tabindex")?0:t.tabIndex}(t);return{node:t,index:e,tabIndex:n&&-1===r?(t.dataset||{}).focusGuard?0:-1:r}})).filter((function(t){return!e||t.tabIndex>=0})).sort(p6)},g6=["button:enabled","select:enabled","textarea:enabled","input:enabled","a[href]","area[href]","summary","iframe","object","embed","audio[controls]","video[controls]","[tabindex]","[contenteditable]","[autofocus]"].join(","),y6="".concat(g6,", [data-focus-guard]"),v6=function(t,e){return Q4((t.shadowRoot||t).children).reduce((function(t,n){return t.concat(n.matches(e?y6:g6)?[n]:[],v6(n))}),[])},_6=function(t,e){return t.reduce((function(t,n){var r,i=v6(n,e),o=(r=[]).concat.apply(r,i.map((function(t){return function(t,e){var n;return t instanceof HTMLIFrameElement&&(null===(n=t.contentDocument)||void 0===n?void 0:n.body)?_6([t.contentDocument.body],e):[t]}(t,e)})));return t.concat(o,n.parentNode?Q4(n.parentNode.querySelectorAll(g6)).filter((function(t){return t===n})):[])}),[])},b6=function(t,e){return Q4(t).filter((function(t){return o6(e,t)})).filter((function(t){return function(t){return!((l6(t)||function(t){return"BUTTON"===t.tagName}(t))&&("hidden"===t.type||t.disabled))}(t)}))},x6=function(t,e){return void 0===e&&(e=new Map),Q4(t).filter((function(t){return a6(e,t)}))},w6=function(t,e,n){return m6(b6(_6(t,n),e),!0,n)},S6=function(t,e){return m6(b6(_6(t),e),!1)},E6=function(t,e){return b6(function(t){var e=t.querySelectorAll("[".concat("data-autofocus-inside","]"));return Q4(e).map((function(t){return _6([t])})).reduce((function(t,e){return t.concat(e)}),[])}(t),e)},T6=function(t,e){return t.shadowRoot?T6(t.shadowRoot,e):!(void 0===Object.getPrototypeOf(t).contains||!Object.getPrototypeOf(t).contains.call(t,e))||Q4(t.children).some((function(t){var n;if(t instanceof HTMLIFrameElement){var r=null===(n=t.contentDocument)||void 0===n?void 0:n.body;return!!r&&T6(r,e)}return T6(t,e)}))},M6=function(t){if(void 0===t&&(t=document),t&&t.activeElement){var e=t.activeElement;return e.shadowRoot?M6(e.shadowRoot):e instanceof HTMLIFrameElement&&function(t){try{return t()}catch(pbt){return}}((function(){return e.contentWindow.document}))?M6(e.contentWindow.document):e}},A6=function(t){return t.parentNode?A6(t.parentNode):t},C6=function(t){return t6(t).filter(Boolean).reduce((function(t,e){var n=e.getAttribute(P4);return t.push.apply(t,n?function(t){for(var e=new Set,n=t.length,r=0;r<n;r+=1)for(var i=r+1;i<n;i+=1){var o=t[r].compareDocumentPosition(t[i]);(o&Node.DOCUMENT_POSITION_CONTAINED_BY)>0&&e.add(i),(o&Node.DOCUMENT_POSITION_CONTAINS)>0&&e.add(r)}return t.filter((function(t,n){return!e.has(n)}))}(Q4(A6(e).querySelectorAll("[".concat(P4,'="').concat(n,'"]:not([').concat(k4,'="disabled"])')))):[e]),t}),[])},P6=function(t,e){return void 0===e&&(e=M6(e6(t).ownerDocument)),!(!e||e.dataset&&e.dataset.focusGuard)&&C6(t).some((function(t){return T6(t,e)||function(t,e){return Boolean(Q4(t.querySelectorAll("iframe")).some((function(t){return function(t,e){return t===e}(t,e)})))}(t,e)}))},k6=function(t,e){t&&("focus"in t&&t.focus(e),"contentWindow"in t&&t.contentWindow&&t.contentWindow.focus())},I6=function(t,e){return c6(t)&&t.name?function(t,e){return e.filter(c6).filter((function(e){return e.name===t.name})).filter((function(t){return t.checked}))[0]||t}(t,e):t},O6=function(t){return t[0]&&t.length>1?I6(t[0],t):t[0]},L6=function(t,e){return t.indexOf(I6(e,t))},j6="NEW_FOCUS",z6=function(t,e,n,r,i){var o=t.length,a=t[0],s=t[o-1],l=h6(r);if(!(r&&t.indexOf(r)>=0)){var c=void 0!==r?n.indexOf(r):-1,u=i?n.indexOf(i):c,h=i?t.indexOf(i):-1;if(-1===c)return-1!==h?h:j6;if(-1===h)return j6;var d=c-u,f=n.indexOf(a),p=n.indexOf(s),m=function(t){var e=new Set;return t.forEach((function(n){return e.add(I6(n,t))})),t.filter((function(t){return e.has(t)}))}(n),g=(void 0!==r?m.indexOf(r):-1)-(i?m.indexOf(i):c);if(!d&&h>=0)return h;if(0===e.length)return h;var y=L6(t,e[0]),v=L6(t,e[e.length-1]);return c<=f&&l&&Math.abs(d)>1?v:c>=p&&l&&Math.abs(d)>1?y:d&&Math.abs(g)>1?h:c<=f?v:c>p?y:d?Math.abs(d)>1?h:(o+h+d)%o:void 0}},R6=function(t,e,n){var r,i=t.map((function(t){return t.node})),o=x6(i.filter((r=n,function(t){var e,n=null===(e=s6(t))||void 0===e?void 0:e.autofocus;return t.autofocus||void 0!==n&&"false"!==n||r.indexOf(t)>=0})));return o&&o.length?O6(o):O6(x6(e))},D6=function(t,e){return void 0===e&&(e=[]),e.push(t),t.parentNode&&D6(t.parentNode.host||t.parentNode,e),e},B6=function(t,e){for(var n=D6(t),r=D6(e),i=0;i<n.length;i+=1){var o=n[i];if(r.indexOf(o)>=0)return o}return!1},F6=function(t,e,n){var r=t6(t),i=t6(e),o=r[0],a=!1;return i.filter(Boolean).forEach((function(t){a=B6(a||t,t)||a,n.filter(Boolean).forEach((function(t){var e=B6(o,t);e&&(a=!a||T6(e,a)?e:B6(e,a))}))})),a},N6=function(t,e){return t.reduce((function(t,n){return t.concat(E6(n,e))}),[])},U6=function(t,e){var n=M6(t6(t).length>0?document:e6(t).ownerDocument),r=C6(t).filter(d6),i=F6(n||t,t,r),o=new Map,a=S6(r,o),s=a.filter((function(t){var e=t.node;return d6(e)}));if(s[0]){var l=S6([i],o).map((function(t){return t.node})),c=function(t,e){var n=new Map;return e.forEach((function(t){return n.set(t.node,t)})),t.map((function(t){return n.get(t)})).filter(f6)}(l,s),u=c.map((function(t){return t.node})),h=c.filter((function(t){return t.tabIndex>=0})).map((function(t){return t.node})),d=z6(u,h,l,n,e);if(d===j6){var f=R6(a,h,N6(r,o))||R6(a,u,N6(r,o));return f?{node:f}:void console.warn("focus-lock: cannot find any node to move focus into")}return void 0===d?d:c[d]}},V6=0,W6=!1,G6=function(t,e,n){void 0===n&&(n={});var r=U6(t,e);if(!W6&&r){if(V6>2)return console.error("FocusLock: focus-fighting detected. Only one focus management system could be active. See https://github.com/theKashey/focus-lock/#focus-fighting"),W6=!0,void setTimeout((function(){W6=!1}),1);V6++,k6(r.node,n.focusOptions),V6--}},q6=function(t,e,n){void 0===e&&(e={});var r=function(t){return Object.assign({scope:document.body,cycle:!0,onlyTabbable:!0},t)}(e),i=function(t,e,n){if(!t||!e)return console.error("no element or scope given"),{};var r=t6(e);if(r.every((function(e){return!T6(e,t)})))return console.error("Active element is not contained in the scope"),{};var i=n?w6(r,new Map):S6(r,new Map),o=i.findIndex((function(e){return e.node===t}));return-1!==o?{prev:i[o-1],next:i[o+1],first:i[0],last:i[i.length-1]}:void 0}(t,r.scope,r.onlyTabbable);if(i){var o=n(i,r.cycle);o&&k6(o.node,r.focusOptions)}},H6=function(t,e,n){var r,i=function(t,e){var n=e?w6(t6(t),new Map):S6(t6(t),new Map);return{first:n[0],last:n[n.length-1]}}(t,null===(r=e.onlyTabbable)||void 0===r||r),o=i[n];o&&k6(o.node,e.focusOptions)};function Z6(t){if(!t)return null;if("undefined"===typeof WeakRef)return function(){return t||null};var e=t?new WeakRef(t):null;return function(){return(null===e||void 0===e?void 0:e.deref())||null}}function X6(t){setTimeout(t,1)}var Y6=function(t){return t&&"current"in t?t.current:t},K6=function(){return document&&document.activeElement===document.body||function(t){void 0===t&&(t=document);var e=M6(t);return!!e&&Q4(t.querySelectorAll("[".concat("data-no-focus-lock","]"))).some((function(t){return T6(t,e)}))}()},$6=null,J6=null,Q6=null,t8=!1,e8=function(){return!0};function n8(t,e,n,r){var i=null,o=t;do{var a=r[o];if(a.guard)a.node.dataset.focusAutoGuard&&(i=a);else{if(!a.lockItem)break;if(o!==t)return;i=null}}while((o+=n)!==e);i&&(i.node.tabIndex=0)}var r8=function t(e,n,r){return n&&(n.host===e&&(!n.activeElement||r.contains(n.activeElement))||n.parentNode&&t(e,n.parentNode,r))},i8=function(){var t,e=!1;if($6){var n=$6,r=n.observed,i=n.persistentFocus,o=n.autoFocus,a=n.shards,s=n.crossFrame,l=n.focusOptions,c=r||Q6&&Q6.portaledElement,u=document&&document.activeElement;if(c){var h=[c].concat(a.map(Y6).filter(Boolean));if(u&&!function(t){return($6.whiteList||e8)(t)}(u)||(i||(s?Boolean(t8):"meanwhile"===t8)||!K6()||!J6&&o)&&(c&&!(P6(h)||u&&function(t,e){return e.some((function(e){return r8(t,e,e)}))}(u,h)||(t=u,Q6&&Q6.portaledElement===t))&&(document&&!J6&&u&&!o?(u.blur&&u.blur(),document.body.focus()):(e=G6(h,J6,{focusOptions:l}),Q6={})),t8=!1,J6=document&&document.activeElement),document&&u!==document.activeElement&&document.querySelector("[data-focus-auto-guard]")){var d=document&&document.activeElement,f=function(t){var e=C6(t).filter(d6),n=F6(t,t,e),r=m6(_6([n],!0),!0,!0),i=_6(e,!1);return r.map((function(t){var e=t.node;return{node:e,index:t.index,lockItem:i.indexOf(e)>=0,guard:h6(e)}}))}(h),p=f.map((function(t){return t.node})).indexOf(d);p>-1&&(f.filter((function(t){var e=t.guard,n=t.node;return e&&n.dataset.focusAutoGuard})).forEach((function(t){return t.node.removeAttribute("tabIndex")})),n8(p,f.length,1,f),n8(p,-1,-1,f))}}}return e},o8=function(t){i8()&&t&&(t.stopPropagation(),t.preventDefault())},a8=function(){return X6(i8)},s8=function(t){var e=t.target,n=t.currentTarget;n.contains(e)||(Q6={observerNode:n,portaledElement:e})},l8=function(){t8="just",X6((function(){t8="meanwhile"}))};var c8={moveFocusInside:G6,focusInside:P6,focusNextElement:function(t,e){void 0===e&&(e={}),q6(t,e,(function(t,e){var n=t.next,r=t.first;return n||e&&r}))},focusPrevElement:function(t,e){void 0===e&&(e={}),q6(t,e,(function(t,e){var n=t.prev,r=t.last;return n||e&&r}))},focusFirstElement:function(t,e){void 0===e&&(e={}),H6(t,e,"first")},focusLastElement:function(t,e){void 0===e&&(e={}),H6(t,e,"last")},captureFocusRestore:function(t){var e=function(t){if(!t)return null;for(var e=[],n=t;n&&n!==document.body;)e.push({current:Z6(n),parent:Z6(n.parentElement),left:Z6(n.previousElementSibling),right:Z6(n.nextElementSibling)}),n=n.parentElement;return{element:Z6(t),stack:e,ownerDocument:t.ownerDocument}}(t);return function(){return function(t){var e,n,r,i,o;if(t)for(var a=t.stack,s=t.ownerDocument,l=new Map,c=0,u=a;c<u.length;c++){var h=u[c],d=null===(e=h.parent)||void 0===e?void 0:e.call(h);if(d&&s.contains(d)){for(var f=null===(n=h.left)||void 0===n?void 0:n.call(h),p=h.current(),m=d.contains(p)?p:void 0,g=null===(r=h.right)||void 0===r?void 0:r.call(h),y=w6([d],l),v=null!==(o=null!==(i=null!==m&&void 0!==m?m:null===f||void 0===f?void 0:f.nextElementSibling)&&void 0!==i?i:g)&&void 0!==o?o:f;v;){for(var _=0,b=y;_<b.length;_++){var x=b[_];if(null===v||void 0===v?void 0:v.contains(x.node))return x.node}v=v.nextElementSibling}if(y.length)return y[0].node}}}(e)}}};G4.assignSyncMedium(s8),q4.assignMedium(a8),H4.assignMedium((function(t){return t(c8)}));const u8=J4((function(t){return t.filter((function(t){return!t.disabled}))}),(function(t){var e=t.slice(-1)[0];e&&!$6&&(document.addEventListener("focusin",o8),document.addEventListener("focusout",a8),window.addEventListener("blur",l8));var n=$6,r=n&&e&&e.id===n.id;$6=e,n&&!r&&(n.onDeactivation(),t.filter((function(t){return t.id===n.id})).length||n.returnFocus(!e)),e?(J6=null,r&&n.observed===e.observed||e.onActivation(c8),i8(),X6(i8)):(document.removeEventListener("focusin",o8),document.removeEventListener("focusout",a8),window.removeEventListener("blur",l8),J6=null)}))((function(){return null}));var h8=r.forwardRef((function(t,e){return r.createElement($4,Dn({sideCar:u8,ref:e},t))})),d8=$4.propTypes||{};d8.sideCar,kU(d8,["sideCar"]);h8.propTypes={};const f8=h8;var p8=t=>t.hasAttribute("tabindex"),m8=t=>p8(t)&&-1===t.tabIndex;function g8(t){return!(!t.parentElement||!g8(t.parentElement))||t.hidden}function y8(t){if(!no(t)||g8(t)||function(t){return!0===Boolean(t.getAttribute("disabled"))||!0===Boolean(t.getAttribute("aria-disabled"))}(t))return!1;const{localName:e}=t;if(["input","select","textarea","button"].indexOf(e)>=0)return!0;const n={a:()=>t.hasAttribute("href"),audio:()=>t.hasAttribute("controls"),video:()=>t.hasAttribute("controls")};return e in n?n[e]():!!function(t){const e=t.getAttribute("contenteditable");return"false"!==e&&null!=e}(t)||p8(t)}var v8,_8=["input:not(:disabled):not([disabled])","select:not(:disabled):not([disabled])","textarea:not(:disabled):not([disabled])","embed","iframe","object","a[href]","area[href]","button:not(:disabled):not([disabled])","[tabindex]","audio[controls]","video[controls]","*[tabindex]:not([aria-disabled])","*[contenteditable]"].join(),b8=t=>t.offsetWidth>0&&t.offsetHeight>0;function x8(t){const e=Array.from(t.querySelectorAll(_8));return e.unshift(t),e.filter((t=>y8(t)&&b8(t)))}var w8=null!=(v8=f8.default)?v8:f8,S8=t=>{const{initialFocusRef:e,finalFocusRef:n,contentRef:i,restoreFocus:o,children:a,isDisabled:s,autoFocus:l,persistentFocus:c,lockFocusAcrossFrames:u}=t,h=(0,r.useCallback)((()=>{if(null==e?void 0:e.current)e.current.focus();else if(null==i?void 0:i.current){0===x8(i.current).length&&requestAnimationFrame((()=>{var t;null==(t=i.current)||t.focus()}))}}),[e,i]),d=(0,r.useCallback)((()=>{var t;null==(t=null==n?void 0:n.current)||t.focus()}),[n]),f=o&&!n;return(0,Si.jsx)(w8,{crossFrame:u,persistentFocus:c,autoFocus:l,disabled:s,onActivation:h,onDeactivation:d,returnFocus:f,children:a})};S8.displayName="FocusLock";var E8="right-scroll-bar-position",T8="width-before-scroll-bar",M8=W4(),A8=function(){},C8=r.forwardRef((function(t,e){var n=r.useRef(null),i=r.useState({onScrollCapture:A8,onWheelCapture:A8,onTouchMoveCapture:A8}),o=i[0],a=i[1],s=t.forwardProps,l=t.children,c=t.className,u=t.removeScrollBar,h=t.enabled,d=t.shards,f=t.sideCar,p=t.noIsolation,m=t.inert,g=t.allowPinchZoom,y=t.as,v=void 0===y?"div":y,_=t.gapMode,b=B4(t,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noIsolation","inert","allowPinchZoom","as","gapMode"]),x=f,w=j4([n,e]),S=D4(D4({},b),o);return r.createElement(r.Fragment,null,h&&r.createElement(x,{sideCar:M8,removeScrollBar:u,shards:d,noIsolation:p,inert:m,setCallbacks:a,allowPinchZoom:!!g,lockRef:n,gapMode:_}),s?r.cloneElement(r.Children.only(l),D4(D4({},S),{ref:w})):r.createElement(v,D4({},S,{className:c,ref:w}),l))}));C8.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1},C8.classNames={fullWidth:T8,zeroRight:E8};var P8,k8=function(t){var e=t.sideCar,n=B4(t,["sideCar"]);if(!e)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var i=e.read();if(!i)throw new Error("Sidecar medium not found");return r.createElement(i,D4({},n))};k8.isSideCarExport=!0;function I8(){if(!document)return null;var t=document.createElement("style");t.type="text/css";var e=P8||n.nc;return e&&t.setAttribute("nonce",e),t}var O8=function(){var t=0,e=null;return{add:function(n){var r;0==t&&(e=I8())&&(!function(t,e){t.styleSheet?t.styleSheet.cssText=e:t.appendChild(document.createTextNode(e))}(e,n),r=e,(document.head||document.getElementsByTagName("head")[0]).appendChild(r)),t++},remove:function(){! --t&&e&&(e.parentNode&&e.parentNode.removeChild(e),e=null)}}},L8=function(){var t=function(){var t=O8();return function(e,n){r.useEffect((function(){return t.add(e),function(){t.remove()}}),[e&&n])}}();return function(e){var n=e.styles,r=e.dynamic;return t(n,r),null}},j8={left:0,top:0,right:0,gap:0},z8=function(t){return parseInt(t||"",10)||0},R8=function(t){if(void 0===t&&(t="margin"),"undefined"===typeof window)return j8;var e=function(t){var e=window.getComputedStyle(document.body),n=e["padding"===t?"paddingLeft":"marginLeft"],r=e["padding"===t?"paddingTop":"marginTop"],i=e["padding"===t?"paddingRight":"marginRight"];return[z8(n),z8(r),z8(i)]}(t),n=document.documentElement.clientWidth,r=window.innerWidth;return{left:e[0],top:e[1],right:e[2],gap:Math.max(0,r-n+e[2]-e[0])}},D8=L8(),B8="data-scroll-locked",F8=function(t,e,n,r){var i=t.left,o=t.top,a=t.right,s=t.gap;return void 0===n&&(n="margin"),"\n  .".concat("with-scroll-bars-hidden"," {\n   overflow: hidden ").concat(r,";\n   padding-right: ").concat(s,"px ").concat(r,";\n  }\n  body[").concat(B8,"] {\n    overflow: hidden ").concat(r,";\n    overscroll-behavior: contain;\n    ").concat([e&&"position: relative ".concat(r,";"),"margin"===n&&"\n    padding-left: ".concat(i,"px;\n    padding-top: ").concat(o,"px;\n    padding-right: ").concat(a,"px;\n    margin-left:0;\n    margin-top:0;\n    margin-right: ").concat(s,"px ").concat(r,";\n    "),"padding"===n&&"padding-right: ".concat(s,"px ").concat(r,";")].filter(Boolean).join(""),"\n  }\n  \n  .").concat(E8," {\n    right: ").concat(s,"px ").concat(r,";\n  }\n  \n  .").concat(T8," {\n    margin-right: ").concat(s,"px ").concat(r,";\n  }\n  \n  .").concat(E8," .").concat(E8," {\n    right: 0 ").concat(r,";\n  }\n  \n  .").concat(T8," .").concat(T8," {\n    margin-right: 0 ").concat(r,";\n  }\n  \n  body[").concat(B8,"] {\n    ").concat("--removed-body-scroll-bar-size",": ").concat(s,"px;\n  }\n")},N8=function(){var t=parseInt(document.body.getAttribute(B8)||"0",10);return isFinite(t)?t:0},U8=function(t){var e=t.noRelative,n=t.noImportant,i=t.gapMode,o=void 0===i?"margin":i;r.useEffect((function(){return document.body.setAttribute(B8,(N8()+1).toString()),function(){var t=N8()-1;t<=0?document.body.removeAttribute(B8):document.body.setAttribute(B8,t.toString())}}),[]);var a=r.useMemo((function(){return R8(o)}),[o]);return r.createElement(D8,{styles:F8(a,!e,o,n?"":"!important")})},V8=!1;if("undefined"!==typeof window)try{var W8=Object.defineProperty({},"passive",{get:function(){return V8=!0,!0}});window.addEventListener("test",W8,W8),window.removeEventListener("test",W8,W8)}catch(mbt){V8=!1}var G8=!!V8&&{passive:!1},q8=function(t,e){if(!(t instanceof Element))return!1;var n=window.getComputedStyle(t);return"hidden"!==n[e]&&!(n.overflowY===n.overflowX&&!function(t){return"TEXTAREA"===t.tagName}(t)&&"visible"===n[e])},H8=function(t,e){var n=e.ownerDocument,r=e;do{if("undefined"!==typeof ShadowRoot&&r instanceof ShadowRoot&&(r=r.host),Z8(t,r)){var i=X8(t,r);if(i[1]>i[2])return!0}r=r.parentNode}while(r&&r!==n.body);return!1},Z8=function(t,e){return"v"===t?function(t){return q8(t,"overflowY")}(e):function(t){return q8(t,"overflowX")}(e)},X8=function(t,e){return"v"===t?function(t){return[t.scrollTop,t.scrollHeight,t.clientHeight]}(e):function(t){return[t.scrollLeft,t.scrollWidth,t.clientWidth]}(e)},Y8=function(t){return"changedTouches"in t?[t.changedTouches[0].clientX,t.changedTouches[0].clientY]:[0,0]},K8=function(t){return[t.deltaX,t.deltaY]},$8=function(t){return t&&"current"in t?t.current:t},J8=function(t){return"\n  .block-interactivity-".concat(t," {pointer-events: none;}\n  .allow-interactivity-").concat(t," {pointer-events: all;}\n")},Q8=0,t9=[];function e9(t){for(var e=null;null!==t;)t instanceof ShadowRoot&&(e=t.host,t=t.host),t=t.parentNode;return e}const n9=(r9=function(t){var e=r.useRef([]),n=r.useRef([0,0]),i=r.useRef(),o=r.useState(Q8++)[0],a=r.useState(L8)[0],s=r.useRef(t);r.useEffect((function(){s.current=t}),[t]),r.useEffect((function(){if(t.inert){document.body.classList.add("block-interactivity-".concat(o));var e=F4([t.lockRef.current],(t.shards||[]).map($8),!0).filter(Boolean);return e.forEach((function(t){return t.classList.add("allow-interactivity-".concat(o))})),function(){document.body.classList.remove("block-interactivity-".concat(o)),e.forEach((function(t){return t.classList.remove("allow-interactivity-".concat(o))}))}}}),[t.inert,t.lockRef.current,t.shards]);var l=r.useCallback((function(t,e){if("touches"in t&&2===t.touches.length)return!s.current.allowPinchZoom;var r,o=Y8(t),a=n.current,l="deltaX"in t?t.deltaX:a[0]-o[0],c="deltaY"in t?t.deltaY:a[1]-o[1],u=t.target,h=Math.abs(l)>Math.abs(c)?"h":"v";if("touches"in t&&"h"===h&&"range"===u.type)return!1;var d=H8(h,u);if(!d)return!0;if(d?r=h:(r="v"===h?"h":"v",d=H8(h,u)),!d)return!1;if(!i.current&&"changedTouches"in t&&(l||c)&&(i.current=r),!r)return!0;var f=i.current||r;return function(t,e,n,r,i){var o=function(t,e){return"h"===t&&"rtl"===e?-1:1}(t,window.getComputedStyle(e).direction),a=o*r,s=n.target,l=e.contains(s),c=!1,u=a>0,h=0,d=0;do{var f=X8(t,s),p=f[0],m=f[1]-f[2]-o*p;(p||m)&&Z8(t,s)&&(h+=m,d+=p),s=s instanceof ShadowRoot?s.host:s.parentNode}while(!l&&s!==document.body||l&&(e.contains(s)||e===s));return(u&&(i&&Math.abs(h)<1||!i&&a>h)||!u&&(i&&Math.abs(d)<1||!i&&-a>d))&&(c=!0),c}(f,e,t,"h"===f?l:c,!0)}),[]),c=r.useCallback((function(t){var n=t;if(t9.length&&t9[t9.length-1]===a){var r="deltaY"in n?K8(n):Y8(n),i=e.current.filter((function(t){return t.name===n.type&&(t.target===n.target||n.target===t.shadowParent)&&(e=t.delta,i=r,e[0]===i[0]&&e[1]===i[1]);var e,i}))[0];if(i&&i.should)n.cancelable&&n.preventDefault();else if(!i){var o=(s.current.shards||[]).map($8).filter(Boolean).filter((function(t){return t.contains(n.target)}));(o.length>0?l(n,o[0]):!s.current.noIsolation)&&n.cancelable&&n.preventDefault()}}}),[]),u=r.useCallback((function(t,n,r,i){var o={name:t,delta:n,target:r,should:i,shadowParent:e9(r)};e.current.push(o),setTimeout((function(){e.current=e.current.filter((function(t){return t!==o}))}),1)}),[]),h=r.useCallback((function(t){n.current=Y8(t),i.current=void 0}),[]),d=r.useCallback((function(e){u(e.type,K8(e),e.target,l(e,t.lockRef.current))}),[]),f=r.useCallback((function(e){u(e.type,Y8(e),e.target,l(e,t.lockRef.current))}),[]);r.useEffect((function(){return t9.push(a),t.setCallbacks({onScrollCapture:d,onWheelCapture:d,onTouchMoveCapture:f}),document.addEventListener("wheel",c,G8),document.addEventListener("touchmove",c,G8),document.addEventListener("touchstart",h,G8),function(){t9=t9.filter((function(t){return t!==a})),document.removeEventListener("wheel",c,G8),document.removeEventListener("touchmove",c,G8),document.removeEventListener("touchstart",h,G8)}}),[]);var p=t.removeScrollBar,m=t.inert;return r.createElement(r.Fragment,null,m?r.createElement(a,{styles:J8(o)}):null,p?r.createElement(U8,{gapMode:t.gapMode}):null)},M8.useMedium(r9),k8);var r9,i9=r.forwardRef((function(t,e){return r.createElement(C8,D4({},t,{ref:e,sideCar:n9}))}));i9.classNames=C8.classNames;const o9=i9;function a9(t){const{autoFocus:e,trapFocus:n,dialogRef:i,initialFocusRef:o,blockScrollOnMount:a,allowPinchZoom:s,finalFocusRef:l,returnFocusOnClose:c,preserveScrollBarGap:u,lockFocusAcrossFrames:h,isOpen:d}=l4(),[f,p]=zd();(0,r.useEffect)((()=>{!f&&p&&setTimeout(p)}),[f,p]);const m=Y5(i,d);return(0,Si.jsx)(S8,{autoFocus:e,isDisabled:!n,initialFocusRef:o,finalFocusRef:l,restoreFocus:c,contentRef:i,lockFocusAcrossFrames:h,children:(0,Si.jsx)(o9,{removeScrollBar:!u,allowPinchZoom:s,enabled:1===m&&a,forwardProps:!0,children:t.children})})}var s9=wi(((t,e)=>{const{className:n,children:r,containerProps:i,motionProps:o,...a}=t,{getDialogProps:s,getDialogContainerProps:l}=l4(),c=s(a,e),u=l(i),h=kt("chakra-modal__content",n),d=a4(),f={display:"flex",flexDirection:"column",position:"relative",width:"100%",outline:0,...d.dialog},p={display:"flex",width:"100vw",height:"$100vh",position:"fixed",left:0,top:0,...d.dialogContainer},{motionPreset:m}=l4();return(0,Si.jsx)(a9,{children:(0,Si.jsx)(xi.div,{...u,className:"chakra-modal__content-container",tabIndex:-1,__css:p,children:(0,Si.jsx)(C4,{preset:m,motionProps:o,className:h,...c,__css:f,children:r})})})}));s9.displayName="ModalContent";var l9=wi(((t,e)=>{const{className:n,...i}=t,{headerId:o,setHeaderMounted:a}=l4();(0,r.useEffect)((()=>(a(!0),()=>a(!1))),[a]);const s=kt("chakra-modal__header",n),l={flex:0,...a4().header};return(0,Si.jsx)(xi.header,{ref:e,className:s,id:o,...i,__css:l})}));function c9(t){return(0,Si.jsx)(Qi,{focusable:"false","aria-hidden":!0,...t,children:(0,Si.jsx)("path",{fill:"currentColor",d:"M.439,21.44a1.5,1.5,0,0,0,2.122,2.121L11.823,14.3a.25.25,0,0,1,.354,0l9.262,9.263a1.5,1.5,0,1,0,2.122-2.121L14.3,12.177a.25.25,0,0,1,0-.354l9.263-9.262A1.5,1.5,0,0,0,21.439.44L12.177,9.7a.25.25,0,0,1-.354,0L2.561.44A1.5,1.5,0,0,0,.439,2.561L9.7,11.823a.25.25,0,0,1,0,.354Z"})})}l9.displayName="ModalHeader";var u9=wi((function(t,e){const n=Wi("CloseButton",t),{children:r,isDisabled:i,__css:o,...a}=Mn(t);return(0,Si.jsx)(xi.button,{type:"button","aria-label":"Close",ref:e,disabled:i,__css:{outline:0,display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0,...n,...o},...a,children:r||(0,Si.jsx)(c9,{width:"1em",height:"1em"})})}));u9.displayName="CloseButton";var h9=wi(((t,e)=>{const{onClick:n,className:r,...i}=t,{onClose:o}=l4(),a=kt("chakra-modal__close-btn",r),s=a4();return(0,Si.jsx)(u9,{ref:e,__css:s.closeButton,className:a,onClick:Dt(n,(t=>{t.stopPropagation(),o()})),...i})}));h9.displayName="ModalCloseButton";var d9=wi(((t,e)=>{const{className:n,...i}=t,{bodyId:o,setBodyMounted:a}=l4();(0,r.useEffect)((()=>(a(!0),()=>a(!1))),[a]);const s=kt("chakra-modal__body",n),l=a4();return(0,Si.jsx)(xi.div,{ref:e,className:s,id:o,...i,__css:l.body})}));d9.displayName="ModalBody";const f9=t=>{let{color:e,videoId:n,title:r,subtitle:i,text:o}=t;const{isOpen:a,onOpen:s,onClose:l}=q5(),[c]=ki("(max-width: 800px)");return(0,Si.jsxs)(Si.Fragment,{children:[(0,Si.jsx)(Ki,{variant:"solid",px:"2dvw",py:"15px",height:"auto",width:"auto",fontSize:c?"sm":"min(2dvw, 2dvh)",textColor:"white",onClick:s,colorScheme:e,style:{transform:"translateY(-50%)"},leftIcon:(0,Si.jsx)(Gz,{}),children:"Ver Video"}),(0,Si.jsxs)(c4,{isOpen:a,onClose:l,isCentered:!0,motionPreset:"slideInTop",children:[(0,Si.jsx)(v4,{}),(0,Si.jsxs)(s9,{bg:"white",color:"".concat(e,".700"),borderColor:"".concat(e,".700"),borderWidth:"0.15dvh",maxW:c?"calc(100% - 20px)":"50dvw",overflowY:"auto",children:[(0,Si.jsx)(l9,{className:"modal-header",fontSize:c?"20px":"min(3dvh, 6dvw)",children:r}),(0,Si.jsx)(h9,{}),(0,Si.jsxs)(d9,{p:6,children:[(0,Si.jsx)("h3",{className:"subtitle",style:{fontSize:c?"12px":"min(2dvh, 4dvw)"},children:i}),(0,Si.jsx)("p",{className:"description",mb:3,style:{fontSize:c?"10px":"min(1.6dvh, 3.2dvw)"},children:o}),(0,Si.jsx)("div",{className:"video-container",style:{margin:"10px 0 0 0"},children:(0,Si.jsx)("iframe",{src:"https://www.youtube.com/embed/".concat(n,"?rel=0"),frameBorder:"0",allowFullScreen:!0,style:{height:"100%",width:"100%"}})})]})]})]})]})},p9=t=>{let{videoId:e,title:n,subtitle:r,text:i,onClick:o,additionalContent:a}=t;const{color:s}=olt(),{isOpen:l,onOpen:c,onClose:u}=q5(),[h]=ki("(max-width: 800px)");return(0,Si.jsxs)(Si.Fragment,{children:[(0,Si.jsx)(Ki,{borderColor:"".concat(s,".500"),borderWidth:h?"0.12rem":"min(0.2dvh, 0.4dvw)",borderRadius:h?"5px":"min(0.8dvh, 1.6dvw)",bgColor:"".concat(s,".400"),w:h?"60px":"10%",h:h?"40px":"5dvh",fontSize:h?"14px":"min(1.2dvw, 2.4dvh)",right:h?"10px":"1.5dvw",top:h?"10px":"1.5dvh",textColor:"white",className:"button-popup",onClick:()=>{o&&o(),c()},colorScheme:s,children:"Video"}),(0,Si.jsxs)(c4,{isOpen:l,onClose:u,motionPreset:"slideInRight",children:[(0,Si.jsx)(v4,{}),(0,Si.jsxs)(s9,{bg:"white",color:"".concat(s,".500"),borderColor:"".concat(s,".600"),borderWidth:"1.5px",maxW:h?"calc(100% - 10px)":"calc(60vw - 60px)",maxH:h?"calc(100% - 10px)":"calc(100dvh - 120px)",mr:h?"10px":"1.5dvw",ml:h?"10px":"auto",mt:h?"100px":"8dvh",overflowY:"auto",children:[(0,Si.jsx)(l9,{className:"modal-header",fontSize:h?"20px":"min(3dvh, 6dvw)",children:n}),(0,Si.jsx)(h9,{}),(0,Si.jsxs)(d9,{p:6,children:[(0,Si.jsx)("h3",{className:"subtitle",style:{fontSize:h?"12px":"min(2dvh, 4dvw)"},children:r}),(0,Si.jsx)("p",{className:"description",mb:3,style:{fontSize:h?"10px":"min(1.6dvh, 3.2dvw)"},children:i}),(0,Si.jsx)("div",{className:"video-container",style:{margin:"10px 0 0 0"},children:(0,Si.jsx)("iframe",{src:"https://www.youtube.com/embed/".concat(e,"?rel=0"),frameBorder:"0",allowFullScreen:!0,style:{height:"100%",width:"100%"}})}),a&&(0,Si.jsx)(Si.Fragment,{children:(0,Si.jsxs)("div",{style:{marginTop:"28px"},children:[" ",(0,Si.jsx)(l9,{p:"0",marginBottom:"10px",children:a.title}),(0,Si.jsx)("h3",{style:{marginBottom:"4px"},children:a.subtitle}),(0,Si.jsx)("p",{style:{marginBottom:"10px"},children:a.text}),(0,Si.jsx)("div",{className:"video-container",children:(0,Si.jsx)("iframe",{src:"https://www.youtube.com/embed/".concat(a.videoId,"?rel=0"),frameBorder:"0",allowFullScreen:!0})})]})})]})]})]})]})},m9=[-5100,-2e3,-1e3,1,2e3,4e3,6e3,11100],g9=[{value:1990,label:"2020-1990"},{value:2e3,label:"2020-2000"},{value:2010,label:"2020-2010"}];class y9 extends Zj{getShaders(){const t=super.getShaders();return t.inject={"vs:#decl":"uniform float trailLength;\nattribute float instanceTimestamps;\nattribute float instanceNextTimestamps;\nvarying float vTime;\n","vs:#main-end":"vTime = instanceTimestamps + (instanceNextTimestamps - instanceTimestamps) * vPathPosition.y / vPathLength;\n","fs:#decl":"uniform bool fadeTrail;\nuniform float trailLength;\nuniform float currentTime;\nvarying float vTime;\n","fs:#main-start":"if(vTime > currentTime || (fadeTrail && (vTime < currentTime - trailLength))) {\n  discard;\n}\n","fs:DECKGL_FILTER_COLOR":"if(fadeTrail) {\n  color.a *= 1.0 - (currentTime - vTime) / trailLength;\n}\n"},t}initializeState(){super.initializeState();this.getAttributeManager().addInstanced({timestamps:{size:1,accessor:"getTimestamps",shaderAttributes:{instanceTimestamps:{vertexOffset:0},instanceNextTimestamps:{vertexOffset:1}}}})}draw(t){const{fadeTrail:e,trailLength:n,currentTime:r}=this.props;t.uniforms={...t.uniforms,fadeTrail:e,trailLength:n,currentTime:r},super.draw(t)}}ww(y9,"layerName","TripsLayer"),ww(y9,"defaultProps",{fadeTrail:!0,trailLength:{type:"number",value:120,min:0},currentTime:{type:"number",value:0,min:0},getTimestamps:{type:"accessor",value:t=>t.timestamps}});var v9=wi((function(t,e){const{children:n,placeholder:r,className:i,...o}=t;return(0,Si.jsxs)(xi.select,{...o,ref:e,className:kt("chakra-select",i),children:[r&&(0,Si.jsx)("option",{value:"",children:r}),n]})}));v9.displayName="SelectField";var[_9,b9]=Ii({name:"FormControlStylesContext",errorMessage:"useFormControlStyles returned is 'undefined'. Seems you forgot to wrap the components in \"<FormControl />\" "}),[x9,w9]=Ii({strict:!1,name:"FormControlContext"});var S9=wi((function(t,e){const n=Gi("Form",t),i=Mn(t),{getRootProps:o,htmlProps:a,...s}=function(t){const{id:e,isRequired:n,isInvalid:i,isDisabled:o,isReadOnly:a,...s}=t,l=(0,r.useId)(),c=e||"field-".concat(l),u="".concat(c,"-label"),h="".concat(c,"-feedback"),d="".concat(c,"-helptext"),[f,p]=(0,r.useState)(!1),[m,g]=(0,r.useState)(!1),[y,v]=(0,r.useState)(!1),_=(0,r.useCallback)((function(){return{id:d,...arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},ref:Xi(arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,(t=>{t&&g(!0)}))}}),[d]),b=(0,r.useCallback)((function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return{...t,ref:e,"data-focus":zt(y),"data-disabled":zt(o),"data-invalid":zt(i),"data-readonly":zt(a),id:void 0!==t.id?t.id:u,htmlFor:void 0!==t.htmlFor?t.htmlFor:c}}),[c,o,y,i,a,u]),x=(0,r.useCallback)((function(){return{id:h,...arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},ref:Xi(arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,(t=>{t&&p(!0)})),"aria-live":"polite"}}),[h]),w=(0,r.useCallback)((function(){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return{...arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},...s,ref:t,role:"group","data-focus":zt(y),"data-disabled":zt(o),"data-invalid":zt(i),"data-readonly":zt(a)}}),[s,o,y,i,a]),S=(0,r.useCallback)((function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return{...t,ref:e,role:"presentation","aria-hidden":!0,children:t.children||"*"}}),[]);return{isRequired:!!n,isInvalid:!!i,isReadOnly:!!a,isDisabled:!!o,isFocused:!!y,onFocus:()=>v(!0),onBlur:()=>v(!1),hasFeedbackText:f,setHasFeedbackText:p,hasHelpText:m,setHasHelpText:g,id:c,labelId:u,feedbackId:h,helpTextId:d,htmlProps:s,getHelpTextProps:_,getErrorMessageProps:x,getRootProps:w,getLabelProps:b,getRequiredIndicatorProps:S}}(i),l=kt("chakra-form-control",t.className);return(0,Si.jsx)(x9,{value:s,children:(0,Si.jsx)(_9,{value:n,children:(0,Si.jsx)(xi.div,{...o({},e),className:l,__css:n.container})})})}));S9.displayName="FormControl";var E9=wi((function(t,e){const n=w9(),r=b9(),i=kt("chakra-form__helper-text",t.className);return(0,Si.jsx)(xi.div,{...null==n?void 0:n.getHelpTextProps(t,e),__css:r.helperText,className:i})}));function T9(t){var e,n,r;const i=w9(),{id:o,disabled:a,readOnly:s,required:l,isRequired:c,isInvalid:u,isReadOnly:h,isDisabled:d,onFocus:f,onBlur:p,...m}=t,g=t["aria-describedby"]?[t["aria-describedby"]]:[];return(null==i?void 0:i.hasFeedbackText)&&(null==i?void 0:i.isInvalid)&&g.push(i.feedbackId),(null==i?void 0:i.hasHelpText)&&g.push(i.helpTextId),{...m,"aria-describedby":g.join(" ")||void 0,id:null!=o?o:null==i?void 0:i.id,isDisabled:null!=(e=null!=a?a:d)?e:null==i?void 0:i.isDisabled,isReadOnly:null!=(n=null!=s?s:h)?n:null==i?void 0:i.isReadOnly,isRequired:null!=(r=null!=l?l:c)?r:null==i?void 0:i.isRequired,isInvalid:null!=u?u:null==i?void 0:i.isInvalid,onFocus:Dt(null==i?void 0:i.onFocus,f),onBlur:Dt(null==i?void 0:i.onBlur,p)}}E9.displayName="FormHelperText";var M9=wi(((t,e)=>{var n;const r=Gi("Select",t),{rootProps:i,placeholder:o,icon:a,color:s,height:l,h:c,minH:u,minHeight:h,iconColor:d,iconSize:f,...p}=Mn(t),[m,g]=function(t,e){const n={},r={};for(const[i,o]of Object.entries(t))e.includes(i)?n[i]=o:r[i]=o;return[n,r]}(p,mn),y=function(t){const{isDisabled:e,isInvalid:n,isReadOnly:r,isRequired:i,...o}=T9(t);return{...o,disabled:e,readOnly:r,required:i,"aria-invalid":Rt(n),"aria-required":Rt(i),"aria-readonly":Rt(r)}}(g),v={width:"100%",height:"fit-content",position:"relative",color:s},_={paddingEnd:"2rem",...r.field,_focus:{zIndex:"unset",...null==(n=r.field)?void 0:n._focus}};return(0,Si.jsxs)(xi.div,{className:"chakra-select__wrapper",__css:v,...m,...i,children:[(0,Si.jsx)(v9,{ref:e,height:null!=c?c:l,minH:null!=u?u:h,placeholder:o,...y,__css:_,children:t.children}),(0,Si.jsx)(P9,{"data-disabled":zt(y.disabled),...(d||s)&&{color:d||s},__css:r.icon,...f&&{fontSize:f},children:a})]})}));M9.displayName="Select";var A9=t=>(0,Si.jsx)("svg",{viewBox:"0 0 24 24",...t,children:(0,Si.jsx)("path",{fill:"currentColor",d:"M16.59 8.59L12 13.17 7.41 8.59 6 10l6 6 6-6z"})}),C9=xi("div",{baseStyle:{position:"absolute",display:"inline-flex",alignItems:"center",justifyContent:"center",pointerEvents:"none",top:"50%",transform:"translateY(-50%)"}}),P9=t=>{const{children:e=(0,Si.jsx)(A9,{}),...n}=t,i=(0,r.cloneElement)(e,{role:"presentation",className:"chakra-select__icon",focusable:!1,"aria-hidden":!0,style:{width:"1em",height:"1em",color:"currentColor"}});return(0,Si.jsx)(C9,{...n,className:"chakra-select__icon-wrapper",children:(0,r.isValidElement)(e)?i:null})};P9.displayName="SelectIcon";const k9=t=>{let{activeButton:e,setActiveButton:n,mapping:r,color:i,onClick:o}=t;const[a]=ki("(max-width: 800px)");return(0,Si.jsx)("div",{style:{position:"absolute",top:a?"10px":"1.5dvh",width:"50%",marginLeft:"25%",alignItems:"center",justifyContent:"center",zIndex:1},children:(0,Si.jsx)(M9,{variant:"outline",bg:"".concat(i,".400"),borderColor:"".concat(i,".500"),borderWidth:a?"0.12rem":"min(0.2dvh, 0.4dvw)",borderRadius:a?"5px":"min(0.8dvh, 1.6dvw)",w:"100%",h:a?"40px":"5dvh",fontSize:a?"14px":"min(1.2dvw, 2.4dvh)",backgroundColor:"".concat(i,".400"),color:"white",focusBorderColor:"".concat(i,".500"),onChange:t=>n(t.target.value),value:e,onClick:o,children:r.map((t=>(0,Si.jsx)("option",{value:t.id,style:{color:"gray"},children:t.name},"button-".concat(t.id))))})})};function I9(t){return Uz({tag:"svg",attr:{version:"1.1",viewBox:"0 0 16 16"},child:[{tag:"path",attr:{d:"M15.854 12.854c-0-0-0-0-0-0l-4.854-4.854 4.854-4.854c0-0 0-0 0-0 0.052-0.052 0.090-0.113 0.114-0.178 0.066-0.178 0.028-0.386-0.114-0.529l-2.293-2.293c-0.143-0.143-0.351-0.181-0.529-0.114-0.065 0.024-0.126 0.062-0.178 0.114 0 0-0 0-0 0l-4.854 4.854-4.854-4.854c-0-0-0-0-0-0-0.052-0.052-0.113-0.090-0.178-0.114-0.178-0.066-0.386-0.029-0.529 0.114l-2.293 2.293c-0.143 0.143-0.181 0.351-0.114 0.529 0.024 0.065 0.062 0.126 0.114 0.178 0 0 0 0 0 0l4.854 4.854-4.854 4.854c-0 0-0 0-0 0-0.052 0.052-0.090 0.113-0.114 0.178-0.066 0.178-0.029 0.386 0.114 0.529l2.293 2.293c0.143 0.143 0.351 0.181 0.529 0.114 0.065-0.024 0.126-0.062 0.178-0.114 0-0 0-0 0-0l4.854-4.854 4.854 4.854c0 0 0 0 0 0 0.052 0.052 0.113 0.090 0.178 0.114 0.178 0.066 0.386 0.029 0.529-0.114l2.293-2.293c0.143-0.143 0.181-0.351 0.114-0.529-0.024-0.065-0.062-0.126-0.114-0.178z"}}]})(t)}const O9=t=>{let{title:e,children:n}=t;return(0,Si.jsxs)("div",{style:{display:"flex",flexDirection:"column",justifyContent:"flex-start",position:"absolute",bottom:"80px",left:"20px",width:"min-content"},children:[(0,Si.jsx)(Yz,{color:"gray.700",fontSize:"10px",style:{width:"100%",display:"flex",justifyContent:"space-between",alignItems:"start",marginBottom:"5px",marginTop:"5px"},children:e}),(0,Si.jsx)(b$,{children:(0,Si.jsx)(S$,{size:"xs",variant:"unstyled",children:(0,Si.jsx)(E$,{children:n})})})]})},L9=t=>{let{title:e,color:n,description:r,children:i,note:o=""}=t;const[a]=ki("(max-width: 800px)");return a?(0,Si.jsx)(O9,{title:e,children:i}):(0,Si.jsxs)(Ei,{borderRadius:"md",borderColor:"".concat(n,".200"),className:"legend-container",style:{width:"min-content"},children:[(0,Si.jsx)("div",{style:{width:"100%",display:"flex",justifyContent:"space-between",alignItems:"start",marginBottom:"5px",marginTop:"5px"},children:(0,Si.jsx)(Pp,{label:r,placement:"top",hasArrow:!0,gutter:12,children:(0,Si.jsx)(Yz,{color:"gray.700",fontSize:"min(1.8dvh, 0.9dvw)",children:e})})}),(0,Si.jsx)(b$,{children:(0,Si.jsx)(S$,{size:"xs",variant:"unstyled",children:(0,Si.jsx)(E$,{children:i})})}),(0,Si.jsx)(Kz,{fontSize:"0.6dvw",color:"gray.600",children:(0,Si.jsx)("i",{children:o})})]})},j9=t=>{let{color:e,label:n}=t;const[r]=ki("(max-width: 800px)");return(0,Si.jsxs)(T$,{fontSize:"min(0.7dvw, 0.7dvh)",children:[(0,Si.jsx)(M$,{children:["Preescolar","Guarder\xeda","Equipamiento de Salud"].includes(n)?(0,Si.jsx)(I9,{color:e,fontSize:"min(1.6dvh, 0.8dvw)"}):(0,Si.jsx)(R$,{className:"legend-color",h:r?"10px":"min(1.6dvh, 0.8dvw)",w:r?"10px":"min(1.6dvh, 0.8dvw)",bg:e,borderRadius:"Comercio al por menor"===n?"50%":"15%"})}),(0,Si.jsx)(M$,{className:"custom-legend-label",fontSize:r?"10px":"min(1.6dvh, 0.8dvw)",children:n})]})},z9=t=>{let{hour:e}=t;const[n]=ki("(max-width: 800px)"),r=e>=12,i=e>12?e-12:e;return(0,Si.jsxs)("span",{children:[i," ",n&&(0,Si.jsx)("br",{}),r?"p.m.":"a.m."]})},R9=Array.from({length:9},((t,e)=>({value:60*(2*e+5),label:(0,Si.jsx)(z9,{hour:2*e+5})}))),D9=[{id:"General",name:"General"},{id:"Aut\xf3movil",name:"Auto"},{id:"TPUB",name:"Transporte p\xfablico"},{id:"transporteActivo",name:"Transporte Activo"}];const B9=t=>{if(!t)return[];const e=t.map((t=>{const e=t.geometry.coordinates,n=function(t){const[e,n]=t.split(":");return 60*parseInt(e)+parseInt(n)}(t.properties.HoraOri),r=e.map(((t,e)=>({coordinates:t.slice(0,2),timestamp:n+60*e})));return{waypoints:r}}));return e},F9=(t,e)=>"General"===e&&("TPUB"===t||"Aut\xf3movil"===t)||t===e||("Bicicleta"===t||"Caminando"===t)&&"transporteActivo"===e;const N9=[0,200,400,600,1e3,3e3,5e3,10500];const U9=[16e4,4e5,5e5,6e5,8e5,1e6,12e5,18e5],V9=[{value:2e3,label:"2000"},{value:2005,label:"2005"},{value:2010,label:"2010"},{value:2015,label:"2015"},{value:2020,label:"2020"}];var[W9,G9]=Ii({name:"CheckboxGroupContext",strict:!1});function q9(t){return(0,Si.jsx)(xi.svg,{width:"1.2em",viewBox:"0 0 12 10",style:{fill:"none",strokeWidth:2,stroke:"currentColor",strokeDasharray:16},...t,children:(0,Si.jsx)("polyline",{points:"1.5 6 4.5 9 10.5 1"})})}function H9(t){return(0,Si.jsx)(xi.svg,{width:"1.2em",viewBox:"0 0 24 24",style:{stroke:"currentColor",strokeWidth:4},...t,children:(0,Si.jsx)("line",{x1:"21",x2:"3",y1:"12",y2:"12"})})}function Z9(t){const{isIndeterminate:e,isChecked:n,...r}=t,i=e?H9:q9;return n||e?(0,Si.jsx)(xi.div,{style:{display:"flex",alignItems:"center",justifyContent:"center",height:"100%"},children:(0,Si.jsx)(i,{...r})}):null}var X9={border:"0",clip:"rect(0, 0, 0, 0)",height:"1px",width:"1px",margin:"-1px",padding:"0",overflow:"hidden",whiteSpace:"nowrap",position:"absolute"};var Y9=()=>"undefined"!==typeof document;var K9=!1,$9=null,J9=!1,Q9=!1,t7=new Set;function e7(t,e){t7.forEach((n=>n(t,e)))}var n7="undefined"!==typeof window&&null!=window.navigator&&/^Mac/.test(window.navigator.platform);function r7(t){var e;J9=!0,(e=t).metaKey||!n7&&e.altKey||e.ctrlKey||"Control"===e.key||"Shift"===e.key||"Meta"===e.key||($9="keyboard",e7("keyboard",t))}function i7(t){if($9="pointer","mousedown"===t.type||"pointerdown"===t.type){J9=!0;const e=t.composedPath?t.composedPath()[0]:t.target;let n=!1;try{n=e.matches(":focus-visible")}catch{}if(n)return;e7("pointer",t)}}function o7(t){(function(t){return!(0!==t.mozInputSource||!t.isTrusted)||0===t.detail&&!t.pointerType})(t)&&(J9=!0,$9="virtual")}function a7(t){t.target!==window&&t.target!==document&&(J9||Q9||($9="virtual",e7("virtual",t)),J9=!1,Q9=!1)}function s7(){J9=!1,Q9=!0}function l7(){return"pointer"!==$9}function c7(){if(!Y9()||K9)return;const{focus:t}=HTMLElement.prototype;HTMLElement.prototype.focus=function(){J9=!0;for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];t.apply(this,n)},document.addEventListener("keydown",r7,!0),document.addEventListener("keyup",r7,!0),document.addEventListener("click",o7,!0),window.addEventListener("focus",a7,!0),window.addEventListener("blur",s7,!1),"undefined"!==typeof PointerEvent?(document.addEventListener("pointerdown",i7,!0),document.addEventListener("pointermove",i7,!0),document.addEventListener("pointerup",i7,!0)):(document.addEventListener("mousedown",i7,!0),document.addEventListener("mousemove",i7,!0),document.addEventListener("mouseup",i7,!0)),K9=!0}function u7(t){c7(),t(l7());const e=()=>t(l7());return t7.add(e),()=>{t7.delete(e)}}function h7(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const e=T9(t),{isDisabled:n,isReadOnly:i,isRequired:o,isInvalid:a,id:s,onBlur:l,onFocus:c,"aria-describedby":u}=e,{defaultChecked:h,isChecked:d,isFocusable:f,onChange:p,isIndeterminate:m,name:g,value:y,tabIndex:v,"aria-label":_,"aria-labelledby":b,"aria-invalid":x,...w}=t,S=function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];const n=Object.assign({},t);for(const r of e)r in n&&delete n[r];return n}(w,["isDisabled","isReadOnly","isRequired","isInvalid","id","onBlur","onFocus","aria-describedby"]),E=Ga(p),T=Ga(l),M=Ga(c),[A,C]=(0,r.useState)(!1),[P,k]=(0,r.useState)(!1),[I,O]=(0,r.useState)(!1),[L,j]=(0,r.useState)(!1);(0,r.useEffect)((()=>u7(C)),[]);const z=(0,r.useRef)(null),[R,D]=(0,r.useState)(!0),[B,F]=(0,r.useState)(!!h),N=void 0!==d,U=N?d:B,V=(0,r.useCallback)((t=>{i||n?t.preventDefault():(N||F(U?t.target.checked:!!m||t.target.checked),null==E||E(t))}),[i,n,U,N,m,E]);Ai((()=>{z.current&&(z.current.indeterminate=Boolean(m))}),[m]),JK((()=>{n&&k(!1)}),[n,k]),Ai((()=>{const t=z.current;if(!(null==t?void 0:t.form))return;const e=()=>{F(!!h)};return t.form.addEventListener("reset",e),()=>{var n;return null==(n=t.form)?void 0:n.removeEventListener("reset",e)}}),[]);const W=n&&!f,G=(0,r.useCallback)((t=>{" "===t.key&&j(!0)}),[j]),q=(0,r.useCallback)((t=>{" "===t.key&&j(!1)}),[j]);Ai((()=>{if(!z.current)return;z.current.checked!==U&&F(z.current.checked)}),[z.current]);const H=(0,r.useCallback)((function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return{...t,ref:e,"data-active":zt(L),"data-hover":zt(I),"data-checked":zt(U),"data-focus":zt(P),"data-focus-visible":zt(P&&A),"data-indeterminate":zt(m),"data-disabled":zt(n),"data-invalid":zt(a),"data-readonly":zt(i),"aria-hidden":!0,onMouseDown:Dt(t.onMouseDown,(t=>{P&&t.preventDefault(),j(!0)})),onMouseUp:Dt(t.onMouseUp,(()=>j(!1))),onMouseEnter:Dt(t.onMouseEnter,(()=>O(!0))),onMouseLeave:Dt(t.onMouseLeave,(()=>O(!1)))}}),[L,U,n,P,A,I,m,a,i]),Z=(0,r.useCallback)((function(){return{...arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},ref:arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,"data-active":zt(L),"data-hover":zt(I),"data-checked":zt(U),"data-focus":zt(P),"data-focus-visible":zt(P&&A),"data-indeterminate":zt(m),"data-disabled":zt(n),"data-invalid":zt(a),"data-readonly":zt(i)}}),[L,U,n,P,A,I,m,a,i]),X=(0,r.useCallback)((function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return{...S,...t,ref:Xi(e,(t=>{t&&D("LABEL"===t.tagName)})),onClick:Dt(t.onClick,(()=>{var t;R||(null==(t=z.current)||t.click(),requestAnimationFrame((()=>{var t;null==(t=z.current)||t.focus({preventScroll:!0})})))})),"data-disabled":zt(n),"data-checked":zt(U),"data-invalid":zt(a)}}),[S,n,U,a,R]),Y=(0,r.useCallback)((function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return{...t,ref:Xi(z,e),type:"checkbox",name:g,value:y,id:s,tabIndex:v,onChange:Dt(t.onChange,V),onBlur:Dt(t.onBlur,T,(()=>k(!1))),onFocus:Dt(t.onFocus,M,(()=>k(!0))),onKeyDown:Dt(t.onKeyDown,G),onKeyUp:Dt(t.onKeyUp,q),required:o,checked:U,disabled:W,readOnly:i,"aria-label":_,"aria-labelledby":b,"aria-invalid":x?Boolean(x):a,"aria-describedby":u,"aria-disabled":n,style:X9}}),[g,y,s,V,T,M,G,q,o,U,W,i,_,b,x,a,u,n,v]),K=(0,r.useCallback)((function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return{...t,ref:e,onMouseDown:Dt(t.onMouseDown,d7),"data-disabled":zt(n),"data-checked":zt(U),"data-invalid":zt(a)}}),[U,n,a]);return{state:{isInvalid:a,isFocused:P,isChecked:U,isActive:L,isHovered:I,isIndeterminate:m,isDisabled:n,isReadOnly:i,isRequired:o},getRootProps:X,getCheckboxProps:H,getIndicatorProps:Z,getInputProps:Y,getLabelProps:K,htmlProps:S}}function d7(t){t.preventDefault(),t.stopPropagation()}var f7={display:"inline-flex",alignItems:"center",justifyContent:"center",verticalAlign:"top",userSelect:"none",flexShrink:0},p7={cursor:"pointer",display:"inline-flex",alignItems:"center",verticalAlign:"top",position:"relative"},m7=Di({from:{opacity:0,strokeDashoffset:16,transform:"scale(0.95)"},to:{opacity:1,strokeDashoffset:0,transform:"scale(1)"}}),g7=Di({from:{opacity:0},to:{opacity:1}}),y7=Di({from:{transform:"scaleX(0.65)"},to:{transform:"scaleX(1)"}}),v7=wi((function(t,e){const n=G9(),i=Gi("Checkbox",{...n,...t}),o=Mn(t),{spacing:a="0.5rem",className:s,children:l,iconColor:c,iconSize:u,icon:h=(0,Si.jsx)(Z9,{}),isChecked:d,isDisabled:f=(null==n?void 0:n.isDisabled),onChange:p,inputProps:m,...g}=o;let y=d;(null==n?void 0:n.value)&&o.value&&(y=n.value.includes(o.value));let v=p;(null==n?void 0:n.onChange)&&o.value&&(v=Bt(n.onChange,p));const{state:_,getInputProps:b,getCheckboxProps:x,getLabelProps:w,getRootProps:S}=h7({...g,isDisabled:f,isChecked:y,onChange:v}),E=function(t){const[e,n]=(0,r.useState)(t),[i,o]=(0,r.useState)(!1);return t!==e&&(o(!0),n(t)),i}(_.isChecked),T=(0,r.useMemo)((()=>({animation:E?_.isIndeterminate?"".concat(g7," 20ms linear, ").concat(y7," 200ms linear"):"".concat(m7," 200ms linear"):void 0,fontSize:u,color:c,...i.icon})),[c,u,E,_.isIndeterminate,i.icon]),M=(0,r.cloneElement)(h,{__css:T,isIndeterminate:_.isIndeterminate,isChecked:_.isChecked});return(0,Si.jsxs)(xi.label,{__css:{...p7,...i.container},className:kt("chakra-checkbox",s),...S(),children:[(0,Si.jsx)("input",{className:"chakra-checkbox__input",...b(m,e)}),(0,Si.jsx)(xi.span,{__css:{...f7,...i.control},className:"chakra-checkbox__control",...x(),children:M}),l&&(0,Si.jsx)(xi.span,{className:"chakra-checkbox__label",...w(),__css:{marginStart:a,...i.label},children:l})]})}));v7.displayName="Checkbox";const _7={income_pc:{title:"Ingreso mensual per c\xe1pita en 2020",formatter:dv("$,.0f"),quantiles:[4e3,7e3,1e4,13e3,18e3,25e3,35e3,5e4,74e3]},local_centralization_q_1_k_100:{title:"Primer quintil segregaci\xf3n",formatter:dv(".2"),quantiles:[-.18,-.12,-.08,-.04,0,.02,.04,.06,.08]},local_centralization_q_5_k_100:{title:"Quinto quintil segregaci\xf3n",formatter:dv(".2"),quantiles:[-.18,-.12,-.08,-.04,0,.02,.04,.06,.08]}};const b7={num_crimen:{title:"Incidencia delictiva 2017-2020",quantiles:[0,20,50,100,150,200,300,400,520]},violencia_familiar:{title:"Casos Violencia Familiar 2017-2020",quantiles:[0,20,50,100,150,200,250,300,425]},robo_transeunte:{title:"Robos a Transe\xfante 2017-2020",quantiles:[0,5,10,20,30,50,70,165]},robo_negocio:{title:"Robos a Negocio 2017-2020",quantiles:[0,5,10,20,30,40,60,80,145]},robo_casa:{title:"Robos a Casa Habitaci\xf3n 2017-2020",quantiles:[0,5,10,20,30,40,60,80,150]}},x7=[{id:"num_crimen",name:"Total de Delitos"},{id:"violencia_familiar",name:"Violencia Familiar"},{id:"robo_transeunte",name:"Robo a Transe\xfante"},{id:"robo_negocio",name:"Robo a Negocio"},{id:"robo_casa",name:"Robo a Casa Habitaci\xf3n"}];var w7,S7=["layout","type","stroke","connectNulls","isRange","ref"];function E7(t){return E7="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},E7(t)}function T7(t,e){if(null==t)return{};var n,r,i=function(t,e){if(null==t)return{};var n,r,i={},o=Object.keys(t);for(r=0;r<o.length;r++)n=o[r],e.indexOf(n)>=0||(i[n]=t[n]);return i}(t,e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(r=0;r<o.length;r++)n=o[r],e.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function M7(){return M7=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},M7.apply(this,arguments)}function A7(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function C7(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?A7(Object(n),!0).forEach((function(e){z7(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):A7(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function P7(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,R7(r.key),r)}}function k7(t,e,n){return e=O7(e),function(t,e){if(e&&("object"===E7(e)||"function"===typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return L7(t)}(t,I7()?Reflect.construct(e,n||[],O7(t).constructor):e.apply(t,n))}function I7(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(I7=function(){return!!t})()}function O7(t){return O7=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},O7(t)}function L7(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function j7(t,e){return j7=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},j7(t,e)}function z7(t,e,n){return(e=R7(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function R7(t){var e=function(t,e){if("object"!=E7(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=E7(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==E7(e)?e:String(e)}var D7=function(t){function e(){var t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return z7(L7(t=k7(this,e,[].concat(r))),"state",{isAnimationFinished:!0}),z7(L7(t),"id",SR("recharts-area-")),z7(L7(t),"handleAnimationEnd",(function(){var e=t.props.onAnimationEnd;t.setState({isAnimationFinished:!0}),VR()(e)&&e()})),z7(L7(t),"handleAnimationStart",(function(){var e=t.props.onAnimationStart;t.setState({isAnimationFinished:!1}),VR()(e)&&e()})),t}var n,i,o;return function(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&j7(t,e)}(e,t),n=e,i=[{key:"renderDots",value:function(t,n,i){var o=this.props.isAnimationActive,a=this.state.isAnimationFinished;if(o&&!a)return null;var s=this.props,l=s.dot,c=s.points,u=s.dataKey,h=fD(this.props,!1),d=fD(l,!0),f=c.map((function(t,n){var r=C7(C7(C7({key:"dot-".concat(n),r:3},h),d),{},{index:n,cx:t.x,cy:t.y,dataKey:u,value:t.value,payload:t.payload,points:c});return e.renderDotItem(l,r)})),p={clipPath:t?"url(#clipPath-".concat(n?"":"dots-").concat(i,")"):null};return r.createElement(DD,M7({className:"recharts-area-dots"},p),f)}},{key:"renderHorizontalRect",value:function(t){var e=this.props,n=e.baseLine,i=e.points,o=e.strokeWidth,a=i[0].x,s=i[i.length-1].x,l=t*Math.abs(a-s),c=fW()(i.map((function(t){return t.y||0})));return bR(n)&&"number"===typeof n?c=Math.max(n,c):n&&Array.isArray(n)&&n.length&&(c=Math.max(fW()(n.map((function(t){return t.y||0}))),c)),bR(c)?r.createElement("rect",{x:a<s?a:a-l,y:0,width:l,height:Math.floor(c+(o?parseInt("".concat(o),10):1))}):null}},{key:"renderVerticalRect",value:function(t){var e=this.props,n=e.baseLine,i=e.points,o=e.strokeWidth,a=i[0].y,s=i[i.length-1].y,l=t*Math.abs(a-s),c=fW()(i.map((function(t){return t.x||0})));return bR(n)&&"number"===typeof n?c=Math.max(n,c):n&&Array.isArray(n)&&n.length&&(c=Math.max(fW()(n.map((function(t){return t.x||0}))),c)),bR(c)?r.createElement("rect",{x:0,y:a<s?a:a-l,width:c+(o?parseInt("".concat(o),10):1),height:Math.floor(l)}):null}},{key:"renderClipRect",value:function(t){return"vertical"===this.props.layout?this.renderVerticalRect(t):this.renderHorizontalRect(t)}},{key:"renderAreaStatically",value:function(t,e,n,i){var o=this.props,a=o.layout,s=o.type,l=o.stroke,c=o.connectNulls,u=o.isRange,h=(o.ref,T7(o,S7));return r.createElement(DD,{clipPath:n?"url(#clipPath-".concat(i,")"):null},r.createElement(DX,M7({},fD(h,!0),{points:t,connectNulls:c,type:s,baseLine:e,layout:a,stroke:"none",className:"recharts-area-area"})),"none"!==l&&r.createElement(DX,M7({},fD(this.props,!1),{className:"recharts-area-curve",layout:a,type:s,connectNulls:c,fill:"none",points:t})),"none"!==l&&u&&r.createElement(DX,M7({},fD(this.props,!1),{className:"recharts-area-curve",layout:a,type:s,connectNulls:c,fill:"none",points:e})))}},{key:"renderAreaWithAnimation",value:function(t,e){var n=this,i=this.props,o=i.points,a=i.baseLine,s=i.isAnimationActive,l=i.animationBegin,c=i.animationDuration,u=i.animationEasing,h=i.animationId,d=this.state,f=d.prevPoints,p=d.prevBaseLine;return r.createElement(dV,{begin:l,duration:c,isActive:s,easing:u,from:{t:0},to:{t:1},key:"area-".concat(h),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},(function(i){var s=i.t;if(f){var l,c=f.length/o.length,u=o.map((function(t,e){var n=Math.floor(e*c);if(f[n]){var r=f[n],i=MR(r.x,t.x),o=MR(r.y,t.y);return C7(C7({},t),{},{x:i(s),y:o(s)})}return t}));return l=bR(a)&&"number"===typeof a?MR(p,a)(s):sR()(a)||fR()(a)?MR(p,0)(s):a.map((function(t,e){var n=Math.floor(e*c);if(p[n]){var r=p[n],i=MR(r.x,t.x),o=MR(r.y,t.y);return C7(C7({},t),{},{x:i(s),y:o(s)})}return t})),n.renderAreaStatically(u,l,t,e)}return r.createElement(DD,null,r.createElement("defs",null,r.createElement("clipPath",{id:"animationClipPath-".concat(e)},n.renderClipRect(s))),r.createElement(DD,{clipPath:"url(#animationClipPath-".concat(e,")")},n.renderAreaStatically(o,a,t,e)))}))}},{key:"renderArea",value:function(t,e){var n=this.props,r=n.points,i=n.baseLine,o=n.isAnimationActive,a=this.state,s=a.prevPoints,l=a.prevBaseLine,c=a.totalLength;return o&&r&&r.length&&(!s&&c>0||!_W()(s,r)||!_W()(l,i))?this.renderAreaWithAnimation(t,e):this.renderAreaStatically(r,i,t,e)}},{key:"render",value:function(){var t,e=this.props,n=e.hide,i=e.dot,o=e.points,a=e.className,s=e.top,l=e.left,c=e.xAxis,u=e.yAxis,h=e.width,d=e.height,f=e.isAnimationActive,p=e.id;if(n||!o||!o.length)return null;var m=this.state.isAnimationFinished,g=1===o.length,y=cR("recharts-area",a),v=c&&c.allowDataOverflow,_=u&&u.allowDataOverflow,b=v||_,x=sR()(p)?this.id:p,w=null!==(t=fD(i,!1))&&void 0!==t?t:{r:3,strokeWidth:2},S=w.r,E=void 0===S?3:S,T=w.strokeWidth,M=void 0===T?2:T,A=(function(t){return t&&"object"===nD(t)&&"cx"in t&&"cy"in t&&"r"in t}(i)?i:{}).clipDot,C=void 0===A||A,P=2*E+M;return r.createElement(DD,{className:y},v||_?r.createElement("defs",null,r.createElement("clipPath",{id:"clipPath-".concat(x)},r.createElement("rect",{x:v?l:l-h/2,y:_?s:s-d/2,width:v?h:2*h,height:_?d:2*d})),!C&&r.createElement("clipPath",{id:"clipPath-dots-".concat(x)},r.createElement("rect",{x:l-P/2,y:s-P/2,width:h+P,height:d+P}))):null,g?null:this.renderArea(b,x),(i||g)&&this.renderDots(b,C,x),(!f||m)&&Wq.renderCallByParent(this.props,o))}}],o=[{key:"getDerivedStateFromProps",value:function(t,e){return t.animationId!==e.prevAnimationId?{prevAnimationId:t.animationId,curPoints:t.points,curBaseLine:t.baseLine,prevPoints:e.curPoints,prevBaseLine:e.curBaseLine}:t.points!==e.curPoints||t.baseLine!==e.curBaseLine?{curPoints:t.points,curBaseLine:t.baseLine}:null}}],i&&P7(n.prototype,i),o&&P7(n,o),Object.defineProperty(n,"prototype",{writable:!1}),e}(r.PureComponent);w7=D7,z7(D7,"displayName","Area"),z7(D7,"defaultProps",{stroke:"#3182bd",fill:"#3182bd",fillOpacity:.6,xAxisId:0,yAxisId:0,legendType:"line",connectNulls:!1,points:[],dot:!1,activeDot:!0,hide:!1,isAnimationActive:!nB.isSsr,animationBegin:0,animationDuration:1500,animationEasing:"ease"}),z7(D7,"getBaseValue",(function(t,e,n,r){var i=t.layout,o=t.baseValue,a=e.props.baseValue,s=null!==a&&void 0!==a?a:o;if(bR(s)&&"number"===typeof s)return s;var l="horizontal"===i?r:n,c=l.scale.domain();if("number"===l.type){var u=Math.max(c[0],c[1]),h=Math.min(c[0],c[1]);return"dataMin"===s?h:"dataMax"===s||u<0?u:Math.max(Math.min(c[0],c[1]),0)}return"dataMin"===s?c[0]:"dataMax"===s?c[1]:c[0]})),z7(D7,"getComposedData",(function(t){var e,n=t.props,r=t.item,i=t.xAxis,o=t.yAxis,a=t.xAxisTicks,s=t.yAxisTicks,l=t.bandSize,c=t.dataKey,u=t.stackedData,h=t.dataStartIndex,d=t.displayedData,f=t.offset,p=n.layout,m=u&&u.length,g=w7.getBaseValue(n,r,i,o),y="horizontal"===p,v=!1,_=d.map((function(t,e){var n;m?n=u[h+e]:(n=dG(t,c),Array.isArray(n)?v=!0:n=[g,n]);var r=null==n[1]||m&&null==dG(t,c);return y?{x:EG({axis:i,ticks:a,bandSize:l,entry:t,index:e}),y:r?null:o.scale(n[1]),value:n,payload:t}:{x:r?null:i.scale(n[1]),y:EG({axis:o,ticks:s,bandSize:l,entry:t,index:e}),value:n,payload:t}}));return e=m||v?_.map((function(t){var e=Array.isArray(t.value)?t.value[0]:null;return y?{x:t.x,y:null!=e&&null!=t.y?o.scale(e):null}:{x:null!=e?i.scale(e):null,y:t.y}})):y?o.scale(g):i.scale(g),C7({points:_,baseLine:e,layout:p,isRange:v},f)})),z7(D7,"renderDotItem",(function(t,e){var n;if(r.isValidElement(t))n=r.cloneElement(t,e);else if(VR()(t))n=t(e);else{var i=cR("recharts-area-dot","boolean"!==typeof t?t.className:"");n=r.createElement(YF,M7({},e,{className:i}))}return n}));var B7=OY({chartName:"AreaChart",GraphicalChild:D7,axisComponents:[{axisType:"xAxis",AxisComp:rK},{axisType:"yAxis",AxisComp:oK}],formatAxisMap:aZ}),F7=wi((function(t,e){const{direction:n,align:r,justify:i,wrap:o,basis:a,grow:s,shrink:l,...c}=t,u={display:"flex",flexDirection:n,alignItems:r,justifyContent:i,flexWrap:o,flexBasis:a,flexGrow:s,flexShrink:l};return(0,Si.jsx)(xi.div,{ref:e,__css:u,...c})}));F7.displayName="Flex";const N7=["Monterrey","San Pedro Garza Garc\xeda","San Nicol\xe1s de los Garza","Guadalupe","Santa Catarina","Apodaca","General Escobedo","Garc\xeda","Ju\xe1rez","Pesquer\xeda","Cadereyta Jim\xe9nez","General Zuazua","Salinas Victoria","Hidalgo","Ci\xe9nega de Flores"],U7=["Apodaca","General Escobedo","Garc\xeda","Ju\xe1rez","Pesquer\xeda","Cadereyta Jim\xe9nez","General Zuazua","Salinas Victoria","Hidalgo","Ci\xe9nega de Flores"],V7={Monterrey:"rgb(40, 60, 40)","San Pedro Garza Garc\xeda":"rgb(60, 80, 60)","San Nicol\xe1s de los Garza":"rgb(80, 100, 80)",Guadalupe:"rgb(100, 120, 100)","Santa Catarina":"rgb(120, 140, 120)",Apodaca:"rgb(64, 28, 135)","General Escobedo":"rgb(71, 31, 141)","Garc\xeda":"rgb(85, 37, 153)","Ju\xe1rez":"rgb(92, 40, 159)","Pesquer\xeda":"rgb(99, 43, 165)","Cadereyta Jim\xe9nez":"rgb(106, 46, 171)","General Zuazua":"rgb(113, 56, 174)","Salinas Victoria":"rgb(120, 66, 170)",Hidalgo:"rgb(125, 78, 165)","Ci\xe9nega de Flores":"rgb(130, 90, 160)"},W7=()=>{const[t]=ki("(max-width: 800px)");return(0,Si.jsxs)(F7,{mb:"2",children:[(0,Si.jsxs)("div",{style:{display:"flex",alignItems:"center",width:"100%",justifyContent:"center"},children:[(0,Si.jsx)(R$,{className:"legend-color",h:t?"10px":"min(1.6dvh, 0.8dvw)",w:t?"10px":"min(1.6dvh, 0.8dvw)",bg:"rgb(130, 90, 160)",borderRadius:"15%"}),(0,Si.jsx)(Kz,{color:"gray.600",ml:"5px",fontSize:t?"10px":"min(2dvh, 1dvw)",children:"Municipios Perif\xe9ricos"})]}),(0,Si.jsxs)("div",{style:{display:"flex",alignItems:"center",width:"100%",justifyContent:"center"},children:[(0,Si.jsx)(R$,{className:"legend-color",h:t?"10px":"min(1.6dvh, 0.8dvw)",w:t?"10px":"min(1.6dvh, 0.8dvw)",bg:"rgb(120, 140, 120)",borderRadius:"15%"}),(0,Si.jsx)(Kz,{color:"gray.600",ml:"5px",fontSize:t?"10px":"min(2dvh, 1dvw)",children:"Municipios Centrales"})]})]})};const G7=t=>{let{color:e,pob05:n,area:r,guarderias:i,preescolares:o,comercios:a,salud:s}=t;const[l]=ki("(max-width: 800px)"),c=[{value:n,label:"Poblaci\xf3n de 0 a 5 a\xf1os",color:"#6a2eab",formatting:t=>dv(".2f")(t)+"%"},{value:r,label:"Parques",color:"#96C870",formatting:t=>dv(".2f")(t)+" ha"},{value:i,label:"Guarder\xedas",color:"#8b0b0b",formatting:dv(".0f")},{value:o,label:"Preescolar",color:"#1f562f",formatting:dv(".0f")},{value:s,label:"Equipamientos de Salud",color:"#e95481",formatting:dv(".0f")},{value:a,label:"Comercios al por menor",color:"#f69100",formatting:dv(".0f")}],u=["Preescolar","Guarder\xedas","Equipamientos de Salud"];return(0,Si.jsxs)(Ei,{borderRadius:"md",borderColor:"".concat(e,".200"),borderWidth:"0.08rem",className:"legend-container",style:{right:"20px",left:"auto"},children:[(0,Si.jsx)(Yz,{color:"gray.700",fontSize:"min(1.8dvh, 0.9dvw)",children:"Radio de 1 kilometro de distancia"}),(0,Si.jsx)(b$,{children:(0,Si.jsx)(S$,{size:"xs",variant:"unstyled",children:(0,Si.jsx)(E$,{children:c.map(((t,e)=>(0,Si.jsxs)(T$,{fontSize:"min(0.7dvw, 0.7dvh)",children:[(0,Si.jsx)(M$,{children:u.includes(t.label)?(0,Si.jsx)(I9,{color:t.color,fontSize:"min(1.6dvh, 0.8dvw)"}):(0,Si.jsx)(R$,{className:"legend-color",h:l?"10px":"min(1.6dvh, 0.8dvw)",w:l?"10px":"min(1.6dvh, 0.8dvw)",bg:t.color,borderRadius:"Comercios al por menor"===t.label?"50%":"15%"})}),(0,Si.jsx)(M$,{className:"custom-legend-label",fontSize:l?"10px":"min(1.6dvh, 0.8dvw)",children:t.label}),(0,Si.jsx)(M$,{className:"custom-legend-label",fontSize:l?"10px":"min(1.6dvh, 0.8dvw)",children:(0,Si.jsx)("b",{children:t.formatting(t.value)})})]},"legend-item-".concat(e))))})})})]})};class q7{static get componentName(){return Object.prototype.hasOwnProperty.call(this,"extensionName")?this.extensionName:""}constructor(t){ww(this,"opts",void 0),t&&(this.opts=t)}equals(t){return this===t||this.constructor===t.constructor&&vI(this.opts,t.opts,1)}getShaders(t){return null}getSubLayerProps(t){const{defaultProps:e}=t.constructor,n={updateTriggers:{}};for(const r in e)if(r in this.props){const t=e[r],i=this.props[r];n[r]=i,t&&"accessor"===t.type&&(n.updateTriggers[r]=this.props.updateTriggers[r],"function"===typeof i&&(n[r]=this.getSubLayerAccessor(i)))}return n}initializeState(t,e){}updateState(t,e){}onNeedsRedraw(t){}getNeedsPickingBuffer(t){return!1}draw(t,e){}finalizeState(t,e){}}ww(q7,"defaultProps",{}),ww(q7,"extensionName","LayerExtension");const H7={source:0,target:1,custom:2,source_target:3},Z7={name:"brushing",dependencies:[EL],vs:"\n  uniform bool brushing_enabled;\n  uniform int brushing_target;\n  uniform vec2 brushing_mousePos;\n  uniform float brushing_radius;\n\n  #ifdef NON_INSTANCED_MODEL\n  attribute vec2 brushingTargets;\n  #else\n  attribute vec2 instanceBrushingTargets;\n  #endif\n\n  varying float brushing_isVisible;\n\n  bool brushing_isPointInRange(vec2 position) {\n    if (!brushing_enabled) {\n      return true;\n    }\n    vec2 source_commonspace = project_position(position);\n    vec2 target_commonspace = project_position(brushing_mousePos);\n    float distance = length((target_commonspace - source_commonspace) / project_uCommonUnitsPerMeter.xy);\n\n    return distance <= brushing_radius;\n  }\n\n  bool brushing_arePointsInRange(vec2 sourcePos, vec2 targetPos) {\n    return brushing_isPointInRange(sourcePos) || brushing_isPointInRange(targetPos);\n  }\n\n  void brushing_setVisible(bool visible) {\n    brushing_isVisible = float(visible);\n  }\n",fs:"\n  uniform bool brushing_enabled;\n  varying float brushing_isVisible;\n",inject:{"vs:DECKGL_FILTER_GL_POSITION":"\n    vec2 brushingTarget;\n    vec2 brushingSource;\n    if (brushing_target == 3) {\n      brushingTarget = geometry.worldPositionAlt.xy;\n      brushingSource = geometry.worldPosition.xy;\n    } else if (brushing_target == 0) {\n      brushingTarget = geometry.worldPosition.xy;\n    } else if (brushing_target == 1) {\n      brushingTarget = geometry.worldPositionAlt.xy;\n    } else {\n      #ifdef NON_INSTANCED_MODEL\n      brushingTarget = brushingTargets;\n      #else\n      brushingTarget = instanceBrushingTargets;\n      #endif\n    }\n    bool visible;\n    if (brushing_target == 3) {\n      visible = brushing_arePointsInRange(brushingSource, brushingTarget);\n    } else {\n      visible = brushing_isPointInRange(brushingTarget);\n    }\n    brushing_setVisible(visible);\n  ","fs:DECKGL_FILTER_COLOR":"\n    if (brushing_enabled && brushing_isVisible < 0.5) {\n      discard;\n    }\n  "},getUniforms:t=>{if(!t||!("viewport"in t))return{};const{brushingEnabled:e=!0,brushingRadius:n=1e4,brushingTarget:r="source",mousePosition:i,viewport:o}=t;return{brushing_enabled:Boolean(e&&i&&o.containsPixel(i)),brushing_radius:n,brushing_target:H7[r]||0,brushing_mousePos:i?o.unproject([i.x-o.x,i.y-o.y]):[0,0]}}};class X7 extends q7{getShaders(){return{modules:[Z7]}}initializeState(t,e){const n=this.getAttributeManager();n&&n.add({brushingTargets:{size:2,accessor:"getBrushingTarget",shaderAttributes:{brushingTargets:{divisor:0},instanceBrushingTargets:{divisor:1}}}}),this.state.onMouseMove=()=>{var t;null===(t=this.getCurrentLayer())||void 0===t||t.setNeedsRedraw()},t.deck&&t.deck.eventManager.on({pointermove:this.state.onMouseMove,pointerleave:this.state.onMouseMove})}finalizeState(t,e){t.deck&&t.deck.eventManager.off({pointermove:this.state.onMouseMove,pointerleave:this.state.onMouseMove})}}ww(X7,"defaultProps",{getBrushingTarget:{type:"accessor",value:[0,0]},brushingTarget:"source",brushingEnabled:!0,brushingRadius:1e4}),ww(X7,"extensionName","BrushingExtension");const Y7=[.05,.1,.15,.2,.4];const K7=new Float32Array(12);function $7(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2,n=0;for(const r of t)for(let t=0;t<e;t++)K7[n++]=r[t]||0;return K7}class J7 extends fL{getShaders(){return{vs:"#define SHADER_NAME heatp-map-layer-vertex-shader\n\nuniform sampler2D maxTexture;\nuniform float intensity;\nuniform vec2 colorDomain;\nuniform float threshold;\nuniform float aggregationMode;\n\nattribute vec3 positions;\nattribute vec2 texCoords;\n\nvarying vec2 vTexCoords;\nvarying float vIntensityMin;\nvarying float vIntensityMax;\n\nvoid main(void) {\n  gl_Position = project_position_to_clipspace(positions, vec3(0.0), vec3(0.0));\n  vTexCoords = texCoords;\n  vec4 maxTexture = texture2D(maxTexture, vec2(0.5));\n  float maxValue = aggregationMode < 0.5 ? maxTexture.r : maxTexture.g;\n  float minValue = maxValue * threshold;\n  if (colorDomain[1] > 0.) {\n    maxValue = colorDomain[1];\n    minValue = colorDomain[0];\n  }\n  vIntensityMax = intensity / maxValue;\n  vIntensityMin = intensity / minValue;\n}\n",fs:"#define SHADER_NAME triangle-layer-fragment-shader\n\nprecision highp float;\n\nuniform float opacity;\nuniform sampler2D texture;\nuniform sampler2D colorTexture;\nuniform float aggregationMode;\n\nvarying vec2 vTexCoords;\nvarying float vIntensityMin;\nvarying float vIntensityMax;\n\nvec4 getLinearColor(float value) {\n  float factor = clamp(value * vIntensityMax, 0., 1.);\n  vec4 color = texture2D(colorTexture, vec2(factor, 0.5));\n  color.a *= min(value * vIntensityMin, 1.0);\n  return color;\n}\n\nvoid main(void) {\n  vec4 weights = texture2D(texture, vTexCoords);\n  float weight = weights.r;\n\n  if (aggregationMode > 0.5) {\n    weight /= max(1.0, weights.a);\n  }\n  if (weight <= 0.) {\n     discard;\n  }\n\n  vec4 linearColor = getLinearColor(weight);\n  linearColor.a *= opacity;\n  gl_FragColor =linearColor;\n}\n",modules:[TL]}}initializeState(t){let{gl:e}=t;this.getAttributeManager().add({positions:{size:3,noAlloc:!0},texCoords:{size:2,noAlloc:!0}}),this.setState({model:this._getModel(e)})}_getModel(t){const{vertexCount:e}=this.props;return new xP(t,{...this.getShaders(),id:this.props.id,geometry:new kL({drawMode:6,vertexCount:e})})}draw(t){let{uniforms:e}=t;const{model:n}=this.state,{texture:r,maxTexture:i,colorTexture:o,intensity:a,threshold:s,aggregationMode:l,colorDomain:c}=this.props;n.setUniforms({...e,texture:r,maxTexture:i,colorTexture:o,intensity:a,threshold:s,aggregationMode:l,colorDomain:c}).draw()}}function Q7(t,e){const n={};for(const r in t)e.includes(r)||(n[r]=t[r]);return n}ww(J7,"layerName","TriangleLayer");class ttt extends pL{constructor(){super(...arguments),ww(this,"state",void 0)}initializeAggregationLayer(t){super.initializeState(this.context),this.setState({ignoreProps:Q7(this.constructor._propTypes,t.data.props),dimensions:t})}updateState(t){super.updateState(t);const{changeFlags:e}=t;if(e.extensionsChanged){const t=this.getShaders({});t&&t.defines&&(t.defines.NON_INSTANCED_MODEL=1),this.updateShaders(t)}this._updateAttributes()}updateAttributes(t){this.setState({changedAttributes:t})}getAttributes(){return this.getAttributeManager().getShaderAttributes()}getModuleSettings(){const{viewport:t,mousePosition:e,gl:n}=this.context;return Object.assign(Object.create(this.props),{viewport:t,mousePosition:e,pickingActive:0,devicePixelRatio:qS(n)})}updateShaders(t){}isAggregationDirty(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{props:n,oldProps:r,changeFlags:i}=t,{compareAll:o=!1,dimension:a}=e,{ignoreProps:s}=this.state,{props:l,accessors:c=[]}=a,{updateTriggersChanged:u}=i;if(i.dataChanged)return!0;if(u){if(u.all)return!0;for(const t of c)if(u[t])return!0}if(o)return!!i.extensionsChanged||XP({oldProps:r,newProps:n,ignoreProps:s,propTypes:this.constructor._propTypes});for(const h of l)if(n[h]!==r[h])return!0;return!1}isAttributeChanged(t){const{changedAttributes:e}=this.state;return t?e&&void 0!==e[t]:!function(t){let e=!0;for(const n in t){e=!1;break}return e}(e)}_getAttributeManager(){return new CP(this.context.gl,{id:this.props.id,stats:this.context.stats})}}ww(ttt,"layerName","AggregationLayer");const ett={mipmaps:!1,parameters:{10240:9729,10241:9729,10242:33071,10243:33071},dataFormat:6408},ntt=[0,0],rtt={SUM:0,MEAN:1},itt={getPosition:{type:"accessor",value:t=>t.position},getWeight:{type:"accessor",value:1},intensity:{type:"number",min:0,value:1},radiusPixels:{type:"number",min:1,max:100,value:50},colorRange:[[255,255,178],[254,217,118],[254,178,76],[253,141,60],[240,59,32],[189,0,38]],threshold:{type:"number",min:0,max:1,value:.05},colorDomain:{type:"array",value:null,optional:!0},aggregation:"SUM",weightsTextureSize:{type:"number",min:128,max:2048,value:2048},debounceTimeout:{type:"number",min:0,max:1e3,value:500}},ott=[rT,sT],att=[dT,iT],stt={data:{props:["radiusPixels"]}};class ltt extends ttt{constructor(){super(...arguments),ww(this,"state",void 0)}initializeState(){const{gl:t}=this.context;if(!xT(t,ott))return this.setState({supported:!1}),void Gw.error("HeatmapLayer: ".concat(this.id," is not supported on this browser"))();super.initializeAggregationLayer(stt),this.setState({supported:!0,colorDomain:ntt}),this._setupTextureParams(),this._setupAttributes(),this._setupResources()}shouldUpdateState(t){let{changeFlags:e}=t;return e.somethingChanged}updateState(t){this.state.supported&&(super.updateState(t),this._updateHeatmapState(t))}_updateHeatmapState(t){const{props:e,oldProps:n}=t,r=this._getChangeFlags(t);(r.dataChanged||r.viewportChanged)&&(r.boundsChanged=this._updateBounds(r.dataChanged),this._updateTextureRenderingBounds()),r.dataChanged||r.boundsChanged?(clearTimeout(this.state.updateTimer),this.setState({isWeightMapDirty:!0})):r.viewportZoomChanged&&this._debouncedUpdateWeightmap(),e.colorRange!==n.colorRange&&this._updateColorTexture(t),this.state.isWeightMapDirty&&this._updateWeightmap(),this.setState({zoom:t.context.viewport.zoom})}renderLayers(){if(!this.state.supported)return[];const{weightsTexture:t,triPositionBuffer:e,triTexCoordBuffer:n,maxWeightsTexture:r,colorTexture:i,colorDomain:o}=this.state,{updateTriggers:a,intensity:s,threshold:l,aggregation:c}=this.props;return new(this.getSubLayerClass("triangle",J7))(this.getSubLayerProps({id:"triangle-layer",updateTriggers:a}),{coordinateSystem:qw.DEFAULT,data:{attributes:{positions:e,texCoords:n}},vertexCount:4,maxTexture:r,colorTexture:i,aggregationMode:rtt[c]||0,texture:t,intensity:s,threshold:l,colorDomain:o})}finalizeState(t){super.finalizeState(t);const{weightsTransform:e,weightsTexture:n,maxWeightTransform:r,maxWeightsTexture:i,triPositionBuffer:o,triTexCoordBuffer:a,colorTexture:s,updateTimer:l}=this.state;null===e||void 0===e||e.delete(),null===n||void 0===n||n.delete(),null===r||void 0===r||r.delete(),null===i||void 0===i||i.delete(),null===o||void 0===o||o.delete(),null===a||void 0===a||a.delete(),null===s||void 0===s||s.delete(),l&&clearTimeout(l)}_getAttributeManager(){return new CP(this.context.gl,{id:this.props.id,stats:this.context.stats})}_getChangeFlags(t){const e={},{dimensions:n}=this.state;e.dataChanged=this.isAttributeChanged()||this.isAggregationDirty(t,{compareAll:!0,dimension:n.data}),e.viewportChanged=t.changeFlags.viewportChanged;const{zoom:r}=this.state;return t.context.viewport&&t.context.viewport.zoom===r||(e.viewportZoomChanged=!0),e}_createTextures(){const{gl:t}=this.context,{textureSize:e,format:n,type:r}=this.state;this.setState({weightsTexture:new zE(t,{width:e,height:e,format:n,type:r,...ett}),maxWeightsTexture:new zE(t,{format:n,type:r,...ett})})}_setupAttributes(){this.getAttributeManager().add({positions:{size:3,type:5130,accessor:"getPosition"},weights:{size:1,accessor:"getWeight"}}),this.setState({positionAttributeName:"positions"})}_setupTextureParams(){const{gl:t}=this.context,{weightsTextureSize:e}=this.props,n=Math.min(e,WS(t,3379)),r=xT(t,att),{format:i,type:o}=function(t){let{gl:e,floatTargetSupport:n}=t;return n?{format:tS(e)?34836:6408,type:5126}:{format:6408,type:5121}}({gl:t,floatTargetSupport:r}),a=r?1:1/255;this.setState({textureSize:n,format:i,type:o,weightsScale:a}),r||Gw.warn("HeatmapLayer: ".concat(this.id," rendering to float texture not supported, fallingback to low precession format"))()}getShaders(t){return super.getShaders("max-weights-transform"===t?{vs:"attribute vec4 inTexture;\nvarying vec4 outTexture;\n\nvoid main()\n{\noutTexture = inTexture;\ngl_Position = vec4(0, 0, 0, 1.);\ngl_PointSize = 1.0;\n}\n",_fs:"varying vec4 outTexture;\nvoid main() {\n  gl_FragColor = outTexture;\n  gl_FragColor.g = outTexture.r / max(1.0, outTexture.a);\n}\n"}:{vs:"attribute vec3 positions;\nattribute vec3 positions64Low;\nattribute float weights;\nvarying vec4 weightsTexture;\nuniform float radiusPixels;\nuniform float textureWidth;\nuniform vec4 commonBounds;\nuniform float weightsScale;\nvoid main()\n{\n  weightsTexture = vec4(weights * weightsScale, 0., 0., 1.);\n\n  float radiusTexels  = project_pixel_size(radiusPixels) * textureWidth / (commonBounds.z - commonBounds.x);\n  gl_PointSize = radiusTexels * 2.;\n\n  vec3 commonPosition = project_position(positions, positions64Low);\n  gl_Position.xy = (commonPosition.xy - commonBounds.xy) / (commonBounds.zw - commonBounds.xy) ;\n  gl_Position.xy = (gl_Position.xy * 2.) - (1.);\n}\n",_fs:"varying vec4 weightsTexture;\nfloat gaussianKDE(float u){\n  return pow(2.71828, -u*u/0.05555)/(1.77245385*0.166666);\n}\nvoid main()\n{\n  float dist = length(gl_PointCoord - vec2(0.5, 0.5));\n  if (dist > 0.5) {\n    discard;\n  }\n  gl_FragColor = weightsTexture * gaussianKDE(2. * dist);\n  DECKGL_FILTER_COLOR(gl_FragColor, geometry);\n}\n"})}_createWeightsTransform(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};var e;const{gl:n}=this.context;let{weightsTransform:r}=this.state;const{weightsTexture:i}=this.state;null===(e=r)||void 0===e||e.delete(),r=new wP(n,{id:"".concat(this.id,"-weights-transform"),elementCount:1,_targetTexture:i,_targetTextureVarying:"weightsTexture",...t}),this.setState({weightsTransform:r})}_setupResources(){const{gl:t}=this.context;this._createTextures();const{textureSize:e,weightsTexture:n,maxWeightsTexture:r}=this.state,i=this.getShaders("weights-transform");this._createWeightsTransform(i);const o=this.getShaders("max-weights-transform"),a=new wP(t,{id:"".concat(this.id,"-max-weights-transform"),_sourceTextures:{inTexture:n},_targetTexture:r,_targetTextureVarying:"outTexture",...o,elementCount:e*e});this.setState({weightsTexture:n,maxWeightsTexture:r,maxWeightTransform:a,zoom:null,triPositionBuffer:new AE(t,{byteLength:48,accessor:{size:3}}),triTexCoordBuffer:new AE(t,{byteLength:48,accessor:{size:2}})})}updateShaders(t){this._createWeightsTransform(t)}_updateMaxWeightValue(){const{maxWeightTransform:t}=this.state;t.run({parameters:{blend:!0,depthTest:!1,blendFunc:[1,1],blendEquation:32776}})}_updateBounds(){let t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];const{viewport:e}=this.context,n=[e.unproject([0,0]),e.unproject([e.width,0]),e.unproject([e.width,e.height]),e.unproject([0,e.height])].map((t=>t.map(Math.fround))),r=function(t){const e=t.map((t=>t[0])),n=t.map((t=>t[1])),r=Math.min.apply(null,e),i=Math.max.apply(null,e);return[r,Math.min.apply(null,n),i,Math.max.apply(null,n)]}(n),i={visibleWorldBounds:r,viewportCorners:n};let o=!1;if(t||!this.state.worldBounds||(a=this.state.worldBounds,!((s=r)[0]>=a[0]&&s[2]<=a[2]&&s[1]>=a[1]&&s[3]<=a[3]))){const t=this._worldToCommonBounds(r),e=this._commonToWorldBounds(t);this.props.coordinateSystem===qw.LNGLAT&&(e[1]=Math.max(e[1],-85.051129),e[3]=Math.min(e[3],85.051129),e[0]=Math.max(e[0],-360),e[2]=Math.min(e[2],360));const n=this._worldToCommonBounds(e);i.worldBounds=e,i.normalizedCommonBounds=n,o=!0}var a,s;return this.setState(i),o}_updateTextureRenderingBounds(){const{triPositionBuffer:t,triTexCoordBuffer:e,normalizedCommonBounds:n,viewportCorners:r}=this.state,{viewport:i}=this.context;t.subData($7(r,3));const o=r.map((t=>function(t,e){const[n,r,i,o]=e;return[(t[0]-n)/(i-n),(t[1]-r)/(o-r)]}(i.projectPosition(t),n)));e.subData($7(o,2))}_updateColorTexture(t){const{colorRange:e}=t.props;let{colorTexture:n}=this.state;const r=function(t){let e,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Float32Array;if(Number.isFinite(t[0]))e=new r(t);else{e=new r(4*t.length);let n=0;for(let r=0;r<t.length;r++){const i=t[r];e[n++]=i[0],e[n++]=i[1],e[n++]=i[2],e[n++]=Number.isFinite(i[3])?i[3]:255}}if(n)for(let i=0;i<e.length;i++)e[i]/=255;return e}(e,!1,Uint8Array);n?n.setImageData({data:r,width:e.length}):n=new zE(this.context.gl,{data:r,width:e.length,height:1,...ett}),this.setState({colorTexture:n})}_updateWeightmap(){const{radiusPixels:t,colorDomain:e,aggregation:n}=this.props,{weightsTransform:r,worldBounds:i,textureSize:o,weightsTexture:a,weightsScale:s}=this.state;this.state.isWeightMapDirty=!1;const l=this._worldToCommonBounds(i,{useLayerCoordinateSystem:!0});if(e&&"SUM"===n){const{viewport:t}=this.context,n=t.distanceScales.metersPerUnit[2]*(l[2]-l[0])/o;this.state.colorDomain=e.map((t=>t*n*s))}else this.state.colorDomain=e||ntt;const c={radiusPixels:t,commonBounds:l,textureWidth:o,weightsScale:s};r.update({elementCount:this.getNumInstances()}),GS(this.context.gl,{clearColor:[0,0,0,0]},(()=>{r.run({uniforms:c,parameters:{blend:!0,depthTest:!1,blendFunc:[1,1],blendEquation:32774},clearRenderTarget:!0,attributes:this.getAttributes(),moduleSettings:this.getModuleSettings()})})),this._updateMaxWeightValue(),a.setParameters({10240:9729,10241:9729})}_debouncedUpdateWeightmap(){let t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],{updateTimer:e}=this.state;const{debounceTimeout:n}=this.props;t?(e=null,this._updateBounds(!0),this._updateTextureRenderingBounds(),this.setState({isWeightMapDirty:!0})):(this.setState({isWeightMapDirty:!1}),clearTimeout(e),e=setTimeout(this._debouncedUpdateWeightmap.bind(this,!0),n)),this.setState({updateTimer:e})}_worldToCommonBounds(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{useLayerCoordinateSystem:n=!1}=e,[r,i,o,a]=t,{viewport:s}=this.context,{textureSize:l}=this.state,{coordinateSystem:c}=this.props,u=n&&(c===qw.LNGLAT_OFFSETS||c===qw.METER_OFFSETS),h=u?s.projectPosition(this.props.coordinateOrigin):[0,0],d=2*l/s.scale;let f,p;return n&&!u?(f=this.projectPosition([r,i,0]),p=this.projectPosition([o,a,0])):(f=s.projectPosition([r,i,0]),p=s.projectPosition([o,a,0])),function(t,e,n){const[r,i,o,a]=t,s=o-r,l=a-i;let c=s,u=l;s/l<e/n?c=e/n*l:u=n/e*s,c<e&&(c=e,u=n);const h=(o+r)/2,d=(a+i)/2;return[h-c/2,d-u/2,h+c/2,d+u/2]}([f[0]-h[0],f[1]-h[1],p[0]-h[0],p[1]-h[1]],d,d)}_commonToWorldBounds(t){const[e,n,r,i]=t,{viewport:o}=this.context,a=o.unprojectPosition([e,n]),s=o.unprojectPosition([r,i]);return a.slice(0,2).concat(s.slice(0,2))}}ww(ltt,"layerName","HeatmapLayer"),ww(ltt,"defaultProps",itt);const ctt=["#C32B21","#FF4945","#FEBDBC","#46A59C","#528EAA","#6A60C6","#8132E1"],utt=["Muy fr\xedo","Fr\xedo","Ligeramente fr\xedo","Templado","Ligeramente c\xe1lido","Caliente","Muy caliente"];const htt={muy_caliente:"Suelo muy caliente",caliente:"Suelo caliente",ligeramente_calido:"Suelo ligeramente c\xe1lido",templado:"Suelo templado",frio:"Suelo fr\xedo",ligeramente_frio:"Suelo ligeramente fr\xedo",muy_frio:"Suelo muy fr\xedo"},dtt=t=>{if(!t.active||!t.payload||0===t.payload.length)return null;for(let e=0;e<t.payload.length;e++)t.payload[e].name=htt[t.payload[e].name]||t.payload[e].name;return(0,Si.jsx)(RR,{...t})},ftt=t=>{let{data:e,title:n,column:i,columnKey:o,formatter:a,reducer:s,filtering:l,domain:c}=t;const[u]=ki("(max-width: 800px)"),{setOutline:h}=olt(),{data:d}=wat("".concat(Fot,"/div-municipal.geojson"),{features:[]});let f=(0,r.useMemo)((()=>lK()(e||[]).filter((t=>cK[t[o]])).filter((t=>!l||l(t))).value().sort(((t,e)=>e[i]-t[i]))),[e,o,i,s,l]);const[p,m]=(0,r.useState)(null),g=(0,r.useCallback)((t=>{h({type:zz,props:{id:"municipality-layer",data:d.features.filter((e=>e.properties.NOMGEO===t)),getFillColor:[255,174,0,80],getLineColor:[255,174,0,250],getLineWidth:120}}),m(t)}),[e]);return(0,Si.jsxs)("div",{style:u?{height:"200px",bottom:"-10px",width:"100%"}:{height:"min(15dvw, 30dvh)",bottom:"-10px",position:"absolute",width:"100%"},children:[(0,Si.jsx)(ED,{width:"100%",height:"100%",children:(0,Si.jsxs)(aK,{layout:"vertical",data:f,barCategoryGap:0,children:[(0,Si.jsx)(rK,{tickFormatter:a,type:"number",dataKey:i,style:{fontSize:u?"0.6rem":"min(1dvw, 1.2dvh)"},domain:c,tickCount:8}),(0,Si.jsx)(oK,{type:"category",dataKey:o,hide:!0}),(0,Si.jsx)(yB,{formatter:a,labelStyle:{fontSize:u?"10px":"0.9dvw",fontWeight:"bold",color:"#363636"},itemStyle:{fontSize:u?"10px":"0.9dvw",padding:"0px"},contentStyle:{borderRadius:"10px",padding:"5px 10px"},content:(0,Si.jsx)(dtt,{})}),["muy_caliente","caliente","ligeramente_calido","templado","ligeramente_frio","frio","muy_frio"].map(((t,e)=>(0,Si.jsxs)(QH,{isAnimationActive:!1,stackId:"bars",fill:ctt[e],dataKey:t,style:{cursor:"pointer",pointerEvents:"none"},children:[2===e&&(0,Si.jsx)(Wq,{content:(0,Si.jsx)(hK,{columnKey:o,data:f,inverse:!0})}),f.map(((t,e)=>(0,Si.jsx)(Pq,{onMouseEnter:()=>g(t[o]),onMouseLeave:()=>{h(null),m(null)},opacity:p===t[o]?1:.7,style:{cursor:"pointer",transition:"fill 0.05s ease"}},"cell-".concat(t[o]))))]},t)))]})}),(0,Si.jsx)(Yz,{color:"gray.600",style:{textAlign:"center",fontSize:u?"8px":"min(1dvw, 1.4dvh)",marginTop:"-15px"},children:n})]})},ptt={acelerada:"Crecimiento acelerado",inercial:"Crecimiento inercial",controlada:"Crecimiento controlado"},mtt=t=>{if(!t.active||!t.payload||0===t.payload.length)return null;for(let e=0;e<t.payload.length;e++)t.payload[e].name=ptt[t.payload[e].name]||t.payload[e].name;return(0,Si.jsx)(RR,{...t})},gtt=t=>{let{data:e,title:n,lines:r,columnKey:i,formatter:o,reducer:a,filtering:s,domain:l,lineColors:c}=t;const[u]=ki("(max-width: 800px)");return(0,Si.jsx)("div",{style:u?{height:"200px",bottom:"0px",width:"100%"}:{height:"min(15dvw, 30dvh)",bottom:"0px",position:"absolute",width:"100%"},children:(0,Si.jsx)(ED,{width:"100%",height:"100%",children:(0,Si.jsxs)(B7,{data:e,children:[(0,Si.jsx)(rK,{type:"number",dataKey:i,domain:l,tickCount:6,fontSize:u?"0.6rem":"min(1dvh, 0.6dvw)",children:(0,Si.jsx)(wq,{value:n,position:"insideBottom",style:{fontWeight:"bold",fontSize:u?"8px":"min(1.4dvh, 0.8dvw)",transform:"translateY(min(0.4dvw, 0.7dvh))"}})}),(0,Si.jsx)(oK,{type:"number",fontSize:u?"0.6rem":"min(1dvh, 0.8dvw)",width:32,tickCount:5,tickFormatter:o}),(0,Si.jsx)(yB,{labelStyle:{fontSize:u?"10px":"0.9dvw",fontWeight:"bold",color:"#363636"},itemStyle:{fontSize:u?"10px":"0.9dvw",padding:"0px"},formatter:t=>o(t),content:(0,Si.jsx)(mtt,{})}),r.map(((t,e)=>(0,Si.jsx)(D7,{style:{cursor:"pointer",pointerEvents:"none"},type:"monotone",dataKey:t,stroke:c[e],fillOpacity:1,fill:c[e]},t)))]})})})},ytt=["#6D4F90","#4A6985","#58777A"],vtt=["acelerada","inercial","controlada"],_tt={actual:"#A8AEC1",acelerada:"#6D4F90",inercial:"#4A6985",controlada:"#58777A"};var btt=1,xtt=2,wtt=5,Stt=484813681109536e-20,Ett=Math.PI/2,Ttt=.16666666666666666,Mtt=.04722222222222222,Att=.022156084656084655,Ctt=1e-10,Ptt=.017453292519943295,ktt=57.29577951308232,Itt=Math.PI/4,Ott=2*Math.PI,Ltt=3.14159265359,jtt={greenwich:0,lisbon:-9.131906111111,paris:2.337229166667,bogota:-74.080916666667,madrid:-3.687938888889,rome:12.452333333333,bern:7.439583333333,jakarta:106.807719444444,ferro:-17.666666666667,brussels:4.367975,stockholm:18.058277777778,athens:23.7163375,oslo:10.722916666667};const ztt={ft:{to_meter:.3048},"us-ft":{to_meter:1200/3937}};var Rtt=/[\s_\-\/\(\)]/g;function Dtt(t,e){if(t[e])return t[e];for(var n,r=Object.keys(t),i=e.toLowerCase().replace(Rtt,""),o=-1;++o<r.length;)if((n=r[o]).toLowerCase().replace(Rtt,"")===i)return t[n]}function Btt(t){var e,n,r,i={},o=t.split("+").map((function(t){return t.trim()})).filter((function(t){return t})).reduce((function(t,e){var n=e.split("=");return n.push(!0),t[n[0].toLowerCase()]=n[1],t}),{}),a={proj:"projName",datum:"datumCode",rf:function(t){i.rf=parseFloat(t)},lat_0:function(t){i.lat0=t*Ptt},lat_1:function(t){i.lat1=t*Ptt},lat_2:function(t){i.lat2=t*Ptt},lat_ts:function(t){i.lat_ts=t*Ptt},lon_0:function(t){i.long0=t*Ptt},lon_1:function(t){i.long1=t*Ptt},lon_2:function(t){i.long2=t*Ptt},alpha:function(t){i.alpha=parseFloat(t)*Ptt},lonc:function(t){i.longc=t*Ptt},x_0:function(t){i.x0=parseFloat(t)},y_0:function(t){i.y0=parseFloat(t)},k_0:function(t){i.k0=parseFloat(t)},k:function(t){i.k0=parseFloat(t)},a:function(t){i.a=parseFloat(t)},b:function(t){i.b=parseFloat(t)},r_a:function(){i.R_A=!0},zone:function(t){i.zone=parseInt(t,10)},south:function(){i.utmSouth=!0},towgs84:function(t){i.datum_params=t.split(",").map((function(t){return parseFloat(t)}))},to_meter:function(t){i.to_meter=parseFloat(t)},units:function(t){i.units=t;var e=Dtt(ztt,t);e&&(i.to_meter=e.to_meter)},from_greenwich:function(t){i.from_greenwich=t*Ptt},pm:function(t){var e=Dtt(jtt,t);i.from_greenwich=(e||parseFloat(t))*Ptt},nadgrids:function(t){"@null"===t?i.datumCode="none":i.nadgrids=t},axis:function(t){var e="ewnsud";3===t.length&&-1!==e.indexOf(t.substr(0,1))&&-1!==e.indexOf(t.substr(1,1))&&-1!==e.indexOf(t.substr(2,1))&&(i.axis=t)}};for(e in o)n=o[e],e in a?"function"===typeof(r=a[e])?r(n):i[r]=n:i[e]=n;return"string"===typeof i.datumCode&&"WGS84"!==i.datumCode&&(i.datumCode=i.datumCode.toLowerCase()),i}const Ftt=function(t){var e=new Htt(t);return e.output()};var Ntt=1,Utt=/\s/,Vtt=/[A-Za-z]/,Wtt=/[A-Za-z84_]/,Gtt=/[,\]]/,qtt=/[\d\.E\-\+]/;function Htt(t){if("string"!==typeof t)throw new Error("not a string");this.text=t.trim(),this.level=0,this.place=0,this.root=null,this.stack=[],this.currentObject=null,this.state=Ntt}function Ztt(t,e,n){Array.isArray(e)&&(n.unshift(e),e=null);var r=e?{}:t,i=n.reduce((function(t,e){return Xtt(e,t),t}),r);e&&(t[e]=i)}function Xtt(t,e){if(Array.isArray(t)){var n=t.shift();if("PARAMETER"===n&&(n=t.shift()),1===t.length)return Array.isArray(t[0])?(e[n]={},void Xtt(t[0],e[n])):void(e[n]=t[0]);if(t.length)if("TOWGS84"!==n){if("AXIS"===n)return n in e||(e[n]=[]),void e[n].push(t);var r;switch(Array.isArray(n)||(e[n]={}),n){case"UNIT":case"PRIMEM":case"VERT_DATUM":return e[n]={name:t[0].toLowerCase(),convert:t[1]},void(3===t.length&&Xtt(t[2],e[n]));case"SPHEROID":case"ELLIPSOID":return e[n]={name:t[0],a:t[1],rf:t[2]},void(4===t.length&&Xtt(t[3],e[n]));case"PROJECTEDCRS":case"PROJCRS":case"GEOGCS":case"GEOCCS":case"PROJCS":case"LOCAL_CS":case"GEODCRS":case"GEODETICCRS":case"GEODETICDATUM":case"EDATUM":case"ENGINEERINGDATUM":case"VERT_CS":case"VERTCRS":case"VERTICALCRS":case"COMPD_CS":case"COMPOUNDCRS":case"ENGINEERINGCRS":case"ENGCRS":case"FITTED_CS":case"LOCAL_DATUM":case"DATUM":return t[0]=["name",t[0]],void Ztt(e,n,t);default:for(r=-1;++r<t.length;)if(!Array.isArray(t[r]))return Xtt(t,e[n]);return Ztt(e,n,t)}}else e[n]=t;else e[n]=!0}else e[t]=!0}Htt.prototype.readCharicter=function(){var t=this.text[this.place++];if(4!==this.state)for(;Utt.test(t);){if(this.place>=this.text.length)return;t=this.text[this.place++]}switch(this.state){case Ntt:return this.neutral(t);case 2:return this.keyword(t);case 4:return this.quoted(t);case 5:return this.afterquote(t);case 3:return this.number(t);case-1:return}},Htt.prototype.afterquote=function(t){if('"'===t)return this.word+='"',void(this.state=4);if(Gtt.test(t))return this.word=this.word.trim(),void this.afterItem(t);throw new Error("havn't handled \""+t+'" in afterquote yet, index '+this.place)},Htt.prototype.afterItem=function(t){return","===t?(null!==this.word&&this.currentObject.push(this.word),this.word=null,void(this.state=Ntt)):"]"===t?(this.level--,null!==this.word&&(this.currentObject.push(this.word),this.word=null),this.state=Ntt,this.currentObject=this.stack.pop(),void(this.currentObject||(this.state=-1))):void 0},Htt.prototype.number=function(t){if(!qtt.test(t)){if(Gtt.test(t))return this.word=parseFloat(this.word),void this.afterItem(t);throw new Error("havn't handled \""+t+'" in number yet, index '+this.place)}this.word+=t},Htt.prototype.quoted=function(t){'"'!==t?this.word+=t:this.state=5},Htt.prototype.keyword=function(t){if(Wtt.test(t))this.word+=t;else{if("["===t){var e=[];return e.push(this.word),this.level++,null===this.root?this.root=e:this.currentObject.push(e),this.stack.push(this.currentObject),this.currentObject=e,void(this.state=Ntt)}if(!Gtt.test(t))throw new Error("havn't handled \""+t+'" in keyword yet, index '+this.place);this.afterItem(t)}},Htt.prototype.neutral=function(t){if(Vtt.test(t))return this.word=t,void(this.state=2);if('"'===t)return this.word="",void(this.state=4);if(qtt.test(t))return this.word=t,void(this.state=3);if(!Gtt.test(t))throw new Error("havn't handled \""+t+'" in neutral yet, index '+this.place);this.afterItem(t)},Htt.prototype.output=function(){for(;this.place<this.text.length;)this.readCharicter();if(-1===this.state)return this.root;throw new Error('unable to parse string "'+this.text+'". State is '+this.state)};var Ytt=.017453292519943295;function Ktt(t){return t*Ytt}function $tt(t){var e=Ftt(t),n=e.shift(),r=e.shift();e.unshift(["name",r]),e.unshift(["type",n]);var i={};return Xtt(e,i),function(t){if("GEOGCS"===t.type?t.projName="longlat":"LOCAL_CS"===t.type?(t.projName="identity",t.local=!0):"object"===typeof t.PROJECTION?t.projName=Object.keys(t.PROJECTION)[0]:t.projName=t.PROJECTION,t.AXIS){for(var e="",n=0,r=t.AXIS.length;n<r;++n){var i=[t.AXIS[n][0].toLowerCase(),t.AXIS[n][1].toLowerCase()];-1!==i[0].indexOf("north")||("y"===i[0]||"lat"===i[0])&&"north"===i[1]?e+="n":-1!==i[0].indexOf("south")||("y"===i[0]||"lat"===i[0])&&"south"===i[1]?e+="s":-1!==i[0].indexOf("east")||("x"===i[0]||"lon"===i[0])&&"east"===i[1]?e+="e":-1===i[0].indexOf("west")&&("x"!==i[0]&&"lon"!==i[0]||"west"!==i[1])||(e+="w")}2===e.length&&(e+="u"),3===e.length&&(t.axis=e)}t.UNIT&&(t.units=t.UNIT.name.toLowerCase(),"metre"===t.units&&(t.units="meter"),t.UNIT.convert&&("GEOGCS"===t.type?t.DATUM&&t.DATUM.SPHEROID&&(t.to_meter=t.UNIT.convert*t.DATUM.SPHEROID.a):t.to_meter=t.UNIT.convert));var o=t.GEOGCS;function a(e){return e*(t.to_meter||1)}"GEOGCS"===t.type&&(o=t),o&&(o.DATUM?t.datumCode=o.DATUM.name.toLowerCase():t.datumCode=o.name.toLowerCase(),"d_"===t.datumCode.slice(0,2)&&(t.datumCode=t.datumCode.slice(2)),"new_zealand_geodetic_datum_1949"!==t.datumCode&&"new_zealand_1949"!==t.datumCode||(t.datumCode="nzgd49"),"wgs_1984"!==t.datumCode&&"world_geodetic_system_1984"!==t.datumCode||("Mercator_Auxiliary_Sphere"===t.PROJECTION&&(t.sphere=!0),t.datumCode="wgs84"),"_ferro"===t.datumCode.slice(-6)&&(t.datumCode=t.datumCode.slice(0,-6)),"_jakarta"===t.datumCode.slice(-8)&&(t.datumCode=t.datumCode.slice(0,-8)),~t.datumCode.indexOf("belge")&&(t.datumCode="rnb72"),o.DATUM&&o.DATUM.SPHEROID&&(t.ellps=o.DATUM.SPHEROID.name.replace("_19","").replace(/[Cc]larke\_18/,"clrk"),"international"===t.ellps.toLowerCase().slice(0,13)&&(t.ellps="intl"),t.a=o.DATUM.SPHEROID.a,t.rf=parseFloat(o.DATUM.SPHEROID.rf,10)),o.DATUM&&o.DATUM.TOWGS84&&(t.datum_params=o.DATUM.TOWGS84),~t.datumCode.indexOf("osgb_1936")&&(t.datumCode="osgb36"),~t.datumCode.indexOf("osni_1952")&&(t.datumCode="osni52"),(~t.datumCode.indexOf("tm65")||~t.datumCode.indexOf("geodetic_datum_of_1965"))&&(t.datumCode="ire65"),"ch1903+"===t.datumCode&&(t.datumCode="ch1903"),~t.datumCode.indexOf("israel")&&(t.datumCode="isr93")),t.b&&!isFinite(t.b)&&(t.b=t.a),[["standard_parallel_1","Standard_Parallel_1"],["standard_parallel_1","Latitude of 1st standard parallel"],["standard_parallel_2","Standard_Parallel_2"],["standard_parallel_2","Latitude of 2nd standard parallel"],["false_easting","False_Easting"],["false_easting","False easting"],["false-easting","Easting at false origin"],["false_northing","False_Northing"],["false_northing","False northing"],["false_northing","Northing at false origin"],["central_meridian","Central_Meridian"],["central_meridian","Longitude of natural origin"],["central_meridian","Longitude of false origin"],["latitude_of_origin","Latitude_Of_Origin"],["latitude_of_origin","Central_Parallel"],["latitude_of_origin","Latitude of natural origin"],["latitude_of_origin","Latitude of false origin"],["scale_factor","Scale_Factor"],["k0","scale_factor"],["latitude_of_center","Latitude_Of_Center"],["latitude_of_center","Latitude_of_center"],["lat0","latitude_of_center",Ktt],["longitude_of_center","Longitude_Of_Center"],["longitude_of_center","Longitude_of_center"],["longc","longitude_of_center",Ktt],["x0","false_easting",a],["y0","false_northing",a],["long0","central_meridian",Ktt],["lat0","latitude_of_origin",Ktt],["lat0","standard_parallel_1",Ktt],["lat1","standard_parallel_1",Ktt],["lat2","standard_parallel_2",Ktt],["azimuth","Azimuth"],["alpha","azimuth",Ktt],["srsCode","name"]].forEach((function(e){return function(t,e){var n=e[0],r=e[1];!(n in t)&&r in t&&(t[n]=t[r],3===e.length&&(t[n]=e[2](t[n])))}(t,e)})),t.long0||!t.longc||"Albers_Conic_Equal_Area"!==t.projName&&"Lambert_Azimuthal_Equal_Area"!==t.projName||(t.long0=t.longc),t.lat_ts||!t.lat1||"Stereographic_South_Pole"!==t.projName&&"Polar Stereographic (variant B)"!==t.projName?!t.lat_ts&&t.lat0&&"Polar_Stereographic"===t.projName&&(t.lat_ts=t.lat0,t.lat0=Ktt(t.lat0>0?90:-90)):(t.lat0=Ktt(t.lat1>0?90:-90),t.lat_ts=t.lat1)}(i),i}function Jtt(t){var e=this;if(2===arguments.length){var n=arguments[1];"string"===typeof n?"+"===n.charAt(0)?Jtt[t]=Btt(arguments[1]):Jtt[t]=$tt(arguments[1]):Jtt[t]=n}else if(1===arguments.length){if(Array.isArray(t))return t.map((function(t){Array.isArray(t)?Jtt.apply(e,t):Jtt(t)}));if("string"===typeof t){if(t in Jtt)return Jtt[t]}else"EPSG"in t?Jtt["EPSG:"+t.EPSG]=t:"ESRI"in t?Jtt["ESRI:"+t.ESRI]=t:"IAU2000"in t?Jtt["IAU2000:"+t.IAU2000]=t:console.log(t);return}}!function(t){t("EPSG:4326","+title=WGS 84 (long/lat) +proj=longlat +ellps=WGS84 +datum=WGS84 +units=degrees"),t("EPSG:4269","+title=NAD83 (long/lat) +proj=longlat +a=6378137.0 +b=6356752.31414036 +ellps=GRS80 +datum=NAD83 +units=degrees"),t("EPSG:3857","+title=WGS 84 / Pseudo-Mercator +proj=merc +a=6378137 +b=6378137 +lat_ts=0.0 +lon_0=0.0 +x_0=0.0 +y_0=0 +k=1.0 +units=m +nadgrids=@null +no_defs"),t.WGS84=t["EPSG:4326"],t["EPSG:3785"]=t["EPSG:3857"],t.GOOGLE=t["EPSG:3857"],t["EPSG:900913"]=t["EPSG:3857"],t["EPSG:102113"]=t["EPSG:3857"]}(Jtt);const Qtt=Jtt;var tet=["PROJECTEDCRS","PROJCRS","GEOGCS","GEOCCS","PROJCS","LOCAL_CS","GEODCRS","GEODETICCRS","GEODETICDATUM","ENGCRS","ENGINEERINGCRS"];var eet=["3857","900913","3785","102113"];const net=function(t){if(!function(t){return"string"===typeof t}(t))return t;if(function(t){return t in Qtt}(t))return Qtt[t];if(function(t){return tet.some((function(e){return t.indexOf(e)>-1}))}(t)){var e=$tt(t);if(function(t){var e=Dtt(t,"authority");if(e){var n=Dtt(e,"epsg");return n&&eet.indexOf(n)>-1}}(e))return Qtt["EPSG:3857"];var n=function(t){var e=Dtt(t,"extension");if(e)return Dtt(e,"proj4")}(e);return n?Btt(n):e}return function(t){return"+"===t[0]}(t)?Btt(t):void 0};function ret(t,e){var n,r;if(t=t||{},!e)return t;for(r in e)void 0!==(n=e[r])&&(t[r]=n);return t}function iet(t,e,n){var r=t*e;return n/Math.sqrt(1-r*r)}function oet(t){return t<0?-1:1}function aet(t){return Math.abs(t)<=Ltt?t:t-oet(t)*Ott}function set(t,e,n){var r=t*n,i=.5*t;return r=Math.pow((1-r)/(1+r),i),Math.tan(.5*(Ett-e))/r}function cet(t,e){for(var n,r,i=.5*t,o=Ett-2*Math.atan(e),a=0;a<=15;a++)if(n=t*Math.sin(o),o+=r=Ett-2*Math.atan(e*Math.pow((1-n)/(1+n),i))-o,Math.abs(r)<=1e-10)return o;return-9999}function uet(t){return t}var het=[{init:function(){var t=this.b/this.a;this.es=1-t*t,"x0"in this||(this.x0=0),"y0"in this||(this.y0=0),this.e=Math.sqrt(this.es),this.lat_ts?this.sphere?this.k0=Math.cos(this.lat_ts):this.k0=iet(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts)):this.k0||(this.k?this.k0=this.k:this.k0=1)},forward:function(t){var e,n,r=t.x,i=t.y;if(i*ktt>90&&i*ktt<-90&&r*ktt>180&&r*ktt<-180)return null;if(Math.abs(Math.abs(i)-Ett)<=Ctt)return null;if(this.sphere)e=this.x0+this.a*this.k0*aet(r-this.long0),n=this.y0+this.a*this.k0*Math.log(Math.tan(Itt+.5*i));else{var o=Math.sin(i),a=set(this.e,i,o);e=this.x0+this.a*this.k0*aet(r-this.long0),n=this.y0-this.a*this.k0*Math.log(a)}return t.x=e,t.y=n,t},inverse:function(t){var e,n,r=t.x-this.x0,i=t.y-this.y0;if(this.sphere)n=Ett-2*Math.atan(Math.exp(-i/(this.a*this.k0)));else{var o=Math.exp(-i/(this.a*this.k0));if(-9999===(n=cet(this.e,o)))return null}return e=aet(this.long0+r/(this.a*this.k0)),t.x=e,t.y=n,t},names:["Mercator","Popular Visualisation Pseudo Mercator","Mercator_1SP","Mercator_Auxiliary_Sphere","merc"]},{init:function(){},forward:uet,inverse:uet,names:["longlat","identity"]}],det={},fet=[];function pet(t,e){var n=fet.length;return t.names?(fet[n]=t,t.names.forEach((function(t){det[t.toLowerCase()]=n})),this):(console.log(e),!0)}const met={start:function(){het.forEach(pet)},add:pet,get:function(t){if(!t)return!1;var e=t.toLowerCase();return"undefined"!==typeof det[e]&&fet[det[e]]?fet[det[e]]:void 0}};var get={MERIT:{a:6378137,rf:298.257,ellipseName:"MERIT 1983"},SGS85:{a:6378136,rf:298.257,ellipseName:"Soviet Geodetic System 85"},GRS80:{a:6378137,rf:298.257222101,ellipseName:"GRS 1980(IUGG, 1980)"},IAU76:{a:6378140,rf:298.257,ellipseName:"IAU 1976"},airy:{a:6377563.396,b:6356256.91,ellipseName:"Airy 1830"},APL4:{a:6378137,rf:298.25,ellipseName:"Appl. Physics. 1965"},NWL9D:{a:6378145,rf:298.25,ellipseName:"Naval Weapons Lab., 1965"},mod_airy:{a:6377340.189,b:6356034.446,ellipseName:"Modified Airy"},andrae:{a:6377104.43,rf:300,ellipseName:"Andrae 1876 (Den., Iclnd.)"},aust_SA:{a:6378160,rf:298.25,ellipseName:"Australian Natl & S. Amer. 1969"},GRS67:{a:6378160,rf:298.247167427,ellipseName:"GRS 67(IUGG 1967)"},bessel:{a:6377397.155,rf:299.1528128,ellipseName:"Bessel 1841"},bess_nam:{a:6377483.865,rf:299.1528128,ellipseName:"Bessel 1841 (Namibia)"},clrk66:{a:6378206.4,b:6356583.8,ellipseName:"Clarke 1866"},clrk80:{a:6378249.145,rf:293.4663,ellipseName:"Clarke 1880 mod."},clrk58:{a:6378293.645208759,rf:294.2606763692654,ellipseName:"Clarke 1858"},CPM:{a:6375738.7,rf:334.29,ellipseName:"Comm. des Poids et Mesures 1799"},delmbr:{a:6376428,rf:311.5,ellipseName:"Delambre 1810 (Belgium)"},engelis:{a:6378136.05,rf:298.2566,ellipseName:"Engelis 1985"},evrst30:{a:6377276.345,rf:300.8017,ellipseName:"Everest 1830"},evrst48:{a:6377304.063,rf:300.8017,ellipseName:"Everest 1948"},evrst56:{a:6377301.243,rf:300.8017,ellipseName:"Everest 1956"},evrst69:{a:6377295.664,rf:300.8017,ellipseName:"Everest 1969"},evrstSS:{a:6377298.556,rf:300.8017,ellipseName:"Everest (Sabah & Sarawak)"},fschr60:{a:6378166,rf:298.3,ellipseName:"Fischer (Mercury Datum) 1960"},fschr60m:{a:6378155,rf:298.3,ellipseName:"Fischer 1960"},fschr68:{a:6378150,rf:298.3,ellipseName:"Fischer 1968"},helmert:{a:6378200,rf:298.3,ellipseName:"Helmert 1906"},hough:{a:6378270,rf:297,ellipseName:"Hough"},intl:{a:6378388,rf:297,ellipseName:"International 1909 (Hayford)"},kaula:{a:6378163,rf:298.24,ellipseName:"Kaula 1961"},lerch:{a:6378139,rf:298.257,ellipseName:"Lerch 1979"},mprts:{a:6397300,rf:191,ellipseName:"Maupertius 1738"},new_intl:{a:6378157.5,b:6356772.2,ellipseName:"New International 1967"},plessis:{a:6376523,rf:6355863,ellipseName:"Plessis 1817 (France)"},krass:{a:6378245,rf:298.3,ellipseName:"Krassovsky, 1942"},SEasia:{a:6378155,b:6356773.3205,ellipseName:"Southeast Asia"},walbeck:{a:6376896,b:6355834.8467,ellipseName:"Walbeck"},WGS60:{a:6378165,rf:298.3,ellipseName:"WGS 60"},WGS66:{a:6378145,rf:298.25,ellipseName:"WGS 66"},WGS7:{a:6378135,rf:298.26,ellipseName:"WGS 72"}},yet=get.WGS84={a:6378137,rf:298.257223563,ellipseName:"WGS 84"};get.sphere={a:6370997,b:6370997,ellipseName:"Normal Sphere (r=6370997)"};var vet={};vet.wgs84={towgs84:"0,0,0",ellipse:"WGS84",datumName:"WGS84"},vet.ch1903={towgs84:"674.374,15.056,405.346",ellipse:"bessel",datumName:"swiss"},vet.ggrs87={towgs84:"-199.87,74.79,246.62",ellipse:"GRS80",datumName:"Greek_Geodetic_Reference_System_1987"},vet.nad83={towgs84:"0,0,0",ellipse:"GRS80",datumName:"North_American_Datum_1983"},vet.nad27={nadgrids:"@conus,@alaska,@ntv2_0.gsb,@ntv1_can.dat",ellipse:"clrk66",datumName:"North_American_Datum_1927"},vet.potsdam={towgs84:"606.0,23.0,413.0",ellipse:"bessel",datumName:"Potsdam Rauenberg 1950 DHDN"},vet.carthage={towgs84:"-263.0,6.0,431.0",ellipse:"clark80",datumName:"Carthage 1934 Tunisia"},vet.hermannskogel={towgs84:"653.0,-212.0,449.0",ellipse:"bessel",datumName:"Hermannskogel"},vet.osni52={towgs84:"482.530,-130.596,564.557,-1.042,-0.214,-0.631,8.15",ellipse:"airy",datumName:"Irish National"},vet.ire65={towgs84:"482.530,-130.596,564.557,-1.042,-0.214,-0.631,8.15",ellipse:"mod_airy",datumName:"Ireland 1965"},vet.rassadiran={towgs84:"-133.63,-157.5,-158.62",ellipse:"intl",datumName:"Rassadiran"},vet.nzgd49={towgs84:"59.47,-5.04,187.44,0.47,-0.1,1.024,-4.5993",ellipse:"intl",datumName:"New Zealand Geodetic Datum 1949"},vet.osgb36={towgs84:"446.448,-125.157,542.060,0.1502,0.2470,0.8421,-20.4894",ellipse:"airy",datumName:"Airy 1830"},vet.s_jtsk={towgs84:"589,76,480",ellipse:"bessel",datumName:"S-JTSK (Ferro)"},vet.beduaram={towgs84:"-106,-87,188",ellipse:"clrk80",datumName:"Beduaram"},vet.gunung_segara={towgs84:"-403,684,41",ellipse:"bessel",datumName:"Gunung Segara Jakarta"},vet.rnb72={towgs84:"106.869,-52.2978,103.724,-0.33657,0.456955,-1.84218,1",ellipse:"intl",datumName:"Reseau National Belge 1972"};const _et=function(t,e,n,r,i,o){var a={};return a.datum_type=void 0===t||"none"===t?wtt:4,e&&(a.datum_params=e.map(parseFloat),0===a.datum_params[0]&&0===a.datum_params[1]&&0===a.datum_params[2]||(a.datum_type=btt),a.datum_params.length>3&&(0===a.datum_params[3]&&0===a.datum_params[4]&&0===a.datum_params[5]&&0===a.datum_params[6]||(a.datum_type=xtt,a.datum_params[3]*=Stt,a.datum_params[4]*=Stt,a.datum_params[5]*=Stt,a.datum_params[6]=a.datum_params[6]/1e6+1))),a.a=n,a.b=r,a.es=i,a.ep2=o,a};function bet(t,e){if(!(this instanceof bet))return new bet(t);e=e||function(t){if(t)throw t};var n=net(t);if("object"===typeof n){var r=bet.projections.get(n.projName);if(r){if(n.datumCode&&"none"!==n.datumCode){var i=Dtt(vet,n.datumCode);i&&(n.datum_params=i.towgs84?i.towgs84.split(","):null,n.ellps=i.ellipse,n.datumName=i.datumName?i.datumName:n.datumCode)}n.k0=n.k0||1,n.axis=n.axis||"enu",n.ellps=n.ellps||"wgs84";var o=function(t,e,n,r,i){if(!t){var o=Dtt(get,r);o||(o=yet),t=o.a,e=o.b,n=o.rf}return n&&!e&&(e=(1-1/n)*t),(0===n||Math.abs(t-e)<Ctt)&&(i=!0,e=t),{a:t,b:e,rf:n,sphere:i}}(n.a,n.b,n.rf,n.ellps,n.sphere),a=function(t,e,n,r){var i=t*t,o=e*e,a=(i-o)/i,s=0;return r?(i=(t*=1-a*(Ttt+a*(Mtt+a*Att)))*t,a=0):s=Math.sqrt(a),{es:a,e:s,ep2:(i-o)/o}}(o.a,o.b,o.rf,n.R_A),s=n.datum||_et(n.datumCode,n.datum_params,o.a,o.b,a.es,a.ep2);ret(this,n),ret(this,r),this.a=o.a,this.b=o.b,this.rf=o.rf,this.sphere=o.sphere,this.es=a.es,this.e=a.e,this.ep2=a.ep2,this.datum=s,this.init(),e(null,this)}else e(t)}else e(t)}bet.projections=met,bet.projections.start();const xet=bet;function wet(t,e,n){var r,i,o,a,s=t.x,l=t.y,c=t.z?t.z:0;if(l<-Ett&&l>-1.001*Ett)l=-Ett;else if(l>Ett&&l<1.001*Ett)l=Ett;else{if(l<-Ett)return{x:-1/0,y:-1/0,z:t.z};if(l>Ett)return{x:1/0,y:1/0,z:t.z}}return s>Math.PI&&(s-=2*Math.PI),i=Math.sin(l),a=Math.cos(l),o=i*i,{x:((r=n/Math.sqrt(1-e*o))+c)*a*Math.cos(s),y:(r+c)*a*Math.sin(s),z:(r*(1-e)+c)*i}}function Eet(t,e,n,r){var i,o,a,s,l,c,u,h,d,f,p,m,g,y,v,_=1e-12,b=t.x,x=t.y,w=t.z?t.z:0;if(i=Math.sqrt(b*b+x*x),o=Math.sqrt(b*b+x*x+w*w),i/n<_){if(y=0,o/n<_)return v=-r,{x:t.x,y:t.y,z:t.z}}else y=Math.atan2(x,b);a=w/o,h=(s=i/o)*(1-e)*(l=1/Math.sqrt(1-e*(2-e)*s*s)),d=a*l,g=0;do{g++,c=e*(u=n/Math.sqrt(1-e*d*d))/(u+(v=i*h+w*d-u*(1-e*d*d))),m=(p=a*(l=1/Math.sqrt(1-c*(2-c)*s*s)))*h-(f=s*(1-c)*l)*d,h=f,d=p}while(m*m>1e-24&&g<30);return{x:y,y:Math.atan(p/Math.abs(f)),z:v}}function Tet(t){return t===btt||t===xtt}function Met(t,e,n){return function(t,e){return t.datum_type===e.datum_type&&!(t.a!==e.a||Math.abs(t.es-e.es)>5e-11)&&(t.datum_type===btt?t.datum_params[0]===e.datum_params[0]&&t.datum_params[1]===e.datum_params[1]&&t.datum_params[2]===e.datum_params[2]:t.datum_type!==xtt||t.datum_params[0]===e.datum_params[0]&&t.datum_params[1]===e.datum_params[1]&&t.datum_params[2]===e.datum_params[2]&&t.datum_params[3]===e.datum_params[3]&&t.datum_params[4]===e.datum_params[4]&&t.datum_params[5]===e.datum_params[5]&&t.datum_params[6]===e.datum_params[6])}(t,e)||t.datum_type===wtt||e.datum_type===wtt?n:t.es!==e.es||t.a!==e.a||Tet(t.datum_type)||Tet(e.datum_type)?(n=wet(n,t.es,t.a),Tet(t.datum_type)&&(n=function(t,e,n){if(e===btt)return{x:t.x+n[0],y:t.y+n[1],z:t.z+n[2]};if(e===xtt){var r=n[0],i=n[1],o=n[2],a=n[3],s=n[4],l=n[5],c=n[6];return{x:c*(t.x-l*t.y+s*t.z)+r,y:c*(l*t.x+t.y-a*t.z)+i,z:c*(-s*t.x+a*t.y+t.z)+o}}}(n,t.datum_type,t.datum_params)),Tet(e.datum_type)&&(n=function(t,e,n){if(e===btt)return{x:t.x-n[0],y:t.y-n[1],z:t.z-n[2]};if(e===xtt){var r=n[0],i=n[1],o=n[2],a=n[3],s=n[4],l=n[5],c=n[6],u=(t.x-r)/c,h=(t.y-i)/c,d=(t.z-o)/c;return{x:u+l*h-s*d,y:-l*u+h+a*d,z:s*u-a*h+d}}}(n,e.datum_type,e.datum_params)),Eet(n,e.es,e.a,e.b)):n}function Aet(t,e,n){var r,i,o,a=n.x,s=n.y,l=n.z||0,c={};for(o=0;o<3;o++)if(!e||2!==o||void 0!==n.z)switch(0===o?(r=a,i=-1!=="ew".indexOf(t.axis[o])?"x":"y"):1===o?(r=s,i=-1!=="ns".indexOf(t.axis[o])?"y":"x"):(r=l,i="z"),t.axis[o]){case"e":case"w":case"n":case"s":c[i]=r;break;case"u":void 0!==n[i]&&(c.z=r);break;case"d":void 0!==n[i]&&(c.z=-r);break;default:return null}return c}function Cet(t){var e={x:t[0],y:t[1]};return t.length>2&&(e.z=t[2]),t.length>3&&(e.m=t[3]),e}function Pet(t){if("function"===typeof Number.isFinite){if(Number.isFinite(t))return;throw new TypeError("coordinates must be finite numbers")}if("number"!==typeof t||t!==t||!isFinite(t))throw new TypeError("coordinates must be finite numbers")}function ket(t,e,n){var r;if(Array.isArray(n)&&(n=Cet(n)),function(t){Pet(t.x),Pet(t.y)}(n),t.datum&&e.datum&&function(t,e){return(t.datum.datum_type===btt||t.datum.datum_type===xtt)&&"WGS84"!==e.datumCode||(e.datum.datum_type===btt||e.datum.datum_type===xtt)&&"WGS84"!==t.datumCode}(t,e)&&(n=ket(t,r=new xet("WGS84"),n),t=r),"enu"!==t.axis&&(n=Aet(t,!1,n)),"longlat"===t.projName)n={x:n.x*Ptt,y:n.y*Ptt,z:n.z||0};else if(t.to_meter&&(n={x:n.x*t.to_meter,y:n.y*t.to_meter,z:n.z||0}),!(n=t.inverse(n)))return;return t.from_greenwich&&(n.x+=t.from_greenwich),n=Met(t.datum,e.datum,n),e.from_greenwich&&(n={x:n.x-e.from_greenwich,y:n.y,z:n.z||0}),"longlat"===e.projName?n={x:n.x*ktt,y:n.y*ktt,z:n.z||0}:(n=e.forward(n),e.to_meter&&(n={x:n.x/e.to_meter,y:n.y/e.to_meter,z:n.z||0})),"enu"!==e.axis?Aet(e,!0,n):n}var Iet=xet("WGS84");function Oet(t,e,n){var r,i,o;return Array.isArray(n)?(r=ket(t,e,n)||{x:NaN,y:NaN},n.length>2?"undefined"!==typeof t.name&&"geocent"===t.name||"undefined"!==typeof e.name&&"geocent"===e.name?"number"===typeof r.z?[r.x,r.y,r.z].concat(n.splice(3)):[r.x,r.y,n[2]].concat(n.splice(3)):[r.x,r.y].concat(n.splice(2)):[r.x,r.y]):(i=ket(t,e,n),2===(o=Object.keys(n)).length||o.forEach((function(r){if("undefined"!==typeof t.name&&"geocent"===t.name||"undefined"!==typeof e.name&&"geocent"===e.name){if("x"===r||"y"===r||"z"===r)return}else if("x"===r||"y"===r)return;i[r]=n[r]})),i)}function Let(t){return t instanceof xet?t:t.oProj?t.oProj:xet(t)}const jet=function(t,e,n){t=Let(t);var r,i=!1;return"undefined"===typeof e?(e=t,t=Iet,i=!0):("undefined"!==typeof e.x||Array.isArray(e))&&(n=e,e=t,t=Iet,i=!0),e=Let(e),n?Oet(t,e,n):(r={forward:function(n){return Oet(t,e,n)},inverse:function(n){return Oet(e,t,n)}},i&&(r.oProj=e),r)};var zet=6,Ret="AJSAJS",Det="AFAFAF",Bet=65,Fet=73,Net=79,Uet=86,Vet=90;const Wet={forward:Get,inverse:function(t){var e=Xet($et(t.toUpperCase()));if(e.lat&&e.lon)return[e.lon,e.lat,e.lon,e.lat];return[e.left,e.bottom,e.right,e.top]},toPoint:qet};function Get(t,e){return e=e||5,function(t,e){var n="00000"+t.easting,r="00000"+t.northing;return t.zoneNumber+t.zoneLetter+function(t,e,n){var r=Ket(n),i=Math.floor(t/1e5),o=Math.floor(e/1e5)%20;return function(t,e,n){var r=n-1,i=Ret.charCodeAt(r),o=Det.charCodeAt(r),a=i+t-1,s=o+e,l=!1;a>Vet&&(a=a-Vet+Bet-1,l=!0);(a===Fet||i<Fet&&a>Fet||(a>Fet||i<Fet)&&l)&&a++;(a===Net||i<Net&&a>Net||(a>Net||i<Net)&&l)&&++a===Fet&&a++;a>Vet&&(a=a-Vet+Bet-1);s>Uet?(s=s-Uet+Bet-1,l=!0):l=!1;(s===Fet||o<Fet&&s>Fet||(s>Fet||o<Fet)&&l)&&s++;(s===Net||o<Net&&s>Net||(s>Net||o<Net)&&l)&&++s===Fet&&s++;s>Uet&&(s=s-Uet+Bet-1);return String.fromCharCode(a)+String.fromCharCode(s)}(i,o,r)}(t.easting,t.northing,t.zoneNumber)+n.substr(n.length-5,e)+r.substr(r.length-5,e)}(function(t){var e,n,r,i,o,a,s,l,c=t.lat,u=t.lon,h=6378137,d=.00669438,f=.9996,p=Het(c),m=Het(u);l=Math.floor((u+180)/6)+1,180===u&&(l=60);c>=56&&c<64&&u>=3&&u<12&&(l=32);c>=72&&c<84&&(u>=0&&u<9?l=31:u>=9&&u<21?l=33:u>=21&&u<33?l=35:u>=33&&u<42&&(l=37));s=Het(6*(l-1)-180+3),e=d/(1-d),n=h/Math.sqrt(1-d*Math.sin(p)*Math.sin(p)),r=Math.tan(p)*Math.tan(p),i=e*Math.cos(p)*Math.cos(p),o=Math.cos(p)*(m-s),a=h*((1-d/4-3*d*d/64-5*d*d*d/256)*p-(3*d/8+3*d*d/32+45*d*d*d/1024)*Math.sin(2*p)+(15*d*d/256+45*d*d*d/1024)*Math.sin(4*p)-35*d*d*d/3072*Math.sin(6*p));var g=f*n*(o+(1-r+i)*o*o*o/6+(5-18*r+r*r+72*i-58*e)*o*o*o*o*o/120)+5e5,y=f*(a+n*Math.tan(p)*(o*o/2+(5-r+9*i+4*i*i)*o*o*o*o/24+(61-58*r+r*r+600*i-330*e)*o*o*o*o*o*o/720));c<0&&(y+=1e7);return{northing:Math.round(y),easting:Math.round(g),zoneNumber:l,zoneLetter:Yet(c)}}({lat:t[1],lon:t[0]}),e)}function qet(t){var e=Xet($et(t.toUpperCase()));return e.lat&&e.lon?[e.lon,e.lat]:[(e.left+e.right)/2,(e.top+e.bottom)/2]}function Het(t){return t*(Math.PI/180)}function Zet(t){return t/Math.PI*180}function Xet(t){var e=t.northing,n=t.easting,r=t.zoneLetter,i=t.zoneNumber;if(i<0||i>60)return null;var o,a,s,l,c,u,h,d,f,p=.9996,m=6378137,g=.00669438,y=(1-Math.sqrt(.99330562))/(1+Math.sqrt(.99330562)),v=n-5e5,_=e;r<"N"&&(_-=1e7),h=6*(i-1)-180+3,o=.006739496752268451,f=(d=_/p/6367449.145945056)+(3*y/2-27*y*y*y/32)*Math.sin(2*d)+(21*y*y/16-55*y*y*y*y/32)*Math.sin(4*d)+151*y*y*y/96*Math.sin(6*d),a=m/Math.sqrt(1-g*Math.sin(f)*Math.sin(f)),s=Math.tan(f)*Math.tan(f),l=o*Math.cos(f)*Math.cos(f),c=.99330562*m/Math.pow(1-g*Math.sin(f)*Math.sin(f),1.5),u=v/(a*p);var b=f-a*Math.tan(f)/c*(u*u/2-(5+3*s+10*l-4*l*l-9*o)*u*u*u*u/24+(61+90*s+298*l+45*s*s-1.6983531815716497-3*l*l)*u*u*u*u*u*u/720);b=Zet(b);var x,w=(u-(1+2*s+l)*u*u*u/6+(5-2*l+28*s-3*l*l+8*o+24*s*s)*u*u*u*u*u/120)/Math.cos(f);if(w=h+Zet(w),t.accuracy){var S=Xet({northing:t.northing+t.accuracy,easting:t.easting+t.accuracy,zoneLetter:t.zoneLetter,zoneNumber:t.zoneNumber});x={top:S.lat,right:S.lon,bottom:b,left:w}}else x={lat:b,lon:w};return x}function Yet(t){var e="Z";return 84>=t&&t>=72?e="X":72>t&&t>=64?e="W":64>t&&t>=56?e="V":56>t&&t>=48?e="U":48>t&&t>=40?e="T":40>t&&t>=32?e="S":32>t&&t>=24?e="R":24>t&&t>=16?e="Q":16>t&&t>=8?e="P":8>t&&t>=0?e="N":0>t&&t>=-8?e="M":-8>t&&t>=-16?e="L":-16>t&&t>=-24?e="K":-24>t&&t>=-32?e="J":-32>t&&t>=-40?e="H":-40>t&&t>=-48?e="G":-48>t&&t>=-56?e="F":-56>t&&t>=-64?e="E":-64>t&&t>=-72?e="D":-72>t&&t>=-80&&(e="C"),e}function Ket(t){var e=t%zet;return 0===e&&(e=zet),e}function $et(t){if(t&&0===t.length)throw"MGRSPoint coverting from nothing";for(var e,n=t.length,r=null,i="",o=0;!/[A-Z]/.test(e=t.charAt(o));){if(o>=2)throw"MGRSPoint bad conversion from: "+t;i+=e,o++}var a=parseInt(i,10);if(0===o||o+3>n)throw"MGRSPoint bad conversion from: "+t;var s=t.charAt(o++);if(s<="A"||"B"===s||"Y"===s||s>="Z"||"I"===s||"O"===s)throw"MGRSPoint zone letter "+s+" not handled: "+t;r=t.substring(o,o+=2);for(var l=Ket(a),c=function(t,e){var n=Ret.charCodeAt(e-1),r=1e5,i=!1;for(;n!==t.charCodeAt(0);){if(++n===Fet&&n++,n===Net&&n++,n>Vet){if(i)throw"Bad character: "+t;n=Bet,i=!0}r+=1e5}return r}(r.charAt(0),l),u=function(t,e){if(t>"V")throw"MGRSPoint given invalid Northing "+t;var n=Det.charCodeAt(e-1),r=0,i=!1;for(;n!==t.charCodeAt(0);){if(++n===Fet&&n++,n===Net&&n++,n>Uet){if(i)throw"Bad character: "+t;n=Bet,i=!0}r+=1e5}return r}(r.charAt(1),l);u<Jet(s);)u+=2e6;var h=n-o;if(h%2!==0)throw"MGRSPoint has to have an even number \nof digits after the zone letter and two 100km letters - front \nhalf for easting meters, second half for \nnorthing meters"+t;var d,f,p,m=h/2,g=0,y=0;return m>0&&(d=1e5/Math.pow(10,m),f=t.substring(o,o+m),g=parseFloat(f)*d,p=t.substring(o+m),y=parseFloat(p)*d),{easting:g+c,northing:y+u,zoneLetter:s,zoneNumber:a,accuracy:d}}function Jet(t){var e;switch(t){case"C":e=11e5;break;case"D":e=2e6;break;case"E":e=28e5;break;case"F":e=37e5;break;case"G":e=46e5;break;case"H":e=55e5;break;case"J":e=64e5;break;case"K":e=73e5;break;case"L":e=82e5;break;case"M":e=91e5;break;case"N":e=0;break;case"P":e=8e5;break;case"Q":e=17e5;break;case"R":e=26e5;break;case"S":e=35e5;break;case"T":e=44e5;break;case"U":e=53e5;break;case"V":e=62e5;break;case"W":e=7e6;break;case"X":e=79e5;break;default:e=-1}if(e>=0)return e;throw"Invalid zone letter: "+t}function Qet(t,e,n){if(!(this instanceof Qet))return new Qet(t,e,n);if(Array.isArray(t))this.x=t[0],this.y=t[1],this.z=t[2]||0;else if("object"===typeof t)this.x=t.x,this.y=t.y,this.z=t.z||0;else if("string"===typeof t&&"undefined"===typeof e){var r=t.split(",");this.x=parseFloat(r[0],10),this.y=parseFloat(r[1],10),this.z=parseFloat(r[2],10)||0}else this.x=t,this.y=e,this.z=n||0;console.warn("proj4.Point will be removed in version 3, use proj4.toPoint")}Qet.fromMGRS=function(t){return new Qet(qet(t))},Qet.prototype.toMGRS=function(t){return Get([this.x,this.y],t)};const tnt=Qet;var ent=1,nnt=.25,rnt=.046875,int=.01953125,ont=.01068115234375,ant=.75,snt=.46875,lnt=.013020833333333334,cnt=.007120768229166667,unt=.3645833333333333,hnt=.005696614583333333,dnt=.3076171875;function fnt(t){var e=[];e[0]=ent-t*(nnt+t*(rnt+t*(int+t*ont))),e[1]=t*(ant-t*(rnt+t*(int+t*ont)));var n=t*t;return e[2]=n*(snt-t*(lnt+t*cnt)),n*=t,e[3]=n*(unt-t*hnt),e[4]=n*t*dnt,e}function pnt(t,e,n,r){return n*=e,e*=e,r[0]*t-n*(r[1]+e*(r[2]+e*(r[3]+e*r[4])))}var mnt=20;function gnt(t,e,n){for(var r=1/(1-e),i=t,o=mnt;o;--o){var a=Math.sin(i),s=1-e*a*a;if(i-=s=(pnt(i,a,Math.cos(i),n)-t)*(s*Math.sqrt(s))*r,Math.abs(s)<Ctt)return i}return i}const ynt={init:function(){this.x0=void 0!==this.x0?this.x0:0,this.y0=void 0!==this.y0?this.y0:0,this.long0=void 0!==this.long0?this.long0:0,this.lat0=void 0!==this.lat0?this.lat0:0,this.es&&(this.en=fnt(this.es),this.ml0=pnt(this.lat0,Math.sin(this.lat0),Math.cos(this.lat0),this.en))},forward:function(t){var e,n,r,i=t.x,o=t.y,a=aet(i-this.long0),s=Math.sin(o),l=Math.cos(o);if(this.es){var c=l*a,u=Math.pow(c,2),h=this.ep2*Math.pow(l,2),d=Math.pow(h,2),f=Math.abs(l)>Ctt?Math.tan(o):0,p=Math.pow(f,2),m=Math.pow(p,2);e=1-this.es*Math.pow(s,2),c/=Math.sqrt(e);var g=pnt(o,s,l,this.en);n=this.a*(this.k0*c*(1+u/6*(1-p+h+u/20*(5-18*p+m+14*h-58*p*h+u/42*(61+179*m-m*p-479*p)))))+this.x0,r=this.a*(this.k0*(g-this.ml0+s*a*c/2*(1+u/12*(5-p+9*h+4*d+u/30*(61+m-58*p+270*h-330*p*h+u/56*(1385+543*m-m*p-3111*p))))))+this.y0}else{var y=l*Math.sin(a);if(Math.abs(Math.abs(y)-1)<Ctt)return 93;if(n=.5*this.a*this.k0*Math.log((1+y)/(1-y))+this.x0,r=l*Math.cos(a)/Math.sqrt(1-Math.pow(y,2)),(y=Math.abs(r))>=1){if(y-1>Ctt)return 93;r=0}else r=Math.acos(r);o<0&&(r=-r),r=this.a*this.k0*(r-this.lat0)+this.y0}return t.x=n,t.y=r,t},inverse:function(t){var e,n,r,i,o=(t.x-this.x0)*(1/this.a),a=(t.y-this.y0)*(1/this.a);if(this.es)if(n=gnt(e=this.ml0+a/this.k0,this.es,this.en),Math.abs(n)<Ett){var s=Math.sin(n),l=Math.cos(n),c=Math.abs(l)>Ctt?Math.tan(n):0,u=this.ep2*Math.pow(l,2),h=Math.pow(u,2),d=Math.pow(c,2),f=Math.pow(d,2);e=1-this.es*Math.pow(s,2);var p=o*Math.sqrt(e)/this.k0,m=Math.pow(p,2);r=n-(e*=c)*m/(1-this.es)*.5*(1-m/12*(5+3*d-9*u*d+u-4*h-m/30*(61+90*d-252*u*d+45*f+46*u-m/56*(1385+3633*d+4095*f+1574*f*d)))),i=aet(this.long0+p*(1-m/6*(1+2*d+u-m/20*(5+28*d+24*f+8*u*d+6*u-m/42*(61+662*d+1320*f+720*f*d))))/l)}else r=Ett*oet(a),i=0;else{var g=Math.exp(o/this.k0),y=.5*(g-1/g),v=this.lat0+a/this.k0,_=Math.cos(v);e=Math.sqrt((1-Math.pow(_,2))/(1+Math.pow(y,2))),r=Math.asin(e),a<0&&(r=-r),i=0===y&&0===_?0:aet(Math.atan2(y,_)+this.long0)}return t.x=i,t.y=r,t},names:["Transverse_Mercator","Transverse Mercator","tmerc"]};function vnt(t){var e=Math.exp(t);return e=(e-1/e)/2}function _nt(t,e){t=Math.abs(t),e=Math.abs(e);var n=Math.max(t,e),r=Math.min(t,e)/(n||1);return n*Math.sqrt(1+Math.pow(r,2))}function bnt(t){var e=Math.abs(t);return e=function(t){var e=1+t,n=e-1;return 0===n?t:t*Math.log(e)/n}(e*(1+e/(_nt(1,e)+1))),t<0?-e:e}function xnt(t,e){for(var n,r=2*Math.cos(2*e),i=t.length-1,o=t[i],a=0;--i>=0;)n=r*o-a+t[i],a=o,o=n;return e+n*Math.sin(2*e)}function wnt(t,e,n){for(var r,i,o=Math.sin(e),a=Math.cos(e),s=vnt(n),l=function(t){var e=Math.exp(t);return(e+1/e)/2}(n),c=2*a*l,u=-2*o*s,h=t.length-1,d=t[h],f=0,p=0,m=0;--h>=0;)r=p,i=f,d=c*(p=d)-r-u*(f=m)+t[h],m=u*p-i+c*f;return[(c=o*l)*d-(u=a*s)*m,c*m+u*d]}const Snt={init:function(){if(void 0===this.es||this.es<=0)throw new Error("incorrect elliptical usage");this.x0=void 0!==this.x0?this.x0:0,this.y0=void 0!==this.y0?this.y0:0,this.long0=void 0!==this.long0?this.long0:0,this.lat0=void 0!==this.lat0?this.lat0:0,this.cgb=[],this.cbg=[],this.utg=[],this.gtu=[];var t=this.es/(1+Math.sqrt(1-this.es)),e=t/(2-t),n=e;this.cgb[0]=e*(2+e*(-2/3+e*(e*(116/45+e*(26/45+e*(-2854/675)))-2))),this.cbg[0]=e*(e*(2/3+e*(4/3+e*(-82/45+e*(32/45+e*(4642/4725)))))-2),n*=e,this.cgb[1]=n*(7/3+e*(e*(-227/45+e*(2704/315+e*(2323/945)))-1.6)),this.cbg[1]=n*(5/3+e*(-16/15+e*(-13/9+e*(904/315+e*(-1522/945))))),n*=e,this.cgb[2]=n*(56/15+e*(-136/35+e*(-1262/105+e*(73814/2835)))),this.cbg[2]=n*(-26/15+e*(34/21+e*(1.6+e*(-12686/2835)))),n*=e,this.cgb[3]=n*(4279/630+e*(-332/35+e*(-399572/14175))),this.cbg[3]=n*(1237/630+e*(e*(-24832/14175)-2.4)),n*=e,this.cgb[4]=n*(4174/315+e*(-144838/6237)),this.cbg[4]=n*(-734/315+e*(109598/31185)),n*=e,this.cgb[5]=n*(601676/22275),this.cbg[5]=n*(444337/155925),n=Math.pow(e,2),this.Qn=this.k0/(1+e)*(1+n*(1/4+n*(1/64+n/256))),this.utg[0]=e*(e*(2/3+e*(-37/96+e*(1/360+e*(81/512+e*(-96199/604800)))))-.5),this.gtu[0]=e*(.5+e*(-2/3+e*(5/16+e*(41/180+e*(-127/288+e*(7891/37800)))))),this.utg[1]=n*(-1/48+e*(-1/15+e*(437/1440+e*(-46/105+e*(1118711/3870720))))),this.gtu[1]=n*(13/48+e*(e*(557/1440+e*(281/630+e*(-1983433/1935360)))-.6)),n*=e,this.utg[2]=n*(-17/480+e*(37/840+e*(209/4480+e*(-5569/90720)))),this.gtu[2]=n*(61/240+e*(-103/140+e*(15061/26880+e*(167603/181440)))),n*=e,this.utg[3]=n*(-4397/161280+e*(11/504+e*(830251/7257600))),this.gtu[3]=n*(49561/161280+e*(-179/168+e*(6601661/7257600))),n*=e,this.utg[4]=n*(-4583/161280+e*(108847/3991680)),this.gtu[4]=n*(34729/80640+e*(-3418889/1995840)),n*=e,this.utg[5]=n*(-20648693/638668800),this.gtu[5]=.6650675310896665*n;var r=xnt(this.cbg,this.lat0);this.Zb=-this.Qn*(r+function(t,e){for(var n,r=2*Math.cos(e),i=t.length-1,o=t[i],a=0;--i>=0;)n=r*o-a+t[i],a=o,o=n;return Math.sin(e)*n}(this.gtu,2*r))},forward:function(t){var e=aet(t.x-this.long0),n=t.y;n=xnt(this.cbg,n);var r=Math.sin(n),i=Math.cos(n),o=Math.sin(e),a=Math.cos(e);n=Math.atan2(r,a*i),e=Math.atan2(o*i,_nt(r,i*a)),e=bnt(Math.tan(e));var s,l,c=wnt(this.gtu,2*n,2*e);return n+=c[0],e+=c[1],Math.abs(e)<=2.623395162778?(s=this.a*(this.Qn*e)+this.x0,l=this.a*(this.Qn*n+this.Zb)+this.y0):(s=1/0,l=1/0),t.x=s,t.y=l,t},inverse:function(t){var e,n,r=(t.x-this.x0)*(1/this.a),i=(t.y-this.y0)*(1/this.a);if(i=(i-this.Zb)/this.Qn,r/=this.Qn,Math.abs(r)<=2.623395162778){var o=wnt(this.utg,2*i,2*r);i+=o[0],r+=o[1],r=Math.atan(vnt(r));var a=Math.sin(i),s=Math.cos(i),l=Math.sin(r),c=Math.cos(r);i=Math.atan2(a*c,_nt(l,c*s)),e=aet((r=Math.atan2(l,c*s))+this.long0),n=xnt(this.cgb,i)}else e=1/0,n=1/0;return t.x=e,t.y=n,t},names:["Extended_Transverse_Mercator","Extended Transverse Mercator","etmerc"]};const Ent={init:function(){var t=function(t,e){if(void 0===t){if((t=Math.floor(30*(aet(e)+Math.PI)/Math.PI)+1)<0)return 0;if(t>60)return 60}return t}(this.zone,this.long0);if(void 0===t)throw new Error("unknown utm zone");this.lat0=0,this.long0=(6*Math.abs(t)-183)*Ptt,this.x0=5e5,this.y0=this.utmSouth?1e7:0,this.k0=.9996,Snt.init.apply(this),this.forward=Snt.forward,this.inverse=Snt.inverse},names:["Universal Transverse Mercator System","utm"],dependsOn:"etmerc"};function Tnt(t,e){return Math.pow((1-t)/(1+t),e)}const Mnt={init:function(){var t=Math.sin(this.lat0),e=Math.cos(this.lat0);e*=e,this.rc=Math.sqrt(1-this.es)/(1-this.es*t*t),this.C=Math.sqrt(1+this.es*e*e/(1-this.es)),this.phic0=Math.asin(t/this.C),this.ratexp=.5*this.C*this.e,this.K=Math.tan(.5*this.phic0+Itt)/(Math.pow(Math.tan(.5*this.lat0+Itt),this.C)*Tnt(this.e*t,this.ratexp))},forward:function(t){var e=t.x,n=t.y;return t.y=2*Math.atan(this.K*Math.pow(Math.tan(.5*n+Itt),this.C)*Tnt(this.e*Math.sin(n),this.ratexp))-Ett,t.x=this.C*e,t},inverse:function(t){for(var e=t.x/this.C,n=t.y,r=Math.pow(Math.tan(.5*n+Itt)/this.K,1/this.C),i=20;i>0&&(n=2*Math.atan(r*Tnt(this.e*Math.sin(t.y),-.5*this.e))-Ett,!(Math.abs(n-t.y)<1e-14));--i)t.y=n;return i?(t.x=e,t.y=n,t):null},names:["gauss"]};const Ant={init:function(){Mnt.init.apply(this),this.rc&&(this.sinc0=Math.sin(this.phic0),this.cosc0=Math.cos(this.phic0),this.R2=2*this.rc,this.title||(this.title="Oblique Stereographic Alternative"))},forward:function(t){var e,n,r,i;return t.x=aet(t.x-this.long0),Mnt.forward.apply(this,[t]),e=Math.sin(t.y),n=Math.cos(t.y),r=Math.cos(t.x),i=this.k0*this.R2/(1+this.sinc0*e+this.cosc0*n*r),t.x=i*n*Math.sin(t.x),t.y=i*(this.cosc0*e-this.sinc0*n*r),t.x=this.a*t.x+this.x0,t.y=this.a*t.y+this.y0,t},inverse:function(t){var e,n,r,i,o;if(t.x=(t.x-this.x0)/this.a,t.y=(t.y-this.y0)/this.a,t.x/=this.k0,t.y/=this.k0,o=Math.sqrt(t.x*t.x+t.y*t.y)){var a=2*Math.atan2(o,this.R2);e=Math.sin(a),n=Math.cos(a),i=Math.asin(n*this.sinc0+t.y*e*this.cosc0/o),r=Math.atan2(t.x*e,o*this.cosc0*n-t.y*this.sinc0*e)}else i=this.phic0,r=0;return t.x=r,t.y=i,Mnt.inverse.apply(this,[t]),t.x=aet(t.x+this.long0),t},names:["Stereographic_North_Pole","Oblique_Stereographic","Polar_Stereographic","sterea","Oblique Stereographic Alternative","Double_Stereographic"]};const Cnt={init:function(){this.coslat0=Math.cos(this.lat0),this.sinlat0=Math.sin(this.lat0),this.sphere?1===this.k0&&!isNaN(this.lat_ts)&&Math.abs(this.coslat0)<=Ctt&&(this.k0=.5*(1+oet(this.lat0)*Math.sin(this.lat_ts))):(Math.abs(this.coslat0)<=Ctt&&(this.lat0>0?this.con=1:this.con=-1),this.cons=Math.sqrt(Math.pow(1+this.e,1+this.e)*Math.pow(1-this.e,1-this.e)),1===this.k0&&!isNaN(this.lat_ts)&&Math.abs(this.coslat0)<=Ctt&&(this.k0=.5*this.cons*iet(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts))/set(this.e,this.con*this.lat_ts,this.con*Math.sin(this.lat_ts))),this.ms1=iet(this.e,this.sinlat0,this.coslat0),this.X0=2*Math.atan(this.ssfn_(this.lat0,this.sinlat0,this.e))-Ett,this.cosX0=Math.cos(this.X0),this.sinX0=Math.sin(this.X0))},forward:function(t){var e,n,r,i,o,a,s=t.x,l=t.y,c=Math.sin(l),u=Math.cos(l),h=aet(s-this.long0);return Math.abs(Math.abs(s-this.long0)-Math.PI)<=Ctt&&Math.abs(l+this.lat0)<=Ctt?(t.x=NaN,t.y=NaN,t):this.sphere?(e=2*this.k0/(1+this.sinlat0*c+this.coslat0*u*Math.cos(h)),t.x=this.a*e*u*Math.sin(h)+this.x0,t.y=this.a*e*(this.coslat0*c-this.sinlat0*u*Math.cos(h))+this.y0,t):(n=2*Math.atan(this.ssfn_(l,c,this.e))-Ett,i=Math.cos(n),r=Math.sin(n),Math.abs(this.coslat0)<=Ctt?(o=set(this.e,l*this.con,this.con*c),a=2*this.a*this.k0*o/this.cons,t.x=this.x0+a*Math.sin(s-this.long0),t.y=this.y0-this.con*a*Math.cos(s-this.long0),t):(Math.abs(this.sinlat0)<Ctt?(e=2*this.a*this.k0/(1+i*Math.cos(h)),t.y=e*r):(e=2*this.a*this.k0*this.ms1/(this.cosX0*(1+this.sinX0*r+this.cosX0*i*Math.cos(h))),t.y=e*(this.cosX0*r-this.sinX0*i*Math.cos(h))+this.y0),t.x=e*i*Math.sin(h)+this.x0,t))},inverse:function(t){var e,n,r,i,o;t.x-=this.x0,t.y-=this.y0;var a=Math.sqrt(t.x*t.x+t.y*t.y);if(this.sphere){var s=2*Math.atan(a/(2*this.a*this.k0));return e=this.long0,n=this.lat0,a<=Ctt?(t.x=e,t.y=n,t):(n=Math.asin(Math.cos(s)*this.sinlat0+t.y*Math.sin(s)*this.coslat0/a),e=Math.abs(this.coslat0)<Ctt?this.lat0>0?aet(this.long0+Math.atan2(t.x,-1*t.y)):aet(this.long0+Math.atan2(t.x,t.y)):aet(this.long0+Math.atan2(t.x*Math.sin(s),a*this.coslat0*Math.cos(s)-t.y*this.sinlat0*Math.sin(s))),t.x=e,t.y=n,t)}if(Math.abs(this.coslat0)<=Ctt){if(a<=Ctt)return n=this.lat0,e=this.long0,t.x=e,t.y=n,t;t.x*=this.con,t.y*=this.con,r=a*this.cons/(2*this.a*this.k0),n=this.con*cet(this.e,r),e=this.con*aet(this.con*this.long0+Math.atan2(t.x,-1*t.y))}else i=2*Math.atan(a*this.cosX0/(2*this.a*this.k0*this.ms1)),e=this.long0,a<=Ctt?o=this.X0:(o=Math.asin(Math.cos(i)*this.sinX0+t.y*Math.sin(i)*this.cosX0/a),e=aet(this.long0+Math.atan2(t.x*Math.sin(i),a*this.cosX0*Math.cos(i)-t.y*this.sinX0*Math.sin(i)))),n=-1*cet(this.e,Math.tan(.5*(Ett+o)));return t.x=e,t.y=n,t},names:["stere","Stereographic_South_Pole","Polar Stereographic (variant B)"],ssfn_:function(t,e,n){return e*=n,Math.tan(.5*(Ett+t))*Math.pow((1-e)/(1+e),.5*n)}};const Pnt={init:function(){var t=this.lat0;this.lambda0=this.long0;var e=Math.sin(t),n=this.a,r=1/this.rf,i=2*r-Math.pow(r,2),o=this.e=Math.sqrt(i);this.R=this.k0*n*Math.sqrt(1-i)/(1-i*Math.pow(e,2)),this.alpha=Math.sqrt(1+i/(1-i)*Math.pow(Math.cos(t),4)),this.b0=Math.asin(e/this.alpha);var a=Math.log(Math.tan(Math.PI/4+this.b0/2)),s=Math.log(Math.tan(Math.PI/4+t/2)),l=Math.log((1+o*e)/(1-o*e));this.K=a-this.alpha*s+this.alpha*o/2*l},forward:function(t){var e=Math.log(Math.tan(Math.PI/4-t.y/2)),n=this.e/2*Math.log((1+this.e*Math.sin(t.y))/(1-this.e*Math.sin(t.y))),r=-this.alpha*(e+n)+this.K,i=2*(Math.atan(Math.exp(r))-Math.PI/4),o=this.alpha*(t.x-this.lambda0),a=Math.atan(Math.sin(o)/(Math.sin(this.b0)*Math.tan(i)+Math.cos(this.b0)*Math.cos(o))),s=Math.asin(Math.cos(this.b0)*Math.sin(i)-Math.sin(this.b0)*Math.cos(i)*Math.cos(o));return t.y=this.R/2*Math.log((1+Math.sin(s))/(1-Math.sin(s)))+this.y0,t.x=this.R*a+this.x0,t},inverse:function(t){for(var e=t.x-this.x0,n=t.y-this.y0,r=e/this.R,i=2*(Math.atan(Math.exp(n/this.R))-Math.PI/4),o=Math.asin(Math.cos(this.b0)*Math.sin(i)+Math.sin(this.b0)*Math.cos(i)*Math.cos(r)),a=Math.atan(Math.sin(r)/(Math.cos(this.b0)*Math.cos(r)-Math.sin(this.b0)*Math.tan(i))),s=this.lambda0+a/this.alpha,l=0,c=o,u=-1e3,h=0;Math.abs(c-u)>1e-7;){if(++h>20)return;l=1/this.alpha*(Math.log(Math.tan(Math.PI/4+o/2))-this.K)+this.e*Math.log(Math.tan(Math.PI/4+Math.asin(this.e*Math.sin(c))/2)),u=c,c=2*Math.atan(Math.exp(l))-Math.PI/2}return t.x=s,t.y=c,t},names:["somerc"]};const knt={init:function(){this.no_off=this.no_off||!1,this.no_rot=this.no_rot||!1,isNaN(this.k0)&&(this.k0=1);var t=Math.sin(this.lat0),e=Math.cos(this.lat0),n=this.e*t;this.bl=Math.sqrt(1+this.es/(1-this.es)*Math.pow(e,4)),this.al=this.a*this.bl*this.k0*Math.sqrt(1-this.es)/(1-n*n);var r,i,o=set(this.e,this.lat0,t),a=this.bl/e*Math.sqrt((1-this.es)/(1-n*n));if(a*a<1&&(a=1),isNaN(this.longc)){var s=set(this.e,this.lat1,Math.sin(this.lat1)),l=set(this.e,this.lat2,Math.sin(this.lat2));this.lat0>=0?this.el=(a+Math.sqrt(a*a-1))*Math.pow(o,this.bl):this.el=(a-Math.sqrt(a*a-1))*Math.pow(o,this.bl);var c=Math.pow(s,this.bl),u=Math.pow(l,this.bl);i=.5*((r=this.el/c)-1/r);var h=(this.el*this.el-u*c)/(this.el*this.el+u*c),d=(u-c)/(u+c),f=aet(this.long1-this.long2);this.long0=.5*(this.long1+this.long2)-Math.atan(h*Math.tan(.5*this.bl*f)/d)/this.bl,this.long0=aet(this.long0);var p=aet(this.long1-this.long0);this.gamma0=Math.atan(Math.sin(this.bl*p)/i),this.alpha=Math.asin(a*Math.sin(this.gamma0))}else r=this.lat0>=0?a+Math.sqrt(a*a-1):a-Math.sqrt(a*a-1),this.el=r*Math.pow(o,this.bl),i=.5*(r-1/r),this.gamma0=Math.asin(Math.sin(this.alpha)/a),this.long0=this.longc-Math.asin(i*Math.tan(this.gamma0))/this.bl;this.no_off?this.uc=0:this.lat0>=0?this.uc=this.al/this.bl*Math.atan2(Math.sqrt(a*a-1),Math.cos(this.alpha)):this.uc=-1*this.al/this.bl*Math.atan2(Math.sqrt(a*a-1),Math.cos(this.alpha))},forward:function(t){var e,n,r,i=t.x,o=t.y,a=aet(i-this.long0);if(Math.abs(Math.abs(o)-Ett)<=Ctt)r=o>0?-1:1,n=this.al/this.bl*Math.log(Math.tan(Itt+r*this.gamma0*.5)),e=-1*r*Ett*this.al/this.bl;else{var s=set(this.e,o,Math.sin(o)),l=this.el/Math.pow(s,this.bl),c=.5*(l-1/l),u=.5*(l+1/l),h=Math.sin(this.bl*a),d=(c*Math.sin(this.gamma0)-h*Math.cos(this.gamma0))/u;n=Math.abs(Math.abs(d)-1)<=Ctt?Number.POSITIVE_INFINITY:.5*this.al*Math.log((1-d)/(1+d))/this.bl,e=Math.abs(Math.cos(this.bl*a))<=Ctt?this.al*this.bl*a:this.al*Math.atan2(c*Math.cos(this.gamma0)+h*Math.sin(this.gamma0),Math.cos(this.bl*a))/this.bl}return this.no_rot?(t.x=this.x0+e,t.y=this.y0+n):(e-=this.uc,t.x=this.x0+n*Math.cos(this.alpha)+e*Math.sin(this.alpha),t.y=this.y0+e*Math.cos(this.alpha)-n*Math.sin(this.alpha)),t},inverse:function(t){var e,n;this.no_rot?(n=t.y-this.y0,e=t.x-this.x0):(n=(t.x-this.x0)*Math.cos(this.alpha)-(t.y-this.y0)*Math.sin(this.alpha),e=(t.y-this.y0)*Math.cos(this.alpha)+(t.x-this.x0)*Math.sin(this.alpha),e+=this.uc);var r=Math.exp(-1*this.bl*n/this.al),i=.5*(r-1/r),o=.5*(r+1/r),a=Math.sin(this.bl*e/this.al),s=(a*Math.cos(this.gamma0)+i*Math.sin(this.gamma0))/o,l=Math.pow(this.el/Math.sqrt((1+s)/(1-s)),1/this.bl);return Math.abs(s-1)<Ctt?(t.x=this.long0,t.y=Ett):Math.abs(s+1)<Ctt?(t.x=this.long0,t.y=-1*Ett):(t.y=cet(this.e,l),t.x=aet(this.long0-Math.atan2(i*Math.cos(this.gamma0)-a*Math.sin(this.gamma0),Math.cos(this.bl*e/this.al))/this.bl)),t},names:["Hotine_Oblique_Mercator","Hotine Oblique Mercator","Hotine_Oblique_Mercator_Azimuth_Natural_Origin","Hotine_Oblique_Mercator_Azimuth_Center","omerc"]};const Int={init:function(){if(this.lat2||(this.lat2=this.lat1),this.k0||(this.k0=1),this.x0=this.x0||0,this.y0=this.y0||0,!(Math.abs(this.lat1+this.lat2)<Ctt)){var t=this.b/this.a;this.e=Math.sqrt(1-t*t);var e=Math.sin(this.lat1),n=Math.cos(this.lat1),r=iet(this.e,e,n),i=set(this.e,this.lat1,e),o=Math.sin(this.lat2),a=Math.cos(this.lat2),s=iet(this.e,o,a),l=set(this.e,this.lat2,o),c=set(this.e,this.lat0,Math.sin(this.lat0));Math.abs(this.lat1-this.lat2)>Ctt?this.ns=Math.log(r/s)/Math.log(i/l):this.ns=e,isNaN(this.ns)&&(this.ns=e),this.f0=r/(this.ns*Math.pow(i,this.ns)),this.rh=this.a*this.f0*Math.pow(c,this.ns),this.title||(this.title="Lambert Conformal Conic")}},forward:function(t){var e=t.x,n=t.y;Math.abs(2*Math.abs(n)-Math.PI)<=Ctt&&(n=oet(n)*(Ett-2*Ctt));var r,i,o=Math.abs(Math.abs(n)-Ett);if(o>Ctt)r=set(this.e,n,Math.sin(n)),i=this.a*this.f0*Math.pow(r,this.ns);else{if((o=n*this.ns)<=0)return null;i=0}var a=this.ns*aet(e-this.long0);return t.x=this.k0*(i*Math.sin(a))+this.x0,t.y=this.k0*(this.rh-i*Math.cos(a))+this.y0,t},inverse:function(t){var e,n,r,i,o,a=(t.x-this.x0)/this.k0,s=this.rh-(t.y-this.y0)/this.k0;this.ns>0?(e=Math.sqrt(a*a+s*s),n=1):(e=-Math.sqrt(a*a+s*s),n=-1);var l=0;if(0!==e&&(l=Math.atan2(n*a,n*s)),0!==e||this.ns>0){if(n=1/this.ns,r=Math.pow(e/(this.a*this.f0),n),-9999===(i=cet(this.e,r)))return null}else i=-Ett;return o=aet(l/this.ns+this.long0),t.x=o,t.y=i,t},names:["Lambert Tangential Conformal Conic Projection","Lambert_Conformal_Conic","Lambert_Conformal_Conic_2SP","lcc"]};const Ont={init:function(){this.a=6377397.155,this.es=.006674372230614,this.e=Math.sqrt(this.es),this.lat0||(this.lat0=.863937979737193),this.long0||(this.long0=.4334234309119251),this.k0||(this.k0=.9999),this.s45=.785398163397448,this.s90=2*this.s45,this.fi0=this.lat0,this.e2=this.es,this.e=Math.sqrt(this.e2),this.alfa=Math.sqrt(1+this.e2*Math.pow(Math.cos(this.fi0),4)/(1-this.e2)),this.uq=1.04216856380474,this.u0=Math.asin(Math.sin(this.fi0)/this.alfa),this.g=Math.pow((1+this.e*Math.sin(this.fi0))/(1-this.e*Math.sin(this.fi0)),this.alfa*this.e/2),this.k=Math.tan(this.u0/2+this.s45)/Math.pow(Math.tan(this.fi0/2+this.s45),this.alfa)*this.g,this.k1=this.k0,this.n0=this.a*Math.sqrt(1-this.e2)/(1-this.e2*Math.pow(Math.sin(this.fi0),2)),this.s0=1.37008346281555,this.n=Math.sin(this.s0),this.ro0=this.k1*this.n0/Math.tan(this.s0),this.ad=this.s90-this.uq},forward:function(t){var e,n,r,i,o,a,s,l=t.x,c=t.y,u=aet(l-this.long0);return e=Math.pow((1+this.e*Math.sin(c))/(1-this.e*Math.sin(c)),this.alfa*this.e/2),n=2*(Math.atan(this.k*Math.pow(Math.tan(c/2+this.s45),this.alfa)/e)-this.s45),r=-u*this.alfa,i=Math.asin(Math.cos(this.ad)*Math.sin(n)+Math.sin(this.ad)*Math.cos(n)*Math.cos(r)),o=Math.asin(Math.cos(n)*Math.sin(r)/Math.cos(i)),a=this.n*o,s=this.ro0*Math.pow(Math.tan(this.s0/2+this.s45),this.n)/Math.pow(Math.tan(i/2+this.s45),this.n),t.y=s*Math.cos(a)/1,t.x=s*Math.sin(a)/1,this.czech||(t.y*=-1,t.x*=-1),t},inverse:function(t){var e,n,r,i,o,a,s,l=t.x;t.x=t.y,t.y=l,this.czech||(t.y*=-1,t.x*=-1),o=Math.sqrt(t.x*t.x+t.y*t.y),i=Math.atan2(t.y,t.x)/Math.sin(this.s0),r=2*(Math.atan(Math.pow(this.ro0/o,1/this.n)*Math.tan(this.s0/2+this.s45))-this.s45),e=Math.asin(Math.cos(this.ad)*Math.sin(r)-Math.sin(this.ad)*Math.cos(r)*Math.cos(i)),n=Math.asin(Math.cos(r)*Math.sin(i)/Math.cos(e)),t.x=this.long0-n/this.alfa,a=e,s=0;var c=0;do{t.y=2*(Math.atan(Math.pow(this.k,-1/this.alfa)*Math.pow(Math.tan(e/2+this.s45),1/this.alfa)*Math.pow((1+this.e*Math.sin(a))/(1-this.e*Math.sin(a)),this.e/2))-this.s45),Math.abs(a-t.y)<1e-10&&(s=1),a=t.y,c+=1}while(0===s&&c<15);return c>=15?null:t},names:["Krovak","krovak"]};function Lnt(t,e,n,r,i){return t*i-e*Math.sin(2*i)+n*Math.sin(4*i)-r*Math.sin(6*i)}function jnt(t){return 1-.25*t*(1+t/16*(3+1.25*t))}function znt(t){return.375*t*(1+.25*t*(1+.46875*t))}function Rnt(t){return.05859375*t*t*(1+.75*t)}function Dnt(t){return t*t*t*(35/3072)}function Bnt(t,e,n){var r=e*n;return t/Math.sqrt(1-r*r)}function Fnt(t){return Math.abs(t)<Ett?t:t-oet(t)*Math.PI}function Nnt(t,e,n,r,i){var o,a;o=t/e;for(var s=0;s<15;s++)if(o+=a=(t-(e*o-n*Math.sin(2*o)+r*Math.sin(4*o)-i*Math.sin(6*o)))/(e-2*n*Math.cos(2*o)+4*r*Math.cos(4*o)-6*i*Math.cos(6*o)),Math.abs(a)<=1e-10)return o;return NaN}const Unt={init:function(){this.sphere||(this.e0=jnt(this.es),this.e1=znt(this.es),this.e2=Rnt(this.es),this.e3=Dnt(this.es),this.ml0=this.a*Lnt(this.e0,this.e1,this.e2,this.e3,this.lat0))},forward:function(t){var e,n,r=t.x,i=t.y;if(r=aet(r-this.long0),this.sphere)e=this.a*Math.asin(Math.cos(i)*Math.sin(r)),n=this.a*(Math.atan2(Math.tan(i),Math.cos(r))-this.lat0);else{var o=Math.sin(i),a=Math.cos(i),s=Bnt(this.a,this.e,o),l=Math.tan(i)*Math.tan(i),c=r*Math.cos(i),u=c*c,h=this.es*a*a/(1-this.es);e=s*c*(1-u*l*(1/6-(8-l+8*h)*u/120)),n=this.a*Lnt(this.e0,this.e1,this.e2,this.e3,i)-this.ml0+s*o/a*u*(.5+(5-l+6*h)*u/24)}return t.x=e+this.x0,t.y=n+this.y0,t},inverse:function(t){t.x-=this.x0,t.y-=this.y0;var e,n,r=t.x/this.a,i=t.y/this.a;if(this.sphere){var o=i+this.lat0;e=Math.asin(Math.sin(o)*Math.cos(r)),n=Math.atan2(Math.tan(r),Math.cos(o))}else{var a=Nnt(this.ml0/this.a+i,this.e0,this.e1,this.e2,this.e3);if(Math.abs(Math.abs(a)-Ett)<=Ctt)return t.x=this.long0,t.y=Ett,i<0&&(t.y*=-1),t;var s=Bnt(this.a,this.e,Math.sin(a)),l=s*s*s/this.a/this.a*(1-this.es),c=Math.pow(Math.tan(a),2),u=r*this.a/s,h=u*u;e=a-s*Math.tan(a)/l*u*u*(.5-(1+3*c)*u*u/24),n=u*(1-h*(c/3+(1+3*c)*c*h/15))/Math.cos(a)}return t.x=aet(n+this.long0),t.y=Fnt(e),t},names:["Cassini","Cassini_Soldner","cass"]};function Vnt(t,e){var n;return t>1e-7?(1-t*t)*(e/(1-(n=t*e)*n)-.5/t*Math.log((1-n)/(1+n))):2*e}var Wnt=.3333333333333333,Gnt=.17222222222222222,qnt=.10257936507936508,Hnt=.06388888888888888,Znt=.0664021164021164,Xnt=.016415012942191543;const Ynt={init:function(){var t,e=Math.abs(this.lat0);if(Math.abs(e-Ett)<Ctt?this.mode=this.lat0<0?this.S_POLE:this.N_POLE:Math.abs(e)<Ctt?this.mode=this.EQUIT:this.mode=this.OBLIQ,this.es>0)switch(this.qp=Vnt(this.e,1),this.mmf=.5/(1-this.es),this.apa=function(t){var e,n=[];return n[0]=t*Wnt,e=t*t,n[0]+=e*Gnt,n[1]=e*Hnt,e*=t,n[0]+=e*qnt,n[1]+=e*Znt,n[2]=e*Xnt,n}(this.es),this.mode){case this.N_POLE:case this.S_POLE:this.dd=1;break;case this.EQUIT:this.rq=Math.sqrt(.5*this.qp),this.dd=1/this.rq,this.xmf=1,this.ymf=.5*this.qp;break;case this.OBLIQ:this.rq=Math.sqrt(.5*this.qp),t=Math.sin(this.lat0),this.sinb1=Vnt(this.e,t)/this.qp,this.cosb1=Math.sqrt(1-this.sinb1*this.sinb1),this.dd=Math.cos(this.lat0)/(Math.sqrt(1-this.es*t*t)*this.rq*this.cosb1),this.ymf=(this.xmf=this.rq)/this.dd,this.xmf*=this.dd}else this.mode===this.OBLIQ&&(this.sinph0=Math.sin(this.lat0),this.cosph0=Math.cos(this.lat0))},forward:function(t){var e,n,r,i,o,a,s,l,c,u,h=t.x,d=t.y;if(h=aet(h-this.long0),this.sphere){if(o=Math.sin(d),u=Math.cos(d),r=Math.cos(h),this.mode===this.OBLIQ||this.mode===this.EQUIT){if((n=this.mode===this.EQUIT?1+u*r:1+this.sinph0*o+this.cosph0*u*r)<=Ctt)return null;e=(n=Math.sqrt(2/n))*u*Math.sin(h),n*=this.mode===this.EQUIT?o:this.cosph0*o-this.sinph0*u*r}else if(this.mode===this.N_POLE||this.mode===this.S_POLE){if(this.mode===this.N_POLE&&(r=-r),Math.abs(d+this.lat0)<Ctt)return null;n=Itt-.5*d,e=(n=2*(this.mode===this.S_POLE?Math.cos(n):Math.sin(n)))*Math.sin(h),n*=r}}else{switch(s=0,l=0,c=0,r=Math.cos(h),i=Math.sin(h),o=Math.sin(d),a=Vnt(this.e,o),this.mode!==this.OBLIQ&&this.mode!==this.EQUIT||(s=a/this.qp,l=Math.sqrt(1-s*s)),this.mode){case this.OBLIQ:c=1+this.sinb1*s+this.cosb1*l*r;break;case this.EQUIT:c=1+l*r;break;case this.N_POLE:c=Ett+d,a=this.qp-a;break;case this.S_POLE:c=d-Ett,a=this.qp+a}if(Math.abs(c)<Ctt)return null;switch(this.mode){case this.OBLIQ:case this.EQUIT:c=Math.sqrt(2/c),n=this.mode===this.OBLIQ?this.ymf*c*(this.cosb1*s-this.sinb1*l*r):(c=Math.sqrt(2/(1+l*r)))*s*this.ymf,e=this.xmf*c*l*i;break;case this.N_POLE:case this.S_POLE:a>=0?(e=(c=Math.sqrt(a))*i,n=r*(this.mode===this.S_POLE?c:-c)):e=n=0}}return t.x=this.a*e+this.x0,t.y=this.a*n+this.y0,t},inverse:function(t){t.x-=this.x0,t.y-=this.y0;var e,n,r,i,o,a,s,l=t.x/this.a,c=t.y/this.a;if(this.sphere){var u,h=0,d=0;if((n=.5*(u=Math.sqrt(l*l+c*c)))>1)return null;switch(n=2*Math.asin(n),this.mode!==this.OBLIQ&&this.mode!==this.EQUIT||(d=Math.sin(n),h=Math.cos(n)),this.mode){case this.EQUIT:n=Math.abs(u)<=Ctt?0:Math.asin(c*d/u),l*=d,c=h*u;break;case this.OBLIQ:n=Math.abs(u)<=Ctt?this.lat0:Math.asin(h*this.sinph0+c*d*this.cosph0/u),l*=d*this.cosph0,c=(h-Math.sin(n)*this.sinph0)*u;break;case this.N_POLE:c=-c,n=Ett-n;break;case this.S_POLE:n-=Ett}e=0!==c||this.mode!==this.EQUIT&&this.mode!==this.OBLIQ?Math.atan2(l,c):0}else{if(s=0,this.mode===this.OBLIQ||this.mode===this.EQUIT){if(l/=this.dd,c*=this.dd,(a=Math.sqrt(l*l+c*c))<Ctt)return t.x=this.long0,t.y=this.lat0,t;i=2*Math.asin(.5*a/this.rq),r=Math.cos(i),l*=i=Math.sin(i),this.mode===this.OBLIQ?(s=r*this.sinb1+c*i*this.cosb1/a,o=this.qp*s,c=a*this.cosb1*r-c*this.sinb1*i):(s=c*i/a,o=this.qp*s,c=a*r)}else if(this.mode===this.N_POLE||this.mode===this.S_POLE){if(this.mode===this.N_POLE&&(c=-c),!(o=l*l+c*c))return t.x=this.long0,t.y=this.lat0,t;s=1-o/this.qp,this.mode===this.S_POLE&&(s=-s)}e=Math.atan2(l,c),n=function(t,e){var n=t+t;return t+e[0]*Math.sin(n)+e[1]*Math.sin(n+n)+e[2]*Math.sin(n+n+n)}(Math.asin(s),this.apa)}return t.x=aet(this.long0+e),t.y=n,t},names:["Lambert Azimuthal Equal Area","Lambert_Azimuthal_Equal_Area","laea"],S_POLE:1,N_POLE:2,EQUIT:3,OBLIQ:4};function Knt(t){return Math.abs(t)>1&&(t=t>1?1:-1),Math.asin(t)}const $nt={init:function(){Math.abs(this.lat1+this.lat2)<Ctt||(this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e3=Math.sqrt(this.es),this.sin_po=Math.sin(this.lat1),this.cos_po=Math.cos(this.lat1),this.t1=this.sin_po,this.con=this.sin_po,this.ms1=iet(this.e3,this.sin_po,this.cos_po),this.qs1=Vnt(this.e3,this.sin_po,this.cos_po),this.sin_po=Math.sin(this.lat2),this.cos_po=Math.cos(this.lat2),this.t2=this.sin_po,this.ms2=iet(this.e3,this.sin_po,this.cos_po),this.qs2=Vnt(this.e3,this.sin_po,this.cos_po),this.sin_po=Math.sin(this.lat0),this.cos_po=Math.cos(this.lat0),this.t3=this.sin_po,this.qs0=Vnt(this.e3,this.sin_po,this.cos_po),Math.abs(this.lat1-this.lat2)>Ctt?this.ns0=(this.ms1*this.ms1-this.ms2*this.ms2)/(this.qs2-this.qs1):this.ns0=this.con,this.c=this.ms1*this.ms1+this.ns0*this.qs1,this.rh=this.a*Math.sqrt(this.c-this.ns0*this.qs0)/this.ns0)},forward:function(t){var e=t.x,n=t.y;this.sin_phi=Math.sin(n),this.cos_phi=Math.cos(n);var r=Vnt(this.e3,this.sin_phi,this.cos_phi),i=this.a*Math.sqrt(this.c-this.ns0*r)/this.ns0,o=this.ns0*aet(e-this.long0),a=i*Math.sin(o)+this.x0,s=this.rh-i*Math.cos(o)+this.y0;return t.x=a,t.y=s,t},inverse:function(t){var e,n,r,i,o,a;return t.x-=this.x0,t.y=this.rh-t.y+this.y0,this.ns0>=0?(e=Math.sqrt(t.x*t.x+t.y*t.y),r=1):(e=-Math.sqrt(t.x*t.x+t.y*t.y),r=-1),i=0,0!==e&&(i=Math.atan2(r*t.x,r*t.y)),r=e*this.ns0/this.a,this.sphere?a=Math.asin((this.c-r*r)/(2*this.ns0)):(n=(this.c-r*r)/this.ns0,a=this.phi1z(this.e3,n)),o=aet(i/this.ns0+this.long0),t.x=o,t.y=a,t},names:["Albers_Conic_Equal_Area","Albers","aea"],phi1z:function(t,e){var n,r,i,o,a=Knt(.5*e);if(t<Ctt)return a;for(var s=t*t,l=1;l<=25;l++)if(a+=o=.5*(i=1-(r=t*(n=Math.sin(a)))*r)*i/Math.cos(a)*(e/(1-s)-n/i+.5/t*Math.log((1-r)/(1+r))),Math.abs(o)<=1e-7)return a;return null}};const Jnt={init:function(){this.sin_p14=Math.sin(this.lat0),this.cos_p14=Math.cos(this.lat0),this.infinity_dist=1e3*this.a,this.rc=1},forward:function(t){var e,n,r,i,o,a,s,l=t.x,c=t.y;return r=aet(l-this.long0),e=Math.sin(c),n=Math.cos(c),i=Math.cos(r),(o=this.sin_p14*e+this.cos_p14*n*i)>0||Math.abs(o)<=Ctt?(a=this.x0+1*this.a*n*Math.sin(r)/o,s=this.y0+1*this.a*(this.cos_p14*e-this.sin_p14*n*i)/o):(a=this.x0+this.infinity_dist*n*Math.sin(r),s=this.y0+this.infinity_dist*(this.cos_p14*e-this.sin_p14*n*i)),t.x=a,t.y=s,t},inverse:function(t){var e,n,r,i,o,a;return t.x=(t.x-this.x0)/this.a,t.y=(t.y-this.y0)/this.a,t.x/=this.k0,t.y/=this.k0,(e=Math.sqrt(t.x*t.x+t.y*t.y))?(i=Math.atan2(e,this.rc),n=Math.sin(i),a=Knt((r=Math.cos(i))*this.sin_p14+t.y*n*this.cos_p14/e),o=Math.atan2(t.x*n,e*this.cos_p14*r-t.y*this.sin_p14*n),o=aet(this.long0+o)):(a=this.phic0,o=0),t.x=o,t.y=a,t},names:["gnom"]};const Qnt={init:function(){this.sphere||(this.k0=iet(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts)))},forward:function(t){var e,n,r=t.x,i=t.y,o=aet(r-this.long0);if(this.sphere)e=this.x0+this.a*o*Math.cos(this.lat_ts),n=this.y0+this.a*Math.sin(i)/Math.cos(this.lat_ts);else{var a=Vnt(this.e,Math.sin(i));e=this.x0+this.a*this.k0*o,n=this.y0+this.a*a*.5/this.k0}return t.x=e,t.y=n,t},inverse:function(t){var e,n;return t.x-=this.x0,t.y-=this.y0,this.sphere?(e=aet(this.long0+t.x/this.a/Math.cos(this.lat_ts)),n=Math.asin(t.y/this.a*Math.cos(this.lat_ts))):(n=function(t,e){var n=1-(1-t*t)/(2*t)*Math.log((1-t)/(1+t));if(Math.abs(Math.abs(e)-n)<1e-6)return e<0?-1*Ett:Ett;for(var r,i,o,a,s=Math.asin(.5*e),l=0;l<30;l++)if(i=Math.sin(s),o=Math.cos(s),a=t*i,s+=r=Math.pow(1-a*a,2)/(2*o)*(e/(1-t*t)-i/(1-a*a)+.5/t*Math.log((1-a)/(1+a))),Math.abs(r)<=1e-10)return s;return NaN}(this.e,2*t.y*this.k0/this.a),e=aet(this.long0+t.x/(this.a*this.k0))),t.x=e,t.y=n,t},names:["cea"]};const trt={init:function(){this.x0=this.x0||0,this.y0=this.y0||0,this.lat0=this.lat0||0,this.long0=this.long0||0,this.lat_ts=this.lat_ts||0,this.title=this.title||"Equidistant Cylindrical (Plate Carre)",this.rc=Math.cos(this.lat_ts)},forward:function(t){var e=t.x,n=t.y,r=aet(e-this.long0),i=Fnt(n-this.lat0);return t.x=this.x0+this.a*r*this.rc,t.y=this.y0+this.a*i,t},inverse:function(t){var e=t.x,n=t.y;return t.x=aet(this.long0+(e-this.x0)/(this.a*this.rc)),t.y=Fnt(this.lat0+(n-this.y0)/this.a),t},names:["Equirectangular","Equidistant_Cylindrical","eqc"]};const ert={init:function(){this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e=Math.sqrt(this.es),this.e0=jnt(this.es),this.e1=znt(this.es),this.e2=Rnt(this.es),this.e3=Dnt(this.es),this.ml0=this.a*Lnt(this.e0,this.e1,this.e2,this.e3,this.lat0)},forward:function(t){var e,n,r,i=t.x,o=t.y,a=aet(i-this.long0);if(r=a*Math.sin(o),this.sphere)Math.abs(o)<=Ctt?(e=this.a*a,n=-1*this.a*this.lat0):(e=this.a*Math.sin(r)/Math.tan(o),n=this.a*(Fnt(o-this.lat0)+(1-Math.cos(r))/Math.tan(o)));else if(Math.abs(o)<=Ctt)e=this.a*a,n=-1*this.ml0;else{var s=Bnt(this.a,this.e,Math.sin(o))/Math.tan(o);e=s*Math.sin(r),n=this.a*Lnt(this.e0,this.e1,this.e2,this.e3,o)-this.ml0+s*(1-Math.cos(r))}return t.x=e+this.x0,t.y=n+this.y0,t},inverse:function(t){var e,n,r,i,o,a,s,l,c;if(r=t.x-this.x0,i=t.y-this.y0,this.sphere)if(Math.abs(i+this.a*this.lat0)<=Ctt)e=aet(r/this.a+this.long0),n=0;else{var u;for(a=this.lat0+i/this.a,s=r*r/this.a/this.a+a*a,l=a,o=20;o;--o)if(l+=c=-1*(a*(l*(u=Math.tan(l))+1)-l-.5*(l*l+s)*u)/((l-a)/u-1),Math.abs(c)<=Ctt){n=l;break}e=aet(this.long0+Math.asin(r*Math.tan(l)/this.a)/Math.sin(n))}else if(Math.abs(i+this.ml0)<=Ctt)n=0,e=aet(this.long0+r/this.a);else{var h,d,f,p,m;for(a=(this.ml0+i)/this.a,s=r*r/this.a/this.a+a*a,l=a,o=20;o;--o)if(m=this.e*Math.sin(l),h=Math.sqrt(1-m*m)*Math.tan(l),d=this.a*Lnt(this.e0,this.e1,this.e2,this.e3,l),f=this.e0-2*this.e1*Math.cos(2*l)+4*this.e2*Math.cos(4*l)-6*this.e3*Math.cos(6*l),l-=c=(a*(h*(p=d/this.a)+1)-p-.5*h*(p*p+s))/(this.es*Math.sin(2*l)*(p*p+s-2*a*p)/(4*h)+(a-p)*(h*f-2/Math.sin(2*l))-f),Math.abs(c)<=Ctt){n=l;break}h=Math.sqrt(1-this.es*Math.pow(Math.sin(n),2))*Math.tan(n),e=aet(this.long0+Math.asin(r*h/this.a)/Math.sin(n))}return t.x=e,t.y=n,t},names:["Polyconic","poly"]};const nrt={init:function(){this.A=[],this.A[1]=.6399175073,this.A[2]=-.1358797613,this.A[3]=.063294409,this.A[4]=-.02526853,this.A[5]=.0117879,this.A[6]=-.0055161,this.A[7]=.0026906,this.A[8]=-.001333,this.A[9]=67e-5,this.A[10]=-34e-5,this.B_re=[],this.B_im=[],this.B_re[1]=.7557853228,this.B_im[1]=0,this.B_re[2]=.249204646,this.B_im[2]=.003371507,this.B_re[3]=-.001541739,this.B_im[3]=.04105856,this.B_re[4]=-.10162907,this.B_im[4]=.01727609,this.B_re[5]=-.26623489,this.B_im[5]=-.36249218,this.B_re[6]=-.6870983,this.B_im[6]=-1.1651967,this.C_re=[],this.C_im=[],this.C_re[1]=1.3231270439,this.C_im[1]=0,this.C_re[2]=-.577245789,this.C_im[2]=-.007809598,this.C_re[3]=.508307513,this.C_im[3]=-.112208952,this.C_re[4]=-.15094762,this.C_im[4]=.18200602,this.C_re[5]=1.01418179,this.C_im[5]=1.64497696,this.C_re[6]=1.9660549,this.C_im[6]=2.5127645,this.D=[],this.D[1]=1.5627014243,this.D[2]=.5185406398,this.D[3]=-.03333098,this.D[4]=-.1052906,this.D[5]=-.0368594,this.D[6]=.007317,this.D[7]=.0122,this.D[8]=.00394,this.D[9]=-.0013},forward:function(t){var e,n=t.x,r=t.y-this.lat0,i=n-this.long0,o=r/Stt*1e-5,a=i,s=1,l=0;for(e=1;e<=10;e++)s*=o,l+=this.A[e]*s;var c,u=l,h=a,d=1,f=0,p=0,m=0;for(e=1;e<=6;e++)c=f*u+d*h,d=d*u-f*h,f=c,p=p+this.B_re[e]*d-this.B_im[e]*f,m=m+this.B_im[e]*d+this.B_re[e]*f;return t.x=m*this.a+this.x0,t.y=p*this.a+this.y0,t},inverse:function(t){var e,n,r=t.x,i=t.y,o=r-this.x0,a=(i-this.y0)/this.a,s=o/this.a,l=1,c=0,u=0,h=0;for(e=1;e<=6;e++)n=c*a+l*s,l=l*a-c*s,c=n,u=u+this.C_re[e]*l-this.C_im[e]*c,h=h+this.C_im[e]*l+this.C_re[e]*c;for(var d=0;d<this.iterations;d++){var f,p=u,m=h,g=a,y=s;for(e=2;e<=6;e++)f=m*u+p*h,p=p*u-m*h,m=f,g+=(e-1)*(this.B_re[e]*p-this.B_im[e]*m),y+=(e-1)*(this.B_im[e]*p+this.B_re[e]*m);p=1,m=0;var v=this.B_re[1],_=this.B_im[1];for(e=2;e<=6;e++)f=m*u+p*h,p=p*u-m*h,m=f,v+=e*(this.B_re[e]*p-this.B_im[e]*m),_+=e*(this.B_im[e]*p+this.B_re[e]*m);var b=v*v+_*_;u=(g*v+y*_)/b,h=(y*v-g*_)/b}var x=u,w=h,S=1,E=0;for(e=1;e<=9;e++)S*=x,E+=this.D[e]*S;var T=this.lat0+E*Stt*1e5,M=this.long0+w;return t.x=M,t.y=T,t},names:["New_Zealand_Map_Grid","nzmg"]};const rrt={init:function(){},forward:function(t){var e=t.x,n=t.y,r=aet(e-this.long0),i=this.x0+this.a*r,o=this.y0+this.a*Math.log(Math.tan(Math.PI/4+n/2.5))*1.25;return t.x=i,t.y=o,t},inverse:function(t){t.x-=this.x0,t.y-=this.y0;var e=aet(this.long0+t.x/this.a),n=2.5*(Math.atan(Math.exp(.8*t.y/this.a))-Math.PI/4);return t.x=e,t.y=n,t},names:["Miller_Cylindrical","mill"]};const irt={init:function(){this.sphere?(this.n=1,this.m=0,this.es=0,this.C_y=Math.sqrt((this.m+1)/this.n),this.C_x=this.C_y/(this.m+1)):this.en=fnt(this.es)},forward:function(t){var e,n,r=t.x,i=t.y;if(r=aet(r-this.long0),this.sphere){if(this.m)for(var o=this.n*Math.sin(i),a=20;a;--a){var s=(this.m*i+Math.sin(i)-o)/(this.m+Math.cos(i));if(i-=s,Math.abs(s)<Ctt)break}else i=1!==this.n?Math.asin(this.n*Math.sin(i)):i;e=this.a*this.C_x*r*(this.m+Math.cos(i)),n=this.a*this.C_y*i}else{var l=Math.sin(i),c=Math.cos(i);n=this.a*pnt(i,l,c,this.en),e=this.a*r*c/Math.sqrt(1-this.es*l*l)}return t.x=e,t.y=n,t},inverse:function(t){var e,n,r;return t.x-=this.x0,n=t.x/this.a,t.y-=this.y0,e=t.y/this.a,this.sphere?(e/=this.C_y,n/=this.C_x*(this.m+Math.cos(e)),this.m?e=Knt((this.m*e+Math.sin(e))/this.n):1!==this.n&&(e=Knt(Math.sin(e)/this.n)),n=aet(n+this.long0),e=Fnt(e)):(e=gnt(t.y/this.a,this.es,this.en),(r=Math.abs(e))<Ett?(r=Math.sin(e),n=aet(this.long0+t.x*Math.sqrt(1-this.es*r*r)/(this.a*Math.cos(e)))):r-Ctt<Ett&&(n=this.long0)),t.x=n,t.y=e,t},names:["Sinusoidal","sinu"]};const ort={init:function(){},forward:function(t){for(var e=t.x,n=t.y,r=aet(e-this.long0),i=n,o=Math.PI*Math.sin(n);;){var a=-(i+Math.sin(i)-o)/(1+Math.cos(i));if(i+=a,Math.abs(a)<Ctt)break}i/=2,Math.PI/2-Math.abs(n)<Ctt&&(r=0);var s=.900316316158*this.a*r*Math.cos(i)+this.x0,l=1.4142135623731*this.a*Math.sin(i)+this.y0;return t.x=s,t.y=l,t},inverse:function(t){var e,n;t.x-=this.x0,t.y-=this.y0,n=t.y/(1.4142135623731*this.a),Math.abs(n)>.999999999999&&(n=.999999999999),e=Math.asin(n);var r=aet(this.long0+t.x/(.900316316158*this.a*Math.cos(e)));r<-Math.PI&&(r=-Math.PI),r>Math.PI&&(r=Math.PI),n=(2*e+Math.sin(2*e))/Math.PI,Math.abs(n)>1&&(n=1);var i=Math.asin(n);return t.x=r,t.y=i,t},names:["Mollweide","moll"]};const art={init:function(){Math.abs(this.lat1+this.lat2)<Ctt||(this.lat2=this.lat2||this.lat1,this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e=Math.sqrt(this.es),this.e0=jnt(this.es),this.e1=znt(this.es),this.e2=Rnt(this.es),this.e3=Dnt(this.es),this.sinphi=Math.sin(this.lat1),this.cosphi=Math.cos(this.lat1),this.ms1=iet(this.e,this.sinphi,this.cosphi),this.ml1=Lnt(this.e0,this.e1,this.e2,this.e3,this.lat1),Math.abs(this.lat1-this.lat2)<Ctt?this.ns=this.sinphi:(this.sinphi=Math.sin(this.lat2),this.cosphi=Math.cos(this.lat2),this.ms2=iet(this.e,this.sinphi,this.cosphi),this.ml2=Lnt(this.e0,this.e1,this.e2,this.e3,this.lat2),this.ns=(this.ms1-this.ms2)/(this.ml2-this.ml1)),this.g=this.ml1+this.ms1/this.ns,this.ml0=Lnt(this.e0,this.e1,this.e2,this.e3,this.lat0),this.rh=this.a*(this.g-this.ml0))},forward:function(t){var e,n=t.x,r=t.y;if(this.sphere)e=this.a*(this.g-r);else{var i=Lnt(this.e0,this.e1,this.e2,this.e3,r);e=this.a*(this.g-i)}var o=this.ns*aet(n-this.long0),a=this.x0+e*Math.sin(o),s=this.y0+this.rh-e*Math.cos(o);return t.x=a,t.y=s,t},inverse:function(t){var e,n,r,i;t.x-=this.x0,t.y=this.rh-t.y+this.y0,this.ns>=0?(n=Math.sqrt(t.x*t.x+t.y*t.y),e=1):(n=-Math.sqrt(t.x*t.x+t.y*t.y),e=-1);var o=0;return 0!==n&&(o=Math.atan2(e*t.x,e*t.y)),this.sphere?(i=aet(this.long0+o/this.ns),r=Fnt(this.g-n/this.a),t.x=i,t.y=r,t):(r=Nnt(this.g-n/this.a,this.e0,this.e1,this.e2,this.e3),i=aet(this.long0+o/this.ns),t.x=i,t.y=r,t)},names:["Equidistant_Conic","eqdc"]};const srt={init:function(){this.R=this.a},forward:function(t){var e,n,r=t.x,i=t.y,o=aet(r-this.long0);Math.abs(i)<=Ctt&&(e=this.x0+this.R*o,n=this.y0);var a=Knt(2*Math.abs(i/Math.PI));(Math.abs(o)<=Ctt||Math.abs(Math.abs(i)-Ett)<=Ctt)&&(e=this.x0,n=i>=0?this.y0+Math.PI*this.R*Math.tan(.5*a):this.y0+Math.PI*this.R*-Math.tan(.5*a));var s=.5*Math.abs(Math.PI/o-o/Math.PI),l=s*s,c=Math.sin(a),u=Math.cos(a),h=u/(c+u-1),d=h*h,f=h*(2/c-1),p=f*f,m=Math.PI*this.R*(s*(h-p)+Math.sqrt(l*(h-p)*(h-p)-(p+l)*(d-p)))/(p+l);o<0&&(m=-m),e=this.x0+m;var g=l+h;return m=Math.PI*this.R*(f*g-s*Math.sqrt((p+l)*(l+1)-g*g))/(p+l),n=i>=0?this.y0+m:this.y0-m,t.x=e,t.y=n,t},inverse:function(t){var e,n,r,i,o,a,s,l,c,u,h,d;return t.x-=this.x0,t.y-=this.y0,h=Math.PI*this.R,o=(r=t.x/h)*r+(i=t.y/h)*i,h=3*(i*i/(l=-2*(a=-Math.abs(i)*(1+o))+1+2*i*i+o*o)+(2*(s=a-2*i*i+r*r)*s*s/l/l/l-9*a*s/l/l)/27)/(c=(a-s*s/3/l)/l)/(u=2*Math.sqrt(-c/3)),Math.abs(h)>1&&(h=h>=0?1:-1),d=Math.acos(h)/3,n=t.y>=0?(-u*Math.cos(d+Math.PI/3)-s/3/l)*Math.PI:-(-u*Math.cos(d+Math.PI/3)-s/3/l)*Math.PI,e=Math.abs(r)<Ctt?this.long0:aet(this.long0+Math.PI*(o-1+Math.sqrt(1+2*(r*r-i*i)+o*o))/2/r),t.x=e,t.y=n,t},names:["Van_der_Grinten_I","VanDerGrinten","vandg"]};const lrt={init:function(){this.sin_p12=Math.sin(this.lat0),this.cos_p12=Math.cos(this.lat0)},forward:function(t){var e,n,r,i,o,a,s,l,c,u,h,d,f,p,m,g,y,v,_,b,x,w,S=t.x,E=t.y,T=Math.sin(t.y),M=Math.cos(t.y),A=aet(S-this.long0);return this.sphere?Math.abs(this.sin_p12-1)<=Ctt?(t.x=this.x0+this.a*(Ett-E)*Math.sin(A),t.y=this.y0-this.a*(Ett-E)*Math.cos(A),t):Math.abs(this.sin_p12+1)<=Ctt?(t.x=this.x0+this.a*(Ett+E)*Math.sin(A),t.y=this.y0+this.a*(Ett+E)*Math.cos(A),t):(v=this.sin_p12*T+this.cos_p12*M*Math.cos(A),y=(g=Math.acos(v))?g/Math.sin(g):1,t.x=this.x0+this.a*y*M*Math.sin(A),t.y=this.y0+this.a*y*(this.cos_p12*T-this.sin_p12*M*Math.cos(A)),t):(e=jnt(this.es),n=znt(this.es),r=Rnt(this.es),i=Dnt(this.es),Math.abs(this.sin_p12-1)<=Ctt?(o=this.a*Lnt(e,n,r,i,Ett),a=this.a*Lnt(e,n,r,i,E),t.x=this.x0+(o-a)*Math.sin(A),t.y=this.y0-(o-a)*Math.cos(A),t):Math.abs(this.sin_p12+1)<=Ctt?(o=this.a*Lnt(e,n,r,i,Ett),a=this.a*Lnt(e,n,r,i,E),t.x=this.x0+(o+a)*Math.sin(A),t.y=this.y0+(o+a)*Math.cos(A),t):(s=T/M,l=Bnt(this.a,this.e,this.sin_p12),c=Bnt(this.a,this.e,T),u=Math.atan((1-this.es)*s+this.es*l*this.sin_p12/(c*M)),_=0===(h=Math.atan2(Math.sin(A),this.cos_p12*Math.tan(u)-this.sin_p12*Math.cos(A)))?Math.asin(this.cos_p12*Math.sin(u)-this.sin_p12*Math.cos(u)):Math.abs(Math.abs(h)-Math.PI)<=Ctt?-Math.asin(this.cos_p12*Math.sin(u)-this.sin_p12*Math.cos(u)):Math.asin(Math.sin(A)*Math.cos(u)/Math.sin(h)),d=this.e*this.sin_p12/Math.sqrt(1-this.es),g=l*_*(1-(b=_*_)*(m=(f=this.e*this.cos_p12*Math.cos(h)/Math.sqrt(1-this.es))*f)*(1-m)/6+(x=b*_)/8*(p=d*f)*(1-2*m)+(w=x*_)/120*(m*(4-7*m)-3*d*d*(1-7*m))-w*_/48*p),t.x=this.x0+g*Math.sin(h),t.y=this.y0+g*Math.cos(h),t))},inverse:function(t){var e,n,r,i,o,a,s,l,c,u,h,d,f,p,m,g,y,v,_,b,x,w,S;if(t.x-=this.x0,t.y-=this.y0,this.sphere){if((e=Math.sqrt(t.x*t.x+t.y*t.y))>2*Ett*this.a)return;return n=e/this.a,r=Math.sin(n),i=Math.cos(n),o=this.long0,Math.abs(e)<=Ctt?a=this.lat0:(a=Knt(i*this.sin_p12+t.y*r*this.cos_p12/e),s=Math.abs(this.lat0)-Ett,o=Math.abs(s)<=Ctt?this.lat0>=0?aet(this.long0+Math.atan2(t.x,-t.y)):aet(this.long0-Math.atan2(-t.x,t.y)):aet(this.long0+Math.atan2(t.x*r,e*this.cos_p12*i-t.y*this.sin_p12*r))),t.x=o,t.y=a,t}return l=jnt(this.es),c=znt(this.es),u=Rnt(this.es),h=Dnt(this.es),Math.abs(this.sin_p12-1)<=Ctt?(a=Nnt(((d=this.a*Lnt(l,c,u,h,Ett))-(e=Math.sqrt(t.x*t.x+t.y*t.y)))/this.a,l,c,u,h),o=aet(this.long0+Math.atan2(t.x,-1*t.y)),t.x=o,t.y=a,t):Math.abs(this.sin_p12+1)<=Ctt?(d=this.a*Lnt(l,c,u,h,Ett),a=Nnt(((e=Math.sqrt(t.x*t.x+t.y*t.y))-d)/this.a,l,c,u,h),o=aet(this.long0+Math.atan2(t.x,t.y)),t.x=o,t.y=a,t):(e=Math.sqrt(t.x*t.x+t.y*t.y),m=Math.atan2(t.x,t.y),f=Bnt(this.a,this.e,this.sin_p12),g=Math.cos(m),v=-(y=this.e*this.cos_p12*g)*y/(1-this.es),_=3*this.es*(1-v)*this.sin_p12*this.cos_p12*g/(1-this.es),w=1-v*(x=(b=e/f)-v*(1+v)*Math.pow(b,3)/6-_*(1+3*v)*Math.pow(b,4)/24)*x/2-b*x*x*x/6,p=Math.asin(this.sin_p12*Math.cos(x)+this.cos_p12*Math.sin(x)*g),o=aet(this.long0+Math.asin(Math.sin(m)*Math.sin(x)/Math.cos(p))),S=Math.sin(p),a=Math.atan2((S-this.es*w*this.sin_p12)*Math.tan(p),S*(1-this.es)),t.x=o,t.y=a,t)},names:["Azimuthal_Equidistant","aeqd"]};const crt={init:function(){this.sin_p14=Math.sin(this.lat0),this.cos_p14=Math.cos(this.lat0)},forward:function(t){var e,n,r,i,o,a,s,l=t.x,c=t.y;return r=aet(l-this.long0),e=Math.sin(c),n=Math.cos(c),i=Math.cos(r),((o=this.sin_p14*e+this.cos_p14*n*i)>0||Math.abs(o)<=Ctt)&&(a=1*this.a*n*Math.sin(r),s=this.y0+1*this.a*(this.cos_p14*e-this.sin_p14*n*i)),t.x=a,t.y=s,t},inverse:function(t){var e,n,r,i,o,a,s;return t.x-=this.x0,t.y-=this.y0,n=Knt((e=Math.sqrt(t.x*t.x+t.y*t.y))/this.a),r=Math.sin(n),i=Math.cos(n),a=this.long0,Math.abs(e)<=Ctt?(s=this.lat0,t.x=a,t.y=s,t):(s=Knt(i*this.sin_p14+t.y*r*this.cos_p14/e),o=Math.abs(this.lat0)-Ett,Math.abs(o)<=Ctt?(a=this.lat0>=0?aet(this.long0+Math.atan2(t.x,-t.y)):aet(this.long0-Math.atan2(-t.x,t.y)),t.x=a,t.y=s,t):(a=aet(this.long0+Math.atan2(t.x*r,e*this.cos_p14*i-t.y*this.sin_p14*r)),t.x=a,t.y=s,t))},names:["ortho"]};var urt=1,hrt=2,drt=3,frt=4,prt=5,mrt=6,grt={AREA_0:1,AREA_1:2,AREA_2:3,AREA_3:4};function yrt(t,e,n,r){var i;return t<Ctt?(r.value=grt.AREA_0,i=0):(i=Math.atan2(e,n),Math.abs(i)<=Itt?r.value=grt.AREA_0:i>Itt&&i<=Ett+Itt?(r.value=grt.AREA_1,i-=Ett):i>Ett+Itt||i<=-(Ett+Itt)?(r.value=grt.AREA_2,i=i>=0?i-Ltt:i+Ltt):(r.value=grt.AREA_3,i+=Ett)),i}function vrt(t,e){var n=t+e;return n<-Ltt?n+=Ott:n>+Ltt&&(n-=Ott),n}const _rt={init:function(){this.x0=this.x0||0,this.y0=this.y0||0,this.lat0=this.lat0||0,this.long0=this.long0||0,this.lat_ts=this.lat_ts||0,this.title=this.title||"Quadrilateralized Spherical Cube",this.lat0>=Ett-Itt/2?this.face=prt:this.lat0<=-(Ett-Itt/2)?this.face=mrt:Math.abs(this.long0)<=Itt?this.face=urt:Math.abs(this.long0)<=Ett+Itt?this.face=this.long0>0?hrt:frt:this.face=drt,0!==this.es&&(this.one_minus_f=1-(this.a-this.b)/this.a,this.one_minus_f_squared=this.one_minus_f*this.one_minus_f)},forward:function(t){var e,n,r,i,o,a,s={x:0,y:0},l={value:0};if(t.x-=this.long0,e=0!==this.es?Math.atan(this.one_minus_f_squared*Math.tan(t.y)):t.y,n=t.x,this.face===prt)i=Ett-e,n>=Itt&&n<=Ett+Itt?(l.value=grt.AREA_0,r=n-Ett):n>Ett+Itt||n<=-(Ett+Itt)?(l.value=grt.AREA_1,r=n>0?n-Ltt:n+Ltt):n>-(Ett+Itt)&&n<=-Itt?(l.value=grt.AREA_2,r=n+Ett):(l.value=grt.AREA_3,r=n);else if(this.face===mrt)i=Ett+e,n>=Itt&&n<=Ett+Itt?(l.value=grt.AREA_0,r=-n+Ett):n<Itt&&n>=-Itt?(l.value=grt.AREA_1,r=-n):n<-Itt&&n>=-(Ett+Itt)?(l.value=grt.AREA_2,r=-n-Ett):(l.value=grt.AREA_3,r=n>0?-n+Ltt:-n-Ltt);else{var c,u,h,d,f,p;this.face===hrt?n=vrt(n,+Ett):this.face===drt?n=vrt(n,+Ltt):this.face===frt&&(n=vrt(n,-Ett)),d=Math.sin(e),f=Math.cos(e),p=Math.sin(n),c=f*Math.cos(n),u=f*p,h=d,this.face===urt?r=yrt(i=Math.acos(c),h,u,l):this.face===hrt?r=yrt(i=Math.acos(u),h,-c,l):this.face===drt?r=yrt(i=Math.acos(-c),h,-u,l):this.face===frt?r=yrt(i=Math.acos(-u),h,c,l):(i=r=0,l.value=grt.AREA_0)}return a=Math.atan(12/Ltt*(r+Math.acos(Math.sin(r)*Math.cos(Itt))-Ett)),o=Math.sqrt((1-Math.cos(i))/(Math.cos(a)*Math.cos(a))/(1-Math.cos(Math.atan(1/Math.cos(r))))),l.value===grt.AREA_1?a+=Ett:l.value===grt.AREA_2?a+=Ltt:l.value===grt.AREA_3&&(a+=1.5*Ltt),s.x=o*Math.cos(a),s.y=o*Math.sin(a),s.x=s.x*this.a+this.x0,s.y=s.y*this.a+this.y0,t.x=s.x,t.y=s.y,t},inverse:function(t){var e,n,r,i,o,a,s,l,c,u,h,d,f={lam:0,phi:0},p={value:0};if(t.x=(t.x-this.x0)/this.a,t.y=(t.y-this.y0)/this.a,n=Math.atan(Math.sqrt(t.x*t.x+t.y*t.y)),e=Math.atan2(t.y,t.x),t.x>=0&&t.x>=Math.abs(t.y)?p.value=grt.AREA_0:t.y>=0&&t.y>=Math.abs(t.x)?(p.value=grt.AREA_1,e-=Ett):t.x<0&&-t.x>=Math.abs(t.y)?(p.value=grt.AREA_2,e=e<0?e+Ltt:e-Ltt):(p.value=grt.AREA_3,e+=Ett),c=Ltt/12*Math.tan(e),o=Math.sin(c)/(Math.cos(c)-1/Math.sqrt(2)),a=Math.atan(o),(s=1-(r=Math.cos(e))*r*(i=Math.tan(n))*i*(1-Math.cos(Math.atan(1/Math.cos(a)))))<-1?s=-1:s>1&&(s=1),this.face===prt)l=Math.acos(s),f.phi=Ett-l,p.value===grt.AREA_0?f.lam=a+Ett:p.value===grt.AREA_1?f.lam=a<0?a+Ltt:a-Ltt:p.value===grt.AREA_2?f.lam=a-Ett:f.lam=a;else if(this.face===mrt)l=Math.acos(s),f.phi=l-Ett,p.value===grt.AREA_0?f.lam=-a+Ett:p.value===grt.AREA_1?f.lam=-a:p.value===grt.AREA_2?f.lam=-a-Ett:f.lam=a<0?-a-Ltt:-a+Ltt;else{var m,g,y;c=(m=s)*m,g=(c+=(y=c>=1?0:Math.sqrt(1-c)*Math.sin(a))*y)>=1?0:Math.sqrt(1-c),p.value===grt.AREA_1?(c=g,g=-y,y=c):p.value===grt.AREA_2?(g=-g,y=-y):p.value===grt.AREA_3&&(c=g,g=y,y=-c),this.face===hrt?(c=m,m=-g,g=c):this.face===drt?(m=-m,g=-g):this.face===frt&&(c=m,m=g,g=-c),f.phi=Math.acos(-y)-Ett,f.lam=Math.atan2(g,m),this.face===hrt?f.lam=vrt(f.lam,-Ett):this.face===drt?f.lam=vrt(f.lam,-Ltt):this.face===frt&&(f.lam=vrt(f.lam,+Ett))}return 0!==this.es&&(u=f.phi<0?1:0,h=Math.tan(f.phi),d=this.b/Math.sqrt(h*h+this.one_minus_f_squared),f.phi=Math.atan(Math.sqrt(this.a*this.a-d*d)/(this.one_minus_f*d)),u&&(f.phi=-f.phi)),f.lam+=this.long0,t.x=f.lam,t.y=f.phi,t},names:["Quadrilateralized Spherical Cube","Quadrilateralized_Spherical_Cube","qsc"]};var brt=[[1,22199e-21,-715515e-10,31103e-10],[.9986,-482243e-9,-24897e-9,-13309e-10],[.9954,-83103e-8,-448605e-10,-9.86701e-7],[.99,-.00135364,-59661e-9,36777e-10],[.9822,-.00167442,-449547e-11,-572411e-11],[.973,-.00214868,-903571e-10,1.8736e-8],[.96,-.00305085,-900761e-10,164917e-11],[.9427,-.00382792,-653386e-10,-26154e-10],[.9216,-.00467746,-10457e-8,481243e-11],[.8962,-.00536223,-323831e-10,-543432e-11],[.8679,-.00609363,-113898e-9,332484e-11],[.835,-.00698325,-640253e-10,9.34959e-7],[.7986,-.00755338,-500009e-10,9.35324e-7],[.7597,-.00798324,-35971e-9,-227626e-11],[.7186,-.00851367,-701149e-10,-86303e-10],[.6732,-.00986209,-199569e-9,191974e-10],[.6213,-.010418,883923e-10,624051e-11],[.5722,-.00906601,182e-6,624051e-11],[.5322,-.00677797,275608e-9,624051e-11]],xrt=[[-520417e-23,.0124,121431e-23,-845284e-16],[.062,.0124,-1.26793e-9,4.22642e-10],[.124,.0124,5.07171e-9,-1.60604e-9],[.186,.0123999,-1.90189e-8,6.00152e-9],[.248,.0124002,7.10039e-8,-2.24e-8],[.31,.0123992,-2.64997e-7,8.35986e-8],[.372,.0124029,9.88983e-7,-3.11994e-7],[.434,.0123893,-369093e-11,-4.35621e-7],[.4958,.0123198,-102252e-10,-3.45523e-7],[.5571,.0121916,-154081e-10,-5.82288e-7],[.6176,.0119938,-241424e-10,-5.25327e-7],[.6769,.011713,-320223e-10,-5.16405e-7],[.7346,.0113541,-397684e-10,-6.09052e-7],[.7903,.0109107,-489042e-10,-104739e-11],[.8435,.0103431,-64615e-9,-1.40374e-9],[.8936,.00969686,-64636e-9,-8547e-9],[.9394,.00840947,-192841e-9,-42106e-10],[.9761,.00616527,-256e-6,-42106e-10],[1,.00328947,-319159e-9,-42106e-10]],wrt=.8487,Srt=1.3523,Ert=ktt/5,Trt=1/Ert,Mrt=18,Art=function(t,e){return t[0]+e*(t[1]+e*(t[2]+e*t[3]))};const Crt={init:function(){this.x0=this.x0||0,this.y0=this.y0||0,this.long0=this.long0||0,this.es=0,this.title=this.title||"Robinson"},forward:function(t){var e=aet(t.x-this.long0),n=Math.abs(t.y),r=Math.floor(n*Ert);r<0?r=0:r>=Mrt&&(r=17);var i={x:Art(brt[r],n=ktt*(n-Trt*r))*e,y:Art(xrt[r],n)};return t.y<0&&(i.y=-i.y),i.x=i.x*this.a*wrt+this.x0,i.y=i.y*this.a*Srt+this.y0,i},inverse:function(t){var e={x:(t.x-this.x0)/(this.a*wrt),y:Math.abs(t.y-this.y0)/(this.a*Srt)};if(e.y>=1)e.x/=brt[18][0],e.y=t.y<0?-Ett:Ett;else{var n=Math.floor(e.y*Mrt);for(n<0?n=0:n>=Mrt&&(n=17);;)if(xrt[n][0]>e.y)--n;else{if(!(xrt[n+1][0]<=e.y))break;++n}var r=xrt[n],i=5*(e.y-r[0])/(xrt[n+1][0]-r[0]);i=function(t,e,n,r){for(var i=e;r;--r){var o=t(i);if(i-=o,Math.abs(o)<n)break}return i}((function(t){return(Art(r,t)-e.y)/function(t,e){return t[1]+e*(2*t[2]+3*e*t[3])}(r,t)}),i,Ctt,100),e.x/=Art(brt[n],i),e.y=(5*n+i)*Ptt,t.y<0&&(e.y=-e.y)}return e.x=aet(e.x+this.long0),e},names:["Robinson","robin"]};const Prt={init:function(){this.name="geocent"},forward:function(t){return wet(t,this.es,this.a)},inverse:function(t){return Eet(t,this.es,this.a,this.b)},names:["Geocentric","geocentric","geocent","Geocent"]};jet.defaultDatum="WGS84",jet.Proj=xet,jet.WGS84=new jet.Proj("WGS84"),jet.Point=tnt,jet.toPoint=Cet,jet.defs=Qtt,jet.transform=ket,jet.mgrs=Wet,jet.version="__VERSION__",function(t){t.Proj.projections.add(ynt),t.Proj.projections.add(Snt),t.Proj.projections.add(Ent),t.Proj.projections.add(Ant),t.Proj.projections.add(Cnt),t.Proj.projections.add(Pnt),t.Proj.projections.add(knt),t.Proj.projections.add(Int),t.Proj.projections.add(Ont),t.Proj.projections.add(Unt),t.Proj.projections.add(Ynt),t.Proj.projections.add($nt),t.Proj.projections.add(Jnt),t.Proj.projections.add(Qnt),t.Proj.projections.add(trt),t.Proj.projections.add(ert),t.Proj.projections.add(nrt),t.Proj.projections.add(rrt),t.Proj.projections.add(irt),t.Proj.projections.add(ort),t.Proj.projections.add(art),t.Proj.projections.add(srt),t.Proj.projections.add(lrt),t.Proj.projections.add(crt),t.Proj.projections.add(_rt),t.Proj.projections.add(Crt),t.Proj.projections.add(Prt)}(jet);const krt=jet;class Irt{static defineProjectionAliases(t){const e=[];for(const n in t)e.push([n,t[n]]);krt.defs(e)}constructor(t){let{from:e="WGS84",to:n="WGS84"}=t;if(this._projection=krt(e,n),!this._projection)throw new Error("Invalid projection");this.project=this.project.bind(this),this.unproject=this.unproject.bind(this)}project(t){return this._projection.forward(t)}unproject(t){return this._projection.inverse(t)}}function Ort(t,e){for(const n of t)n.geometry.coordinates=Lrt(n.geometry.coordinates,e);return t}function Lrt(t,e){return function(t){return Array.isArray(t)&&Number.isFinite(t[0])&&Number.isFinite(t[1])}(t)?e(t):t.map((t=>Lrt(t,e)))}function jrt(t,e){if(null===t)return null;switch(e){case GeometryType.Point:case GeometryType.MultiPoint:return function(t){const e=t.xyArray(),n=t.zArray();return{positions:Rrt(e,n)}}(t);case GeometryType.LineString:case GeometryType.MultiLineString:return function(t){const e=t.xyArray(),n=t.zArray(),r=Rrt(e,n),i=t.endsArray()&&Array.from(t.endsArray())||[e.length/2];i.unshift(0);const o={value:new Uint16Array(i),size:1};return{positions:r,pathIndices:o}}(t);case GeometryType.Polygon:return zrt(t);case GeometryType.MultiPolygon:return function(t){const e=[];let n=0,r=1,i=1;for(let d=0;d<t.partsLength();d++){const o=zrt(t.parts(d));n+=o.positions.value.length,r+=o.primitivePolygonIndices.value.length-1,i+=o.polygonIndices.value.length-1,e.push(o)}const o=new Float64Array(n),a=new Uint32Array(r),s=new Uint32Array(i);let l=0,c=1,u=1;const h=e[0].positions.size;for(const d of e)o.set(d.positions.value,l*h),a.set(d.primitivePolygonIndices.value.subarray(1).map((t=>t+l)),c),s.set(d.polygonIndices.value.subarray(1).map((t=>t+l)),u),l+=d.positions.value.length/h,c+=d.primitivePolygonIndices.value.length-1,u+=d.polygonIndices.value.length-1;return{positions:{value:o,size:h},primitivePolygonIndices:{value:a,size:1},polygonIndices:{value:s,size:1}}}(t);default:throw new Error("Unimplemented geometry type: ".concat(e))}}function zrt(t){const e=t.xyArray(),n=Rrt(e,t.zArray()),r=t.endsArray()&&Array.from(t.endsArray())||[e.length/2];r.unshift(0);return{positions:n,primitivePolygonIndices:{value:new Uint16Array(r),size:1},polygonIndices:{value:new Uint16Array([0,e.length/2]),size:1}}}function Rrt(t,e){if(!e)return{value:t,size:2};if(2*e.length!==t.length)throw new Error("Z array must be half XY array's length");const n=t.length+e.length,r=new Float64Array(n);for(let i=0;i<t.length/2;i++)r[3*i+0]=t[2*i+0],r[3*i+1]=t[2*i+1],r[3*i+2]=e[i];return{value:r,size:3}}function Drt(t){var e,n;const r={title:t.title||"",description:t.description||"",crs:JSON.stringify(t.crs)||"",metadata:t.metadata||"",geometryType:String(t.geometryType),indexNodeSize:String(t.indexNodeSize),featureCount:String(t.featuresCount),bounds:(null===(e=t.envelope)||void 0===e?void 0:e.join(","))||""},i=(null===(n=t.columns)||void 0===n?void 0:n.map((t=>function(t){const e={title:t.title||"",description:t.description||"",width:String(t.width),precision:String(t.precision),scale:String(t.scale),unique:String(t.unique),primary_key:String(t.primary_key)};return{name:t.name,type:Nrt(t.type),nullable:t.nullable,metadata:e}}(t))))||[];return{metadata:r,fields:i}}var Brt,Frt;function Nrt(t){switch(t){case Brt.Byte:return"int8";case Brt.UByte:return"uint8";case Brt.Bool:return"bool";case Brt.Short:return"int16";case Brt.UShort:return"uint16";case Brt.Int:return"int32";case Brt.UInt:return"uint32";case Brt.Long:return"int64";case Brt.ULong:return"uint64";case Brt.Float:return"float32";case Brt.Double:return"float64";case Brt.String:return"utf8";case Brt.Json:return"null";case Brt.DateTime:return"date-millisecond";case Brt.Binary:return"binary";default:return"null"}}function Urt(t,e){const n=[];for(let r=0;r<t.length;r+=2){const i=[t[r],t[r+1]];e&&i.push(e[r>>1]),n.push(i)}return n}function Vrt(t,e,n){if(!n||0===n.length)return[Urt(t,e)];let r=0;const i=Array.from(n).map((e=>t.slice(r,r=e<<1)));let o;return e&&(r=0,o=Array.from(n).map((t=>e.slice(r,r=t)))),i.map(((t,e)=>Urt(t,o?o[e]:void 0)))}function Wrt(t,e){let n=e;if(n===Frt.Unknown&&(n=t.type()),n===Frt.GeometryCollection){const e=[];for(let n=0;n<t.partsLength();n++){const r=t.parts(n),i=r.type();e.push(Wrt(r,i))}return{type:Frt[n],geometries:e}}if(n===Frt.MultiPolygon){const e=[];for(let n=0;n<t.partsLength();n++)e.push(Wrt(t.parts(n),Frt.Polygon));return{type:Frt[n],coordinates:e.map((t=>t.coordinates))}}const r=function(t,e){const n=t.xyArray(),r=t.zArray();switch(e){case Frt.Point:{const t=Array.from(n);return r&&t.push(r[0]),t}case Frt.MultiPoint:case Frt.LineString:return Urt(n,r);case Frt.MultiLineString:case Frt.Polygon:return Vrt(n,r,t.endsArray())}}(t,n);return{type:Frt[n],coordinates:r}}!function(t){t[t.Byte=0]="Byte",t[t.UByte=1]="UByte",t[t.Bool=2]="Bool",t[t.Short=3]="Short",t[t.UShort=4]="UShort",t[t.Int=5]="Int",t[t.UInt=6]="UInt",t[t.Long=7]="Long",t[t.ULong=8]="ULong",t[t.Float=9]="Float",t[t.Double=10]="Double",t[t.String=11]="String",t[t.Json=12]="Json",t[t.DateTime=13]="DateTime",t[t.Binary=14]="Binary"}(Brt||(Brt={})),function(t){t[t.Unknown=0]="Unknown",t[t.Point=1]="Point",t[t.LineString=2]="LineString",t[t.Polygon=3]="Polygon",t[t.MultiPoint=4]="MultiPoint",t[t.MultiLineString=5]="MultiLineString",t[t.MultiPolygon=6]="MultiPolygon",t[t.GeometryCollection=7]="GeometryCollection",t[t.CircularString=8]="CircularString",t[t.CompoundCurve=9]="CompoundCurve",t[t.CurvePolygon=10]="CurvePolygon",t[t.MultiCurve=11]="MultiCurve",t[t.MultiSurface=12]="MultiSurface",t[t.Curve=13]="Curve",t[t.Surface=14]="Surface",t[t.PolyhedralSurface=15]="PolyhedralSurface",t[t.TIN=16]="TIN",t[t.Triangle=17]="Triangle"}(Frt||(Frt={}));const Grt=new Int32Array(2),qrt=new Float32Array(Grt.buffer),Hrt=new Float64Array(Grt.buffer),Zrt=1===new Uint16Array(new Uint8Array([1,0]).buffer)[0];var Xrt,Yrt;!function(t){t[t.UTF8_BYTES=1]="UTF8_BYTES",t[t.UTF16_STRING=2]="UTF16_STRING"}(Xrt||(Xrt={}));class Krt{constructor(t){this.bytes_=t,this.position_=0,this.text_decoder_=new TextDecoder}static allocate(t){return new Krt(new Uint8Array(t))}clear(){this.position_=0}bytes(){return this.bytes_}position(){return this.position_}setPosition(t){this.position_=t}capacity(){return this.bytes_.length}readInt8(t){return this.readUint8(t)<<24>>24}readUint8(t){return this.bytes_[t]}readInt16(t){return this.readUint16(t)<<16>>16}readUint16(t){return this.bytes_[t]|this.bytes_[t+1]<<8}readInt32(t){return this.bytes_[t]|this.bytes_[t+1]<<8|this.bytes_[t+2]<<16|this.bytes_[t+3]<<24}readUint32(t){return this.readInt32(t)>>>0}readInt64(t){return BigInt.asIntN(64,BigInt(this.readUint32(t))+(BigInt(this.readUint32(t+4))<<BigInt(32)))}readUint64(t){return BigInt.asUintN(64,BigInt(this.readUint32(t))+(BigInt(this.readUint32(t+4))<<BigInt(32)))}readFloat32(t){return Grt[0]=this.readInt32(t),qrt[0]}readFloat64(t){return Grt[Zrt?0:1]=this.readInt32(t),Grt[Zrt?1:0]=this.readInt32(t+4),Hrt[0]}writeInt8(t,e){this.bytes_[t]=e}writeUint8(t,e){this.bytes_[t]=e}writeInt16(t,e){this.bytes_[t]=e,this.bytes_[t+1]=e>>8}writeUint16(t,e){this.bytes_[t]=e,this.bytes_[t+1]=e>>8}writeInt32(t,e){this.bytes_[t]=e,this.bytes_[t+1]=e>>8,this.bytes_[t+2]=e>>16,this.bytes_[t+3]=e>>24}writeUint32(t,e){this.bytes_[t]=e,this.bytes_[t+1]=e>>8,this.bytes_[t+2]=e>>16,this.bytes_[t+3]=e>>24}writeInt64(t,e){this.writeInt32(t,Number(BigInt.asIntN(32,e))),this.writeInt32(t+4,Number(BigInt.asIntN(32,e>>BigInt(32))))}writeUint64(t,e){this.writeUint32(t,Number(BigInt.asUintN(32,e))),this.writeUint32(t+4,Number(BigInt.asUintN(32,e>>BigInt(32))))}writeFloat32(t,e){qrt[0]=e,this.writeInt32(t,Grt[0])}writeFloat64(t,e){Hrt[0]=e,this.writeInt32(t,Grt[Zrt?0:1]),this.writeInt32(t+4,Grt[Zrt?1:0])}getBufferIdentifier(){if(this.bytes_.length<this.position_+4+4)throw new Error("FlatBuffers: ByteBuffer is too short to contain an identifier.");let t="";for(let e=0;e<4;e++)t+=String.fromCharCode(this.readInt8(this.position_+4+e));return t}__offset(t,e){const n=t-this.readInt32(t);return e<this.readInt16(n)?this.readInt16(n+e):0}__union(t,e){return t.bb_pos=e+this.readInt32(e),t.bb=this,t}__string(t,e){t+=this.readInt32(t);const n=this.readInt32(t);t+=4;const r=this.bytes_.subarray(t,t+n);return e===Xrt.UTF8_BYTES?r:this.text_decoder_.decode(r)}__union_with_string(t,e){return"string"===typeof t?this.__string(e):this.__union(t,e)}__indirect(t){return t+this.readInt32(t)}__vector(t){return t+this.readInt32(t)+4}__vector_len(t){return this.readInt32(t+this.readInt32(t))}__has_identifier(t){if(4!=t.length)throw new Error("FlatBuffers: file identifier must be length 4");for(let e=0;e<4;e++)if(t.charCodeAt(e)!=this.readInt8(this.position()+4+e))return!1;return!0}createScalarList(t,e){const n=[];for(let r=0;r<e;++r){const e=t(r);null!==e&&n.push(e)}return n}createObjList(t,e){const n=[];for(let r=0;r<e;++r){const e=t(r);null!==e&&n.push(e.unpack())}return n}}!function(t){t[t.Byte=0]="Byte",t[t.UByte=1]="UByte",t[t.Bool=2]="Bool",t[t.Short=3]="Short",t[t.UShort=4]="UShort",t[t.Int=5]="Int",t[t.UInt=6]="UInt",t[t.Long=7]="Long",t[t.ULong=8]="ULong",t[t.Float=9]="Float",t[t.Double=10]="Double",t[t.String=11]="String",t[t.Json=12]="Json",t[t.DateTime=13]="DateTime",t[t.Binary=14]="Binary"}(Yrt||(Yrt={}));new TextEncoder;const $rt=new TextDecoder;function Jrt(t,e){const n={};if(!e||0===e.length)return n;const r=t.propertiesArray();if(!r)return n;const i=new DataView(r.buffer,r.byteOffset),o=t.propertiesLength();let a=0;for(;a<o;){const t=i.getUint16(a,!0);a+=2;const o=e[t],s=o.name;switch(o.type){case Yrt.Bool:n[s]=Boolean(i.getUint8(a)),a+=1;break;case Yrt.Byte:n[s]=i.getInt8(a),a+=1;break;case Yrt.UByte:n[s]=i.getUint8(a),a+=1;break;case Yrt.Short:n[s]=i.getInt16(a,!0),a+=2;break;case Yrt.UShort:n[s]=i.getUint16(a,!0),a+=2;break;case Yrt.Int:n[s]=i.getInt32(a,!0),a+=4;break;case Yrt.UInt:n[s]=i.getUint32(a,!0),a+=4;break;case Yrt.Long:n[s]=Number(i.getBigInt64(a,!0)),a+=8;break;case Yrt.ULong:n[s]=Number(i.getBigUint64(a,!0)),a+=8;break;case Yrt.Float:n[s]=i.getFloat32(a,!0),a+=4;break;case Yrt.Double:n[s]=i.getFloat64(a,!0),a+=8;break;case Yrt.DateTime:case Yrt.String:{const t=i.getUint32(a,!0);a+=4,n[s]=$rt.decode(r.subarray(a,a+t)),a+=t;break}case Yrt.Json:{const t=i.getUint32(a,!0);a+=4;const e=$rt.decode(r.subarray(a,a+t));n[s]=JSON.parse(e),a+=t;break}default:throw new Error("Unknown type ".concat(o.type))}}return n}function Qrt(t,e){const n=e.columns;return{type:"Feature",geometry:Wrt(t.geometry(),e.geometryType),properties:Jrt(t,n)}}const tit=new Uint8Array(0);function eit(t,e){if(!t.length)return e;if(!e.length)return t;var n=new Uint8Array(t.length+e.length);return n.set(t),n.set(e,t.length),n}function nit(t){return"function"===typeof t.slice?t:new rit("function"===typeof t.read?t:t.getReader())}function rit(t){this._source=t,this._array=tit,this._index=0}rit.prototype.read=function(){var t=this,e=t._array.subarray(t._index);return t._source.read().then((function(n){return t._array=tit,t._index=0,n.done?e.length>0?{done:!1,value:e}:{done:!0,value:void 0}:{done:!1,value:eit(e,n.value)}}))},rit.prototype.slice=function(t){if((t|=0)<0)throw new Error("invalid length");var e=this,n=this._array.length-this._index;if(this._index+t<=this._array.length)return Promise.resolve(this._array.subarray(this._index,this._index+=t));var r=new Uint8Array(t);return r.set(this._array.subarray(this._index)),function i(){return e._source.read().then((function(o){return o.done?(e._array=tit,e._index=0,n>0?r.subarray(0,n):null):n+o.value.length>=t?(e._array=o.value,e._index=t-n,r.set(o.value.subarray(0,t-n),n),r):(r.set(o.value,n),n+=o.value.length,i())}))}()},rit.prototype.cancel=function(){return this._source.cancel()};class iit{constructor(){ww(this,"bb",null),ww(this,"bb_pos",0)}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsColumn(t,e){return(e||new iit).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsColumn(t,e){return t.setPosition(t.position()+4),(e||new iit).__init(t.readInt32(t.position())+t.position(),t)}name(t){const e=this.bb.__offset(this.bb_pos,4);return e?this.bb.__string(this.bb_pos+e,t):null}type(){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.readUint8(this.bb_pos+t):Yrt.Byte}title(t){const e=this.bb.__offset(this.bb_pos,8);return e?this.bb.__string(this.bb_pos+e,t):null}description(t){const e=this.bb.__offset(this.bb_pos,10);return e?this.bb.__string(this.bb_pos+e,t):null}width(){const t=this.bb.__offset(this.bb_pos,12);return t?this.bb.readInt32(this.bb_pos+t):-1}precision(){const t=this.bb.__offset(this.bb_pos,14);return t?this.bb.readInt32(this.bb_pos+t):-1}scale(){const t=this.bb.__offset(this.bb_pos,16);return t?this.bb.readInt32(this.bb_pos+t):-1}nullable(){const t=this.bb.__offset(this.bb_pos,18);return!t||Boolean(this.bb.readInt8(this.bb_pos+t))}unique(){const t=this.bb.__offset(this.bb_pos,20);return!!t&&Boolean(this.bb.readInt8(this.bb_pos+t))}primaryKey(){const t=this.bb.__offset(this.bb_pos,22);return!!t&&Boolean(this.bb.readInt8(this.bb_pos+t))}metadata(t){const e=this.bb.__offset(this.bb_pos,24);return e?this.bb.__string(this.bb_pos+e,t):null}static startColumn(t){t.startObject(11)}static addName(t,e){t.addFieldOffset(0,e,0)}static addType(t,e){t.addFieldInt8(1,e,Yrt.Byte)}static addTitle(t,e){t.addFieldOffset(2,e,0)}static addDescription(t,e){t.addFieldOffset(3,e,0)}static addWidth(t,e){t.addFieldInt32(4,e,-1)}static addPrecision(t,e){t.addFieldInt32(5,e,-1)}static addScale(t,e){t.addFieldInt32(6,e,-1)}static addNullable(t,e){t.addFieldInt8(7,Number(e),Number(!0))}static addUnique(t,e){t.addFieldInt8(8,Number(e),Number(!1))}static addPrimaryKey(t,e){t.addFieldInt8(9,Number(e),Number(!1))}static addMetadata(t,e){t.addFieldOffset(10,e,0)}static endColumn(t){const e=t.endObject();return t.requiredField(e,4),e}static createColumn(t,e,n,r,i,o,a,s,l,c,u,h){return iit.startColumn(t),iit.addName(t,e),iit.addType(t,n),iit.addTitle(t,r),iit.addDescription(t,i),iit.addWidth(t,o),iit.addPrecision(t,a),iit.addScale(t,s),iit.addNullable(t,l),iit.addUnique(t,c),iit.addPrimaryKey(t,u),iit.addMetadata(t,h),iit.endColumn(t)}}class oit{constructor(){ww(this,"bb",null),ww(this,"bb_pos",0)}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsGeometry(t,e){return(e||new oit).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsGeometry(t,e){return t.setPosition(t.position()+4),(e||new oit).__init(t.readInt32(t.position())+t.position(),t)}ends(t){const e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readUint32(this.bb.__vector(this.bb_pos+e)+4*t):0}endsLength(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.__vector_len(this.bb_pos+t):0}endsArray(){const t=this.bb.__offset(this.bb_pos,4);return t?new Uint32Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+t),this.bb.__vector_len(this.bb_pos+t)):null}xy(t){const e=this.bb.__offset(this.bb_pos,6);return e?this.bb.readFloat64(this.bb.__vector(this.bb_pos+e)+8*t):0}xyLength(){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.__vector_len(this.bb_pos+t):0}xyArray(){const t=this.bb.__offset(this.bb_pos,6);return t?new Float64Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+t),this.bb.__vector_len(this.bb_pos+t)):null}z(t){const e=this.bb.__offset(this.bb_pos,8);return e?this.bb.readFloat64(this.bb.__vector(this.bb_pos+e)+8*t):0}zLength(){const t=this.bb.__offset(this.bb_pos,8);return t?this.bb.__vector_len(this.bb_pos+t):0}zArray(){const t=this.bb.__offset(this.bb_pos,8);return t?new Float64Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+t),this.bb.__vector_len(this.bb_pos+t)):null}m(t){const e=this.bb.__offset(this.bb_pos,10);return e?this.bb.readFloat64(this.bb.__vector(this.bb_pos+e)+8*t):0}mLength(){const t=this.bb.__offset(this.bb_pos,10);return t?this.bb.__vector_len(this.bb_pos+t):0}mArray(){const t=this.bb.__offset(this.bb_pos,10);return t?new Float64Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+t),this.bb.__vector_len(this.bb_pos+t)):null}t(t){const e=this.bb.__offset(this.bb_pos,12);return e?this.bb.readFloat64(this.bb.__vector(this.bb_pos+e)+8*t):0}tLength(){const t=this.bb.__offset(this.bb_pos,12);return t?this.bb.__vector_len(this.bb_pos+t):0}tArray(){const t=this.bb.__offset(this.bb_pos,12);return t?new Float64Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+t),this.bb.__vector_len(this.bb_pos+t)):null}tm(t){const e=this.bb.__offset(this.bb_pos,14);return e?this.bb.readUint64(this.bb.__vector(this.bb_pos+e)+8*t):BigInt(0)}tmLength(){const t=this.bb.__offset(this.bb_pos,14);return t?this.bb.__vector_len(this.bb_pos+t):0}type(){const t=this.bb.__offset(this.bb_pos,16);return t?this.bb.readUint8(this.bb_pos+t):Frt.Unknown}parts(t,e){const n=this.bb.__offset(this.bb_pos,18);return n?(e||new oit).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+n)+4*t),this.bb):null}partsLength(){const t=this.bb.__offset(this.bb_pos,18);return t?this.bb.__vector_len(this.bb_pos+t):0}static startGeometry(t){t.startObject(8)}static addEnds(t,e){t.addFieldOffset(0,e,0)}static createEndsVector(t,e){t.startVector(4,e.length,4);for(let n=e.length-1;n>=0;n--)t.addInt32(e[n]);return t.endVector()}static startEndsVector(t,e){t.startVector(4,e,4)}static addXy(t,e){t.addFieldOffset(1,e,0)}static createXyVector(t,e){t.startVector(8,e.length,8);for(let n=e.length-1;n>=0;n--)t.addFloat64(e[n]);return t.endVector()}static startXyVector(t,e){t.startVector(8,e,8)}static addZ(t,e){t.addFieldOffset(2,e,0)}static createZVector(t,e){t.startVector(8,e.length,8);for(let n=e.length-1;n>=0;n--)t.addFloat64(e[n]);return t.endVector()}static startZVector(t,e){t.startVector(8,e,8)}static addM(t,e){t.addFieldOffset(3,e,0)}static createMVector(t,e){t.startVector(8,e.length,8);for(let n=e.length-1;n>=0;n--)t.addFloat64(e[n]);return t.endVector()}static startMVector(t,e){t.startVector(8,e,8)}static addT(t,e){t.addFieldOffset(4,e,0)}static createTVector(t,e){t.startVector(8,e.length,8);for(let n=e.length-1;n>=0;n--)t.addFloat64(e[n]);return t.endVector()}static startTVector(t,e){t.startVector(8,e,8)}static addTm(t,e){t.addFieldOffset(5,e,0)}static createTmVector(t,e){t.startVector(8,e.length,8);for(let n=e.length-1;n>=0;n--)t.addInt64(e[n]);return t.endVector()}static startTmVector(t,e){t.startVector(8,e,8)}static addType(t,e){t.addFieldInt8(6,e,Frt.Unknown)}static addParts(t,e){t.addFieldOffset(7,e,0)}static createPartsVector(t,e){t.startVector(4,e.length,4);for(let n=e.length-1;n>=0;n--)t.addOffset(e[n]);return t.endVector()}static startPartsVector(t,e){t.startVector(4,e,4)}static endGeometry(t){return t.endObject()}static createGeometry(t,e,n,r,i,o,a,s,l){return oit.startGeometry(t),oit.addEnds(t,e),oit.addXy(t,n),oit.addZ(t,r),oit.addM(t,i),oit.addT(t,o),oit.addTm(t,a),oit.addType(t,s),oit.addParts(t,l),oit.endGeometry(t)}}class ait{constructor(){ww(this,"bb",null),ww(this,"bb_pos",0)}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsFeature(t,e){return(e||new ait).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsFeature(t,e){return t.setPosition(t.position()+4),(e||new ait).__init(t.readInt32(t.position())+t.position(),t)}geometry(t){const e=this.bb.__offset(this.bb_pos,4);return e?(t||new oit).__init(this.bb.__indirect(this.bb_pos+e),this.bb):null}properties(t){const e=this.bb.__offset(this.bb_pos,6);return e?this.bb.readUint8(this.bb.__vector(this.bb_pos+e)+t):0}propertiesLength(){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.__vector_len(this.bb_pos+t):0}propertiesArray(){const t=this.bb.__offset(this.bb_pos,6);return t?new Uint8Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+t),this.bb.__vector_len(this.bb_pos+t)):null}columns(t,e){const n=this.bb.__offset(this.bb_pos,8);return n?(e||new iit).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+n)+4*t),this.bb):null}columnsLength(){const t=this.bb.__offset(this.bb_pos,8);return t?this.bb.__vector_len(this.bb_pos+t):0}static startFeature(t){t.startObject(3)}static addGeometry(t,e){t.addFieldOffset(0,e,0)}static addProperties(t,e){t.addFieldOffset(1,e,0)}static createPropertiesVector(t,e){t.startVector(1,e.length,1);for(let n=e.length-1;n>=0;n--)t.addInt8(e[n]);return t.endVector()}static startPropertiesVector(t,e){t.startVector(1,e,1)}static addColumns(t,e){t.addFieldOffset(2,e,0)}static createColumnsVector(t,e){t.startVector(4,e.length,4);for(let n=e.length-1;n>=0;n--)t.addOffset(e[n]);return t.endVector()}static startColumnsVector(t,e){t.startVector(4,e,4)}static endFeature(t){return t.endObject()}static finishFeatureBuffer(t,e){t.finish(e)}static finishSizePrefixedFeatureBuffer(t,e){t.finish(e,void 0,!0)}static createFeature(t,e,n,r){return ait.startFeature(t),ait.addGeometry(t,e),ait.addProperties(t,n),ait.addColumns(t,r),ait.endFeature(t)}}class sit{constructor(){ww(this,"bb",null),ww(this,"bb_pos",0)}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsCrs(t,e){return(e||new sit).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsCrs(t,e){return t.setPosition(t.position()+4),(e||new sit).__init(t.readInt32(t.position())+t.position(),t)}org(t){const e=this.bb.__offset(this.bb_pos,4);return e?this.bb.__string(this.bb_pos+e,t):null}code(){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.readInt32(this.bb_pos+t):0}name(t){const e=this.bb.__offset(this.bb_pos,8);return e?this.bb.__string(this.bb_pos+e,t):null}description(t){const e=this.bb.__offset(this.bb_pos,10);return e?this.bb.__string(this.bb_pos+e,t):null}wkt(t){const e=this.bb.__offset(this.bb_pos,12);return e?this.bb.__string(this.bb_pos+e,t):null}codeString(t){const e=this.bb.__offset(this.bb_pos,14);return e?this.bb.__string(this.bb_pos+e,t):null}static startCrs(t){t.startObject(6)}static addOrg(t,e){t.addFieldOffset(0,e,0)}static addCode(t,e){t.addFieldInt32(1,e,0)}static addName(t,e){t.addFieldOffset(2,e,0)}static addDescription(t,e){t.addFieldOffset(3,e,0)}static addWkt(t,e){t.addFieldOffset(4,e,0)}static addCodeString(t,e){t.addFieldOffset(5,e,0)}static endCrs(t){return t.endObject()}static createCrs(t,e,n,r,i,o,a){return sit.startCrs(t),sit.addOrg(t,e),sit.addCode(t,n),sit.addName(t,r),sit.addDescription(t,i),sit.addWkt(t,o),sit.addCodeString(t,a),sit.endCrs(t)}}class lit{constructor(){ww(this,"bb",null),ww(this,"bb_pos",0)}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsHeader(t,e){return(e||new lit).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsHeader(t,e){return t.setPosition(t.position()+4),(e||new lit).__init(t.readInt32(t.position())+t.position(),t)}name(t){const e=this.bb.__offset(this.bb_pos,4);return e?this.bb.__string(this.bb_pos+e,t):null}envelope(t){const e=this.bb.__offset(this.bb_pos,6);return e?this.bb.readFloat64(this.bb.__vector(this.bb_pos+e)+8*t):0}envelopeLength(){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.__vector_len(this.bb_pos+t):0}envelopeArray(){const t=this.bb.__offset(this.bb_pos,6);return t?new Float64Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+t),this.bb.__vector_len(this.bb_pos+t)):null}geometryType(){const t=this.bb.__offset(this.bb_pos,8);return t?this.bb.readUint8(this.bb_pos+t):Frt.Unknown}hasZ(){const t=this.bb.__offset(this.bb_pos,10);return!!t&&Boolean(this.bb.readInt8(this.bb_pos+t))}hasM(){const t=this.bb.__offset(this.bb_pos,12);return!!t&&Boolean(this.bb.readInt8(this.bb_pos+t))}hasT(){const t=this.bb.__offset(this.bb_pos,14);return!!t&&Boolean(this.bb.readInt8(this.bb_pos+t))}hasTm(){const t=this.bb.__offset(this.bb_pos,16);return!!t&&Boolean(this.bb.readInt8(this.bb_pos+t))}columns(t,e){const n=this.bb.__offset(this.bb_pos,18);return n?(e||new iit).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+n)+4*t),this.bb):null}columnsLength(){const t=this.bb.__offset(this.bb_pos,18);return t?this.bb.__vector_len(this.bb_pos+t):0}featuresCount(){const t=this.bb.__offset(this.bb_pos,20);return t?this.bb.readUint64(this.bb_pos+t):BigInt("0")}indexNodeSize(){const t=this.bb.__offset(this.bb_pos,22);return t?this.bb.readUint16(this.bb_pos+t):16}crs(t){const e=this.bb.__offset(this.bb_pos,24);return e?(t||new sit).__init(this.bb.__indirect(this.bb_pos+e),this.bb):null}title(t){const e=this.bb.__offset(this.bb_pos,26);return e?this.bb.__string(this.bb_pos+e,t):null}description(t){const e=this.bb.__offset(this.bb_pos,28);return e?this.bb.__string(this.bb_pos+e,t):null}metadata(t){const e=this.bb.__offset(this.bb_pos,30);return e?this.bb.__string(this.bb_pos+e,t):null}static startHeader(t){t.startObject(14)}static addName(t,e){t.addFieldOffset(0,e,0)}static addEnvelope(t,e){t.addFieldOffset(1,e,0)}static createEnvelopeVector(t,e){t.startVector(8,e.length,8);for(let n=e.length-1;n>=0;n--)t.addFloat64(e[n]);return t.endVector()}static startEnvelopeVector(t,e){t.startVector(8,e,8)}static addGeometryType(t,e){t.addFieldInt8(2,e,Frt.Unknown)}static addHasZ(t,e){t.addFieldInt8(3,Number(e),Number(!1))}static addHasM(t,e){t.addFieldInt8(4,Number(e),Number(!1))}static addHasT(t,e){t.addFieldInt8(5,Number(e),Number(!1))}static addHasTm(t,e){t.addFieldInt8(6,Number(e),Number(!1))}static addColumns(t,e){t.addFieldOffset(7,e,0)}static createColumnsVector(t,e){t.startVector(4,e.length,4);for(let n=e.length-1;n>=0;n--)t.addOffset(e[n]);return t.endVector()}static startColumnsVector(t,e){t.startVector(4,e,4)}static addFeaturesCount(t,e){t.addFieldInt64(8,e,BigInt("0"))}static addIndexNodeSize(t,e){t.addFieldInt16(9,e,16)}static addCrs(t,e){t.addFieldOffset(10,e,0)}static addTitle(t,e){t.addFieldOffset(11,e,0)}static addDescription(t,e){t.addFieldOffset(12,e,0)}static addMetadata(t,e){t.addFieldOffset(13,e,0)}static endHeader(t){return t.endObject()}static finishHeaderBuffer(t,e){t.finish(e)}static finishSizePrefixedHeaderBuffer(t,e){t.finish(e,void 0,!0)}}function cit(t){const e=lit.getRootAsHeader(t),n=e.featuresCount(),r=e.indexNodeSize(),i=[];for(let s=0;s<e.columnsLength();s++){const t=e.columns(s);if(!t)throw new Error("Column unexpectedly missing");if(!t.name())throw new Error("Column name unexpectedly missing");i.push({name:t.name(),type:t.type(),title:t.title(),description:t.description(),width:t.width(),precision:t.precision(),scale:t.scale(),nullable:t.nullable(),unique:t.unique(),primary_key:t.primaryKey()})}const o=e.crs(),a=o?{org:o.org(),code:o.code(),name:o.name(),description:o.description(),wkt:o.wkt(),code_string:o.codeString()}:null;return{geometryType:e.geometryType(),columns:i,envelope:null,featuresCount:Number(n),indexNodeSize:r,crs:a,title:e.title(),description:e.description(),metadata:e.metadata()}}var uit=function(t,e){return uit=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},uit(t,e)};function hit(t,e,n,r){return new(n||(n=Promise))((function(i,o){function a(t){try{l(r.next(t))}catch(pbt){o(pbt)}}function s(t){try{l(r.throw(t))}catch(pbt){o(pbt)}}function l(t){t.done?i(t.value):function(t){return t instanceof n?t:new n((function(e){e(t)}))}(t.value).then(a,s)}l((r=r.apply(t,e||[])).next())}))}function dit(t,e){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"===typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=(i=a.trys).length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=e.call(t,a)}catch(pbt){o=[6,pbt],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}}function fit(t){var e="function"===typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"===typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function pit(t){return this instanceof pit?(this.v=t,this):new pit(t)}function mit(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r,i=n.apply(t,e||[]),o=[];return r={},a("next"),a("throw"),a("return"),r[Symbol.asyncIterator]=function(){return this},r;function a(t){i[t]&&(r[t]=function(e){return new Promise((function(n,r){o.push([t,e,n,r])>1||s(t,e)}))})}function s(t,e){try{!function(t){t.value instanceof pit?Promise.resolve(t.value.v).then(l,c):u(o[0][2],t)}(i[t](e))}catch(pbt){u(o[0][3],pbt)}}function l(t){s("next",t)}function c(t){s("throw",t)}function u(t,e){t(e),o.shift(),o.length&&s(o[0][0],o[0][1])}}var git=function(t){function e(e){var n=t.call(this,e)||this;return Object.defineProperty(n,"name",{value:"RepeaterOverflowError",enumerable:!1}),"function"===typeof Object.setPrototypeOf?Object.setPrototypeOf(n,n.constructor.prototype):n.__proto__=n.constructor.prototype,"function"===typeof Error.captureStackTrace&&Error.captureStackTrace(n,n.constructor),n}return function(t,e){function n(){this.constructor=t}uit(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}(e,t),e}(Error);(function(){function t(t){if(t<0)throw new RangeError("Capacity may not be less than 0");this._c=t,this._q=[]}Object.defineProperty(t.prototype,"empty",{get:function(){return 0===this._q.length},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"full",{get:function(){return this._q.length>=this._c},enumerable:!1,configurable:!0}),t.prototype.add=function(t){if(this.full)throw new Error("Buffer full");this._q.push(t)},t.prototype.remove=function(){if(this.empty)throw new Error("Buffer empty");return this._q.shift()}})(),function(){function t(t){if(t<1)throw new RangeError("Capacity may not be less than 1");this._c=t,this._q=[]}Object.defineProperty(t.prototype,"empty",{get:function(){return 0===this._q.length},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"full",{get:function(){return!1},enumerable:!1,configurable:!0}),t.prototype.add=function(t){for(;this._q.length>=this._c;)this._q.shift();this._q.push(t)},t.prototype.remove=function(){if(this.empty)throw new Error("Buffer empty");return this._q.shift()}}(),function(){function t(t){if(t<1)throw new RangeError("Capacity may not be less than 1");this._c=t,this._q=[]}Object.defineProperty(t.prototype,"empty",{get:function(){return 0===this._q.length},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"full",{get:function(){return!1},enumerable:!1,configurable:!0}),t.prototype.add=function(t){this._q.length<this._c&&this._q.push(t)},t.prototype.remove=function(){if(this.empty)throw new Error("Buffer empty");return this._q.shift()}}();function yit(t){null!=t&&"function"===typeof t.then&&t.then(wit,wit)}var vit=2,_it=3,bit=4,xit=1024,wit=function(){};function Sit(t){var e=t.err,n=Promise.resolve(t.execution).then((function(t){if(null!=e)throw e;return t}));return t.err=void 0,t.execution=n.then((function(){}),(function(){})),void 0===t.pending?n:t.pending.then((function(){return n}))}function Eit(t,e){var n=t.state>=_it;return Promise.resolve(e).then((function(e){return!n&&t.state>=bit?Sit(t).then((function(t){return{value:t,done:!0}})):{value:e,done:n}}))}function Tit(t,e){var n,r;if(!(t.state>=vit))if(t.state=vit,t.onnext(),t.onstop(),null==t.err&&(t.err=e),0!==t.pushes.length||"undefined"!==typeof t.buffer&&!t.buffer.empty)try{for(var i=fit(t.pushes),o=i.next();!o.done;o=i.next()){o.value.resolve()}}catch(a){n={error:a}}finally{try{o&&!o.done&&(r=i.return)&&r.call(i)}finally{if(n)throw n.error}}else Mit(t)}function Mit(t){var e,n;if(!(t.state>=_it)){t.state<vit&&Tit(t),t.state=_it,t.buffer=void 0;try{for(var r=fit(t.nexts),i=r.next();!i.done;i=r.next()){var o=i.value,a=void 0===t.pending?Sit(t):t.pending.then((function(){return Sit(t)}));o.resolve(Eit(t,a))}}catch(s){e={error:s}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(e)throw e.error}}t.pushes=[],t.nexts=[]}}function Ait(t){t.state>=bit||(t.state<_it&&Mit(t),t.state=bit)}function Cit(t,e){if(yit(e),t.pushes.length>=xit)throw new git("No more than "+xit+" pending calls to push are allowed on a single repeater.");if(t.state>=vit)return Promise.resolve(void 0);var n,r=void 0===t.pending?Promise.resolve(e):t.pending.then((function(){return e}));(r=r.catch((function(e){t.state<vit&&(t.err=e),Ait(t)})),t.nexts.length)?(t.nexts.shift().resolve(Eit(t,r)),n=t.nexts.length?Promise.resolve(t.nexts[0].value):new Promise((function(e){return t.onnext=e}))):"undefined"===typeof t.buffer||t.buffer.full?n=new Promise((function(e){return t.pushes.push({resolve:e,value:r})})):(t.buffer.add(r),n=Promise.resolve(void 0));var i=!0,o={},a=n.catch((function(t){if(i)throw t}));return o.then=function(t,e){return i=!1,Promise.prototype.then.call(n,t,e)},o.catch=function(t){return i=!1,Promise.prototype.catch.call(n,t)},o.finally=n.finally.bind(n),t.pending=r.then((function(){return a})).catch((function(e){t.err=e,Ait(t)})),o}function Pit(t){if(!(t.state>=1)){t.state=1;var e=Cit.bind(null,t),n=function(t){var e=Tit.bind(null,t),n=new Promise((function(e){return t.onstop=e}));return e.then=n.then.bind(n),e.catch=n.catch.bind(n),e.finally=n.finally.bind(n),e}(t);t.execution=new Promise((function(r){return r(t.executor(e,n))})),t.execution.catch((function(){return Tit(t)}))}}var kit,Iit=new WeakMap,Oit=function(){function t(t,e){Iit.set(this,{executor:t,buffer:e,err:void 0,state:0,pushes:[],nexts:[],pending:void 0,execution:void 0,onnext:wit,onstop:wit})}return t.prototype.next=function(t){yit(t);var e=Iit.get(this);if(void 0===e)throw new Error("WeakMap error");if(e.nexts.length>=xit)throw new git("No more than "+xit+" pending calls to next are allowed on a single repeater.");if(e.state<=0&&Pit(e),e.onnext(t),"undefined"!==typeof e.buffer&&!e.buffer.empty){var n=Eit(e,e.buffer.remove());if(e.pushes.length){var r=e.pushes.shift();e.buffer.add(r.value),e.onnext=r.resolve}return n}if(e.pushes.length){var i=e.pushes.shift();return e.onnext=i.resolve,Eit(e,i.value)}return e.state>=vit?(Mit(e),Eit(e,Sit(e))):new Promise((function(n){return e.nexts.push({resolve:n,value:t})}))},t.prototype.return=function(t){yit(t);var e=Iit.get(this);if(void 0===e)throw new Error("WeakMap error");return Mit(e),e.execution=Promise.resolve(e.execution).then((function(){return t})),Eit(e,Sit(e))},t.prototype.throw=function(t){var e=Iit.get(this);if(void 0===e)throw new Error("WeakMap error");return e.state<=0||e.state>=vit||"undefined"!==typeof e.buffer&&!e.buffer.empty?(Mit(e),null==e.err&&(e.err=t),Eit(e,Sit(e))):this.next(Promise.reject(t))},t.prototype[Symbol.asyncIterator]=function(){return this},t.race=jit,t.merge=zit,t.zip=Rit,t.latest=Dit,t}();function Lit(t,e){var n,r,i=[],o=function(t){null!=t&&"function"===typeof t[Symbol.asyncIterator]?i.push(t[Symbol.asyncIterator]()):null!=t&&"function"===typeof t[Symbol.iterator]?i.push(t[Symbol.iterator]()):i.push(function(){return mit(this,arguments,(function(){return dit(this,(function(n){switch(n.label){case 0:return e.yieldValues?[4,pit(t)]:[3,3];case 1:return[4,n.sent()];case 2:n.sent(),n.label=3;case 3:return e.returnValues?[4,pit(t)]:[3,5];case 4:return[2,n.sent()];case 5:return[2]}}))}))}())};try{for(var a=fit(t),s=a.next();!s.done;s=a.next()){o(s.value)}}catch(l){n={error:l}}finally{try{s&&!s.done&&(r=a.return)&&r.call(a)}finally{if(n)throw n.error}}return i}function jit(t){var e=this,n=Lit(t,{returnValues:!0});return new Oit((function(t,r){return hit(e,void 0,void 0,(function(){var e,i,o,a,s,l;return dit(this,(function(c){switch(c.label){case 0:if(!n.length)return r(),[2];i=!1,r.then((function(){e(),i=!0})),c.label=1;case 1:c.trys.push([1,,5,7]),a=void 0,s=0,l=function(){var i,l,c,u,h,d;return dit(this,(function(f){switch(f.label){case 0:i=s;try{for(h=void 0,l=fit(n),c=l.next();!c.done;c=l.next())u=c.value,Promise.resolve(u.next()).then((function(t){t.done?(r(),void 0===o&&(o=t)):s===i&&(s++,e(t))}),(function(t){return r(t)}))}catch(p){h={error:p}}finally{try{c&&!c.done&&(d=l.return)&&d.call(l)}finally{if(h)throw h.error}}return[4,new Promise((function(t){return e=t}))];case 1:return void 0===(a=f.sent())?[3,3]:[4,t(a.value)];case 2:f.sent(),f.label=3;case 3:return[2]}}))},c.label=2;case 2:return i?[3,4]:[5,l()];case 3:return c.sent(),[3,2];case 4:return[2,o&&o.value];case 5:return r(),[4,Promise.race(n.map((function(t){return t.return&&t.return()})))];case 6:return c.sent(),[7];case 7:return[2]}}))}))}))}function zit(t){var e=this,n=Lit(t,{yieldValues:!0});return new Oit((function(t,r){return hit(e,void 0,void 0,(function(){var e,i,o,a=this;return dit(this,(function(s){switch(s.label){case 0:if(!n.length)return r(),[2];e=[],i=!1,r.then((function(){var t,n;i=!0;try{for(var r=fit(e),o=r.next();!o.done;o=r.next()){(0,o.value)()}}catch(a){t={error:a}}finally{try{o&&!o.done&&(n=r.return)&&n.call(r)}finally{if(t)throw t.error}}})),s.label=1;case 1:return s.trys.push([1,,3,4]),[4,Promise.all(n.map((function(n,s){return hit(a,void 0,void 0,(function(){var a;return dit(this,(function(l){switch(l.label){case 0:l.trys.push([0,,6,9]),l.label=1;case 1:return i?[3,5]:(Promise.resolve(n.next()).then((function(t){return e[s](t)}),(function(t){return r(t)})),[4,new Promise((function(t){e[s]=t}))]);case 2:return void 0===(a=l.sent())?[3,4]:a.done?(o=a,[2]):[4,t(a.value)];case 3:l.sent(),l.label=4;case 4:return[3,1];case 5:return[3,9];case 6:return n.return?[4,n.return()]:[3,8];case 7:l.sent(),l.label=8;case 8:return[7];case 9:return[2]}}))}))})))];case 2:return s.sent(),[2,o&&o.value];case 3:return r(),[7];case 4:return[2]}}))}))}))}function Rit(t){var e=this,n=Lit(t,{returnValues:!0});return new Oit((function(t,r){return hit(e,void 0,void 0,(function(){var e,i,o,a;return dit(this,(function(s){switch(s.label){case 0:if(!n.length)return r(),[2,[]];i=!1,r.then((function(){e(),i=!0})),s.label=1;case 1:s.trys.push([1,,6,8]),s.label=2;case 2:return i?[3,5]:(Promise.all(n.map((function(t){return t.next()}))).then((function(t){return e(t)}),(function(t){return r(t)})),[4,new Promise((function(t){return e=t}))]);case 3:return void 0===(o=s.sent())?[2]:(a=o.map((function(t){return t.value})),o.some((function(t){return t.done}))?[2,a]:[4,t(a)]);case 4:return s.sent(),[3,2];case 5:return[3,8];case 6:return r(),[4,Promise.all(n.map((function(t){return t.return&&t.return()})))];case 7:return s.sent(),[7];case 8:return[2]}}))}))}))}function Dit(t){var e=this,n=Lit(t,{yieldValues:!0,returnValues:!0});return new Oit((function(t,r){return hit(e,void 0,void 0,(function(){var e,i,o,a,s,l=this;return dit(this,(function(c){switch(c.label){case 0:if(!n.length)return r(),[2,[]];i=[],o=!1,r.then((function(){var t,n;e();try{for(var r=fit(i),a=r.next();!a.done;a=r.next()){(0,a.value)()}}catch(s){t={error:s}}finally{try{a&&!a.done&&(n=r.return)&&n.call(r)}finally{if(t)throw t.error}}o=!0})),c.label=1;case 1:return c.trys.push([1,,5,7]),Promise.all(n.map((function(t){return t.next()}))).then((function(t){return e(t)}),(function(t){return r(t)})),[4,new Promise((function(t){return e=t}))];case 2:return void 0===(a=c.sent())?[2]:(s=a.map((function(t){return t.value})),a.every((function(t){return t.done}))?[2,s]:[4,t(s.slice())]);case 3:return c.sent(),[4,Promise.all(n.map((function(e,n){return hit(l,void 0,void 0,(function(){var l;return dit(this,(function(c){switch(c.label){case 0:if(a[n].done)return[2,a[n].value];c.label=1;case 1:return o?[3,4]:(Promise.resolve(e.next()).then((function(t){return i[n](t)}),(function(t){return r(t)})),[4,new Promise((function(t){return i[n]=t}))]);case 2:return void 0===(l=c.sent())?[2,a[n].value]:l.done?[2,l.value]:(s[n]=l.value,[4,t(s.slice())]);case 3:return c.sent(),[3,1];case 4:return[2]}}))}))})))];case 4:return[2,c.sent()];case 5:return r(),[4,Promise.all(n.map((function(t){return t.return&&t.return()})))];case 6:return c.sent(),[7];case 7:return[2]}}))}))}))}class Bit{constructor(){ww(this,"_extraRequestThreshold",262144)}extraRequestThreshold(){return this._extraRequestThreshold}setExtraRequestThreshold(t){if(t<0)throw new Error("extraRequestThreshold cannot be negative");this._extraRequestThreshold=t}}ww(Bit,"global",new Bit),function(t){t[t.Debug=0]="Debug",t[t.Info=1]="Info",t[t.Warn=2]="Warn",t[t.Error=3]="Error"}(kit||(kit={}));class Fit{static debug(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];this.log(kit.Debug,...e)}static info(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];this.log(kit.Info,...e)}static warn(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];this.log(kit.Warn,...e)}static error(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];this.log(kit.Error,...e)}static log(t){if(!(this.logLevel>t)){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];switch(t){case kit.Debug:console.debug(...n);break;case kit.Info:console.info(...n);break;case kit.Warn:console.warn(...n);break;case kit.Error:console.error(...n)}}}}ww(Fit,"logLevel",kit.Warn);const Nit=40;function Uit(t,e){e=Math.min(Math.max(Number(e),2),65535);let n=t,r=n;do{n=Math.ceil(n/e),r+=n}while(1!==n);return r*Nit}async function*Vit(t,e,n,r){class i{constructor(t,e){ww(this,"_level",void 0),ww(this,"nodes",void 0),this._level=e,this.nodes=t}level(){return this._level}startNodeIdx(){return this.nodes[0]}endNodeIdx(){return this.nodes[1]}extendEndNodeIdx(t){console.assert(t>this.nodes[1]),this.nodes[1]=t}toString(){return"[NodeRange level: ".concat(this._level,", nodes: ").concat(this.nodes[0],"-").concat(this.nodes[1],"]")}}const{minX:o,minY:a,maxX:s,maxY:l}=n;Fit.info("tree items: ".concat(t,", nodeSize: ").concat(e));const c=function(t,e){if(e<2)throw new Error("Node size must be at least 2");if(0===t)throw new Error("Number of items must be greater than 0");let n=t,r=n;const i=[n];do{n=Math.ceil(n/e),r+=n,i.push(n)}while(1!==n);const o=[];n=r;for(const s of i)o.push(n-s),n-=s;const a=[];for(let s=0;s<i.length;s++)a.push([o[s],o[s]+i[s]]);return a}(t,e),u=c[0][0],h=[(()=>{const t=c.length-1;return new i([0,1],t)})()];for(Fit.debug("starting stream search with queue: ".concat(h,", numItems: ").concat(t,", nodeSize: ").concat(e,", levelBounds: ").concat(c));0!=h.length;){const n=h.shift();Fit.debug("popped node: ".concat(n,", queueLength: ").concat(h.length));const d=n.startNodeIdx(),f=d>=u,p=(()=>{const[,t]=c[n.level()],r=Math.min(n.endNodeIdx()+e,t);return f&&r<t?r+1:r})(),m=p-d,g=await r(d*Nit,m*Nit),y=new DataView(g);for(let e=d;e<p;e++){const r=e-d,c=r*Nit;if(s<y.getFloat64(c+0,!0))continue;if(l<y.getFloat64(c+8,!0))continue;if(o>y.getFloat64(c+16,!0))continue;if(a>y.getFloat64(c+24,!0))continue;const p=y.getBigUint64(c+32,!0);if(f){const n=p,i=(()=>{if(e<t-1){const t=(r+1)*Nit;return y.getBigUint64(t+32,!0)-n}return null})(),o=e-u;yield[Number(n),o,Number(i)];continue}const m=p,g=Bit.global.extraRequestThreshold()/Nit,v=h[h.length-1];if(void 0!==v&&v.level()==n.level()-1&&m<v.endNodeIdx()+g){Fit.debug('Merging "nodeRange" request into existing range: '.concat(v,", newEndNodeIdx: ").concat(v.endNodeIdx()," -> ").concat(m)),v.extendEndNodeIdx(Number(m));continue}const _=(()=>{const t=n.level()-1,e=[Number(m),Number(m)+1];return new i(e,t)})();void 0!==v&&v.level()==_.level()?Fit.info("Same level, but too far away. Pushing new request for nodeIdx: ".concat(m," rather than merging with distant ").concat(v)):Fit.info("Pushing new level for ".concat(_," onto queue with nearestNodeRange: ").concat(v," since there's not already a range for this level.")),h.push(_)}}}const Wit=new Uint8Array([102,103,98,3,102,103,98,0]),Git=4;class qit{constructor(t,e,n,r){ww(this,"headerClient",void 0),ww(this,"header",void 0),ww(this,"headerLength",void 0),ww(this,"indexLength",void 0),this.headerClient=t,this.header=e,this.headerLength=n,this.indexLength=r}static async open(t){const e=new Hit(t),n=(()=>{let t,e=0;for(t=0;t<3;t++){e+=16**t*Nit}return e})(),r=2024+n;Fit.debug("fetching header. minReqLength: ".concat(r," (assumedHeaderLength: ").concat(2024,", assumedIndexLength: ").concat(n,")"));{const t=new Uint8Array(await e.getRange(0,8,r,"header"));if(!t.subarray(0,3).every(((t,e)=>Wit[e]===t)))throw Fit.error("bytes: ".concat(t," != ").concat(Wit)),new Error("Not a FlatGeobuf file");Fit.debug("magic bytes look good")}let i;{const t=await e.getRange(8,4,r,"header");i=new DataView(t).getUint32(0,!0);if(i>10485760||i<8)throw new Error("Invalid header size");Fit.debug("headerLength: ".concat(i))}const o=await e.getRange(12,i,r,"header"),a=cit(new Krt(new Uint8Array(o))),s=Uit(a.featuresCount,a.indexNodeSize);return Fit.debug("completed: opening http reader"),new qit(e,a,i,s)}async*selectBbox(t){const e=this.lengthBeforeTree(),n=this.headerClient,r=async function(t,r){return n.getRange(e+t,r,0,"index")},i=[];let o=[];for await(const s of Vit(this.header.featuresCount,this.header.indexNodeSize,t,r)){const[t,,]=s;let[,,e]=s;if(e||(Fit.info("final feature"),e=4),0==o.length){o.push([t,e]);continue}const n=o[o.length-1],r=t-(n[0]+n[1]);r>Bit.global.extraRequestThreshold()&&(Fit.info("Pushing new feature batch, since gap ".concat(r," was too large")),i.push(o),o=[]),o.push([t,e])}this.headerClient.logUsage("header+index"),o.length>0&&i.push(o);const a=i.flatMap((t=>this.readFeatureBatch(t)));yield*Oit.merge(a)}lengthBeforeTree(){return Wit.length+Git+this.headerLength}lengthBeforeFeatures(){return this.lengthBeforeTree()+this.indexLength}buildFeatureClient(){return new Hit(this.headerClient.httpClient)}async*readFeatureBatch(t){const[e]=t[0],[n,r]=t[t.length-1],i=n+r-e,o=this.buildFeatureClient();let a=i;for(const[s]of t)yield await this.readFeature(o,s,a),a=0;o.logUsage("feature")}async readFeature(t,e,n){const r=e+this.lengthBeforeFeatures();let i;{const e=await t.getRange(r,4,n,"feature length");i=new DataView(e).getUint32(0,!0)}const o=await t.getRange(r+4,i,n,"feature data"),a=new Uint8Array(o),s=new Uint8Array(i+Git);s.set(a,Git);const l=new Krt(s);return l.setPosition(Git),ait.getRootAsFeature(l)}}class Hit{constructor(t){if(ww(this,"httpClient",void 0),ww(this,"bytesEverUsed",0),ww(this,"bytesEverFetched",0),ww(this,"buffer",new ArrayBuffer(0)),ww(this,"head",0),"string"===typeof t)this.httpClient=new Zit(t);else{if(!(t instanceof Zit))throw new Error("Unknown source ");this.httpClient=t}}async getRange(t,e,n,r){this.bytesEverUsed+=e;const i=t-this.head,o=i+e;if(i>=0&&o<=this.buffer.byteLength)return this.buffer.slice(i,o);const a=Math.max(e,n);return this.bytesEverFetched+=a,Fit.debug("requesting for new Range: ".concat(t,"-").concat(t+a-1)),this.buffer=await this.httpClient.getRange(t,a,r),this.head=t,this.buffer.slice(0,e)}logUsage(t){const e=t.split(" ")[0],n=this.bytesEverUsed,r=this.bytesEverFetched,i=(100*n/r).toFixed(2);Fit.info("".concat(e," bytes used/requested: ").concat(n," / ").concat(r," = ").concat(i,"%"))}}class Zit{constructor(t){ww(this,"url",void 0),ww(this,"requestsEverMade",0),ww(this,"bytesEverRequested",0),this.url=t}async getRange(t,e,n){this.requestsEverMade+=1,this.bytesEverRequested+=e;const r="bytes=".concat(t,"-").concat(t+e-1);Fit.info("request: #".concat(this.requestsEverMade,", purpose: ").concat(n,"), bytes: (this_request: ").concat(e,", ever: ").concat(this.bytesEverRequested,"), Range: ").concat(r));return(await fetch(this.url,{headers:{Range:r}})).arrayBuffer()}}function Xit(t,e,n){if(!t.subarray(0,3).every(((t,e)=>Wit[e]===t)))throw new Error("Not a FlatGeobuf file");const r=new Krt(t),i=r.readUint32(Wit.length);r.setPosition(Wit.length+Git);const o=cit(r);n&&n(o);let a=Wit.length+Git+i;const{indexNodeSize:s,featuresCount:l}=o;s>0&&(a+=Uit(l,s));const c=[];for(;a<r.capacity();){const t=r.readUint32(a);r.setPosition(a+Git);const n=ait.getRootAsFeature(r);c.push(e(n,o)),a+=Git+t}return c}async function*Yit(t,e,n){const r=nit(t),i=async t=>await r.slice(t);let o=new Uint8Array(await i(8));if(!o.subarray(0,3).every(((t,e)=>Wit[e]===t)))throw new Error("Not a FlatGeobuf file");o=new Uint8Array(await i(4));let a=new Krt(o);const s=a.readUint32(0);o=new Uint8Array(await i(s)),a=new Krt(o);const l=cit(a);n&&n(l);const{indexNodeSize:c,featuresCount:u}=l;if(c>0){const t=Uit(u,c);await i(t)}let h;for(;h=await $it(i,l,e);)yield h}async function*Kit(t,e,n,r){const i=await qit.open(t);Fit.debug("opened reader"),r&&r(i.header);for await(const o of i.selectBbox(e))yield n(o,i.header)}async function $it(t,e,n){let r=new Uint8Array(await t(4,"feature length"));if(0===r.byteLength)return;let i=new Krt(r);const o=i.readUint32(0);r=new Uint8Array(await t(o,"feature data"));const a=new Uint8Array(o+4);a.set(r,4),i=new Krt(a),i.setPosition(Git);return n(ait.getRootAsFeature(i),e)}const Jit=function(t,e,n){return t instanceof Uint8Array?function(t,e){return{type:"FeatureCollection",features:Xit(t,Qrt,e)}}(t,n):t instanceof ReadableStream?function(t,e){return Yit(t,Qrt,e)}(t,n):function(t,e,n){return Kit(t,e,Qrt,n)}(t,e,n)},Qit=function(t,e,n){return t instanceof Uint8Array?Xit(t,e):t instanceof ReadableStream?Yit(t,e):Kit(t,n,e)};function tot(t,e){const n=t.geometry(),r=e.geometryType||(null===n||void 0===n?void 0:n.type()),i=jrt(n,r);return i.properties=Jrt(t,e.columns),i}function eot(t,e){var n;const r=null===e||void 0===e||null===(n=e.flatgeobuf)||void 0===n?void 0:n.shape;switch(r){case"geojson-table":return function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(0===t.byteLength)return{shape:"geojson-table",type:"FeatureCollection",features:[]};const{reproject:n=!1,_targetCrs:r="WGS84"}=e&&e.gis||{},i=new Uint8Array(t);let o,a,{features:s}=Jit(i,void 0,(t=>{o=t,a=Drt(o)}));const l=o&&o.crs;let c;if(n&&l)try{c=new Irt({from:l.wkt,to:r})}catch(pbt){}c&&(s=Ort(s,(t=>c.project(t))));return{shape:"geojson-table",schema:a,type:"FeatureCollection",features:s}}(t,e);case"columnar-table":return{shape:"columnar-table",data:not(t,e)};case"binary":return not(t,e);default:throw new Error(r)}}function not(t){const e=new Uint8Array(t);return Qit(e,jrt)}const rot={...{dataType:null,batchType:null,id:"flatgeobuf",name:"FlatGeobuf",module:"flatgeobuf",version:"4.2.1",worker:!0,extensions:["fgb"],mimeTypes:["application/octet-stream"],category:"geometry",tests:[new Uint8Array([102,103,98,3,102,103,98,1]).buffer],options:{flatgeobuf:{shape:"geojson-table"},gis:{reproject:!1}}},parse:async(t,e)=>eot(t,e),parseSync:eot,parseInBatchesFromStream:function(t,e){var n;const r=null===(n=e.flatgeobuf)||void 0===n?void 0:n.shape;switch(r){case"binary":return function(t,e){const n=Qit(t,tot);return n}(t);case"geojson-table":return async function*(t,e){const{reproject:n=!1,_targetCrs:r="WGS84"}=e&&e.gis||{};let i;const o=Jit(t,void 0,(t=>{i=t}));let a,s=!0;for await(const l of o){if(s){const t=i&&i.crs;n&&t&&(a=new Irt({from:t.wkt,to:r})),s=!1}n&&a?yield Ort([l],(t=>a.project(t))):yield l}}(t,e);default:throw new Error(r)}},binary:!0};var iot,oot;!function(t){t[t.Byte=0]="Byte",t[t.UByte=1]="UByte",t[t.Bool=2]="Bool",t[t.Short=3]="Short",t[t.UShort=4]="UShort",t[t.Int=5]="Int",t[t.UInt=6]="UInt",t[t.Long=7]="Long",t[t.ULong=8]="ULong",t[t.Float=9]="Float",t[t.Double=10]="Double",t[t.String=11]="String",t[t.Json=12]="Json",t[t.DateTime=13]="DateTime",t[t.Binary=14]="Binary"}(iot||(iot={}));class aot{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsColumn(t,e){return(e||new aot).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsColumn(t,e){return t.setPosition(t.position()+4),(e||new aot).__init(t.readInt32(t.position())+t.position(),t)}name(t){const e=this.bb.__offset(this.bb_pos,4);return e?this.bb.__string(this.bb_pos+e,t):null}type(){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.readUint8(this.bb_pos+t):iot.Byte}title(t){const e=this.bb.__offset(this.bb_pos,8);return e?this.bb.__string(this.bb_pos+e,t):null}description(t){const e=this.bb.__offset(this.bb_pos,10);return e?this.bb.__string(this.bb_pos+e,t):null}width(){const t=this.bb.__offset(this.bb_pos,12);return t?this.bb.readInt32(this.bb_pos+t):-1}precision(){const t=this.bb.__offset(this.bb_pos,14);return t?this.bb.readInt32(this.bb_pos+t):-1}scale(){const t=this.bb.__offset(this.bb_pos,16);return t?this.bb.readInt32(this.bb_pos+t):-1}nullable(){const t=this.bb.__offset(this.bb_pos,18);return!t||!!this.bb.readInt8(this.bb_pos+t)}unique(){const t=this.bb.__offset(this.bb_pos,20);return!!t&&!!this.bb.readInt8(this.bb_pos+t)}primaryKey(){const t=this.bb.__offset(this.bb_pos,22);return!!t&&!!this.bb.readInt8(this.bb_pos+t)}metadata(t){const e=this.bb.__offset(this.bb_pos,24);return e?this.bb.__string(this.bb_pos+e,t):null}static startColumn(t){t.startObject(11)}static addName(t,e){t.addFieldOffset(0,e,0)}static addType(t,e){t.addFieldInt8(1,e,iot.Byte)}static addTitle(t,e){t.addFieldOffset(2,e,0)}static addDescription(t,e){t.addFieldOffset(3,e,0)}static addWidth(t,e){t.addFieldInt32(4,e,-1)}static addPrecision(t,e){t.addFieldInt32(5,e,-1)}static addScale(t,e){t.addFieldInt32(6,e,-1)}static addNullable(t,e){t.addFieldInt8(7,+e,1)}static addUnique(t,e){t.addFieldInt8(8,+e,0)}static addPrimaryKey(t,e){t.addFieldInt8(9,+e,0)}static addMetadata(t,e){t.addFieldOffset(10,e,0)}static endColumn(t){const e=t.endObject();return t.requiredField(e,4),e}static createColumn(t,e,n,r,i,o,a,s,l,c,u,h){return aot.startColumn(t),aot.addName(t,e),aot.addType(t,n),aot.addTitle(t,r),aot.addDescription(t,i),aot.addWidth(t,o),aot.addPrecision(t,a),aot.addScale(t,s),aot.addNullable(t,l),aot.addUnique(t,c),aot.addPrimaryKey(t,u),aot.addMetadata(t,h),aot.endColumn(t)}}class sot{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsCrs(t,e){return(e||new sot).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsCrs(t,e){return t.setPosition(t.position()+4),(e||new sot).__init(t.readInt32(t.position())+t.position(),t)}org(t){const e=this.bb.__offset(this.bb_pos,4);return e?this.bb.__string(this.bb_pos+e,t):null}code(){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.readInt32(this.bb_pos+t):0}name(t){const e=this.bb.__offset(this.bb_pos,8);return e?this.bb.__string(this.bb_pos+e,t):null}description(t){const e=this.bb.__offset(this.bb_pos,10);return e?this.bb.__string(this.bb_pos+e,t):null}wkt(t){const e=this.bb.__offset(this.bb_pos,12);return e?this.bb.__string(this.bb_pos+e,t):null}codeString(t){const e=this.bb.__offset(this.bb_pos,14);return e?this.bb.__string(this.bb_pos+e,t):null}static startCrs(t){t.startObject(6)}static addOrg(t,e){t.addFieldOffset(0,e,0)}static addCode(t,e){t.addFieldInt32(1,e,0)}static addName(t,e){t.addFieldOffset(2,e,0)}static addDescription(t,e){t.addFieldOffset(3,e,0)}static addWkt(t,e){t.addFieldOffset(4,e,0)}static addCodeString(t,e){t.addFieldOffset(5,e,0)}static endCrs(t){return t.endObject()}static createCrs(t,e,n,r,i,o,a){return sot.startCrs(t),sot.addOrg(t,e),sot.addCode(t,n),sot.addName(t,r),sot.addDescription(t,i),sot.addWkt(t,o),sot.addCodeString(t,a),sot.endCrs(t)}}!function(t){t[t.Unknown=0]="Unknown",t[t.Point=1]="Point",t[t.LineString=2]="LineString",t[t.Polygon=3]="Polygon",t[t.MultiPoint=4]="MultiPoint",t[t.MultiLineString=5]="MultiLineString",t[t.MultiPolygon=6]="MultiPolygon",t[t.GeometryCollection=7]="GeometryCollection",t[t.CircularString=8]="CircularString",t[t.CompoundCurve=9]="CompoundCurve",t[t.CurvePolygon=10]="CurvePolygon",t[t.MultiCurve=11]="MultiCurve",t[t.MultiSurface=12]="MultiSurface",t[t.Curve=13]="Curve",t[t.Surface=14]="Surface",t[t.PolyhedralSurface=15]="PolyhedralSurface",t[t.TIN=16]="TIN",t[t.Triangle=17]="Triangle"}(oot||(oot={}));class lot{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsHeader(t,e){return(e||new lot).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsHeader(t,e){return t.setPosition(t.position()+4),(e||new lot).__init(t.readInt32(t.position())+t.position(),t)}name(t){const e=this.bb.__offset(this.bb_pos,4);return e?this.bb.__string(this.bb_pos+e,t):null}envelope(t){const e=this.bb.__offset(this.bb_pos,6);return e?this.bb.readFloat64(this.bb.__vector(this.bb_pos+e)+8*t):0}envelopeLength(){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.__vector_len(this.bb_pos+t):0}envelopeArray(){const t=this.bb.__offset(this.bb_pos,6);return t?new Float64Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+t),this.bb.__vector_len(this.bb_pos+t)):null}geometryType(){const t=this.bb.__offset(this.bb_pos,8);return t?this.bb.readUint8(this.bb_pos+t):oot.Unknown}hasZ(){const t=this.bb.__offset(this.bb_pos,10);return!!t&&!!this.bb.readInt8(this.bb_pos+t)}hasM(){const t=this.bb.__offset(this.bb_pos,12);return!!t&&!!this.bb.readInt8(this.bb_pos+t)}hasT(){const t=this.bb.__offset(this.bb_pos,14);return!!t&&!!this.bb.readInt8(this.bb_pos+t)}hasTm(){const t=this.bb.__offset(this.bb_pos,16);return!!t&&!!this.bb.readInt8(this.bb_pos+t)}columns(t,e){const n=this.bb.__offset(this.bb_pos,18);return n?(e||new aot).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+n)+4*t),this.bb):null}columnsLength(){const t=this.bb.__offset(this.bb_pos,18);return t?this.bb.__vector_len(this.bb_pos+t):0}featuresCount(){const t=this.bb.__offset(this.bb_pos,20);return t?this.bb.readUint64(this.bb_pos+t):BigInt("0")}indexNodeSize(){const t=this.bb.__offset(this.bb_pos,22);return t?this.bb.readUint16(this.bb_pos+t):16}crs(t){const e=this.bb.__offset(this.bb_pos,24);return e?(t||new sot).__init(this.bb.__indirect(this.bb_pos+e),this.bb):null}title(t){const e=this.bb.__offset(this.bb_pos,26);return e?this.bb.__string(this.bb_pos+e,t):null}description(t){const e=this.bb.__offset(this.bb_pos,28);return e?this.bb.__string(this.bb_pos+e,t):null}metadata(t){const e=this.bb.__offset(this.bb_pos,30);return e?this.bb.__string(this.bb_pos+e,t):null}static startHeader(t){t.startObject(14)}static addName(t,e){t.addFieldOffset(0,e,0)}static addEnvelope(t,e){t.addFieldOffset(1,e,0)}static createEnvelopeVector(t,e){t.startVector(8,e.length,8);for(let n=e.length-1;n>=0;n--)t.addFloat64(e[n]);return t.endVector()}static startEnvelopeVector(t,e){t.startVector(8,e,8)}static addGeometryType(t,e){t.addFieldInt8(2,e,oot.Unknown)}static addHasZ(t,e){t.addFieldInt8(3,+e,0)}static addHasM(t,e){t.addFieldInt8(4,+e,0)}static addHasT(t,e){t.addFieldInt8(5,+e,0)}static addHasTm(t,e){t.addFieldInt8(6,+e,0)}static addColumns(t,e){t.addFieldOffset(7,e,0)}static createColumnsVector(t,e){t.startVector(4,e.length,4);for(let n=e.length-1;n>=0;n--)t.addOffset(e[n]);return t.endVector()}static startColumnsVector(t,e){t.startVector(4,e,4)}static addFeaturesCount(t,e){t.addFieldInt64(8,e,BigInt("0"))}static addIndexNodeSize(t,e){t.addFieldInt16(9,e,16)}static addCrs(t,e){t.addFieldOffset(10,e,0)}static addTitle(t,e){t.addFieldOffset(11,e,0)}static addDescription(t,e){t.addFieldOffset(12,e,0)}static addMetadata(t,e){t.addFieldOffset(13,e,0)}static endHeader(t){return t.endObject()}static finishHeaderBuffer(t,e){t.finish(e)}static finishSizePrefixedHeaderBuffer(t,e){t.finish(e,void 0,!0)}}class cot{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsGeometry(t,e){return(e||new cot).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsGeometry(t,e){return t.setPosition(t.position()+4),(e||new cot).__init(t.readInt32(t.position())+t.position(),t)}ends(t){const e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readUint32(this.bb.__vector(this.bb_pos+e)+4*t):0}endsLength(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.__vector_len(this.bb_pos+t):0}endsArray(){const t=this.bb.__offset(this.bb_pos,4);return t?new Uint32Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+t),this.bb.__vector_len(this.bb_pos+t)):null}xy(t){const e=this.bb.__offset(this.bb_pos,6);return e?this.bb.readFloat64(this.bb.__vector(this.bb_pos+e)+8*t):0}xyLength(){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.__vector_len(this.bb_pos+t):0}xyArray(){const t=this.bb.__offset(this.bb_pos,6);return t?new Float64Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+t),this.bb.__vector_len(this.bb_pos+t)):null}z(t){const e=this.bb.__offset(this.bb_pos,8);return e?this.bb.readFloat64(this.bb.__vector(this.bb_pos+e)+8*t):0}zLength(){const t=this.bb.__offset(this.bb_pos,8);return t?this.bb.__vector_len(this.bb_pos+t):0}zArray(){const t=this.bb.__offset(this.bb_pos,8);return t?new Float64Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+t),this.bb.__vector_len(this.bb_pos+t)):null}m(t){const e=this.bb.__offset(this.bb_pos,10);return e?this.bb.readFloat64(this.bb.__vector(this.bb_pos+e)+8*t):0}mLength(){const t=this.bb.__offset(this.bb_pos,10);return t?this.bb.__vector_len(this.bb_pos+t):0}mArray(){const t=this.bb.__offset(this.bb_pos,10);return t?new Float64Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+t),this.bb.__vector_len(this.bb_pos+t)):null}t(t){const e=this.bb.__offset(this.bb_pos,12);return e?this.bb.readFloat64(this.bb.__vector(this.bb_pos+e)+8*t):0}tLength(){const t=this.bb.__offset(this.bb_pos,12);return t?this.bb.__vector_len(this.bb_pos+t):0}tArray(){const t=this.bb.__offset(this.bb_pos,12);return t?new Float64Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+t),this.bb.__vector_len(this.bb_pos+t)):null}tm(t){const e=this.bb.__offset(this.bb_pos,14);return e?this.bb.readUint64(this.bb.__vector(this.bb_pos+e)+8*t):BigInt(0)}tmLength(){const t=this.bb.__offset(this.bb_pos,14);return t?this.bb.__vector_len(this.bb_pos+t):0}type(){const t=this.bb.__offset(this.bb_pos,16);return t?this.bb.readUint8(this.bb_pos+t):oot.Unknown}parts(t,e){const n=this.bb.__offset(this.bb_pos,18);return n?(e||new cot).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+n)+4*t),this.bb):null}partsLength(){const t=this.bb.__offset(this.bb_pos,18);return t?this.bb.__vector_len(this.bb_pos+t):0}static startGeometry(t){t.startObject(8)}static addEnds(t,e){t.addFieldOffset(0,e,0)}static createEndsVector(t,e){t.startVector(4,e.length,4);for(let n=e.length-1;n>=0;n--)t.addInt32(e[n]);return t.endVector()}static startEndsVector(t,e){t.startVector(4,e,4)}static addXy(t,e){t.addFieldOffset(1,e,0)}static createXyVector(t,e){t.startVector(8,e.length,8);for(let n=e.length-1;n>=0;n--)t.addFloat64(e[n]);return t.endVector()}static startXyVector(t,e){t.startVector(8,e,8)}static addZ(t,e){t.addFieldOffset(2,e,0)}static createZVector(t,e){t.startVector(8,e.length,8);for(let n=e.length-1;n>=0;n--)t.addFloat64(e[n]);return t.endVector()}static startZVector(t,e){t.startVector(8,e,8)}static addM(t,e){t.addFieldOffset(3,e,0)}static createMVector(t,e){t.startVector(8,e.length,8);for(let n=e.length-1;n>=0;n--)t.addFloat64(e[n]);return t.endVector()}static startMVector(t,e){t.startVector(8,e,8)}static addT(t,e){t.addFieldOffset(4,e,0)}static createTVector(t,e){t.startVector(8,e.length,8);for(let n=e.length-1;n>=0;n--)t.addFloat64(e[n]);return t.endVector()}static startTVector(t,e){t.startVector(8,e,8)}static addTm(t,e){t.addFieldOffset(5,e,0)}static createTmVector(t,e){t.startVector(8,e.length,8);for(let n=e.length-1;n>=0;n--)t.addInt64(e[n]);return t.endVector()}static startTmVector(t,e){t.startVector(8,e,8)}static addType(t,e){t.addFieldInt8(6,e,oot.Unknown)}static addParts(t,e){t.addFieldOffset(7,e,0)}static createPartsVector(t,e){t.startVector(4,e.length,4);for(let n=e.length-1;n>=0;n--)t.addOffset(e[n]);return t.endVector()}static startPartsVector(t,e){t.startVector(4,e,4)}static endGeometry(t){return t.endObject()}static createGeometry(t,e,n,r,i,o,a,s,l){return cot.startGeometry(t),cot.addEnds(t,e),cot.addXy(t,n),cot.addZ(t,r),cot.addM(t,i),cot.addT(t,o),cot.addTm(t,a),cot.addType(t,s),cot.addParts(t,l),cot.endGeometry(t)}}class uot{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsFeature(t,e){return(e||new uot).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsFeature(t,e){return t.setPosition(t.position()+4),(e||new uot).__init(t.readInt32(t.position())+t.position(),t)}geometry(t){const e=this.bb.__offset(this.bb_pos,4);return e?(t||new cot).__init(this.bb.__indirect(this.bb_pos+e),this.bb):null}properties(t){const e=this.bb.__offset(this.bb_pos,6);return e?this.bb.readUint8(this.bb.__vector(this.bb_pos+e)+t):0}propertiesLength(){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.__vector_len(this.bb_pos+t):0}propertiesArray(){const t=this.bb.__offset(this.bb_pos,6);return t?new Uint8Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+t),this.bb.__vector_len(this.bb_pos+t)):null}columns(t,e){const n=this.bb.__offset(this.bb_pos,8);return n?(e||new aot).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+n)+4*t),this.bb):null}columnsLength(){const t=this.bb.__offset(this.bb_pos,8);return t?this.bb.__vector_len(this.bb_pos+t):0}static startFeature(t){t.startObject(3)}static addGeometry(t,e){t.addFieldOffset(0,e,0)}static addProperties(t,e){t.addFieldOffset(1,e,0)}static createPropertiesVector(t,e){t.startVector(1,e.length,1);for(let n=e.length-1;n>=0;n--)t.addInt8(e[n]);return t.endVector()}static startPropertiesVector(t,e){t.startVector(1,e,1)}static addColumns(t,e){t.addFieldOffset(2,e,0)}static createColumnsVector(t,e){t.startVector(4,e.length,4);for(let n=e.length-1;n>=0;n--)t.addOffset(e[n]);return t.endVector()}static startColumnsVector(t,e){t.startVector(4,e,4)}static endFeature(t){return t.endObject()}static finishFeatureBuffer(t,e){t.finish(e)}static finishSizePrefixedFeatureBuffer(t,e){t.finish(e,void 0,!0)}static createFeature(t,e,n,r){return uot.startFeature(t),uot.addGeometry(t,e),uot.addProperties(t,n),uot.addColumns(t,r),uot.endFeature(t)}}function hot(t){const e=lot.getRootAsHeader(t),n=e.featuresCount(),r=e.indexNodeSize(),i=[];for(let s=0;s<e.columnsLength();s++){const t=e.columns(s);if(!t)throw new Error("Column unexpectedly missing");if(!t.name())throw new Error("Column name unexpectedly missing");i.push({name:t.name(),type:t.type(),title:t.title(),description:t.description(),width:t.width(),precision:t.precision(),scale:t.scale(),nullable:t.nullable(),unique:t.unique(),primary_key:t.primaryKey()})}const o=e.crs(),a=o?{org:o.org(),code:o.code(),name:o.name(),description:o.description(),wkt:o.wkt(),code_string:o.codeString()}:null;return{geometryType:e.geometryType(),columns:i,envelope:null,featuresCount:Number(n),indexNodeSize:r,crs:a,title:e.title(),description:e.description(),metadata:e.metadata()}}function dot(t,e){const n=[];for(let r=0;r<t.length;r+=2){const i=[t[r],t[r+1]];e&&i.push(e[r>>1]),n.push(i)}return n}new TextEncoder;const fot=new TextDecoder;function pot(t,e){const n={};if(!e||0===e.length)return n;const r=t.propertiesArray();if(!r)return n;const i=new DataView(r.buffer,r.byteOffset),o=t.propertiesLength();let a=0;for(;a<o;){const t=i.getUint16(a,!0);a+=2;const o=e[t],s=o.name;switch(o.type){case iot.Bool:n[s]=!!i.getUint8(a),a+=1;break;case iot.Byte:n[s]=i.getInt8(a),a+=1;break;case iot.UByte:n[s]=i.getUint8(a),a+=1;break;case iot.Short:n[s]=i.getInt16(a,!0),a+=2;break;case iot.UShort:n[s]=i.getUint16(a,!0),a+=2;break;case iot.Int:n[s]=i.getInt32(a,!0),a+=4;break;case iot.UInt:n[s]=i.getUint32(a,!0),a+=4;break;case iot.Long:n[s]=Number(i.getBigInt64(a,!0)),a+=8;break;case iot.ULong:n[s]=Number(i.getBigUint64(a,!0)),a+=8;break;case iot.Float:n[s]=i.getFloat32(a,!0),a+=4;break;case iot.Double:n[s]=i.getFloat64(a,!0),a+=8;break;case iot.DateTime:case iot.String:{const t=i.getUint32(a,!0);a+=4,n[s]=fot.decode(r.subarray(a,a+t)),a+=t;break}case iot.Json:{const t=i.getUint32(a,!0);a+=4;const e=fot.decode(r.subarray(a,a+t));n[s]=JSON.parse(e),a+=t;break}default:throw new Error("Unknown type "+o.type)}}return n}class mot{constructor(){this._extraRequestThreshold=262144}extraRequestThreshold(){return this._extraRequestThreshold}setExtraRequestThreshold(t){if(t<0)throw new Error("extraRequestThreshold cannot be negative");this._extraRequestThreshold=t}}mot.global=new mot;const got=mot;var yot;!function(t){t[t.Debug=0]="Debug",t[t.Info=1]="Info",t[t.Warn=2]="Warn",t[t.Error=3]="Error"}(yot||(yot={}));class vot{static debug(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];this.log(yot.Debug,...e)}static info(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];this.log(yot.Info,...e)}static warn(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];this.log(yot.Warn,...e)}static error(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];this.log(yot.Error,...e)}static log(t){if(!(this.logLevel>t)){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];switch(t){case yot.Debug:console.debug(...n);break;case yot.Info:console.info(...n);break;case yot.Warn:console.warn(...n);break;case yot.Error:console.error(...n)}}}}vot.logLevel=yot.Warn;const _ot=vot,bot=40;function xot(t,e){e=Math.min(Math.max(+e,2),65535);let n=t,r=n;do{n=Math.ceil(n/e),r+=n}while(1!==n);return r*bot}async function*wot(t,e,n,r){class i{constructor(t,e){this._level=e,this.nodes=t}level(){return this._level}startNodeIdx(){return this.nodes[0]}endNodeIdx(){return this.nodes[1]}extendEndNodeIdx(t){console.assert(t>this.nodes[1]),this.nodes[1]=t}toString(){return"[NodeRange level: ".concat(this._level,", nodes: ").concat(this.nodes[0],"-").concat(this.nodes[1],"]")}}const{minX:o,minY:a,maxX:s,maxY:l}=n;_ot.info("tree items: ".concat(t,", nodeSize: ").concat(e));const c=function(t,e){if(e<2)throw new Error("Node size must be at least 2");if(0===t)throw new Error("Number of items must be greater than 0");let n=t,r=n;const i=[n];do{n=Math.ceil(n/e),r+=n,i.push(n)}while(1!==n);const o=[];n=r;for(const s of i)o.push(n-s),n-=s;const a=[];for(let s=0;s<i.length;s++)a.push([o[s],o[s]+i[s]]);return a}(t,e),u=c[0][0],h=[(()=>{const t=c.length-1;return new i([0,1],t)})()];for(_ot.debug("starting stream search with queue: ".concat(h,", numItems: ").concat(t,", nodeSize: ").concat(e,", levelBounds: ").concat(c));0!=h.length;){const n=h.shift();_ot.debug("popped node: ".concat(n,", queueLength: ").concat(h.length));const d=n.startNodeIdx(),f=d>=u,p=(()=>{const[,t]=c[n.level()],r=Math.min(n.endNodeIdx()+e,t);return f&&r<t?r+1:r})(),m=p-d,g=await r(d*bot,m*bot),y=new DataView(g);for(let e=d;e<p;e++){const r=e-d,c=r*bot;if(s<y.getFloat64(c+0,!0))continue;if(l<y.getFloat64(c+8,!0))continue;if(o>y.getFloat64(c+16,!0))continue;if(a>y.getFloat64(c+24,!0))continue;const p=y.getBigUint64(c+32,!0);if(f){const n=p,i=(()=>{if(e<t-1){const t=(r+1)*bot;return y.getBigUint64(t+32,!0)-n}return null})(),o=e-u;yield[Number(n),o,Number(i)];continue}const m=p,g=got.global.extraRequestThreshold()/bot,v=h[h.length-1];if(void 0!==v&&v.level()==n.level()-1&&m<v.endNodeIdx()+g){_ot.debug('Merging "nodeRange" request into existing range: '.concat(v,", newEndNodeIdx: ").concat(v.endNodeIdx()," -> ").concat(m)),v.extendEndNodeIdx(Number(m));continue}const _=(()=>{const t=n.level()-1,e=[Number(m),Number(m)+1];return new i(e,t)})();void 0!==v&&v.level()==_.level()?_ot.info("Same level, but too far away. Pushing new request for nodeIdx: ".concat(m," rather than merging with distant ").concat(v)):_ot.info("Pushing new level for ".concat(_," onto queue with nearestNodeRange: ").concat(v," since there's not already a range for this level.")),h.push(_)}}}const Sot=new Uint8Array([102,103,98,3,102,103,98,0]),Eot=4;class Tot{constructor(t,e,n,r,i){this.headerClient=t,this.header=e,this.headerLength=n,this.indexLength=r,this.nocache=i}static async open(t,e){const n=new Mot(t,e),r=(()=>{let t,e=0;for(t=0;t<3;t++){e+=16**t*bot}return e})(),i=2024+r;_ot.debug("fetching header. minReqLength: ".concat(i," (assumedHeaderLength: ").concat(2024,", assumedIndexLength: ").concat(r,")"));{const t=new Uint8Array(await n.getRange(0,8,i,"header"));if(!t.subarray(0,3).every(((t,e)=>Sot[e]===t)))throw _ot.error("bytes: ".concat(t," != ").concat(Sot)),new Error("Not a FlatGeobuf file");_ot.debug("magic bytes look good")}let o;{const t=await n.getRange(8,4,i,"header");o=new DataView(t).getUint32(0,!0);if(o>10485760||o<8)throw new Error("Invalid header size");_ot.debug("headerLength: ".concat(o))}const a=await n.getRange(12,o,i,"header"),s=hot(new Krt(new Uint8Array(a))),l=xot(s.featuresCount,s.indexNodeSize);return _ot.debug("completed: opening http reader"),new Tot(n,s,o,l,e)}async*selectBbox(t){const e=this.lengthBeforeTree(),n=this.headerClient,r=async function(t,r){return n.getRange(e+t,r,0,"index")},i=[];let o=[];for await(const s of wot(this.header.featuresCount,this.header.indexNodeSize,t,r)){const[t,,]=s;let[,,e]=s;if(e||(_ot.info("final feature"),e=4),0==o.length){o.push([t,e]);continue}const n=o[o.length-1],r=t-(n[0]+n[1]);r>got.global.extraRequestThreshold()&&(_ot.info("Pushing new feature batch, since gap ".concat(r," was too large")),i.push(o),o=[]),o.push([t,e])}this.headerClient.logUsage("header+index"),o.length>0&&i.push(o);const a=i.flatMap((t=>this.readFeatureBatch(t,this.nocache)));yield*Oit.merge(a)}lengthBeforeTree(){return Sot.length+Eot+this.headerLength}lengthBeforeFeatures(){return this.lengthBeforeTree()+this.indexLength}buildFeatureClient(t){return new Mot(this.headerClient.httpClient,t)}async*readFeatureBatch(t,e){const[n]=t[0],[r,i]=t[t.length-1],o=r+i-n,a=this.buildFeatureClient(e);let s=o;for(const[l]of t)yield await this.readFeature(a,l,s),s=0;a.logUsage("feature")}async readFeature(t,e,n){const r=e+this.lengthBeforeFeatures();let i;{const e=await t.getRange(r,4,n,"feature length");i=new DataView(e).getUint32(0,!0)}const o=await t.getRange(r+4,i,n,"feature data"),a=new Uint8Array(o),s=new Uint8Array(i+Eot);s.set(a,Eot);const l=new Krt(s);return l.setPosition(Eot),uot.getRootAsFeature(l)}}class Mot{constructor(t,e){if(this.bytesEverUsed=0,this.bytesEverFetched=0,this.buffer=new ArrayBuffer(0),this.head=0,"string"===typeof t)this.httpClient=new Aot(t,e);else{if(!(t instanceof Aot))throw new Error("Unknown source ");this.httpClient=t}}async getRange(t,e,n,r){this.bytesEverUsed+=e;const i=t-this.head,o=i+e;if(i>=0&&o<=this.buffer.byteLength)return this.buffer.slice(i,o);const a=Math.max(e,n);return this.bytesEverFetched+=a,_ot.debug("requesting for new Range: ".concat(t,"-").concat(t+a-1)),this.buffer=await this.httpClient.getRange(t,a,r),this.head=t,this.buffer.slice(0,e)}logUsage(t){const e=t.split(" ")[0],n=this.bytesEverUsed,r=this.bytesEverFetched,i=(100*n/r).toFixed(2);_ot.info("".concat(e," bytes used/requested: ").concat(n," / ").concat(r," = ").concat(i,"%"))}}class Aot{constructor(t,e){this.requestsEverMade=0,this.bytesEverRequested=0,this.url=t,this.nocache=e}async getRange(t,e,n){this.requestsEverMade+=1,this.bytesEverRequested+=e;const r="bytes=".concat(t,"-").concat(t+e-1);_ot.info("request: #".concat(this.requestsEverMade,", purpose: ").concat(n,"), bytes: (this_request: ").concat(e,", ever: ").concat(this.bytesEverRequested,"), Range: ").concat(r));const i={Range:r};this.nocache&&(i["Cache-Control"]="no-cache, no-store");return(await fetch(this.url,{headers:i})).arrayBuffer()}}async function Cot(t,e,n){let r=new Uint8Array(await t(4,"feature length"));if(0===r.byteLength)return;let i=new Krt(r);const o=i.readUint32(0);r=new Uint8Array(await t(o,"feature data"));const a=new Uint8Array(o+4);a.set(r,4),i=new Krt(a),i.setPosition(Eot);return n(uot.getRootAsFeature(i),e)}function Pot(t,e,n){if(!n||0===n.length)return[dot(t,e)];let r=0;const i=Array.from(n).map((e=>t.slice(r,r=e<<1)));let o;return e&&(r=0,o=Array.from(n).map((t=>e.slice(r,r=t)))),i.map(((t,e)=>dot(t,o?o[e]:void 0)))}function kot(t,e){let n=e;if(n===oot.Unknown&&(n=t.type()),n===oot.GeometryCollection){const e=[];for(let n=0;n<t.partsLength();n++){const r=t.parts(n),i=r.type();e.push(kot(r,i))}return{type:oot[n],geometries:e}}if(n===oot.MultiPolygon){const e=[];for(let n=0;n<t.partsLength();n++)e.push(kot(t.parts(n),oot.Polygon));return{type:oot[n],coordinates:e.map((t=>t.coordinates))}}const r=function(t,e){const n=t.xyArray(),r=t.zArray();switch(e){case oot.Point:{const t=Array.from(n);return r&&t.push(r[0]),t}case oot.MultiPoint:case oot.LineString:return dot(n,r);case oot.MultiLineString:case oot.Polygon:return Pot(n,r,t.endsArray())}}(t,n);return{type:oot[n],coordinates:r}}function Iot(t,e){const n=e.columns;return{type:"Feature",geometry:kot(t.geometry(),e.geometryType),properties:pot(t,n)}}function Oot(t,e){const n=function(t,e,n){if(!t.subarray(0,3).every(((t,e)=>Sot[e]===t)))throw new Error("Not a FlatGeobuf file");const r=new Krt(t),i=r.readUint32(Sot.length);r.setPosition(Sot.length+Eot);const o=hot(r);n&&n(o);let a=Sot.length+Eot+i;const{indexNodeSize:s,featuresCount:l}=o;s>0&&(a+=xot(l,s));const c=[];for(;a<r.capacity();){const t=r.readUint32(a);r.setPosition(a+Eot);const n=uot.getRootAsFeature(r);c.push(e(n,o)),a+=Eot+t}return c}(t,Iot,e);return{type:"FeatureCollection",features:n}}function Lot(t,e){return async function*(t,e,n){const r=nit(t),i=async t=>await r.slice(t);let o=new Uint8Array(await i(8));if(!o.subarray(0,3).every(((t,e)=>Sot[e]===t)))throw new Error("Not a FlatGeobuf file");o=new Uint8Array(await i(4));let a=new Krt(o);const s=a.readUint32(0);o=new Uint8Array(await i(s)),a=new Krt(o);const l=hot(a);n&&n(l);const{indexNodeSize:c,featuresCount:u}=l;if(c>0){const t=xot(u,c);await i(t)}let h;for(;h=await Cot(i,l,e);)yield h}(t,Iot,e)}function jot(t,e,n){return function(t,e,n,r){try{let i=arguments.length>4&&void 0!==arguments[4]&&arguments[4];return async function*(){const o=await Tot.open(t,i);_ot.debug("opened reader"),r&&r(o.header);for await(const t of o.selectBbox(e))yield n(t,o.header)}()}catch(pbt){return Promise.reject(pbt)}}(t,e,Iot,n,arguments.length>3&&void 0!==arguments[3]&&arguments[3])}function zot(t,e,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;const i=ay(s_().domain(e).range(n).interpolate(Ey)(t));return i.opacity=r,[i.r,i.g,i.b,255*i.opacity]}const Rot=(t,e)=>{const n=Math.min(...t.map((t=>t[e]))),r=Math.max(...t.map((t=>t[e])));return t=>(t[e]-n)/(r-n)},Dot=function(t,e){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r=Rot(t.map((t=>t.properties)),e);return t.filter((t=>0!==t[e])).map((t=>({...t,properties:{...t.properties,normalized:n?1-r(t.properties):r(t.properties)}})))},Bot=function(t,e,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=arguments.length>4?arguments[4]:void 0;if(!t||!t.features||!Array.isArray(t.features))return[];const o=Rot(t.features.map((t=>t.properties)),n);return t.features.filter((t=>0!==t[n]&&parseInt(t.properties[i])===e)).map((t=>({...t,properties:{...t.properties,normalized:r?1-o(t.properties):o(t.properties)}})))},Fot="https://sium.blob.core.windows.net/sium/datos",Not="".concat(Fot,"/mancha_urbana.geojson"),Uot="".concat(Fot,"/div-municipal.geojson"),Vot="".concat(Fot,"/agebs-pob.geojson"),Wot="".concat(Fot,"/expansion_municipality.json"),Got="".concat(Fot,"/pob-built.json"),qot="".concat(Fot,"/empleo_hex_2023.geojson"),Hot="".concat(Fot,"/empleo_municipality_2023.json"),Zot="".concat(Fot,"/transporte_municipality.json"),Xot="".concat(Fot,"/transporte.geojson"),Yot="".concat(Fot,"/transporte-masivo.geojson"),Kot="".concat(Fot,"/vias-primarias.geojson"),$ot="".concat(Fot,"/infraestructura_ciclista.geojson"),Jot="".concat(Fot,"/vivienda_hex2.geojson"),Qot="".concat(Fot,"/vivienda_municipality.json"),tat="".concat(Fot,"/income2.geojson"),eat="".concat(Fot,"/asentamientos_informales.geojson"),nat="".concat(Fot,"/income_municipality.json"),rat="".concat(Fot,"/crimen_hex2.geojson"),iat="".concat(Fot,"/crimen_municipality.json"),oat=("".concat(Fot,"/crimen-hex.geojson"),"".concat(Fot,"/costos_municipality.json"),"".concat(Fot,"/pob_infancia.fgb")),aat="".concat(Fot,"/pob_infancia_municipality.json"),sat="".concat(Fot,"/parques.fgb"),lat="".concat(Fot,"/parques.geojson"),cat="".concat(Fot,"/denue_infancia.fgb"),uat="".concat(Fot,"/islas_calor.geojson"),hat="".concat(Fot,"/heat_island_municipality.json"),dat="".concat(Fot,"/industria.geojson");new X7;function fat(){const{innerWidth:t,innerHeight:e}=window;return{width:t,height:e,ratio:t/e}}function pat(){const[t,e]=(0,r.useState)(fat(window));return(0,r.useEffect)((()=>{function t(){e(fat(window))}return window.addEventListener("resize",t),()=>window.removeEventListener("resize",t)}),[]),t}function mat(t,e,n){arguments.length<3&&(n=.5);for(var r=t.slice(),i=0;i<3;i++)r[i]=Math.round(r[i]+n*(e[i]-t[i]));return r}function gat(t){return[parseInt(t.slice(1,3),16),parseInt(t.slice(3,5),16),parseInt(t.slice(5,7),16)]}function yat(t){return"#"+t.map((t=>{const e=t.toString(16);return 1===e.length?"0"+e:e})).join("")}function vat(t,e){var n=t.map((function(t){return Math.min(255,Math.round(t+255*e))}));return n}function _at(t,e,n){for(var r=[],i=vat(gat(t),.5),o=vat(gat(e),.5),a=Math.floor(n/2),s=0;s<a;s++)r.push(yat(mat(gat(t),i,s/(a-1))));for(s=0;s<a;s++)r.push(yat(mat(o,gat(e),s/(a-1))));return r}function bat(t,e,n){let r=[];const i=xv(t,e),o=1/(n-1);for(let a=0;a<n;a++){const t=i(a*o);r.push(t)}return r}function xat(t,e){const n=t.slice(0,-1).map(((n,r)=>{const i=t[r+1],o=zot((n+i)/2,t,e,1);return{color:"rgba(".concat(o.join(","),")"),item1:n,item2:i}}));return n}const wat=function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0;const[i,o]=(0,r.useState)(e),a=new AbortController;return(0,r.useEffect)((()=>((async()=>{try{const e=await fetch(t,{signal:a.signal}),n=await e.json();o(n)}catch(e){console.error("Error fetching data",e)}})(),n&&a.abort(),()=>{a.abort()})),[t,n]),{data:i}},Sat=async function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0;if(!e)return await sL(t,rot);let n=await function(t,e,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return t instanceof Uint8Array?Oot(t,n):t instanceof ReadableStream?Lot(t,n):jot(t,e,n,r)}(t,{minX:e[0],minY:e[1],maxX:e[2],maxY:e[3]}),r=[];for await(const i of n)r.push(i);return{features:r}},Eat={"expansion-urbana":{title:"\xbfHacia d\xf3nde nos expandimos?",answer:"Hacia las periferias, lejos unos de otros",color:"brown",icon:function(t){return Uz({tag:"svg",attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M96,128A64,64,0,1,0,32,64,64,64,0,0,0,96,128Zm0,176.08a44.11,44.11,0,0,1,13.64-32L181.77,204c1.65-1.55,3.77-2.31,5.61-3.57A63.91,63.91,0,0,0,128,160H64A64,64,0,0,0,0,224v96a32,32,0,0,0,32,32V480a32,32,0,0,0,32,32h64a32,32,0,0,0,32-32V383.61l-50.36-47.53A44.08,44.08,0,0,1,96,304.08ZM480,128a64,64,0,1,0-64-64A64,64,0,0,0,480,128Zm32,32H448a63.91,63.91,0,0,0-59.38,40.42c1.84,1.27,4,2,5.62,3.59l72.12,68.06a44.37,44.37,0,0,1,0,64L416,383.62V480a32,32,0,0,0,32,32h64a32,32,0,0,0,32-32V352a32,32,0,0,0,32-32V224A64,64,0,0,0,512,160ZM444.4,295.34l-72.12-68.06A12,12,0,0,0,352,236v36H224V236a12,12,0,0,0-20.28-8.73L131.6,295.34a12.4,12.4,0,0,0,0,17.47l72.12,68.07A12,12,0,0,0,224,372.14V336H352v36.14a12,12,0,0,0,20.28,8.74l72.12-68.07A12.4,12.4,0,0,0,444.4,295.34Z"}}]})(t)},component:function(){const{color:t,currentSection:e,sharedProps:n}=olt(),{data:r}=wat(Wot,[]);return(0,Si.jsxs)(Si.Fragment,{children:[(0,Si.jsx)(eR,{color:t,children:Eat[e].answer}),(0,Si.jsxs)("p",{children:[(0,Si.jsx)("b",{children:"En 1990"}),", las familias j\xf3venes resid\xedan mayormente en zonas centrales como Monterrey, Guadalupe, San Pedro y San Nicol\xe1s. Pero"," ",(0,Si.jsx)("b",{children:"para 2020"}),", las familias j\xf3venes y los j\xf3venes se establecen principalmente en la periferia: Ju\xe1rez, Garc\xeda, Apodaca, Santa Catarina y General Zuazua; mientras que los adultos mayores permanecieron en el \xe1rea central."]}),(0,Si.jsx)("p",{children:"Recientemente, los cambios demogr\xe1ficos han demandado ajustes en pol\xedticas y servicios urbanos. La migraci\xf3n de hogares j\xf3venes se debe, en gran medida, a la escasez en el centro de viviendas adecuadas a sus ingresos y preferencias de vida."}),(0,Si.jsx)(nR,{color:t,children:"Optar por soluciones habitacionales asequibles y promover la densificaci\xf3n, fomentar\xe1 la permanencia de una demograf\xeda diversa en las centralidades."}),(0,Si.jsx)(fK,{title:"Cambio poblacional de ".concat(n.time," a 2020"),data:r,column:"population_change",columnKey:"nom_mun",domain:[-85e3,54e4],formatter:t=>"".concat(Math.round(t).toLocaleString("en-US")),reducer:_.meanBy,filtering:t=>t.year==n.time})]})},controls:()=>{const{color:t,setSharedProps:e}=olt(),[n]=Fi("colors",["".concat(t,".600")]),i=_at(n,"#6a2eab",8),[o,a]=(0,r.useState)(z5),{data:s}=wat(Vot),[l,c]=(0,r.useState)([]),[u,h]=(0,r.useState)(),{time:d,isPlaying:f,handleSliderChange:p,togglePlay:m}=_$(1990,2010,10,2e3,!1);return(0,r.useEffect)((()=>{c(xat(m9,i))}),[]),(0,r.useEffect)((()=>{e({time:d})}),[d]),s?(0,Si.jsxs)(Si.Fragment,{children:[(0,Si.jsxs)(F5,{viewState:z5,children:[(0,Si.jsx)(zz,{id:"expansion_layer",data:Dot(s.features,d),getFillColor:t=>zot(t.properties[d],m9,i,.8),getLineColor:[118,124,130],getLineWidth:0,onHover:t=>h(t),pickable:!0,autoHighlight:!0,getPosition:t=>t.position}),(0,Si.jsx)(p9,{videoId:"p9n9H29_HYo",title:"Roberto Ponce",subtitle:"Tecnol\xf3gico de Monterrey, Centro para el Futuro de las Ciudades, Escuela de Gobierno y Transformaci\xf3n P\xfablica.",text:"Motivos generales de la expansi\xf3n urbana en Monterrey.",onClick:()=>f&&m()})]}),(0,Si.jsx)(r1,{title:"Cambio Poblacional (2020 - ".concat(d,")"),legendItems:l,description:(0,Si.jsxs)(Si.Fragment,{children:[(0,Si.jsx)("b",{children:"Censos de poblaci\xf3n INEGI 1990, 2000, 2010, 2020"}),(0,Si.jsx)("p",{children:"Malla geostad\xedstica de unidades comparables."}),(0,Si.jsx)("p",{children:"Esta visualizaci\xf3n proyecta diferentes censos por AGEB."})]}),color:t}),(0,Si.jsx)(v$,{time:d,min:1990,max:2010,step:10,defaultValue:1990,togglePlay:m,isPlaying:f,handleSliderChange:p,marks:g9}),u&&u.object&&(0,Si.jsxs)(N5,{hoverInfo:u,children:[(0,Si.jsxs)("span",{className:"tooltip-label",children:[(0,Si.jsx)("b",{children:"AGEB:"})," ",u.object.properties.CVEGEO]}),u.object.properties.colonia&&(0,Si.jsxs)("span",{className:"tooltip-label",children:[(0,Si.jsx)("b",{children:"Colonia:"})," ",u.object.properties.colonia]}),(0,Si.jsxs)("span",{className:"tooltip-label",children:[(0,Si.jsx)("b",{children:"Cambio poblacional de 1990 a 2000:"})," ",u.object.properties[1990].toLocaleString("en-US")," ",(0,Si.jsx)(Si.Fragment,{children:"personas"})]}),(0,Si.jsxs)("span",{className:"tooltip-label",children:[(0,Si.jsx)("b",{children:"Cambio poblacional del 2000 a 2010:"})," ",u.object.properties[2e3].toLocaleString("en-US")," ",(0,Si.jsx)(Si.Fragment,{children:"personas"})]}),(0,Si.jsxs)("span",{className:"tooltip-label",children:[(0,Si.jsx)("b",{children:"Cambio poblacional del 2010 a 2020:"})," ",u.object.properties[2010].toLocaleString("en-US")," ",(0,Si.jsx)(Si.Fragment,{children:"personas"})]})]})]}):(0,Si.jsx)(L5,{color:t})}},vivienda:{title:"\xbfPor qu\xe9 nos expandimos?",answer:"La vivienda es m\xe1s asequible en las periferias",color:"brown2",icon:function(t){return Uz({tag:"svg",attr:{fill:"currentColor",viewBox:"0 0 16 16"},child:[{tag:"path",attr:{d:"M8.707 1.5a1 1 0 0 0-1.414 0L.646 8.146a.5.5 0 0 0 .708.708L8 2.207l6.646 6.647a.5.5 0 0 0 .708-.708L13 5.793V2.5a.5.5 0 0 0-.5-.5h-1a.5.5 0 0 0-.5.5v1.293L8.707 1.5Z"}},{tag:"path",attr:{d:"m8 3.293 6 6V13.5a1.5 1.5 0 0 1-1.5 1.5h-9A1.5 1.5 0 0 1 2 13.5V9.293l6-6Z"}}]})(t)},component:function(){const{color:t,currentSection:e,setOutline:n,sharedProps:r}=olt(),{data:i}=wat(Qot,[]);return(0,Si.jsxs)(Si.Fragment,{children:[(0,Si.jsx)(eR,{color:t,children:Eat[e].answer}),(0,Si.jsx)("p",{children:"La zona central de Monterrey se ha convertido en un \xe1rea comercial sin residentes. Los hogares se mudan mientras los comercios permanecen. Durante d\xe9cadas, se ha invertido en infraestructura de transporte para conectar el empleo en el centro con las zonas residenciales, otorg\xe1ndole un alto valor comercial y haciendo inviable la producci\xf3n de vivienda asequible. La vivienda econ\xf3mica, a la que las familias j\xf3venes tienen acceso, termina por construirse en las periferias urbanas."}),(0,Si.jsx)(nR,{color:t,children:"Aunque los costos de la vivienda sean menores en las periferias, otros costos como el de traslado o los servicios, se elevan."}),(0,Si.jsx)(fK,{title:"N\xfamero de cr\xe9ditos acumulados en ".concat(r.time),data:i,setOutline:n,domain:[0,42e3],column:"creditos",columnKey:"NOMGEO",formatter:t=>"".concat(Math.round(t).toLocaleString("en-US")),filtering:t=>t.year_end===r.time})]})},controls:()=>{const{color:t,setSharedProps:e}=olt(),[n]=Fi("colors",["".concat(t,".600")]),i=_at("#6a2eab",n,8),{data:o}=wat(Jot),[a,s]=(0,r.useState)([]),[l,c]=(0,r.useState)(),{time:u,isPlaying:h,handleSliderChange:d,togglePlay:f}=_$(2e3,2020,5,2e3,!1,2020);return(0,r.useEffect)((()=>{s(xat(U9,i))}),[]),(0,r.useEffect)((()=>{e({time:u})}),[u]),o?(0,Si.jsxs)(Si.Fragment,{children:[(0,Si.jsxs)(F5,{viewState:z5,children:[(0,Si.jsx)(zz,{id:"vivienda_layer",data:Bot(o,u,"PRECIO_AJUSTADO",!0,"year_end"),getFillColor:t=>zot(t.properties.PRECIO_AJUSTADO,U9,i,.8),getLineColor:[118,124,130],getLineWidth:0,onHover:t=>c(t),pickable:!0,autoHighlight:!0,getPosition:t=>t.position}),(0,Si.jsx)(p9,{videoId:"OsVuAKg3G0U",title:"Luc\xeda Elizondo",subtitle:"Tecnol\xf3gico de Monterrey, Escuela de Arquitectura Arte y Dise\xf1o.",text:"Regulaci\xf3n de la vivienda.",onClick:()=>h&&f()})]}),(0,Si.jsx)(r1,{title:"Precio de Venta 2000-2020",legendItems:a,color:t,description:(0,Si.jsxs)(Si.Fragment,{children:[(0,Si.jsx)("b",{children:"Cr\xe9ditos de INFONAVIT activos en 2020"}),(0,Si.jsx)("p",{children:"Las viviendas adquiridas a trav\xe9s de un cr\xe9dito de INFONAVIT."}),(0,Si.jsx)("p",{children:"Datos actualizados por inflaci\xf3n presentados en precios de 2020."})]}),formatter:dv("$,.0f")}),(0,Si.jsx)(v$,{time:u,min:2e3,max:2020,step:5,defaultValue:u,togglePlay:f,isPlaying:h,handleSliderChange:d,marks:V9}),l&&l.object&&(0,Si.jsxs)(N5,{hoverInfo:l,children:[l.object.properties.CVEGEO&&(0,Si.jsxs)("span",{className:"tooltip-label",children:[(0,Si.jsx)("b",{children:"AGEB:"})," ",l.object.properties.CVEGEO]}),l.object.properties.colonia&&(0,Si.jsxs)("span",{className:"tooltip-label",children:[(0,Si.jsx)("b",{children:"Colonia:"})," ",l.object.properties.colonia]}),(0,Si.jsxs)("span",{className:"tooltip-label",children:[(0,Si.jsx)("b",{children:"A\xf1o en venta:"})," ",l.object.properties.year_end]}),(0,Si.jsxs)("span",{className:"tooltip-label",children:[(0,Si.jsx)("b",{children:"Precio de venta:"})," ",l.object.properties.IM_PRECIO_VENTA.toLocaleString("en-US",{style:"currency",currency:"USD",maximumFractionDigits:0})]}),(0,Si.jsxs)("span",{className:"tooltip-label",children:[(0,Si.jsx)("b",{children:"Precio ajustado a la inflaci\xf3n:"})," ",l.object.properties.PRECIO_AJUSTADO.toLocaleString("en-US",{style:"currency",currency:"USD",maximumFractionDigits:0})]})]})]}):(0,Si.jsx)(L5,{color:t})}},empleo:{title:"\xbfEn d\xf3nde trabajamos?",answer:"Principalmente en el centro, aunque hay nuevas centralidades",color:"orange",icon:function(t){return Uz({tag:"svg",attr:{viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{fillRule:"evenodd",d:"M4 16.5v-13h-.25a.75.75 0 010-1.5h12.5a.75.75 0 010 1.5H16v13h.25a.75.75 0 010 1.5h-3.5a.75.75 0 01-.75-.75v-2.5a.75.75 0 00-.75-.75h-2.5a.75.75 0 00-.75.75v2.5a.75.75 0 01-.75.75h-3.5a.75.75 0 010-1.5H4zm3-11a.5.5 0 01.5-.5h1a.5.5 0 01.5.5v1a.5.5 0 01-.5.5h-1a.5.5 0 01-.5-.5v-1zM7.5 9a.5.5 0 00-.5.5v1a.5.5 0 00.5.5h1a.5.5 0 00.5-.5v-1a.5.5 0 00-.5-.5h-1zM11 5.5a.5.5 0 01.5-.5h1a.5.5 0 01.5.5v1a.5.5 0 01-.5.5h-1a.5.5 0 01-.5-.5v-1zm.5 3.5a.5.5 0 00-.5.5v1a.5.5 0 00.5.5h1a.5.5 0 00.5-.5v-1a.5.5 0 00-.5-.5h-1z",clipRule:"evenodd"}}]})(t)},component:function(){const{color:t,currentSection:e}=olt(),{data:n}=wat(Hot,[]);return(0,Si.jsxs)(Si.Fragment,{children:[(0,Si.jsx)(eR,{color:t,children:Eat[e].answer}),(0,Si.jsx)("p",{children:"La migraci\xf3n de familias j\xf3venes a la periferia, reduce la poblaci\xf3n en centros urbanos, aumentando los desplazamientos al trabajo. Por otro lado, aunque los empleos contin\xfaan a diez kil\xf3metros alrededor de la Macroplaza, existen ya nuevas centralidades. En 2010, el 53% de empleos estaba en la Macroplaza; en 2020, baj\xf3 al 47%."}),(0,Si.jsx)("p",{children:"Sin embargo, el crecimiento de los centros de empleo se mantiene constante ante la migraci\xf3n hacia la periferia. Mientras que la poblaci\xf3n de Monterrey se duplic\xf3 de 1990 a 2020, la expansi\xf3n urbana fue de 2.8 veces, incrementando el tiempo de traslado."}),(0,Si.jsx)(nR,{color:t,children:"Se necesitan replantear los centros y subcentros econ\xf3micos como promotores vocacionales de diversidad de usos, para combatir ese aumento en el desplazamiento."}),(0,Si.jsx)(fK,{title:"N\xfamero de empleos en 2020",data:n,domain:[0,53e4],column:"num_empleos_esperados",columnKey:"municipio",formatter:t=>"".concat(Math.round(t).toLocaleString("en-US"))})]})},controls:()=>{const{color:t}=olt(),[e]=Fi("colors",["".concat(t,".400")]),n=_at(e,"#6a2eab",8),{data:i}=wat(qot),[o,a]=(0,r.useState)(),[s,l]=(0,r.useState)([]),c="num_empleos_esperados";return(0,r.useEffect)((()=>{l(xat(N9,n))}),[]),i?(0,Si.jsxs)(Si.Fragment,{children:[(0,Si.jsxs)(F5,{viewState:z5,children:[(0,Si.jsx)(zz,{id:"empleo_layer",data:Dot(i.features,c),getFillColor:t=>zot(t.properties[c],N9,n,.8),getLineColor:[118,124,130],getLineWidth:0,onHover:t=>a(t),pickable:!0,autoHighlight:!0,getPosition:t=>t.position}),(0,Si.jsx)(p9,{videoId:"Z5yubfNSwCU",title:"Javier Leal",subtitle:"Instituto Municipal de Planeaci\xf3n Urbana de San Pedro Garza Garc\xeda (IMPLANG).",text:"Beneficios de un menor tiempo de traslado."})]}),(0,Si.jsx)(f$,{}),(0,Si.jsx)(r1,{title:"N\xfamero de Empleos en 2023",legendItems:s,description:(0,Si.jsxs)(Si.Fragment,{children:[(0,Si.jsx)("b",{children:"Directorio Estad\xedstico Nacional de Unidades Econ\xf3micas (DENUE)"}),(0,Si.jsx)("p",{children:"El n\xfamero de empleos de cada unidad econ\xf3mica se aproxima con la mayor\xeda de las categor\xedas intermedias de empleo. Agregados por hex\xe1gono."})]}),color:t}),o&&o.object&&(0,Si.jsxs)(N5,{hoverInfo:o,children:[o.object.properties.CVEGEO&&(0,Si.jsxs)("span",{className:"tooltip-label",children:[(0,Si.jsx)("b",{children:"AGEB:"})," ",o.object.properties.CVEGEO]}),o.object.properties.colonia&&(0,Si.jsxs)("span",{className:"tooltip-label",children:[(0,Si.jsx)("b",{children:"Colonia:"})," ",o.object.properties.colonia]}),(0,Si.jsxs)("span",{className:"tooltip-label",children:[(0,Si.jsx)("b",{children:"N\xfamero de empleos en 2023:"})," ",o.object.properties[c].toLocaleString("en-US",{maximumFractionDigits:0})]})]})]}):(0,Si.jsx)(L5,{color:t})}},transporte:{title:"\xbfC\xf3mo nos movemos?",answer:"En auto, demasiados de nosotros.",color:"yellow",icon:function(t){return Uz({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M256 48c-93.864 0-176 10.668-176 85.334v213.332c0 41.604 33.062 74.666 74.667 74.666L128 448v16h256v-16l-26.667-26.668c41.604 0 74.667-33.062 74.667-74.666V133.334C432 58.668 349.864 48 256 48zm-96 336c-18.136 0-32-13.865-32-32 0-18.137 13.864-32 32-32s32 13.863 32 32c0 18.135-13.864 32-32 32zm80-144H128v-96h112v96zm112 144c-18.136 0-32-13.865-32-32 0-18.137 13.864-32 32-32s32 13.863 32 32c0 18.135-13.864 32-32 32zm32-144H272v-96h112v96z"}}]})(t)},component:function(){var t;const{color:e,currentSection:n,sharedProps:r}=olt(),{data:i}=wat(Zot,[]),o=i.filter((t=>"Regreso A Casa"===t.Motivo)),a=null===(t=D9.find((t=>t.id==r.activeButton)))||void 0===t?void 0:t.name;return(0,Si.jsxs)(Si.Fragment,{children:[(0,Si.jsx)(eR,{color:e,children:Eat[n].answer}),(0,Si.jsxs)("p",{children:[(0,Si.jsx)("b",{children:"El 45% de los desplazamientos"})," en Monterrey son viajes al trabajo, casi la mitad de ellos en autom\xf3vil y con la particularidad, de que la mitad se hace con una sola persona. Los residentes invierten en promedio 50 minutos por viaje redondo en auto, equivalente a doce d\xedas al a\xf1o. Por su parte, el transporte p\xfablico requiere mejoras: las personas pasan en promedio 70 minutos al d\xeda en \xe9l, con un tercio de ellas experimentando viajes de 3 horas diarias."]}),(0,Si.jsxs)("p",{children:["Adem\xe1s, ",(0,Si.jsx)("b",{children:"el 40% de los traslados vienen de la periferia"}),", como Apodaca, Escobedo, Garc\xeda y Ju\xe1rez; mientras que el 26% se dirige a Monterrey. Es esencial expandir el acceso al transporte p\xfablico y mejorar la infraestructura, puesto que tan solo el 21% lo utiliza (otro 19% se traslada caminando). Solo as\xed se podr\xe1 contrarrestar el impacto negativo en la salud p\xfablica y en el medio ambiente que genera el elevado n\xfamero de viajes en autom\xf3vil."]}),(0,Si.jsx)(nR,{color:e,children:"Los Sistemas Integrados de Transporte brindan una ciudad conectada, ordenada, de calidad, r\xe1pida y segura. Adem\xe1s son clave para la seguridad de las personas que necesitan realizar viajes intermodales."}),(0,Si.jsx)(fK,{title:"Tiempo de traslado regreso a casa en ".concat(null===a||void 0===a?void 0:a.toLocaleLowerCase()),data:o,column:"TiempoTraslado",columnKey:"MunDest",domain:[10,100],formatter:t=>"".concat(Math.round(t).toLocaleString("en-US")," min"),reducer:lK().meanBy,filtering:t=>F9(t.Transporte,r.activeButton)})]})},controls:()=>{var t;const{color:e,setSharedProps:n}=olt(),[i]=Fi("colors",["".concat(e,".600")]),{data:o}=wat(Xot),[a,s]=(0,r.useState)("General"),{time:l,isPlaying:c,handleSliderChange:u,togglePlay:h}=_$(300,1320,.005,.1,!0,0,!0),d=null===(t=D9.find((t=>t.id==a)))||void 0===t?void 0:t.name;return(0,r.useEffect)((()=>{n({activeButton:a})}),[a]),o?(0,Si.jsxs)(Si.Fragment,{children:[(0,Si.jsxs)(F5,{viewState:z5,children:[(0,Si.jsx)(zz,{id:"masive-transport-layer",data:Yot,stroked:!0,filled:!0,lineWidthScale:10,lineWidthMinPixels:2,getLineWidth:10,getLineColor:t=>({ECOVIA:[255,56,100],"Linea 1 - Metro":[255,56,100],"Linea 2 - Metro":[255,56,100],"Linea 3 - Metro":[255,56,100],Transmetro:[255,56,100]}[t.properties.NOMBRE]||[64,224,208,128])}),(0,Si.jsx)(zz,{id:"ciclist-routes",data:$ot,stroked:!0,filled:!0,lineWidthScale:10,lineWidthMinPixels:2,getLineWidth:10,getLineColor:[16,37,66]}),(0,Si.jsx)(y9,{id:"transporte_layer",data:B9(o.features.filter((t=>F9(t.properties.Transporte,a)))),getPath:t=>t.waypoints.map((t=>t.coordinates)),getTimestamps:t=>t.waypoints.map((t=>t.timestamp)),getColor:(t,e)=>{const n=o.features[e.index].properties;return"Regreso A Casa"==n.Motivo||"Trabajo"==n.Motivo?[106,46,171]:[126,96,62]},opacity:.5,widthMinPixels:2,trailLength:10,currentTime:l}),(0,Si.jsx)(p9,{videoId:"2eRmyQBQ5aA",title:"Luisa P\xe9rez Barbosa",subtitle:"Movimiento Activaci\xf3n Ciudadana (MOVAC).",text:"Cultura vial m\xe1s all\xe1 de la infraestructura.",onClick:()=>c&&h()})]}),(0,Si.jsxs)(L9,{color:e,title:"Traslados en ".concat(d," por motivo de viaje"),description:(0,Si.jsx)(Si.Fragment,{children:(0,Si.jsx)("b",{children:"Encuesta origen destino del Programa Integral de Movilidad Urbana Sustentable (PIMUS) 2019"})}),note:"*Transporte activo considera: movilidad ciclista y peatonal",children:[(0,Si.jsx)(j9,{color:"#6a2eab",label:"Trabajo y Regreso a Casa"}),(0,Si.jsx)(j9,{color:i,label:"Otros motivos"}),(0,Si.jsx)(j9,{color:"#FF3864",label:"Metro"}),(0,Si.jsx)(j9,{color:"#102542",label:"Ciclovias"})]}),(0,Si.jsx)(k9,{color:e,activeButton:a,setActiveButton:s,mapping:D9,onClick:()=>c&&h()}),(0,Si.jsx)(v$,{time:l,min:300,max:1320,step:3,defaultValue:1020,togglePlay:h,isPlaying:c,handleSliderChange:u,marks:R9})]}):(0,Si.jsx)(L5,{color:e})}},infancias:{title:"\xbfPor qu\xe9 limita el desarrollo infantil?",answer:"Porque los servicios no est\xe1n en donde se requieren.",color:"sage",icon:function(t){return Uz({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"}},{tag:"path",attr:{d:"M16 4c0-1.11.89-2 2-2s2 .89 2 2-.89 2-2 2-2-.89-2-2zm4 18v-6h2.5l-2.54-7.63A2.01 2.01 0 0018.06 7h-.12a2 2 0 00-1.9 1.37l-.86 2.58c1.08.6 1.82 1.73 1.82 3.05v8h3zm-7.5-10.5c.83 0 1.5-.67 1.5-1.5s-.67-1.5-1.5-1.5S11 9.17 11 10s.67 1.5 1.5 1.5zM5.5 6c1.11 0 2-.89 2-2s-.89-2-2-2-2 .89-2 2 .89 2 2 2zm2 16v-7H9V9c0-1.1-.9-2-2-2H4c-1.1 0-2 .9-2 2v6h1.5v7h4zm6.5 0v-4h1v-4c0-.82-.68-1.5-1.5-1.5h-2c-.82 0-1.5.68-1.5 1.5v4h1v4h3z"}}]})(t)},component:function(){const{color:t,currentSection:e}=olt(),{data:n}=wat(aat,[]);return(0,Si.jsxs)(Si.Fragment,{children:[(0,Si.jsx)(eR,{color:t,children:Eat[e].answer}),(0,Si.jsx)("p",{children:"Las familias j\xf3venes con beb\xe9s, ni\xf1as y ni\xf1os menores de 5 a\xf1os han migrado hacia las periferias; en donde existe una cobertura reducida de servicios de proximidad: educativos, de salud, comerciales y espacios p\xfablicos. En contraste, en las zonas centrales en donde hay una mayor oferta de servicios, la poblaci\xf3n infantil es menor."}),(0,Si.jsx)("p",{children:"Este desbalance se ilustra en los equipamientos de salud (consultorios y hospitales generales). En un municipio central como Monterrey con un 7% de poblaci\xf3n infantil, la proporci\xf3n de equipamientos es 1 por cada 42 infancias. Por el contrario en la periferia, El Carmen con un 14% de la poblaci\xf3n infantil, cuenta con 1 equipamiento cada 2,468 ni\xf1os. Esto obliga a las familias a desplazarse largas distancias para recibir atenci\xf3n m\xe9dica, lo que implica mayores costos y esfuerzo."}),(0,Si.jsx)(nR,{color:t,children:"UNICEF indica que los derechos de las infancias deben garantizarse a trav\xe9s de servicios de salud, nutrici\xf3n, aprendizaje, protecci\xf3n y seguridad."}),(0,Si.jsx)(fK,{title:"Porcentaje de poblaci\xf3n entre 0 a 5 a\xf1os",data:n,domain:[.04,.15],column:"ratio_pob05",columnKey:"NOM_MUN",formatter:t=>"".concat(t.toLocaleString("en-US",{style:"percent"}))})]})},controls:()=>{const{color:t}=olt(),[e]=ki("(max-width: 800px)"),[n]=Fi("colors",["".concat(t,".200")]),i=bat("#fcfce3","#6a2eab",4),[o,a]=(0,r.useState)(R5,void 0,e),[s,l]=(0,r.useState)(),[c,u]=(0,r.useState)(),[h,d]=(0,r.useState)(),[f,p]=(0,r.useState)(1e3),[m,g]=(0,r.useState)(),[y,v]=(0,r.useState)(null),_=f/40075e3*360;function b(t,e,n,r){const i=n-t,o=r-e;return Math.sqrt(i*i+o*o)}const x=(0,r.useCallback)((0,sK.debounce)((async t=>{if(!t)return void g(null);console.log(y);const[e,n]=[t[0],t[1]],r=[e-_,n-_,e+_,n+_],i=await Sat(cat,r);d(i);const o=i.features.filter((t=>{const r=t.geometry.coordinates,[i,o]=r;return b(e,n,i,o)<=_})),a=await Sat(oat,r);l(a);const s=a.features.filter((t=>{const r=t.properties.longitud,i=t.properties.latitud;return b(e,n,r,i)<=_})),c=await Sat(sat,r);u(c);const h=c.features.filter((t=>{const r=t.properties.longitude,i=t.properties.latitude;return b(e,n,r,i)<=_})),f=lK().sumBy(s,(t=>t.properties.POBTOT)),p=lK().sumBy(s,(t=>t.properties.pob05)),m=lK().countBy(o,(t=>t.properties.sector)),v=p/f*100;g({...m,pob_ratio:Math.round(100*v)/100,area_parques:lK().sumBy(h,(t=>t.properties.area))})}),100),[]);(0,r.useEffect)((()=>{x(y)}),[y]);const w=!!s&&!!c&&!!h;return console.log("showData",w),(0,Si.jsxs)(Si.Fragment,{children:[(0,Si.jsxs)(F5,{viewState:o,setViewState:a,onHover:(t,e)=>{if(t.coordinate){const[e,n]=[t.coordinate[0],t.coordinate[1]];v([e,n])}else v(null)},onDragStart:()=>v(null),children:[(0,Si.jsx)(zz,{id:"infancias2_layer",data:w?Dot(s.features,"ratio_pob05"):[],getFillColor:t=>zot(t.properties.ratio_pob05,Y7,i,1),getLineColor:[118,124,130],getLineWidth:3,brushingEnabled:!0,visible:!!m,brushingRadius:f,extensions:[new X7]}),(0,Si.jsx)(zz,{id:"parques_layer",data:w?Dot(c.features,"area"):[],getFillColor:[150,200,112],getLineColor:[80,120,20],getLineWidth:5,brushingEnabled:!0,visible:!!m,brushingRadius:f,extensions:[new X7]}),(0,Si.jsx)(zz,{id:"comercios_layer",data:w?h.features.filter((t=>"comercio al por menor"===t.properties.sector)):[],getLineColor:[246,145,0],getLineWidth:20,brushingEnabled:!0,visible:!!m,brushingRadius:f,extensions:[new X7]}),(0,Si.jsx)(UL,{id:"servicios_tachas",data:w?h.features.filter((t=>"guarderia"===t.properties.sector||"preescolar"===t.properties.sector||"salud"===t.properties.sector)):[],iconAtlas:"https://sium.blob.core.windows.net/sium/images/icon-atlas2.png",iconMapping:"https://sium.blob.core.windows.net/sium/images/icon-atlas2.json",getIcon:t=>function(t){switch(t){case"guarderia":return"marker-guarderia";case"preescolar":return"marker-preescolar";case"salud":return"marker-salud"}}(t.properties.sector),getPosition:t=>t.geometry.coordinates,sizeUnits:"meters",sizeScale:100,sizeMinPixels:6,brushingEnabled:!0,visible:!!m,brushingRadius:f,extensions:[new X7]}),(0,Si.jsx)(p9,{videoId:"ROtsJ6c4dIo",title:"Sindy Gonz\xe1lez Tijerina",subtitle:"Fundaci\xf3n FEMSA, Inversi\xf3n Social en Primera Infancia.",text:"Importancia de la integraci\xf3n de una perspectiva de la primera infrancia en la planeaci\xf3n.",additionalContent:{videoId:"awKx7yDA6k8",title:"Luis \xc1vila",subtitle:"C\xf3mo vamos NL.",text:"La importancia de accesibilidad a espacio p\xfablico."}}),y&&(0,Si.jsx)(GL,{id:"circle-layer",data:[{position:y,size:1e3}],pickable:!0,stroked:!0,filled:!0,lineWidthMinPixels:1,getPosition:y,getRadius:1100,getFillColor:[0,0,0,20],getLineWidth:80,getLineColor:[80,80,80]})]}),(0,Si.jsxs)(L9,{color:t,title:"Porcentaje de la poblaci\xf3n total entre 0 a 5 a\xf1os",description:(0,Si.jsxs)(Si.Fragment,{children:[(0,Si.jsx)("b",{children:"Censo INEGI 2020"}),(0,Si.jsx)("p",{children:"La fuente de informaci\xf3n son menores de 5 a\xf1os."}),(0,Si.jsx)("b",{children:"Open Street Maps"}),(0,Si.jsx)("p",{children:"Equipamiento de salud y educaci\xf3n DENUE 2020. Informaci\xf3n de parques y espacio p\xfablico."})]}),children:[i.map(((t,e)=>(0,Si.jsx)(j9,{color:t,label:"".concat((100*Y7[e]).toFixed(0),"% - ").concat((100*Y7[e+1]).toFixed(0),"%")},e))),(0,Si.jsx)("div",{style:{height:"10px"}}),(0,Si.jsx)(j9,{color:"rgb(150, 200, 112)",label:"Parques"}),(0,Si.jsx)(j9,{color:"#8b0b0b",label:"Guarder\xeda"}),(0,Si.jsx)(j9,{color:"#1f562f",label:"Preescolar"}),(0,Si.jsx)(j9,{color:"#e95481",label:"Equipamiento de Salud"}),(0,Si.jsx)(j9,{color:"#f69100",label:"Comercio al por menor"})]}),m&&(0,Si.jsx)(G7,{pob05:m.pob_ratio||0,area:m.area_parques||0,color:t,guarderias:m.guarderia||0,preescolares:m.preescolar||0,comercios:m["comercio al por menor"]||0,salud:m.salud||0})]})}},segregacion:{title:"\xbfPor qu\xe9 segrega?",answer:"Porque expulsa a los m\xe1s vulnerables hacia la periferia",color:"green1",icon:function(t){return Uz({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M403.438 23.08s-70.897 56.757-118.08 70.513c-47.182 13.756-70.642-15.469-70.642-15.469s14.65 34.485-19.828 69.494c-34.482 35.01-118.112 70.531-118.112 70.531l-2.366 13.93 6.452 8.121L29.36 376.606c-.6 1.101-.593 2.104-.593 3.313 0 18.897 8.252 34.243 20.343 44 12.09 9.758 27.564 14.31 42.938 14.312 15.376.003 30.877-4.555 42.969-14.312 12.092-9.756 20.343-25.094 20.343-44 .198-1.352-.192-2.316-.687-3.531L99.735 241.76c.059-1.373.239-2.845 1.551-6.002 20.336-15.642 69.497-51.446 106.305-61.696 18.947-5.273 35.577.53 35.015 6.936L215.87 369.577l21.406 30.31c-17.75 7.75-32.593 24.84-37.562 51.344-56.076 6.195-95.469 20.742-95.469 37.69H416.12c0-16.947-39.392-31.495-95.467-37.69-4.91-26.6-19.57-44.112-37.187-51.906l21-29.75-30.737-194.596c4.17-19.161 18.107-42.676 28.875-57.654 16.23-22.415 108.224-65.652 109.659-64.096l-54.938 134.627c-.495 1.216-.885 2.18-.687 3.532 0 18.906 8.251 34.244 20.343 44 12.092 9.757 27.595 14.315 42.971 14.312 15.374-.003 30.846-4.554 42.936-14.312 12.09-9.757 20.345-25.103 20.345-44 0-1.21.004-2.212-.595-3.313L430.796 50.763c.97-4.868 3.99-8.561 7.094-12.034l-11.833-14.786zm18.264 56.526l40.936 108.375h-85.155zM90.296 268.138l44.22 108.375H49.36z"}}]})(t)},component:function(){const{color:t,currentSection:e}=olt(),{data:n}=wat(nat,[]);return(0,Si.jsxs)(Si.Fragment,{children:[(0,Si.jsx)(eR,{color:t,children:Eat[e].answer}),(0,Si.jsx)("p",{children:"Al expandirnos de esta manera y en tales niveles, inevitablemente ciertos grupos poblacionales, incluyendo a las familias j\xf3venes o con primeras infancias, quedan alejados de las \xe1reas con oportunidades y servicios."}),(0,Si.jsx)("p",{children:"Esto provoca una segregaci\xf3n espacial que divide las zonas abruptamente. Las de mayor ingreso como San Pedro o el Sur de Monterrey contra las de menor ingreso, que cuentan con costos de suelo m\xe1s bajos, como sucede en C\xe9ntrika y Loma Larga, en Estanzuela Fomerrey y en los l\xedmites de la colonia Independencia con Loma Larga."}),(0,Si.jsx)(nR,{color:t,children:"Integrar la Zona Metropolitana por medio de transporte colectivo, disminuir\xe1 la segregaci\xf3n econ\xf3mica que la expansi\xf3n provoca. Simult\xe1neamente, se deben de generar pol\xedticas de vivienda asequible menos desconectadas de las zonas funcionales de la ciudad."}),(0,Si.jsx)(fK,{title:"Ingreso mensual per c\xe1pita en 2020",data:n,domain:[5e3,35e3],column:"income_pc",columnKey:"nom_mun",formatter:t=>"$".concat(Math.round(t).toLocaleString("en-US"))})]})},controls:()=>{const{color:t}=olt(),[e]=ki("(max-width: 800px)"),[n]=Fi("colors",["".concat(t,".700")]),i=_at("#6a2eab",n,8),{data:o}=wat(tat),{data:a}=wat(eat),[s,l]=(0,r.useState)([]),[c,u]=(0,r.useState)(),[h,d]=(0,r.useState)("income_pc"),[f,p]=(0,r.useState)(!0);(0,r.useEffect)((()=>{l(xat(_7[h].quantiles,i))}),[h]);return o&&a?(0,Si.jsxs)(Si.Fragment,{children:[(0,Si.jsxs)(F5,{viewState:z5,children:[(0,Si.jsx)(zz,{id:"segregacion_layer",data:Dot(o.features,h),getFillColor:t=>zot(t.properties[h],_7[h].quantiles,i,.8),getLineColor:[118,124,130],getLineWidth:0,onHover:t=>u(t),pickable:!0,autoHighlight:!0,getPosition:t=>t.position}),f&&(0,Si.jsx)(zz,{id:"asentamientos_layer",data:a.features,getFillColor:[210,160,103],autoHighlight:!0,getPosition:t=>t.position}),(0,Si.jsx)(p9,{videoId:"KZmsL1jo7mo",title:"Carlos Placencia",subtitle:"Consejo Nuevo Le\xf3n para la Planeaci\xf3n Estrat\xe9gica, Comisi\xf3n de Desarrollo Sustentable.",text:"Relaci\xf3n entre segregaci\xf3n y expansi\xf3n."})]}),(0,Si.jsx)(k9,{color:t,activeButton:h,setActiveButton:d,mapping:[{id:"income_pc",name:"Ingreso"},{id:"local_centralization_q_1_k_100",name:"Segregaci\xf3n Menor Ingreso"},{id:"local_centralization_q_5_k_100",name:"Segregaci\xf3n Mayor Ingreso"}]}),(0,Si.jsx)(r1,{title:_7[h].title,legendItems:s,color:t,formatter:_7[h].formatter,description:(0,Si.jsxs)(Si.Fragment,{children:[(0,Si.jsx)("b",{children:"Censo de 2020 la encuesta nacional de ingreso en los hogares del 2018"}),(0,Si.jsx)("p",{children:"A trav\xe9s del metodo Iterative Proportional Fitting (IPF), se proporcionaron datos sintetivos de ingreso por AGEB."}),(0,Si.jsx)("p",{children:"Peraza-Mues, G., Ponce-Lopez, R., Mu\xf1oz Sanchez, J. A., Cavazos Alanis, F., Olivera Mart\xednez, G., & Brambila Paz, C. (2023). Income Segregation Analysis in Limited-Data Contexts: A Methodology Based on Iterative Proportional Fitting. Geographical Analysis."})]})}),(0,Si.jsx)(v7,{onChange:()=>{p(!f)},isChecked:f,colorScheme:"red",borderColor:"#d2a067",className:"checkbox",width:"2dvw",pl:e?"0px":"15px",children:(0,Si.jsx)(Yz,{fontSize:e?"10px":"1dvw",color:"#d2a067",children:"Asentamientos autoproducidos"})}),(0,Si.jsx)(f$,{}),c&&c.object&&(0,Si.jsxs)(N5,{hoverInfo:c,children:[(0,Si.jsxs)("span",{className:"tooltip-label",children:[(0,Si.jsx)("b",{children:"AGEB:"})," ",c.object.properties.cvegeo]}),c.object.properties.colonia&&(0,Si.jsxs)("span",{className:"tooltip-label",children:[(0,Si.jsx)("b",{children:"Colonia:"})," ",c.object.properties.colonia]}),(0,Si.jsxs)("span",{className:"tooltip-label",children:[(0,Si.jsx)("b",{children:"Ingreso mensual per capita:"})," $",Math.round(c.object.properties.income_pc).toLocaleString("en-US")]}),(0,Si.jsxs)("span",{className:"tooltip-label",children:[(0,Si.jsx)("b",{children:"Quinto quintil segregaci\xf3n:"})," ",Math.round(100*c.object.properties.local_centralization_q_5_k_100)/100]}),(0,Si.jsxs)("span",{className:"tooltip-label",children:[(0,Si.jsx)("b",{children:"Primer quintil segregaci\xf3n:"})," ",Math.round(100*c.object.properties.local_centralization_q_1_k_100)/100]})]})]}):(0,Si.jsx)(L5,{color:t})}},delincuencia:{title:"\xbfPor qu\xe9 aumenta la inseguridad?",answer:"Porque al estar alejados, no podemos cuidarnos los unos a los otros",color:"green2",icon:function(t){return Uz({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M70.533 100.452c-22.862 27.542-36.27 64.923-37.766 96.702-.9 19.145 9.6 42.616 25.276 61.47 15.674 18.855 36.465 32.678 51.753 35.028 11.256.74 19.522-9.182 25.182-16.5 9.537-12.442 19.204-30.678 29.36-49.014 10.155-18.336 20.77-36.82 33.798-50.467 13.028-13.645 30.24-22.73 49.442-17.89 3.34 1.09 3.565 1.663 12.38 8.788 12.605 10.736 26.244 21.81 41.694 39.33l3.803 3.486 10.238-6.06c-20.92-23.726-38.623-51.403-57.006-76.168-27.153-36.58-54.84-65.76-94.205-69.893-36.138-3.317-74.585 18.428-93.95 41.19zm266.053-2.414c-3.507.063-7.26.632-11.217 1.733-7.08 1.97-14.577 5.722-21.718 11.09l60.545 12.47c-.844-8.415-4.142-15.068-9.524-19.503-4.425-3.646-10.055-5.63-16.6-5.785-.49-.01-.987-.013-1.487-.004zm12.787 33.34l-6.83 15.805 18.148 9.95zm-51.254 21.785c9.177 12.81 18.397 25.33 28.04 36.72 7.273-4.386 14.418-10.424 20.662-18a86.045 86.045 0 0 0 2.713-3.49zm-62.702 23.266c-8.527.283-15.98 4.993-24.262 13.67-29.706 32.65-56.175 92.534-24.877 134.35 11.81 14.805 71.805 33.64 129.122 34.264 38.29 26.563 62.975 62.86 93.86 94.36 18.564-26.89 34.903-54.124 70.025-78.467L459.423 361.2c-26.72 8.057-36.142 26.154-50.656 41.217-18.296-25.715-41.06-49.166-65.555-69.527-17.72-14.73-38.605-25.1-58.11-37.434 2.437-.69-6.538-19.77-7.556-21.99-29.352-7.035-49.364-22.817-62.138-39.367l14.25-11c13.5 17.492 35.288 33.754 73.69 35.933 19.65-2.818 29.578-6.955 35.335-11.704 5.626-4.64 8.615-10.964 12.895-20.618 1.095-6.312-.25-7.85-2.84-10.1-1.95-1.696-5.246-3.2-8.787-4.732l-39.023 23.104-4.886-6.094c-17.46-21.77-31.722-33.02-46.578-45.623-3.633-3.94-7.452-6.648-12.324-6.836a25 25 0 0 0-1.72 0zM109.8 312.53c-20.436 15.367-42.69 27.405-71.017 28.307l2.978 27.315 58.107-18.873c19.65 23.613 32.977 51.093 65.314 68.364 37.673-12.64 57.61-32.233 77.46-50.98-21.403-6.467-42.72-14.485-61.496-24.495l-14.232 34.423z"}}]})(t)},component:function(){var t;const{color:e,currentSection:n,setOutline:r,sharedProps:i}=olt(),{data:o}=wat(iat,[]);return(0,Si.jsxs)(Si.Fragment,{children:[(0,Si.jsx)(eR,{color:e,children:Eat[n].answer}),(0,Si.jsx)("p",{children:"Entre m\xe1s crece la mancha urbana, m\xe1s aumenta la inseguridad: cuando se expande un kil\xf3metro, el robo a casa habitaci\xf3n incrementa en un 0.04%."}),(0,Si.jsx)("p",{children:"Adem\xe1s, las incidencias delictivas como robos a transe\xfantes o a viviendas, as\xed como la violencia familiar se concentran en regiones segregadas. Es claro que estar alejado de actividades econ\xf3micas aumenta la incidencia delictiva, mientras que estar cercano a centros con comercio al por menor, la disminuyen."}),(0,Si.jsx)(nR,{color:e,children:"Las ciudades compactas y multifuncionales incentivan una vida p\xfablica activa, lo que podr\xeda disminuir los \xedndices delictivos en la Zona Metropolitana de Monterrey."}),(0,Si.jsx)(fK,{title:"Acumulado ".concat(null===(t=x7.find((t=>t.id==i.activeButton)))||void 0===t?void 0:t.name.toLocaleLowerCase()," por 10 mil personas (2017-2020)"),data:o,domain:[0,10500],setOutline:r,column:i.activeButton,columnKey:"NOMGEO",formatter:t=>"".concat(Math.round(t).toLocaleString("en-US"))})]})},controls:()=>{const{color:t,setSharedProps:e}=olt(),[n]=Fi("colors",["".concat(t,".600")]),i=_at(n,"#6a2eab",8),[o,a]=(0,r.useState)(z5),{data:s}=wat(rat),[l,c]=(0,r.useState)([]),[u,h]=(0,r.useState)(),[d,f]=(0,r.useState)("num_crimen");return(0,r.useEffect)((()=>{c(xat(b7[d].quantiles,i))}),[d]),(0,r.useEffect)((()=>{e({activeButton:d})}),[d]),s?(0,Si.jsxs)(Si.Fragment,{children:[(0,Si.jsxs)(F5,{viewState:o,children:[(0,Si.jsx)(zz,{id:"delincuencia_layer",data:Dot(s.features,d),getFillColor:t=>zot(t.properties[d],b7[d].quantiles,i,.8),getLineColor:[118,124,130],getLineWidth:0,onHover:t=>h(t),pickable:!0,autoHighlight:!0,getPosition:t=>t.position}),(0,Si.jsx)(p9,{videoId:"0iY7lM81XiQ",title:"Rebecca Bell",subtitle:"Tecnol\xf3gico de Monterrey, Escuela de Ciencias Sociales y Gobierno.",text:"Confianza e involucramiento en la seguridad p\xfablica."})]}),(0,Si.jsx)(k9,{color:t,activeButton:d,setActiveButton:f,mapping:x7}),(0,Si.jsx)(f$,{}),(0,Si.jsx)(r1,{title:b7[d].title,legendItems:l,description:(0,Si.jsxs)(Si.Fragment,{children:[(0,Si.jsx)("b",{children:"Reportes y datos anonimizados del Secretario Ejecutivo de Seguridad P\xfablica"}),(0,Si.jsx)("p",{children:"Los datos se muestran para 4 tipos de delitos violencia familiar, robo a transe\xfante, negocio y casa habitaci\xf3n. Se reporta la incidencia delictiva acumulada de 2017 al 2020 del n\xfamero de delitos por cada diez mil personas."})]}),color:t}),u&&u.object&&(0,Si.jsxs)(N5,{hoverInfo:u,children:[u.object.properties.CVEGEO&&(0,Si.jsxs)("span",{className:"tooltip-label",children:[(0,Si.jsx)("b",{children:"AGEB:"})," ",u.object.properties.CVEGEO]}),u.object.properties.colonia&&(0,Si.jsxs)("span",{className:"tooltip-label",children:[(0,Si.jsx)("b",{children:"Colonia:"})," ",u.object.properties.colonia]}),(0,Si.jsxs)("span",{className:"tooltip-label",children:[(0,Si.jsx)("b",{children:"N\xfamero de delitos:"})," ",u.object.properties.num_crimen]}),(0,Si.jsxs)("span",{className:"tooltip-label",children:[(0,Si.jsx)("b",{children:"N\xfamero de robos a transe\xfantes:"})," ",u.object.properties.robo_transeunte]}),(0,Si.jsxs)("span",{className:"tooltip-label",children:[(0,Si.jsx)("b",{children:"N\xfamero de robos a casa habitaci\xf3n:"})," ",u.object.properties.robo_casa]}),(0,Si.jsxs)("span",{className:"tooltip-label",children:[(0,Si.jsx)("b",{children:"Casos de violencia familiar:"})," ",u.object.properties.violencia_familiar]})]})]}):(0,Si.jsx)(L5,{color:t})}},costos:{title:"\xbfPor qu\xe9 nos cuesta tanto dinero?",answer:"Hay que llevar servicios p\xfablicos m\xe1s lejos",color:"green3",icon:function(t){return Uz({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0V0z"}},{tag:"path",attr:{d:"M11.8 10.9c-2.27-.59-3-1.2-3-2.15 0-1.09 1.01-1.85 2.7-1.85 1.78 0 2.44.85 2.5 2.1h2.21c-.07-1.72-1.12-3.3-3.21-3.81V3h-3v2.16c-1.94.42-3.5 1.68-3.5 3.61 0 2.31 1.91 3.46 4.7 4.13 2.5.6 3 1.48 3 2.41 0 .69-.49 1.79-2.7 1.79-2.06 0-2.87-.92-2.98-2.1h-2.2c.12 2.19 1.76 3.42 3.68 3.83V21h3v-2.15c1.95-.37 3.5-1.5 3.5-3.55 0-2.84-2.43-3.81-4.7-4.4z"}}]})(t)},component:function(){const{color:t,currentSection:e}=olt();return(0,Si.jsxs)(Si.Fragment,{children:[(0,Si.jsx)(eR,{color:t,children:Eat[e].answer}),(0,Si.jsx)("p",{children:"Los tres gr\xe1ficos a la derecha desglozan el gasto en obra p\xfablica por municipio:"}),(0,Si.jsxs)("p",{children:["1.- Gasto Total en Obra P\xfablica (1995-2020): Se muestra el gasto en la Zona Metropolitana de Monterrey, en pesos de 2022. Monterrey exhibe un gasto constante. Municipios como Apodaca y Escobedo, con crecimientos poblacionales y econ\xf3micos significativos, registran aumentos notables en el gasto total.",(0,Si.jsx)("br",{}),"2.- Gasto en Obra P\xfablica Per C\xe1pita (a precios nominales): San Pedro destaca por su alto valor y por un incremento de 4 veces entre 2015 y 2020. Otros municipios perif\xe9ricos, como Ju\xe1rez, duplicaron su gasto per c\xe1pita en el mismo periodo, mostrando los retos de extender servicios en nuevas \xe1reas urbanas.",(0,Si.jsx)("br",{}),"3.- Gasto en Obra P\xfablica por Superficie Construida: Monterrey muestra un gasto constante, mientras que San Pedro Garza Garc\xeda experiment\xf3 un aumento exponencial entre 2015 y 2020. San Nicol\xe1s redujo su gasto, mientras que municipios en la periferia urbana han tenido un incremento moderado para adecuarse a las necesidades que impone el crecimiento territorial."]}),(0,Si.jsx)(nR,{color:t,children:"Intensificar el uso del suelo urbano existente y mejorar las pol\xedticas regulatorias contra la expansi\xf3n mitigar\xedan el gasto p\xfablico excesivo en servicios urbanos e infraestructura porque se generan econom\xedas de escala."})]})},controls:()=>{const{color:t}=olt(),[e]=ki("(max-width: 800px)"),[n,i]=(0,r.useState)([]),[o,a]=(0,r.useState)("obras_ajustado"),[s,l]=(0,r.useState)();(0,r.useEffect)((()=>{fetch("https://sium.blob.core.windows.net/sium/datos/costos_municipality.json").then((t=>t.json())).then((t=>{i(c(t))})).catch((t=>console.error("Error al cargar datos para el gr\xe1fico:",t)))}),[o]);const c=t=>{const e={};t.forEach((t=>{const n=t.fecha,r=t.nom_mun,i=t[o];e[n]||(e[n]={}),e[n][r]||(e[n][r]=0),e[n][r]+=i}));return Object.keys(e).map((t=>{const n={fecha:t};return Object.keys(e[t]).forEach((r=>{n[r]=e[t][r]})),n}))},u=t=>{let{active:n,payload:r,label:i,activeIndex:o}=t;const{color:a}=olt(),s=t=>t>1e9?(t/1e9).toFixed(2)+" mil millones":t>1e6?(t/1e6).toFixed(0)+" millones":t<1?t.toFixed(2):t.toFixed(0),l=U7.includes(o);if(n&&r&&r.length>0){const t=r.filter((t=>l&&U7.includes(t.name)||!l&&!U7.includes(t.name))).reverse();return(0,Si.jsxs)(Ei,{className:"custom-tooltip",borderColor:"".concat(a,".400"),borderWidth:.5,borderRadius:5,style:{backgroundColor:"#fff",padding:"10px"},children:[(0,Si.jsx)("p",{style:{fontWeight:"bold",fontSize:e?"10px":"min(2.6dvh, 1.3dvw)"},children:"A\xf1o ".concat(i)}),t.map(((t,n)=>(0,Si.jsxs)("p",{style:{color:t.color,textDecoration:t.name===o?"underline":"none",opacity:t.name===o?"1":"0.5",fontWeight:t.name===o?"800":"500",fontSize:e?"8px":"min(2.4dvh, 1.2dvw)"},children:[(0,Si.jsx)("span",{children:t.name}),": $",s(t.value)]},n)))]})}return null},h=t=>V7[t]||"#000000";return(0,Si.jsxs)(Si.Fragment,{children:[(0,Si.jsx)("div",{style:{position:"absolute",top:e?"10px":"1.5dvh",left:e?"10px":"1.5dvh",zIndex:1},children:(0,Si.jsx)(Pp,{hasArrow:!0,label:(0,Si.jsxs)(Si.Fragment,{children:[(0,Si.jsx)("b",{children:"Finanzas P\xfablicas Estatales y Municipales del Instituto Nacional de Estad\xedstica y Geograf\xeda (2020)"}),(0,Si.jsx)("p",{children:"Los datos de gasto total en obra p\xfablica est\xe1n ajustados por inflaci\xf3n y se reportan en pesos del 2022. Los datos per c\xe1pita y por superficie son gasto nominal por a\xf1os sin ajuste de inflaci\xf3n."})]}),placement:"top",gutter:12,children:(0,Si.jsx)(kp,{variant:"outline",isRound:!0,icon:(0,Si.jsx)(Xz,{}),size:"xs",colorScheme:t,fontSize:e?"10px":"min(1.6dvh, 0.8dvw)",width:e?"20px":"1.5dvw",height:e?"20px":"3dvh"})})}),(0,Si.jsx)(k9,{color:t,activeButton:o,setActiveButton:a,mapping:[{id:"obras_ajustado",name:"Gasto en obras p\xfablica"},{id:"obras_percapita",name:"Gasto en obras p\xfablica por persona"},{id:"obras_perarea",name:"Gasto en obras p\xfablica por \xe1rea construida"}]}),(0,Si.jsx)(p9,{videoId:"_h7bXZyN2po",title:"Ana Fernanda Hierro",subtitle:"Consejo Nuevo Le\xf3n para la Planeaci\xf3n Estrat\xe9gica, Secretar\xeda T\xe9cnica.",text:"Eficiencia y aprovechamiento del espacio."}),(0,Si.jsx)(ED,{width:"100%",height:"100%",children:(0,Si.jsxs)(B7,{data:n,margin:{top:100,right:e?5:30,left:e?0:30,bottom:0},onMouseLeave:()=>l(void 0),children:[(0,Si.jsx)("defs",{children:N7.map(((t,e)=>(0,Si.jsxs)("linearGradient",{id:"colorU".concat(e),x1:"0",y1:"0",x2:"0",y2:"1",children:[(0,Si.jsx)("stop",{offset:"5%",stopColor:h(t),stopOpacity:.8}),(0,Si.jsx)("stop",{offset:"95%",stopColor:h(t),stopOpacity:.2})]},e)))}),(0,Si.jsx)(rK,{dataKey:"fecha",style:{fontSize:e?"10px":"min(1.8dvh, 0.9dvw)"}}),(0,Si.jsx)(oK,{tickFormatter:function(t){return t>1e9?"$".concat(t/1e9," mil millones"):"$".concat(t.toLocaleString())},style:{fontSize:e?"10px":"min(1.8dvh, 0.9dvw)"}}),(0,Si.jsx)(yB,{content:(0,Si.jsx)(u,{activeIndex:s})}),(0,Si.jsx)(ZF,{content:(0,Si.jsx)(W7,{})}),n.length>0&&N7.map(((t,e)=>(0,Si.jsx)(D7,{type:"monotone",dataKey:t,stackId:"1",stroke:h(t),fill:h(t),onMouseEnter:()=>l(t),onMouseLeave:()=>l(void 0),strokeOpacity:t===s?1:.4,fillOpacity:t===s?1:.6},e)))]})})]})}},islasCalor:{title:"\xbfPor qu\xe9 sentimos tanto calor?",answer:"Porque el 25% del \xe1rea de la zona urbana son vialidades, hemos construido una ciudad de asfalto.",color:"teal1",icon:function(t){return Uz({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"}},{tag:"path",attr:{d:"M15 13V5c0-1.66-1.34-3-3-3S9 3.34 9 5v8c-1.21.91-2 2.37-2 4 0 2.76 2.24 5 5 5s5-2.24 5-5c0-1.63-.79-3.09-2-4zm-4-8c0-.55.45-1 1-1s1 .45 1 1h-1v1h1v2h-1v1h1v2h-2V5z"}}]})(t)},component:function(){const{color:t,currentSection:e}=olt(),{data:n}=wat(hat,[]),r=n.map((t=>({...t,caliente2:(t.muy_caliente||0)+(t.caliente||0)+(t.ligeramente_calido||0)})));return(0,Si.jsxs)(Si.Fragment,{children:[(0,Si.jsx)(eR,{color:t,children:Eat[e].answer}),(0,Si.jsx)("p",{children:"La Zona Metropolitana de Monterrey enfrenta un creciente fen\xf3meno llamado 'efecto isla de calor' que se presenta cuando las \xe1reas urbanas tienen temperaturas m\xe1s altas que las rurales, debido a la presencia de edificios, asfalto y concreto."}),(0,Si.jsx)("p",{children:"La infraestructura, principalmente la de estos dos materiales, retiene calor y lo libera gradualmente, intensificando este efecto. En el centro de Monterrey, la alta densidad de edificios y la falta de \xe1reas verdes aumentan las temperaturas, hasta en 9\xb0, en comparaci\xf3n con las zonas que cuentan con mayor arbolado. Esto afecta negativamente la salud y la calidad de vida, especialmente en verano."}),(0,Si.jsx)(nR,{color:t,children:"El r\xe1pido crecimiento urbano, sumado a la escasez de infraestructura verde y a la falta de una planificaci\xf3n sostenible, agrava a\xfan m\xe1s este fen\xf3meno."}),(0,Si.jsx)(ftt,{title:"Islas de calor datos",data:r,domain:[0,100],column:"caliente2",columnKey:"NOM_MUN",formatter:t=>dv(".2f")(t)+"%"})]})},controls:()=>{const{color:t}=olt(),[e,n]=(0,r.useState)(z5),[i,o]=(0,r.useState)([]),{data:a}=wat(uat),{data:s}=wat(lat),{data:l}=wat(dat);return(0,r.useEffect)((()=>{if(!a)return;const t=a.features.map((t=>t.properties.Value));o(function(t,e,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;const i=r||(t=>t.toLocaleString("en-US",{maximumFractionDigits:0})),o=e.map(((t,r)=>{const o=zot(t,e,n,1);return{color:"rgba(".concat(o.join(","),")"),item:i(t)}}));return o}(t,[7,6,5,4,3,2,1],ctt))}),[a]),a?(0,Si.jsxs)(Si.Fragment,{children:[(0,Si.jsxs)(F5,{viewState:e,setViewState:n,children:[(0,Si.jsx)(ltt,{id:"heatmap",data:l.features,getPosition:t=>t.geometry.coordinates,getWeight:1,colorRange:[[0,0,0,50],[0,0,0,255]],radiusPixels:5*e.zoom,intensity:2}),(0,Si.jsx)(zz,{id:"islas_calor_layer",data:Dot(a.features,"Value"),getFillColor:t=>zot(t.properties.Value,[7,6,5,4,3,2,1],ctt,.5),getLineWidth:0,opacity:.8}),(0,Si.jsx)(zz,{id:"parques_layer",data:Dot(s.features,"area"),getFillColor:[150,200,112],getLineColor:[80,120,20],getLineWidth:10}),(0,Si.jsx)(p9,{videoId:"19auBpQR8Ik",title:"Fabi\xe1n Lozano",subtitle:"Tecnol\xf3gico de Monterrey, Escuela de Ingenier\xeda y Ciencias. (Em\xe9rito)",text:"Bienestar clim\xe1tico inclusivo."})]}),"[legendItems &&"," ",(0,Si.jsxs)(L9,{title:"Islas de calor",color:t,description:(0,Si.jsxs)(Si.Fragment,{children:[(0,Si.jsx)("b",{children:"Urban reporting based on satellite analysis (URSA)"}),(0,Si.jsx)("p",{children:"Las islas de calor se calculan a partir de la banda que determinan los satelites LANDSAT, se toma el promedio de la temperatura pixel por un a\xf1o y se comparan la zona rural con cobertura vegetal circundaria. A partir de la temperatura de la desviacion estandar de la temperatura rural. Las zonas m\xe1s calientes son aquellas que est\xe1n m\xe1s de 3 desviaciones est\xe1ndar arriba de la temperatura rural."})]}),children:[(0,Si.jsx)(j9,{color:"#647896",label:"Vialidades Principales"}),(0,Si.jsx)(j9,{color:"gray",label:"Zonas Industriales"}),(0,Si.jsx)(j9,{color:"rgb(150, 200, 112)",label:"Parques"}),(0,Si.jsx)("div",{style:{height:"10px"}}),i.map(((t,e)=>(0,Si.jsx)(j9,{color:t.color,label:utt[t.item-1]},t.item)))]}),"]"]}):(0,Si.jsx)(L5,{})}},escenariosFuturos:{title:"\xbfQu\xe9 pasar\xeda si no cambiamos?",answer:"Tendremos una ciudad m\xe1s dispersa, con centralidades desconectadas y social y territorialmente fragmentada",color:"teal2",icon:function(t){return Uz({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0V0z"}},{tag:"path",attr:{d:"M11.99 2C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2zM12 20c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8zm.5-13H11v6l5.25 3.15.75-1.23-4.5-2.67z"}}]})(t)},component:function(){const{color:t,currentSection:e}=olt(),{data:n}=wat("https://sium.blob.core.windows.net/sium/datos/escenarios.json",[]);return(0,Si.jsxs)(Si.Fragment,{children:[(0,Si.jsx)(eR,{color:t,children:Eat[e].answer}),(0,Si.jsx)("p",{children:"La ZMM ha agregado en promedio en los \xfaltimos 30 a\xf1os 5.4 km2 cada a\xf1o de suelo construido, equivalente a 700 campos de f\xfatbol. Este suelo deja de ser agr\xedcola o forestal y se suma a la mancha urbana anualmente. El patr\xf3n de urbanizaci\xf3n de Monterrey en las \xfaltimas tres d\xe9cadas muestra una expansi\xf3n de baja densidad hacia las periferias. Utilizando datos hist\xf3ricos, simulamos y proyectamos que, de continuar as\xed, en 2070 la superficie urbanizada crecer\xe1 un 76%, fragmentando la ciudad y aumentando la integraci\xf3n de centralidades lejanas como Santiago, Saltillo y Ramos Arizpe a la metr\xf3poli."}),(0,Si.jsx)("p",{children:"Planteamos dos alternativas de crecimiento: controlado (mil km\xb2 urbanizados) o acelerado (casi 2 mil km\xb2 urbanizados). Alcanzar uno u otro escenario depender\xe1 de las pol\xedticas actuales para regularlo, y de si consiguen enfocarse en regenerar y densificar, asegurando, por ejemplo, vivienda asequible en municipios centrales como San Nicol\xe1s, Guadalupe y Monterrey."}),(0,Si.jsx)(gtt,{title:"Proyecci\xf3n de superficie urbanizada 2020-2070",data:n,domain:[2020,2030,2040,2050,2060,2070],lines:vtt,lineColors:ytt,columnKey:"year",formatter:t=>t.toLocaleString("en-US",{maximumFractionDigits:0})+" km\xb2"})]})},controls:()=>{const{color:t}=olt(),[e,n]=(0,r.useState)(z5),[i,o]=(0,r.useState)("acelerada"),a=_tt[i],{data:s}=wat("https://sium.blob.core.windows.net/sium/datos/escenarios.geojson");return s?(0,Si.jsxs)(Si.Fragment,{children:[(0,Si.jsxs)(F5,{viewState:e,setViewState:n,children:[(0,Si.jsx)(zz,{id:"escenarios_layer",data:s.features.filter((t=>"actual"===t.properties.escenario||t.properties.escenario===i)),getFillColor:t=>"actual"===t.properties.escenario?[168,174,193]:gat(a),opacity:.6}),(0,Si.jsx)(k9,{color:t,activeButton:i,setActiveButton:o,mapping:[{id:"controlada",name:"Controlada"},{id:"inercial",name:"Inercial"},{id:"acelerada",name:"Acelerada"}]}),(0,Si.jsx)(p9,{videoId:"ATySU6rtJ98",title:"Jos\xe9 Antonio Torre",subtitle:"Tecnol\xf3gico de Monterrey, Centro para el Futuro de las Ciudades.",text:"Escenarios a futuro."})]}),(0,Si.jsxs)(L9,{title:"Escenarios a futuro",color:t,description:(0,Si.jsxs)(Si.Fragment,{children:[(0,Si.jsx)("b",{children:"SLEUTH (Slope-Land use-Elevation-Urbanization-Transportation-Hillshade)"}),(0,Si.jsx)("p",{children:"Modelo de simulacion urbana de monterrey se construy\xf3 a partir de este modelo."}),(0,Si.jsx)("p",{children:"El modelo tuvo un proceso de calibracion para simular procesos de expansion a partir de la informaicon hist\xf3rica de Monterrey."}),(0,Si.jsx)("p",{children:"Clarke, K. C., & Johnson, J. M. (2020). Calibrating SLEUTH with big data: Projecting California's land use to 2100. Computers, Environment and Urban Systems, 83, 101525."})]}),children:[(0,Si.jsx)(j9,{color:"#A8AEC1",label:"Suelo urbanizado"}),(0,Si.jsx)(j9,{color:a,label:"Expansi\xf3n ".concat(i)})]})]}):(0,Si.jsx)(L5,{})}}};function Tat(t){return Uz({tag:"svg",attr:{viewBox:"0 0 16 16",fill:"currentColor"},child:[{tag:"path",attr:{d:"M10.44 2l.56.413v11.194l-.54.393L5 8.373v-.827L10.44 2z"}}]})(t)}const Mat=t=>{let{section:e,setSection:n}=t;const[r]=ki("(max-width: 800px)");return(0,Si.jsxs)(Ei,{className:"sidebar",bgColor:"blackAlpha.400",children:[(0,Si.jsxs)("div",{className:"sidebarContainer",children:[(0,Si.jsx)(At,{to:"/",children:(0,Si.jsx)(Ki,{className:"sidebarItem",variant:"solid",colorScheme:"blackAlpha",bgColor:"blackAlpha.400",style:{height:r?"40px":"min(7dvh, 3dvw)"},children:(0,Si.jsx)(Qi,{as:Tat,color:"white",style:{height:"min(3dvh, 1dvw)",width:"min(3dvh, 1dvw)"}})})}),Object.keys(Eat).map((t=>(0,Si.jsx)(Pp,{label:Eat[t].title,hasArrow:!0,padding:"0.5rem",bg:"gray.700",fontSize:"md",borderRadius:"md",placement:"right",children:(0,Si.jsx)(Ki,{className:"sidebarItem",variant:"solid",colorScheme:Eat[t].color,bgColor:"".concat(Eat[t].color,".400"),isActive:e===t,onClick:()=>function(t){const e=document.getElementById(t);e&&(n(t),e.scrollIntoView())}(t),style:{height:r?"40px":"min(7dvh, 3dvw)"},children:(0,Si.jsx)(Qi,{as:Eat[t].icon,color:"white",style:{height:"min(4dvh, 1.5dvw)",width:"min(4dvh, 1.5dvw)"}})},t)},t)))]}),(0,Si.jsx)("div",{style:{flex:1}}),(0,Si.jsx)(Pp,{label:"Enviar comentario",hasArrow:!0,padding:"0.5rem",bg:"gray.700",fontSize:"md",borderRadius:"md",placement:"right",children:(0,Si.jsx)("a",{href:"https://forms.office.com/r/HtvBBujdAe",children:(0,Si.jsx)(kp,{isRound:!0,icon:(0,Si.jsx)(qz,{style:{width:"min(2dvh, 1dvw)",height:"min(2dvh, 1dvw)"}}),variant:"solid",colorScheme:"blackAlpha",style:{minWidth:"min(6dvh, 2dvw)",height:"min(6dvh, 2dvw)",margin:"0.2rem"}})})}),(0,Si.jsx)(Pp,{label:"Acerca del Equipo",hasArrow:!0,padding:"0.5rem",bg:"gray.700",fontSize:"md",borderRadius:"md",placement:"right",children:(0,Si.jsx)(At,{to:"/acerca",children:(0,Si.jsx)(kp,{isRound:!0,icon:(0,Si.jsx)(Zz,{style:{width:"min(2dvh, 1dvw)",height:"min(2dvh, 1dvw)"}}),variant:"solid",colorScheme:"blackAlpha",style:{minWidth:"min(6dvh, 2dvw)",height:"min(6dvh, 2dvw)",margin:"0.2rem"}})})}),(0,Si.jsx)(Pp,{label:"Descarga de Datos",hasArrow:!0,padding:"0.5rem",bg:"gray.700",fontSize:"md",borderRadius:"md",placement:"right",children:(0,Si.jsx)(At,{to:"/descargas",children:(0,Si.jsx)(kp,{isRound:!0,icon:(0,Si.jsx)(Hz,{style:{width:"min(2dvh, 1dvw)",height:"min(2dvh, 1dvw)"}}),variant:"solid",colorScheme:"blackAlpha",style:{minWidth:"min(6dvh, 2dvw)",height:"min(6dvh, 2dvw)",margin:"0.2rem"}})})})]})},Aat=t=>{let{section:e,setSection:n}=t;return(0,Si.jsx)(Ei,{className:"sidebarMobile",bgColor:"blackAlpha.400",children:(0,Si.jsxs)("div",{className:"sidebarContainerMobile",children:[(0,Si.jsx)(At,{to:"/",children:(0,Si.jsx)(Ki,{className:"sidebarItem",variant:"solid",colorScheme:"blackAlpha",bgColor:"blackAlpha.400",style:{height:"40px"},children:(0,Si.jsx)(Qi,{as:Tat,color:"white",style:{height:"10px",width:"10px"}})})}),Object.keys(Eat).map((t=>(0,Si.jsx)(Ki,{className:"sidebarItem",size:"md",variant:"solid",colorScheme:Eat[t].color,bgColor:"".concat(Eat[t].color,".300"),isActive:e===t,onClick:()=>{n(t)},style:{padding:"0.8rem"},children:(0,Si.jsx)(Qi,{as:Eat[t].icon,boxSize:5,color:"white"})},t))),(0,Si.jsx)("div",{style:{marginLeft:"20px"}}),(0,Si.jsx)(Pp,{label:"Enviar comentario",hasArrow:!0,padding:"0.5rem",bg:"gray.700",fontSize:"md",borderRadius:"md",placement:"right",children:(0,Si.jsx)("a",{href:"https://forms.office.com/r/HtvBBujdAe",style:{margin:"auto"},children:(0,Si.jsx)(kp,{size:"sm",isRound:!0,icon:(0,Si.jsx)(qz,{}),variant:"solid",style:{marginRight:"5px"},colorScheme:"blackAlpha"})})}),(0,Si.jsx)(Pp,{label:"Acerca del Equipo",hasArrow:!0,padding:"0.5rem",bg:"gray.700",fontSize:"md",borderRadius:"md",placement:"right",children:(0,Si.jsx)(At,{to:"/acerca",style:{margin:"auto"},children:(0,Si.jsx)(kp,{size:"sm",isRound:!0,icon:(0,Si.jsx)(Zz,{}),variant:"solid",style:{marginRight:"5px"},colorScheme:"blackAlpha"})})}),(0,Si.jsx)(Pp,{label:"Descarga de Datos",hasArrow:!0,padding:"0.5rem",bg:"gray.700",fontSize:"md",borderRadius:"md",placement:"right",children:(0,Si.jsx)(At,{to:"/descargas",style:{margin:"auto"},children:(0,Si.jsx)(kp,{size:"sm",isRound:!0,icon:(0,Si.jsx)(Hz,{}),variant:"solid",style:{marginRight:"5px"},colorScheme:"blackAlpha"})})})]})})},Cat=t=>{let{section:e,color:n,title:r}=t;return(0,Si.jsxs)(Ei,{bgColor:"".concat(n,".500"),className:"headerContainer",children:[(0,Si.jsxs)(At,{as:"div",to:"/",style:{display:"flex",justifyContent:"space-around",height:"8dvh",width:"100%"},children:[(0,Si.jsx)("img",{className:"headerImage",src:"SIUM.png",alt:"SIUM",style:{padding:"5px",maxWidth:"33%",maxHeight:"100%",height:"auto",width:"auto",objectFit:"contain"}}),(0,Si.jsx)("img",{className:"headerImage",src:"tec.png",alt:"Tec de Monterrey",style:{padding:"5px",maxWidth:"33%",maxHeight:"100%",height:"auto",width:"auto",objectFit:"contain"}}),(0,Si.jsx)("img",{className:"headerImage",src:"fundacion_femsa.png",alt:"Fundacion FEMSA",style:{padding:"5px",maxWidth:"33%",maxHeight:"100%",height:"auto",width:"auto",objectFit:"contain"}})]}),(0,Si.jsx)(Ei,{className:"titleContainer",bgColor:"".concat(n,".500"),children:(0,Si.jsx)(Yz,{className:"title",color:"".concat(n,".500"),borderColor:"".concat(n,".500"),style:{fontSize:"min(2.4dvh, 1.2dvw)"},children:(0,Si.jsx)(bp.div,{initial:{opacity:0},animate:{opacity:1,transition:{duration:.7}},children:r},e)})})]})},Pat=t=>{let{color:e,title:n,open:r,setOpen:i}=t;return(0,Si.jsx)(Yz,{className:"titleMobile",color:"white",bg:"".concat(e,".500"),borderColor:"".concat(e,".500"),fontSize:"0.8rem",onClick:i,children:(0,Si.jsx)(bp.div,{initial:{opacity:0,scale:.8,y:-10},animate:{opacity:1,scale:1,y:0,transition:{duration:.5}},children:n})})};function kat(t){const e=Ol((()=>Sh(t))),{isStatic:n}=(0,r.useContext)(ss);if(n){const[,n]=(0,r.useState)(t);(0,r.useEffect)((()=>e.on("change",n)),[])}return e}function Iat(){!sp.current&&lp();const[t]=(0,r.useState)(ap.current);return t}const Oat=t=>(t=>t&&"object"===typeof t&&t.mix)(t)?t.mix:void 0;function Lat(t,e){const n=kat(e()),r=()=>n.set(e());return r(),hs((()=>{const e=()=>Vl.update(r,!1,!0),n=t.map((t=>t.on("change",e)));return()=>{n.forEach((t=>t())),Wl(r)}})),n}function jat(t,e,n,r){if("function"===typeof t)return function(t){xh.current=[],t();const e=Lat(xh.current,t);return xh.current=void 0,e}(t);const i="function"===typeof e?e:function(){const t=!Array.isArray(arguments.length<=0?void 0:arguments[0]),e=t?0:-1,n=0+e<0||arguments.length<=0+e?void 0:arguments[0+e],r=2+e<0||arguments.length<=2+e?void 0:arguments[2+e],i=3+e<0||arguments.length<=3+e?void 0:arguments[3+e],o=Su(1+e<0||arguments.length<=1+e?void 0:arguments[1+e],r,{mixer:Oat(r[0]),...i});return t?o(n):o}(e,n,r);return Array.isArray(t)?zat(t,i):zat([t],(t=>{let[e]=t;return i(e)}))}function zat(t,e){const n=Ol((()=>[]));return Lat(t,(()=>{n.length=0;const r=t.length;for(let e=0;e<r;e++)n[e]=t[e].get();return e(n)}))}const Rat=Yu((()=>void 0!==window.ScrollTimeline));class Dat{constructor(t){this.animations=t.filter(Boolean)}then(t,e){return Promise.all(this.animations).then(t).catch(e)}getAll(t){return this.animations[0][t]}setAll(t,e){for(let n=0;n<this.animations.length;n++)this.animations[n][t]=e}attachTimeline(t){const e=this.animations.map((e=>{if(!Rat()||!e.attachTimeline)return e.pause(),function(t,e){let n;const r=()=>{const{currentTime:r}=e,i=(null===r?0:r.value)/100;n!==i&&t(i),n=i};return Vl.update(r,!0),()=>Wl(r)}((t=>{e.time=e.duration*t}),t);e.attachTimeline(t)}));return()=>{e.forEach(((t,e)=>{t&&t(),this.animations[e].stop()}))}}get time(){return this.getAll("time")}set time(t){this.setAll("time",t)}get speed(){return this.getAll("speed")}set speed(t){this.setAll("speed",t)}get duration(){let t=0;for(let e=0;e<this.animations.length;e++)t=Math.max(t,this.animations[e].duration);return t}runAll(t){this.animations.forEach((e=>e[t]()))}play(){this.runAll("play")}pause(){this.runAll("pause")}stop(){this.runAll("stop")}cancel(){this.runAll("cancel")}complete(){this.runAll("complete")}}function Bat(t){const e={presenceContext:null,props:{},visualState:{renderState:{transform:{},transformOrigin:{},style:{},vars:{},attrs:{}},latestValues:{}}},n=pf(t)?new yp(e,{enableHardwareAcceleration:!1}):new gp(e,{enableHardwareAcceleration:!0});n.mount(t),cp.set(t,n)}function Fat(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:100;const n=Vu({keyframes:[0,e],...t}),r=Math.min(Hu(n),qu);return{type:"keyframes",ease:t=>n.next(r*t).value/e,duration:wc(r)}}function Nat(t,e,n,r){var i;return"number"===typeof e?e:e.startsWith("-")||e.startsWith("+")?Math.max(0,t+parseFloat(e)):"<"===e?n:null!==(i=r.get(e))&&void 0!==i?i:t}const Uat=(t,e,n)=>{const r=e-t;return((n-t)%r+r)%r+t};function Vat(t,e){return Rc(t)?t[Uat(0,t.length,e)]:t}function Wat(t,e,n,r,i,o){!function(t,e,n){for(let r=0;r<t.length;r++){const i=t[r];i.at>e&&i.at<n&&(_h(t,i),r--)}}(t,i,o);for(let a=0;a<e.length;a++)t.push({value:e[a],at:tu(i,o,r[a]),easing:Vat(n,a)})}function Gat(t,e){return t.at===e.at?null===t.value?1:null===e.value?-1:0:t.at-e.at}const qat="easeInOut";function Hat(t,e){return!e.has(t)&&e.set(t,{}),e.get(t)}function Zat(t,e){return e[t]||(e[t]=[]),e[t]}function Xat(t){return Array.isArray(t)?t:[t]}function Yat(t,e){return t[e]?{...t,...t[e]}:{...t}}const Kat=t=>"number"===typeof t,$at=t=>t.every(Kat);function Jat(t,e,n,r){const i=$z(t,r),o=i.length;bc(Boolean(o),"No valid element provided.");const a=[];for(let s=0;s<o;s++){const t=i[s];cp.has(t)||Bat(t);const r=cp.get(t),l={...n};"function"===typeof l.delay&&(l.delay=l.delay(s,o)),a.push(...Lh(r,{...e,transition:l},{}))}return new Dat(a)}function Qat(t,e,n){const r=[],i=function(t){let{defaultTransition:e={},...n}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2?arguments[2]:void 0;const i=e.duration||.3,o=new Map,a=new Map,s={},l=new Map;let c=0,u=0,h=0;for(let d=0;d<t.length;d++){const n=t[d];if("string"===typeof n){l.set(n,u);continue}if(!Array.isArray(n)){l.set(n.name,Nat(u,n.at,c,l));continue}let[o,f,p={}]=n;void 0!==p.at&&(u=Nat(u,p.at,c,l));let m=0;const g=function(t,n,r){let o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0;const s=Xat(t),{delay:l=0,times:c=Tu(s),type:d="keyframes",...f}=n;let{ease:p=e.ease||"easeOut",duration:g}=n;const y="function"===typeof l?l(o,a):l,v=s.length;if(v<=2&&"spring"===d){let t=100;if(2===v&&$at(s)){const e=s[1]-s[0];t=Math.abs(e)}const e={...f};void 0!==g&&(e.duration=xc(g));const n=Fat(e,t);p=n.ease,g=n.duration}null!==g&&void 0!==g||(g=i);const _=u+y,b=_+g;1===c.length&&0===c[0]&&(c[1]=1);const x=c.length-s.length;x>0&&Eu(c,x),1===s.length&&s.unshift(null),Wat(r,s,p,c,_,b),m=Math.max(y+g,m),h=Math.max(b,h)};if(Bs(o))g(f,p,Zat("default",Hat(o,a)));else{const t=$z(o,r,s),e=t.length;for(let n=0;n<e;n++){const r=Hat(t[n],a);for(const t in f)g(f[t],Yat(p,t),Zat(t,r),n,e)}}c=u,u+=m}return a.forEach(((t,r)=>{for(const i in t){const a=t[i];a.sort(Gat);const s=[],l=[],c=[];for(let t=0;t<a.length;t++){const{at:e,value:n,easing:r}=a[t];s.push(n),l.push(bu(0,h,e)),c.push(r||"easeOut")}0!==l[0]&&(l.unshift(0),s.unshift(s[0]),c.unshift(qat)),1!==l[l.length-1]&&(l.push(1),s.push(null)),o.has(r)||o.set(r,{keyframes:{},transition:{}});const u=o.get(r);u.keyframes[i]=s,u.transition[i]={...e,duration:h,ease:c,times:l,...n}}})),o}(t,e,n);return i.forEach(((t,e)=>{let n,{keyframes:i,transition:o}=t;n=Bs(e)?mf(e,i.default,o.default):Jat(e,i,o),r.push(n)})),new Dat(r)}const tst=function(t,e,n){let r;return r=(t=>Array.isArray(t)&&Array.isArray(t[0]))(t)?Qat(t,e,est):function(t){return"object"===typeof t&&!Array.isArray(t)}(e)?Jat(t,e,n,est):mf(t,e,n),est&&est.animations.push(r),r};var est;const nst="undefined"!==typeof window?r.useLayoutEffect:()=>{};new Map;function rst(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return function(){for(let t of e)"function"===typeof t&&t(...arguments)}}new Set(["id"]),new Set(["aria-label","aria-labelledby","aria-describedby","aria-details"]);let ist=new Map,ost=new Set;function ast(){if("undefined"===typeof window)return;let t=e=>{let n=ist.get(e.target);if(n&&(n.delete(e.propertyName),0===n.size&&(e.target.removeEventListener("transitioncancel",t),ist.delete(e.target)),0===ist.size)){for(let t of ost)t();ost.clear()}};document.body.addEventListener("transitionrun",(e=>{let n=ist.get(e.target);n||(n=new Set,ist.set(e.target,n),e.target.addEventListener("transitioncancel",t)),n.add(e.propertyName)})),document.body.addEventListener("transitionend",t)}"undefined"!==typeof document&&("loading"!==document.readyState?ast():document.addEventListener("DOMContentLoaded",ast));function sst(t){for(lst(t)&&(t=t.parentElement);t&&!lst(t);)t=t.parentElement;return t||document.scrollingElement||document.documentElement}function lst(t){let e=window.getComputedStyle(t);return/(auto|scroll)/.test(e.overflow+e.overflowX+e.overflowY)}"undefined"!==typeof window&&window.visualViewport;new Map;function cst(t){var e;return"undefined"!==typeof window&&null!=window.navigator&&t.test((null===(e=window.navigator.userAgentData)||void 0===e?void 0:e.platform)||window.navigator.platform)}function ust(){return cst(/^Mac/i)}function hst(){return cst(/^iPhone/i)||cst(/^iPad/i)||ust()&&navigator.maxTouchPoints>1}function dst(){return dst=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},dst.apply(this,arguments)}function fst(t,e){if(null==t)return{};var n,r,i={},o=Object.keys(t);for(r=0;r<o.length;r++)n=o[r],e.indexOf(n)>=0||(i[n]=t[n]);return i}var pst="calc(100% - env(safe-area-inset-top) - 34px)",mst="undefined"===typeof window,gst={ease:"easeOut",duration:.2},yst={ease:"linear",duration:.01};function vst(t,e){for(var n=t[0],r=Math.abs(t[0]-e),i=1;i<t.length;i++){var o=Math.abs(t[i]-e);o<r&&(n=t[i],r=o)}return n}function _st(t){var e=document.querySelector("body"),n=document.getElementById(t);n&&(n.style.removeProperty("border-top-right-radius"),n.style.removeProperty("border-top-left-radius"),n.style.removeProperty("transform"),n.addEventListener("transitionend",(function t(){n.style.removeProperty("overflow"),n.style.removeProperty("will-change"),n.style.removeProperty("transition"),e.style.removeProperty("background-color"),n.removeEventListener("transitionend",t)})))}function bst(t){var e=t.snapTo,n=t.sheetHeight;return e<0&&console.warn("Snap point is out of bounds. Sheet height is "+n+" but snap point is "+(n+Math.abs(e))+"."),Math.max(Math.round(e),0)}function xst(t){return function(e){t.forEach((function(t){"function"===typeof t?t(e):t&&(t.current=e)}))}}var wst=mst?r.useEffect:r.useLayoutEffect;function Sst(t,e){var n=Est(t);(0,r.useEffect)((function(){e&&!n&&t?function(t){var e=document.querySelector("body"),n=document.querySelector("#"+t);if(n){var r=window.innerHeight,i=(r-24)/r;e.style.backgroundColor="#000",n.style.overflow="hidden",n.style.willChange="transform",n.style.transition="transform 200ms ease-in-out, border-radius 200ms linear",n.style.transform="translateY(calc(env(safe-area-inset-top) + 12px)) scale("+i+")",n.style.borderTopRightRadius="10px",n.style.borderTopLeftRadius="10px"}}(e):e&&!t&&n&&_st(e)}),[t,n]),(0,r.useEffect)((function(){return function(){e&&t&&_st(e)}}),[t])}function Est(t){var e=(0,r.useRef)();return(0,r.useEffect)((function(){e.current=t})),e.current}function Tst(t){var e=(0,r.useRef)();return wst((function(){e.current=t})),(0,r.useCallback)((function(){for(var t=e.current,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return null==t?void 0:t.apply(void 0,r)}),[])}var Mst={bottom:0,top:0,left:0,right:0};function Ast(){return{constraintsRef:(0,r.useRef)(null),onMeasureDragConstraints:(0,r.useCallback)((function(){return Mst}),[])}}var Cst=(0,r.createContext)(void 0),Pst=function(){var t=(0,r.useContext)(Cst);if(!t)throw Error("Sheet context error");return t},kst=(0,r.createContext)(void 0);function Ist(t){var e=t.children,n=Pst(),i=(0,r.useState)(!!n.disableDrag),o=i[0],a=i[1];return(0,r.createElement)(kst.Provider,{value:{disableDrag:o,setDragEnabled:function(){n.disableDrag||a(!1)},setDragDisabled:function(){o||a(!0)}}},e)}var Ost,Lst=function(){var t=(0,r.useContext)(kst);if(!t)throw Error("Sheet scroller context error");return t},jst="undefined"!==typeof window&&window.visualViewport,zst=new Set(["checkbox","radio","range","color","file","image","button","submit","reset"]),Rst=0;function Dst(t){void 0===t&&(t={});var e=t.isDisabled;nst((function(){if(!e)return 1===++Rst&&(Ost=hst()?function(){var t,e=0,n=function(n){(t=sst(n.target))===document.documentElement&&t===document.body||(e=n.changedTouches[0].pageY)},r=function(n){if(void 0!==t)if(t!==document.documentElement&&t!==document.body){var r=n.changedTouches[0].pageY,i=t.scrollTop,o=t.scrollHeight-t.clientHeight;0!==o&&((i<=0&&r>e||i>=o&&r<e)&&n.preventDefault(),e=r)}else n.preventDefault()},i=function(t){var e=t.target;Ust(e)&&e!==document.activeElement&&(t.preventDefault(),e.style.transform="translateY(-2000px)",e.focus(),requestAnimationFrame((function(){e.style.transform=""})))},o=function(t){var e=t.target;Ust(e)&&(e.style.transform="translateY(-2000px)",requestAnimationFrame((function(){e.style.transform="",jst&&(jst.height<window.innerHeight?requestAnimationFrame((function(){Nst(e)})):jst.addEventListener("resize",(function(){return Nst(e)}),{once:!0}))})))},a=function(){window.scrollTo(0,0)},s=window.pageXOffset,l=window.pageYOffset,c=rst(Bst(document.documentElement,"paddingRight",window.innerWidth-document.documentElement.clientWidth+"px"),Bst(document.documentElement,"overflow","hidden"),Bst(document.body,"marginTop","-"+l+"px"));window.scrollTo(0,0);var u=rst(Fst(document,"touchstart",n,{passive:!1,capture:!0}),Fst(document,"touchmove",r,{passive:!1,capture:!0}),Fst(document,"touchend",i,{passive:!1,capture:!0}),Fst(document,"focus",o,!0),Fst(window,"scroll",a));return function(){c(),u(),window.scrollTo(s,l)}}():rst(Bst(document.documentElement,"paddingRight",window.innerWidth-document.documentElement.clientWidth+"px"),Bst(document.documentElement,"overflow","hidden"))),function(){0===--Rst&&Ost()}}),[e])}function Bst(t,e,n){var r=t.style[e];return t.style[e]=n,function(){t.style[e]=r}}function Fst(t,e,n,r){return t.addEventListener(e,n,r),function(){t.removeEventListener(e,n,r)}}function Nst(t){for(var e=document.scrollingElement||document.documentElement;t&&t!==e;){var n=sst(t);if(n!==document.documentElement&&n!==document.body&&n!==t){var r=n.getBoundingClientRect().top,i=t.getBoundingClientRect().top;i>r+t.clientHeight&&(n.scrollTop+=i-r)}t=n.parentElement}}function Ust(t){return t instanceof HTMLInputElement&&!zst.has(t.type)||t instanceof HTMLTextAreaElement||t instanceof HTMLElement&&t.isContentEditable}var Vst={wrapper:{position:"fixed",top:0,bottom:0,left:0,right:0,overflow:"hidden",pointerEvents:"none"},backdrop:{zIndex:1,position:"fixed",top:0,left:0,width:"100%",height:"100%",backgroundColor:"rgba(0, 0, 0, 0.2)",touchAction:"none",border:"none"},container:{zIndex:2,position:"absolute",left:0,bottom:0,width:"100%",backgroundColor:"#fff",borderTopRightRadius:"8px",borderTopLeftRadius:"8px",boxShadow:"0px -2px 16px rgba(0, 0, 0, 0.3)",display:"flex",flexDirection:"column",pointerEvents:"auto"},headerWrapper:{width:"100%"},header:{height:"40px",width:"100%",position:"relative",display:"flex",alignItems:"center",justifyContent:"center"},indicator:{width:"18px",height:"4px",borderRadius:"99px",backgroundColor:"#ddd"},content:{flexGrow:1,display:"flex",flexDirection:"column",minHeight:"0px",position:"relative"},scroller:{height:"100%",overflowY:"auto"}},Wst=["onOpenStart","onOpenEnd","onClose","onCloseStart","onCloseEnd","onSnap","children","disableScrollLocking","isOpen","snapPoints","rootId","mountPoint","style","detent","initialSnap","disableDrag","prefersReducedMotion","tweenConfig"],Gst=(0,r.forwardRef)((function(t,e){var n=t.onOpenStart,i=t.onOpenEnd,o=t.onClose,s=t.onCloseStart,l=t.onCloseEnd,c=t.onSnap,u=t.children,h=t.disableScrollLocking,d=void 0!==h&&h,f=t.isOpen,p=t.snapPoints,m=t.rootId,g=t.mountPoint,y=t.style,v=t.detent,_=void 0===v?"full-height":v,b=t.initialSnap,x=void 0===b?0:b,w=t.disableDrag,S=void 0!==w&&w,E=t.prefersReducedMotion,T=void 0!==E&&E,M=t.tweenConfig,A=void 0===M?gst:M,C=fst(t,Wst),P=(0,r.useRef)(null),k=kat(0),I=function(){var t=(0,r.useState)(0),e=t[0],n=t[1];return wst((function(){var t=function(){return n(window.innerHeight)};return window.addEventListener("resize",t),t(),function(){return window.removeEventListener("resize",t)}}),[]),e}(),O=Iat(),L=Boolean(T||O),j=dst({type:"tween"},L?yst:A),z=kat(0),R=jat(z,(function(t){return t>=I?-1:9999999})),D=jat(z,(function(t){return t>=I?"hidden":"visible"})),B=(0,r.useRef)({onOpenStart:n,onOpenEnd:i,onCloseStart:s,onCloseEnd:l});wst((function(){B.current={onOpenStart:n,onOpenEnd:i,onCloseStart:s,onCloseEnd:l}})),p&&(p=p.map((function(t){return t>0&&t<=1?Math.round(t*I):t<0?I+t:t})),console.assert(function(t){for(var e=0;e<t.length;e++)if(t[e+1]>t[e])return!1;return!0}(p)||0===I,"Snap points need to be in descending order got: ["+p+"]"));var F=Tst((function(t,e){var n=e.delta,r=z.getVelocity();r>0&&k.set(10),r<0&&k.set(-10),z.set(Math.max(z.get()+n.y,0))})),N=Tst((function(t,e){if(e.velocity.y>500)o();else{var n=P.current.getBoundingClientRect().height,r=z.get(),i=0;if(p){var a=p.map((function(t){return n-Math.min(t,n)}));"content-height"!==_||a.includes(0)||a.unshift(0),i=vst(a,r)}else r/n>.6&&(i=n);if(i=bst({snapTo:i,sheetHeight:n}),tst(z,i,j),p&&c){var s=Math.abs(Math.round(p[0]-i)),l=p.indexOf(vst(p,s));c(l)}i>=Math.round(n)&&o()}k.set(0)}));(0,r.useEffect)((function(){if(p&&c){var t=f?x:p.length-1;c(t)}}),[f]),(0,r.useImperativeHandle)(e,(function(){return{y:z,snapTo:function(t){var e=P.current;if(p&&void 0!==p[t]&&null!==e){var n=e.getBoundingClientRect().height,r=bst({snapTo:n-p[t],sheetHeight:n});tst(z,r,j),c&&c(t),r>=n&&o()}}}})),Sst(f,m),Dst({isDisabled:!0===d||!f});var U=(0,r.useMemo)((function(){return S?void 0:{drag:"y",dragElastic:0,dragMomentum:!1,dragPropagation:!1,onDrag:F,onDragEnd:N}}),[S]),V={y:z,sheetRef:P,isOpen:f,initialSnap:x,snapPoints:p,detent:_,indicatorRotation:k,callbacks:B,dragProps:U,windowHeight:I,animationOptions:j,reduceMotion:L,disableDrag:S},W=(0,r.createElement)(Cst.Provider,{value:V},(0,r.createElement)(bp.div,Object.assign({},C,{ref:e,style:dst({},Vst.wrapper,{zIndex:R,visibility:D},y)}),(0,r.createElement)(Ap,null,f?(0,r.createElement)(Ist,null,r.Children.map(u,(function(t,e){return(0,r.cloneElement)(t,{key:"sheet-child-"+e})}))):null)));return mst?W:(0,a.createPortal)(W,null!=g?g:document.body)})),qst=["children","style","className"],Hst=(0,r.forwardRef)((function(t,e){var n=t.children,i=t.style,o=void 0===i?{}:i,a=t.className,s=void 0===a?"":a,l=fst(t,qst),c=Pst(),u=c.y,h=c.isOpen,d=c.callbacks,f=c.snapPoints,p=c.initialSnap,m=void 0===p?0:p,g=c.sheetRef,y=c.windowHeight,v=c.detent,_=c.animationOptions,b=c.reduceMotion,x=function(t,e){var n=Est(t),i=(0,r.useRef)(!1),o=(0,r.useCallback)((function(){i.current?(null==e.current.onCloseEnd||e.current.onCloseEnd(),i.current=!1):(null==e.current.onOpenEnd||e.current.onOpenEnd(),i.current=!0)}),[t,n]);return(0,r.useEffect)((function(){!n&&t?null==e.current.onOpenStart||e.current.onOpenStart():!t&&n&&(null==e.current.onCloseStart||e.current.onCloseStart())}),[t,n]),{handleAnimationComplete:o}}(h,d),w=x.handleAnimationComplete,S=f?f[0]-f[m]:0,E=f?f[0]:null,T=null!==E?"min("+E+"px, "+pst+")":pst;return(0,r.createElement)(bp.div,Object.assign({},l,{ref:xst([g,e]),className:"react-modal-sheet-container "+s,style:dst({},Vst.container,o,"full-height"===v&&{height:T},"content-height"===v&&{maxHeight:T},{y:u}),initial:!b&&{y:y},animate:{y:S,transition:_},exit:{y:y,transition:_},onAnimationComplete:w}),n)})),Zst=["children","style","disableDrag","className"],Xst=(0,r.forwardRef)((function(t,e){var n=t.children,i=t.style,o=t.disableDrag,a=t.className,s=void 0===a?"":a,l=fst(t,Zst),c=Pst(),u=Lst(),h=Ast(),d=h.constraintsRef,f=h.onMeasureDragConstraints,p=o||u.disableDrag?void 0:c.dragProps;return(0,r.createElement)(bp.div,Object.assign({},l,{ref:xst([e,d]),className:"react-modal-sheet-content "+s,style:dst({},Vst.content,i)},p,{dragConstraints:d,onMeasureDragConstraints:f}),n)})),Yst=["children","style","disableDrag"],Kst=(0,r.forwardRef)((function(t,e){var n=t.children,i=t.style,o=t.disableDrag,a=fst(t,Yst),s=Pst(),l=s.indicatorRotation,c=s.dragProps,u=Ast(),h=u.constraintsRef,d=u.onMeasureDragConstraints,f=o?void 0:c,p=jat(l,(function(t){return"translateX(2px) rotate("+t+"deg)"})),m=jat(l,(function(t){return"translateX(-2px) rotate("+-1*t+"deg)"}));return(0,r.createElement)(bp.div,Object.assign({},a,{ref:xst([e,h]),style:dst({},Vst.headerWrapper,i)},f,{dragConstraints:h,onMeasureDragConstraints:d}),n||(0,r.createElement)("div",{className:"react-modal-sheet-header",style:Vst.header},(0,r.createElement)(bp.span,{className:"react-modal-sheet-drag-indicator",style:dst({},Vst.indicator,{transform:p})}),(0,r.createElement)(bp.span,{className:"react-modal-sheet-drag-indicator",style:dst({},Vst.indicator,{transform:m})})))})),$st=["style","className"],Jst=function(t){return!!t.onClick||!!t.onTap},Qst=(0,r.forwardRef)((function(t,e){var n=t.style,i=void 0===n?{}:n,o=t.className,a=void 0===o?"":o,s=fst(t,$st),l=Jst(s)?bp.button:bp.div,c=Jst(s)?"auto":"none";return(0,r.createElement)(l,Object.assign({},s,{ref:e,className:"react-modal-sheet-backdrop "+a,style:dst({},Vst.backdrop,i,{pointerEvents:c}),initial:{opacity:0},animate:{opacity:1},exit:{opacity:0}}))})),tlt=["draggableAt","children","style","className"],elt=(0,r.forwardRef)((function(t,e){var n=t.draggableAt,i=void 0===n?"top":n,o=t.children,a=t.style,s=t.className,l=void 0===s?"":s,c=fst(t,tlt),u=Lst();function h(t){var e=t.scrollTop,n=t.scrollHeight,r=t.clientHeight;if(n>r){var o=e<=0,a=n-e===r;"top"===i&&o||"bottom"===i&&a||"both"===i&&(o||a)?u.setDragEnabled():u.setDragDisabled()}}var d="undefined"!==typeof window&&("ontouchstart"in window||navigator.maxTouchPoints>0)?{onScroll:function(t){h(t.currentTarget)},onTouchStart:function(t){h(t.currentTarget)}}:void 0;return(0,r.createElement)("div",Object.assign({},c,{ref:e,className:"react-modal-sheet-scroller "+l,style:dst({},Vst.scroller,a)},d),o)})),nlt=Gst;nlt.Container=Hst,nlt.Header=Kst,nlt.Content=Xst,nlt.Backdrop=Qst,nlt.Scroller=elt;const rlt=nlt,ilt=(0,r.createContext)(),olt=()=>(0,r.useContext)(ilt),alt=t=>{const{top:e,bottom:n}=t.getBoundingClientRect(),r=.5*window.innerHeight;return e>0&&e<=r||n>r&&n<=window.innerHeight},slt=()=>{var t;return(null===(t=window.location.hash)||void 0===t?void 0:t.replace("#",""))||null},llt=()=>{const{currentSection:t}=olt(),e=Eat[t];return(0,Si.jsxs)("div",{className:"cardsContainer",children:[(0,Si.jsx)(Cat,{section:t,color:e.color,title:e.title}),Object.keys(Eat).map((e=>{const n=Eat[e].component;return(0,Si.jsx)(rR,{id:e,color:Eat[e].color,children:t===e?(0,Si.jsx)(n,{}):null},e)}))]})},clt=()=>{var t;const{currentSection:e,color:n}=olt(),[i,o]=(0,r.useState)(!0),[a,s]=(0,r.useState)(1),l=Eat[e].component,c=Eat[e].title,u=(0,r.useRef)(),h=t=>{var e;return null===(e=u.current)||void 0===e?void 0:e.snapTo(t)};return(0,r.useEffect)((()=>{o(!0),s(2)}),[e]),(0,Si.jsx)(rlt,{ref:u,isOpen:!0,onClose:()=>{o(!0),h(2),s(2)},snapPoints:[1,.5,50],initialSnap:a,detent:"full-height",tweenConfig:{ease:"easeOut",duration:.2},onSnap:t=>s(t),style:{zIndex:2},children:(0,Si.jsxs)(rlt.Container,{children:[(0,Si.jsx)(rlt.Header,{children:(0,Si.jsx)(Pat,{color:n,title:c,open:i,setOpen:()=>{h(2===a?1:2),s(2===a?1:2)}})}),(0,Si.jsx)(rlt.Content,{disableDrag:!0,style:{paddingBottom:null===(t=u.current)||void 0===t?void 0:t.y},children:(0,Si.jsx)(rlt.Scroller,{draggableAt:"top",children:(0,Si.jsx)(Ei,{bg:"white",borderColor:"".concat(n,".500"),margin:"4",style:{height:"30dvh"},children:(0,Si.jsx)(l,{})})})})]})})},ult=()=>{const[t]=ki("(max-width: 800px)"),[e,n]=(0,r.useState)(void 0),[i,o]=(0,r.useState)(),[a,s]=(0,r.useState)({}),l=e?Eat[e]:{},c=e?Eat[e].controls:null,u=t?Aat:Mat,h=t?clt:llt;return(0,r.useEffect)((()=>{const t=()=>{const t=(()=>{const t=document.querySelectorAll("section"),e=Array.from(t).find(alt);return e?e.id:null})(),e=slt();t&&t!==e&&(n(t),o(null),window.history.replaceState(null,null,"#".concat(t)))};return window.document.body.addEventListener("scroll",t),()=>window.document.body.removeEventListener("scroll",t)}),[]),(0,r.useEffect)((()=>{const t=slt();n(t||"expansion-urbana")}),[]),(0,r.useEffect)((()=>{if(e&&!t){const t=document.getElementById(e);t&&t.scrollIntoView()}}),[e]),(0,Si.jsxs)("div",{style:{display:t?"inline-block":"flex"},children:[(0,Si.jsx)(u,{section:e,setSection:function(e){if(!t){const t=document.getElementById(e);t&&t.scrollIntoView()}window.history.replaceState(null,null,"#".concat(e)),n(e)}}),(0,Si.jsx)(ilt.Provider,{value:{currentSection:e,setOutline:o,outline:i,color:l.color,sharedProps:a,setSharedProps:s},children:e&&(0,Si.jsxs)(Si.Fragment,{children:[(0,Si.jsx)(h,{}),(0,Si.jsx)(Ei,{className:t?"mapContainerMobile":"mapContainer",borderColor:"".concat(Eat[e].color,".500"),children:(0,Si.jsx)(c,{})})]})})]})};function hlt(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{timeout:e=300,preventDefault:n=(()=>!0)}=t,[i,o]=(0,r.useState)([]),a=(0,r.useRef)(),s=()=>{a.current&&(clearTimeout(a.current),a.current=null)};return(0,r.useEffect)((()=>s),[]),function(t){return r=>{if("Backspace"===r.key){const t=[...i];return t.pop(),void o(t)}if(function(t){const{key:e}=t;return 1===e.length||e.length>1&&/[^a-zA-Z0-9]/.test(e)}(r)){const l=i.concat(r.key);n(r)&&(r.preventDefault(),r.stopPropagation()),o(l),t(l.join("")),s(),a.current=setTimeout((()=>{o([]),a.current=null}),e)}}}}function dlt(t){const e=t.target,{tagName:n,isContentEditable:r}=e;return"INPUT"!==n&&"TEXTAREA"!==n&&!0!==r}function flt(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{ref:e,isDisabled:n,isFocusable:i,clickOnEnter:o=!0,clickOnSpace:a=!0,onMouseDown:s,onMouseUp:l,onClick:c,onKeyDown:u,onKeyUp:h,tabIndex:d,onMouseOver:f,onMouseLeave:p,...m}=t,[g,y]=(0,r.useState)(!0),[v,_]=(0,r.useState)(!1),b=function(){const t=(0,r.useRef)(new Map),e=t.current,n=(0,r.useCallback)(((e,n,r,i)=>{t.current.set(r,{type:n,el:e,options:i}),e.addEventListener(n,r,i)}),[]),i=(0,r.useCallback)(((e,n,r,i)=>{e.removeEventListener(n,r,i),t.current.delete(r)}),[]);return(0,r.useEffect)((()=>()=>{e.forEach(((t,e)=>{i(t.el,t.type,e,t.options)}))}),[i,e]),{add:n,remove:i}}(),x=g?d:d||0,w=n&&!i,S=(0,r.useCallback)((t=>{if(n)return t.stopPropagation(),void t.preventDefault();t.currentTarget.focus(),null==c||c(t)}),[n,c]),E=(0,r.useCallback)((t=>{v&&dlt(t)&&(t.preventDefault(),t.stopPropagation(),_(!1),b.remove(document,"keyup",E,!1))}),[v,b]),T=(0,r.useCallback)((t=>{if(null==u||u(t),n||t.defaultPrevented||t.metaKey)return;if(!dlt(t.nativeEvent)||g)return;const e=o&&"Enter"===t.key;if(a&&" "===t.key&&(t.preventDefault(),_(!0)),e){t.preventDefault();t.currentTarget.click()}b.add(document,"keyup",E,!1)}),[n,g,u,o,a,b,E]),M=(0,r.useCallback)((t=>{if(null==h||h(t),n||t.defaultPrevented||t.metaKey)return;if(!dlt(t.nativeEvent)||g)return;if(a&&" "===t.key){t.preventDefault(),_(!1);t.currentTarget.click()}}),[a,g,n,h]),A=(0,r.useCallback)((t=>{0===t.button&&(_(!1),b.remove(document,"mouseup",A,!1))}),[b]),C=(0,r.useCallback)((t=>{if(0!==t.button)return;if(n)return t.stopPropagation(),void t.preventDefault();g||_(!0);t.currentTarget.focus({preventScroll:!0}),b.add(document,"mouseup",A,!1),null==s||s(t)}),[n,g,s,b,A]),P=(0,r.useCallback)((t=>{0===t.button&&(g||_(!1),null==l||l(t))}),[l,g]),k=(0,r.useCallback)((t=>{n?t.preventDefault():null==f||f(t)}),[n,f]),I=(0,r.useCallback)((t=>{v&&(t.preventDefault(),_(!1)),null==p||p(t)}),[v,p]),O=Xi(e,(t=>{t&&"BUTTON"!==t.tagName&&y(!1)}));return g?{...m,ref:O,type:"button","aria-disabled":w?void 0:n,disabled:w,onClick:S,onMouseDown:s,onMouseUp:l,onKeyUp:h,onKeyDown:u,onMouseOver:f,onMouseLeave:p}:{...m,ref:O,role:"button","data-active":zt(v),"aria-disabled":n?"true":void 0,tabIndex:w?void 0:x,onClick:S,onMouseDown:C,onMouseUp:P,onKeyUp:M,onKeyDown:T,onMouseOver:k,onMouseLeave:I}}var plt=Object.defineProperty,mlt=(t,e,n)=>(((t,e,n)=>{e in t?plt(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n})(t,"symbol"!==typeof e?e+"":e,n),n);function glt(t){return t.sort(((t,e)=>{const n=t.compareDocumentPosition(e);if(n&Node.DOCUMENT_POSITION_FOLLOWING||n&Node.DOCUMENT_POSITION_CONTAINED_BY)return-1;if(n&Node.DOCUMENT_POSITION_PRECEDING||n&Node.DOCUMENT_POSITION_CONTAINS)return 1;if(n&Node.DOCUMENT_POSITION_DISCONNECTED||n&Node.DOCUMENT_POSITION_IMPLEMENTATION_SPECIFIC)throw Error("Cannot sort the given nodes.");return 0}))}function ylt(t,e,n){let r=t+1;return n&&r>=e&&(r=0),r}function vlt(t,e,n){let r=t-1;return n&&r<0&&(r=e),r}var _lt="undefined"!==typeof window?r.useLayoutEffect:r.useEffect,blt=t=>t,xlt=class{constructor(){var t=this;mlt(this,"descendants",new Map),mlt(this,"register",(t=>{var e;if(null!=t)return"object"==typeof(e=t)&&"nodeType"in e&&e.nodeType===Node.ELEMENT_NODE?this.registerNode(t):e=>{this.registerNode(e,t)}})),mlt(this,"unregister",(t=>{this.descendants.delete(t);const e=glt(Array.from(this.descendants.keys()));this.assignIndex(e)})),mlt(this,"destroy",(()=>{this.descendants.clear()})),mlt(this,"assignIndex",(t=>{this.descendants.forEach((e=>{const n=t.indexOf(e.node);e.index=n,e.node.dataset.index=e.index.toString()}))})),mlt(this,"count",(()=>this.descendants.size)),mlt(this,"enabledCount",(()=>this.enabledValues().length)),mlt(this,"values",(()=>Array.from(this.descendants.values()).sort(((t,e)=>t.index-e.index)))),mlt(this,"enabledValues",(()=>this.values().filter((t=>!t.disabled)))),mlt(this,"item",(t=>{if(0!==this.count())return this.values()[t]})),mlt(this,"enabledItem",(t=>{if(0!==this.enabledCount())return this.enabledValues()[t]})),mlt(this,"first",(()=>this.item(0))),mlt(this,"firstEnabled",(()=>this.enabledItem(0))),mlt(this,"last",(()=>this.item(this.descendants.size-1))),mlt(this,"lastEnabled",(()=>{const t=this.enabledValues().length-1;return this.enabledItem(t)})),mlt(this,"indexOf",(t=>{var e,n;return t&&null!=(n=null==(e=this.descendants.get(t))?void 0:e.index)?n:-1})),mlt(this,"enabledIndexOf",(t=>null==t?-1:this.enabledValues().findIndex((e=>e.node.isSameNode(t))))),mlt(this,"next",(function(e){let n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];const r=ylt(e,t.count(),n);return t.item(r)})),mlt(this,"nextEnabled",(function(e){let n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];const r=t.item(e);if(!r)return;const i=ylt(t.enabledIndexOf(r.node),t.enabledCount(),n);return t.enabledItem(i)})),mlt(this,"prev",(function(e){let n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];const r=vlt(e,t.count()-1,n);return t.item(r)})),mlt(this,"prevEnabled",(function(e){let n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];const r=t.item(e);if(!r)return;const i=vlt(t.enabledIndexOf(r.node),t.enabledCount()-1,n);return t.enabledItem(i)})),mlt(this,"registerNode",((t,e)=>{if(!t||this.descendants.has(t))return;const n=glt(Array.from(this.descendants.keys()).concat(t));(null==e?void 0:e.disabled)&&(e.disabled=!!e.disabled);const r={node:t,index:-1,...e};this.descendants.set(t,r),this.assignIndex(n)}))}};var[wlt,Slt]=Ii({name:"DescendantsProvider",errorMessage:"useDescendantsContext must be used within DescendantsProvider"});function Elt(){return[blt(wlt),()=>blt(Slt()),()=>function(){const t=(0,r.useRef)(new xlt);return _lt((()=>()=>t.current.destroy())),t.current}(),t=>function(t){const e=Slt(),[n,i]=(0,r.useState)(-1),o=(0,r.useRef)(null);_lt((()=>()=>{o.current&&e.unregister(o.current)}),[]),_lt((()=>{if(!o.current)return;const t=Number(o.current.dataset.index);n==t||Number.isNaN(t)||i(t)}));const a=blt(t?e.register(t):e.register);return{descendants:e,index:n,enabledIndex:e.enabledIndexOf(o.current),register:Xi(a,o)}}(t)]}function Tlt(t){const e=t.current;if(!e)return!1;const n=function(t){return ro(t).activeElement}(e);return!!n&&(!e.contains(n)&&!(!((r=n)&&no(r)&&y8(r))||m8(r)));var r}function Mlt(t,e){const{shouldFocus:n,visible:r,focusRef:i}=e,o=n&&!r;JK((()=>{if(!o)return;if(Tlt(t))return;const e=(null==i?void 0:i.current)||t.current;let n;return e?(n=requestAnimationFrame((()=>{e.focus({preventScroll:!0})})),()=>{cancelAnimationFrame(n)}):void 0}),[o,t,i])}var Alt={preventScroll:!0,shouldFocus:!1};function Clt(t,e){var n;const r=t.target;if(r){if(!Plt(r).contains(r))return!1}return!(null==(n=e.current)?void 0:n.contains(r))}function Plt(t){var e;return null!=(e=null==t?void 0:t.ownerDocument)?e:document}function klt(t){const{isOpen:e,ref:n}=t,[i,o]=(0,r.useState)(e),[a,s]=(0,r.useState)(!1);(0,r.useEffect)((()=>{a||(o(e),s(!0))}),[e,a,i]),Ha((()=>n.current),"animationend",(()=>{o(e)}));return{present:!(!e&&!i),onComplete(){var t;const e=function(t){var e,n;return null!=(n=null==(e=ro(t))?void 0:e.defaultView)?n:window}(n.current),r=new e.CustomEvent("animationend",{bubbles:!0});null==(t=n.current)||t.dispatchEvent(r)}}}function Ilt(t){const{wasSelected:e,enabled:n,isSelected:r,mode:i="unmount"}=t;return!n||(!!r||!("keepMounted"!==i||!e))}var[Olt,Llt,jlt,zlt]=Elt(),[Rlt,Dlt]=Ii({strict:!1,name:"MenuContext"});function Blt(t){var e;return null!=(e=null==t?void 0:t.ownerDocument)?e:document}function Flt(t){return Blt(t).activeElement===t}function Nlt(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{id:e,closeOnSelect:n=!0,closeOnBlur:i=!0,initialFocusRef:o,autoSelect:a=!0,isLazy:s,isOpen:l,defaultIsOpen:c,onClose:u,onOpen:h,placement:d="bottom-start",lazyBehavior:f="unmount",direction:p,computePositionOnMount:m=!1,...g}=t,y=(0,r.useRef)(null),v=(0,r.useRef)(null),_=jlt(),b=(0,r.useCallback)((()=>{requestAnimationFrame((()=>{var t;null==(t=y.current)||t.focus({preventScroll:!1})}))}),[]),x=(0,r.useCallback)((()=>{const t=setTimeout((()=>{var t;if(o)null==(t=o.current)||t.focus();else{const t=_.firstEnabled();t&&k(t.index)}}));z.current.add(t)}),[_,o]),w=(0,r.useCallback)((()=>{const t=setTimeout((()=>{const t=_.lastEnabled();t&&k(t.index)}));z.current.add(t)}),[_]),S=(0,r.useCallback)((()=>{null==h||h(),a?x():b()}),[a,x,b,h]),{isOpen:E,onOpen:T,onClose:M,onToggle:A}=qa({isOpen:l,defaultIsOpen:c,onClose:u,onOpen:S});!function(t){const{ref:e,handler:n,enabled:i=!0}=t,o=Ga(n),a=(0,r.useRef)({isPointerDown:!1,ignoreEmulatedMouseEvents:!1}).current;(0,r.useEffect)((()=>{if(!i)return;const t=t=>{Clt(t,e)&&(a.isPointerDown=!0)},r=t=>{a.ignoreEmulatedMouseEvents?a.ignoreEmulatedMouseEvents=!1:a.isPointerDown&&n&&Clt(t,e)&&(a.isPointerDown=!1,o(t))},s=t=>{a.ignoreEmulatedMouseEvents=!0,n&&a.isPointerDown&&Clt(t,e)&&(a.isPointerDown=!1,o(t))},l=Plt(e.current);return l.addEventListener("mousedown",t,!0),l.addEventListener("mouseup",r,!0),l.addEventListener("touchstart",t,!0),l.addEventListener("touchend",s,!0),()=>{l.removeEventListener("mousedown",t,!0),l.removeEventListener("mouseup",r,!0),l.removeEventListener("touchstart",t,!0),l.removeEventListener("touchend",s,!0)}}),[n,e,o,a,i])}({enabled:E&&i,ref:y,handler:t=>{var e;(null==(e=v.current)?void 0:e.contains(t.target))||M()}});const C=Va({...g,enabled:E||m,placement:d,direction:p}),[P,k]=(0,r.useState)(-1);JK((()=>{E||k(-1)}),[E]),Mlt(y,{focusRef:v,visible:E,shouldFocus:!0});const I=klt({isOpen:E,ref:y}),[O,L]=function(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),i=1;i<e;i++)n[i-1]=arguments[i];const o=(0,r.useId)(),a=t||o;return(0,r.useMemo)((()=>n.map((t=>"".concat(t,"-").concat(a)))),[a,n])}(e,"menu-button","menu-list"),j=(0,r.useCallback)((()=>{T(),b()}),[T,b]),z=(0,r.useRef)(new Set([]));(0,r.useEffect)((()=>{const t=z.current;return()=>{t.forEach((t=>clearTimeout(t))),t.clear()}}),[]);const R=(0,r.useCallback)((()=>{T(),x()}),[x,T]),D=(0,r.useCallback)((()=>{T(),w()}),[T,w]),B=(0,r.useCallback)((()=>{var t,e;const n=Blt(y.current),r=null==(t=y.current)?void 0:t.contains(n.activeElement);if(!(E&&!r))return;const i=null==(e=_.item(P))?void 0:e.node;null==i||i.focus({preventScroll:!0})}),[E,P,_]),F=(0,r.useRef)(null);return{openAndFocusMenu:j,openAndFocusFirstItem:R,openAndFocusLastItem:D,onTransitionEnd:B,unstable__animationState:I,descendants:_,popper:C,buttonId:O,menuId:L,forceUpdate:C.forceUpdate,orientation:"vertical",isOpen:E,onToggle:A,onOpen:T,onClose:M,menuRef:y,buttonRef:v,focusedIndex:P,closeOnSelect:n,closeOnBlur:i,autoSelect:a,setFocusedIndex:k,isLazy:s,lazyBehavior:f,initialFocusRef:o,rafId:F}}function Ult(t){var e;return function(t){var e;if(!function(t){return null!=t&&"object"==typeof t&&"nodeType"in t&&t.nodeType===Node.ELEMENT_NODE}(t))return!1;const n=null!=(e=t.ownerDocument.defaultView)?e:window;return t instanceof n.HTMLElement}(t)&&!!(null==(e=null==t?void 0:t.getAttribute("role"))?void 0:e.startsWith("menuitem"))}function Vlt(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;const{onMouseEnter:n,onMouseMove:i,onMouseLeave:o,onClick:a,onFocus:s,isDisabled:l,isFocusable:c,closeOnSelect:u,type:h,...d}=t,f=Dlt(),{setFocusedIndex:p,focusedIndex:m,closeOnSelect:g,onClose:y,menuRef:v,isOpen:_,menuId:b,rafId:x}=f,w=(0,r.useRef)(null),S="".concat(b,"-menuitem-").concat((0,r.useId)()),{index:E,register:T}=zlt({disabled:l&&!c}),M=(0,r.useCallback)((t=>{null==n||n(t),l||p(E)}),[p,E,l,n]),A=(0,r.useCallback)((t=>{null==i||i(t),w.current&&!Flt(w.current)&&M(t)}),[M,i]),C=(0,r.useCallback)((t=>{null==o||o(t),l||p(-1)}),[p,l,o]),P=(0,r.useCallback)((t=>{null==a||a(t),Ult(t.currentTarget)&&(null!=u?u:g)&&y()}),[y,a,g,u]),k=(0,r.useCallback)((t=>{null==s||s(t),p(E)}),[p,s,E]),I=E===m,O=l&&!c;JK((()=>{if(_)return I&&!O&&w.current?(x.current&&cancelAnimationFrame(x.current),x.current=requestAnimationFrame((()=>{var t;null==(t=w.current)||t.focus({preventScroll:!0}),x.current=null}))):v.current&&!Flt(v.current)&&v.current.focus({preventScroll:!0}),()=>{x.current&&cancelAnimationFrame(x.current)}}),[I,O,v,_]);const L=flt({onClick:P,onFocus:k,onMouseEnter:M,onMouseMove:A,onMouseLeave:C,ref:Xi(T,w,e),isDisabled:l,isFocusable:c});return{...d,...L,type:null!=h?h:L.type,id:S,role:"menuitem",tabIndex:I?0:-1}}var[Wlt,Glt]=Ii({name:"MenuStylesContext",errorMessage:"useMenuStyles returned is 'undefined'. Seems you forgot to wrap the components in \"<Menu />\" "}),qlt=t=>{const{children:e}=t,n=Gi("Menu",t),i=Mn(t),{direction:o}=Bi(),{descendants:a,...s}=Nlt({...i,direction:o}),l=(0,r.useMemo)((()=>s),[s]),{isOpen:c,onClose:u,forceUpdate:h}=l;return(0,Si.jsx)(Olt,{value:a,children:(0,Si.jsx)(Rlt,{value:l,children:(0,Si.jsx)(Wlt,{value:n,children:Lt(e,{isOpen:c,onClose:u,forceUpdate:h})})})})};qlt.displayName="Menu";var Hlt=wi(((t,e)=>{const n=Glt();return(0,Si.jsx)(xi.button,{ref:e,...t,__css:{display:"inline-flex",appearance:"none",alignItems:"center",outline:0,...n.button}})})),Zlt=wi(((t,e)=>{const{children:n,as:i,...o}=t,a=function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;const n=Dlt(),{onToggle:i,popper:o,openAndFocusFirstItem:a,openAndFocusLastItem:s}=n,l=(0,r.useCallback)((t=>{const e=t.key,n={Enter:a,ArrowDown:a,ArrowUp:s}[e];n&&(t.preventDefault(),t.stopPropagation(),n(t))}),[a,s]);return{...t,ref:Xi(n.buttonRef,e,o.referenceRef),id:n.buttonId,"data-active":zt(n.isOpen),"aria-expanded":n.isOpen,"aria-haspopup":"menu","aria-controls":n.menuId,onClick:Dt(t.onClick,i),onKeyDown:Dt(t.onKeyDown,l)}}(o,e),s=i||Hlt;return(0,Si.jsx)(s,{...a,className:kt("chakra-menu__menu-button",t.className),children:(0,Si.jsx)(xi.span,{__css:{pointerEvents:"none",flex:"1 1 auto",minW:0},children:t.children})})}));Zlt.displayName="MenuButton";var Xlt={enter:{visibility:"visible",opacity:1,scale:1,transition:{duration:.2,ease:[.4,0,.2,1]}},exit:{transitionEnd:{visibility:"hidden"},opacity:0,scale:.8,transition:{duration:.1,easings:"easeOut"}}},Ylt=xi(bp.div),Klt=wi((function(t,e){var n,i;const{rootProps:o,motionProps:a,...s}=t,{isOpen:l,onTransitionEnd:c,unstable__animationState:u}=Dlt(),h=function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;const n=Dlt();if(!n)throw new Error("useMenuContext: context is undefined. Seems you forgot to wrap component within <Menu>");const{focusedIndex:i,setFocusedIndex:o,menuRef:a,isOpen:s,onClose:l,menuId:c,isLazy:u,lazyBehavior:h,unstable__animationState:d}=n,f=Llt(),p=hlt({preventDefault:t=>" "!==t.key&&Ult(t.target)}),m=(0,r.useCallback)((t=>{if(!t.currentTarget.contains(t.target))return;const e=t.key,n={Tab:t=>t.preventDefault(),Escape:l,ArrowDown:()=>{const t=f.nextEnabled(i);t&&o(t.index)},ArrowUp:()=>{const t=f.prevEnabled(i);t&&o(t.index)}},r=n[e];if(r)return t.preventDefault(),void r(t);const a=p((t=>{const e=function(t,e,n,r){if(null==e)return r;if(!r)return t.find((t=>n(t).toLowerCase().startsWith(e.toLowerCase())));const i=t.filter((t=>n(t).toLowerCase().startsWith(e.toLowerCase())));if(i.length>0){let e;return i.includes(r)?(e=i.indexOf(r)+1,e===i.length&&(e=0),i[e]):(e=t.indexOf(i[0]),t[e])}return r}(f.values(),t,(t=>{var e,n;return null!=(n=null==(e=null==t?void 0:t.node)?void 0:e.textContent)?n:""}),f.item(i));if(e){const t=f.indexOf(e.node);o(t)}}));Ult(t.target)&&a(t)}),[f,i,p,l,o]),g=(0,r.useRef)(!1);s&&(g.current=!0);const y=Ilt({wasSelected:g.current,enabled:u,mode:h,isSelected:d.present});return{...t,ref:Xi(a,e),children:y?t.children:null,tabIndex:-1,role:"menu",id:c,style:{...t.style,transformOrigin:"var(--popper-transform-origin)"},"aria-orientation":"vertical",onKeyDown:Dt(t.onKeyDown,m)}}(s,e),d=function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{popper:e,isOpen:n}=Dlt();return e.getPopperProps({...t,style:{visibility:n?"visible":"hidden",...t.style}})}(o),f=Glt();return(0,Si.jsx)(xi.div,{...d,__css:{zIndex:null!=(i=t.zIndex)?i:null==(n=f.list)?void 0:n.zIndex},children:(0,Si.jsx)(Ylt,{variants:Xlt,initial:!1,animate:l?"enter":"exit",__css:{outline:0,...f.list},...a,className:kt("chakra-menu__menu-list",h.className),...h,onUpdate:c,onAnimationComplete:Bt(u.onComplete,h.onAnimationComplete)})})}));Klt.displayName="MenuList";var $lt=wi(((t,e)=>{const n=Glt();return(0,Si.jsx)(xi.span,{ref:e,...t,__css:n.command,className:"chakra-menu__command"})}));$lt.displayName="MenuCommand";var Jlt=wi(((t,e)=>{const{type:n,...i}=t,o=Glt(),a=i.as||n?null!=n?n:void 0:"button",s=(0,r.useMemo)((()=>({textDecoration:"none",color:"inherit",userSelect:"none",display:"flex",width:"100%",alignItems:"center",textAlign:"start",flex:"0 0 auto",outline:0,...o.item})),[o.item]);return(0,Si.jsx)(xi.button,{ref:e,type:a,...i,__css:s})})),Qlt=t=>{const{className:e,children:n,...i}=t,o=Glt(),a=r.Children.only(n),s=(0,r.isValidElement)(a)?(0,r.cloneElement)(a,{focusable:"false","aria-hidden":!0,className:kt("chakra-menu__icon",a.props.className)}):null,l=kt("chakra-menu__icon-wrapper",e);return(0,Si.jsx)(xi.span,{className:l,...i,__css:o.icon,children:s})};Qlt.displayName="MenuIcon";var tct=wi(((t,e)=>{const{icon:n,iconSpacing:r="0.75rem",command:i,commandSpacing:o="0.75rem",children:a,...s}=t,l=Vlt(s,e),c=n||i?(0,Si.jsx)("span",{style:{pointerEvents:"none",flex:1},children:a}):a;return(0,Si.jsxs)(Jlt,{...l,className:kt("chakra-menu__menuitem",l.className),children:[n&&(0,Si.jsx)(Qlt,{fontSize:"0.8em",marginEnd:r,children:n}),c,i&&(0,Si.jsx)($lt,{marginStart:o,children:i})]})}));tct.displayName="MenuItem";const ect=t=>{let{id:e,question:n,answer:i,icon:o,color:a}=t;const[s]=ki("(max-width: 800px)"),[l,c]=(0,r.useState)(!1);return(0,Si.jsx)("div",{onMouseEnter:()=>c(!0),onMouseLeave:()=>c(!1),children:(0,Si.jsx)(At,{to:"/problematica#".concat(e),children:(0,Si.jsx)(R$,{backgroundColor:a,color:"white",borderRadius:"2dvw",w:s?"25dvw":"15dvw",h:s?"25dvw":"15dvw",p:"1dvw",m:"auto",justifyContent:"center",style:{transform:l?"rotateY(180deg)":"rotateY(0)",transformStyle:"preserve-3d",transition:"transform 0.7s",boxShadow:"0px 0.8dvw 0.8dvw 0px rgba(100,100,100,0.3)"},children:(0,Si.jsx)("div",{style:{transform:l?"rotateY(180deg)":"rotateY(0)",backfaceVisibility:"hidden",textAlign:"center"},children:l?(0,Si.jsxs)(Si.Fragment,{children:[(0,Si.jsx)(Yz,{fontFamily:"Inter",letterSpacing:"-0.5px",fontSize:s?"2.5dvw":"1.2dvw",children:(0,Si.jsx)("b",{children:n})}),(0,Si.jsx)(Kz,{fontFamily:"Inter",fontSize:s?"1.6dvw":"1dvw",textAlign:"start",mt:"1dvw",children:i})]}):(0,Si.jsxs)(Si.Fragment,{children:[(0,Si.jsx)(Qi,{as:o,boxSize:s?"5dvw":"3dvw"}),(0,Si.jsx)(Yz,{fontFamily:"Inter",letterSpacing:"-0.5px",fontSize:s?"2.5dvw":"1.2dvw",children:(0,Si.jsx)("b",{children:n})})]})})})})})};var nct=wi((function(t,e){const{templateAreas:n,gap:r,rowGap:i,columnGap:o,column:a,row:s,autoFlow:l,autoRows:c,templateRows:u,autoColumns:h,templateColumns:d,...f}=t,p={display:"grid",gridTemplateAreas:n,gridGap:r,gridRowGap:i,gridColumnGap:o,gridAutoColumns:h,gridColumn:a,gridRow:s,gridAutoFlow:l,gridAutoRows:c,gridTemplateRows:u,gridTemplateColumns:d};return(0,Si.jsx)(xi.div,{ref:e,__css:p,...f})}));nct.displayName="Grid";Object.freeze(["base","sm","md","lg","xl","2xl"]);function rct(t,e){return Array.isArray(t)?t.map((t=>null===t?null:e(t))):It(t)?Object.keys(t).reduce(((n,r)=>(n[r]=e(t[r]),n)),{}):null!=t?e(t):null}var ict=wi((function(t,e){const{columns:n,spacingX:r,spacingY:i,spacing:o,minChildWidth:a,...s}=t,l=Bi(),c=a?function(t,e){return rct(t,(t=>{const n=Ni("sizes",t,"number"===typeof(r=t)?"".concat(r,"px"):r)(e);var r;return null===t?null:"repeat(auto-fit, minmax(".concat(n,", 1fr))")}))}(a,l):function(t){return rct(t,(t=>null===t?null:"repeat(".concat(t,", minmax(0, 1fr))")))}(n);return(0,Si.jsx)(nct,{ref:e,gap:o,columnGap:r,rowGap:i,templateColumns:c,...s})}));ict.displayName="SimpleGrid";const oct=()=>{const[t]=ki("(max-width: 800px)");return(0,Si.jsx)("div",{style:{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center"},children:(0,Si.jsxs)("div",{style:{display:"flex",flexWrap:"wrap",justifyContent:"center"},children:[(0,Si.jsx)(f9,{color:"purple",videoId:"uoH8Are8Z-c",title:"Sheila Ferniza",subtitle:"Trama Urbana.",text:"Sostenibilidad urbana."}),(0,Si.jsx)(ict,{columns:t?3:4,style:{height:"100dvh",width:"100%",alignItems:"center"},children:Object.keys(Eat).map((t=>(0,Si.jsx)("div",{style:{margin:"2dvw"},children:(0,Si.jsx)(ect,{id:t,icon:Eat[t].icon,question:Eat[t].title,answer:Eat[t].answer,color:"".concat(Eat[t].color,".500")})},t)))})]})})},act={id:"request-scheduler",throttleRequests:!0,maxRequests:6};class sct{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};ww(this,"props",void 0),ww(this,"stats",void 0),ww(this,"activeRequestCount",0),ww(this,"requestQueue",[]),ww(this,"requestMap",new Map),ww(this,"deferredUpdate",null),this.props={...act,...t},this.stats=new rE({id:this.props.id}),this.stats.get("Queued Requests"),this.stats.get("Active Requests"),this.stats.get("Cancelled Requests"),this.stats.get("Queued Requests Ever"),this.stats.get("Active Requests Ever")}scheduleRequest(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:()=>0;if(!this.props.throttleRequests)return Promise.resolve({done:()=>{}});if(this.requestMap.has(t))return this.requestMap.get(t);const n={handle:t,priority:0,getPriority:e},r=new Promise((t=>(n.resolve=t,n)));return this.requestQueue.push(n),this.requestMap.set(t,r),this._issueNewRequests(),r}_issueRequest(t){const{handle:e,resolve:n}=t;let r=!1;const i=()=>{r||(r=!0,this.requestMap.delete(e),this.activeRequestCount--,this._issueNewRequests())};return this.activeRequestCount++,n?n({done:i}):Promise.resolve({done:i})}_issueNewRequests(){this.deferredUpdate||(this.deferredUpdate=setTimeout((()=>this._issueNewRequestsAsync()),0))}_issueNewRequestsAsync(){this.deferredUpdate=null;const t=Math.max(this.props.maxRequests-this.activeRequestCount,0);if(0!==t){this._updateAllRequests();for(let e=0;e<t;++e){const t=this.requestQueue.shift();t&&this._issueRequest(t)}}}_updateAllRequests(){const t=this.requestQueue;for(let e=0;e<t.length;++e){const n=t[e];this._updateRequest(n)||(t.splice(e,1),this.requestMap.delete(n.handle),e--)}t.sort(((t,e)=>t.priority-e.priority))}_updateRequest(t){return t.priority=t.getPriority(t.handle),!(t.priority<0)||(t.resolve(null),!1)}}class lct{constructor(t){ww(this,"index",void 0),ww(this,"isVisible",void 0),ww(this,"isSelected",void 0),ww(this,"parent",void 0),ww(this,"children",void 0),ww(this,"content",void 0),ww(this,"state",void 0),ww(this,"layers",void 0),ww(this,"id",void 0),ww(this,"zoom",void 0),ww(this,"userData",void 0),ww(this,"boundingBox",void 0),ww(this,"_abortController",void 0),ww(this,"_loader",void 0),ww(this,"_loaderId",void 0),ww(this,"_isLoaded",void 0),ww(this,"_isCancelled",void 0),ww(this,"_needsReload",void 0),ww(this,"_bbox",void 0),this.index=t,this.isVisible=!1,this.isSelected=!1,this.parent=null,this.children=[],this.content=null,this._loader=void 0,this._abortController=null,this._loaderId=0,this._isLoaded=!1,this._isCancelled=!1,this._needsReload=!1}get bbox(){return this._bbox}set bbox(t){this._bbox||(this._bbox=t,this.boundingBox="west"in t?[[t.west,t.south],[t.east,t.north]]:[[t.left,t.top],[t.right,t.bottom]])}get data(){return this.isLoading&&this._loader?this._loader.then((()=>this.data)):this.content}get isLoaded(){return this._isLoaded&&!this._needsReload}get isLoading(){return Boolean(this._loader)&&!this._isCancelled}get needsReload(){return this._needsReload||this._isCancelled}get byteLength(){const t=this.content?this.content.byteLength:0;return Number.isFinite(t)||console.error("byteLength not defined in tile data"),t}async _loadData(t){let{getData:e,requestScheduler:n,onLoad:r,onError:i}=t;const{index:o,id:a,bbox:s,userData:l,zoom:c}=this,u=this._loaderId;this._abortController=new AbortController;const{signal:h}=this._abortController,d=await n.scheduleRequest(this,(t=>t.isSelected?1:-1));if(!d)return void(this._isCancelled=!0);if(this._isCancelled)return void d.done();let f,p=null;try{p=await e({index:o,id:a,bbox:s,userData:l,zoom:c,signal:h})}catch(mbt){f=mbt||!0}finally{d.done()}u===this._loaderId&&(this._loader=void 0,this.content=p,!this._isCancelled||p?(this._isLoaded=!0,this._isCancelled=!1,f?i(f,this):r(this)):this._isLoaded=!1)}loadData(t){return this._isLoaded=!1,this._isCancelled=!1,this._needsReload=!1,this._loaderId++,this._loader=this._loadData(t),this._loader}setNeedsReload(){this.isLoading&&(this.abort(),this._loader=void 0),this._needsReload=!0}abort(){var t;this.isLoaded||(this._isCancelled=!0,null===(t=this._abortController)||void 0===t||t.abort())}}const cct=Math.PI/180,uct=180/Math.PI,hct=6370972,dct=256;function fct(){const t=4018225162502676e-20,e=Math.PI/180*dct;return{unitsPerMeter:[t,t,t],unitsPerMeter2:[0,0,0],metersPerUnit:[24886.609375,24886.609375,24886.609375],unitsPerDegree:[e,e,t],unitsPerDegree2:[0,0,0],degreesPerUnit:[1/e,1/e,24886.609375]}}class pct extends uI{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{latitude:e=0,longitude:n=0,zoom:r=0,nearZMultiplier:i=.1,farZMultiplier:o=2,resolution:a=10}=t;let{height:s,altitude:l=1.5}=t;s=s||1,l=Math.max(.75,l);const c=(new Pk).lookAt({eye:[0,-l,0],up:[0,0,1]}),u=Math.pow(2,r);c.rotateX(e*cct),c.rotateZ(-n*cct),c.scale(u/s);const h=Math.atan(.5/l),d=512*u/s;super({...t,height:s,viewMatrix:c,longitude:n,latitude:e,zoom:r,distanceScales:fct(),fovyRadians:2*h,focalDistance:l,near:i,far:Math.min(2,1/d+1)*l*o}),ww(this,"longitude",void 0),ww(this,"latitude",void 0),ww(this,"resolution",void 0),this.latitude=e,this.longitude=n,this.resolution=a}get projectionMode(){return Hw.GLOBE}getDistanceScales(){return this.distanceScales}getBounds(){const t={targetZ:(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).z||0},e=this.unproject([0,this.height/2],t),n=this.unproject([this.width/2,0],t),r=this.unproject([this.width,this.height/2],t),i=this.unproject([this.width/2,this.height],t);return r[0]<this.longitude&&(r[0]+=360),e[0]>this.longitude&&(e[0]-=360),[Math.min(e[0],r[0],n[0],i[0]),Math.min(e[1],r[1],n[1],i[1]),Math.max(e[0],r[0],n[0],i[0]),Math.max(e[1],r[1],n[1],i[1])]}unproject(t){let{topLeft:e=!0,targetZ:n}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const[r,i,o]=t,a=e?i:this.height-i,{pixelUnprojectionMatrix:s}=this;let l;if(Number.isFinite(o))l=mct(s,[r,a,o,1]);else{const t=mct(s,[r,a,-1,1]),e=mct(s,[r,a,1,1]),i=((n||0)/hct+1)*dct,o=XT(HT([],t,e)),c=XT(t),u=XT(e),h=4*((4*c*u-(o-c-u)**2)/16)/o;l=function(t,e,n,r){var i=e[0],o=e[1],a=e[2];return t[0]=i+r*(n[0]-i),t[1]=o+r*(n[1]-o),t[2]=a+r*(n[2]-a),t}([],t,e,(Math.sqrt(c-h)-Math.sqrt(Math.max(0,i*i-h)))/Math.sqrt(o))}const[c,u,h]=this.unprojectPosition(l);return Number.isFinite(o)?[c,u,h]:Number.isFinite(n)?[c,u,n]:[c,u]}projectPosition(t){const[e,n,r=0]=t,i=e*cct,o=n*cct,a=Math.cos(o),s=(r/hct+1)*dct;return[Math.sin(i)*a*s,-Math.cos(i)*a*s,Math.sin(o)*s]}unprojectPosition(t){const[e,n,r]=t,i=ZT(t),o=Math.asin(r/i);return[Math.atan2(e,-n)*uct,o*uct,(i/dct-1)*hct]}projectFlat(t){return t}unprojectFlat(t){return t}panByPosition(t,e){const n=this.unproject(e);return{longitude:t[0]-n[0]+this.longitude,latitude:t[1]-n[1]+this.latitude}}}function mct(t,e){const n=dk([],e,t);return ck(n,n,1/n[3]),n}const gct=-1,yct=0,vct=1,_ct=new QT,bct=new QT;class xct{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[0,0,0],e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[0,0,0],n=arguments.length>2?arguments[2]:void 0;ww(this,"center",void 0),ww(this,"halfDiagonal",void 0),ww(this,"minimum",void 0),ww(this,"maximum",void 0),n=n||_ct.copy(t).add(e).scale(.5),this.center=new QT(n),this.halfDiagonal=new QT(e).subtract(this.center),this.minimum=new QT(t),this.maximum=new QT(e)}clone(){return new xct(this.minimum,this.maximum,this.center)}equals(t){return this===t||Boolean(t)&&this.minimum.equals(t.minimum)&&this.maximum.equals(t.maximum)}transform(t){return this.center.transformAsPoint(t),this.halfDiagonal.transform(t),this.minimum.transform(t),this.maximum.transform(t),this}intersectPlane(t){const{halfDiagonal:e}=this,n=bct.from(t.normal),r=e.x*Math.abs(n.x)+e.y*Math.abs(n.y)+e.z*Math.abs(n.z),i=this.center.dot(n)+t.distance;return i-r>0?vct:i+r<0?gct:yct}distanceTo(t){return Math.sqrt(this.distanceSquaredTo(t))}distanceSquaredTo(t){const e=_ct.from(t).subtract(this.center),{halfDiagonal:n}=this;let r,i=0;return r=Math.abs(e.x)-n.x,r>0&&(i+=r*r),r=Math.abs(e.y)-n.y,r>0&&(i+=r*r),r=Math.abs(e.z)-n.z,r>0&&(i+=r*r),i}}const wct=new QT,Sct=new QT;class Ect{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[0,0,0],e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;ww(this,"center",void 0),ww(this,"radius",void 0),this.radius=-0,this.center=new QT,this.fromCenterRadius(t,e)}fromCenterRadius(t,e){return this.center.from(t),this.radius=e,this}fromCornerPoints(t,e){return e=wct.from(e),this.center=(new QT).from(t).add(e).scale(.5),this.radius=this.center.distance(e),this}equals(t){return this===t||Boolean(t)&&this.center.equals(t.center)&&this.radius===t.radius}clone(){return new Ect(this.center,this.radius)}union(t){const e=this.center,n=this.radius,r=t.center,i=t.radius,o=wct.copy(r).subtract(e),a=o.magnitude();if(n>=a+i)return this.clone();if(i>=a+n)return t.clone();const s=.5*(n+a+i);return Sct.copy(o).scale((-n+s)/a).add(e),this.center.copy(Sct),this.radius=s,this}expand(t){const e=wct.from(t).subtract(this.center).magnitude();return e>this.radius&&(this.radius=e),this}transform(t){this.center.transform(t);const e=ak(wct,t);return this.radius=Math.max(e[0],Math.max(e[1],e[2]))*this.radius,this}distanceSquaredTo(t){const e=this.distanceTo(t);return e*e}distanceTo(t){const e=wct.from(t).subtract(this.center);return Math.max(0,e.len()-this.radius)}intersectPlane(t){const e=this.center,n=this.radius,r=t.normal.dot(e)+t.distance;return r<-n?gct:r<n?yct:vct}}function Tct(t,e,n){var r=e[0],i=e[1],o=e[2],a=e[3],s=e[4],l=e[5],c=e[6],u=e[7],h=e[8],d=n[0],f=n[1],p=n[2],m=n[3],g=n[4],y=n[5],v=n[6],_=n[7],b=n[8];return t[0]=d*r+f*a+p*c,t[1]=d*i+f*s+p*u,t[2]=d*o+f*l+p*h,t[3]=m*r+g*a+y*c,t[4]=m*i+g*s+y*u,t[5]=m*o+g*l+y*h,t[6]=v*r+_*a+b*c,t[7]=v*i+_*s+b*u,t[8]=v*o+_*l+b*h,t}function Mct(t,e,n){var r=n[0],i=n[1];return t[0]=r*e[0],t[1]=r*e[1],t[2]=r*e[2],t[3]=i*e[3],t[4]=i*e[4],t[5]=i*e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t}var Act;!function(t){t[t.COL0ROW0=0]="COL0ROW0",t[t.COL0ROW1=1]="COL0ROW1",t[t.COL0ROW2=2]="COL0ROW2",t[t.COL1ROW0=3]="COL1ROW0",t[t.COL1ROW1=4]="COL1ROW1",t[t.COL1ROW2=5]="COL1ROW2",t[t.COL2ROW0=6]="COL2ROW0",t[t.COL2ROW1=7]="COL2ROW1",t[t.COL2ROW2=8]="COL2ROW2"}(Act||(Act={}));const Cct=Object.freeze([1,0,0,0,1,0,0,0,1]);class Pct extends bk{static get IDENTITY(){return function(){Ict||(Ict=new Pct,Object.freeze(Ict));return Ict}()}static get ZERO(){return function(){kct||(kct=new Pct([0,0,0,0,0,0,0,0,0]),Object.freeze(kct));return kct}()}get ELEMENTS(){return 9}get RANK(){return 3}get INDICES(){return Act}constructor(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];super(-0,-0,-0,-0,-0,-0,-0,-0,-0),1===arguments.length&&Array.isArray(t)?this.copy(t):n.length>0?this.copy([t,...n]):this.identity()}copy(t){return this[0]=t[0],this[1]=t[1],this[2]=t[2],this[3]=t[3],this[4]=t[4],this[5]=t[5],this[6]=t[6],this[7]=t[7],this[8]=t[8],this.check()}identity(){return this.copy(Cct)}fromObject(t){return this.check()}fromQuaternion(t){return function(t,e){var n=e[0],r=e[1],i=e[2],o=e[3],a=n+n,s=r+r,l=i+i,c=n*a,u=r*a,h=r*s,d=i*a,f=i*s,p=i*l,m=o*a,g=o*s,y=o*l;t[0]=1-h-p,t[3]=u-y,t[6]=d+g,t[1]=u+y,t[4]=1-c-p,t[7]=f-m,t[2]=d-g,t[5]=f+m,t[8]=1-c-h}(this,t),this.check()}set(t,e,n,r,i,o,a,s,l){return this[0]=t,this[1]=e,this[2]=n,this[3]=r,this[4]=i,this[5]=o,this[6]=a,this[7]=s,this[8]=l,this.check()}setRowMajor(t,e,n,r,i,o,a,s,l){return this[0]=t,this[1]=r,this[2]=a,this[3]=e,this[4]=i,this[5]=s,this[6]=n,this[7]=o,this[8]=l,this.check()}determinant(){return function(t){var e=t[0],n=t[1],r=t[2],i=t[3],o=t[4],a=t[5],s=t[6],l=t[7],c=t[8];return e*(c*o-a*l)+n*(-c*i+a*s)+r*(l*i-o*s)}(this)}transpose(){return function(t,e){if(t===e){var n=e[1],r=e[2],i=e[5];t[1]=e[3],t[2]=e[6],t[3]=n,t[5]=e[7],t[6]=r,t[7]=i}else t[0]=e[0],t[1]=e[3],t[2]=e[6],t[3]=e[1],t[4]=e[4],t[5]=e[7],t[6]=e[2],t[7]=e[5],t[8]=e[8]}(this,this),this.check()}invert(){return function(t,e){var n=e[0],r=e[1],i=e[2],o=e[3],a=e[4],s=e[5],l=e[6],c=e[7],u=e[8],h=u*a-s*c,d=-u*o+s*l,f=c*o-a*l,p=n*h+r*d+i*f;p&&(p=1/p,t[0]=h*p,t[1]=(-u*r+i*c)*p,t[2]=(s*r-i*a)*p,t[3]=d*p,t[4]=(u*n-i*l)*p,t[5]=(-s*n+i*o)*p,t[6]=f*p,t[7]=(-c*n+r*l)*p,t[8]=(a*n-r*o)*p)}(this,this),this.check()}multiplyLeft(t){return Tct(this,t,this),this.check()}multiplyRight(t){return Tct(this,this,t),this.check()}rotate(t){return function(t,e,n){var r=e[0],i=e[1],o=e[2],a=e[3],s=e[4],l=e[5],c=e[6],u=e[7],h=e[8],d=Math.sin(n),f=Math.cos(n);t[0]=f*r+d*a,t[1]=f*i+d*s,t[2]=f*o+d*l,t[3]=f*a-d*r,t[4]=f*s-d*i,t[5]=f*l-d*o,t[6]=c,t[7]=u,t[8]=h}(this,this,t),this.check()}scale(t){return Array.isArray(t)?Mct(this,this,t):Mct(this,this,[t,t]),this.check()}translate(t){return function(t,e,n){var r=e[0],i=e[1],o=e[2],a=e[3],s=e[4],l=e[5],c=e[6],u=e[7],h=e[8],d=n[0],f=n[1];t[0]=r,t[1]=i,t[2]=o,t[3]=a,t[4]=s,t[5]=l,t[6]=d*r+f*a+c,t[7]=d*i+f*s+u,t[8]=d*o+f*l+h}(this,this,t),this.check()}transform(t,e){let n;switch(t.length){case 2:n=function(t,e,n){var r=e[0],i=e[1];return t[0]=n[0]*r+n[3]*i+n[6],t[1]=n[1]*r+n[4]*i+n[7],t}(e||[-0,-0],t,this);break;case 3:n=GT(e||[-0,-0,-0],t,this);break;case 4:n=KT(e||[-0,-0,-0,-0],t,this);break;default:throw new Error("Illegal vector")}return jT(n,t.length),n}transformVector(t,e){return this.transform(t,e)}transformVector2(t,e){return this.transform(t,e)}transformVector3(t,e){return this.transform(t,e)}}let kct,Ict,Oct;class Lct extends RT{static get ZERO(){return Oct||(Oct=new Lct(0,0,0,0),Object.freeze(Oct)),Oct}constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;super(-0,-0,-0,-0),AT(t)&&1===arguments.length?this.copy(t):(TT.debug&&(LT(t),LT(e),LT(n),LT(r)),this[0]=t,this[1]=e,this[2]=n,this[3]=r)}set(t,e,n,r){return this[0]=t,this[1]=e,this[2]=n,this[3]=r,this.check()}copy(t){return this[0]=t[0],this[1]=t[1],this[2]=t[2],this[3]=t[3],this.check()}fromObject(t){return TT.debug&&(LT(t.x),LT(t.y),LT(t.z),LT(t.w)),this[0]=t.x,this[1]=t.y,this[2]=t.z,this[3]=t.w,this}toObject(t){return t.x=this[0],t.y=this[1],t.z=this[2],t.w=this[3],t}get ELEMENTS(){return 4}get z(){return this[2]}set z(t){this[2]=LT(t)}get w(){return this[3]}set w(t){this[3]=LT(t)}transform(t){return WT(this,this,t),this.check()}transformByMatrix3(t){return KT(this,this,t),this.check()}transformByMatrix2(t){return function(t,e,n){const r=e[0],i=e[1];t[0]=n[0]*r+n[2]*i,t[1]=n[1]*r+n[3]*i,t[2]=e[2],t[3]=e[3]}(this,this,t),this.check()}transformByQuaternion(t){return qT(this,this,t),this.check()}applyMatrix4(t){return t.transform(this,this),this}}function jct(){var t=new BT(4);return BT!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0),t[3]=1,t}function zct(t,e,n){n*=.5;var r=Math.sin(n);return t[0]=r*e[0],t[1]=r*e[1],t[2]=r*e[2],t[3]=Math.cos(n),t}function Rct(t,e,n){var r=e[0],i=e[1],o=e[2],a=e[3],s=n[0],l=n[1],c=n[2],u=n[3];return t[0]=r*u+a*s+i*c-o*l,t[1]=i*u+a*l+o*s-r*c,t[2]=o*u+a*c+r*l-i*s,t[3]=a*u-r*s-i*l-o*c,t}function Dct(t,e,n,r){var i,o,a,s,l,c=e[0],u=e[1],h=e[2],d=e[3],f=n[0],p=n[1],m=n[2],g=n[3];return(o=c*f+u*p+h*m+d*g)<0&&(o=-o,f=-f,p=-p,m=-m,g=-g),1-o>DT?(i=Math.acos(o),a=Math.sin(i),s=Math.sin((1-r)*i)/a,l=Math.sin(r*i)/a):(s=1-r,l=r),t[0]=s*c+l*f,t[1]=s*u+l*p,t[2]=s*h+l*m,t[3]=s*d+l*g,t}function Bct(t,e){var n,r=e[0]+e[4]+e[8];if(r>0)n=Math.sqrt(r+1),t[3]=.5*n,n=.5/n,t[0]=(e[5]-e[7])*n,t[1]=(e[6]-e[2])*n,t[2]=(e[1]-e[3])*n;else{var i=0;e[4]>e[0]&&(i=1),e[8]>e[3*i+i]&&(i=2);var o=(i+1)%3,a=(i+2)%3;n=Math.sqrt(e[3*i+i]-e[3*o+o]-e[3*a+a]+1),t[i]=.5*n,n=.5/n,t[3]=(e[3*o+a]-e[3*a+o])*n,t[o]=(e[3*o+i]+e[3*i+o])*n,t[a]=(e[3*a+i]+e[3*i+a])*n}return t}var Fct=function(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t[3]=e[3]+n[3],t},Nct=ck,Uct=function(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]+t[3]*e[3]},Vct=function(t,e,n,r){var i=e[0],o=e[1],a=e[2],s=e[3];return t[0]=i+r*(n[0]-i),t[1]=o+r*(n[1]-o),t[2]=a+r*(n[2]-a),t[3]=s+r*(n[3]-s),t},Wct=uk,Gct=hk,qct=function(t,e){var n=e[0],r=e[1],i=e[2],o=e[3],a=n*n+r*r+i*i+o*o;return a>0&&(a=1/Math.sqrt(a)),t[0]=n*a,t[1]=r*a,t[2]=i*a,t[3]=o*a,t},Hct=function(){var t=FT(),e=NT(1,0,0),n=NT(0,1,0);return function(r,i,o){var a=UT(i,o);return a<-.999999?(VT(t,e,i),ZT(t)<1e-6&&VT(t,n,i),function(t,e){var n=e[0],r=e[1],i=e[2],o=n*n+r*r+i*i;o>0&&(o=1/Math.sqrt(o)),t[0]=e[0]*o,t[1]=e[1]*o,t[2]=e[2]*o}(t,t),zct(r,t,Math.PI),r):a>.999999?(r[0]=0,r[1]=0,r[2]=0,r[3]=1,r):(VT(t,i,o),r[0]=t[0],r[1]=t[1],r[2]=t[2],r[3]=1+a,qct(r,r))}}();(function(){var t=jct(),e=jct()})(),function(){var t=function(){var t=new BT(9);return BT!=Float32Array&&(t[1]=0,t[2]=0,t[3]=0,t[5]=0,t[6]=0,t[7]=0),t[0]=1,t[4]=1,t[8]=1,t}()}();const Zct=[0,0,0,1];class Xct extends OT{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;super(-0,-0,-0,-0),Array.isArray(t)&&1===arguments.length?this.copy(t):this.set(t,e,n,r)}copy(t){return this[0]=t[0],this[1]=t[1],this[2]=t[2],this[3]=t[3],this.check()}set(t,e,n,r){return this[0]=t,this[1]=e,this[2]=n,this[3]=r,this.check()}fromObject(t){return this[0]=t.x,this[1]=t.y,this[2]=t.z,this[3]=t.w,this.check()}fromMatrix3(t){return Bct(this,t),this.check()}fromAxisRotation(t,e){return zct(this,t,e),this.check()}identity(){var t;return(t=this)[0]=0,t[1]=0,t[2]=0,t[3]=1,this.check()}setAxisAngle(t,e){return this.fromAxisRotation(t,e)}get ELEMENTS(){return 4}get x(){return this[0]}set x(t){this[0]=LT(t)}get y(){return this[1]}set y(t){this[1]=LT(t)}get z(){return this[2]}set z(t){this[2]=LT(t)}get w(){return this[3]}set w(t){this[3]=LT(t)}len(){return Wct(this)}lengthSquared(){return Gct(this)}dot(t){return Uct(this,t)}rotationTo(t,e){return Hct(this,t,e),this.check()}add(t){return Fct(this,this,t),this.check()}calculateW(){return function(t,e){var n=e[0],r=e[1],i=e[2];t[0]=n,t[1]=r,t[2]=i,t[3]=Math.sqrt(Math.abs(1-n*n-r*r-i*i))}(this,this),this.check()}conjugate(){return function(t,e){t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t[3]=e[3]}(this,this),this.check()}invert(){return function(t,e){var n=e[0],r=e[1],i=e[2],o=e[3],a=n*n+r*r+i*i+o*o,s=a?1/a:0;t[0]=-n*s,t[1]=-r*s,t[2]=-i*s,t[3]=o*s}(this,this),this.check()}lerp(t,e,n){return void 0===n?this.lerp(this,t,e):(Vct(this,t,e,n),this.check())}multiplyRight(t){return Rct(this,this,t),this.check()}multiplyLeft(t){return Rct(this,t,this),this.check()}normalize(){const t=this.len(),e=t>0?1/t:0;return this[0]=this[0]*e,this[1]=this[1]*e,this[2]=this[2]*e,this[3]=this[3]*e,0===t&&(this[3]=1),this.check()}rotateX(t){return function(t,e,n){n*=.5;var r=e[0],i=e[1],o=e[2],a=e[3],s=Math.sin(n),l=Math.cos(n);t[0]=r*l+a*s,t[1]=i*l+o*s,t[2]=o*l-i*s,t[3]=a*l-r*s}(this,this,t),this.check()}rotateY(t){return function(t,e,n){n*=.5;var r=e[0],i=e[1],o=e[2],a=e[3],s=Math.sin(n),l=Math.cos(n);t[0]=r*l-o*s,t[1]=i*l+a*s,t[2]=o*l+r*s,t[3]=a*l-i*s}(this,this,t),this.check()}rotateZ(t){return function(t,e,n){n*=.5;var r=e[0],i=e[1],o=e[2],a=e[3],s=Math.sin(n),l=Math.cos(n);t[0]=r*l+i*s,t[1]=i*l-r*s,t[2]=o*l+a*s,t[3]=a*l-o*s}(this,this,t),this.check()}scale(t){return Nct(this,this,t),this.check()}slerp(t,e,n){let r,i,o;switch(arguments.length){case 1:({start:r=Zct,target:i,ratio:o}=t);break;case 2:r=this,i=t,o=e;break;default:r=t,i=e,o=n}return Dct(this,r,i,o),this.check()}transformVector4(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Lct;return function(t,e,n){var r=e[0],i=e[1],o=e[2],a=n[0],s=n[1],l=n[2],c=n[3],u=c*r+s*o-l*i,h=c*i+l*r-a*o,d=c*o+a*i-s*r,f=-a*r-s*i-l*o;t[0]=u*c+f*-a+h*-l-d*-s,t[1]=h*c+f*-s+d*-a-u*-l,t[2]=d*c+f*-l+u*-s-h*-a,t[3]=e[3]}(e,t,this),jT(e,4)}lengthSq(){return this.lengthSquared()}setFromAxisAngle(t,e){return this.setAxisAngle(t,e)}premultiply(t){return this.multiplyLeft(t)}multiply(t){return this.multiplyRight(t)}}const Yct=new QT,Kct=new QT,$ct=new QT,Jct=new QT,Qct=new QT,tut=new QT,eut=new QT,nut=0,rut=1,iut=2,out=3,aut=4,sut=5,lut=6,cut=7,uut=8;class hut{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[0,0,0],e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[0,0,0,0,0,0,0,0,0];ww(this,"center",void 0),ww(this,"halfAxes",void 0),this.center=(new QT).from(t),this.halfAxes=new Pct(e)}get halfSize(){const t=this.halfAxes.getColumn(0),e=this.halfAxes.getColumn(1),n=this.halfAxes.getColumn(2);return[new QT(t).len(),new QT(e).len(),new QT(n).len()]}get quaternion(){const t=this.halfAxes.getColumn(0),e=this.halfAxes.getColumn(1),n=this.halfAxes.getColumn(2),r=new QT(t).normalize(),i=new QT(e).normalize(),o=new QT(n).normalize();return(new Xct).fromMatrix3(new Pct([...r,...i,...o]))}fromCenterHalfSizeQuaternion(t,e,n){const r=new Xct(n),i=(new Pct).fromQuaternion(r);return i[0]=i[0]*e[0],i[1]=i[1]*e[0],i[2]=i[2]*e[0],i[3]=i[3]*e[1],i[4]=i[4]*e[1],i[5]=i[5]*e[1],i[6]=i[6]*e[2],i[7]=i[7]*e[2],i[8]=i[8]*e[2],this.center=(new QT).from(t),this.halfAxes=i,this}clone(){return new hut(this.center,this.halfAxes)}equals(t){return this===t||Boolean(t)&&this.center.equals(t.center)&&this.halfAxes.equals(t.halfAxes)}getBoundingSphere(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Ect;const e=this.halfAxes,n=e.getColumn(0,$ct),r=e.getColumn(1,Jct),i=e.getColumn(2,Qct),o=Yct.copy(n).add(r).add(i);return t.center.copy(this.center),t.radius=o.magnitude(),t}intersectPlane(t){const e=this.center,n=t.normal,r=this.halfAxes,i=n.x,o=n.y,a=n.z,s=Math.abs(i*r[nut]+o*r[rut]+a*r[iut])+Math.abs(i*r[out]+o*r[aut]+a*r[sut])+Math.abs(i*r[lut]+o*r[cut]+a*r[uut]),l=n.dot(e)+t.distance;return l<=-s?gct:l>=s?vct:yct}distanceTo(t){return Math.sqrt(this.distanceSquaredTo(t))}distanceSquaredTo(t){const e=Kct.from(t).subtract(this.center),n=this.halfAxes,r=n.getColumn(0,$ct),i=n.getColumn(1,Jct),o=n.getColumn(2,Qct),a=r.magnitude(),s=i.magnitude(),l=o.magnitude();r.normalize(),i.normalize(),o.normalize();let c,u=0;return c=Math.abs(e.dot(r))-a,c>0&&(u+=c*c),c=Math.abs(e.dot(i))-s,c>0&&(u+=c*c),c=Math.abs(e.dot(o))-l,c>0&&(u+=c*c),u}computePlaneDistances(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[-0,-0],r=Number.POSITIVE_INFINITY,i=Number.NEGATIVE_INFINITY;const o=this.center,a=this.halfAxes,s=a.getColumn(0,$ct),l=a.getColumn(1,Jct),c=a.getColumn(2,Qct),u=tut.copy(s).add(l).add(c).add(o),h=eut.copy(u).subtract(t);let d=e.dot(h);return r=Math.min(d,r),i=Math.max(d,i),u.copy(o).add(s).add(l).subtract(c),h.copy(u).subtract(t),d=e.dot(h),r=Math.min(d,r),i=Math.max(d,i),u.copy(o).add(s).subtract(l).add(c),h.copy(u).subtract(t),d=e.dot(h),r=Math.min(d,r),i=Math.max(d,i),u.copy(o).add(s).subtract(l).subtract(c),h.copy(u).subtract(t),d=e.dot(h),r=Math.min(d,r),i=Math.max(d,i),o.copy(u).subtract(s).add(l).add(c),h.copy(u).subtract(t),d=e.dot(h),r=Math.min(d,r),i=Math.max(d,i),o.copy(u).subtract(s).add(l).subtract(c),h.copy(u).subtract(t),d=e.dot(h),r=Math.min(d,r),i=Math.max(d,i),o.copy(u).subtract(s).subtract(l).add(c),h.copy(u).subtract(t),d=e.dot(h),r=Math.min(d,r),i=Math.max(d,i),o.copy(u).subtract(s).subtract(l).subtract(c),h.copy(u).subtract(t),d=e.dot(h),r=Math.min(d,r),i=Math.max(d,i),n[0]=r,n[1]=i,n}transform(t){this.center.transformAsPoint(t);const e=this.halfAxes.getColumn(0,$ct);e.transformAsPoint(t);const n=this.halfAxes.getColumn(1,Jct);n.transformAsPoint(t);const r=this.halfAxes.getColumn(2,Qct);return r.transformAsPoint(t),this.halfAxes=new Pct([...e,...n,...r]),this}getTransform(){throw new Error("not implemented")}}const dut=new QT,fut=new QT;class put{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[0,0,1],e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;ww(this,"normal",void 0),ww(this,"distance",void 0),this.normal=new QT,this.distance=-0,this.fromNormalDistance(t,e)}fromNormalDistance(t,e){return zT(Number.isFinite(e)),this.normal.from(t).normalize(),this.distance=e,this}fromPointNormal(t,e){t=dut.from(t),this.normal.from(e).normalize();const n=-this.normal.dot(t);return this.distance=n,this}fromCoefficients(t,e,n,r){return this.normal.set(t,e,n),zT(kT(this.normal.len(),1)),this.distance=r,this}clone(){return new put(this.normal,this.distance)}equals(t){return kT(this.distance,t.distance)&&kT(this.normal,t.normal)}getPointDistance(t){return this.normal.dot(t)+this.distance}transform(t){const e=fut.copy(this.normal).transformAsVector(t).normalize(),n=this.normal.scale(-this.distance).transform(t);return this.fromPointNormal(n,e)}projectPointOntoPlane(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[0,0,0];t=dut.from(t);const n=this.getPointDistance(t),r=fut.copy(this.normal).scale(n);return t.subtract(r).to(e)}}const mut=[new QT([1,0,0]),new QT([0,1,0]),new QT([0,0,1])],gut=new QT,yut=new QT;new put(new QT(1,0,0),0);class vut{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];ww(this,"planes",void 0),this.planes=t}fromBoundingSphere(t){this.planes.length=2*mut.length;const e=t.center,n=t.radius;let r=0;for(const i of mut){let t=this.planes[r],o=this.planes[r+1];t||(t=this.planes[r]=new put),o||(o=this.planes[r+1]=new put);const a=gut.copy(i).scale(-n).add(e);i.dot(a);t.fromPointNormal(a,i);const s=gut.copy(i).scale(n).add(e),l=yut.copy(i).negate();l.dot(s);o.fromPointNormal(s,l),r+=2}return this}computeVisibility(t){let e=vct;for(const n of this.planes){switch(t.intersectPlane(n)){case gct:return gct;case yct:e=yct}}return e}computeVisibilityWithPlaneMask(t,e){if(zT(Number.isFinite(e),"parentPlaneMask is required."),e===vut.MASK_OUTSIDE||e===vut.MASK_INSIDE)return e;let n=vut.MASK_INSIDE;const r=this.planes;for(let i=0;i<this.planes.length;++i){const o=i<31?1<<i:0;if(i<31&&0===(e&o))continue;const a=r[i],s=t.intersectPlane(a);if(s===gct)return vut.MASK_OUTSIDE;s===yct&&(n|=o)}return n}}ww(vut,"MASK_OUTSIDE",4294967295),ww(vut,"MASK_INSIDE",0),ww(vut,"MASK_INDETERMINATE",2147483647);new QT,new QT,new QT,new QT,new QT;new QT,new QT,new QT,new QT,new QT,new QT,new QT,new QT,new QT,new QT,new QT,new QT,Math.PI;const _ut={EPSILON1:.1,EPSILON2:.01,EPSILON3:.001,EPSILON4:1e-4,EPSILON5:1e-5,EPSILON6:1e-6,EPSILON7:1e-7,EPSILON8:1e-8,EPSILON9:1e-9,EPSILON10:1e-10,EPSILON11:1e-11,EPSILON12:1e-12,EPSILON13:1e-13,EPSILON14:1e-14,EPSILON15:1e-15,EPSILON16:1e-16,EPSILON17:1e-17,EPSILON18:1e-18,EPSILON19:1e-19,EPSILON20:1e-20,PI_OVER_TWO:Math.PI/2,PI_OVER_FOUR:Math.PI/4,PI_OVER_SIX:Math.PI/6,TWO_PI:2*Math.PI},but=new Pct,xut=new Pct,wut=new Pct,Sut=new Pct,Eut=new Pct;function Tut(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=_ut.EPSILON20;let r=0,i=0;const o=xut,a=wut;o.identity(),a.copy(t);const s=n*function(t){let e=0;for(let n=0;n<9;++n){const r=t[n];e+=r*r}return Math.sqrt(e)}(a);for(;i<10&&Cut(a)>s;)Put(a,Sut),Eut.copy(Sut).transpose(),a.multiplyRight(Sut),a.multiplyLeft(Eut),o.multiplyRight(Sut),++r>2&&(++i,r=0);return e.unitary=o.toTarget(e.unitary),e.diagonal=a.toTarget(e.diagonal),e}const Mut=[1,0,0],Aut=[2,2,1];function Cut(t){let e=0;for(let n=0;n<3;++n){const r=t[but.getElementIndex(Aut[n],Mut[n])];e+=2*r*r}return Math.sqrt(e)}function Put(t,e){const n=_ut.EPSILON15;let r=0,i=1;for(let c=0;c<3;++c){const e=Math.abs(t[but.getElementIndex(Aut[c],Mut[c])]);e>r&&(i=c,r=e)}const o=Mut[i],a=Aut[i];let s=1,l=0;if(Math.abs(t[but.getElementIndex(a,o)])>n){const e=(t[but.getElementIndex(a,a)]-t[but.getElementIndex(o,o)])/2/t[but.getElementIndex(a,o)];let n;n=e<0?-1/(-e+Math.sqrt(1+e*e)):1/(e+Math.sqrt(1+e*e)),s=1/Math.sqrt(1+n*n),l=n*s}return Pct.IDENTITY.to(e),e[but.getElementIndex(o,o)]=e[but.getElementIndex(a,a)]=s,e[but.getElementIndex(a,o)]=l,e[but.getElementIndex(o,a)]=-l,e}const kut=new QT,Iut=new QT,Out=new QT,Lut=new QT,jut=new QT,zut=new Pct,Rut={diagonal:new Pct,unitary:new Pct};const Dut=512,But=3,Fut=[[.5,.5],[0,0],[0,1],[1,0],[1,1]],Nut=Fut.concat([[0,.5],[.5,0],[1,.5],[.5,1]]),Uut=Nut.concat([[.25,.5],[.75,.5]]);class Vut{constructor(t,e,n){ww(this,"x",void 0),ww(this,"y",void 0),ww(this,"z",void 0),ww(this,"childVisible",void 0),ww(this,"selected",void 0),ww(this,"_children",void 0),this.x=t,this.y=e,this.z=n}get children(){if(!this._children){const t=2*this.x,e=2*this.y,n=this.z+1;this._children=[new Vut(t,e,n),new Vut(t,e+1,n),new Vut(t+1,e,n),new Vut(t+1,e+1,n)]}return this._children}update(t){const{viewport:e,cullingVolume:n,elevationBounds:r,minZ:i,maxZ:o,bounds:a,offset:s,project:l}=t,c=this.getBoundingVolume(r,s,l);if(a&&!this.insideBounds(a))return!1;if(n.computeVisibility(c)<0)return!1;if(!this.childVisible){let{z:t}=this;if(t<o&&t>=i){const n=c.distanceTo(e.cameraPosition)*e.scale/e.height;t+=Math.floor(Math.log2(n))}if(t>=o)return this.selected=!0,!0}this.selected=!1,this.childVisible=!0;for(const u of this.children)u.update(t);return!0}getSelected(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];if(this.selected&&t.push(this),this._children)for(const e of this._children)e.getSelected(t);return t}insideBounds(t){let[e,n,r,i]=t;const o=Math.pow(2,this.z),a=Dut/o;return this.x*a<r&&this.y*a<i&&(this.x+1)*a>e&&(this.y+1)*a>n}getBoundingVolume(t,e,n){if(n){const e=this.z<1?Uut:this.z<2?Nut:Fut,r=[];for(const i of e){const e=$ut(this.x+i[0],this.y+i[1],this.z);e[2]=t[0],r.push(n(e)),t[0]!==t[1]&&(e[2]=t[1],r.push(n(e)))}return function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new hut;if(!t||0===t.length)return e.halfAxes=new Pct([0,0,0,0,0,0,0,0,0]),e.center=new QT,e;const n=t.length,r=new QT(0,0,0);for(const T of t)r.add(T);const i=1/n;r.multiplyByScalar(i);let o=0,a=0,s=0,l=0,c=0,u=0;for(const T of t){const t=kut.copy(T).subtract(r);o+=t.x*t.x,a+=t.x*t.y,s+=t.x*t.z,l+=t.y*t.y,c+=t.y*t.z,u+=t.z*t.z}o*=i,a*=i,s*=i,l*=i,c*=i,u*=i;const h=zut;h[0]=o,h[1]=a,h[2]=s,h[3]=a,h[4]=l,h[5]=c,h[6]=s,h[7]=c,h[8]=u;const{unitary:d}=Tut(h,Rut),f=e.halfAxes.copy(d);let p=f.getColumn(0,Out),m=f.getColumn(1,Lut),g=f.getColumn(2,jut),y=-Number.MAX_VALUE,v=-Number.MAX_VALUE,_=-Number.MAX_VALUE,b=Number.MAX_VALUE,x=Number.MAX_VALUE,w=Number.MAX_VALUE;for(const T of t)kut.copy(T),y=Math.max(kut.dot(p),y),v=Math.max(kut.dot(m),v),_=Math.max(kut.dot(g),_),b=Math.min(kut.dot(p),b),x=Math.min(kut.dot(m),x),w=Math.min(kut.dot(g),w);p=p.multiplyByScalar(.5*(b+y)),m=m.multiplyByScalar(.5*(x+v)),g=g.multiplyByScalar(.5*(w+_)),e.center.copy(p).add(m).add(g);const S=Iut.set(y-b,v-x,_-w).multiplyByScalar(.5),E=new Pct([S[0],0,0,0,S[1],0,0,0,S[2]]);return e.halfAxes.multiplyRight(E),e}(r)}const r=Math.pow(2,this.z),i=Dut/r,o=this.x*i+e*Dut,a=Dut-(this.y+1)*i;return new xct([o,a,t[0]],[o+i,a+i,t[1]])}}const Wut=512,Gut=[-1/0,-1/0,1/0,1/0],qut={type:"object",value:null,validate:(t,e)=>e.optional&&null===t||"string"===typeof t||Array.isArray(t)&&t.every((t=>"string"===typeof t)),equal:(t,e)=>{if(t===e)return!0;if(!Array.isArray(t)||!Array.isArray(e))return!1;const n=t.length;if(n!==e.length)return!1;for(let r=0;r<n;r++)if(t[r]!==e[r])return!1;return!0}};function Hut(t,e){const n=[e.transformAsPoint([t[0],t[1]]),e.transformAsPoint([t[2],t[1]]),e.transformAsPoint([t[0],t[3]]),e.transformAsPoint([t[2],t[3]])];return[Math.min(...n.map((t=>t[0]))),Math.min(...n.map((t=>t[1]))),Math.max(...n.map((t=>t[0]))),Math.max(...n.map((t=>t[1])))]}function Zut(t,e){if(!t||!t.length)return null;const{index:n,id:r}=e;if(Array.isArray(t)){const e=function(t){return Math.abs(t.split("").reduce(((t,e)=>(t<<5)-t+e.charCodeAt(0)|0),0))}(r)%t.length;t=t[e]}let i=t;for(const o of Object.keys(n)){const t=new RegExp("{".concat(o,"}"),"g");i=i.replace(t,String(n[o]))}return Number.isInteger(n.y)&&Number.isInteger(n.z)&&(i=i.replace(/\{-y\}/g,String(Math.pow(2,n.z)-n.y-1))),i}function Xut(t){let{viewport:e,z:n=0,cullRect:r}=t;return(e.subViewports||[e]).map((t=>Yut(t,n||0,r)))}function Yut(t,e,n){if(!Array.isArray(e)){const r=n.x-t.x,i=n.y-t.y,{width:o,height:a}=n,s={targetZ:e},l=t.unproject([r,i],s),c=t.unproject([r+o,i],s),u=t.unproject([r,i+a],s),h=t.unproject([r+o,i+a],s);return[Math.min(l[0],c[0],u[0],h[0]),Math.min(l[1],c[1],u[1],h[1]),Math.max(l[0],c[0],u[0],h[0]),Math.max(l[1],c[1],u[1],h[1])]}const r=Yut(t,e[0],n),i=Yut(t,e[1],n);return[Math.min(r[0],i[0]),Math.min(r[1],i[1]),Math.max(r[2],i[2]),Math.max(r[3],i[3])]}function Kut(t,e){return Math.pow(2,t)*Wut/e}function $ut(t,e,n){const r=Kut(n,Wut),i=t/r*360-180,o=Math.PI-2*Math.PI*e/r;return[i,180/Math.PI*Math.atan(.5*(Math.exp(o)-Math.exp(-o)))]}function Jut(t,e,n,r){const i=Kut(n,r);return[t/i*Wut,e/i*Wut]}function Qut(t,e,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Wut;if(t.isGeospatial){const[t,i]=$ut(e,n,r),[o,a]=$ut(e+1,n+1,r);return{west:t,north:i,east:o,south:a}}const[o,a]=Jut(e,n,r,i),[s,l]=Jut(e+1,n+1,r,i);return{left:o,top:a,right:s,bottom:l}}function tht(t,e,n,r,i){const o=function(t,e,n){let r;if(e&&2===e.length){const[n,i]=e,o=t.getBounds({z:n}),a=t.getBounds({z:i});r=[Math.min(o[0],a[0]),Math.min(o[1],a[1]),Math.max(o[2],a[2]),Math.max(o[3],a[3])]}else r=t.getBounds();return t.isGeospatial?[Math.max(r[0],n[0]),Math.max(r[1],n[1]),Math.min(r[2],n[2]),Math.min(r[3],n[3])]:[Math.max(Math.min(r[0],n[2]),n[0]),Math.max(Math.min(r[1],n[3]),n[1]),Math.min(Math.max(r[2],n[0]),n[2]),Math.min(Math.max(r[3],n[1]),n[3])]}(t,null,r),a=Kut(e,n),[s,l,c,u]=function(t,e,n){if(n)return Hut(t,n).map((t=>t*e/Wut));return t.map((t=>t*e/Wut))}(o,a,i),h=[];for(let d=Math.floor(s);d<c;d++)for(let t=Math.floor(l);t<u;t++)h.push({x:d,y:t,z:e});return h}function eht(t){let{viewport:e,maxZoom:n,minZoom:r,zRange:i,extent:o,tileSize:a=Wut,modelMatrix:s,modelMatrixInverse:l,zoomOffset:c=0}=t,u=e.isGeospatial?Math.round(e.zoom+Math.log2(Wut/a))+c:Math.ceil(e.zoom)+c;if("number"===typeof r&&Number.isFinite(r)&&u<r){if(!o)return[];u=r}"number"===typeof n&&Number.isFinite(n)&&u>n&&(u=n);let h=o;return s&&l&&o&&!e.isGeospatial&&(h=Hut(o,s)),e.isGeospatial?function(t,e,n,r){const i=t instanceof pct&&t.resolution?t.projectPosition:null,o=Object.values(t.getFrustumPlanes()).map((t=>{let{normal:e,distance:n}=t;return new put(e.clone().negate(),n)})),a=new vut(o),s=t.distanceScales.unitsPerMeter[2],l=n&&n[0]*s||0,c=n&&n[1]*s||0,u=t instanceof hI&&t.pitch<=60?e:0;if(r){const[t,e,n,i]=r,o=Hk([t,i]),a=Hk([n,e]);r=[o[0],Dut-o[1],a[0],Dut-a[1]]}const h=new Vut(0,0,0),d={viewport:t,project:i,cullingVolume:a,elevationBounds:[l,c],minZ:u,maxZ:e,bounds:r,offset:0};if(h.update(d),t instanceof hI&&t.subViewports&&t.subViewports.length>1){for(d.offset=-1;h.update(d)&&!(--d.offset<-But););for(d.offset=1;h.update(d)&&!(++d.offset>But););}return h.getSelected()}(e,u,i,o):tht(e,u,a,h||Gut,l)}function nht(t,e){if(t===e)return!0;if(Array.isArray(t)){const n=t.length;if(!e||e.length!==n)return!1;for(let r=0;r<n;r++)if(t[r]!==e[r])return!1;return!0}return!1}const rht=2,iht="never",oht="no-overlap",aht="best-available",sht={[aht]:function(t){for(const e of t)e.state=0;for(const e of t)e.isSelected&&!cht(e)&&uht(e);for(const e of t)e.isVisible=Boolean(e.state&rht)},[oht]:function(t){for(const n of t)n.state=0;for(const n of t)n.isSelected&&cht(n);const e=Array.from(t).sort(((t,e)=>t.zoom-e.zoom));for(const n of e)if(n.isVisible=Boolean(n.state&rht),n.children&&(n.isVisible||1&n.state))for(const t of n.children)t.state=1;else n.isSelected&&uht(n)},[iht]:()=>{}},lht={extent:null,tileSize:512,maxZoom:null,minZoom:null,maxCacheSize:null,maxCacheByteSize:null,refinementStrategy:"best-available",zRange:null,maxRequests:6,zoomOffset:0,onTileLoad:()=>{},onTileUnload:()=>{},onTileError:()=>{}};function cht(t){let e=t;for(;e;){if(e.isLoaded||e.content)return e.state|=rht,!0;e=e.parent}return!1}function uht(t){for(const e of t.children)e.isLoaded||e.content?e.state|=rht:uht(e)}const hht={TilesetClass:class{constructor(t){ww(this,"opts",void 0),ww(this,"_requestScheduler",void 0),ww(this,"_cache",void 0),ww(this,"_dirty",void 0),ww(this,"_tiles",void 0),ww(this,"_cacheByteSize",void 0),ww(this,"_viewport",void 0),ww(this,"_zRange",void 0),ww(this,"_selectedTiles",void 0),ww(this,"_frameNumber",void 0),ww(this,"_modelMatrix",void 0),ww(this,"_modelMatrixInverse",void 0),ww(this,"_maxZoom",void 0),ww(this,"_minZoom",void 0),ww(this,"onTileLoad",void 0),ww(this,"_getCullBounds",function(t){let e,n={};return r=>{for(const i in r)if(!nht(r[i],n[i])){e=t(r),n=r;break}return e}}(Xut)),this.opts={...lht,...t},this.onTileLoad=t=>{var e,n;null===(e=(n=this.opts).onTileLoad)||void 0===e||e.call(n,t),this.opts.maxCacheByteSize&&(this._cacheByteSize+=t.byteLength,this._resizeCache())},this._requestScheduler=new sct({maxRequests:t.maxRequests,throttleRequests:Boolean(t.maxRequests&&t.maxRequests>0)}),this._cache=new Map,this._tiles=[],this._dirty=!1,this._cacheByteSize=0,this._viewport=null,this._zRange=null,this._selectedTiles=null,this._frameNumber=0,this._modelMatrix=new Pk,this._modelMatrixInverse=new Pk,this.setOptions(t)}get tiles(){return this._tiles}get selectedTiles(){return this._selectedTiles}get isLoaded(){return null!==this._selectedTiles&&this._selectedTiles.every((t=>t.isLoaded))}get needsReload(){return null!==this._selectedTiles&&this._selectedTiles.some((t=>t.needsReload))}setOptions(t){Object.assign(this.opts,t),Number.isFinite(t.maxZoom)&&(this._maxZoom=Math.floor(t.maxZoom)),Number.isFinite(t.minZoom)&&(this._minZoom=Math.ceil(t.minZoom))}finalize(){for(const t of this._cache.values())t.isLoading&&t.abort();this._cache.clear(),this._tiles=[],this._selectedTiles=null}reloadAll(){for(const t of this._cache.keys()){const e=this._cache.get(t);this._selectedTiles&&this._selectedTiles.includes(e)?e.setNeedsReload():this._cache.delete(t)}}update(t){let{zRange:e,modelMatrix:n}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{zRange:null,modelMatrix:null};const r=n?new Pk(n):new Pk,i=!r.equals(this._modelMatrix);if(this._viewport&&t.equals(this._viewport)&&kT(this._zRange,e)&&!i)this.needsReload&&(this._selectedTiles=this._selectedTiles.map((t=>this._getTile(t.index,!0))));else{i&&(this._modelMatrixInverse=r.clone().invert(),this._modelMatrix=r),this._viewport=t,this._zRange=e;const n=this.getTileIndices({viewport:t,maxZoom:this._maxZoom,minZoom:this._minZoom,zRange:e,modelMatrix:this._modelMatrix,modelMatrixInverse:this._modelMatrixInverse});this._selectedTiles=n.map((t=>this._getTile(t,!0))),this._dirty&&this._rebuildTree()}const o=this.updateTileStates();return this._pruneRequests(),this._dirty&&this._resizeCache(),o&&this._frameNumber++,this._frameNumber}isTileVisible(t,e){if(!t.isVisible)return!1;if(e&&this._viewport){const n=this._getCullBounds({viewport:this._viewport,z:this._zRange,cullRect:e}),{bbox:r}=t;for(const[t,e,i,o]of n){let n;if("west"in r)n=r.west<i&&r.east>t&&r.south<o&&r.north>e;else{const a=Math.min(r.top,r.bottom),s=Math.max(r.top,r.bottom);n=r.left<i&&r.right>t&&a<o&&s>e}if(n)return!0}return!1}return!0}getTileIndices(t){let{viewport:e,maxZoom:n,minZoom:r,zRange:i,modelMatrix:o,modelMatrixInverse:a}=t;const{tileSize:s,extent:l,zoomOffset:c}=this.opts;return eht({viewport:e,maxZoom:n,minZoom:r,zRange:i,tileSize:s,extent:l,modelMatrix:o,modelMatrixInverse:a,zoomOffset:c})}getTileId(t){return"".concat(t.x,"-").concat(t.y,"-").concat(t.z)}getTileZoom(t){return t.z}getTileMetadata(t){const{tileSize:e}=this.opts;return{bbox:Qut(this._viewport,t.x,t.y,t.z,e)}}getParentIndex(t){return{x:Math.floor(t.x/2),y:Math.floor(t.y/2),z:t.z-1}}updateTileStates(){const t=this.opts.refinementStrategy||aht,e=new Array(this._cache.size);let n=0;for(const r of this._cache.values())e[n++]=r.isVisible,r.isSelected=!1,r.isVisible=!1;for(const r of this._selectedTiles)r.isSelected=!0,r.isVisible=!0;("function"===typeof t?t:sht[t])(Array.from(this._cache.values())),n=0;for(const r of this._cache.values())if(e[n++]!==r.isVisible)return!0;return!1}_pruneRequests(){const{maxRequests:t=0}=this.opts,e=[];let n=0;for(const r of this._cache.values())r.isLoading&&(n++,r.isSelected||r.isVisible||e.push(r));for(;t>0&&n>t&&e.length>0;){e.shift().abort(),n--}}_rebuildTree(){const{_cache:t}=this;for(const e of t.values())e.parent=null,e.children&&(e.children.length=0);for(const e of t.values()){const t=this._getNearestAncestor(e);e.parent=t,null!==t&&void 0!==t&&t.children&&t.children.push(e)}}_resizeCache(){const{_cache:t,opts:e}=this,n=e.maxCacheSize||(e.maxCacheByteSize?1/0:5*this.selectedTiles.length),r=e.maxCacheByteSize||1/0;if(t.size>n||this._cacheByteSize>r){for(const[a,s]of t){var i,o;if(!s.isVisible&&!s.isSelected)this._cacheByteSize-=e.maxCacheByteSize?s.byteLength:0,t.delete(a),null===(i=(o=this.opts).onTileUnload)||void 0===i||i.call(o,s);if(t.size<=n&&this._cacheByteSize<=r)break}this._rebuildTree(),this._dirty=!0}this._dirty&&(this._tiles=Array.from(this._cache.values()).sort(((t,e)=>t.zoom-e.zoom)),this._dirty=!1)}_getTile(t,e){const n=this.getTileId(t);let r=this._cache.get(n),i=!1;return!r&&e?(r=new lct(t),Object.assign(r,this.getTileMetadata(r.index)),Object.assign(r,{id:n,zoom:this.getTileZoom(r.index)}),i=!0,this._cache.set(n,r),this._dirty=!0):r&&r.needsReload&&(i=!0),r&&i&&r.loadData({getData:this.opts.getTileData,requestScheduler:this._requestScheduler,onLoad:this.onTileLoad,onError:this.opts.onTileError}),r}_getNearestAncestor(t){const{_minZoom:e=0}=this;let n=t.index;for(;this.getTileZoom(n)>e;){n=this.getParentIndex(n);const t=this._getTile(n);if(t)return t}return null}},data:{type:"data",value:[]},dataComparator:qut.equal,renderSubLayers:{type:"function",value:t=>new zz(t)},getTileData:{type:"function",optional:!0,value:null},onViewportLoad:{type:"function",optional:!0,value:null},onTileLoad:{type:"function",value:t=>{}},onTileUnload:{type:"function",value:t=>{}},onTileError:{type:"function",value:t=>console.error(t)},extent:{type:"array",optional:!0,value:null,compare:!0},tileSize:512,maxZoom:null,minZoom:0,maxCacheSize:null,maxCacheByteSize:null,refinementStrategy:aht,zRange:null,maxRequests:6,zoomOffset:0};class dht extends pL{constructor(){super(...arguments),ww(this,"state",void 0)}initializeState(){this.state={tileset:null,isLoaded:!1}}finalizeState(){var t,e;null===(t=this.state)||void 0===t||null===(e=t.tileset)||void 0===e||e.finalize()}get isLoaded(){var t,e,n;return Boolean(null===(t=this.state)||void 0===t||null===(e=t.tileset)||void 0===e||null===(n=e.selectedTiles)||void 0===n?void 0:n.every((t=>t.isLoaded&&t.layers&&t.layers.every((t=>t.isLoaded)))))}shouldUpdateState(t){let{changeFlags:e}=t;return e.somethingChanged}updateState(t){let{changeFlags:e}=t,{tileset:n}=this.state;const r=e.propsOrDataChanged||e.updateTriggersChanged,i=e.dataChanged||e.updateTriggersChanged&&(e.updateTriggersChanged.all||e.updateTriggersChanged.getTileData);n?r&&(n.setOptions(this._getTilesetOptions()),i?n.reloadAll():n.tiles.forEach((t=>{t.layers=null}))):(n=new this.props.TilesetClass(this._getTilesetOptions()),this.setState({tileset:n})),this._updateTileset()}_getTilesetOptions(){const{tileSize:t,maxCacheSize:e,maxCacheByteSize:n,refinementStrategy:r,extent:i,maxZoom:o,minZoom:a,maxRequests:s,zoomOffset:l}=this.props;return{maxCacheSize:e,maxCacheByteSize:n,maxZoom:o,minZoom:a,tileSize:t,refinementStrategy:r,extent:i,maxRequests:s,zoomOffset:l,getTileData:this.getTileData.bind(this),onTileLoad:this._onTileLoad.bind(this),onTileError:this._onTileError.bind(this),onTileUnload:this._onTileUnload.bind(this)}}_updateTileset(){const t=this.state.tileset,{zRange:e,modelMatrix:n}=this.props,r=t.update(this.context.viewport,{zRange:e,modelMatrix:n}),{isLoaded:i}=t,o=this.state.isLoaded!==i,a=this.state.frameNumber!==r;i&&(o||a)&&this._onViewportLoad(),a&&this.setState({frameNumber:r}),this.state.isLoaded=i}_onViewportLoad(){const{tileset:t}=this.state,{onViewportLoad:e}=this.props;e&&e(t.selectedTiles)}_onTileLoad(t){this.props.onTileLoad(t),t.layers=null,this.setNeedsUpdate()}_onTileError(t,e){this.props.onTileError(t),e.layers=null,this.setNeedsUpdate()}_onTileUnload(t){this.props.onTileUnload(t)}getTileData(t){const{data:e,getTileData:n,fetch:r}=this.props,{signal:i}=t;return t.url="string"===typeof e||Array.isArray(e)?Zut(e,t):null,n?n(t):r&&t.url?r(t.url,{propName:"data",layer:this,signal:i}):null}renderSubLayers(t){return this.props.renderSubLayers(t)}getSubLayerPropsByTile(t){return null}getPickingInfo(t){let{info:e,sourceLayer:n}=t;const r=n.props.tile;return e.picked&&(e.tile=r),e.sourceTile=r,e}_updateAutoHighlight(t){const e=t.sourceTile;if(e&&e.layers)for(const n of e.layers)n.updateAutoHighlight(t)}renderLayers(){return this.state.tileset.tiles.map((t=>{const e=this.getSubLayerPropsByTile(t);if(t.isLoaded||t.content)if(t.layers)e&&t.layers[0]&&Object.keys(e).some((n=>t.layers[0].props[n]!==e[n]))&&(t.layers=t.layers.map((t=>t.clone(e))));else{const n=this.renderSubLayers({...this.props,...this.getSubLayerProps({id:t.id,updateTriggers:this.props.updateTriggers}),data:t.content,_offset:0,tile:t});t.layers=pM(n,Boolean).map((n=>n.clone({tile:t,...e})))}else;return t.layers}))}filterSubLayer(t){let{layer:e,cullRect:n}=t;const{tile:r}=e.props;return this.state.tileset.isTileVisible(r,n)}}ww(dht,"defaultProps",hht),ww(dht,"layerName","TileLayer");const fht=new Uint16Array([0,2,1,0,3,2]),pht=new Float32Array([0,1,0,0,1,0,1,1]);function mht(t,e){if(!e)return function(t){const e=new Float64Array(12);for(let n=0;n<t.length;n++)e[3*n+0]=t[n][0],e[3*n+1]=t[n][1],e[3*n+2]=t[n][2]||0;return{vertexCount:6,positions:e,indices:fht,texCoords:pht}}(t);const n=Math.max(Math.abs(t[0][0]-t[3][0]),Math.abs(t[1][0]-t[2][0])),r=Math.max(Math.abs(t[1][1]-t[0][1]),Math.abs(t[2][1]-t[3][1])),i=Math.ceil(n/e)+1,o=Math.ceil(r/e)+1,a=(i-1)*(o-1)*6,s=new Uint32Array(a),l=new Float32Array(i*o*2),c=new Float64Array(i*o*3);let u=0,h=0;for(let d=0;d<i;d++){const e=d/(i-1);for(let n=0;n<o;n++){const r=n/(o-1),i=ght(t,e,r);c[3*u+0]=i[0],c[3*u+1]=i[1],c[3*u+2]=i[2]||0,l[2*u+0]=e,l[2*u+1]=1-r,d>0&&n>0&&(s[h++]=u-o,s[h++]=u-o-1,s[h++]=u-1,s[h++]=u-o,s[h++]=u-1,s[h++]=u),u++}}return{vertexCount:a,positions:c,indices:s,texCoords:l}}function ght(t,e,n){return PT(PT(t[0],t[1],n),PT(t[3],t[2],n),e)}const yht="\n#define SHADER_NAME bitmap-layer-fragment-shader\n\n#ifdef GL_ES\nprecision highp float;\n#endif\n\nuniform sampler2D bitmapTexture;\n\nvarying vec2 vTexCoord;\nvarying vec2 vTexPos;\n\nuniform float desaturate;\nuniform vec4 transparentColor;\nuniform vec3 tintColor;\nuniform float opacity;\n\nuniform float coordinateConversion;\nuniform vec4 bounds;\n\n/* projection utils */\nconst float TILE_SIZE = 512.0;\nconst float PI = 3.1415926536;\nconst float WORLD_SCALE = TILE_SIZE / PI / 2.0;\n\n// from degrees to Web Mercator\nvec2 lnglat_to_mercator(vec2 lnglat) {\n  float x = lnglat.x;\n  float y = clamp(lnglat.y, -89.9, 89.9);\n  return vec2(\n    radians(x) + PI,\n    PI + log(tan(PI * 0.25 + radians(y) * 0.5))\n  ) * WORLD_SCALE;\n}\n\n// from Web Mercator to degrees\nvec2 mercator_to_lnglat(vec2 xy) {\n  xy /= WORLD_SCALE;\n  return degrees(vec2(\n    xy.x - PI,\n    atan(exp(xy.y - PI)) * 2.0 - PI * 0.5\n  ));\n}\n/* End projection utils */\n\n// apply desaturation\nvec3 color_desaturate(vec3 color) {\n  float luminance = (color.r + color.g + color.b) * 0.333333333;\n  return mix(color, vec3(luminance), desaturate);\n}\n\n// apply tint\nvec3 color_tint(vec3 color) {\n  return color * tintColor;\n}\n\n// blend with background color\nvec4 apply_opacity(vec3 color, float alpha) {\n  if (transparentColor.a == 0.0) {\n    return vec4(color, alpha);\n  }\n  float blendedAlpha = alpha + transparentColor.a * (1.0 - alpha);\n  float highLightRatio = alpha / blendedAlpha;\n  vec3 blendedRGB = mix(transparentColor.rgb, color, highLightRatio);\n  return vec4(blendedRGB, blendedAlpha);\n}\n\nvec2 getUV(vec2 pos) {\n  return vec2(\n    (pos.x - bounds[0]) / (bounds[2] - bounds[0]),\n    (pos.y - bounds[3]) / (bounds[1] - bounds[3])\n  );\n}\n\n".concat("\nvec3 packUVsIntoRGB(vec2 uv) {\n  // Extract the top 8 bits. We want values to be truncated down so we can add a fraction\n  vec2 uv8bit = floor(uv * 256.);\n\n  // Calculate the normalized remainders of u and v parts that do not fit into 8 bits\n  // Scale and clamp to 0-1 range\n  vec2 uvFraction = fract(uv * 256.);\n  vec2 uvFraction4bit = floor(uvFraction * 16.);\n\n  // Remainder can be encoded in blue channel, encode as 4 bits for pixel coordinates\n  float fractions = uvFraction4bit.x + uvFraction4bit.y * 16.;\n\n  return vec3(uv8bit, fractions) / 255.;\n}\n","\n\nvoid main(void) {\n  vec2 uv = vTexCoord;\n  if (coordinateConversion < -0.5) {\n    vec2 lnglat = mercator_to_lnglat(vTexPos);\n    uv = getUV(lnglat);\n  } else if (coordinateConversion > 0.5) {\n    vec2 commonPos = lnglat_to_mercator(vTexPos);\n    uv = getUV(commonPos);\n  }\n  vec4 bitmapColor = texture2D(bitmapTexture, uv);\n\n  gl_FragColor = apply_opacity(color_tint(color_desaturate(bitmapColor.rgb)), bitmapColor.a * opacity);\n\n  geometry.uv = uv;\n  DECKGL_FILTER_COLOR(gl_FragColor, geometry);\n\n  if (picking_uActive && !picking_uAttribute) {\n    // Since instance information is not used, we can use picking color for pixel index\n    gl_FragColor.rgb = packUVsIntoRGB(uv);\n  }\n}\n"),vht={image:{type:"image",value:null,async:!0},bounds:{type:"array",value:[1,0,0,1],compare:!0},_imageCoordinateSystem:qw.DEFAULT,desaturate:{type:"number",min:0,max:1,value:0},transparentColor:{type:"color",value:[0,0,0,0]},tintColor:{type:"color",value:[255,255,255]},textureParameters:{type:"object",ignore:!0}};class _ht extends fL{constructor(){super(...arguments),ww(this,"state",void 0)}getShaders(){return super.getShaders({vs:"\n#define SHADER_NAME bitmap-layer-vertex-shader\n\nattribute vec2 texCoords;\nattribute vec3 positions;\nattribute vec3 positions64Low;\n\nvarying vec2 vTexCoord;\nvarying vec2 vTexPos;\n\nuniform float coordinateConversion;\n\nconst vec3 pickingColor = vec3(1.0, 0.0, 0.0);\n\nvoid main(void) {\n  geometry.worldPosition = positions;\n  geometry.uv = texCoords;\n  geometry.pickingColor = pickingColor;\n\n  gl_Position = project_position_to_clipspace(positions, positions64Low, vec3(0.0), geometry.position);\n  DECKGL_FILTER_GL_POSITION(gl_Position, geometry);\n\n  vTexCoord = texCoords;\n\n  if (coordinateConversion < -0.5) {\n    vTexPos = geometry.position.xy + project_uCommonOrigin.xy;\n  } else if (coordinateConversion > 0.5) {\n    vTexPos = geometry.worldPosition.xy;\n  }\n\n  vec4 color = vec4(0.0);\n  DECKGL_FILTER_COLOR(color, geometry);\n}\n",fs:yht,modules:[TL,CL]})}initializeState(){const t=this.getAttributeManager();t.remove(["instancePickingColors"]);const e=!0;t.add({indices:{size:1,isIndexed:!0,update:t=>t.value=this.state.mesh.indices,noAlloc:e},positions:{size:3,type:5130,fp64:this.use64bitPositions(),update:t=>t.value=this.state.mesh.positions,noAlloc:e},texCoords:{size:2,update:t=>t.value=this.state.mesh.texCoords,noAlloc:e}})}updateState(t){let{props:e,oldProps:n,changeFlags:r}=t;const i=this.getAttributeManager();if(r.extensionsChanged){var o;const{gl:t}=this.context;null===(o=this.state.model)||void 0===o||o.delete(),this.state.model=this._getModel(t),i.invalidateAll()}if(e.bounds!==n.bounds){const t=this.state.mesh,e=this._createMesh();this.state.model.setVertexCount(e.vertexCount);for(const n in e)t&&t[n]!==e[n]&&i.invalidate(n);this.setState({mesh:e,...this._getCoordinateUniforms()})}else e._imageCoordinateSystem!==n._imageCoordinateSystem&&this.setState(this._getCoordinateUniforms())}getPickingInfo(t){const{image:e}=this.props,n=t.info;if(!n.color||!e)return n.bitmap=null,n;const{width:r,height:i}=e;n.index=0;const o=function(t){const[e,n,r]=t;return[(e+(15&r)/16)/256,(n+(240&r)/256)/256]}(n.color),a=[Math.floor(o[0]*r),Math.floor(o[1]*i)];return n.bitmap={size:{width:r,height:i},uv:o,pixel:a},n}disablePickingIndex(){this.setState({disablePicking:!0})}restorePickingColors(){this.setState({disablePicking:!1})}_updateAutoHighlight(t){super._updateAutoHighlight({...t,color:this.encodePickingColor(0)})}_createMesh(){const{bounds:t}=this.props;let e=t;return bht(t)&&(e=[[t[0],t[1]],[t[0],t[3]],[t[2],t[3]],[t[2],t[1]]]),mht(e,this.context.viewport.resolution)}_getModel(t){return t?new xP(t,{...this.getShaders(),id:this.props.id,geometry:new kL({drawMode:4,vertexCount:6}),isInstanced:!1}):null}draw(t){const{uniforms:e,moduleParameters:n}=t,{model:r,coordinateConversion:i,bounds:o,disablePicking:a}=this.state,{image:s,desaturate:l,transparentColor:c,tintColor:u}=this.props;n.pickingActive&&a||s&&r&&r.setUniforms(e).setUniforms({bitmapTexture:s,desaturate:l,transparentColor:c.map((t=>t/255)),tintColor:u.slice(0,3).map((t=>t/255)),coordinateConversion:i,bounds:o}).draw()}_getCoordinateUniforms(){const{LNGLAT:t,CARTESIAN:e,DEFAULT:n}=qw;let{_imageCoordinateSystem:r}=this.props;if(r!==n){const{bounds:n}=this.props;if(!bht(n))throw new Error("_imageCoordinateSystem only supports rectangular bounds");const i=this.context.viewport.resolution?t:e;if(r=r===t?t:e,r===t&&i===e)return{coordinateConversion:-1,bounds:n};if(r===e&&i===t){const t=Hk([n[0],n[1]]),e=Hk([n[2],n[3]]);return{coordinateConversion:1,bounds:[t[0],t[1],e[0],e[1]]}}}return{coordinateConversion:0,bounds:[0,0,0,0]}}}function bht(t){return Number.isFinite(t[0])}function xht(t){return Uz({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M16.939 10.939 12 15.879l-4.939-4.94-2.122 2.122L12 20.121l7.061-7.06z"}},{tag:"path",attr:{d:"M16.939 3.939 12 8.879l-4.939-4.94-2.122 2.122L12 13.121l7.061-7.06z"}}]})(t)}function wht(t){const{viewBox:e="0 0 24 24",d:n,displayName:i,defaultProps:o={}}=t,a=r.Children.toArray(t.path),s=wi(((t,r)=>(0,Si.jsx)(Qi,{ref:r,viewBox:e,...o,...t,children:a.length?a:(0,Si.jsx)("path",{fill:"currentColor",d:n})})));return s.displayName=i,s}ww(_ht,"layerName","BitmapLayer"),ww(_ht,"defaultProps",vht);var Sht=wht({displayName:"HamburgerIcon",viewBox:"0 0 24 24",d:"M 3 5 A 1.0001 1.0001 0 1 0 3 7 L 21 7 A 1.0001 1.0001 0 1 0 21 5 L 3 5 z M 3 11 A 1.0001 1.0001 0 1 0 3 13 L 21 13 A 1.0001 1.0001 0 1 0 21 11 L 3 11 z M 3 17 A 1.0001 1.0001 0 1 0 3 19 L 21 19 A 1.0001 1.0001 0 1 0 21 17 L 3 17 z"});const Eht={scrollZoom:!1,touchZoom:!0,keyboard:{moveSpeed:!1},dragMode:"pan"},Tht=.25,Mht=t=>{let{year:e}=t;const[n]=ki("(max-width: 800px)"),{width:i}=pat(),{data:o}=wat(Not),{data:a}=wat(Got),[s,l]=(0,r.useState)(0),c="https://server.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}",u=.88+.12/1e3*(i-400);h=e||1990,"".concat(Fot,"/expansion_").concat(h,".jpg");var h;(0,r.useEffect)((()=>{if(a){const t=a[0].population/(a[0].mts_built/1e6);l(t)}}),[a]);const d={latitude:25.68,longitude:n?-100.32:-100.52,zoom:(e?9.6:9.2)*u,pitch:10,bearing:0,transitionDuration:800};return(0,Si.jsxs)($3,{initialViewState:{...d,pitch:e?0:10},controller:Eht,style:{width:"100%",height:"100%",backgroundSize:"cover",backgroundPosition:"center",backgroundRepeat:"no-repeat",width:"100dvw",height:"100dvh",position:"sticky",overflow:"hidden",right:"0",float:"right",zIndex:-1,boxShadow:"5px 10px 10px 0px rgba(0,0,0,0.3)"},children:[(0,Si.jsx)(dht,{id:"satellite-imagery-layer",data:c,minZoom:0,maxZoom:12,tileSize:256,getTileData:t=>{const e=c.replace("{x}",t.index.x).replace("{y}",t.index.y).replace("{z}",t.index.z);return fetch(e).then((t=>t.blob())).then((t=>createImageBitmap(t))).then((t=>{let e=document.createElement("canvas");e.width=t.width,e.height=t.height;let n=e.getContext("2d");n.drawImage(t,0,0);let r=n.getImageData(0,0,e.width,e.height),i=r.data;for(let o=0;o<i.length;o+=4)i[o]*=Tht,i[o+1]*=Tht,i[o+2]*=Tht;return n.putImageData(r,0,0),createImageBitmap(e)}))},renderSubLayers:t=>{const{bbox:{west:e,south:n,east:r,north:i}}=t.tile;return new _ht(t,{data:null,image:t.data,bounds:[e,n,r,i]})}}),(0,Si.jsx)(zz,{id:"mancha-urbana-layer",data:o?o.features.filter((t=>+t.properties.year<=e)).sort(((t,e)=>+e.properties.year-+t.properties.year)):[],getFillColor:t=>1990===+t.properties.year?[200,200,200,90]:[106,46,171,150],stroked:!0}),(0,Si.jsxs)("div",{style:{display:"flex",padding:"1dvw",justifyContent:"end",height:"100%",textAlign:"end",flexDirection:"column"},children:[(0,Si.jsx)("div",{style:{height:"100%"}}),(0,Si.jsxs)("div",{style:{height:"100%"},children:[e&&a?(0,Si.jsxs)(Si.Fragment,{children:[a?(0,Si.jsxs)(Si.Fragment,{children:[(0,Si.jsx)(Kz,{fontSize:n?"8px":"min(2.4dvh, 1.2dvw)",color:"white",children:(0,Si.jsx)("b",{children:"".concat((a[0].population/1e6).toFixed(1)," millones de personas")})}),(0,Si.jsx)(Kz,{fontSize:n?"8px":"min(2.4dvh, 1.2dvw)",color:"white",children:(0,Si.jsxs)("b",{children:["".concat((a[0].mts_built/1e6).toFixed(0)," km")," ",(0,Si.jsx)("sup",{children:"2"})]})})]}):"",(0,Si.jsx)(Kz,{fontFamily:"Poppins",fontSize:n?"25px":"min(7dvh, 3.5dvw)",color:"white",mt:"1",style:{lineHeight:1},children:(0,Si.jsx)("b",{children:"1990"})})]}):null,e>1990?(0,Si.jsxs)(Si.Fragment,{children:[(0,Si.jsx)(Kz,{fontFamily:"Poppins",fontSize:n?"25px":"min(7dvh, 3.5dvw)",color:"purple.400",mb:"1",style:{lineHeight:1,WebkitTextStrokeWidth:"0.1px",WebkitTextStrokeColor:"rgba(255, 255, 255, 0.5)"},children:(0,Si.jsx)("b",{children:e})}),a?(0,Si.jsxs)(Si.Fragment,{children:[(0,Si.jsx)(Kz,{fontSize:n?"8px":"min(2.4dvh, 1.2dvw)",color:"purple.400",style:{WebkitTextStrokeWidth:"0.1px",WebkitTextStrokeColor:"rgba(255, 255, 255, 0.5)"},children:(0,Si.jsxs)("b",{children:["".concat((a[(e-1990)/5].mts_built/1e6).toFixed(0)," km")," ",(0,Si.jsx)("sup",{children:"2"})]})}),(0,Si.jsx)(Kz,{fontSize:n?"8px":"min(2.4dvh, 1.2dvw)",color:"purple.400",style:{WebkitTextStrokeWidth:"0.1px",WebkitTextStrokeColor:"rgba(255, 255, 255, 0.5)"},children:(0,Si.jsx)("b",{children:"".concat((a[(e-1990)/5].population/1e6).toFixed(1)," millones de personas")})}),(0,Si.jsxs)(Kz,{fontSize:n?"8px":"min(2.4dvh, 1.2dvw)",color:"purple.400",children:[(0,Si.jsx)(Qi,{as:xht,color:"red.600",boxSize:n?"8px":"min(2dvh, 1dvw)",mx:n?"0.5":"2"}),(0,Si.jsx)("b",{style:{WebkitTextStrokeWidth:"0.1px",WebkitTextStrokeColor:"rgba(255, 255, 255, 0.5)"},children:"".concat(function(t){const e=(t-1990)/5,n=a[e].population/(a[e].mts_built/1e6);return 100*((s-n)/s).toFixed(2)}(e),"% menos densidad")})]})]}):""]}):null]}),e?(0,Si.jsx)(Si.Fragment,{children:(0,Si.jsx)("div",{style:{height:"100%",display:"flex",flexDirection:"column",justifyContent:"end"},children:(0,Si.jsx)(Kz,{fontSize:n?"6px":"min(1.6dvh, 0.8dvw)",style:{color:"white",alignItems:"end",alignSelf:"flex-end"},children:(0,Si.jsx)("div",{style:{width:"50vw"},children:"*La superficie que se reporta es la superficie de suelo construido. El suelo construido se define as\xed cuando el \xe1rea de una celda de 30x30 mts tiene al menos un 20% de su superficie cubierta con un techo. La fuente de informaci\xf3n es el Global Human Settlement Layer (https://human-settlement.emergency.copernicus.eu/). La m\xe9trica no reporta suelo urbanizado como vialidades y espacio p\xfablico. Se eligi\xf3 esta m\xe9trica porque era la \xfanica forma de contar con un indicador consistente, sistem\xe1tico y confiable para medir su evoluci\xf3n en los \xfaltimos 30 a\xf1os."})})})}):null]})]})},Aht=()=>{const[t]=ki("(max-width: 800px)"),[e,n]=(0,r.useState)(!0),i=(0,r.useRef)(null),o=(0,r.useRef)(null),[a,s]=(0,r.useState)(0),l=5*a+1990;(0,r.useEffect)((()=>{const t=()=>{const t=(window.document.body.scrollTop-i.current.offsetTop)/(i.current.scrollHeight-i.current.offsetTop);n(t<-.3);const e=Math.min(Math.max(Math.floor(7*t),0),6);s(e)};return window.document.body.addEventListener("scroll",t),()=>window.document.body.removeEventListener("scroll",t)}),[]);const c=()=>{if(o.current){const t=o.current.offsetHeight,e=(window.innerHeight-t)/2;o.current.style.top="".concat(e,"px")}};(0,r.useEffect)((()=>(window.addEventListener("resize",c),c(),()=>{window.removeEventListener("resize",c)})),[]);const u={lineHeight:"1.1",textAlign:"left",marginLeft:"2rem"},h={width:t?"60%":"calc(40% - 60px)",margin:t?"200px 10px 0 10px":"200px 40px 0 40px",paddingBottom:"100px",lineHeight:t?"1.5":"1.4"};return(0,Si.jsx)("div",{children:(0,Si.jsxs)("div",{style:{height:t?"100%":"100dvh",display:"flex",flexDirection:"column",justifyContent:"space-between",alignItems:"center",marginTop:"0"},children:[(0,Si.jsxs)(F7,{align:"center",position:"absolute",bg:"transparent",w:"100dvw",justify:"space-between",display:"flex",h:"10dvh",p:2,children:[(0,Si.jsx)(F7,{w:t?"calc(100dvw - 40px)":"70%",style:{display:"flex",alignItems:"center"},children:["SIUM.png","femsa.png","tec.png","fundacion_femsa.png"].map(((e,n)=>(0,Si.jsx)("img",{className:"headerImage",src:"/".concat(e),alt:"SIUM",style:{padding:"5px",height:"10dvh",width:"25%",maxWidth:t?"100%":"200px",objectFit:"contain"}},n)))}),(0,Si.jsx)(F7,{w:t?"40px":"25%",justify:"end",align:"center",children:t?(0,Si.jsxs)(qlt,{children:[(0,Si.jsx)(Zlt,{as:kp,"aria-label":"Options",icon:(0,Si.jsx)(Sht,{}),variant:"outline",size:"sm",colorScheme:"whiteAlpha"}),(0,Si.jsxs)(Klt,{children:[(0,Si.jsx)(tct,{as:"a",href:"/acerca#objetivo",minH:"50px",children:"Objetivo"}),(0,Si.jsx)(tct,{as:"a",href:"/acerca#equipo",minH:"50px",children:"Equipo"}),(0,Si.jsx)(tct,{as:"a",href:"/descargas",minH:"50px",children:"Descargas"})]})]}):(0,Si.jsxs)(Si.Fragment,{children:[(0,Si.jsx)(Ki,{as:"a",href:"/acerca#objetivo",variant:"text",color:"white",fontSize:"min(2.4dvh, 1.2dvw)",children:"Objetivo"}),(0,Si.jsx)(Ki,{as:"a",href:"/acerca#equipo",variant:"text",color:"white",fontSize:"min(2.4dvh, 1.2dvw)",children:"Equipo"}),(0,Si.jsx)(Ki,{as:"a",href:"/descargas",variant:"text",color:"white",fontSize:"min(2.4dvh, 1.2dvw)",children:"Descargas"})]})})]}),(0,Si.jsxs)("div",{children:[(0,Si.jsx)(Mht,{year:e?void 0:l}),(0,Si.jsxs)("div",{style:{display:"grid"},children:[(0,Si.jsx)("div",{style:{height:"100dvh",width:"100dvw",display:"flex",justifyContent:"center",alignItems:"left",borderRadius:"0px 0px 0px 50px",flexDirection:"column",overflowX:"hidden"},children:(0,Si.jsxs)("div",{children:[(0,Si.jsx)(Yz,{style:{color:"antiquewhite",textAlign:"left",marginLeft:"1rem"},fontWeight:"500",fontSize:t?"12dvw":"min(26dvh, 13dvw)",children:"CIUDAD FINITA"}),(0,Si.jsx)(Kz,{style:u,fontSize:t?"4dvw":"min(6dvh, 3dvw)",color:"aliceblue",m:"0",children:"Expansi\xf3n urbana en la"}),(0,Si.jsx)(Kz,{style:u,fontSize:t?"4dvw":"min(6dvh, 3dvw)",color:"aliceblue",m:"0",children:"Zona Metropolitana de"}),(0,Si.jsx)(Kz,{style:u,fontSize:t?"4dvw":"min(6dvh, 3dvw)",color:"orange.500",m:"0",children:(0,Si.jsx)("b",{children:"Monterrey"})})]})}),(0,Si.jsxs)("div",{ref:i,children:[(0,Si.jsxs)("div",{style:h,children:[(0,Si.jsx)(Yz,{color:"orange.500",fontSize:t?"lg":"min(3.4dvh, 1.7dvw)",children:"Los recursos de la metr\xf3polis son limitados"}),(0,Si.jsx)("br",{}),(0,Si.jsxs)(Kz,{color:"gray.100",fontSize:t?"xs":"min(3dvh, 1.5dvw)",children:["En las \xfaltimas tres d\xe9cadas, la superficie construida de la Zona Metropolitana de Monterrey crece m\xe1s rapido que la poblaci\xf3n y la ciudad ",(0,Si.jsx)("b",{children:"pierde densidad"}),". Este desarrollo, si bien evidencia el dinamismo de la ciudad, tambi\xe9n conlleva riesgos ambientales, econ\xf3micos y sociales. Los recursos urbanos y ambientales, que son esenciales para el bienestar de la comunidad, ",(0,Si.jsx)("b",{children:"son finitos"})," y deben manejarse con responsabilidad."]})]}),(0,Si.jsxs)("div",{style:h,children:[(0,Si.jsx)(Yz,{color:"orange.500",fontSize:t?"lg":"min(3.4dvh, 1.7dvw)",children:"Crecimiento sin planeaci\xf3n"}),(0,Si.jsx)("br",{}),(0,Si.jsxs)(Kz,{color:"gray.100",fontSize:t?"xs":"min(3dvh, 1.5dvw)",children:[(0,Si.jsx)("b",{children:"La 'mancha urbana'"})," se refiere a la expansi\xf3n continua de la ciudad en t\xe9rminos de construcci\xf3n y desarrollo. En este contexto, es crucial destacar que esta expansi\xf3n no planificada y descontrolada requiere una"," ",(0,Si.jsx)("b",{children:"reconsideraci\xf3n urgente."})]})]}),(0,Si.jsxs)("div",{style:h,children:[(0,Si.jsx)(Yz,{color:"orange.500",fontSize:t?"lg":"min(3.4dvh, 1.7dvw)",children:"Visibilizaci\xf3n, propuestas y acci\xf3n colectiva"}),(0,Si.jsx)("br",{}),(0,Si.jsxs)(Kz,{color:"gray.100",fontSize:t?"xs":"min(3dvh, 1.5dvw)",children:["La ",(0,Si.jsx)("b",{children:"finitud de los recursos"})," urbanos, ambientales y la expansi\xf3n ",(0,Si.jsx)("b",{children:"aparentemente 'infinita'"})," de la ciudad, nos hace plantearnos diversas preguntas fundamentales sobre la sostenibilidad y la gesti\xf3n responsable de nuestro entorno. Enfrentar estos desaf\xedos requiere un"," ",(0,Si.jsx)("b",{children:"enfoque reflexivo y acciones concertadas"})," para garantizar un futuro sostenible para la comunidad y el entorno en la Zona Metropolitana de Monterrey."]})]})]})]})]}),(0,Si.jsx)("div",{style:{position:"fixed",bottom:"0",right:"0",margin:"10px",display:"grid"},children:(0,Si.jsx)(Pp,{label:"Enviar comentario",hasArrow:!0,padding:"0.5rem",bg:"gray.700",fontSize:"xs",borderRadius:"md",placement:"right",children:(0,Si.jsx)("a",{href:"https://forms.office.com/r/HtvBBujdAe",rel:"noopener",target:"_blank",children:(0,Si.jsx)(kp,{size:"sm",isRound:!0,icon:(0,Si.jsx)(qz,{}),variant:"solid",mb:"2.1dvh",colorScheme:"blackAlpha"})})})}),(0,Si.jsx)(oct,{})]})})};var[Cht,Pht]=Ii({name:"AccordionStylesContext",hookName:"useAccordionStyles",providerName:"<Accordion />"}),[kht,Iht]=Ii({name:"AccordionItemContext",hookName:"useAccordionItemContext",providerName:"<AccordionItem />"}),[Oht,Lht,jht,zht]=Elt();function Rht(t){const{onChange:e,defaultIndex:n,index:i,allowMultiple:o,allowToggle:a,...s}=t;!function(t){const e=t.index||t.defaultIndex,n=null!=e&&!Array.isArray(e)&&t.allowMultiple;Ot({condition:!!n,message:"If 'allowMultiple' is passed, then 'index' or 'defaultIndex' must be an array. You passed: ".concat(typeof e,",")})}(t),function(t){Ot({condition:!(!t.allowMultiple||!t.allowToggle),message:"If 'allowMultiple' is passed, 'allowToggle' will be ignored. Either remove 'allowToggle' or 'allowMultiple' depending on whether you want multiple accordions visible or not"})}(t);const l=jht(),[c,u]=(0,r.useState)(-1);(0,r.useEffect)((()=>()=>{u(-1)}),[]);const[h,d]=QK({value:i,defaultValue:()=>o?null!=n?n:[]:null!=n?n:-1,onChange:e});return{index:h,setIndex:d,htmlProps:s,getAccordionItemProps:t=>{let e=!1;null!==t&&(e=Array.isArray(h)?h.includes(t):h===t);return{isOpen:e,onChange:e=>{if(null!==t)if(o&&Array.isArray(h)){const n=e?h.concat(t):h.filter((e=>e!==t));d(n)}else e?d(t):a&&d(-1)}}},focusedIndex:c,setFocusedIndex:u,descendants:l}}var[Dht,Bht]=Ii({name:"AccordionContext",hookName:"useAccordionContext",providerName:"Accordion"});function Fht(t){const{isDisabled:e,isFocusable:n,id:i,...o}=t,{getAccordionItemProps:a,setFocusedIndex:s}=Bht(),l=(0,r.useRef)(null),c=(0,r.useId)(),u=null!=i?i:c,h="accordion-button-".concat(u),d="accordion-panel-".concat(u);!function(t){Ot({condition:!(!t.isFocusable||t.isDisabled),message:"Using only 'isFocusable', this prop is reserved for situations where you pass 'isDisabled' but you still want the element to receive focus (A11y). Either remove it or pass 'isDisabled' as well.\n    "})}(t);const{register:f,index:p,descendants:m}=zht({disabled:e&&!n}),{isOpen:g,onChange:y}=a(-1===p?null:p);!function(t){Ot({condition:t.isOpen&&!!t.isDisabled,message:"Cannot open a disabled accordion item"})}({isOpen:g,isDisabled:e});const v=(0,r.useCallback)((()=>{null==y||y(!g),s(p)}),[p,s,g,y]),_=(0,r.useCallback)((t=>{const e={ArrowDown:()=>{const t=m.nextEnabled(p);null==t||t.node.focus()},ArrowUp:()=>{const t=m.prevEnabled(p);null==t||t.node.focus()},Home:()=>{const t=m.firstEnabled();null==t||t.node.focus()},End:()=>{const t=m.lastEnabled();null==t||t.node.focus()}},n=e[t.key];n&&(t.preventDefault(),n(t))}),[m,p]),b=(0,r.useCallback)((()=>{s(p)}),[s,p]),x=(0,r.useCallback)((function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return{...t,type:"button",ref:Xi(f,l,n),id:h,disabled:!!e,"aria-expanded":!!g,"aria-controls":d,onClick:Dt(t.onClick,v),onFocus:Dt(t.onFocus,b),onKeyDown:Dt(t.onKeyDown,_)}}),[h,e,g,v,b,_,d,f]),w=(0,r.useCallback)((function(){return{...arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},ref:arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,role:"region",id:d,"aria-labelledby":h,hidden:!g}}),[h,g,d]);return{isOpen:g,isDisabled:e,isFocusable:n,onOpen:()=>{null==y||y(!0)},onClose:()=>{null==y||y(!1)},getButtonProps:x,getPanelProps:w,htmlProps:o}}var Nht=wi((function(t,e){let{children:n,reduceMotion:i,...o}=t;const a=Gi("Accordion",o),s=Mn(o),{htmlProps:l,descendants:c,...u}=Rht(s),h=(0,r.useMemo)((()=>({...u,reduceMotion:!!i})),[u,i]);return(0,Si.jsx)(Oht,{value:c,children:(0,Si.jsx)(Dht,{value:h,children:(0,Si.jsx)(Cht,{value:a,children:(0,Si.jsx)(xi.div,{ref:e,...l,className:kt("chakra-accordion",o.className),__css:a.root,children:n})})})})}));Nht.displayName="Accordion";var Uht=wi((function(t,e){const{children:n,className:i}=t,{htmlProps:o,...a}=Fht(t),s={...Pht().container,overflowAnchor:"none"},l=(0,r.useMemo)((()=>a),[a]);return(0,Si.jsx)(kht,{value:l,children:(0,Si.jsx)(xi.div,{ref:e,...o,className:kt("chakra-accordion__item",i),__css:s,children:"function"===typeof n?n({isExpanded:!!a.isOpen,isDisabled:!!a.isDisabled}):n})})}));Uht.displayName="AccordionItem";var Vht=wi((function(t,e){const{getButtonProps:n}=Iht(),r=n(t,e),i={display:"flex",alignItems:"center",width:"100%",outline:0,...Pht().button};return(0,Si.jsx)(xi.button,{...r,className:kt("chakra-accordion__button",t.className),__css:i})}));function Wht(t){const{isOpen:e,isDisabled:n}=Iht(),{reduceMotion:r}=Bht(),i=kt("chakra-accordion__icon",t.className),o={opacity:n?.4:1,transform:e?"rotate(-180deg)":void 0,transition:r?void 0:"transform 0.2s",transformOrigin:"center",...Pht().icon};return(0,Si.jsx)(Qi,{viewBox:"0 0 24 24","aria-hidden":!0,className:i,__css:o,...t,children:(0,Si.jsx)("path",{fill:"currentColor",d:"M16.59 8.59L12 13.17 7.41 8.59 6 10l6 6 6-6z"})})}Vht.displayName="AccordionButton",Wht.displayName="AccordionIcon";var Ght=t=>null!=t&&parseInt(t.toString(),10)>0,qht={exit:{height:{duration:.2,ease:u4.ease},opacity:{duration:.3,ease:u4.ease}},enter:{height:{duration:.3,ease:u4.ease},opacity:{duration:.4,ease:u4.ease}}},Hht={exit:t=>{let{animateOpacity:e,startingHeight:n,transition:r,transitionEnd:i,delay:o}=t;var a;return{...e&&{opacity:Ght(n)?1:0},height:n,transitionEnd:null==i?void 0:i.exit,transition:null!=(a=null==r?void 0:r.exit)?a:f4(qht.exit,o)}},enter:t=>{let{animateOpacity:e,endingHeight:n,transition:r,transitionEnd:i,delay:o}=t;var a;return{...e&&{opacity:1},height:n,transitionEnd:null==i?void 0:i.enter,transition:null!=(a=null==r?void 0:r.enter)?a:d4(qht.enter,o)}}},Zht=(0,r.forwardRef)(((t,e)=>{const{in:n,unmountOnExit:i,animateOpacity:o=!0,startingHeight:a=0,endingHeight:s="auto",style:l,className:c,transition:u,transitionEnd:h,...d}=t,[f,p]=(0,r.useState)(!1);(0,r.useEffect)((()=>{const t=setTimeout((()=>{p(!0)}));return()=>clearTimeout(t)}),[]),Ot({condition:Number(a)>0&&!!i,message:"startingHeight and unmountOnExit are mutually exclusive. You can't use them together"});const m=parseFloat(a.toString())>0,g={startingHeight:a,endingHeight:s,animateOpacity:o,transition:f?u:{enter:{duration:0}},transitionEnd:{enter:null==h?void 0:h.enter,exit:i?null==h?void 0:h.exit:{...null==h?void 0:h.exit,display:m?"block":"none"}}},y=!i||n,v=n||i?"enter":"exit";return(0,Si.jsx)(Ap,{initial:!1,custom:g,children:y&&(0,Si.jsx)(bp.div,{ref:e,...d,className:kt("chakra-collapse",c),style:{overflow:"hidden",display:"block",...l},custom:g,variants:Hht,initial:!!i&&"exit",animate:v,exit:"exit"})})}));Zht.displayName="Collapse";var Xht=wi((function(t,e){const{className:n,motionProps:r,...i}=t,{reduceMotion:o}=Bht(),{getPanelProps:a,isOpen:s}=Iht(),l=a(i,e),c=kt("chakra-accordion__panel",n),u=Pht();o||delete l.hidden;const h=(0,Si.jsx)(xi.div,{...l,__css:u.panel,className:c});return o?h:(0,Si.jsx)(Zht,{in:s,...r,children:h})}));Xht.displayName="AccordionPanel";var Yht=n(2450),Kht=n.n(Yht);const $ht=t=>{let{legends:e,formatter:n}=t;const r=n||dv(",.0f");return(0,Si.jsx)(Ei,{borderRadius:"md",borderColor:"purple.100",borderWidth:"0.08rem",className:"legend-container",maxH:"25%",style:{width:"min-content",overflowY:"scroll",left:"1.5dvh",bottom:"1.5dvh",borderRadius:"0.5dvh",zIndex:"100"},children:e.map(((t,e)=>(0,Si.jsxs)(Ei,{mt:"1dvh",children:[(0,Si.jsx)(Yz,{color:"gray.700",fontSize:"min(1.8dvh, 0.9dvw)",children:t.title}),(0,Si.jsx)(b$,{children:(0,Si.jsx)(S$,{size:"xs",variant:"unstyled",children:(0,Si.jsx)(E$,{children:t.legendItems.map(((t,n)=>(0,Si.jsxs)(T$,{fontSize:"min(0.7dvw, 0.7dvh)",children:[(0,Si.jsx)(M$,{children:(0,Si.jsx)(R$,{className:"legend-color",bg:t.color,borderRadius:"15%",h:"min(1.6dvh, 0.8dvw)",w:"min(1.6dvh, 0.8dvw)"})}),(0,Si.jsx)(M$,{className:"legend-label",children:r(t.item1)}),(0,Si.jsx)(M$,{className:"legend-dash",children:"\u2014"}),(0,Si.jsx)(M$,{className:"legend-label",children:r(t.item2)})]},"legend-item-".concat(e,"-").concat(n))))})})})]},"legend-group-".concat(e))))})},Jht=t=>{let{title:e,children:n}=t;return(0,Si.jsx)(Ei,{borderRadius:"md",borderColor:"purple.100",borderWidth:"0.08rem",className:"legend-container",right:"1.5dvh !important",left:"auto !important",top:"1.5dvh !important",bottom:"auto !important",maxH:"25%",style:{width:"min-content",overflowY:"scroll",borderRadius:"0.5dvh",zIndex:"100"},children:(0,Si.jsxs)("div",{children:[(0,Si.jsx)(Yz,{color:"gray.700",fontSize:"min(1.8dvh, 0.9dvw)",my:"1dvh",children:e}),(0,Si.jsx)(b$,{children:(0,Si.jsx)(S$,{size:"sm",variant:"unstyled",children:(0,Si.jsx)(E$,{children:n})})})]})})},Qht=t=>{let{layerId:e,title:n,opacity:i,onOpacityChange:o}=t;const[a,s]=(0,r.useState)(!1);return(0,Si.jsx)(T$,{children:(0,Si.jsxs)(M$,{py:"0.5dvh",children:[(0,Si.jsx)(Kz,{textAlign:"left",fontSize:"min(1.6dvh, 0.8dvw)",children:n}),(0,Si.jsxs)(f$,{colorScheme:"purple",my:"0.5dvh","aria-label":"slider-".concat(e),defaultValue:null!==i&&void 0!==i?i:100,min:10,max:100,step:10,onChange:t=>{o(e,t)},onMouseEnter:()=>s(!0),onMouseLeave:()=>s(!1),children:[(0,Si.jsx)(m$,{children:(0,Si.jsx)(g$,{})}),(0,Si.jsx)(Pp,{hasArrow:!0,bg:"purple.300",color:"white",placement:"bottom",isOpen:a,label:"".concat(null!==i&&void 0!==i?i:100,"%"),children:(0,Si.jsx)(p$,{})})]})]})},e)};var tdt=wht({d:"M20 11H7.83l5.59-5.59L12 4l-8 8 8 8 1.41-1.41L7.83 13H20v-2z",displayName:"ArrowBackIcon"});const edt=[{name:"Delincuencia",color:"green2.300",description:"Los datos presentados corresponden a cuatro tipos de delitos del fuero com\xfan: violencia familiar, robo a transe\xfante, robo a negocio y robo a casa habitaci\xf3n. La informaci\xf3n fue recolectada del 1 de enero del 2017 al 31 de diciembre del 2020. Los casos en la base de datos corresponden a llamadas reportadas al 911.",url:"https://sium.blob.core.windows.net/sium/datos/crimen-hex.geojson",column:"num_crimen",titleLegend:"Incidencia delictiva 2017-2020",itemsLegend:xat([0,150,520],bat("#ccd1c7","#6a2eab",3))},{name:"Empleo",color:"orange.300",description:"Los datos de empleo proceden del Directorio Estad\xedstico Nacional de Unidades Econ\xf3micas (DENUE) del Instituto Nacional de Estad\xedstica y Geograf\xeda (INEGI) del a\xf1o 2010 y de diciembre del 2019 (antes de la pandemia de COVID19). El DENUE reporta un aproximado del n\xfamero de empleos a trav\xe9s de categor\xedas que describen el n\xfamero de personas trabajando en el establecimiento. Se tom\xf3 el valor intermedio de cada categor\xeda.",url:"https://sium.blob.core.windows.net/sium/datos/empleo-hex.geojson",column:"Empleos",titleLegend:"N\xfamero de Empleos en 2020",itemsLegend:xat([0,800,8400],bat("#dbb385","#6a2eab",3))},{name:"Crecimiento",color:"brown.300",description:"La informaci\xf3n de crecimiento es un esfuerzo propio de este equipo de investigaci\xf3n para empatar las cartograf\xedas de los Censos del Instituto Nacional de Estad\xedstica y Geograf\xeda (INEGI) de los a\xf1os 1990, 2000, 2010 y 2020.  La unidad base en que la informaci\xf3n se muestra corresponde a las \xc1reas Geoestad\xedsticas B\xe1sicas (AGEBs) del 2020. Los archivos muestran los diferenciales de poblaci\xf3n entre cada censo.",url:"https://sium.blob.core.windows.net/sium/datos/agebs-pob.geojson",column:"1990",titleLegend:"Leyenda crecimiento",itemsLegend:xat([-5100,0,11100],bat("#afab98","#6a2eab",3))},{name:"Segregaci\xf3n",color:"green1.300",description:["Los datos de segregaci\xf3n e ingreso por \xc1rea Geoestad\xedstica B\xe1sica (AGEB) fueron calculados por nuestro equipo de investigaci\xf3n. La metodolog\xeda se puede consultar en la siguiente publicaci\xf3n de acceso libre:","Peraza\u2010Mues, G., Ponce\u2010Lopez, R., Mu\xf1oz Sanchez, J. A., Cavazos Alanis, F., Olivera Mart\xednez, G., & Brambila Paz, C. (2024). Income Segregation Analysis in Limited\u2010Data Contexts: A Methodology Based on Iterative Proportional Fitting.\xa0Geographical Analysis,\xa056(1), 79-96."],url:"https://sium.blob.core.windows.net/sium/datos/income2.geojson",column:"income_pc",titleLegend:"Leyenda segregaci\xf3n",itemsLegend:xat([4e3,18e3,74e3],bat("#c2c8bb","#6a2eab",3)),inverted:!0},{name:"Vivienda",color:"brown2.300",description:"El Tecnol\xf3gico de Monterrey tiene un convenio con el Instituto del Fondo Nacional de la Vivienda para los Trabajadores (INFONAVIT). Los datos que se muestran corresponden a los cr\xe9ditos vigentes en 2019 de INFONAVIT que fueron otorgados por el instituto para adquirir una vivienda (parcial o totalmente) en los municipios de la Zona Metropolitana de Monterrey. Los datos se filtraron para analizar exclusivamente los cr\xe9ditos otorgados despu\xe9s del a\xf1o 2000.",url:"https://sium.blob.core.windows.net/sium/datos/vivienda-hex.geojson",column:"IM_PRECIO_VENTA",titleLegend:"Precio de Venta 2000-2020",filter:t=>2020===t.properties.year_end,itemsLegend:xat([16e4,8e5,18e5],bat("#ccc7ae","#6a2eab",3)),inverted:!0},{name:"Transporte",color:"yellow.500",description:"La informaci\xf3n de transporte proviene de la encuesta origen-destino del 2019 que el gobierno del estado de Nuevo Le\xf3n realiz\xf3 como parte del Programa Integral de Movilidad Urbana Sustentable (PIMUS) del \xc1rea Metropolitana de Monterrey. Transconsult fue la empresa consultora responsable del levantamiento de la encuesta.",url:"https://sium.blob.core.windows.net/sium/datos/transporte.geojson",titleLegend:"",itemsLegend:[],lineWidth:2},{name:"Mancha urbana",color:"orange.500",description:["Los datos de expansi\xf3n urbana proceden de la capa del Global Human Settlement Layer (GHSL), un proyecto fondeado por la Uni\xf3n Europea: https://human-settlement.emergency.copernicus.eu/","El GHSL identifica superficies con techo, que se denomina superficie construida. Las capas que se pueden descargar y que alimentan la visualizaci\xf3n corresponden a la superficie con techo que se agrega de forma quinquenal. Nuestro procesamiento de la informaci\xf3n considera una celda de 30x30 metros como construida si al menos el 20% de su superficie tiene un techo. La superficie construida no es equivalente a la superficie urbanizada. Superficie construida, que es la que se reporta en este sitio, no incluye vialidades ni espacio p\xfablico, sino exclusivamente la superficie con un techo. "],url:"https://sium.blob.core.windows.net/sium/datos/mancha_urbana.geojson",column:"year",titleLegend:"",itemsLegend:[]},{name:"Islas de calor",color:"teal1.500",description:"El equipo de investigaci\xf3n del Centro para el Futuro de las Ciudades gener\xf3 los datos de islas de calor. La metodolog\xeda se desarroll\xf3 como parte del proyecto titulado \u201cUrban Reporting Base don Satellite Analysis (URSA)\u201d con el equipo de Vivienda y Desarrollo Urbano del Banco Interamericano de Desarrollo (BID). Los datos en crudo proceden de las bandas t\xe9rmicas de las im\xe1genes Landsat y de la cobertura de suelo de World Dynamic.  La informaci\xf3n de la visualizaci\xf3n se reporta en dos formatos: 1) una categor\xeda de calor que va de muy fr\xedo a muy caliente, estos datos proceden del diferencial entre la zona rural de an\xe1lisis y cada p\xedxel urbano (cada celda mide 30x30 metross); 2) la temperatura en grados cent\xedgrados en crudo. La nota y repositorio a continuaci\xf3n aportan informaci\xf3n adicional sobre la metodolog\xeda que se emple\xf3 para generar los datos que alimentan la visualizaci\xf3n de islas de calor: https://blogs.iadb.org/ciudades-sostenibles/es/como-identificar-islas-de-calor-urbanas-descubre-ursa-el-nuevo-software-inteligente-del-bid/  y https://github.com/EL-BID/URSA",url:"https://sium.blob.core.windows.net/sium/datos/islas_calor.geojson",column:"Value",titleLegend:"",itemsLegend:[],fill:t=>(console.log(t),zot(t.properties.Value,[7,6,5,4,3,2,1],ctt,.5))},{name:"Escenarios de futuro",color:"teal2.500",description:["Los escenarios de futuro se construyen con un modelo de expansi\xf3n territorial basado en aut\xf3matas celulares llamado SLEUTH. El acr\xf3nimo de SLEUTH proviene del ingl\xe9s y representa los siguientes elementos: pendiente (Slope), uso del suelo (Land use), exclusiones (Exclusions), urbanizaci\xf3n (Urbanization), transporte (Transportation) y sombras de monta\xf1as (Hillshade). SLEUTH modela cuatro etapas de crecimiento urbano: expansi\xf3n, intensificaci\xf3n, densificaci\xf3n y reurbanizaci\xf3n. Estas fases de crecimiento son controladas por cuatro coeficientes, adem\xe1s de uno que controla el efecto de la pendiente. El coeficiente de difusi\xf3n regula la velocidad a la que se propaga el crecimiento urbano desde \xe1reas urbanizadas existentes hacia \xe1reas adyacentes. El coeficiente de reproducci\xf3n controla la tasa de aparici\xf3n de nuevas \xe1reas urbanizadas en el paisaje, mientras que el coeficiente de dispersi\xf3n maneja la extensi\xf3n del crecimiento urbano dentro de las \xe1reas urbanizadas existentes. Por \xfaltimo, el coeficiente de caminos controla el impacto de las infraestructuras de transporte en el crecimiento urbano.","Los escenarios son cualitativos para valorar contrastar futuros posibles y no se trata de predicciones. Esto es un proyecto en curso y trabajamos en mejoras a nuestro modelo de simulaci\xf3n. Si deseas conocer m\xe1s acerca de la metodolog\xeda detr\xe1s puedes consultar este trabajo acad\xe9mico:","Chaudhuri, G., & Clarke, K. (2013). The SLEUTH land use change model: A review. Environmental Resources Research, 1(1), 88-105."],url:"https://sium.blob.core.windows.net/sium/datos/escenarios.geojson",titleLegend:"",itemsLegend:[],filter:t=>"actual"===t.properties.escenario||"inercial"===t.properties.escenario,fill:t=>gat(_tt[t.properties.escenario])}],ndt=async(t,e)=>{const n=await fetch(t);if(200===n.status){const t=await n.blob();Kht().saveAs(t,e)}else console.error("No se pudo descargar el archivo GeoJSON:",n)};const rdt=t=>t.replace(/(\b(https?|ftp|file):\/\/[-A-Z0-9+&@#\/%?=~_|!:,.;]*[-A-Z0-9+&@#\/%=~_|])/gi,(t=>'<a href="'.concat(t,'" style="color: blue; text-decoration: underline;" target="_blank" rel="noopener noreferrer">').concat(t,"</a>"))),idt=t=>{let{title:e,description:n,onDownload:r,selected:i}=t;return(0,Si.jsxs)(Uht,{borderTopColor:"gray.100",children:[(0,Si.jsxs)(Vht,{_expanded:{bg:i?"purple.100":"white"},onClick:r,fontSize:"min(2dvh, 1dvw)",children:[(0,Si.jsx)(Wht,{}),(0,Si.jsx)(Ei,{flex:"1",textAlign:"left",zIndex:"1",children:e}),(0,Si.jsx)(Ei,{pointerEvents:"none",children:(0,Si.jsx)(v7,{colorScheme:"purple",isChecked:i,style:{verticalAlign:"middle"}})})]}),(0,Si.jsx)(Xht,{pb:4,children:Array.isArray(n)?n.map(((t,e)=>(0,Si.jsx)(Kz,{mb:e===n.length-1?0:4,dangerouslySetInnerHTML:{__html:rdt(t)},fontSize:"min(1.6dvh, 0.8dvw)"},e))):(0,Si.jsx)(Kz,{dangerouslySetInnerHTML:{__html:rdt(n)},fontSize:"min(1.6dvh, 0.8dvw)"})})]})},odt=()=>{const[t]=ki("(max-width: 800px)"),[e,n]=(0,r.useState)([]),[i,o]=(0,r.useState)(z5),[a,s]=(0,r.useState)(null),[l,c]=(0,r.useState)([]),[u,h]=(0,r.useState)({}),d=Fi("colors",edt.map((t=>t.color)));(0,r.useEffect)((()=>{const t=e.map((t=>{const e=a&&a[t.name];if(!e)return null;const n=edt.findIndex((e=>e.name===t.name)),r=d[n]||"#0000ff",i=e.features.map((e=>e.properties[t.column])),o=Math.min(...i),s=Math.max(...i),l=o!==s,c=u["".concat(t.name,"-layer")]/100||1;function h(e,n){if(!l)return[0,0,255,255];const i=(e.properties[t.column]-o)/(s-o),a=gat(r);return function(t,e,n,r){const i=e,o=n,a=r,s=106,l=46,c=171;if(arguments.length>4&&void 0!==arguments[4]&&arguments[4])return[Math.round(s*(1-t)+i*t),Math.round(l*(1-t)+o*t),Math.round(c*(1-t)+a*t),255];return[Math.round(i*(1-t)+s*t),Math.round(o*(1-t)+l*t),Math.round(a*(1-t)+c*t),255]}(i,a[0],a[1],a[2],t.inverted)}return{id:"".concat(t.name,"-layer"),opacity:.8,data:e.features.filter((e=>!t.filter||t.filter(e))).filter((e=>!t.column||(t.inverted?e.properties[t.column]<c*(s-o)+o:e.properties[t.column]>(1-c)*(s-o)+o))),getFillColor:e=>t.fill?t.fill(e):h(e),getLineWidth:t.lineWidth||0}})).filter((t=>t));c(t)}),[a,e,u]);const f=(t,e)=>{h((n=>({...n,[t]:e})))},p=e.map((t=>({title:t.titleLegend,legendItems:t.itemsLegend})));return t?(0,Si.jsxs)("div",{className:"fullscreenMessage",children:[(0,Si.jsx)(At,{to:"/problematica#expansion-urbana",children:(0,Si.jsx)("button",{className:"closeButton",children:"x"})}),(0,Si.jsx)(Kz,{color:"black",fontSize:"xl",textAlign:"center",mt:"4",children:"Esta secci\xf3n no se encuentra disponible en m\xf3vil por el momento. Para ver esta secci\xf3n, por favor visita la p\xe1gina en una computadora."})]}):(0,Si.jsxs)(F7,{h:"100vh",direction:{base:"column",md:"row"},children:[(0,Si.jsxs)(F7,{w:"35%",overflowY:"auto",mr:"0.4rem",bg:"white",h:"calc(100vh - 1dvh)",direction:"column",borderRadius:"0 0 2dvh 0",children:[(0,Si.jsxs)(F7,{direction:"column",h:"calc(100% - 5dvh)",borderColor:"purple.600",borderWidth:"0 0.25dvh 0 0",children:[(0,Si.jsxs)(F7,{textAlign:"center",alignItems:"center",py:"min(1dvh, 0.5dvw)",children:[(0,Si.jsx)(kp,{"aria-label":"Regresar",icon:(0,Si.jsx)(tdt,{}),variant:"ghost",href:"/",as:"a",colorScheme:"purple",mx:"0.5dvw",h:"min(5dvh, 2.5dvw)",w:"min(4dvh, 2dvw)",fontSize:"min(2.5dvh, 1.2dvw)"}),(0,Si.jsx)(Yz,{align:"center",fontSize:"min(3dvh, 1.5dvw)",children:"Categor\xedas"})]}),(0,Si.jsx)(Nht,{allowMultiple:!0,flex:"1",overflowY:"auto",colorScheme:"purple",children:edt.map((t=>(0,Si.jsx)(idt,{title:t.name,description:t.description,onDownload:()=>(async t=>{if(e.some((e=>e.name===t.name)))n((e=>e.filter((e=>e.name!==t.name)))),s((e=>({...e,[t.name]:void 0})));else{n((e=>[...e,t]));const e=await fetch(t.url).then((t=>t.json()));s((n=>({...n,[t.name]:e})))}})(t),selected:e.some((e=>e.name===t.name))},t.name)))})]}),(0,Si.jsx)(F7,{direction:"column",w:"full",mt:"auto",zIndex:10,children:(0,Si.jsx)(Ki,{borderRadius:"0 0 2dvh 0",borderWidth:"0.25dvh 0.25dvh 0.25dvh 0",borderColor:"purple.600",height:"5dvh",fontSize:"min(1.5dvh, 3dvw)",colorScheme:"purple",onClick:async()=>{for(let t of e)ndt(t.url,"".concat(t.name,".geojson"))},children:"Descargar GeoJSONs"})})]}),(0,Si.jsxs)(Ei,{className:"mapContainer",borderColor:"purple.600",flex:"1",borderRadius:"0 0 0 2dvh",children:[(0,Si.jsxs)($3,{viewState:i,onViewStateChange:t=>{let{viewState:e}=t;return o(e)},controller:!0,id:"deck-gl-canvas",children:[(0,Si.jsx)(E5,{width:"100%",height:"100%",mapStyle:"mapbox://styles/lameouchi/clvboacrd041l01pk9gyf4yve",mapboxAccessToken:"pk.eyJ1IjoibGFtZW91Y2hpIiwiYSI6ImNsa3ZqdHZtMDBjbTQzcXBpNzRyc2ljNGsifQ.287002jl7xT9SBub-dbBbQ"}),l.map((t=>(0,Si.jsx)(zz,{...t},t.id)))]}),p.length&&(0,Si.jsx)($ht,{legends:p}),l.length&&(0,Si.jsx)(Jht,{title:"Opacidad",children:l.map((t=>(0,Si.jsx)(Qht,{title:edt.find((e=>e.name===t.id.split("-")[0])).name,layerId:t.id,opacity:u[t.id],onOpacityChange:f},t.id)))})]})]})};var adt=wi((function(t,e){const{spacing:n="0.5rem",spacingX:i,spacingY:o,children:a,justify:s,direction:l,align:c,className:u,shouldWrapChildren:h,...d}=t,f=(0,r.useMemo)((()=>h?r.Children.map(a,((t,e)=>(0,Si.jsx)(sdt,{children:t},e))):a),[a,h]);return(0,Si.jsx)(xi.div,{ref:e,className:kt("chakra-wrap",u),...d,children:(0,Si.jsx)(xi.ul,{className:"chakra-wrap__list",__css:{display:"flex",flexWrap:"wrap",justifyContent:s,alignItems:c,flexDirection:l,listStyleType:"none",gap:n,columnGap:i,rowGap:o,padding:"0"},children:f})})}));adt.displayName="Wrap";var sdt=wi((function(t,e){const{className:n,...r}=t;return(0,Si.jsx)(xi.li,{ref:e,__css:{display:"flex",alignItems:"flex-start"},className:kt("chakra-wrap__listitem",n),...r})}));sdt.displayName="WrapItem";var ldt=()=>"undefined"!==typeof window;var cdt=t=>ldt()&&t.test(function(){var t;const e=navigator.userAgentData;return null!=(t=null==e?void 0:e.platform)?t:navigator.platform}()),udt=()=>{return cdt(/mac|iphone|ipad|ipod/i)&&(t=/apple/i,ldt()&&t.test(navigator.vendor));var t};var hdt={click:"click",hover:"hover"};function ddt(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{closeOnBlur:e=!0,closeOnEsc:n=!0,initialFocusRef:i,id:o,returnFocusOnClose:a=!0,autoFocus:s=!0,arrowSize:l,arrowShadowColor:c,trigger:u=hdt.click,openDelay:h=200,closeDelay:d=200,isLazy:f,lazyBehavior:p="unmount",computePositionOnMount:m,...g}=t,{isOpen:y,onClose:v,onOpen:_,onToggle:b}=qa(t),x=(0,r.useRef)(null),w=(0,r.useRef)(null),S=(0,r.useRef)(null),E=(0,r.useRef)(!1),T=(0,r.useRef)(!1);y&&(T.current=!0);const[M,A]=(0,r.useState)(!1),[C,P]=(0,r.useState)(!1),k=(0,r.useId)(),I=null!=o?o:k,[O,L,j,z]=["popover-trigger","popover-content","popover-header","popover-body"].map((t=>"".concat(t,"-").concat(I))),{referenceRef:R,getArrowProps:D,getPopperProps:B,getArrowInnerProps:F,forceUpdate:N}=Va({...g,enabled:y||!!m}),U=klt({isOpen:y,ref:S});!function(t){const{ref:e,elements:n,enabled:r}=t,i=()=>{var t,n;return null!=(n=null==(t=e.current)?void 0:t.ownerDocument)?n:document};Ha(i,"pointerdown",(t=>{if(!udt()||!r)return;const o=t.target,a=(null!=n?n:[e]).some((t=>{const e="current"in t?t.current:t;return(null==e?void 0:e.contains(o))||e===o}));i().activeElement!==o&&a&&(t.preventDefault(),o.focus())}))}({enabled:y,ref:w}),Mlt(S,{focusRef:w,visible:y,shouldFocus:a&&u===hdt.click}),function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Alt;const{focusRef:n,preventScroll:i,shouldFocus:o,visible:a}=e,s="current"in t?t.current:t,l=o&&a,c=(0,r.useRef)(l),u=(0,r.useRef)(a);Ai((()=>{!u.current&&a&&(c.current=l),u.current=a}),[a,l]);const h=(0,r.useCallback)((()=>{if(a&&s&&c.current&&(c.current=!1,!s.contains(document.activeElement)))if(null==n?void 0:n.current)requestAnimationFrame((()=>{var t;null==(t=n.current)||t.focus({preventScroll:i})}));else{const t=x8(s);t.length>0&&requestAnimationFrame((()=>{t[0].focus({preventScroll:i})}))}}),[a,i,s,n]);JK((()=>{h()}),[h]),Ha(s,"transitionend",h)}(S,{focusRef:i,visible:y,shouldFocus:s&&u===hdt.click});const V=Ilt({wasSelected:T.current,enabled:f,mode:p,isSelected:U.present}),W=(0,r.useCallback)((function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;const i={...t,style:{...t.style,transformOrigin:ao.transformOrigin.varRef,[ao.arrowSize.var]:l?"".concat(l,"px"):void 0,[ao.arrowShadowColor.var]:c},ref:Xi(S,r),children:V?t.children:null,id:L,tabIndex:-1,role:"dialog",onKeyDown:Dt(t.onKeyDown,(t=>{n&&"Escape"===t.key&&v()})),onBlur:Dt(t.onBlur,(t=>{const n=pdt(t),r=fdt(S.current,n),i=fdt(w.current,n);y&&e&&(!r&&!i)&&v()})),"aria-labelledby":M?j:void 0,"aria-describedby":C?z:void 0};return u===hdt.hover&&(i.role="tooltip",i.onMouseEnter=Dt(t.onMouseEnter,(()=>{E.current=!0})),i.onMouseLeave=Dt(t.onMouseLeave,(t=>{null!==t.nativeEvent.relatedTarget&&(E.current=!1,setTimeout((()=>v()),d))}))),i}),[V,L,M,j,C,z,u,n,v,y,e,d,c,l]),G=(0,r.useCallback)((function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return B({...t,style:{visibility:y?"visible":"hidden",...t.style}},e)}),[y,B]),q=(0,r.useCallback)((function(t){return{...t,ref:Xi(arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,x,R)}}),[x,R]),H=(0,r.useRef)(),Z=(0,r.useRef)(),X=(0,r.useCallback)((t=>{null==x.current&&R(t)}),[R]),Y=(0,r.useCallback)((function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;const r={...t,ref:Xi(w,n,X),id:O,"aria-haspopup":"dialog","aria-expanded":y,"aria-controls":L};return u===hdt.click&&(r.onClick=Dt(t.onClick,b)),u===hdt.hover&&(r.onFocus=Dt(t.onFocus,(()=>{void 0===H.current&&_()})),r.onBlur=Dt(t.onBlur,(t=>{const n=pdt(t),r=!fdt(S.current,n);y&&e&&r&&v()})),r.onKeyDown=Dt(t.onKeyDown,(t=>{"Escape"===t.key&&v()})),r.onMouseEnter=Dt(t.onMouseEnter,(()=>{E.current=!0,H.current=window.setTimeout((()=>_()),h)})),r.onMouseLeave=Dt(t.onMouseLeave,(()=>{E.current=!1,H.current&&(clearTimeout(H.current),H.current=void 0),Z.current=window.setTimeout((()=>{!1===E.current&&v()}),d)}))),r}),[O,y,L,u,X,b,_,e,v,h,d]);(0,r.useEffect)((()=>()=>{H.current&&clearTimeout(H.current),Z.current&&clearTimeout(Z.current)}),[]);const K=(0,r.useCallback)((function(){return{...arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},id:j,ref:Xi(arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,(t=>{A(!!t)}))}}),[j]),$=(0,r.useCallback)((function(){return{...arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},id:z,ref:Xi(arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,(t=>{P(!!t)}))}}),[z]);return{forceUpdate:N,isOpen:y,onAnimationComplete:U.onComplete,onClose:v,getAnchorProps:q,getArrowProps:D,getArrowInnerProps:F,getPopoverPositionerProps:G,getPopoverProps:W,getTriggerProps:Y,getHeaderProps:K,getBodyProps:$}}function fdt(t,e){return t===e||(null==t?void 0:t.contains(e))}function pdt(t){var e;const n=t.currentTarget.ownerDocument.activeElement;return null!=(e=t.relatedTarget)?e:n}var[mdt,gdt]=Ii({name:"PopoverContext",errorMessage:"usePopoverContext: `context` is undefined. Seems you forgot to wrap all popover components within `<Popover />`"}),[ydt,vdt]=Ii({name:"PopoverStylesContext",errorMessage:"usePopoverStyles returned is 'undefined'. Seems you forgot to wrap the components in \"<Popover />\" "});function _dt(t){const e=Gi("Popover",t),{children:n,...r}=Mn(t),i=ddt({...r,direction:Bi().direction});return(0,Si.jsx)(mdt,{value:i,children:(0,Si.jsx)(ydt,{value:e,children:Lt(n,{isOpen:i.isOpen,onClose:i.onClose,forceUpdate:i.forceUpdate})})})}function bdt(t){const e=r.Children.only(t.children),{getTriggerProps:n}=gdt();return(0,r.cloneElement)(e,n(e.props,e.ref))}function xdt(t){if(t)return{enter:{...t.enter,visibility:"visible"},exit:{...t.exit,transitionEnd:{visibility:"hidden"}}}}_dt.displayName="Popover",bdt.displayName="PopoverTrigger";var wdt={exit:{opacity:0,scale:.95,transition:{duration:.1,ease:[.4,0,1,1]}},enter:{scale:1,opacity:1,transition:{duration:.15,ease:[0,0,.2,1]}}},Sdt=xi(bp.section),Edt=wi((function(t,e){const{variants:n=wdt,...r}=t,{isOpen:i}=gdt();return(0,Si.jsx)(Sdt,{ref:e,variants:xdt(n),initial:!1,animate:i?"enter":"exit",...r})}));Edt.displayName="PopoverTransition";var Tdt=wi((function(t,e){const{rootProps:n,motionProps:r,...i}=t,{getPopoverProps:o,getPopoverPositionerProps:a,onAnimationComplete:s}=gdt(),l=vdt(),c={position:"relative",display:"flex",flexDirection:"column",...l.content};return(0,Si.jsx)(xi.div,{...a(n),__css:l.popper,className:"chakra-popover__popper",children:(0,Si.jsx)(Edt,{...r,...o(i,e),onAnimationComplete:Bt(s,i.onAnimationComplete),className:kt("chakra-popover__content",t.className),__css:c})})}));Tdt.displayName="PopoverContent";var Mdt=(t,e)=>e?"".concat(t,".").concat(e,", ").concat(e):void 0;function Adt(t){var e;const{bg:n,bgColor:r,backgroundColor:i,shadow:o,boxShadow:a,shadowColor:s}=t,{getArrowProps:l,getArrowInnerProps:c}=gdt(),u=vdt(),h=null!=(e=null!=n?n:r)?e:i,d=null!=o?o:a;return(0,Si.jsx)(xi.div,{...l(),className:"chakra-popover__arrow-positioner",children:(0,Si.jsx)(xi.div,{className:kt("chakra-popover__arrow",t.className),...c(t),__css:{"--popper-arrow-shadow-color":Mdt("colors",s),"--popper-arrow-bg":Mdt("colors",h),"--popper-arrow-shadow":Mdt("shadows",d),...u.arrow}})})}Adt.displayName="PopoverArrow";var Cdt=wi((function(t,e){const{getBodyProps:n}=gdt(),r=vdt();return(0,Si.jsx)(xi.div,{...n(t,e),className:kt("chakra-popover__body",t.className),__css:r.body})}));Cdt.displayName="PopoverBody";const Pdt={discusion:{label:"DISCUSI\xd3N",colorScheme:Eat.vivienda.color,description:"Para la toma de decisiones"},transparencia:{label:"TRANSPARENCIA",colorScheme:Eat["expansion-urbana"].color,description:"Acceso a la informaci\xf3n"},colectividad:{label:"COLECTIVIDAD",colorScheme:Eat.empleo.color,description:"Participaci\xf3n ciudadana"},accion:{label:"ACCI\xd3N",colorScheme:Eat.transporte.color,description:"Diversidad de opiniones"},innovacion:{label:"INNOVACI\xd3N",colorScheme:Eat.infancias.color,description:"Nuevo Modelo Urbano"}},kdt={coordinacionGeneral:{title:"COORDINACI\xd3N GENERAL",organization:"Centro para el Futuro de las Ciudades, Tecnol\xf3gico de Monterrey",members:["Jos\xe9 Antonio Torre","Roberto Ponce","Uriel Salazar"],contact:"rpl@tec.mx"},direccionCreativa:{title:"DIRECCI\xd3N CREATIVA",members:["Andrea Mart\xednez","Alberto Meouchi"]},analiticaYModelos:{title:"ANAL\xcdTICA Y MODELOS",members:["Gonzalo Peraza","Rodolfo Figueroa","N\xe9lida Escobedo","Claudia Ledezma","Fabi\xe1n Lozano"]},disenoWeb:{title:"DISE\xd1O WEB",members:["Jeannette Arjona","Tadeo Barrera","Diego Michel","Erick Schiller"]},agradecimientos:{title:"AGRADECIMIENTOS",members:["Luis \xc1vila","Rebecca Bell","Ana Hierro","Carlos Hurtado","Luc\xeda Elizondo","Sindy Gonz\xe1lez","Javiel Leal","Martha Montemayor","Luisa P\xe9rez","Carlos Placencia","Carlos Orozco","Marina Ram\xedrez"]}},Idt=()=>{const[t]=ki("(max-width: 800px)");return(0,Si.jsxs)("section",{id:"equipo",children:[(0,Si.jsx)(Ei,{bg:"#FEF5E7",w:"100dvw",h:"20dvh",mb:"8dvh",color:"#04511B",style:{textAlign:"center",padding:"auto",display:"grid",alignItems:"center"},children:(0,Si.jsx)(Yz,{as:"h1",fontSize:t?"4xl":"3dvw",children:"Equipo"})}),(0,Si.jsx)(Ei,{w:"100%",h:"auto",color:"#04511B",paddingX:"2dvw",style:{display:"flex",flexDirection:t?"column":"row",justifyContent:"space-around"},children:Object.values(kdt).map((e=>(0,Si.jsxs)(Ei,{marginBottom:"2dvh",paddingX:"2dvw",w:t?"auto":"17dvw",children:[(0,Si.jsx)("div",{style:{fontSize:t?"5dvw":"1.3dvw"},children:(0,Si.jsx)("b",{children:e.title})}),e.organization&&(0,Si.jsx)("div",{style:{fontSize:t?"3dvw":"0.8dvw"},children:(0,Si.jsx)("b",{children:e.organization})}),e.members.map((e=>(0,Si.jsx)("p",{style:{fontSize:t?"4dvw":"1dvw"},children:e},e))),e.contact&&(0,Si.jsx)(Si.Fragment,{children:(0,Si.jsxs)(Kz,{fontSize:t?"3dvw":"0.9dvw",mt:"1dvh",children:[(0,Si.jsx)("b",{children:"Contacto:"})," ",e.contact]})})]},e.title)))}),(0,Si.jsxs)(Ei,{width:"100%",paddingX:"3dvw",marginTop:t?"8dvh":"2dvh",marginBottom:"2dvh",fontSize:"1dvw",children:[(0,Si.jsx)("p",{style:{fontSize:t?"3dvw":"0.9dvw"},children:"Este proyecto ha sido fondeado generosamente por fundaci\xf3n FEMSA desde 2019."}),(0,Si.jsx)("p",{style:{fontSize:t?"3dvw":"0.9dvw"},children:"El SIUM, Sistema de Informaci\xf3n Urabano Metropolitano, es un proyecto del Centro para el Futuro de las Ciudades del Tecnol\xf3gico de Monterrey."})]}),(0,Si.jsx)(Ei,{position:"fixed",bottom:"1rem",right:"1rem",zIndex:"10",children:(0,Si.jsx)(Pp,{label:"Enviar comentario",hasArrow:!0,padding:"0.5rem",bg:"gray.700",fontSize:"xs",borderRadius:"md",placement:"right",children:(0,Si.jsx)("a",{href:"https://forms.office.com/r/HtvBBujdAe",children:(0,Si.jsx)(kp,{size:"sm",isRound:!0,icon:(0,Si.jsx)(qz,{}),variant:"solid",colorScheme:"blackAlpha"})})})})]})},Odt=()=>{const[t]=ki("(max-width: 800px)");return(0,Si.jsxs)("section",{id:"objetivo",style:{width:"100%",height:t?"auto":"90dvh"},children:[(0,Si.jsxs)(F7,{h:"100%",w:t?"100%":"50%",px:t?"5dvw":"0",style:{position:t?"static":"absolute",display:"flex",flexDirection:"column",alignItems:"center"},children:[(0,Si.jsx)("img",{className:"headerImage",src:"aspectos.png",alt:"SIUM",style:{height:t?"auto":"min(70dvh, 40dvw)",padding:"4dvh",objectFit:"contain",marginTop:"3dvh"}}),(0,Si.jsx)(Kz,{fontSize:t?"4dvw":"min(2dvw, 3dvh)",textAlign:"center",color:"#665232",mb:"5dvh",children:"Y mucho m\xe1s..."}),(0,Si.jsx)(f9,{color:"purple",videoId:"b3EgwpHB42s",title:"Carlos Hurtado",subtitle:"Fundaci\xf3n FEMSA, Seguridad H\xeddrica y Econom\xeda Circular.",text:"Importancia del SIUM."})]}),(0,Si.jsxs)(Ei,{h:t?"auto":"36dvh",w:"100%",children:[(0,Si.jsx)(F7,{bg:"#FEF5E7",w:"100%",h:t?"auto":"100%",p:"4dvh",color:"#04511B",mt:"3dvw",justifyContent:"space-around",children:(0,Si.jsxs)(Ei,{width:t?"100%":"30%",color:"#665232",ml:!t&&"50dvw",textAlign:"start",children:[(0,Si.jsx)(Kz,{fontSize:t?"6dvw":"min(2dvw, 4dvh)",children:(0,Si.jsx)("b",{children:"Objetivo General"})}),(0,Si.jsx)(Kz,{fontSize:t?"3dvw":"min(1.4dvw, 2.4dvh)",mt:"1dvw",children:"El SIUM tiene como finalidad mostrar el impacto de la expansi\xf3n urbana en la Zona Metropolitana de Monterrey."}),(0,Si.jsx)(Kz,{fontSize:t?"3dvw":"min(1.4dvw, 2.4dvh)",mt:"1dvw",children:"Generar una discusi\xf3n colectiva que lleve a un nuevo modelo urbano."})]})}),(0,Si.jsx)(F7,{w:"100%",h:"auto",children:(0,Si.jsxs)(Ei,{ml:t?"0":"50dvw",w:t?"100%":"50%",h:t?"auto":"100%",paddingY:t?"5dvh":"2dvh",style:{display:"flex",flexDirection:"column",justifyContent:"space-evenly"},children:[(0,Si.jsx)(Kz,{color:"#665232",fontSize:t?"6dvw":"1.6dvw",textAlign:"center",my:"1dvh",children:(0,Si.jsx)("b",{children:"Principios"})}),(0,Si.jsx)(adt,{spacingX:"2dvw",spacingY:"5dvh",justify:"center",p:"2dvh",children:Object.values(Pdt).map((e=>(0,Si.jsx)(sdt,{children:(0,Si.jsxs)(_dt,{trigger:"hover",placement:"top",children:[(0,Si.jsx)(bdt,{children:(0,Si.jsx)(Ki,{variant:"outline",colorScheme:e.colorScheme,fontSize:t?"4dvw":"1.5dvw",w:t?"70dvw":"13dvw",h:"12dvh",borderRadius:"min(4dvh, 4dvw)",children:e.label})}),(0,Si.jsxs)(Tdt,{w:"auto",color:"white",bg:"#2C3147",borderColor:"#2C3147",children:[(0,Si.jsx)(Adt,{bg:"#2C3147"}),(0,Si.jsx)(Cdt,{style:{textAlign:"center",fontSize:t?"4dvw":"1.5dvw"},children:e.description})]})]})},e.label)))})]})})]})]})},Ldt=()=>{const[t]=ki("(max-width: 800px)");return(0,Si.jsxs)(F7,{align:"center",bg:"black",w:"100dvw",justify:"space-between",display:"flex",h:"10dvh",p:2,position:"sticky",top:0,zIndex:2,children:[(0,Si.jsx)(F7,{w:t?"calc(100dvw - 40px)":"70%",style:{display:"flex",alignItems:"center"},children:["SIUM.png","femsa.png","tec.png","fundacion_femsa.png"].map(((e,n)=>(0,Si.jsx)("img",{className:"headerImage",src:"/".concat(e),alt:"SIUM",style:{padding:"5px",height:"10dvh",width:"25%",maxWidth:t?"100%":"200px",objectFit:"contain"}},n)))}),(0,Si.jsx)(F7,{w:t?"40px":"25%",justify:"end",align:"center",children:t?(0,Si.jsxs)(qlt,{children:[(0,Si.jsx)(Zlt,{as:kp,"aria-label":"Options",icon:(0,Si.jsx)(Sht,{}),variant:"outline",size:"sm",colorScheme:"whiteAlpha"}),(0,Si.jsxs)(Klt,{children:[(0,Si.jsx)(tct,{as:"a",href:"/",minH:"50px",children:"Inicio"}),(0,Si.jsx)(tct,{as:"a",href:"/acerca#objetivo",minH:"50px",children:"Objetivo"}),(0,Si.jsx)(tct,{as:"a",href:"/acerca#equipo",minH:"50px",children:"Equipo"})]})]}):(0,Si.jsxs)(Si.Fragment,{children:[(0,Si.jsx)(Ki,{as:"a",href:"/",variant:"text",color:"white",fontSize:"min(2.4dvh, 1.2dvw)",children:"Inicio"}),(0,Si.jsx)(Ki,{as:"a",href:"/acerca#objetivo",variant:"text",color:"white",fontSize:"min(2.4dvh, 1.2dvw)",children:"Objetivo"}),(0,Si.jsx)(Ki,{as:"a",href:"/acerca#equipo",variant:"text",color:"white",fontSize:"min(2.4dvh, 1.2dvw)",children:"Equipo"})]})})]})},jdt=()=>{const[t]=ki("(max-width: 800px)");return(0,Si.jsxs)("div",{style:{display:"flex",flexDirection:"column",justifyContent:"between",alignItems:"center",backgroundColor:"white",behavior:"smooth"},children:[(0,Si.jsx)(Ldt,{}),(0,Si.jsx)(Odt,{}),(0,Si.jsx)(Idt,{})]})};const zdt=function(){return(0,Si.jsx)(Et,{children:(0,Si.jsxs)(vt,{children:[(0,Si.jsx)(gt,{path:"/",exact:!0,element:(0,Si.jsx)(Aht,{})}),(0,Si.jsx)(gt,{path:"/problematica",element:(0,Si.jsx)(ult,{})}),(0,Si.jsx)(gt,{path:"/descargas",element:(0,Si.jsx)(odt,{})}),(0,Si.jsx)(gt,{path:"/acerca",element:(0,Si.jsx)(jdt,{})})]})})},Rdt=t=>{t&&t instanceof Function&&n.e(453).then(n.bind(n,6453)).then((e=>{let{getCLS:n,getFID:r,getFCP:i,getLCP:o,getTTFB:a}=e;n(t),r(t),i(t),o(t),a(t)}))};var Ddt=["borders","breakpoints","colors","components","config","direction","fonts","fontSizes","fontWeights","letterSpacings","lineHeights","radii","shadows","sizes","space","styles","transition","zIndices"];var Bdt={property:{common:"background-color, border-color, color, fill, stroke, opacity, box-shadow, transform",colors:"background-color, border-color, color, fill, stroke",dimensions:"width, height",position:"left, right, top, bottom",background:"background-color, background-image, background-position"},easing:{"ease-in":"cubic-bezier(0.4, 0, 1, 1)","ease-out":"cubic-bezier(0, 0, 0.2, 1)","ease-in-out":"cubic-bezier(0.4, 0, 0.2, 1)"},duration:{"ultra-fast":"50ms",faster:"100ms",fast:"150ms",normal:"200ms",slow:"300ms",slower:"400ms","ultra-slow":"500ms"}},Fdt={hide:-1,auto:"auto",base:0,docked:10,dropdown:1e3,sticky:1100,banner:1200,overlay:1300,modal:1400,popover:1500,skipLink:1600,toast:1700,tooltip:1800},Ndt={none:0,"1px":"1px solid","2px":"2px solid","4px":"4px solid","8px":"8px solid"},Udt={base:"0em",sm:"30em",md:"48em",lg:"62em",xl:"80em","2xl":"96em"},Vdt={transparent:"transparent",current:"currentColor",black:"#000000",white:"#FFFFFF",whiteAlpha:{50:"rgba(255, 255, 255, 0.04)",100:"rgba(255, 255, 255, 0.06)",200:"rgba(255, 255, 255, 0.08)",300:"rgba(255, 255, 255, 0.16)",400:"rgba(255, 255, 255, 0.24)",500:"rgba(255, 255, 255, 0.36)",600:"rgba(255, 255, 255, 0.48)",700:"rgba(255, 255, 255, 0.64)",800:"rgba(255, 255, 255, 0.80)",900:"rgba(255, 255, 255, 0.92)"},blackAlpha:{50:"rgba(0, 0, 0, 0.04)",100:"rgba(0, 0, 0, 0.06)",200:"rgba(0, 0, 0, 0.08)",300:"rgba(0, 0, 0, 0.16)",400:"rgba(0, 0, 0, 0.24)",500:"rgba(0, 0, 0, 0.36)",600:"rgba(0, 0, 0, 0.48)",700:"rgba(0, 0, 0, 0.64)",800:"rgba(0, 0, 0, 0.80)",900:"rgba(0, 0, 0, 0.92)"},gray:{50:"#F7FAFC",100:"#EDF2F7",200:"#E2E8F0",300:"#CBD5E0",400:"#A0AEC0",500:"#718096",600:"#4A5568",700:"#2D3748",800:"#1A202C",900:"#171923"},red:{50:"#FFF5F5",100:"#FED7D7",200:"#FEB2B2",300:"#FC8181",400:"#F56565",500:"#E53E3E",600:"#C53030",700:"#9B2C2C",800:"#822727",900:"#63171B"},orange:{50:"#FFFAF0",100:"#FEEBC8",200:"#FBD38D",300:"#F6AD55",400:"#ED8936",500:"#DD6B20",600:"#C05621",700:"#9C4221",800:"#7B341E",900:"#652B19"},yellow:{50:"#FFFFF0",100:"#FEFCBF",200:"#FAF089",300:"#F6E05E",400:"#ECC94B",500:"#D69E2E",600:"#B7791F",700:"#975A16",800:"#744210",900:"#5F370E"},green:{50:"#F0FFF4",100:"#C6F6D5",200:"#9AE6B4",300:"#68D391",400:"#48BB78",500:"#38A169",600:"#2F855A",700:"#276749",800:"#22543D",900:"#1C4532"},teal:{50:"#E6FFFA",100:"#B2F5EA",200:"#81E6D9",300:"#4FD1C5",400:"#38B2AC",500:"#319795",600:"#2C7A7B",700:"#285E61",800:"#234E52",900:"#1D4044"},blue:{50:"#ebf8ff",100:"#bee3f8",200:"#90cdf4",300:"#63b3ed",400:"#4299e1",500:"#3182ce",600:"#2b6cb0",700:"#2c5282",800:"#2a4365",900:"#1A365D"},cyan:{50:"#EDFDFD",100:"#C4F1F9",200:"#9DECF9",300:"#76E4F7",400:"#0BC5EA",500:"#00B5D8",600:"#00A3C4",700:"#0987A0",800:"#086F83",900:"#065666"},purple:{50:"#FAF5FF",100:"#E9D8FD",200:"#D6BCFA",300:"#B794F4",400:"#9F7AEA",500:"#805AD5",600:"#6B46C1",700:"#553C9A",800:"#44337A",900:"#322659"},pink:{50:"#FFF5F7",100:"#FED7E2",200:"#FBB6CE",300:"#F687B3",400:"#ED64A6",500:"#D53F8C",600:"#B83280",700:"#97266D",800:"#702459",900:"#521B41"},linkedin:{50:"#E8F4F9",100:"#CFEDFB",200:"#9BDAF3",300:"#68C7EC",400:"#34B3E4",500:"#00A0DC",600:"#008CC9",700:"#0077B5",800:"#005E93",900:"#004471"},facebook:{50:"#E8F4F9",100:"#D9DEE9",200:"#B7C2DA",300:"#6482C0",400:"#4267B2",500:"#385898",600:"#314E89",700:"#29487D",800:"#223B67",900:"#1E355B"},messenger:{50:"#D0E6FF",100:"#B9DAFF",200:"#A2CDFF",300:"#7AB8FF",400:"#2E90FF",500:"#0078FF",600:"#0063D1",700:"#0052AC",800:"#003C7E",900:"#002C5C"},whatsapp:{50:"#dffeec",100:"#b9f5d0",200:"#90edb3",300:"#65e495",400:"#3cdd78",500:"#22c35e",600:"#179848",700:"#0c6c33",800:"#01421c",900:"#001803"},twitter:{50:"#E5F4FD",100:"#C8E9FB",200:"#A8DCFA",300:"#83CDF7",400:"#57BBF5",500:"#1DA1F2",600:"#1A94DA",700:"#1681BF",800:"#136B9E",900:"#0D4D71"},telegram:{50:"#E3F2F9",100:"#C5E4F3",200:"#A2D4EC",300:"#7AC1E4",400:"#47A9DA",500:"#0088CC",600:"#007AB8",700:"#006BA1",800:"#005885",900:"#003F5E"}},Wdt={none:"0",sm:"0.125rem",base:"0.25rem",md:"0.375rem",lg:"0.5rem",xl:"0.75rem","2xl":"1rem","3xl":"1.5rem",full:"9999px"},Gdt={xs:"0 0 0 1px rgba(0, 0, 0, 0.05)",sm:"0 1px 2px 0 rgba(0, 0, 0, 0.05)",base:"0 1px 3px 0 rgba(0, 0, 0, 0.1), 0 1px 2px 0 rgba(0, 0, 0, 0.06)",md:"0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06)",lg:"0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05)",xl:"0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04)","2xl":"0 25px 50px -12px rgba(0, 0, 0, 0.25)",outline:"0 0 0 3px rgba(66, 153, 225, 0.6)",inner:"inset 0 2px 4px 0 rgba(0,0,0,0.06)",none:"none","dark-lg":"rgba(0, 0, 0, 0.1) 0px 0px 0px 1px, rgba(0, 0, 0, 0.2) 0px 5px 10px, rgba(0, 0, 0, 0.4) 0px 15px 40px"},qdt={none:0,sm:"4px",base:"8px",md:"12px",lg:"16px",xl:"24px","2xl":"40px","3xl":"64px"},Hdt={letterSpacings:{tighter:"-0.05em",tight:"-0.025em",normal:"0",wide:"0.025em",wider:"0.05em",widest:"0.1em"},lineHeights:{normal:"normal",none:1,shorter:1.25,short:1.375,base:1.5,tall:1.625,taller:"2",3:".75rem",4:"1rem",5:"1.25rem",6:"1.5rem",7:"1.75rem",8:"2rem",9:"2.25rem",10:"2.5rem"},fontWeights:{hairline:100,thin:200,light:300,normal:400,medium:500,semibold:600,bold:700,extrabold:800,black:900},fonts:{heading:'-apple-system, BlinkMacSystemFont, "Segoe UI", Helvetica, Arial, sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol"',body:'-apple-system, BlinkMacSystemFont, "Segoe UI", Helvetica, Arial, sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol"',mono:'SFMono-Regular,Menlo,Monaco,Consolas,"Liberation Mono","Courier New",monospace'},fontSizes:{"3xs":"0.45rem","2xs":"0.625rem",xs:"0.75rem",sm:"0.875rem",md:"1rem",lg:"1.125rem",xl:"1.25rem","2xl":"1.5rem","3xl":"1.875rem","4xl":"2.25rem","5xl":"3rem","6xl":"3.75rem","7xl":"4.5rem","8xl":"6rem","9xl":"8rem"}},Zdt={px:"1px",.5:"0.125rem",1:"0.25rem",1.5:"0.375rem",2:"0.5rem",2.5:"0.625rem",3:"0.75rem",3.5:"0.875rem",4:"1rem",5:"1.25rem",6:"1.5rem",7:"1.75rem",8:"2rem",9:"2.25rem",10:"2.5rem",12:"3rem",14:"3.5rem",16:"4rem",20:"5rem",24:"6rem",28:"7rem",32:"8rem",36:"9rem",40:"10rem",44:"11rem",48:"12rem",52:"13rem",56:"14rem",60:"15rem",64:"16rem",72:"18rem",80:"20rem",96:"24rem"},Xdt={...Zdt,max:"max-content",min:"min-content",full:"100%","3xs":"14rem","2xs":"16rem",xs:"20rem",sm:"24rem",md:"28rem",lg:"32rem",xl:"36rem","2xl":"42rem","3xl":"48rem","4xl":"56rem","5xl":"64rem","6xl":"72rem","7xl":"80rem","8xl":"90rem",prose:"60ch",container:{sm:"640px",md:"768px",lg:"1024px",xl:"1280px"}},Ydt={breakpoints:Udt,zIndices:Fdt,radii:Wdt,blur:qdt,colors:Vdt,...Hdt,sizes:Xdt,shadows:Gdt,space:Zdt,borders:Ndt,transition:Bdt},{defineMultiStyleConfig:Kdt,definePartsStyle:$dt}=Sn(["stepper","step","title","description","indicator","separator","icon","number"]),Jdt=Be("stepper-indicator-size"),Qdt=Be("stepper-icon-size"),tft=Be("stepper-title-font-size"),eft=Be("stepper-description-font-size"),nft=Be("stepper-accent-color"),rft=$dt((t=>{let{colorScheme:e}=t;return{stepper:{display:"flex",justifyContent:"space-between",gap:"4","&[data-orientation=vertical]":{flexDirection:"column",alignItems:"flex-start"},"&[data-orientation=horizontal]":{flexDirection:"row",alignItems:"center"},[nft.variable]:"colors.".concat(e,".500"),_dark:{[nft.variable]:"colors.".concat(e,".200")}},title:{fontSize:tft.reference,fontWeight:"medium"},description:{fontSize:eft.reference,color:"chakra-subtle-text"},number:{fontSize:tft.reference},step:{flexShrink:0,position:"relative",display:"flex",gap:"2","&[data-orientation=horizontal]":{alignItems:"center"},flex:"1","&:last-of-type:not([data-stretch])":{flex:"initial"}},icon:{flexShrink:0,width:Qdt.reference,height:Qdt.reference},indicator:{flexShrink:0,borderRadius:"full",width:Jdt.reference,height:Jdt.reference,display:"flex",justifyContent:"center",alignItems:"center","&[data-status=active]":{borderWidth:"2px",borderColor:nft.reference},"&[data-status=complete]":{bg:nft.reference,color:"chakra-inverse-text"},"&[data-status=incomplete]":{borderWidth:"2px"}},separator:{bg:"chakra-border-color",flex:"1","&[data-status=complete]":{bg:nft.reference},"&[data-orientation=horizontal]":{width:"100%",height:"2px",marginStart:"2"},"&[data-orientation=vertical]":{width:"2px",position:"absolute",height:"100%",maxHeight:"calc(100% - ".concat(Jdt.reference," - 8px)"),top:"calc(".concat(Jdt.reference," + 4px)"),insetStart:"calc(".concat(Jdt.reference," / 2 - 1px)")}}}})),ift=Kdt({baseStyle:rft,sizes:{xs:$dt({stepper:{[Jdt.variable]:"sizes.4",[Qdt.variable]:"sizes.3",[tft.variable]:"fontSizes.xs",[eft.variable]:"fontSizes.xs"}}),sm:$dt({stepper:{[Jdt.variable]:"sizes.6",[Qdt.variable]:"sizes.4",[tft.variable]:"fontSizes.sm",[eft.variable]:"fontSizes.xs"}}),md:$dt({stepper:{[Jdt.variable]:"sizes.8",[Qdt.variable]:"sizes.5",[tft.variable]:"fontSizes.md",[eft.variable]:"fontSizes.sm"}}),lg:$dt({stepper:{[Jdt.variable]:"sizes.10",[Qdt.variable]:"sizes.6",[tft.variable]:"fontSizes.lg",[eft.variable]:"fontSizes.md"}})},defaultProps:{size:"md",colorScheme:"blue"}});function oft(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=!1;function r(e){const n=(["container","root"].includes(null!=e?e:"")?[t]:[t,e]).filter(Boolean).join("__"),r="chakra-".concat(n);return{className:r,selector:".".concat(r),toString:()=>e}}return{parts:function(){!function(){if(n)throw new Error("[anatomy] .part(...) should only be called once. Did you mean to use .extend(...) ?");n=!0}();for(var i=arguments.length,o=new Array(i),a=0;a<i;a++)o[a]=arguments[a];for(const t of o)e[t]=r(t);return oft(t,e)},toPart:r,extend:function(){for(var n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];for(const t of i)t in e||(e[t]=r(t));return oft(t,e)},selectors:function(){const t=Object.fromEntries(Object.entries(e).map((t=>{let[e,n]=t;return[e,n.selector]})));return t},classnames:function(){return Object.fromEntries(Object.entries(e).map((t=>{let[e,n]=t;return[e,n.className]})))},get keys(){return Object.keys(e)},__type:{}}}var aft=oft("accordion").parts("root","container","button","panel").extend("icon"),sft=oft("alert").parts("title","description","container").extend("icon","spinner"),lft=oft("avatar").parts("label","badge","container").extend("excessLabel","group"),cft=oft("breadcrumb").parts("link","item","container").extend("separator"),uft=(oft("button").parts(),oft("checkbox").parts("control","icon","container").extend("label")),hft=(oft("progress").parts("track","filledTrack").extend("label"),oft("drawer").parts("overlay","dialogContainer","dialog").extend("header","closeButton","body","footer")),dft=oft("editable").parts("preview","input","textarea"),fft=oft("form").parts("container","requiredIndicator","helperText"),pft=oft("formError").parts("text","icon"),mft=oft("input").parts("addon","field","element","group"),gft=oft("list").parts("container","item","icon"),yft=oft("menu").parts("button","list","item").extend("groupTitle","icon","command","divider"),vft=oft("modal").parts("overlay","dialogContainer","dialog").extend("header","closeButton","body","footer"),_ft=oft("numberinput").parts("root","field","stepperGroup","stepper"),bft=(oft("pininput").parts("field"),oft("popover").parts("content","header","body","footer").extend("popper","arrow","closeButton")),xft=oft("progress").parts("label","filledTrack","track"),wft=oft("radio").parts("container","control","label"),Sft=oft("select").parts("field","icon"),Eft=oft("slider").parts("container","track","thumb","filledTrack","mark"),Tft=oft("stat").parts("container","label","helpText","number","icon"),Mft=oft("switch").parts("container","track","thumb","label"),Aft=oft("table").parts("table","thead","tbody","tr","th","td","tfoot","caption"),Cft=oft("tabs").parts("root","tab","tablist","tabpanel","tabpanels","indicator"),Pft=oft("tag").parts("container","label","closeButton"),kft=oft("card").parts("container","header","body","footer");oft("stepper").parts("stepper","step","title","description","indicator","separator","icon","number");function Ift(t){const e=function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"-";return t.replace(/\s+/g,e)}(t.toString());return e.includes("\\.")?t:function(t){return!Number.isInteger(parseFloat(t.toString()))}(t)?e.replace(".","\\."):t}function Oft(t,e){return"var(".concat(Ift(t)).concat(e?", ".concat(e):"",")")}function Lft(t){return"--".concat(function(t){return[arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",Ift(t)].filter(Boolean).join("-")}(t,arguments.length>1&&void 0!==arguments[1]?arguments[1]:""))}function jft(t,e){const n=Lft(t,null==e?void 0:e.prefix);return{variable:n,reference:Oft(n,zft(null==e?void 0:e.fallback))}}function zft(t){return"string"===typeof t?t:null==t?void 0:t.reference}function Rft(t){return It(t)&&t.reference?t.reference:String(t)}var Dft=function(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];return n.map(Rft).join(" ".concat(t," ")).replace(/calc/g,"")},Bft=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return"calc(".concat(Dft("+",...e),")")},Fft=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return"calc(".concat(Dft("-",...e),")")},Nft=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return"calc(".concat(Dft("*",...e),")")},Uft=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return"calc(".concat(Dft("/",...e),")")},Vft=t=>{const e=Rft(t);return null==e||Number.isNaN(parseFloat(e))?Nft(e,-1):String(e).startsWith("-")?String(e).slice(1):"-".concat(e)},Wft=Object.assign((t=>({add:function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return Wft(Bft(t,...n))},subtract:function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return Wft(Fft(t,...n))},multiply:function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return Wft(Nft(t,...n))},divide:function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return Wft(Uft(t,...n))},negate:()=>Wft(Vft(t)),toString:()=>t.toString()})),{add:Bft,subtract:Fft,multiply:Nft,divide:Uft,negate:Vft}),{defineMultiStyleConfig:Gft,definePartsStyle:qft}=Sn(Mft.keys),Hft=jft("switch-track-width"),Zft=jft("switch-track-height"),Xft=jft("switch-track-diff"),Yft=Wft.subtract(Hft,Zft),Kft=jft("switch-thumb-x"),$ft=jft("switch-bg"),Jft=t=>{const{colorScheme:e}=t;return{borderRadius:"full",p:"0.5",width:[Hft.reference],height:[Zft.reference],transitionProperty:"common",transitionDuration:"fast",[$ft.variable]:"colors.gray.300",_dark:{[$ft.variable]:"colors.whiteAlpha.400"},_focusVisible:{boxShadow:"outline"},_disabled:{opacity:.4,cursor:"not-allowed"},_checked:{[$ft.variable]:"colors.".concat(e,".500"),_dark:{[$ft.variable]:"colors.".concat(e,".200")}},bg:$ft.reference}},Qft={bg:"white",transitionProperty:"transform",transitionDuration:"normal",borderRadius:"inherit",width:[Zft.reference],height:[Zft.reference],_checked:{transform:"translateX(".concat(Kft.reference,")")}},tpt=Gft({baseStyle:qft((t=>({container:{[Xft.variable]:Yft,[Kft.variable]:Xft.reference,_rtl:{[Kft.variable]:Wft(Xft).negate().toString()}},track:Jft(t),thumb:Qft}))),sizes:{sm:qft({container:{[Hft.variable]:"1.375rem",[Zft.variable]:"sizes.3"}}),md:qft({container:{[Hft.variable]:"1.875rem",[Zft.variable]:"sizes.4"}}),lg:qft({container:{[Hft.variable]:"2.875rem",[Zft.variable]:"sizes.6"}})},defaultProps:{size:"md",colorScheme:"blue"}});function ept(t,e){return n=>"dark"===n.colorMode?e:t}function npt(t){const{orientation:e,vertical:n,horizontal:r}=t;return e?"vertical"===e?n:r:{}}var{defineMultiStyleConfig:rpt,definePartsStyle:ipt}=Sn(Aft.keys),opt=ipt({table:{fontVariantNumeric:"lining-nums tabular-nums",borderCollapse:"collapse",width:"full"},th:{fontFamily:"heading",fontWeight:"bold",textTransform:"uppercase",letterSpacing:"wider",textAlign:"start"},td:{textAlign:"start"},caption:{mt:4,fontFamily:"heading",textAlign:"center",fontWeight:"medium"}}),apt={"&[data-is-numeric=true]":{textAlign:"end"}},spt=ipt((t=>{const{colorScheme:e}=t;return{th:{color:ept("gray.600","gray.400")(t),borderBottom:"1px",borderColor:ept("".concat(e,".100"),"".concat(e,".700"))(t),...apt},td:{borderBottom:"1px",borderColor:ept("".concat(e,".100"),"".concat(e,".700"))(t),...apt},caption:{color:ept("gray.600","gray.100")(t)},tfoot:{tr:{"&:last-of-type":{th:{borderBottomWidth:0}}}}}})),lpt=ipt((t=>{const{colorScheme:e}=t;return{th:{color:ept("gray.600","gray.400")(t),borderBottom:"1px",borderColor:ept("".concat(e,".100"),"".concat(e,".700"))(t),...apt},td:{borderBottom:"1px",borderColor:ept("".concat(e,".100"),"".concat(e,".700"))(t),...apt},caption:{color:ept("gray.600","gray.100")(t)},tbody:{tr:{"&:nth-of-type(odd)":{"th, td":{borderBottomWidth:"1px",borderColor:ept("".concat(e,".100"),"".concat(e,".700"))(t)},td:{background:ept("".concat(e,".100"),"".concat(e,".700"))(t)}}}},tfoot:{tr:{"&:last-of-type":{th:{borderBottomWidth:0}}}}}})),cpt=rpt({baseStyle:opt,variants:{simple:spt,striped:lpt,unstyled:{}},sizes:{sm:ipt({th:{px:"4",py:"1",lineHeight:"4",fontSize:"xs"},td:{px:"4",py:"2",fontSize:"sm",lineHeight:"4"},caption:{px:"4",py:"2",fontSize:"xs"}}),md:ipt({th:{px:"6",py:"3",lineHeight:"4",fontSize:"xs"},td:{px:"6",py:"4",lineHeight:"5"},caption:{px:"6",py:"2",fontSize:"sm"}}),lg:ipt({th:{px:"8",py:"4",lineHeight:"5",fontSize:"sm"},td:{px:"8",py:"5",lineHeight:"6"},caption:{px:"6",py:"2",fontSize:"md"}})},defaultProps:{variant:"simple",size:"md",colorScheme:"gray"}});function upt(t,e,n){return Math.min(Math.max(t,n),e)}class hpt extends Error{constructor(t){super('Failed to parse color: "'.concat(t,'"'))}}var dpt=hpt;function fpt(t){if("string"!==typeof t)throw new dpt(t);if("transparent"===t.trim().toLowerCase())return[0,0,0,0];let e=t.trim();e=xpt.test(t)?function(t){const e=t.toLowerCase().trim(),n=mpt[function(t){let e=5381,n=t.length;for(;n;)e=33*e^t.charCodeAt(--n);return(e>>>0)%2341}(e)];if(!n)throw new dpt(t);return"#".concat(n)}(t):t;const n=ypt.exec(e);if(n){const t=Array.from(n).slice(1);return[...t.slice(0,3).map((t=>parseInt(gpt(t,2),16))),parseInt(gpt(t[3]||"f",2),16)/255]}const r=vpt.exec(e);if(r){const t=Array.from(r).slice(1);return[...t.slice(0,3).map((t=>parseInt(t,16))),parseInt(t[3]||"ff",16)/255]}const i=_pt.exec(e);if(i){const t=Array.from(i).slice(1);return[...t.slice(0,3).map((t=>parseInt(t,10))),parseFloat(t[3]||"1")]}const o=bpt.exec(e);if(o){const[e,n,r,i]=Array.from(o).slice(1).map(parseFloat);if(upt(0,100,n)!==n)throw new dpt(t);if(upt(0,100,r)!==r)throw new dpt(t);return[...Spt(e,n,r),Number.isNaN(i)?1:i]}throw new dpt(t)}const ppt=t=>parseInt(t.replace(/_/g,""),36),mpt="1q29ehhb 1n09sgk7 1kl1ekf_ _yl4zsno 16z9eiv3 1p29lhp8 _bd9zg04 17u0____ _iw9zhe5 _to73___ _r45e31e _7l6g016 _jh8ouiv _zn3qba8 1jy4zshs 11u87k0u 1ro9yvyo 1aj3xael 1gz9zjz0 _3w8l4xo 1bf1ekf_ _ke3v___ _4rrkb__ 13j776yz _646mbhl _nrjr4__ _le6mbhl 1n37ehkb _m75f91n _qj3bzfz 1939yygw 11i5z6x8 _1k5f8xs 1509441m 15t5lwgf _ae2th1n _tg1ugcv 1lp1ugcv 16e14up_ _h55rw7n _ny9yavn _7a11xb_ 1ih442g9 _pv442g9 1mv16xof 14e6y7tu 1oo9zkds 17d1cisi _4v9y70f _y98m8kc 1019pq0v 12o9zda8 _348j4f4 1et50i2o _8epa8__ _ts6senj 1o350i2o 1mi9eiuo 1259yrp0 1ln80gnw _632xcoy 1cn9zldc _f29edu4 1n490c8q _9f9ziet 1b94vk74 _m49zkct 1kz6s73a 1eu9dtog _q58s1rz 1dy9sjiq __u89jo3 _aj5nkwg _ld89jo3 13h9z6wx _qa9z2ii _l119xgq _bs5arju 1hj4nwk9 1qt4nwk9 1ge6wau6 14j9zlcw 11p1edc_ _ms1zcxe _439shk6 _jt9y70f _754zsow 1la40eju _oq5p___ _x279qkz 1fa5r3rv _yd2d9ip _424tcku _8y1di2_ _zi2uabw _yy7rn9h 12yz980_ __39ljp6 1b59zg0x _n39zfzp 1fy9zest _b33k___ _hp9wq92 1il50hz4 _io472ub _lj9z3eo 19z9ykg0 _8t8iu3a 12b9bl4a 1ak5yw0o _896v4ku _tb8k8lv _s59zi6t _c09ze0p 1lg80oqn 1id9z8wb _238nba5 1kq6wgdi _154zssg _tn3zk49 _da9y6tc 1sg7cv4f _r12jvtt 1gq5fmkz 1cs9rvci _lp9jn1c _xw1tdnb 13f9zje6 16f6973h _vo7ir40 _bt5arjf _rc45e4t _hr4e100 10v4e100 _hc9zke2 _w91egv_ _sj2r1kk 13c87yx8 _vqpds__ _ni8ggk8 _tj9yqfb 1ia2j4r4 _7x9b10u 1fc9ld4j 1eq9zldr _5j9lhpx _ez9zl6o _md61fzm".split(" ").reduce(((t,e)=>{const n=ppt(e.substring(0,3)),r=ppt(e.substring(3)).toString(16);let i="";for(let o=0;o<6-r.length;o++)i+="0";return t[n]="".concat(i).concat(r),t}),{});const gpt=(t,e)=>Array.from(Array(e)).map((()=>t)).join(""),ypt=new RegExp("^#".concat(gpt("([a-f0-9])",3),"([a-f0-9])?$"),"i"),vpt=new RegExp("^#".concat(gpt("([a-f0-9]{2})",3),"([a-f0-9]{2})?$"),"i"),_pt=new RegExp("^rgba?\\(\\s*(\\d+)\\s*".concat(gpt(",\\s*(\\d+)\\s*",2),"(?:,\\s*([\\d.]+))?\\s*\\)$"),"i"),bpt=/^hsla?\(\s*([\d.]+)\s*,\s*([\d.]+)%\s*,\s*([\d.]+)%(?:\s*,\s*([\d.]+))?\s*\)$/i,xpt=/^[a-z]+$/i,wpt=t=>Math.round(255*t),Spt=(t,e,n)=>{let r=n/100;if(0===e)return[r,r,r].map(wpt);const i=(t%360+360)%360/60,o=(1-Math.abs(2*r-1))*(e/100),a=o*(1-Math.abs(i%2-1));let s=0,l=0,c=0;i>=0&&i<1?(s=o,l=a):i>=1&&i<2?(s=a,l=o):i>=2&&i<3?(l=o,c=a):i>=3&&i<4?(l=a,c=o):i>=4&&i<5?(s=a,c=o):i>=5&&i<6&&(s=o,c=a);const u=r-o/2;return[s+u,l+u,c+u].map(wpt)};function Ept(t,e,n,r){return"rgba(".concat(upt(0,255,t).toFixed(),", ").concat(upt(0,255,e).toFixed(),", ").concat(upt(0,255,n).toFixed(),", ").concat(parseFloat(upt(0,1,r).toFixed(3)),")")}function Tpt(t,e){const[n,r,i,o]=fpt(t);return Ept(n,r,i,o-e)}var Mpt=(t,e,n)=>{const r=function(t,e,n,r,i){for(e=e.split?e.split("."):e,r=0;r<e.length;r++)t=t?t[e[r]]:i;return t===i?n:t}(t,"colors.".concat(e),e);try{return function(t){const[e,n,r,i]=fpt(t);let o=t=>{const e=upt(0,255,t).toString(16);return 1===e.length?"0".concat(e):e};"#".concat(o(e)).concat(o(n)).concat(o(r)).concat(i<1?o(Math.round(255*i)):"")}(r),r}catch{return null!=n?n:"#000000"}},Apt=t=>e=>{const n=(t=>{const[e,n,r]=fpt(t);return(299*e+587*n+114*r)/1e3})(Mpt(e,t));return n<128?"dark":"light"},Cpt=(t,e)=>n=>Tpt(Mpt(n,t),1-e);function Ppt(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"1rem",e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"rgba(255, 255, 255, 0.15)";return{backgroundImage:"linear-gradient(\n    45deg,\n    ".concat(e," 25%,\n    transparent 25%,\n    transparent 50%,\n    ").concat(e," 50%,\n    ").concat(e," 75%,\n    transparent 75%,\n    transparent\n  )"),backgroundSize:"".concat(t," ").concat(t)}}function kpt(t){const e="#".concat(Math.floor(16777215*Math.random()).toString(16).padEnd(6,"0"));return t&&(n=t,0!==Object.keys(n).length)?t.string&&t.colors?function(t,e){let n=0;if(0===t.length)return e[0];for(let r=0;r<t.length;r+=1)n=t.charCodeAt(r)+((n<<5)-n),n|=0;return n=(n%e.length+e.length)%e.length,e[n]}(t.string,t.colors):t.string&&!t.colors?function(t){let e=0;if(0===t.length)return e.toString();for(let r=0;r<t.length;r+=1)e=t.charCodeAt(r)+((e<<5)-e),e|=0;let n="#";for(let r=0;r<3;r+=1){n+="00".concat((e>>8*r&255).toString(16)).substr(-2)}return n}(t.string):t.colors&&!t.string?function(t){return t[Math.floor(Math.random()*t.length)]}(t.colors):e:e;var n}var Ipt=Be("tabs-color"),Opt=Be("tabs-bg"),Lpt=Be("tabs-border-color"),{defineMultiStyleConfig:jpt,definePartsStyle:zpt}=Sn(Cft.keys),Rpt=t=>{const{orientation:e}=t;return{display:"vertical"===e?"flex":"block"}},Dpt=t=>{const{isFitted:e}=t;return{flex:e?1:void 0,transitionProperty:"common",transitionDuration:"normal",_focusVisible:{zIndex:1,boxShadow:"outline"},_disabled:{cursor:"not-allowed",opacity:.4}}},Bpt=t=>{const{align:e="start",orientation:n}=t;return{justifyContent:{end:"flex-end",center:"center",start:"flex-start"}[e],flexDirection:"vertical"===n?"column":"row"}},Fpt={p:4},Npt=zpt((t=>({root:Rpt(t),tab:Dpt(t),tablist:Bpt(t),tabpanel:Fpt}))),Upt={sm:zpt({tab:{py:1,px:4,fontSize:"sm"}}),md:zpt({tab:{fontSize:"md",py:2,px:4}}),lg:zpt({tab:{fontSize:"lg",py:3,px:4}})},Vpt=zpt((t=>{const{colorScheme:e,orientation:n}=t,r="vertical"===n,i=r?"borderStart":"borderBottom",o=r?"marginStart":"marginBottom";return{tablist:{[i]:"2px solid",borderColor:"inherit"},tab:{[i]:"2px solid",borderColor:"transparent",[o]:"-2px",_selected:{[Ipt.variable]:"colors.".concat(e,".600"),_dark:{[Ipt.variable]:"colors.".concat(e,".300")},borderColor:"currentColor"},_active:{[Opt.variable]:"colors.gray.200",_dark:{[Opt.variable]:"colors.whiteAlpha.300"}},_disabled:{_active:{bg:"none"}},color:Ipt.reference,bg:Opt.reference}}})),Wpt=zpt((t=>{const{colorScheme:e}=t;return{tab:{borderTopRadius:"md",border:"1px solid",borderColor:"transparent",mb:"-1px",[Lpt.variable]:"transparent",_selected:{[Ipt.variable]:"colors.".concat(e,".600"),[Lpt.variable]:"colors.white",_dark:{[Ipt.variable]:"colors.".concat(e,".300"),[Lpt.variable]:"colors.gray.800"},borderColor:"inherit",borderBottomColor:Lpt.reference},color:Ipt.reference},tablist:{mb:"-1px",borderBottom:"1px solid",borderColor:"inherit"}}})),Gpt=zpt((t=>{const{colorScheme:e}=t;return{tab:{border:"1px solid",borderColor:"inherit",[Opt.variable]:"colors.gray.50",_dark:{[Opt.variable]:"colors.whiteAlpha.50"},mb:"-1px",_notLast:{marginEnd:"-1px"},_selected:{[Opt.variable]:"colors.white",[Ipt.variable]:"colors.".concat(e,".600"),_dark:{[Opt.variable]:"colors.gray.800",[Ipt.variable]:"colors.".concat(e,".300")},borderColor:"inherit",borderTopColor:"currentColor",borderBottomColor:"transparent"},color:Ipt.reference,bg:Opt.reference},tablist:{mb:"-1px",borderBottom:"1px solid",borderColor:"inherit"}}})),qpt=zpt((t=>{const{colorScheme:e,theme:n}=t;return{tab:{borderRadius:"full",fontWeight:"semibold",color:"gray.600",_selected:{color:Mpt(n,"".concat(e,".700")),bg:Mpt(n,"".concat(e,".100"))}}}})),Hpt=zpt((t=>{const{colorScheme:e}=t;return{tab:{borderRadius:"full",fontWeight:"semibold",[Ipt.variable]:"colors.gray.600",_dark:{[Ipt.variable]:"inherit"},_selected:{[Ipt.variable]:"colors.white",[Opt.variable]:"colors.".concat(e,".600"),_dark:{[Ipt.variable]:"colors.gray.800",[Opt.variable]:"colors.".concat(e,".300")}},color:Ipt.reference,bg:Opt.reference}}})),Zpt=jpt({baseStyle:Npt,sizes:Upt,variants:{line:Vpt,enclosed:Wpt,"enclosed-colored":Gpt,"soft-rounded":qpt,"solid-rounded":Hpt,unstyled:zpt({})},defaultProps:{size:"md",variant:"line",colorScheme:"blue"}}),Xpt=function(t,e){const n={};for(const r of e)if(Array.isArray(r)){const[e,i]=r;n[e]=Be("".concat(t,"-").concat(e),i)}else n[r]=Be("".concat(t,"-").concat(r));return n}("badge",["bg","color","shadow"]),Ypt=t=>{const{colorScheme:e,theme:n}=t,r=Cpt("".concat(e,".500"),.6)(n);return{[Xpt.bg.variable]:"colors.".concat(e,".500"),[Xpt.color.variable]:"colors.white",_dark:{[Xpt.bg.variable]:r,[Xpt.color.variable]:"colors.whiteAlpha.800"}}},Kpt=t=>{const{colorScheme:e,theme:n}=t,r=Cpt("".concat(e,".200"),.16)(n);return{[Xpt.bg.variable]:"colors.".concat(e,".100"),[Xpt.color.variable]:"colors.".concat(e,".800"),_dark:{[Xpt.bg.variable]:r,[Xpt.color.variable]:"colors.".concat(e,".200")}}},$pt=t=>{const{colorScheme:e,theme:n}=t,r=Cpt("".concat(e,".200"),.8)(n);return{[Xpt.color.variable]:"colors.".concat(e,".500"),_dark:{[Xpt.color.variable]:r},[Xpt.shadow.variable]:"inset 0 0 0px 1px ".concat(Xpt.color.reference)}},Jpt={baseStyle:{px:1,textTransform:"uppercase",fontSize:"xs",borderRadius:"sm",fontWeight:"bold",bg:Xpt.bg.reference,color:Xpt.color.reference,boxShadow:Xpt.shadow.reference},variants:{solid:Ypt,subtle:Kpt,outline:$pt},defaultProps:{variant:"subtle",colorScheme:"gray"}},{defineMultiStyleConfig:Qpt,definePartsStyle:tmt}=Sn(Pft.keys),emt=Be("tag-bg"),nmt=Be("tag-color"),rmt=Be("tag-shadow"),imt=Be("tag-min-height"),omt=Be("tag-min-width"),amt=Be("tag-font-size"),smt=Be("tag-padding-inline"),lmt=tmt({container:{fontWeight:"medium",lineHeight:1.2,outline:0,[nmt.variable]:Xpt.color.reference,[emt.variable]:Xpt.bg.reference,[rmt.variable]:Xpt.shadow.reference,color:nmt.reference,bg:emt.reference,boxShadow:rmt.reference,borderRadius:"md",minH:imt.reference,minW:omt.reference,fontSize:amt.reference,px:smt.reference,_focusVisible:{[rmt.variable]:"shadows.outline"}},label:{lineHeight:1.2,overflow:"visible"},closeButton:{fontSize:"lg",w:"5",h:"5",transitionProperty:"common",transitionDuration:"normal",borderRadius:"full",marginStart:"1.5",marginEnd:"-1",opacity:.5,_disabled:{opacity:.4},_focusVisible:{boxShadow:"outline",bg:"rgba(0, 0, 0, 0.14)"},_hover:{opacity:.8},_active:{opacity:1}}}),cmt={sm:tmt({container:{[imt.variable]:"sizes.5",[omt.variable]:"sizes.5",[amt.variable]:"fontSizes.xs",[smt.variable]:"space.2"},closeButton:{marginEnd:"-2px",marginStart:"0.35rem"}}),md:tmt({container:{[imt.variable]:"sizes.6",[omt.variable]:"sizes.6",[amt.variable]:"fontSizes.sm",[smt.variable]:"space.2"}}),lg:tmt({container:{[imt.variable]:"sizes.8",[omt.variable]:"sizes.8",[amt.variable]:"fontSizes.md",[smt.variable]:"space.3"}})},umt={subtle:tmt((t=>{var e;return{container:null==(e=Jpt.variants)?void 0:e.subtle(t)}})),solid:tmt((t=>{var e;return{container:null==(e=Jpt.variants)?void 0:e.solid(t)}})),outline:tmt((t=>{var e;return{container:null==(e=Jpt.variants)?void 0:e.outline(t)}}))},hmt=Qpt({variants:umt,baseStyle:lmt,sizes:cmt,defaultProps:{size:"md",variant:"subtle",colorScheme:"gray"}}),{definePartsStyle:dmt,defineMultiStyleConfig:fmt}=Sn(mft.keys),pmt=Be("input-height"),mmt=Be("input-font-size"),gmt=Be("input-padding"),ymt=Be("input-border-radius"),vmt=dmt({addon:{height:pmt.reference,fontSize:mmt.reference,px:gmt.reference,borderRadius:ymt.reference},field:{width:"100%",height:pmt.reference,fontSize:mmt.reference,px:gmt.reference,borderRadius:ymt.reference,minWidth:0,outline:0,position:"relative",appearance:"none",transitionProperty:"common",transitionDuration:"normal",_disabled:{opacity:.4,cursor:"not-allowed"}}}),_mt={lg:{[mmt.variable]:"fontSizes.lg",[gmt.variable]:"space.4",[ymt.variable]:"radii.md",[pmt.variable]:"sizes.12"},md:{[mmt.variable]:"fontSizes.md",[gmt.variable]:"space.4",[ymt.variable]:"radii.md",[pmt.variable]:"sizes.10"},sm:{[mmt.variable]:"fontSizes.sm",[gmt.variable]:"space.3",[ymt.variable]:"radii.sm",[pmt.variable]:"sizes.8"},xs:{[mmt.variable]:"fontSizes.xs",[gmt.variable]:"space.2",[ymt.variable]:"radii.sm",[pmt.variable]:"sizes.6"}},bmt={lg:dmt({field:_mt.lg,group:_mt.lg}),md:dmt({field:_mt.md,group:_mt.md}),sm:dmt({field:_mt.sm,group:_mt.sm}),xs:dmt({field:_mt.xs,group:_mt.xs})};function xmt(t){const{focusBorderColor:e,errorBorderColor:n}=t;return{focusBorderColor:e||ept("blue.500","blue.300")(t),errorBorderColor:n||ept("red.500","red.300")(t)}}var wmt,Smt,Emt,Tmt,Mmt,Amt,Cmt,Pmt,kmt,Imt,Omt,Lmt=dmt((t=>{const{theme:e}=t,{focusBorderColor:n,errorBorderColor:r}=xmt(t);return{field:{border:"1px solid",borderColor:"inherit",bg:"inherit",_hover:{borderColor:ept("gray.300","whiteAlpha.400")(t)},_readOnly:{boxShadow:"none !important",userSelect:"all"},_invalid:{borderColor:Mpt(e,r),boxShadow:"0 0 0 1px ".concat(Mpt(e,r))},_focusVisible:{zIndex:1,borderColor:Mpt(e,n),boxShadow:"0 0 0 1px ".concat(Mpt(e,n))}},addon:{border:"1px solid",borderColor:ept("inherit","whiteAlpha.50")(t),bg:ept("gray.100","whiteAlpha.300")(t)}}})),jmt=dmt((t=>{const{theme:e}=t,{focusBorderColor:n,errorBorderColor:r}=xmt(t);return{field:{border:"2px solid",borderColor:"transparent",bg:ept("gray.100","whiteAlpha.50")(t),_hover:{bg:ept("gray.200","whiteAlpha.100")(t)},_readOnly:{boxShadow:"none !important",userSelect:"all"},_invalid:{borderColor:Mpt(e,r)},_focusVisible:{bg:"transparent",borderColor:Mpt(e,n)}},addon:{border:"2px solid",borderColor:"transparent",bg:ept("gray.100","whiteAlpha.50")(t)}}})),zmt=dmt((t=>{const{theme:e}=t,{focusBorderColor:n,errorBorderColor:r}=xmt(t);return{field:{borderBottom:"1px solid",borderColor:"inherit",borderRadius:"0",px:"0",bg:"transparent",_readOnly:{boxShadow:"none !important",userSelect:"all"},_invalid:{borderColor:Mpt(e,r),boxShadow:"0px 1px 0px 0px ".concat(Mpt(e,r))},_focusVisible:{borderColor:Mpt(e,n),boxShadow:"0px 1px 0px 0px ".concat(Mpt(e,n))}},addon:{borderBottom:"2px solid",borderColor:"inherit",borderRadius:"0",px:"0",bg:"transparent"}}})),Rmt=fmt({baseStyle:vmt,sizes:bmt,variants:{outline:Lmt,filled:jmt,flushed:zmt,unstyled:dmt({field:{bg:"transparent",px:"0",height:"auto"},addon:{bg:"transparent",px:"0",height:"auto"}})},defaultProps:{size:"md",variant:"outline"}}),Dmt={...null==(wmt=Rmt.baseStyle)?void 0:wmt.field,paddingY:"2",minHeight:"20",lineHeight:"short",verticalAlign:"top"},Bmt={outline:t=>{var e,n;return null!=(n=null==(e=Rmt.variants)?void 0:e.outline(t).field)?n:{}},flushed:t=>{var e,n;return null!=(n=null==(e=Rmt.variants)?void 0:e.flushed(t).field)?n:{}},filled:t=>{var e,n;return null!=(n=null==(e=Rmt.variants)?void 0:e.filled(t).field)?n:{}},unstyled:null!=(Emt=null==(Smt=Rmt.variants)?void 0:Smt.unstyled.field)?Emt:{}},Fmt={baseStyle:Dmt,sizes:{xs:null!=(Mmt=null==(Tmt=Rmt.sizes)?void 0:Tmt.xs.field)?Mmt:{},sm:null!=(Cmt=null==(Amt=Rmt.sizes)?void 0:Amt.sm.field)?Cmt:{},md:null!=(kmt=null==(Pmt=Rmt.sizes)?void 0:Pmt.md.field)?kmt:{},lg:null!=(Omt=null==(Imt=Rmt.sizes)?void 0:Imt.lg.field)?Omt:{}},variants:Bmt,defaultProps:{size:"md",variant:"outline"}},Nmt=jft("tooltip-bg"),Umt=jft("tooltip-fg"),Vmt=jft("popper-arrow-bg"),Wmt={baseStyle:{bg:Nmt.reference,color:Umt.reference,[Nmt.variable]:"colors.gray.700",[Umt.variable]:"colors.whiteAlpha.900",_dark:{[Nmt.variable]:"colors.gray.300",[Umt.variable]:"colors.gray.900"},[Vmt.variable]:Nmt.reference,px:"2",py:"0.5",borderRadius:"sm",fontWeight:"medium",fontSize:"sm",boxShadow:"md",maxW:"xs",zIndex:"tooltip"}},{defineMultiStyleConfig:Gmt,definePartsStyle:qmt}=Sn(xft.keys),Hmt=t=>{const{colorScheme:e,theme:n,isIndeterminate:r,hasStripe:i}=t,o=ept(Ppt(),Ppt("1rem","rgba(0,0,0,0.1)"))(t),a=ept("".concat(e,".500"),"".concat(e,".200"))(t),s="linear-gradient(\n    to right,\n    transparent 0%,\n    ".concat(Mpt(n,a)," 50%,\n    transparent 100%\n  )");return{...!r&&i&&o,...r?{bgImage:s}:{bgColor:a}}},Zmt={lineHeight:"1",fontSize:"0.25em",fontWeight:"bold",color:"white"},Xmt=t=>({bg:ept("gray.100","whiteAlpha.300")(t)}),Ymt=t=>({transitionProperty:"common",transitionDuration:"slow",...Hmt(t)}),Kmt=qmt((t=>({label:Zmt,filledTrack:Ymt(t),track:Xmt(t)}))),$mt=Gmt({sizes:{xs:qmt({track:{h:"1"}}),sm:qmt({track:{h:"2"}}),md:qmt({track:{h:"3"}}),lg:qmt({track:{h:"4"}})},baseStyle:Kmt,defaultProps:{size:"md",colorScheme:"blue"}});function Jmt(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];return(t=>"function"===typeof t)(t)?t(...n):t}var Qmt,tgt,egt,ngt,rgt,igt,ogt,agt,sgt,{definePartsStyle:lgt,defineMultiStyleConfig:cgt}=Sn(uft.keys),ugt=Be("checkbox-size"),hgt=t=>{const{colorScheme:e}=t;return{w:ugt.reference,h:ugt.reference,transitionProperty:"box-shadow",transitionDuration:"normal",border:"2px solid",borderRadius:"sm",borderColor:"inherit",color:"white",_checked:{bg:ept("".concat(e,".500"),"".concat(e,".200"))(t),borderColor:ept("".concat(e,".500"),"".concat(e,".200"))(t),color:ept("white","gray.900")(t),_hover:{bg:ept("".concat(e,".600"),"".concat(e,".300"))(t),borderColor:ept("".concat(e,".600"),"".concat(e,".300"))(t)},_disabled:{borderColor:ept("gray.200","transparent")(t),bg:ept("gray.200","whiteAlpha.300")(t),color:ept("gray.500","whiteAlpha.500")(t)}},_indeterminate:{bg:ept("".concat(e,".500"),"".concat(e,".200"))(t),borderColor:ept("".concat(e,".500"),"".concat(e,".200"))(t),color:ept("white","gray.900")(t)},_disabled:{bg:ept("gray.100","whiteAlpha.100")(t),borderColor:ept("gray.100","transparent")(t)},_focusVisible:{boxShadow:"outline"},_invalid:{borderColor:ept("red.500","red.300")(t)}}},dgt={_disabled:{cursor:"not-allowed"}},fgt={userSelect:"none",_disabled:{opacity:.4}},pgt={transitionProperty:"transform",transitionDuration:"normal"},mgt=cgt({baseStyle:lgt((t=>({icon:pgt,container:dgt,control:Jmt(hgt,t),label:fgt}))),sizes:{sm:lgt({control:{[ugt.variable]:"sizes.3"},label:{fontSize:"sm"},icon:{fontSize:"3xs"}}),md:lgt({control:{[ugt.variable]:"sizes.4"},label:{fontSize:"md"},icon:{fontSize:"2xs"}}),lg:lgt({control:{[ugt.variable]:"sizes.5"},label:{fontSize:"lg"},icon:{fontSize:"2xs"}})},defaultProps:{size:"md",colorScheme:"blue"}}),{defineMultiStyleConfig:ggt,definePartsStyle:ygt}=Sn(wft.keys),vgt=t=>{var e;const n=null==(e=Jmt(mgt.baseStyle,t))?void 0:e.control;return{...n,borderRadius:"full",_checked:{...null==n?void 0:n._checked,_before:{content:'""',display:"inline-block",pos:"relative",w:"50%",h:"50%",borderRadius:"50%",bg:"currentColor"}}}},_gt=ygt((t=>{var e,n,r,i;return{label:null==(n=(e=mgt).baseStyle)?void 0:n.call(e,t).label,container:null==(i=(r=mgt).baseStyle)?void 0:i.call(r,t).container,control:vgt(t)}})),bgt=ggt({baseStyle:_gt,sizes:{md:ygt({control:{w:"4",h:"4"},label:{fontSize:"md"}}),lg:ygt({control:{w:"5",h:"5"},label:{fontSize:"lg"}}),sm:ygt({control:{width:"3",height:"3"},label:{fontSize:"sm"}})},defaultProps:{size:"md",colorScheme:"blue"}}),{defineMultiStyleConfig:xgt,definePartsStyle:wgt}=Sn(Sft.keys),Sgt=Be("select-bg"),Egt={paddingInlineEnd:"8"},Tgt=xgt({baseStyle:wgt({field:{...null==(Qmt=Rmt.baseStyle)?void 0:Qmt.field,appearance:"none",paddingBottom:"1px",lineHeight:"normal",bg:Sgt.reference,[Sgt.variable]:"colors.white",_dark:{[Sgt.variable]:"colors.gray.700"},"> option, > optgroup":{bg:Sgt.reference}},icon:{width:"6",height:"100%",insetEnd:"2",position:"relative",color:"currentColor",fontSize:"xl",_disabled:{opacity:.5}}}),sizes:{lg:{...null==(tgt=Rmt.sizes)?void 0:tgt.lg,field:{...null==(egt=Rmt.sizes)?void 0:egt.lg.field,...Egt}},md:{...null==(ngt=Rmt.sizes)?void 0:ngt.md,field:{...null==(rgt=Rmt.sizes)?void 0:rgt.md.field,...Egt}},sm:{...null==(igt=Rmt.sizes)?void 0:igt.sm,field:{...null==(ogt=Rmt.sizes)?void 0:ogt.sm.field,...Egt}},xs:{...null==(agt=Rmt.sizes)?void 0:agt.xs,field:{...null==(sgt=Rmt.sizes)?void 0:sgt.xs.field,...Egt},icon:{insetEnd:"1"}}},variants:Rmt.variants,defaultProps:Rmt.defaultProps}),Mgt=Be("skeleton-start-color"),Agt=Be("skeleton-end-color"),Cgt={baseStyle:{[Mgt.variable]:"colors.gray.100",[Agt.variable]:"colors.gray.400",_dark:{[Mgt.variable]:"colors.gray.800",[Agt.variable]:"colors.gray.600"},background:Mgt.reference,borderColor:Agt.reference,opacity:.7,borderRadius:"sm"}},Pgt=Be("skip-link-bg"),kgt={baseStyle:{borderRadius:"md",fontWeight:"semibold",_focusVisible:{boxShadow:"outline",padding:"4",position:"fixed",top:"6",insetStart:"6",[Pgt.variable]:"colors.white",_dark:{[Pgt.variable]:"colors.gray.700"},bg:Pgt.reference}}},{defineMultiStyleConfig:Igt,definePartsStyle:Ogt}=Sn(Eft.keys),Lgt=Be("slider-thumb-size"),jgt=Be("slider-track-size"),zgt=Be("slider-bg"),Rgt=t=>{const{orientation:e}=t;return{display:"inline-block",position:"relative",cursor:"pointer",_disabled:{opacity:.6,cursor:"default",pointerEvents:"none"},...npt({orientation:e,vertical:{h:"100%"},horizontal:{w:"100%"}})}},Dgt=t=>({...npt({orientation:t.orientation,horizontal:{h:jgt.reference},vertical:{w:jgt.reference}}),overflow:"hidden",borderRadius:"sm",[zgt.variable]:"colors.gray.200",_dark:{[zgt.variable]:"colors.whiteAlpha.200"},_disabled:{[zgt.variable]:"colors.gray.300",_dark:{[zgt.variable]:"colors.whiteAlpha.300"}},bg:zgt.reference}),Bgt=t=>{const{orientation:e}=t;return{...npt({orientation:e,vertical:{left:"50%",transform:"translateX(-50%)",_active:{transform:"translateX(-50%) scale(1.15)"}},horizontal:{top:"50%",transform:"translateY(-50%)",_active:{transform:"translateY(-50%) scale(1.15)"}}}),w:Lgt.reference,h:Lgt.reference,display:"flex",alignItems:"center",justifyContent:"center",position:"absolute",outline:0,zIndex:1,borderRadius:"full",bg:"white",boxShadow:"base",border:"1px solid",borderColor:"transparent",transitionProperty:"transform",transitionDuration:"normal",_focusVisible:{boxShadow:"outline"},_disabled:{bg:"gray.300"}}},Fgt=t=>{const{colorScheme:e}=t;return{width:"inherit",height:"inherit",[zgt.variable]:"colors.".concat(e,".500"),_dark:{[zgt.variable]:"colors.".concat(e,".200")},bg:zgt.reference}},Ngt=Igt({baseStyle:Ogt((t=>({container:Rgt(t),track:Dgt(t),thumb:Bgt(t),filledTrack:Fgt(t)}))),sizes:{lg:Ogt({container:{[Lgt.variable]:"sizes.4",[jgt.variable]:"sizes.1"}}),md:Ogt({container:{[Lgt.variable]:"sizes.3.5",[jgt.variable]:"sizes.1"}}),sm:Ogt({container:{[Lgt.variable]:"sizes.2.5",[jgt.variable]:"sizes.0.5"}})},defaultProps:{size:"md",colorScheme:"blue"}}),Ugt=jft("spinner-size"),Vgt={baseStyle:{width:[Ugt.reference],height:[Ugt.reference]},sizes:{xs:{[Ugt.variable]:"sizes.3"},sm:{[Ugt.variable]:"sizes.4"},md:{[Ugt.variable]:"sizes.6"},lg:{[Ugt.variable]:"sizes.8"},xl:{[Ugt.variable]:"sizes.12"}},defaultProps:{size:"md"}},{defineMultiStyleConfig:Wgt,definePartsStyle:Ggt}=Sn(Tft.keys),qgt=Wgt({baseStyle:Ggt({container:{},label:{fontWeight:"medium"},helpText:{opacity:.8,marginBottom:"2"},number:{verticalAlign:"baseline",fontWeight:"semibold"},icon:{marginEnd:1,w:"3.5",h:"3.5",verticalAlign:"middle"}}),sizes:{md:Ggt({label:{fontSize:"sm"},helpText:{fontSize:"sm"},number:{fontSize:"2xl"}})},defaultProps:{size:"md"}}),Hgt=Be("kbd-bg"),Zgt={baseStyle:{[Hgt.variable]:"colors.gray.100",_dark:{[Hgt.variable]:"colors.whiteAlpha.100"},bg:Hgt.reference,borderRadius:"md",borderWidth:"1px",borderBottomWidth:"3px",fontSize:"0.8em",fontWeight:"bold",lineHeight:"normal",px:"0.4em",whiteSpace:"nowrap"}},Xgt={baseStyle:{transitionProperty:"common",transitionDuration:"fast",transitionTimingFunction:"ease-out",cursor:"pointer",textDecoration:"none",outline:"none",color:"inherit",_hover:{textDecoration:"underline"},_focusVisible:{boxShadow:"outline"}}},{defineMultiStyleConfig:Ygt,definePartsStyle:Kgt}=Sn(gft.keys),$gt=Ygt({baseStyle:Kgt({icon:{marginEnd:"2",display:"inline",verticalAlign:"text-bottom"}})}),{defineMultiStyleConfig:Jgt,definePartsStyle:Qgt}=Sn(yft.keys),tyt=Be("menu-bg"),eyt=Be("menu-shadow"),nyt=Jgt({baseStyle:Qgt({button:{transitionProperty:"common",transitionDuration:"normal"},list:{[tyt.variable]:"#fff",[eyt.variable]:"shadows.sm",_dark:{[tyt.variable]:"colors.gray.700",[eyt.variable]:"shadows.dark-lg"},color:"inherit",minW:"3xs",py:"2",zIndex:1,borderRadius:"md",borderWidth:"1px",bg:tyt.reference,boxShadow:eyt.reference},item:{py:"1.5",px:"3",transitionProperty:"background",transitionDuration:"ultra-fast",transitionTimingFunction:"ease-in",_focus:{[tyt.variable]:"colors.gray.100",_dark:{[tyt.variable]:"colors.whiteAlpha.100"}},_active:{[tyt.variable]:"colors.gray.200",_dark:{[tyt.variable]:"colors.whiteAlpha.200"}},_expanded:{[tyt.variable]:"colors.gray.100",_dark:{[tyt.variable]:"colors.whiteAlpha.100"}},_disabled:{opacity:.4,cursor:"not-allowed"},bg:tyt.reference},groupTitle:{mx:4,my:2,fontWeight:"semibold",fontSize:"sm"},icon:{display:"inline-flex",alignItems:"center",justifyContent:"center",flexShrink:0},command:{opacity:.6},divider:{border:0,borderBottom:"1px solid",borderColor:"inherit",my:"2",opacity:.6}})}),{defineMultiStyleConfig:ryt,definePartsStyle:iyt}=Sn(vft.keys),oyt=Be("modal-bg"),ayt=Be("modal-shadow"),syt={bg:"blackAlpha.600",zIndex:"modal"},lyt=t=>{const{isCentered:e,scrollBehavior:n}=t;return{display:"flex",zIndex:"modal",justifyContent:"center",alignItems:e?"center":"flex-start",overflow:"inside"===n?"hidden":"auto",overscrollBehaviorY:"none"}},cyt=t=>{const{isCentered:e,scrollBehavior:n}=t;return{borderRadius:"md",color:"inherit",my:e?"auto":"16",mx:e?"auto":void 0,zIndex:"modal",maxH:"inside"===n?"calc(100% - 7.5rem)":void 0,[oyt.variable]:"colors.white",[ayt.variable]:"shadows.lg",_dark:{[oyt.variable]:"colors.gray.700",[ayt.variable]:"shadows.dark-lg"},bg:oyt.reference,boxShadow:ayt.reference}},uyt={px:"6",py:"4",fontSize:"xl",fontWeight:"semibold"},hyt={position:"absolute",top:"2",insetEnd:"3"},dyt=t=>{const{scrollBehavior:e}=t;return{px:"6",py:"2",flex:"1",overflow:"inside"===e?"auto":void 0}},fyt={px:"6",py:"4"};function pyt(t){return iyt("full"===t?{dialog:{maxW:"100vw",minH:"$100vh",my:"0",borderRadius:"0"}}:{dialog:{maxW:t}})}var myt=ryt({baseStyle:iyt((t=>({overlay:syt,dialogContainer:Jmt(lyt,t),dialog:Jmt(cyt,t),header:uyt,closeButton:hyt,body:Jmt(dyt,t),footer:fyt}))),sizes:{xs:pyt("xs"),sm:pyt("sm"),md:pyt("md"),lg:pyt("lg"),xl:pyt("xl"),"2xl":pyt("2xl"),"3xl":pyt("3xl"),"4xl":pyt("4xl"),"5xl":pyt("5xl"),"6xl":pyt("6xl"),full:pyt("full")},defaultProps:{size:"md"}}),{defineMultiStyleConfig:gyt,definePartsStyle:yyt}=Sn(_ft.keys),vyt=jft("number-input-stepper-width"),_yt=jft("number-input-input-padding"),byt=Wft(vyt).add("0.5rem").toString(),xyt=jft("number-input-bg"),wyt=jft("number-input-color"),Syt=jft("number-input-border-color"),Eyt={[vyt.variable]:"sizes.6",[_yt.variable]:byt},Tyt=t=>{var e,n;return null!=(n=null==(e=Jmt(Rmt.baseStyle,t))?void 0:e.field)?n:{}},Myt={width:vyt.reference},Ayt={borderStart:"1px solid",borderStartColor:Syt.reference,color:wyt.reference,bg:xyt.reference,[wyt.variable]:"colors.chakra-body-text",[Syt.variable]:"colors.chakra-border-color",_dark:{[wyt.variable]:"colors.whiteAlpha.800",[Syt.variable]:"colors.whiteAlpha.300"},_active:{[xyt.variable]:"colors.gray.200",_dark:{[xyt.variable]:"colors.whiteAlpha.300"}},_disabled:{opacity:.4,cursor:"not-allowed"}},Cyt=yyt((t=>{var e;return{root:Eyt,field:null!=(e=Jmt(Tyt,t))?e:{},stepperGroup:Myt,stepper:Ayt}}));function Pyt(t){var e,n,r;const i=null==(e=Rmt.sizes)?void 0:e[t],o={lg:"md",md:"md",sm:"sm",xs:"sm"},a=null!=(r=null==(n=i.field)?void 0:n.fontSize)?r:"md",s=Hdt.fontSizes[a];return yyt({field:{...i.field,paddingInlineEnd:_yt.reference,verticalAlign:"top"},stepper:{fontSize:Wft(s).multiply(.75).toString(),_first:{borderTopEndRadius:o[t]},_last:{borderBottomEndRadius:o[t],mt:"-1px",borderTopWidth:1}}})}var kyt,Iyt,Oyt,Lyt=gyt({baseStyle:Cyt,sizes:{xs:Pyt("xs"),sm:Pyt("sm"),md:Pyt("md"),lg:Pyt("lg")},variants:Rmt.variants,defaultProps:Rmt.defaultProps}),jyt={...null==(kyt=Rmt.baseStyle)?void 0:kyt.field,textAlign:"center"},zyt={lg:{fontSize:"lg",w:12,h:12,borderRadius:"md"},md:{fontSize:"md",w:10,h:10,borderRadius:"md"},sm:{fontSize:"sm",w:8,h:8,borderRadius:"sm"},xs:{fontSize:"xs",w:6,h:6,borderRadius:"sm"}},Ryt={outline:t=>{var e,n,r;return null!=(r=null==(n=Jmt(null==(e=Rmt.variants)?void 0:e.outline,t))?void 0:n.field)?r:{}},flushed:t=>{var e,n,r;return null!=(r=null==(n=Jmt(null==(e=Rmt.variants)?void 0:e.flushed,t))?void 0:n.field)?r:{}},filled:t=>{var e,n,r;return null!=(r=null==(n=Jmt(null==(e=Rmt.variants)?void 0:e.filled,t))?void 0:n.field)?r:{}},unstyled:null!=(Oyt=null==(Iyt=Rmt.variants)?void 0:Iyt.unstyled.field)?Oyt:{}},Dyt={baseStyle:jyt,sizes:zyt,variants:Ryt,defaultProps:Rmt.defaultProps},{defineMultiStyleConfig:Byt,definePartsStyle:Fyt}=Sn(bft.keys),Nyt=jft("popper-bg"),Uyt=jft("popper-arrow-bg"),Vyt=jft("popper-arrow-shadow-color"),Wyt=Byt({baseStyle:Fyt({popper:{zIndex:10},content:{[Nyt.variable]:"colors.white",bg:Nyt.reference,[Uyt.variable]:Nyt.reference,[Vyt.variable]:"colors.gray.200",_dark:{[Nyt.variable]:"colors.gray.700",[Vyt.variable]:"colors.whiteAlpha.300"},width:"xs",border:"1px solid",borderColor:"inherit",borderRadius:"md",boxShadow:"sm",zIndex:"inherit",_focusVisible:{outline:0,boxShadow:"outline"}},header:{px:3,py:2,borderBottomWidth:"1px"},body:{px:3,py:2},footer:{px:3,py:2,borderTopWidth:"1px"},closeButton:{position:"absolute",borderRadius:"md",top:1,insetEnd:2,padding:2}})}),{definePartsStyle:Gyt,defineMultiStyleConfig:qyt}=Sn(hft.keys),Hyt=Be("drawer-bg"),Zyt=Be("drawer-box-shadow");function Xyt(t){return Gyt("full"===t?{dialog:{maxW:"100vw",h:"100vh"}}:{dialog:{maxW:t}})}var Yyt={bg:"blackAlpha.600",zIndex:"modal"},Kyt={display:"flex",zIndex:"modal",justifyContent:"center"},$yt=t=>{const{isFullHeight:e}=t;return{...e&&{height:"100vh"},zIndex:"modal",maxH:"100vh",color:"inherit",[Hyt.variable]:"colors.white",[Zyt.variable]:"shadows.lg",_dark:{[Hyt.variable]:"colors.gray.700",[Zyt.variable]:"shadows.dark-lg"},bg:Hyt.reference,boxShadow:Zyt.reference}},Jyt={px:"6",py:"4",fontSize:"xl",fontWeight:"semibold"},Qyt={position:"absolute",top:"2",insetEnd:"3"},tvt={px:"6",py:"2",flex:"1",overflow:"auto"},evt={px:"6",py:"4"},nvt=qyt({baseStyle:Gyt((t=>({overlay:Yyt,dialogContainer:Kyt,dialog:Jmt($yt,t),header:Jyt,closeButton:Qyt,body:tvt,footer:evt}))),sizes:{xs:Xyt("xs"),sm:Xyt("md"),md:Xyt("lg"),lg:Xyt("2xl"),xl:Xyt("4xl"),full:Xyt("full")},defaultProps:{size:"xs"}}),{definePartsStyle:rvt,defineMultiStyleConfig:ivt}=Sn(dft.keys),ovt=ivt({baseStyle:rvt({preview:{borderRadius:"md",py:"1",transitionProperty:"common",transitionDuration:"normal"},input:{borderRadius:"md",py:"1",transitionProperty:"common",transitionDuration:"normal",width:"full",_focusVisible:{boxShadow:"outline"},_placeholder:{opacity:.6}},textarea:{borderRadius:"md",py:"1",transitionProperty:"common",transitionDuration:"normal",width:"full",_focusVisible:{boxShadow:"outline"},_placeholder:{opacity:.6}}})}),{definePartsStyle:avt,defineMultiStyleConfig:svt}=Sn(fft.keys),lvt=Be("form-control-color"),cvt=svt({baseStyle:avt({container:{width:"100%",position:"relative"},requiredIndicator:{marginStart:"1",[lvt.variable]:"colors.red.500",_dark:{[lvt.variable]:"colors.red.300"},color:lvt.reference},helperText:{mt:"2",[lvt.variable]:"colors.gray.600",_dark:{[lvt.variable]:"colors.whiteAlpha.600"},color:lvt.reference,lineHeight:"normal",fontSize:"sm"}})}),{definePartsStyle:uvt,defineMultiStyleConfig:hvt}=Sn(pft.keys),dvt=Be("form-error-color"),fvt=hvt({baseStyle:uvt({text:{[dvt.variable]:"colors.red.500",_dark:{[dvt.variable]:"colors.red.300"},color:dvt.reference,mt:"2",fontSize:"sm",lineHeight:"normal"},icon:{marginEnd:"0.5em",[dvt.variable]:"colors.red.500",_dark:{[dvt.variable]:"colors.red.300"},color:dvt.reference}})}),pvt={baseStyle:{fontSize:"md",marginEnd:"3",mb:"2",fontWeight:"medium",transitionProperty:"common",transitionDuration:"normal",opacity:1,_disabled:{opacity:.4}}},mvt={baseStyle:{fontFamily:"heading",fontWeight:"bold"},sizes:{"4xl":{fontSize:["6xl",null,"7xl"],lineHeight:1},"3xl":{fontSize:["5xl",null,"6xl"],lineHeight:1},"2xl":{fontSize:["4xl",null,"5xl"],lineHeight:[1.2,null,1]},xl:{fontSize:["3xl",null,"4xl"],lineHeight:[1.33,null,1.2]},lg:{fontSize:["2xl",null,"3xl"],lineHeight:[1.33,null,1.2]},md:{fontSize:"xl",lineHeight:1.2},sm:{fontSize:"md",lineHeight:1.2},xs:{fontSize:"sm",lineHeight:1.2}},defaultProps:{size:"xl"}},{defineMultiStyleConfig:gvt,definePartsStyle:yvt}=Sn(cft.keys),vvt=Be("breadcrumb-link-decor"),_vt=gvt({baseStyle:yvt({link:{transitionProperty:"common",transitionDuration:"fast",transitionTimingFunction:"ease-out",outline:"none",color:"inherit",textDecoration:vvt.reference,[vvt.variable]:"none","&:not([aria-current=page])":{cursor:"pointer",_hover:{[vvt.variable]:"underline"},_focusVisible:{boxShadow:"outline"}}}})}),bvt=t=>{const{colorScheme:e,theme:n}=t;if("gray"===e)return{color:ept("gray.800","whiteAlpha.900")(t),_hover:{bg:ept("gray.100","whiteAlpha.200")(t)},_active:{bg:ept("gray.200","whiteAlpha.300")(t)}};const r=Cpt("".concat(e,".200"),.12)(n),i=Cpt("".concat(e,".200"),.24)(n);return{color:ept("".concat(e,".600"),"".concat(e,".200"))(t),bg:"transparent",_hover:{bg:ept("".concat(e,".50"),r)(t)},_active:{bg:ept("".concat(e,".100"),i)(t)}}},xvt=t=>{const{colorScheme:e}=t,n=ept("gray.200","whiteAlpha.300")(t);return{border:"1px solid",borderColor:"gray"===e?n:"currentColor",".chakra-button__group[data-attached][data-orientation=horizontal] > &:not(:last-of-type)":{marginEnd:"-1px"},".chakra-button__group[data-attached][data-orientation=vertical] > &:not(:last-of-type)":{marginBottom:"-1px"},...Jmt(bvt,t)}},wvt={yellow:{bg:"yellow.400",color:"black",hoverBg:"yellow.500",activeBg:"yellow.600"},cyan:{bg:"cyan.400",color:"black",hoverBg:"cyan.500",activeBg:"cyan.600"}},Svt=t=>{var e;const{colorScheme:n}=t;if("gray"===n){const e=ept("gray.100","whiteAlpha.200")(t);return{bg:e,color:ept("gray.800","whiteAlpha.900")(t),_hover:{bg:ept("gray.200","whiteAlpha.300")(t),_disabled:{bg:e}},_active:{bg:ept("gray.300","whiteAlpha.400")(t)}}}const{bg:r="".concat(n,".500"),color:i="white",hoverBg:o="".concat(n,".600"),activeBg:a="".concat(n,".700")}=null!=(e=wvt[n])?e:{},s=ept(r,"".concat(n,".200"))(t);return{bg:s,color:ept(i,"gray.800")(t),_hover:{bg:ept(o,"".concat(n,".300"))(t),_disabled:{bg:s}},_active:{bg:ept(a,"".concat(n,".400"))(t)}}},Evt=t=>{const{colorScheme:e}=t;return{padding:0,height:"auto",lineHeight:"normal",verticalAlign:"baseline",color:ept("".concat(e,".500"),"".concat(e,".200"))(t),_hover:{textDecoration:"underline",_disabled:{textDecoration:"none"}},_active:{color:ept("".concat(e,".700"),"".concat(e,".500"))(t)}}},Tvt={baseStyle:{lineHeight:"1.2",borderRadius:"md",fontWeight:"semibold",transitionProperty:"common",transitionDuration:"normal",_focusVisible:{boxShadow:"outline"},_disabled:{opacity:.4,cursor:"not-allowed",boxShadow:"none"},_hover:{_disabled:{bg:"initial"}}},variants:{ghost:bvt,outline:xvt,solid:Svt,link:Evt,unstyled:{bg:"none",color:"inherit",display:"inline",lineHeight:"inherit",m:"0",p:"0"}},sizes:{lg:{h:"12",minW:"12",fontSize:"lg",px:"6"},md:{h:"10",minW:"10",fontSize:"md",px:"4"},sm:{h:"8",minW:"8",fontSize:"sm",px:"3"},xs:{h:"6",minW:"6",fontSize:"xs",px:"2"}},defaultProps:{variant:"solid",size:"md",colorScheme:"gray"}},{definePartsStyle:Mvt,defineMultiStyleConfig:Avt}=Sn(kft.keys),Cvt=Be("card-bg"),Pvt=Be("card-padding"),kvt=Be("card-shadow"),Ivt=Be("card-radius"),Ovt=Be("card-border-width","0"),Lvt=Be("card-border-color"),jvt=Mvt({container:{[Cvt.variable]:"colors.chakra-body-bg",backgroundColor:Cvt.reference,boxShadow:kvt.reference,borderRadius:Ivt.reference,color:"chakra-body-text",borderWidth:Ovt.reference,borderColor:Lvt.reference},body:{padding:Pvt.reference,flex:"1 1 0%"},header:{padding:Pvt.reference},footer:{padding:Pvt.reference}}),zvt={sm:Mvt({container:{[Ivt.variable]:"radii.base",[Pvt.variable]:"space.3"}}),md:Mvt({container:{[Ivt.variable]:"radii.md",[Pvt.variable]:"space.5"}}),lg:Mvt({container:{[Ivt.variable]:"radii.xl",[Pvt.variable]:"space.7"}})},Rvt=Avt({baseStyle:jvt,variants:{elevated:Mvt({container:{[kvt.variable]:"shadows.base",_dark:{[Cvt.variable]:"colors.gray.700"}}}),outline:Mvt({container:{[Ovt.variable]:"1px",[Lvt.variable]:"colors.chakra-border-color"}}),filled:Mvt({container:{[Cvt.variable]:"colors.chakra-subtle-bg"}}),unstyled:{body:{[Pvt.variable]:0},header:{[Pvt.variable]:0},footer:{[Pvt.variable]:0}}},sizes:zvt,defaultProps:{variant:"elevated",size:"md"}}),Dvt=jft("close-button-size"),Bvt=jft("close-button-bg"),Fvt={baseStyle:{w:[Dvt.reference],h:[Dvt.reference],borderRadius:"md",transitionProperty:"common",transitionDuration:"normal",_disabled:{opacity:.4,cursor:"not-allowed",boxShadow:"none"},_hover:{[Bvt.variable]:"colors.blackAlpha.100",_dark:{[Bvt.variable]:"colors.whiteAlpha.100"}},_active:{[Bvt.variable]:"colors.blackAlpha.200",_dark:{[Bvt.variable]:"colors.whiteAlpha.200"}},_focusVisible:{boxShadow:"outline"},bg:Bvt.reference},sizes:{lg:{[Dvt.variable]:"sizes.10",fontSize:"md"},md:{[Dvt.variable]:"sizes.8",fontSize:"xs"},sm:{[Dvt.variable]:"sizes.6",fontSize:"2xs"}},defaultProps:{size:"md"}},{variants:Nvt,defaultProps:Uvt}=Jpt,Vvt={baseStyle:{fontFamily:"mono",fontSize:"sm",px:"0.2em",borderRadius:"sm",bg:Xpt.bg.reference,color:Xpt.color.reference,boxShadow:Xpt.shadow.reference},variants:Nvt,defaultProps:Uvt},Wvt={baseStyle:{w:"100%",mx:"auto",maxW:"prose",px:"4"}},Gvt={baseStyle:{opacity:.6,borderColor:"inherit"},variants:{solid:{borderStyle:"solid"},dashed:{borderStyle:"dashed"}},defaultProps:{variant:"solid"}},{definePartsStyle:qvt,defineMultiStyleConfig:Hvt}=Sn(aft.keys),Zvt=Hvt({baseStyle:qvt({container:{borderTopWidth:"1px",borderColor:"inherit",_last:{borderBottomWidth:"1px"}},button:{transitionProperty:"common",transitionDuration:"normal",fontSize:"md",_focusVisible:{boxShadow:"outline"},_hover:{bg:"blackAlpha.50"},_disabled:{opacity:.4,cursor:"not-allowed"},px:"4",py:"2"},panel:{pt:"2",px:"4",pb:"5"},icon:{fontSize:"1.25em"}})}),{definePartsStyle:Xvt,defineMultiStyleConfig:Yvt}=Sn(sft.keys),Kvt=Be("alert-fg"),$vt=Be("alert-bg"),Jvt=Xvt({container:{bg:$vt.reference,px:"4",py:"3"},title:{fontWeight:"bold",lineHeight:"6",marginEnd:"2"},description:{lineHeight:"6"},icon:{color:Kvt.reference,flexShrink:0,marginEnd:"3",w:"5",h:"6"},spinner:{color:Kvt.reference,flexShrink:0,marginEnd:"3",w:"5",h:"5"}});function Qvt(t){const{theme:e,colorScheme:n}=t,r=Cpt("".concat(n,".200"),.16)(e);return{light:"colors.".concat(n,".100"),dark:r}}var t_t=Xvt((t=>{const{colorScheme:e}=t,n=Qvt(t);return{container:{[Kvt.variable]:"colors.".concat(e,".600"),[$vt.variable]:n.light,_dark:{[Kvt.variable]:"colors.".concat(e,".200"),[$vt.variable]:n.dark}}}})),e_t=Xvt((t=>{const{colorScheme:e}=t,n=Qvt(t);return{container:{[Kvt.variable]:"colors.".concat(e,".600"),[$vt.variable]:n.light,_dark:{[Kvt.variable]:"colors.".concat(e,".200"),[$vt.variable]:n.dark},paddingStart:"3",borderStartWidth:"4px",borderStartColor:Kvt.reference}}})),n_t=Xvt((t=>{const{colorScheme:e}=t,n=Qvt(t);return{container:{[Kvt.variable]:"colors.".concat(e,".600"),[$vt.variable]:n.light,_dark:{[Kvt.variable]:"colors.".concat(e,".200"),[$vt.variable]:n.dark},pt:"2",borderTopWidth:"4px",borderTopColor:Kvt.reference}}})),r_t=Xvt((t=>{const{colorScheme:e}=t;return{container:{[Kvt.variable]:"colors.white",[$vt.variable]:"colors.".concat(e,".600"),_dark:{[Kvt.variable]:"colors.gray.900",[$vt.variable]:"colors.".concat(e,".200")},color:Kvt.reference}}})),i_t=Yvt({baseStyle:Jvt,variants:{subtle:t_t,"left-accent":e_t,"top-accent":n_t,solid:r_t},defaultProps:{variant:"subtle",colorScheme:"blue"}}),{definePartsStyle:o_t,defineMultiStyleConfig:a_t}=Sn(lft.keys),s_t=Be("avatar-border-color"),l_t=Be("avatar-bg"),c_t=Be("avatar-font-size"),u_t=Be("avatar-size"),h_t={borderRadius:"full",border:"0.2em solid",borderColor:s_t.reference,[s_t.variable]:"white",_dark:{[s_t.variable]:"colors.gray.800"}},d_t={bg:l_t.reference,fontSize:c_t.reference,width:u_t.reference,height:u_t.reference,lineHeight:"1",[l_t.variable]:"colors.gray.200",_dark:{[l_t.variable]:"colors.whiteAlpha.400"}},f_t=t=>{const{name:e,theme:n}=t,r=e?kpt({string:e}):"colors.gray.400",i=(t=>e=>"dark"===Apt(t)(e))(r)(n);let o="white";return i||(o="gray.800"),{bg:l_t.reference,fontSize:c_t.reference,color:o,borderColor:s_t.reference,verticalAlign:"top",width:u_t.reference,height:u_t.reference,"&:not([data-loaded])":{[l_t.variable]:r},[s_t.variable]:"colors.white",_dark:{[s_t.variable]:"colors.gray.800"}}},p_t={fontSize:c_t.reference,lineHeight:"1"};function m_t(t){const e="100%"!==t?Xdt[t]:void 0;return o_t({container:{[u_t.variable]:null!=e?e:t,[c_t.variable]:"calc(".concat(null!=e?e:t," / 2.5)")},excessLabel:{[u_t.variable]:null!=e?e:t,[c_t.variable]:"calc(".concat(null!=e?e:t," / 2.5)")}})}var g_t={Accordion:Zvt,Alert:i_t,Avatar:a_t({baseStyle:o_t((t=>({badge:Jmt(h_t,t),excessLabel:Jmt(d_t,t),container:Jmt(f_t,t),label:p_t}))),sizes:{"2xs":m_t(4),xs:m_t(6),sm:m_t(8),md:m_t(12),lg:m_t(16),xl:m_t(24),"2xl":m_t(32),full:m_t("100%")},defaultProps:{size:"md"}}),Badge:Jpt,Breadcrumb:_vt,Button:Tvt,Checkbox:mgt,CloseButton:Fvt,Code:Vvt,Container:Wvt,Divider:Gvt,Drawer:nvt,Editable:ovt,Form:cvt,FormError:fvt,FormLabel:pvt,Heading:mvt,Input:Rmt,Kbd:Zgt,Link:Xgt,List:$gt,Menu:nyt,Modal:myt,NumberInput:Lyt,PinInput:Dyt,Popover:Wyt,Progress:$mt,Radio:bgt,Select:Tgt,Skeleton:Cgt,SkipLink:kgt,Slider:Ngt,Spinner:Vgt,Stat:qgt,Switch:tpt,Table:cpt,Tabs:Zpt,Tag:hmt,Textarea:Fmt,Tooltip:Wmt,Card:Rvt,Stepper:ift},y_t={colors:{"chakra-body-text":{_light:"gray.800",_dark:"whiteAlpha.900"},"chakra-body-bg":{_light:"white",_dark:"gray.800"},"chakra-border-color":{_light:"gray.200",_dark:"whiteAlpha.300"},"chakra-inverse-text":{_light:"white",_dark:"gray.800"},"chakra-subtle-bg":{_light:"gray.100",_dark:"gray.700"},"chakra-subtle-text":{_light:"gray.600",_dark:"gray.400"},"chakra-placeholder-color":{_light:"gray.500",_dark:"whiteAlpha.400"}}},v_t={global:{body:{fontFamily:"body",color:"chakra-body-text",bg:"chakra-body-bg",transitionProperty:"background-color",transitionDuration:"normal",lineHeight:"base"},"*::placeholder":{color:"chakra-placeholder-color"},"*, *::before, &::after":{borderColor:"chakra-border-color"}}},__t={useSystemColorMode:!1,initialColorMode:"light",cssVarPrefix:"chakra"},b_t={semanticTokens:y_t,direction:"ltr",...Ydt,components:g_t,styles:v_t,config:__t},x_t={semanticTokens:y_t,direction:"ltr",components:{},...Ydt,styles:v_t,config:__t};function w_t(t){return"function"===typeof t}var S_t,E_t,T_t=t=>function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];let i=[...n],o=n[n.length-1];return function(t){return!!It(t)&&Ddt.every((e=>Object.prototype.hasOwnProperty.call(t,e)))}(o)&&i.length>1?i=i.slice(0,i.length-1):o=t,function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return t=>e.reduce(((t,e)=>e(t)),t)}(...i.map((t=>e=>w_t(t)?t(e):function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return Ft({},...e,A_t)}(e,t))))(o)},M_t=T_t(b_t);T_t(x_t);function A_t(t,e,n,r){if((w_t(t)||w_t(e))&&Object.prototype.hasOwnProperty.call(r,n))return function(){const n=w_t(t)?t(...arguments):t,r=w_t(e)?e(...arguments):e;return Ft({},n,r,A_t)}}var C_t=String.raw,P_t=C_t(S_t||(S_t=WB(["\n  :root,\n  :host {\n    --chakra-vh: 100vh;\n  }\n\n  @supports (height: -webkit-fill-available) {\n    :root,\n    :host {\n      --chakra-vh: -webkit-fill-available;\n    }\n  }\n\n  @supports (height: -moz-fill-available) {\n    :root,\n    :host {\n      --chakra-vh: -moz-fill-available;\n    }\n  }\n\n  @supports (height: 100dvh) {\n    :root,\n    :host {\n      --chakra-vh: 100dvh;\n    }\n  }\n"]))),k_t=()=>(0,Si.jsx)(zi,{styles:P_t}),I_t=t=>{let{scope:e=""}=t;return(0,Si.jsx)(zi,{styles:C_t(E_t||(E_t=WB(['\n      html {\n        line-height: 1.5;\n        -webkit-text-size-adjust: 100%;\n        font-family: system-ui, sans-serif;\n        -webkit-font-smoothing: antialiased;\n        text-rendering: optimizeLegibility;\n        -moz-osx-font-smoothing: grayscale;\n        touch-action: manipulation;\n      }\n\n      body {\n        position: relative;\n        min-height: 100%;\n        margin: 0;\n        font-feature-settings: "kern";\n      }\n\n      '," :where(*, *::before, *::after) {\n        border-width: 0;\n        border-style: solid;\n        box-sizing: border-box;\n        word-wrap: break-word;\n      }\n\n      main {\n        display: block;\n      }\n\n      "," hr {\n        border-top-width: 1px;\n        box-sizing: content-box;\n        height: 0;\n        overflow: visible;\n      }\n\n      "," :where(pre, code, kbd,samp) {\n        font-family: SFMono-Regular, Menlo, Monaco, Consolas, monospace;\n        font-size: 1em;\n      }\n\n      "," a {\n        background-color: transparent;\n        color: inherit;\n        text-decoration: inherit;\n      }\n\n      "," abbr[title] {\n        border-bottom: none;\n        text-decoration: underline;\n        -webkit-text-decoration: underline dotted;\n        text-decoration: underline dotted;\n      }\n\n      "," :where(b, strong) {\n        font-weight: bold;\n      }\n\n      "," small {\n        font-size: 80%;\n      }\n\n      "," :where(sub,sup) {\n        font-size: 75%;\n        line-height: 0;\n        position: relative;\n        vertical-align: baseline;\n      }\n\n      "," sub {\n        bottom: -0.25em;\n      }\n\n      "," sup {\n        top: -0.5em;\n      }\n\n      "," img {\n        border-style: none;\n      }\n\n      "," :where(button, input, optgroup, select, textarea) {\n        font-family: inherit;\n        font-size: 100%;\n        line-height: 1.15;\n        margin: 0;\n      }\n\n      "," :where(button, input) {\n        overflow: visible;\n      }\n\n      "," :where(button, select) {\n        text-transform: none;\n      }\n\n      ",' :where(\n          button::-moz-focus-inner,\n          [type="button"]::-moz-focus-inner,\n          [type="reset"]::-moz-focus-inner,\n          [type="submit"]::-moz-focus-inner\n        ) {\n        border-style: none;\n        padding: 0;\n      }\n\n      '," fieldset {\n        padding: 0.35em 0.75em 0.625em;\n      }\n\n      "," legend {\n        box-sizing: border-box;\n        color: inherit;\n        display: table;\n        max-width: 100%;\n        padding: 0;\n        white-space: normal;\n      }\n\n      "," progress {\n        vertical-align: baseline;\n      }\n\n      "," textarea {\n        overflow: auto;\n      }\n\n      ",' :where([type="checkbox"], [type="radio"]) {\n        box-sizing: border-box;\n        padding: 0;\n      }\n\n      ',' input[type="number"]::-webkit-inner-spin-button,\n      ',' input[type="number"]::-webkit-outer-spin-button {\n        -webkit-appearance: none !important;\n      }\n\n      ',' input[type="number"] {\n        -moz-appearance: textfield;\n      }\n\n      ',' input[type="search"] {\n        -webkit-appearance: textfield;\n        outline-offset: -2px;\n      }\n\n      ',' input[type="search"]::-webkit-search-decoration {\n        -webkit-appearance: none !important;\n      }\n\n      '," ::-webkit-file-upload-button {\n        -webkit-appearance: button;\n        font: inherit;\n      }\n\n      "," details {\n        display: block;\n      }\n\n      "," summary {\n        display: list-item;\n      }\n\n      template {\n        display: none;\n      }\n\n      [hidden] {\n        display: none !important;\n      }\n\n      "," :where(\n          blockquote,\n          dl,\n          dd,\n          h1,\n          h2,\n          h3,\n          h4,\n          h5,\n          h6,\n          hr,\n          figure,\n          p,\n          pre\n        ) {\n        margin: 0;\n      }\n\n      "," button {\n        background: transparent;\n        padding: 0;\n      }\n\n      "," fieldset {\n        margin: 0;\n        padding: 0;\n      }\n\n      "," :where(ol, ul) {\n        margin: 0;\n        padding: 0;\n      }\n\n      "," textarea {\n        resize: vertical;\n      }\n\n      ",' :where(button, [role="button"]) {\n        cursor: pointer;\n      }\n\n      '," button::-moz-focus-inner {\n        border: 0 !important;\n      }\n\n      "," table {\n        border-collapse: collapse;\n      }\n\n      "," :where(h1, h2, h3, h4, h5, h6) {\n        font-size: inherit;\n        font-weight: inherit;\n      }\n\n      "," :where(button, input, optgroup, select, textarea) {\n        padding: 0;\n        line-height: inherit;\n        color: inherit;\n      }\n\n      "," :where(img, svg, video, canvas, audio, iframe, embed, object) {\n        display: block;\n      }\n\n      "," :where(img, video) {\n        max-width: 100%;\n        height: auto;\n      }\n\n      [data-js-focus-visible]\n        :focus:not([data-focus-visible-added]):not(\n          [data-focus-visible-disabled]\n        ) {\n        outline: none;\n        box-shadow: none;\n      }\n\n      "," select::-ms-expand {\n        display: none;\n      }\n\n      ","\n    "])),e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,P_t)})},O_t={light:"chakra-ui-light",dark:"chakra-ui-dark"};var L_t="chakra-ui-color-mode";var j_t,z_t=(j_t=L_t,{ssr:!1,type:"localStorage",get(t){if(!(null==globalThis?void 0:globalThis.document))return t;let e;try{e=localStorage.getItem(j_t)||t}catch(pbt){}return e||t},set(t){try{localStorage.setItem(j_t,t)}catch(pbt){}}});function R_t(t,e){const n=t.match(new RegExp("(^| )".concat(e,"=([^;]+)")));return null==n?void 0:n[2]}function D_t(t,e){return{ssr:!!e,type:"cookie",get:n=>e?R_t(e,t):(null==globalThis?void 0:globalThis.document)&&R_t(document.cookie,t)||n,set(e){document.cookie="".concat(t,"=").concat(e,"; max-age=31536000; path=/")}}}D_t(L_t);var B_t=()=>{};function F_t(t,e){return"cookie"===t.type&&t.ssr?t.get(e):e}function N_t(t){const{value:e,children:n,options:{useSystemColorMode:i,initialColorMode:o,disableTransitionOnChange:a}={},colorModeManager:s=z_t}=t,l="dark"===o?"dark":"light",[c,u]=(0,r.useState)((()=>F_t(s,l))),[h,d]=(0,r.useState)((()=>F_t(s))),{getSystemTheme:f,setClassName:p,setDataset:m,addListener:g}=(0,r.useMemo)((()=>function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{preventTransition:e=!0}=t,n={setDataset:t=>{const r=e?n.preventTransition():void 0;document.documentElement.dataset.theme=t,document.documentElement.style.colorScheme=t,null==r||r()},setClassName(t){document.body.classList.add(t?O_t.dark:O_t.light),document.body.classList.remove(t?O_t.light:O_t.dark)},query:()=>window.matchMedia("(prefers-color-scheme: dark)"),getSystemTheme(t){var e;return(null!=(e=n.query().matches)?e:"dark"===t)?"dark":"light"},addListener(t){const e=n.query(),r=e=>{t(e.matches?"dark":"light")};return"function"===typeof e.addListener?e.addListener(r):e.addEventListener("change",r),()=>{"function"===typeof e.removeListener?e.removeListener(r):e.removeEventListener("change",r)}},preventTransition(){const t=document.createElement("style");return t.appendChild(document.createTextNode("*{-webkit-transition:none!important;-moz-transition:none!important;-o-transition:none!important;-ms-transition:none!important;transition:none!important}")),document.head.appendChild(t),()=>{window.getComputedStyle(document.body),requestAnimationFrame((()=>{requestAnimationFrame((()=>{document.head.removeChild(t)}))}))}}};return n}({preventTransition:a})),[a]),y="system"!==o||c?c:h,v=(0,r.useCallback)((t=>{const e="system"===t?f():t;u(e),p("dark"===e),m(e),s.set(e)}),[s,f,p,m]);Ai((()=>{"system"===o&&d(f())}),[]),(0,r.useEffect)((()=>{const t=s.get();v(t||("system"!==o?l:"system"))}),[s,l,o,v]);const _=(0,r.useCallback)((()=>{v("dark"===y?"light":"dark")}),[y,v]);(0,r.useEffect)((()=>{if(i)return g(v)}),[i,g,v]);const b=(0,r.useMemo)((()=>({colorMode:null!=e?e:y,toggleColorMode:e?B_t:_,setColorMode:e?B_t:v,forced:void 0!==e})),[y,_,v,e]);return(0,Si.jsx)(kn.Provider,{value:b,children:n})}N_t.displayName="ColorModeProvider";var U_t=t=>{const{children:e,colorModeManager:n,portalZIndex:r,resetScope:i,resetCSS:o=!0,theme:a={},environment:s,cssVarsRoot:l,disableEnvironment:c,disableGlobalStyle:u}=t,h=(0,Si.jsx)(Pi,{environment:s,disabled:c,children:e});return(0,Si.jsx)(C$,{theme:a,cssVarsRoot:l,children:(0,Si.jsxs)(N_t,{colorModeManager:n,options:a.config,children:[o?(0,Si.jsx)(I_t,{scope:i}):(0,Si.jsx)(k_t,{}),!u&&(0,Si.jsx)(O$,{}),r?(0,Si.jsx)(Qa,{zIndex:r,children:h}):h]})})},V_t=(t,e)=>t.find((t=>t.id===e));function W_t(t,e){const n=G_t(t,e);return{position:n,index:n?t[n].findIndex((t=>t.id===e)):-1}}function G_t(t,e){for(const[n,r]of Object.entries(t))if(V_t(r,e))return n}function q_t(t){return{position:"fixed",zIndex:"var(--toast-z-index, 5500)",pointerEvents:"none",display:"flex",flexDirection:"column",margin:"top"===t||"bottom"===t?"0 auto":void 0,top:t.includes("top")?"env(safe-area-inset-top, 0px)":void 0,bottom:t.includes("bottom")?"env(safe-area-inset-bottom, 0px)":void 0,right:t.includes("left")?void 0:"env(safe-area-inset-right, 0px)",left:t.includes("right")?void 0:"env(safe-area-inset-left, 0px)"}}var H_t={initial:t=>{const{position:e}=t,n=["top","bottom"].includes(e)?"y":"x";let r=["top-right","bottom-right"].includes(e)?1:-1;return"bottom"===e&&(r=1),{opacity:0,[n]:24*r}},animate:{opacity:1,y:0,x:0,scale:1,transition:{duration:.4,ease:[.4,0,.2,1]}},exit:{opacity:0,scale:.85,transition:{duration:.2,ease:[.4,0,1,1]}}},Z_t=(0,r.memo)((t=>{const{id:e,message:n,onCloseComplete:i,onRequestRemove:o,requestClose:a=!1,position:s="bottom",duration:l=5e3,containerStyle:c,motionVariants:u=H_t,toastSpacing:h="0.5rem"}=t,[d,f]=(0,r.useState)(l),p=Rd();JK((()=>{p||null==i||i()}),[p]),JK((()=>{f(l)}),[l]);const m=()=>{p&&o()};(0,r.useEffect)((()=>{p&&a&&o()}),[p,a,o]),function(t,e){const n=Ga(t);(0,r.useEffect)((()=>{if(null==e)return;let t=null;return t=window.setTimeout((()=>{n()}),e),()=>{t&&window.clearTimeout(t)}}),[e,n])}(m,d);const g=(0,r.useMemo)((()=>({pointerEvents:"auto",maxWidth:560,minWidth:300,margin:h,...c})),[c,h]),y=(0,r.useMemo)((()=>function(t){let e="center";return t.includes("right")&&(e="flex-end"),t.includes("left")&&(e="flex-start"),{display:"flex",flexDirection:"column",alignItems:e}}(s)),[s]);return(0,Si.jsx)(bp.div,{layout:!0,className:"chakra-toast",variants:u,initial:"initial",animate:"animate",exit:"exit",onHoverStart:()=>f(null),onHoverEnd:()=>f(l),custom:{position:s},style:y,children:(0,Si.jsx)(xi.div,{role:"status","aria-atomic":"true",className:"chakra-toast__inner",__css:g,children:Lt(n,{id:e,onClose:m})})})}));function X_t(t){return(0,Si.jsx)(Qi,{viewBox:"0 0 24 24",...t,children:(0,Si.jsx)("path",{fill:"currentColor",d:"M11.983,0a12.206,12.206,0,0,0-8.51,3.653A11.8,11.8,0,0,0,0,12.207,11.779,11.779,0,0,0,11.8,24h.214A12.111,12.111,0,0,0,24,11.791h0A11.766,11.766,0,0,0,11.983,0ZM10.5,16.542a1.476,1.476,0,0,1,1.449-1.53h.027a1.527,1.527,0,0,1,1.523,1.47,1.475,1.475,0,0,1-1.449,1.53h-.027A1.529,1.529,0,0,1,10.5,16.542ZM11,12.5v-6a1,1,0,0,1,2,0v6a1,1,0,1,1-2,0Z"})})}Z_t.displayName="ToastComponent";var[Y_t,K_t]=Ii({name:"AlertContext",hookName:"useAlertContext",providerName:"<Alert />"}),[$_t,J_t]=Ii({name:"AlertStylesContext",hookName:"useAlertStyles",providerName:"<Alert />"}),Q_t={info:{icon:function(t){return(0,Si.jsx)(Qi,{viewBox:"0 0 24 24",...t,children:(0,Si.jsx)("path",{fill:"currentColor",d:"M12,0A12,12,0,1,0,24,12,12.013,12.013,0,0,0,12,0Zm.25,5a1.5,1.5,0,1,1-1.5,1.5A1.5,1.5,0,0,1,12.25,5ZM14.5,18.5h-4a1,1,0,0,1,0-2h.75a.25.25,0,0,0,.25-.25v-4.5a.25.25,0,0,0-.25-.25H10.5a1,1,0,0,1,0-2h1a2,2,0,0,1,2,2v4.75a.25.25,0,0,0,.25.25h.75a1,1,0,1,1,0,2Z"})})},colorScheme:"blue"},warning:{icon:X_t,colorScheme:"orange"},success:{icon:function(t){return(0,Si.jsx)(Qi,{viewBox:"0 0 24 24",...t,children:(0,Si.jsx)("path",{fill:"currentColor",d:"M12,0A12,12,0,1,0,24,12,12.014,12.014,0,0,0,12,0Zm6.927,8.2-6.845,9.289a1.011,1.011,0,0,1-1.43.188L5.764,13.769a1,1,0,1,1,1.25-1.562l4.076,3.261,6.227-8.451A1,1,0,1,1,18.927,8.2Z"})})},colorScheme:"green"},error:{icon:X_t,colorScheme:"red"},loading:{icon:Hi,colorScheme:"blue"}};var tbt=wi((function(t,e){var n;const{status:r="info",addRole:i=!0,...o}=Mn(t),a=null!=(n=t.colorScheme)?n:function(t){return Q_t[t].colorScheme}(r),s=Gi("Alert",{...t,colorScheme:a}),l={width:"100%",display:"flex",alignItems:"center",position:"relative",overflow:"hidden",...s.container};return(0,Si.jsx)(Y_t,{value:{status:r},children:(0,Si.jsx)($_t,{value:s,children:(0,Si.jsx)(xi.div,{"data-status":r,role:i?"alert":void 0,ref:e,...o,className:kt("chakra-alert",t.className),__css:l})})})}));function ebt(t){const{status:e}=K_t(),n=function(t){return Q_t[t].icon}(e),r=J_t(),i="loading"===e?r.spinner:r.icon;return(0,Si.jsx)(xi.span,{display:"inherit","data-status":e,...t,className:kt("chakra-alert__icon",t.className),__css:i,children:t.children||(0,Si.jsx)(n,{h:"100%",w:"100%"})})}tbt.displayName="Alert",ebt.displayName="AlertIcon";var nbt=wi((function(t,e){const n=J_t(),{status:r}=K_t();return(0,Si.jsx)(xi.div,{ref:e,"data-status":r,...t,className:kt("chakra-alert__title",t.className),__css:n.title})}));nbt.displayName="AlertTitle";var rbt=wi((function(t,e){const n=J_t(),{status:r}=K_t(),i={display:"inline",...n.description};return(0,Si.jsx)(xi.div,{ref:e,"data-status":r,...t,className:kt("chakra-alert__desc",t.className),__css:i})}));rbt.displayName="AlertDescription";var ibt=function(t){let e=t;const n=new Set,r=t=>{e=t(e),n.forEach((t=>t()))};return{getState:()=>e,subscribe:e=>(n.add(e),()=>{r((()=>t)),n.delete(e)}),removeToast:(t,e)=>{r((n=>({...n,[e]:n[e].filter((e=>e.id!=t))})))},notify:(t,e)=>{const n=function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};var n,r;obt+=1;const i=null!=(n=e.id)?n:obt,o=null!=(r=e.position)?r:"bottom";return{id:i,message:t,position:o,duration:e.duration,onCloseComplete:e.onCloseComplete,onRequestRemove:()=>ibt.removeToast(String(i),o),status:e.status,requestClose:!1,containerStyle:e.containerStyle}}(t,e),{position:i,id:o}=n;return r((t=>{var e,r;const o=i.includes("top")?[n,...null!=(e=t[i])?e:[]]:[...null!=(r=t[i])?r:[],n];return{...t,[i]:o}})),o},update:(t,e)=>{t&&r((n=>{const r={...n},{position:i,index:o}=W_t(r,t);return i&&-1!==o&&(r[i][o]={...r[i][o],...e,message:sbt(e)}),r}))},closeAll:function(){let{positions:t}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};r((e=>(null!=t?t:["bottom","bottom-right","bottom-left","top","top-left","top-right"]).reduce(((t,n)=>(t[n]=e[n].map((t=>({...t,requestClose:!0}))),t)),{...e})))},close:t=>{r((e=>{const n=G_t(e,t);return n?{...e,[n]:e[n].map((e=>e.id==t?{...e,requestClose:!0}:e))}:e}))},isActive:t=>Boolean(W_t(ibt.getState(),t).position)}}({top:[],"top-left":[],"top-right":[],"bottom-left":[],bottom:[],"bottom-right":[]});var obt=0;var abt=t=>{const{status:e,variant:n="solid",id:r,title:i,isClosable:o,onClose:a,description:s,colorScheme:l,icon:c}=t,u=r?{root:"toast-".concat(r),title:"toast-".concat(r,"-title"),description:"toast-".concat(r,"-description")}:void 0;return(0,Si.jsxs)(tbt,{addRole:!1,status:e,variant:n,id:null==u?void 0:u.root,alignItems:"start",borderRadius:"md",boxShadow:"lg",paddingEnd:8,textAlign:"start",width:"auto",colorScheme:l,children:[(0,Si.jsx)(ebt,{children:c}),(0,Si.jsxs)(xi.div,{flex:"1",maxWidth:"100%",children:[i&&(0,Si.jsx)(nbt,{id:null==u?void 0:u.title,children:i}),s&&(0,Si.jsx)(rbt,{id:null==u?void 0:u.description,display:"block",children:s})]}),o&&(0,Si.jsx)(u9,{size:"sm",onClick:a,position:"absolute",insetEnd:1,top:1})]})};function sbt(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{render:e,toastComponent:n=abt}=t;return r=>"function"===typeof e?e({...r,...t}):(0,Si.jsx)(n,{...r,...t})}var[lbt,cbt]=Ii({name:"ToastOptionsContext",strict:!1}),ubt=t=>{const e=(0,r.useSyncExternalStore)(ibt.subscribe,ibt.getState,ibt.getState),{motionVariants:n,component:i=Z_t,portalProps:o}=t,a=Object.keys(e).map((t=>{const r=e[t];return(0,Si.jsx)("div",{role:"region","aria-live":"polite","aria-label":"Notifications-".concat(t),id:"chakra-toast-manager-".concat(t),style:q_t(t),children:(0,Si.jsx)(Ap,{initial:!1,children:r.map((t=>(0,Si.jsx)(i,{motionVariants:n,...t},t.id)))})},t)}));return(0,Si.jsx)(as,{...o,children:a})},hbt=t=>function(e){let{children:n,theme:r=t,toastOptions:i,...o}=e;return(0,Si.jsxs)(U_t,{theme:r,...o,children:[(0,Si.jsx)(lbt,{value:null==i?void 0:i.defaultOptions,children:n}),(0,Si.jsx)(ubt,{...i})]})},dbt=hbt(b_t);hbt(x_t);const fbt=M_t({fonts:{body:"Poppins"},styles:{global:t=>({body:{color:"default",bg:"linear-gradient(#dde3e3, #f7f2e4)"},"@media screen and (max-width: 800px)":{p:{fontSize:"0.7rem"}},p:{fontSize:{md:"0.7rem",lg:"0.75rem",sm:"0.6rem"}}})},colors:{purple:{100:"#CFC3EA",200:"#A198FF",300:"#A068FF",400:"#9A3DFF",500:"#6a2eab",600:"#51218a",700:"#3a1569",800:"#230a48",900:"#0d0027"},brown:{100:"#efeeea",200:"#cfccc1",300:"#afab98",400:"#8f896f",500:"#6f6746",600:"#4c4527",700:"#39341d",800:"#262214",900:"#13110a"},brown2:{100:"#f5f4ef",200:"#e0ddce",300:"#ccc7ae",400:"#b8b18e",500:"#998f5d",600:"#7a724a",700:"#5c5638",800:"#3d3925",900:"#1f1d13"},orange:{100:"#f6ece1",200:"#edd9c2",300:"#e4c6a4",400:"#dbb385",500:"#d2a067",600:"#a88052",700:"#7e603e",800:"#544029",900:"#2a2015"},yellow:{100:"#f7f2e4",200:"#efe6c9",300:"#e8d9ad",400:"#e0cd92",500:"#d8bf77",600:"#ad9a5f",700:"#827347",800:"#564d30",900:"#2b2618"},sage:{100:"#eef2f0",200:"#dee5e1",300:"#cdd9d3",400:"#bdccc4",500:"#acbfb5",600:"#8a9991",700:"#67736d",800:"#454c48",900:"#222624"},green1:{100:"#ebede8",200:"#d7dad2",300:"#c2c8bb",400:"#aeb5a5",500:"#9aa38e",600:"#7b8272",700:"#5c6255",800:"#3e4139",900:"#1f211c"},green2:{100:"#e5e8e3",200:"#ccd1c7",300:"#b2bbaa",400:"#99a48e",500:"#7f8d72",600:"#66715b",700:"#4c5544",800:"#33382e",900:"#191c17"},green3:{100:"#e2e5e3",200:"#c5cbc6",300:"#a7b2aa",400:"#8a988d",500:"#6d7e71",600:"#57655a",700:"#414c44",800:"#2c322d",900:"#161917"},teal1:{100:"#dde3e3",200:"#bbc8c7",300:"#9aacaa",400:"#78918e",500:"#567572",600:"#455e5b",700:"#344644",800:"#222f2e",900:"#111717"},teal2:{100:"#d5ddde",200:"#abbbbd",300:"#82999b",400:"#58777a",500:"#2e5559",600:"#254447",700:"#1c3335",800:"#122224",900:"#091112"}}});o.createRoot(document.getElementById("root")).render((0,Si.jsx)(dbt,{theme:fbt,children:(0,Si.jsx)(zdt,{})})),Rdt()})()})();
//# sourceMappingURL=main.382fe928.js.map